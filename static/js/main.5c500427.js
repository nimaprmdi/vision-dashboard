/*! For license information please see main.5c500427.js.LICENSE.txt */
!function(){var e={3361:function(e,t,r){"use strict";r.d(t,{Z:function(){return ie}});var n=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(n){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,a=String.fromCharCode,o=Object.assign;function s(e){return e.trim()}function l(e,t,r){return e.replace(t,r)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function h(e,t,r){return e.slice(t,r)}function d(e){return e.length}function f(e){return e.length}function p(e,t){return t.push(e),e}var m=1,v=1,g=0,y=0,x=0,b="";function _(e,t,r,n,i,a,o){return{value:e,root:t,parent:r,type:n,props:i,children:a,line:m,column:v,length:o,return:""}}function w(e,t){return o(_("",null,null,"",null,null,0),e,{length:-e.length},t)}function k(){return x=y>0?u(b,--y):0,v--,10===x&&(v=1,m--),x}function S(){return x=y<g?u(b,y++):0,v++,10===x&&(v=1,m++),x}function C(){return u(b,y)}function A(){return y}function T(e,t){return h(b,e,t)}function E(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function M(e){return m=v=1,g=d(b=e),y=0,[]}function I(e){return b="",e}function P(e){return s(T(y-1,L(91===e?e+2:40===e?e+1:e)))}function R(e){for(;(x=C())&&x<33;)S();return E(e)>2||E(x)>3?"":" "}function z(e,t){for(;--t&&S()&&!(x<48||x>102||x>57&&x<65||x>70&&x<97););return T(e,A()+(t<6&&32==C()&&32==S()))}function L(e){for(;S();)switch(x){case e:return y;case 34:case 39:34!==e&&39!==e&&L(x);break;case 40:41===e&&L(e);break;case 92:S()}return y}function D(e,t){for(;S()&&e+x!==57&&(e+x!==84||47!==C()););return"/*"+T(t,y-1)+"*"+a(47===e?e:S())}function O(e){for(;!E(C());)S();return T(e,y)}var F="-ms-",j="-moz-",N="-webkit-",B="comm",Z="rule",U="decl",V="@keyframes";function W(e,t){for(var r="",n=f(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function G(e,t,r,n){switch(e.type){case"@import":case U:return e.return=e.return||e.value;case B:return"";case V:return e.return=e.value+"{"+W(e.children,n)+"}";case Z:e.value=e.props.join(",")}return d(r=W(e.children,n))?e.return=e.value+"{"+r+"}":""}function H(e){return I(X("",null,null,null,[""],e=M(e),0,[0],e))}function X(e,t,r,n,i,o,s,h,f){for(var m=0,v=0,g=s,y=0,x=0,b=0,_=1,w=1,T=1,E=0,M="",I=i,L=o,F=n,j=M;w;)switch(b=E,E=S()){case 40:if(108!=b&&58==u(j,g-1)){-1!=c(j+=l(P(E),"&","&\f"),"&\f")&&(T=-1);break}case 34:case 39:case 91:j+=P(E);break;case 9:case 10:case 13:case 32:j+=R(b);break;case 92:j+=z(A()-1,7);continue;case 47:switch(C()){case 42:case 47:p(q(D(S(),A()),t,r),f);break;default:j+="/"}break;case 123*_:h[m++]=d(j)*T;case 125*_:case 59:case 0:switch(E){case 0:case 125:w=0;case 59+v:x>0&&d(j)-g&&p(x>32?$(j+";",n,r,g-1):$(l(j," ","")+";",n,r,g-2),f);break;case 59:j+=";";default:if(p(F=Y(j,t,r,m,v,i,h,M,I=[],L=[],g),o),123===E)if(0===v)X(j,t,F,F,I,o,g,h,L);else switch(99===y&&110===u(j,3)?100:y){case 100:case 109:case 115:X(e,F,F,n&&p(Y(e,F,F,0,0,i,h,M,i,I=[],g),L),i,L,g,h,n?I:L);break;default:X(j,F,F,F,[""],L,0,h,L)}}m=v=x=0,_=T=1,M=j="",g=s;break;case 58:g=1+d(j),x=b;default:if(_<1)if(123==E)--_;else if(125==E&&0==_++&&125==k())continue;switch(j+=a(E),E*_){case 38:T=v>0?1:(j+="\f",-1);break;case 44:h[m++]=(d(j)-1)*T,T=1;break;case 64:45===C()&&(j+=P(S())),y=C(),v=g=d(M=j+=O(A())),E++;break;case 45:45===b&&2==d(j)&&(_=0)}}return o}function Y(e,t,r,n,a,o,c,u,d,p,m){for(var v=a-1,g=0===a?o:[""],y=f(g),x=0,b=0,w=0;x<n;++x)for(var k=0,S=h(e,v+1,v=i(b=c[x])),C=e;k<y;++k)(C=s(b>0?g[k]+" "+S:l(S,/&\f/g,g[k])))&&(d[w++]=C);return _(e,t,r,0===a?Z:u,d,p,m)}function q(e,t,r){return _(e,t,r,B,a(x),h(e,2,-2),0)}function $(e,t,r,n){return _(e,t,r,U,h(e,0,n),h(e,n+1,-1),n)}var K=function(e,t,r){for(var n=0,i=0;n=i,i=C(),38===n&&12===i&&(t[r]=1),!E(i);)S();return T(e,y)},J=function(e,t){return I(function(e,t){var r=-1,n=44;do{switch(E(n)){case 0:38===n&&12===C()&&(t[r]=1),e[r]+=K(y-1,t,r);break;case 2:e[r]+=P(n);break;case 4:if(44===n){e[++r]=58===C()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=a(n)}}while(n=S());return e}(M(e),t))},Q=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Q.get(r))&&!n){Q.set(e,!0);for(var i=[],a=J(t,i),o=r.props,s=0,l=0;s<a.length;s++)for(var c=0;c<o.length;c++,l++)e.props[l]=i[s]?a[s].replace(/&\f/g,o[c]):o[c]+" "+a[s]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function re(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return"-webkit-print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return N+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return N+e+j+e+F+e+e;case 6828:case 4268:return N+e+F+e+e;case 6165:return N+e+F+"flex-"+e+e;case 5187:return N+e+l(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return N+e+F+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return N+e+F+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return N+e+F+l(e,"shrink","negative")+e;case 5292:return N+e+F+l(e,"basis","preferred-size")+e;case 6060:return"-webkit-box-"+l(e,"-grow","")+N+e+F+l(e,"grow","positive")+e;case 4554:return N+l(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,"-webkit-$1"),/(image-set)/,"-webkit-$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,"-webkit-$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+N+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,"-webkit-$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1-moz-"+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?re(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,d(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":-webkit-")+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1-webkit-"+(45===u(e,14)?"inline-":"")+"box$3$1"+"-webkit-$2$3$1"+"-ms-$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return N+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return N+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return N+e+F+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return N+e+F+e+e}return e}var ne=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case U:e.return=re(e.value,e.length);break;case V:return W([w(e,{value:l(e.value,"@","@-webkit-")})],n);case Z:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return W([w(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return W([w(e,{props:[l(t,/:(plac\w+)/,":-webkit-input-$1")]}),w(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),w(e,{props:[l(t,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||ne;var a,o,s={},l=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)s[t[r]]=!0;l.push(e)}));var c,u,h=[G,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],d=function(e){var t=f(e);return function(r,n,i,a){for(var o="",s=0;s<t;s++)o+=e[s](r,n,i,a)||"";return o}}([ee,te].concat(i,h));o=function(e,t,r,n){c=r,W(H(e?e+"{"+t.styles+"}":t.styles),d),n&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new n({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return p.sheet.hydrate(l),p}},9797:function(e,t){"use strict";t.Z=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}},9886:function(e,t,r){"use strict";r.d(t,{T:function(){return s},w:function(){return o}});var n=r(2791),i=r(3361),a=(r(9140),r(2561),(0,n.createContext)("undefined"!==typeof HTMLElement?(0,i.Z)({key:"css"}):null));a.Provider;var o=function(e){return(0,n.forwardRef)((function(t,r){var i=(0,n.useContext)(a);return e(t,i,r)}))},s=(0,n.createContext)({})},9140:function(e,t,r){"use strict";r.d(t,{O:function(){return m}});var n=function(e){for(var t,r=0,n=0,i=e.length;i>=4;++n,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(i){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)},i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},a=r(9797),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},u=(0,a.Z)((function(e){return l(e)?e:e.replace(o,"-$&").toLowerCase()})),h=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,r){return f={name:t,styles:r,next:f},t}))}return 1===i[e]||l(e)||"number"!==typeof t||0===t?t:t+"px"};function d(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return f={name:r.name,styles:r.styles,next:f},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)f={name:n.name,styles:n.styles,next:f},n=n.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=d(e,t,r[i])+";";else for(var a in r){var o=r[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?n+=a+"{"+t[o]+"}":c(o)&&(n+=u(a)+":"+h(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=d(e,t,o);switch(a){case"animation":case"animationName":n+=u(a)+":"+s+";";break;default:n+=a+"{"+s+"}"}}else for(var l=0;l<o.length;l++)c(o[l])&&(n+=u(a)+":"+h(a,o[l])+";")}return n}(e,t,r);case"function":if(void 0!==e){var i=f,a=r(e);return f=i,d(e,t,a)}}if(null==t)return r;var o=t[r];return void 0!==o?o:r}var f,p=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var m=function(e,t,r){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,a="";f=void 0;var o=e[0];null==o||void 0===o.raw?(i=!1,a+=d(r,t,o)):a+=o[0];for(var s=1;s<e.length;s++)a+=d(r,t,e[s]),i&&(a+=o[s]);p.lastIndex=0;for(var l,c="";null!==(l=p.exec(a));)c+="-"+l[1];return{name:n(a)+c,styles:a,next:f}}},2561:function(e,t,r){"use strict";var n;r.d(t,{L:function(){return o},j:function(){return s}});var i=r(2791),a=!!(n||(n=r.t(i,2))).useInsertionEffect&&(n||(n=r.t(i,2))).useInsertionEffect,o=a||function(e){return e()},s=a||i.useLayoutEffect},5438:function(e,t,r){"use strict";r.d(t,{My:function(){return a},fp:function(){return n},hC:function(){return i}});function n(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):n+=r+" "})),n}var i=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},a=function(e,t,r){i(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+n:"",a,e.sheet,!0);a=a.next}while(void 0!==a)}}},8326:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"}),"Chat");t.Z=o},9823:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.Z=o},1883:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"M7 3H4v3H2V1h5v2zm15 3V1h-5v2h3v3h2zM7 21H4v-3H2v5h5v-2zm13-3v3h-3v2h5v-5h-2zm-1 0c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v12zM15 8H9v2h6V8zm0 3H9v2h6v-2zm0 3H9v2h6v-2z"}),"DocumentScanner");t.Z=o},8261:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"m15 5-1.41 1.41L18.17 11H2v2h16.17l-4.59 4.59L15 19l7-7-7-7z"}),"East");t.Z=o},1286:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.Z=o},1333:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"M18.92 2.01C18.72 1.42 18.16 1 17.5 1h-11c-.66 0-1.21.42-1.42 1.01L3 8v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1V8l-2.08-5.99zM6.5 12c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm11 0c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 7l1.5-4.5h11L19 7H5zm2 13h4v-2l6 3h-4v2z"}),"ElectricCar");t.Z=o},5758:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n)}(r(2791));var i=n(r(5649)),a=r(184);function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var s=(0,i.default)((0,a.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub");t.Z=s},8243:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");t.Z=o},7541:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");t.Z=o},4289:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5-4-4V4h8v3.5l-4 4z"}),"HourglassEmpty");t.Z=o},8095:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"M19 3H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4v4z"}),"LocalHospital");t.Z=o},8008:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.Z=o},7898:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"M14 10H3v2h11v-2zm0-4H3v2h11V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM3 16h7v-2H3v2z"}),"PlaylistAdd");t.Z=o},5985:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"M11.07 12.85c.77-1.39 2.25-2.21 3.11-3.44.91-1.29.4-3.7-2.18-3.7-1.69 0-2.52 1.28-2.87 2.34L6.54 6.96C7.25 4.83 9.18 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41.7 1.15 1.11 3.3.03 4.9-1.2 1.77-2.35 2.31-2.97 3.45-.25.46-.35.76-.35 2.24h-2.89c-.01-.78-.13-2.05.48-3.15zM14 20c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"}),"QuestionMark");t.Z=o},5246:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)([(0,a.jsx)("path",{d:"M19.5 3.5 18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2v14H3v3c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V2l-1.5 1.5zM19 19c0 .55-.45 1-1 1s-1-.45-1-1v-3H8V5h11v14z"},"0"),(0,a.jsx)("path",{d:"M9 7h6v2H9zm7 0h2v2h-2zm-7 3h6v2H9zm7 0h2v2h-2z"},"1")],"ReceiptLong");t.Z=o},3332:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(5649)),a=r(184),o=(0,i.default)((0,a.jsx)("path",{d:"m18.25 7.6-5.5-3.18c-.46-.27-1.04-.27-1.5 0L5.75 7.6c-.46.27-.75.76-.75 1.3v6.35c0 .54.29 1.03.75 1.3l5.5 3.18c.46.27 1.04.27 1.5 0l5.5-3.18c.46-.27.75-.76.75-1.3V8.9c0-.54-.29-1.03-.75-1.3zM7 14.96v-4.62l4 2.32v4.61l-4-2.31zm5-4.03L8 8.61l4-2.31 4 2.31-4 2.32zm1 6.34v-4.61l4-2.32v4.62l-4 2.31zM7 2H3.5C2.67 2 2 2.67 2 3.5V7h2V4h3V2zm10 0h3.5c.83 0 1.5.67 1.5 1.5V7h-2V4h-3V2zM7 22H3.5c-.83 0-1.5-.67-1.5-1.5V17h2v3h3v2zm10 0h3.5c.83 0 1.5-.67 1.5-1.5V17h-2v3h-3v2z"}),"ViewInAr");t.Z=o},5649:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=r(8610)},6532:function(e,t){"use strict";var r,n=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case s:case o:case d:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case h:case m:case p:case l:return e;default:return t}}case i:return t}}}r=Symbol.for("react.module.reference")},8457:function(e,t,r){"use strict";r(6532)},7107:function(e,t,r){"use strict";r.d(t,{Z:function(){return Z}});var n=r(2793),i=r(1048),a=r(6189),o=r(2466),s=r(5080),l=r(7416),c=r(104),u=r(4942);function h(e,t){var r;return(0,n.Z)({toolbar:(r={minHeight:56},(0,u.Z)(r,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,u.Z)(r,e.up("sm"),{minHeight:64}),r)},t)}var d=r(2065),f={black:"#000",white:"#fff"},p={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},m={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},v={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},g={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},y={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},x={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},b={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},_=["mode","contrastThreshold","tonalOffset"],w={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:f.white,default:f.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},k={text:{primary:f.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:f.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function S(e,t,r,n){var i=n.light||n,a=n.dark||1.5*n;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:"light"===t?e.light=(0,d.$n)(e.main,i):"dark"===t&&(e.dark=(0,d._j)(e.main,a)))}function C(e){var t=e.mode,r=void 0===t?"light":t,s=e.contrastThreshold,l=void 0===s?3:s,c=e.tonalOffset,u=void 0===c?.2:c,h=(0,i.Z)(e,_),C=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[200],light:y[50],dark:y[400]}:{main:y[700],light:y[400],dark:y[800]}}(r),A=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[200],light:m[50],dark:m[400]}:{main:m[500],light:m[300],dark:m[700]}}(r),T=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[500],light:v[300],dark:v[700]}:{main:v[700],light:v[400],dark:v[800]}}(r),E=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:x[400],light:x[300],dark:x[700]}:{main:x[700],light:x[500],dark:x[900]}}(r),M=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:b[400],light:b[300],dark:b[700]}:{main:b[800],light:b[500],dark:b[900]}}(r),I=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[400],light:g[300],dark:g[700]}:{main:"#ed6c02",light:g[500],dark:g[900]}}(r);function P(e){return(0,d.mi)(e,k.text.primary)>=l?k.text.primary:w.text.primary}var R=function(e){var t=e.color,r=e.name,i=e.mainShade,o=void 0===i?500:i,s=e.lightShade,l=void 0===s?300:s,c=e.darkShade,h=void 0===c?700:c;if(!(t=(0,n.Z)({},t)).main&&t[o]&&(t.main=t[o]),!t.hasOwnProperty("main"))throw new Error((0,a.Z)(11,r?" (".concat(r,")"):"",o));if("string"!==typeof t.main)throw new Error((0,a.Z)(12,r?" (".concat(r,")"):"",JSON.stringify(t.main)));return S(t,"light",l,u),S(t,"dark",h,u),t.contrastText||(t.contrastText=P(t.main)),t},z={dark:k,light:w};return(0,o.Z)((0,n.Z)({common:(0,n.Z)({},f),mode:r,primary:R({color:C,name:"primary"}),secondary:R({color:A,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:R({color:T,name:"error"}),warning:R({color:I,name:"warning"}),info:R({color:E,name:"info"}),success:R({color:M,name:"success"}),grey:p,contrastThreshold:l,getContrastText:P,augmentColor:R,tonalOffset:u},z[r]),h)}var A=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var T={textTransform:"uppercase"},E='"Roboto", "Helvetica", "Arial", sans-serif';function M(e,t){var r="function"===typeof t?t(e):t,a=r.fontFamily,s=void 0===a?E:a,l=r.fontSize,c=void 0===l?14:l,u=r.fontWeightLight,h=void 0===u?300:u,d=r.fontWeightRegular,f=void 0===d?400:d,p=r.fontWeightMedium,m=void 0===p?500:p,v=r.fontWeightBold,g=void 0===v?700:v,y=r.htmlFontSize,x=void 0===y?16:y,b=r.allVariants,_=r.pxToRem,w=(0,i.Z)(r,A);var k=c/14,S=_||function(e){return"".concat(e/x*k,"rem")},C=function(e,t,r,i,a){return(0,n.Z)({fontFamily:s,fontWeight:e,fontSize:S(t),lineHeight:r},s===E?{letterSpacing:"".concat((o=i/t,Math.round(1e5*o)/1e5),"em")}:{},a,b);var o},M={h1:C(h,96,1.167,-1.5),h2:C(h,60,1.2,-.5),h3:C(f,48,1.167,0),h4:C(f,34,1.235,.25),h5:C(f,24,1.334,0),h6:C(m,20,1.6,.15),subtitle1:C(f,16,1.75,.15),subtitle2:C(m,14,1.57,.1),body1:C(f,16,1.5,.15),body2:C(f,14,1.43,.15),button:C(m,14,1.75,.4,T),caption:C(f,12,1.66,.4),overline:C(f,12,2.66,1,T)};return(0,o.Z)((0,n.Z)({htmlFontSize:x,pxToRem:S,fontFamily:s,fontSize:c,fontWeightLight:h,fontWeightRegular:f,fontWeightMedium:m,fontWeightBold:g},M),w,{clone:!1})}function I(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var P=["none",I(0,2,1,-1,0,1,1,0,0,1,3,0),I(0,3,1,-2,0,2,2,0,0,1,5,0),I(0,3,3,-2,0,3,4,0,0,1,8,0),I(0,2,4,-1,0,4,5,0,0,1,10,0),I(0,3,5,-1,0,5,8,0,0,1,14,0),I(0,3,5,-1,0,6,10,0,0,1,18,0),I(0,4,5,-2,0,7,10,1,0,2,16,1),I(0,5,5,-3,0,8,10,1,0,3,14,2),I(0,5,6,-3,0,9,12,1,0,3,16,2),I(0,6,6,-3,0,10,14,1,0,4,18,3),I(0,6,7,-4,0,11,15,1,0,4,20,3),I(0,7,8,-4,0,12,17,2,0,5,22,4),I(0,7,8,-4,0,13,19,2,0,5,24,4),I(0,7,9,-4,0,14,21,2,0,5,26,4),I(0,8,9,-5,0,15,22,2,0,6,28,5),I(0,8,10,-5,0,16,24,2,0,6,30,5),I(0,8,11,-5,0,17,26,2,0,6,32,5),I(0,9,11,-5,0,18,28,2,0,7,34,6),I(0,9,12,-6,0,19,29,2,0,7,36,6),I(0,10,13,-6,0,20,31,3,0,8,38,7),I(0,10,13,-6,0,21,33,3,0,8,40,7),I(0,10,14,-6,0,22,35,3,0,8,42,7),I(0,11,14,-7,0,23,36,3,0,9,44,8),I(0,11,15,-7,0,24,38,3,0,9,46,8)],R=["duration","easing","delay"],z={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},L={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function D(e){return"".concat(Math.round(e),"ms")}function O(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function F(e){var t=(0,n.Z)({},z,e.easing),r=(0,n.Z)({},L,e.duration);return(0,n.Z)({getAutoHeightDuration:O,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.duration,o=void 0===a?r.standard:a,s=n.easing,l=void 0===s?t.easeInOut:s,c=n.delay,u=void 0===c?0:c;(0,i.Z)(n,R);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof o?o:D(o)," ").concat(l," ").concat("string"===typeof u?u:D(u))})).join(",")}},e,{easing:t,duration:r})}var j={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},N=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,r=void 0===t?{}:t,u=e.palette,d=void 0===u?{}:u,f=e.transitions,p=void 0===f?{}:f,m=e.typography,v=void 0===m?{}:m,g=(0,i.Z)(e,N);if(e.vars)throw new Error((0,a.Z)(18));var y=C(d),x=(0,s.Z)(e),b=(0,o.Z)(x,{mixins:h(x.breakpoints,r),palette:y,shadows:P.slice(),typography:M(y,v),transitions:F(p),zIndex:(0,n.Z)({},j)});b=(0,o.Z)(b,g);for(var _=arguments.length,w=new Array(_>1?_-1:0),k=1;k<_;k++)w[k-1]=arguments[k];return(b=w.reduce((function(e,t){return(0,o.Z)(e,t)}),b)).unstable_sxConfig=(0,n.Z)({},l.Z,null==g?void 0:g.unstable_sxConfig),b.unstable_sx=function(e){return(0,c.Z)({sx:e,theme:this})},b}var Z=B},6482:function(e,t,r){"use strict";var n=(0,r(7107).Z)();t.Z=n},7630:function(e,t,r){"use strict";r.d(t,{ZP:function(){return E},FO:function(){return C},Dz:function(){return A}});var n=r(2982),i=r(885),a=r(916),o=r(4695),s=r(2421),l=r(5080),c=r(7312),u=["variant"];function h(e){return 0===e.length}function d(e){var t=e.variant,r=(0,a.Z)(e,u),n=t||"";return Object.keys(r).sort().forEach((function(t){n+="color"===t?h(n)?e[t]:(0,c.Z)(e[t]):"".concat(h(n)?t:(0,c.Z)(t)).concat((0,c.Z)(e[t].toString()))})),n}var f=r(104),p=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],m=["theme"],v=["theme"];function g(e){return 0===Object.keys(e).length}function y(e){return"string"===typeof e&&e.charCodeAt(0)>96}var x=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},b=function(e,t){var r=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(r=t.components[e].variants);var n={};return r.forEach((function(e){var t=d(e.props);n[t]=e.style})),n},_=function(e,t,r,n){var i,a,o=e.ownerState,s=void 0===o?{}:o,l=[],c=null==r||null==(i=r.components)||null==(a=i[n])?void 0:a.variants;return c&&c.forEach((function(r){var n=!0;Object.keys(r.props).forEach((function(t){s[t]!==r.props[t]&&e[t]!==r.props[t]&&(n=!1)})),n&&l.push(t[d(r.props)])})),l};function w(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var k=(0,l.Z)();var S=r(6482),C=function(e){return w(e)&&"classes"!==e},A=w,T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,r=void 0===t?k:t,l=e.rootShouldForwardProp,c=void 0===l?w:l,u=e.slotShouldForwardProp,h=void 0===u?w:u,d=function(e){var t=g(e.theme)?r:e.theme;return(0,f.Z)((0,o.Z)({},e,{theme:t}))};return d.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Co)(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var l,u=t.name,f=t.slot,k=t.skipVariantsResolver,S=t.skipSx,C=t.overridesResolver,A=(0,a.Z)(t,p),T=void 0!==k?k:f&&"Root"!==f||!1,E=S||!1;var M=w;"Root"===f?M=c:f?M=h:y(e)&&(M=void 0);var I=(0,s.ZP)(e,(0,o.Z)({shouldForwardProp:M,label:l},A)),P=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),l=1;l<t;l++)s[l-1]=arguments[l];var c=s?s.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var n=t.theme,i=(0,a.Z)(t,m);return e((0,o.Z)({theme:g(n)?r:n},i))}:e})):[],h=e;u&&C&&c.push((function(e){var t=g(e.theme)?r:e.theme,n=x(u,t);if(n){var a={};return Object.entries(n).forEach((function(r){var n=(0,i.Z)(r,2),s=n[0],l=n[1];a[s]="function"===typeof l?l((0,o.Z)({},e,{theme:t})):l})),C(e,a)}return null})),u&&!T&&c.push((function(e){var t=g(e.theme)?r:e.theme;return _(e,b(u,t),t,u)})),E||c.push(d);var f=c.length-s.length;if(Array.isArray(e)&&f>0){var p=new Array(f).fill("");(h=[].concat((0,n.Z)(e),(0,n.Z)(p))).raw=[].concat((0,n.Z)(e.raw),(0,n.Z)(p))}else"function"===typeof e&&e.__emotion_real!==e&&(h=function(t){var n=t.theme,i=(0,a.Z)(t,v);return e((0,o.Z)({theme:g(n)?r:n},i))});var y=I.apply(void 0,[h].concat((0,n.Z)(c)));return y};return I.withConfig&&(P.withConfig=I.withConfig),P}}({defaultTheme:S.Z,rootShouldForwardProp:C}),E=T},1046:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(5735);var i=r(3459);function a(e){var t=e.props,r=e.name,a=e.defaultTheme,o=function(e){var t=e.theme,r=e.name,i=e.props;return t&&t.components&&t.components[r]&&t.components[r].defaultProps?(0,n.Z)(t.components[r].defaultProps,i):i}({theme:(0,i.Z)(a),name:r,props:t});return o}var o=r(6482);function s(e){return a({props:e.props,name:e.name,defaultTheme:o.Z})}},4036:function(e,t,r){"use strict";var n=r(7312);t.Z=n.Z},1260:function(e,t,r){"use strict";var n=r(8949);t.Z=n.Z},9201:function(e,t,r){"use strict";r.d(t,{Z:function(){return x}});var n=r(2793),i=r(2791),a=r(1048),o=r(8182),s=r(4419),l=r(4036),c=r(1046),u=r(7630),h=r(5878),d=r(1217);function f(e){return(0,d.Z)("MuiSvgIcon",e)}(0,h.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var p=r(184),m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],v=(0,u.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,"inherit"!==r.color&&t["color".concat((0,l.Z)(r.color))],t["fontSize".concat((0,l.Z)(r.fontSize))]]}})((function(e){var t,r,n,i,a,o,s,l,c,u,h,d,f,p,m,v,g,y=e.theme,x=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(r=t.create)?void 0:r.call(t,"fill",{duration:null==(n=y.transitions)||null==(i=n.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(a=y.typography)||null==(o=a.pxToRem)?void 0:o.call(a,20))||"1.25rem",medium:(null==(s=y.typography)||null==(l=s.pxToRem)?void 0:l.call(s,24))||"1.5rem",large:(null==(c=y.typography)||null==(u=c.pxToRem)?void 0:u.call(c,35))||"2.1875rem"}[x.fontSize],color:null!=(h=null==(d=(y.vars||y).palette)||null==(f=d[x.color])?void 0:f.main)?h:{action:null==(p=(y.vars||y).palette)||null==(m=p.action)?void 0:m.active,disabled:null==(v=(y.vars||y).palette)||null==(g=v.action)?void 0:g.disabled,inherit:void 0}[x.color]}})),g=i.forwardRef((function(e,t){var r=(0,c.Z)({props:e,name:"MuiSvgIcon"}),i=r.children,u=r.className,h=r.color,d=void 0===h?"inherit":h,g=r.component,y=void 0===g?"svg":g,x=r.fontSize,b=void 0===x?"medium":x,_=r.htmlColor,w=r.inheritViewBox,k=void 0!==w&&w,S=r.titleAccess,C=r.viewBox,A=void 0===C?"0 0 24 24":C,T=(0,a.Z)(r,m),E=(0,n.Z)({},r,{color:d,component:y,fontSize:b,instanceFontSize:e.fontSize,inheritViewBox:k,viewBox:A}),M={};k||(M.viewBox=A);var I=function(e){var t=e.color,r=e.fontSize,n=e.classes,i={root:["root","inherit"!==t&&"color".concat((0,l.Z)(t)),"fontSize".concat((0,l.Z)(r))]};return(0,s.Z)(i,f,n)}(E);return(0,p.jsxs)(v,(0,n.Z)({as:y,className:(0,o.Z)(I.root,u),focusable:"false",color:_,"aria-hidden":!S||void 0,role:S?"img":void 0,ref:t},M,T,{ownerState:E,children:[i,S?(0,p.jsx)("title",{children:S}):null]}))}));g.muiName="SvgIcon";var y=g;function x(e,t){function r(r,i){return(0,p.jsx)(y,(0,n.Z)({"data-testid":"".concat(t,"Icon"),ref:i},r,{children:e}))}return r.muiName=y.muiName,i.memo(i.forwardRef(r))}},3199:function(e,t,r){"use strict";var n=r(3981);t.Z=n.Z},8610:function(e,t,r){"use strict";r.r(t),r.d(t,{capitalize:function(){return i.Z},createChainedFunction:function(){return a.Z},createSvgIcon:function(){return o.Z},debounce:function(){return s.Z},deprecatedPropType:function(){return l},isMuiElement:function(){return c.Z},ownerDocument:function(){return u.Z},ownerWindow:function(){return h.Z},requirePropFactory:function(){return d},setRef:function(){return f},unstable_ClassNameGenerator:function(){return _},unstable_useEnhancedEffect:function(){return p.Z},unstable_useId:function(){return m.Z},unsupportedProp:function(){return v},useControlled:function(){return g.Z},useEventCallback:function(){return y.Z},useForkRef:function(){return x.Z},useIsFocusVisible:function(){return b.Z}});var n=r(5902),i=r(4036),a=r(1260),o=r(9201),s=r(3199);var l=function(e,t){return function(){return null}},c=r(9103),u=r(8301),h=r(7602);r(1860);var d=function(e,t){return function(){return null}},f=r(2971).Z,p=r(162),m=r(7384);var v=function(e,t,r,n,i){return null},g=r(8278),y=r(9683),x=r(2071),b=r(8221),_={configure:function(e){n.Z.configure(e)}}},9103:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(2791);var i=function(e,t){return n.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},8301:function(e,t,r){"use strict";var n=r(9723);t.Z=n.Z},7602:function(e,t,r){"use strict";var n=r(7979);t.Z=n.Z},8278:function(e,t,r){"use strict";var n=r(8959);t.Z=n.Z},162:function(e,t,r){"use strict";var n=r(5721);t.Z=n.Z},9683:function(e,t,r){"use strict";var n=r(8956);t.Z=n.Z},2071:function(e,t,r){"use strict";var n=r(7563);t.Z=n.Z},7384:function(e,t,r){"use strict";var n=r(6248);t.Z=n.Z},8221:function(e,t,r){"use strict";var n=r(5372);t.Z=n.Z},8023:function(e,t,r){"use strict";var n=r(2791).createContext(null);t.Z=n},9598:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(2791),i=r(8023);function a(){return n.useContext(i.Z)}},2421:function(e,t,r){"use strict";r.d(t,{ZP:function(){return b},Co:function(){return _}});var n=r(2791),i=r(7462),a=r(9797),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,s=(0,a.Z)((function(e){return o.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),l=r(9886),c=r(5438),u=r(9140),h=r(2561),d=s,f=function(e){return"theme"!==e},p=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?d:f},m=function(e,t,r){var n;if(t){var i=t.shouldForwardProp;n=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof n&&r&&(n=e.__emotion_forwardProp),n},v=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;(0,c.hC)(t,r,n);(0,h.L)((function(){return(0,c.My)(t,r,n)}));return null},g=function e(t,r){var a,o,s=t.__emotion_real===t,h=s&&t.__emotion_base||t;void 0!==r&&(a=r.label,o=r.target);var d=m(t,r,s),f=d||p(h),g=!f("as");return function(){var y=arguments,x=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==a&&x.push("label:"+a+";"),null==y[0]||void 0===y[0].raw)x.push.apply(x,y);else{0,x.push(y[0][0]);for(var b=y.length,_=1;_<b;_++)x.push(y[_],y[0][_])}var w=(0,l.w)((function(e,t,r){var i=g&&e.as||h,a="",s=[],m=e;if(null==e.theme){for(var y in m={},e)m[y]=e[y];m.theme=(0,n.useContext)(l.T)}"string"===typeof e.className?a=(0,c.fp)(t.registered,s,e.className):null!=e.className&&(a=e.className+" ");var b=(0,u.O)(x.concat(s),t.registered,m);a+=t.key+"-"+b.name,void 0!==o&&(a+=" "+o);var _=g&&void 0===d?p(i):f,w={};for(var k in e)g&&"as"===k||_(k)&&(w[k]=e[k]);return w.className=a,w.ref=r,(0,n.createElement)(n.Fragment,null,(0,n.createElement)(v,{cache:t,serialized:b,isStringTag:"string"===typeof i}),(0,n.createElement)(i,w))}));return w.displayName=void 0!==a?a:"Styled("+("string"===typeof h?h:h.displayName||h.name||"Component")+")",w.defaultProps=t.defaultProps,w.__emotion_real=w,w.__emotion_base=h,w.__emotion_styles=x,w.__emotion_forwardProp=d,Object.defineProperty(w,"toString",{value:function(){return"."+o}}),w.withComponent=function(t,n){return e(t,(0,i.Z)({},r,n,{shouldForwardProp:m(w,n,!0)})).apply(void 0,x)},w}},y=g.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){y[e]=y(e)}));var x=y;function b(e,t){return x(e,t)}var _=function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},1184:function(e,t,r){"use strict";r.d(t,{L7:function(){return l},P$:function(){return u},VO:function(){return i},W8:function(){return s},dt:function(){return c},k9:function(){return o}});var n=r(2466),i={xs:0,sm:600,md:900,lg:1200,xl:1536},a={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(i[e],"px)")}};function o(e,t,r){var n=e.theme||{};if(Array.isArray(t)){var o=n.breakpoints||a;return t.reduce((function(e,n,i){return e[o.up(o.keys[i])]=r(t[i]),e}),{})}if("object"===typeof t){var s=n.breakpoints||a;return Object.keys(t).reduce((function(e,n){if(-1!==Object.keys(s.values||i).indexOf(n)){e[s.up(n)]=r(t[n],n)}else{var a=n;e[a]=t[a]}return e}),{})}return r(t)}function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null==(e=t.keys)?void 0:e.reduce((function(e,r){return e[t.up(r)]={},e}),{});return r||{}}function l(e,t){return e.reduce((function(e,t){var r=e[t];return(!r||0===Object.keys(r).length)&&delete e[t],e}),t)}function c(e){for(var t=s(e),r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o=[t].concat(i).reduce((function(e,t){return(0,n.Z)(e,t)}),{});return l(Object.keys(t),o)}function u(e){var t,r=e.values,n=e.breakpoints,i=e.base||function(e,t){if("object"!==typeof e)return{};var r={},n=Object.keys(t);return Array.isArray(e)?n.forEach((function(t,n){n<e.length&&(r[t]=!0)})):n.forEach((function(t){null!=e[t]&&(r[t]=!0)})),r}(r,n),a=Object.keys(i);return 0===a.length?r:a.reduce((function(e,n,i){return Array.isArray(r)?(e[n]=null!=r[i]?r[i]:r[t],t=i):"object"===typeof r?(e[n]=null!=r[n]?r[n]:r[t],t=n):e[n]=r,e}),{})}},2065:function(e,t,r){"use strict";r.d(t,{$n:function(){return h},Fq:function(){return c},_4:function(){return d},_j:function(){return u},mi:function(){return l}});var n=r(6189);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),r)}function a(e){if(e.type)return e;if("#"===e.charAt(0))return a(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),r=e.match(t);return r&&1===r[0].length&&(r=r.map((function(e){return e+e}))),r?"rgb".concat(4===r.length?"a":"","(").concat(r.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),r=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(r))throw new Error((0,n.Z)(9,e));var i,o=e.substring(t+1,e.length-1);if("color"===r){if(i=(o=o.split(" ")).shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,n.Z)(10,i))}else o=o.split(",");return{type:r,values:o=o.map((function(e){return parseFloat(e)})),colorSpace:i}}function o(e){var t=e.type,r=e.colorSpace,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),n=-1!==t.indexOf("color")?"".concat(r," ").concat(n.join(" ")):"".concat(n.join(", ")),"".concat(t,"(").concat(n,")")}function s(e){var t="hsl"===(e=a(e)).type||"hsla"===e.type?a(function(e){var t=(e=a(e)).values,r=t[0],n=t[1]/100,i=t[2]/100,s=n*Math.min(i,1-i),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+r/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)},c="rgb",u=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(c+="a",u.push(t[3])),o({type:c,values:u})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function l(e,t){var r=s(e),n=s(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function c(e,t){return e=a(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,o(e)}function u(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]*=1-t;return o(e)}function h(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return o(e)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return s(e)>.5?u(e,t):h(e,t)}},5080:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}});var n=r(4695),i=r(916),a=r(2466),o=r(4942),s=["values","unit","step"];function l(e){var t=e.values,r=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,a=e.unit,l=void 0===a?"px":a,c=e.step,u=void 0===c?5:c,h=(0,i.Z)(e,s),d=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,n.Z)({},e,(0,o.Z)({},t.key,t.val))}),{})}(r),f=Object.keys(d);function p(e){var t="number"===typeof r[e]?r[e]:e;return"@media (min-width:".concat(t).concat(l,")")}function m(e){var t="number"===typeof r[e]?r[e]:e;return"@media (max-width:".concat(t-u/100).concat(l,")")}function v(e,t){var n=f.indexOf(t);return"@media (min-width:".concat("number"===typeof r[e]?r[e]:e).concat(l,") and ")+"(max-width:".concat((-1!==n&&"number"===typeof r[f[n]]?r[f[n]]:t)-u/100).concat(l,")")}return(0,n.Z)({keys:f,values:d,up:p,down:m,between:v,only:function(e){return f.indexOf(e)+1<f.length?v(e,f[f.indexOf(e)+1]):p(e)},not:function(e){var t=f.indexOf(e);return 0===t?p(f[1]):t===f.length-1?m(f[t]):v(e,f[f.indexOf(e)+1]).replace("@media","@media not all and")},unit:l},h)}var c={borderRadius:4},u=r(5682);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,u.hB)({spacing:e}),r=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=0===r.length?[1]:r;return i.map((function(e){var r=t(e);return"number"===typeof r?"".concat(r,"px"):r})).join(" ")};return r.mui=!0,r}var d=r(104),f=r(7416),p=["breakpoints","palette","spacing","shape"];var m=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,r=void 0===t?{}:t,o=e.palette,s=void 0===o?{}:o,u=e.spacing,m=e.shape,v=void 0===m?{}:m,g=(0,i.Z)(e,p),y=l(r),x=h(u),b=(0,a.Z)({breakpoints:y,direction:"ltr",components:{},palette:(0,n.Z)({mode:"light"},s),spacing:x,shape:(0,n.Z)({},c,v)},g),_=arguments.length,w=new Array(_>1?_-1:0),k=1;k<_;k++)w[k-1]=arguments[k];return(b=w.reduce((function(e,t){return(0,a.Z)(e,t)}),b)).unstable_sxConfig=(0,n.Z)({},f.Z,null==g?void 0:g.unstable_sxConfig),b.unstable_sx=function(e){return(0,d.Z)({sx:e,theme:this})},b}},8247:function(e,t,r){"use strict";var n=r(2466);t.Z=function(e,t){return t?(0,n.Z)(e,t,{clone:!1}):e}},5682:function(e,t,r){"use strict";r.d(t,{hB:function(){return m},eI:function(){return p},NA:function(){return v},e6:function(){return x},o3:function(){return b}});var n=r(885),i=r(1184),a=r(8529),o=r(8247);var s={m:"margin",p:"padding"},l={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},u=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}((function(e){if(e.length>2){if(!c[e])return[e];e=c[e]}var t=e.split(""),r=(0,n.Z)(t,2),i=r[0],a=r[1],o=s[i],u=l[a]||"";return Array.isArray(u)?u.map((function(e){return o+e})):[o+u]})),h=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],f=[].concat(h,d);function p(e,t,r,n){var i,o=null!=(i=(0,a.DW)(e,t,!1))?i:r;return"number"===typeof o?function(e){return"string"===typeof e?e:o*e}:Array.isArray(o)?function(e){return"string"===typeof e?e:o[e]}:"function"===typeof o?o:function(){}}function m(e){return p(e,"spacing",8)}function v(e,t){if("string"===typeof t||null==t)return t;var r=e(Math.abs(t));return t>=0?r:"number"===typeof r?-r:"-".concat(r)}function g(e,t,r,n){if(-1===t.indexOf(r))return null;var a=function(e,t){return function(r){return e.reduce((function(e,n){return e[n]=v(t,r),e}),{})}}(u(r),n),o=e[r];return(0,i.k9)(e,o,a)}function y(e,t){var r=m(e.theme);return Object.keys(e).map((function(n){return g(e,t,n,r)})).reduce(o.Z,{})}function x(e){return y(e,h)}function b(e){return y(e,d)}function _(e){return y(e,f)}x.propTypes={},x.filterProps=h,b.propTypes={},b.filterProps=d,_.propTypes={},_.filterProps=f},8529:function(e,t,r){"use strict";r.d(t,{DW:function(){return o},Jq:function(){return s}});var n=r(4942),i=r(7312),a=r(1184);function o(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&r){var n="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=n)return n}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function s(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;return n="function"===typeof e?e(r):Array.isArray(e)?e[r]||i:o(e,r)||i,t&&(n=t(n,i,e)),n}t.ZP=function(e){var t=e.prop,r=e.cssProperty,l=void 0===r?e.prop:r,c=e.themeKey,u=e.transform,h=function(e){if(null==e[t])return null;var r=e[t],h=o(e.theme,c)||{};return(0,a.k9)(e,r,(function(e){var r=s(h,u,e);return e===r&&"string"===typeof e&&(r=s(h,u,"".concat(t).concat("default"===e?"":(0,i.Z)(e)),e)),!1===l?r:(0,n.Z)({},l,r)}))};return h.propTypes={},h.filterProps=[t],h}},7416:function(e,t,r){"use strict";r.d(t,{Z:function(){return P}});var n=r(5682),i=r(8529),a=r(8247);var o=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.reduce((function(e,t){return t.filterProps.forEach((function(r){e[r]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,r){return n[r]?(0,a.Z)(t,n[r](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i},s=r(1184);function l(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var c=(0,i.ZP)({prop:"border",themeKey:"borders",transform:l}),u=(0,i.ZP)({prop:"borderTop",themeKey:"borders",transform:l}),h=(0,i.ZP)({prop:"borderRight",themeKey:"borders",transform:l}),d=(0,i.ZP)({prop:"borderBottom",themeKey:"borders",transform:l}),f=(0,i.ZP)({prop:"borderLeft",themeKey:"borders",transform:l}),p=(0,i.ZP)({prop:"borderColor",themeKey:"palette"}),m=(0,i.ZP)({prop:"borderTopColor",themeKey:"palette"}),v=(0,i.ZP)({prop:"borderRightColor",themeKey:"palette"}),g=(0,i.ZP)({prop:"borderBottomColor",themeKey:"palette"}),y=(0,i.ZP)({prop:"borderLeftColor",themeKey:"palette"}),x=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,n.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,n.NA)(t,e)}}))}return null};x.propTypes={},x.filterProps=["borderRadius"];o(c,u,h,d,f,p,m,v,g,y,x);var b=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,n.eI)(e.theme,"spacing",8,"gap");return(0,s.k9)(e,e.gap,(function(e){return{gap:(0,n.NA)(t,e)}}))}return null};b.propTypes={},b.filterProps=["gap"];var _=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,n.eI)(e.theme,"spacing",8,"columnGap");return(0,s.k9)(e,e.columnGap,(function(e){return{columnGap:(0,n.NA)(t,e)}}))}return null};_.propTypes={},_.filterProps=["columnGap"];var w=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,n.eI)(e.theme,"spacing",8,"rowGap");return(0,s.k9)(e,e.rowGap,(function(e){return{rowGap:(0,n.NA)(t,e)}}))}return null};w.propTypes={},w.filterProps=["rowGap"];o(b,_,w,(0,i.ZP)({prop:"gridColumn"}),(0,i.ZP)({prop:"gridRow"}),(0,i.ZP)({prop:"gridAutoFlow"}),(0,i.ZP)({prop:"gridAutoColumns"}),(0,i.ZP)({prop:"gridAutoRows"}),(0,i.ZP)({prop:"gridTemplateColumns"}),(0,i.ZP)({prop:"gridTemplateRows"}),(0,i.ZP)({prop:"gridTemplateAreas"}),(0,i.ZP)({prop:"gridArea"}));function k(e,t){return"grey"===t?t:e}o((0,i.ZP)({prop:"color",themeKey:"palette",transform:k}),(0,i.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:k}),(0,i.ZP)({prop:"backgroundColor",themeKey:"palette",transform:k}));function S(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var C=(0,i.ZP)({prop:"width",transform:S}),A=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,s.k9)(e,e.maxWidth,(function(t){var r,n,i;return{maxWidth:(null==(r=e.theme)||null==(n=r.breakpoints)||null==(i=n.values)?void 0:i[t])||s.VO[t]||S(t)}}))}return null};A.filterProps=["maxWidth"];var T=(0,i.ZP)({prop:"minWidth",transform:S}),E=(0,i.ZP)({prop:"height",transform:S}),M=(0,i.ZP)({prop:"maxHeight",transform:S}),I=(0,i.ZP)({prop:"minHeight",transform:S}),P=((0,i.ZP)({prop:"size",cssProperty:"width",transform:S}),(0,i.ZP)({prop:"size",cssProperty:"height",transform:S}),o(C,A,T,E,M,I,(0,i.ZP)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:x},color:{themeKey:"palette",transform:k},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:k},backgroundColor:{themeKey:"palette",transform:k},p:{style:n.o3},pt:{style:n.o3},pr:{style:n.o3},pb:{style:n.o3},pl:{style:n.o3},px:{style:n.o3},py:{style:n.o3},padding:{style:n.o3},paddingTop:{style:n.o3},paddingRight:{style:n.o3},paddingBottom:{style:n.o3},paddingLeft:{style:n.o3},paddingX:{style:n.o3},paddingY:{style:n.o3},paddingInline:{style:n.o3},paddingInlineStart:{style:n.o3},paddingInlineEnd:{style:n.o3},paddingBlock:{style:n.o3},paddingBlockStart:{style:n.o3},paddingBlockEnd:{style:n.o3},m:{style:n.e6},mt:{style:n.e6},mr:{style:n.e6},mb:{style:n.e6},ml:{style:n.e6},mx:{style:n.e6},my:{style:n.e6},margin:{style:n.e6},marginTop:{style:n.e6},marginRight:{style:n.e6},marginBottom:{style:n.e6},marginLeft:{style:n.e6},marginX:{style:n.e6},marginY:{style:n.e6},marginInline:{style:n.e6},marginInlineStart:{style:n.e6},marginInlineEnd:{style:n.e6},marginBlock:{style:n.e6},marginBlockStart:{style:n.e6},marginBlockEnd:{style:n.e6},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:b},rowGap:{style:w},columnGap:{style:_},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:S},maxWidth:{style:A},minWidth:{transform:S},height:{transform:S},maxHeight:{transform:S},minHeight:{transform:S},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},104:function(e,t,r){"use strict";var n=r(4942),i=r(7312),a=r(8247),o=r(8529),s=r(1184),l=r(7416);var c=function(){function e(e,t,r,a){var l,c=(l={},(0,n.Z)(l,e,t),(0,n.Z)(l,"theme",r),l),u=a[e];if(!u)return(0,n.Z)({},e,t);var h=u.cssProperty,d=void 0===h?e:h,f=u.themeKey,p=u.transform,m=u.style;if(null==t)return null;var v=(0,o.DW)(r,f)||{};if(m)return m(c);return(0,s.k9)(c,t,(function(t){var r=(0,o.Jq)(v,p,t);return t===r&&"string"===typeof t&&(r=(0,o.Jq)(v,p,"".concat(e).concat("default"===t?"":(0,i.Z)(t)),t)),!1===d?r:(0,n.Z)({},d,r)}))}return function t(r){var i,o=r||{},c=o.sx,u=o.theme,h=void 0===u?{}:u;if(!c)return null;var d=null!=(i=h.unstable_sxConfig)?i:l.Z;function f(r){var i=r;if("function"===typeof r)i=r(h);else if("object"!==typeof r)return r;if(!i)return null;var o=(0,s.W8)(h.breakpoints),l=Object.keys(o),c=o;return Object.keys(i).forEach((function(r){var o,l,u=(o=i[r],l=h,"function"===typeof o?o(l):o);if(null!==u&&void 0!==u)if("object"===typeof u)if(d[r])c=(0,a.Z)(c,e(r,u,h,d));else{var f=(0,s.k9)({theme:h},u,(function(e){return(0,n.Z)({},r,e)}));!function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(n);return t.every((function(e){return i.size===Object.keys(e).length}))}(f,u)?c=(0,a.Z)(c,f):c[r]=t({sx:u,theme:h})}else c=(0,a.Z)(c,e(r,u,h,d))})),(0,s.L7)(l,c)}return Array.isArray(c)?c.map(f):f(c)}}();c.filterProps=["sx"],t.Z=c},3459:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(5080),i=r(9598);function a(e){return 0===Object.keys(e).length}var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,i.Z)();return!t||a(t)?e:t},s=(0,n.Z)();var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return o(e)}},5902:function(e,t){"use strict";var r=function(e){return e},n=function(){var e=r;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=r}}}();t.Z=n},7312:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(6189);function i(e){if("string"!==typeof e)throw new Error((0,n.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},4419:function(e,t,r){"use strict";function n(e,t,r){var n={};return Object.keys(e).forEach((function(i){n[i]=e[i].reduce((function(e,n){return n&&(e.push(t(n)),r&&r[n]&&e.push(r[n])),e}),[]).join(" ")})),n}r.d(t,{Z:function(){return n}})},8949:function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return null==t?e:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n),t.apply(this,n)}}),(function(){}))}r.d(t,{Z:function(){return n}})},3981:function(e,t,r){"use strict";function n(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function n(){for(var n=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=function(){e.apply(n,a)};clearTimeout(t),t=setTimeout(s,r)}return n.clear=function(){clearTimeout(t)},n}r.d(t,{Z:function(){return n}})},2466:function(e,t,r){"use strict";r.d(t,{P:function(){return i},Z:function(){return o}});var n=r(1860);function i(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function a(e){if(!i(e))return e;var t={};return Object.keys(e).forEach((function(r){t[r]=a(e[r])})),t}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},s=r.clone?(0,n.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((function(n){"__proto__"!==n&&(i(t[n])&&n in e&&i(e[n])?s[n]=o(e[n],t[n],r):r.clone?s[n]=i(t[n])?a(t[n]):t[n]:s[n]=t[n])})),s}},6189:function(e,t,r){"use strict";function n(e){for(var t="https://mui.com/production-error/?code="+e,r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}r.d(t,{Z:function(){return n}})},1217:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(5902),i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",a=i[t];return a?"".concat(r,"-").concat(a):"".concat(n.Z.generate(e),"-").concat(t)}},5878:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(1217);function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",i={};return t.forEach((function(t){i[t]=(0,n.Z)(e,t,r)})),i}},9723:function(e,t,r){"use strict";function n(e){return e&&e.ownerDocument||document}r.d(t,{Z:function(){return n}})},7979:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(9723);function i(e){return(0,n.Z)(e).defaultView||window}},5735:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(1860);function i(e,t){var r=(0,n.Z)({},t);return Object.keys(e).forEach((function(a){if(a.toString().match(/^(components|slots)$/))r[a]=(0,n.Z)({},e[a],r[a]);else if(a.toString().match(/^(componentsProps|slotProps)$/)){var o=e[a]||{},s=t[a];r[a]={},s&&Object.keys(s)?o&&Object.keys(o)?(r[a]=(0,n.Z)({},s),Object.keys(o).forEach((function(e){r[a][e]=i(o[e],s[e])}))):r[a]=s:r[a]=o}else void 0===r[a]&&(r[a]=e[a])})),r}},2971:function(e,t,r){"use strict";function n(e,t){"function"===typeof e?e(t):e&&(e.current=t)}r.d(t,{Z:function(){return n}})},8959:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(885),i=r(2791);function a(e){var t=e.controlled,r=e.default,a=(e.name,e.state,i.useRef(void 0!==t).current),o=i.useState(r),s=(0,n.Z)(o,2),l=s[0],c=s[1];return[a?t:l,i.useCallback((function(e){a||c(e)}),[])]}},5721:function(e,t,r){"use strict";var n=r(2791),i="undefined"!==typeof window?n.useLayoutEffect:n.useEffect;t.Z=i},8956:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(2791),i=r(5721);function a(e){var t=n.useRef(e);return(0,i.Z)((function(){t.current=e})),n.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},7563:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(2791),i=r(2971);function a(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.useMemo((function(){return t.every((function(e){return null==e}))?null:function(e){t.forEach((function(t){(0,i.Z)(t,e)}))}}),t)}},6248:function(e,t,r){"use strict";var n;r.d(t,{Z:function(){return l}});var i=r(885),a=r(2791),o=0;var s=(n||(n=r.t(a,2))).useId;function l(e){if(void 0!==s){var t=s();return null!=e?e:t}return function(e){var t=a.useState(e),r=(0,i.Z)(t,2),n=r[0],s=r[1],l=e||n;return a.useEffect((function(){null==n&&s("mui-".concat(o+=1))}),[n]),l}(e)}},5372:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n,i=r(2791),a=!0,o=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(e){e.metaKey||e.altKey||e.ctrlKey||(a=!0)}function c(){a=!1}function u(){"hidden"===this.visibilityState&&o&&(a=!0)}function h(e){var t=e.target;try{return t.matches(":focus-visible")}catch(r){}return a||function(e){var t=e.type,r=e.tagName;return!("INPUT"!==r||!s[t]||e.readOnly)||"TEXTAREA"===r&&!e.readOnly||!!e.isContentEditable}(t)}function d(){var e=i.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",l,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",u,!0))}),[]),t=i.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(o=!0,window.clearTimeout(n),n=window.setTimeout((function(){o=!1}),100),t.current=!1,!0)},ref:e}}},8700:function(e,t,r){"use strict";var n;function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function v(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=function(){function e(){s(this,e)}return c(e,[{key:"shadeRGBColor",value:function(e,t){var r=t.split(","),n=e<0?0:255,i=e<0?-1*e:e,a=parseInt(r[0].slice(4),10),o=parseInt(r[1],10),s=parseInt(r[2],10);return"rgb("+(Math.round((n-a)*i)+a)+","+(Math.round((n-o)*i)+o)+","+(Math.round((n-s)*i)+s)+")"}},{key:"shadeHexColor",value:function(e,t){var r=parseInt(t.slice(1),16),n=e<0?0:255,i=e<0?-1*e:e,a=r>>16,o=r>>8&255,s=255&r;return"#"+(16777216+65536*(Math.round((n-a)*i)+a)+256*(Math.round((n-o)*i)+o)+(Math.round((n-s)*i)+s)).toString(16).slice(1)}},{key:"shadeColor",value:function(t,r){return e.isColorHex(r)?this.shadeHexColor(t,r):this.shadeRGBColor(t,r)}}],[{key:"bind",value:function(e,t){return function(){return e.apply(t,arguments)}}},{key:"isObject",value:function(e){return e&&"object"===o(e)&&!Array.isArray(e)&&null!=e}},{key:"is",value:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"listToArray",value:function(e){var t,r=[];for(t=0;t<e.length;t++)r[t]=e[t];return r}},{key:"extend",value:function(e,t){var r=this;"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t});var n=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach((function(i){r.isObject(t[i])&&i in e?n[i]=r.extend(e[i],t[i]):Object.assign(n,u({},i,t[i]))})),n}},{key:"extendArray",value:function(t,r){var n=[];return t.map((function(t){n.push(e.extend(r,t))})),n}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(t){if(e.is("Array",t)){for(var r=[],n=0;n<t.length;n++)r[n]=this.clone(t[n]);return r}if(e.is("Null",t))return null;if(e.is("Date",t))return t;if("object"===o(t)){var i={};for(var a in t)t.hasOwnProperty(a)&&(i[a]=this.clone(t[a]));return i}return t}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}},{key:"parseNumber",value:function(e){return null===e?e:parseFloat(e)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){var t=String(e).split(/[eE]/);if(1===t.length)return t[0];var r="",n=e<0?"-":"",i=t[0].replace(".",""),a=Number(t[1])+1;if(a<0){for(r=n+"0.";a++;)r+="0";return r+i.replace(/^-/,"")}for(a-=i.length;a--;)r+="0";return i+r}},{key:"getDimensions",value:function(e){var t=getComputedStyle(e,null),r=e.clientHeight,n=e.clientWidth;return r-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),[n-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),r]}},{key:"getBoundingClientRect",value:function(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce((function(e,t){return Array.isArray(t)&&(t=t.reduce((function(e,t){return e.length>t.length?e:t}))),e.length>t.length?e:t}),0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==e.substring(0,1)&&(e="#999999");var r=e.replace("#","");r=r.match(new RegExp("(.{"+r.length/3+"})","g"));for(var n=0;n<r.length;n++)r[n]=parseInt(1===r[n].length?r[n]+r[n]:r[n],16);return void 0!==t&&r.push(t),"rgba("+r.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,t){for(var r=[],n=2*Math.PI/t,i=0;i<t;i++){var a={};a.x=e*Math.sin(i*n),a.y=-e*Math.cos(i*n),r.push(a)}return r}},{key:"polarToCartesian",value:function(e,t,r,n){var i=(n-90)*Math.PI/180;return{x:e+r*Math.cos(i),y:t+r*Math.sin(i)}}},{key:"escapeString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",r=e.toString().slice();return r.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,t)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,t,r){if(r>=e.length)for(var n=r-e.length+1;n--;)e.push(void 0);return e.splice(r,0,e.splice(t,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}},{key:"setELstyles",value:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e.style.key=t[r])}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}var n=e.indexOf("Edge/");return n>0&&parseInt(e.substring(n+5,e.indexOf(".",n)),10)}}]),e}(),b=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.setEasingFunctions()}return c(e,[{key:"setEasingFunctions",value:function(){var e;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":e="-";break;case"easein":e="<";break;case"easeout":e=">";break;case"easeinout":default:e="<>";break;case"swing":e=function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1};break;case"bounce":e=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375};break;case"elastic":e=function(e){return e===!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=e}}},{key:"animateLine",value:function(e,t,r,n){e.attr(t).animate(n).attr(r)}},{key:"animateMarker",value:function(e,t,r,n,i,a){t||(t=0),e.attr({r:t,width:t,height:t}).animate(n,i).attr({r:r,width:r.width,height:r.height}).afterAll((function(){a()}))}},{key:"animateCircle",value:function(e,t,r,n,i){e.attr({r:t.r,cx:t.cx,cy:t.cy}).animate(n,i).attr({r:r.r,cx:r.cx,cy:r.cy})}},{key:"animateRect",value:function(e,t,r,n,i){e.attr(t).animate(n).attr(r).afterAll((function(){return i()}))}},{key:"animatePathsGradually",value:function(e){var t=e.el,r=e.realIndex,n=e.j,i=e.fill,a=e.pathFrom,o=e.pathTo,s=e.speed,l=e.delay,c=this.w,u=0;c.config.chart.animations.animateGradually.enabled&&(u=c.config.chart.animations.animateGradually.delay),c.config.chart.animations.dynamicAnimation.enabled&&c.globals.dataChanged&&"bar"!==c.config.chart.type&&(u=0),this.morphSVG(t,r,n,"line"!==c.config.chart.type||c.globals.comboCharts?i:"stroke",a,o,s,l*u)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach((function(e){e.el.classList.remove("apexcharts-element-hidden")}))}},{key:"animationCompleted",value:function(e){var t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof t.config.chart.events.animationEnd&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}},{key:"morphSVG",value:function(e,t,r,n,i,a,o,s){var l=this,c=this.w;i||(i=e.attr("pathFrom")),a||(a=e.attr("pathTo"));var u=function(e){return"radar"===c.config.chart.type&&(o=1),"M 0 ".concat(c.globals.gridHeight)};(!i||i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i=u()),(!a||a.indexOf("undefined")>-1||a.indexOf("NaN")>-1)&&(a=u()),c.globals.shouldAnimate||(o=1),e.plot(i).animate(1,c.globals.easing,s).plot(i).animate(o,c.globals.easing,s).plot(a).afterAll((function(){x.isNumber(r)?r===c.globals.series[c.globals.maxValsInArrayIndex].length-2&&c.globals.shouldAnimate&&l.animationCompleted(e):"none"!==n&&c.globals.shouldAnimate&&(!c.globals.comboCharts&&t===c.globals.series.length-1||c.globals.comboCharts)&&l.animationCompleted(e),l.showDelayedElements()}))}}]),e}(),_=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"getDefaultFilter",value:function(e,t){var r=this.w;e.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==r.config.states.normal.filter?this.applyFilter(e,t,r.config.states.normal.filter.type,r.config.states.normal.filter.value):r.config.chart.dropShadow.enabled&&this.dropShadow(e,r.config.chart.dropShadow,t)}},{key:"addNormalFilter",value:function(e,t){var r=this.w;r.config.chart.dropShadow.enabled&&!e.node.classList.contains("apexcharts-marker")&&this.dropShadow(e,r.config.chart.dropShadow,t)}},{key:"addLightenFilter",value:function(e,t,r){var n=this,i=this.w,a=r.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter((function(e){var r=i.config.chart.dropShadow;(r.enabled?n.addShadow(e,t,r):e).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:a}})})),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"addDarkenFilter",value:function(e,t,r){var n=this,i=this.w,a=r.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter((function(e){var r=i.config.chart.dropShadow;(r.enabled?n.addShadow(e,t,r):e).componentTransfer({rgb:{type:"linear",slope:a}})})),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"applyFilter",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(r){case"none":this.addNormalFilter(e,t);break;case"lighten":this.addLightenFilter(e,t,{intensity:n});break;case"darken":this.addDarkenFilter(e,t,{intensity:n})}}},{key:"addShadow",value:function(e,t,r){var n=r.blur,i=r.top,a=r.left,o=r.color,s=r.opacity,l=e.flood(Array.isArray(o)?o[t]:o,s).composite(e.sourceAlpha,"in").offset(a,i).gaussianBlur(n).merge(e.source);return e.blend(e.source,l)}},{key:"dropShadow",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.top,i=t.left,a=t.blur,o=t.color,s=t.opacity,l=t.noUserSpaceOnUse,c=this.w;return e.unfilter(!0),x.isIE()&&"radialBar"===c.config.chart.type||(o=Array.isArray(o)?o[r]:o,e.filter((function(e){var t;t=x.isSafari()||x.isFirefox()||x.isIE()?e.flood(o,s).composite(e.sourceAlpha,"in").offset(i,n).gaussianBlur(a):e.flood(o,s).composite(e.sourceAlpha,"in").offset(i,n).gaussianBlur(a).merge(e.source),e.blend(e.source,t)})),l||e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)),e}},{key:"setSelectionFilter",value:function(e,t,r){var n=this.w;if(void 0!==n.globals.selectedDataPoints[t]&&n.globals.selectedDataPoints[t].indexOf(r)>-1){e.node.setAttribute("selected",!0);var i=n.config.states.active.filter;"none"!==i&&this.applyFilter(e,t,i.type,i.value)}}},{key:"_scaleFilterSize",value:function(e){!function(t){for(var r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),e}(),w=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"roundPathCorners",value:function(e,t){function r(e,t,r){var i=t.x-e.x,a=t.y-e.y,o=Math.sqrt(i*i+a*a);return n(e,t,Math.min(1,r/o))}function n(e,t,r){return{x:e.x+(t.x-e.x)*r,y:e.y+(t.y-e.y)*r}}function i(e,t){e.length>2&&(e[e.length-2]=t.x,e[e.length-1]=t.y)}function a(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}}var o=e.split(/[,\s]/).reduce((function(e,t){var r=t.match("([a-zA-Z])(.+)");return r?(e.push(r[1]),e.push(r[2])):e.push(t),e}),[]).reduce((function(e,t){return parseFloat(t)==t&&e.length?e[e.length-1].push(t):e.push([t]),e}),[]),s=[];if(o.length>1){var l=a(o[0]),c=null;"Z"==o[o.length-1][0]&&o[0].length>2&&(c=["L",l.x,l.y],o[o.length-1]=c),s.push(o[0]);for(var u=1;u<o.length;u++){var h=s[s.length-1],d=o[u],f=d==c?o[1]:o[u+1];if(f&&h&&h.length>2&&"L"==d[0]&&f.length>2&&"L"==f[0]){var p,m,v=a(h),g=a(d),y=a(f);p=r(g,v,t),m=r(g,y,t),i(d,p),d.origPoint=g,s.push(d);var x=n(p,g,.5),b=n(g,m,.5),_=["C",x.x,x.y,b.x,b.y,m.x,m.y];_.origPoint=g,s.push(_)}else s.push(d)}if(c){var w=a(s[s.length-1]);s.push(["Z"]),i(s[0],w)}}else s=o;return s.reduce((function(e,t){return e+t.join(" ")+" "}),"")}},{key:"drawLine",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt",l=this.w,c=l.globals.dom.Paper.line().attr({x1:e,y1:t,x2:r,y2:n,stroke:i,"stroke-dasharray":a,"stroke-width":o,"stroke-linecap":s});return c}},{key:"drawRect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=this.w,h=u.globals.dom.Paper.rect();return h.attr({x:e,y:t,width:r>0?r:0,height:n>0?n:0,rx:i,ry:i,opacity:o,"stroke-width":null!==s?s:0,stroke:null!==l?l:"none","stroke-dasharray":c}),h.node.setAttribute("fill",a),h}},{key:"drawPolygon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",i=this.w,a=i.globals.dom.Paper.polygon(e).attr({fill:n,stroke:t,"stroke-width":r});return a}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.w;e<0&&(e=0);var n=r.globals.dom.Paper.circle(2*e);return null!==t&&n.attr(t),n}},{key:"drawPath",value:function(e){var t=e.d,r=void 0===t?"":t,n=e.stroke,i=void 0===n?"#a8a8a8":n,a=e.strokeWidth,o=void 0===a?1:a,s=e.fill,l=e.fillOpacity,c=void 0===l?1:l,u=e.strokeOpacity,h=void 0===u?1:u,d=e.classes,f=e.strokeLinecap,p=void 0===f?null:f,m=e.strokeDashArray,v=void 0===m?0:m,g=this.w;return null===p&&(p=g.config.stroke.lineCap),(r.indexOf("undefined")>-1||r.indexOf("NaN")>-1)&&(r="M 0 ".concat(g.globals.gridHeight)),g.globals.dom.Paper.path(r).attr({fill:s,"fill-opacity":c,stroke:i,"stroke-opacity":h,"stroke-linecap":p,"stroke-width":o,"stroke-dasharray":v,class:d})}},{key:"group",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.w,r=t.globals.dom.Paper.group();return null!==e&&r.attr(e),r}},{key:"move",value:function(e,t){return["M",e,t].join(" ")}},{key:"line",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null;return null===r?n=[" L",e,t].join(" "):"H"===r?n=[" H",e].join(" "):"V"===r&&(n=[" V",t].join(" ")),n}},{key:"curve",value:function(e,t,r,n,i,a){return["C",e,t,r,n,i,a].join(" ")}},{key:"quadraticCurve",value:function(e,t,r,n){return["Q",e,t,r,n].join(" ")}},{key:"arc",value:function(e,t,r,n,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l="A";s&&(l="a");var c=[l,e,t,r,n,i,a,o].join(" ");return c}},{key:"renderPaths",value:function(e){var t,r=e.j,n=e.realIndex,i=e.pathFrom,o=e.pathTo,s=e.stroke,l=e.strokeWidth,c=e.strokeLinecap,u=e.fill,h=e.animationDelay,d=e.initialSpeed,f=e.dataChangeSpeed,p=e.className,m=e.shouldClipToGrid,v=void 0===m||m,g=e.bindEventsOnPaths,y=void 0===g||g,x=e.drawShadow,w=void 0===x||x,k=this.w,S=new _(this.ctx),C=new b(this.ctx),A=this.w.config.chart.animations.enabled,T=A&&this.w.config.chart.animations.dynamicAnimation.enabled,E=!!(A&&!k.globals.resized||T&&k.globals.dataChanged&&k.globals.shouldAnimate);E?t=i:(t=o,k.globals.animationEnded=!0);var M,I=k.config.stroke.dashArray;M=Array.isArray(I)?I[n]:k.config.stroke.dashArray;var P=this.drawPath({d:t,stroke:s,strokeWidth:l,fill:u,fillOpacity:1,classes:p,strokeLinecap:c,strokeDashArray:M});if(P.attr("index",n),v&&P.attr({"clip-path":"url(#gridRectMask".concat(k.globals.cuid,")")}),"none"!==k.config.states.normal.filter.type)S.getDefaultFilter(P,n);else if(k.config.chart.dropShadow.enabled&&w&&(!k.config.chart.dropShadow.enabledOnSeries||k.config.chart.dropShadow.enabledOnSeries&&-1!==k.config.chart.dropShadow.enabledOnSeries.indexOf(n))){var R=k.config.chart.dropShadow;S.dropShadow(P,R,n)}y&&(P.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,P)),P.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,P)),P.node.addEventListener("mousedown",this.pathMouseDown.bind(this,P))),P.attr({pathTo:o,pathFrom:i});var z={el:P,j:r,realIndex:n,pathFrom:i,pathTo:o,fill:u,strokeWidth:l,delay:h};return!A||k.globals.resized||k.globals.dataChanged?!k.globals.resized&&k.globals.dataChanged||C.showDelayedElements():C.animatePathsGradually(a(a({},z),{},{speed:d})),k.globals.dataChanged&&T&&E&&C.animatePathsGradually(a(a({},z),{},{speed:f})),P}},{key:"drawPattern",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=this.w,o=a.globals.dom.Paper.pattern(t,r,(function(a){"horizontalLines"===e?a.line(0,0,r,0).stroke({color:n,width:i+1}):"verticalLines"===e?a.line(0,0,0,t).stroke({color:n,width:i+1}):"slantedLines"===e?a.line(0,0,t,r).stroke({color:n,width:i}):"squares"===e?a.rect(t,r).fill("none").stroke({color:n,width:i}):"circles"===e&&a.circle(t).fill("none").stroke({color:n,width:i})}));return o}},{key:"drawGradient",value:function(e,t,r,n,i){var a,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=this.w;t.length<9&&0===t.indexOf("#")&&(t=x.hexToRgba(t,n)),r.length<9&&0===r.indexOf("#")&&(r=x.hexToRgba(r,i));var h=0,d=1,f=1,p=null;null!==s&&(h=void 0!==s[0]?s[0]/100:0,d=void 0!==s[1]?s[1]/100:1,f=void 0!==s[2]?s[2]/100:1,p=void 0!==s[3]?s[3]/100:null);var m=!("donut"!==u.config.chart.type&&"pie"!==u.config.chart.type&&"polarArea"!==u.config.chart.type&&"bubble"!==u.config.chart.type);if(a=null===l||0===l.length?u.globals.dom.Paper.gradient(m?"radial":"linear",(function(e){e.at(h,t,n),e.at(d,r,i),e.at(f,r,i),null!==p&&e.at(p,t,n)})):u.globals.dom.Paper.gradient(m?"radial":"linear",(function(e){(Array.isArray(l[c])?l[c]:l).forEach((function(t){e.at(t.offset/100,t.color,t.opacity)}))})),m){var v=u.globals.gridWidth/2,g=u.globals.gridHeight/2;"bubble"!==u.config.chart.type?a.attr({gradientUnits:"userSpaceOnUse",cx:v,cy:g,r:o}):a.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===e?a.from(0,0).to(0,1):"diagonal"===e?a.from(0,0).to(1,1):"horizontal"===e?a.from(0,1).to(1,1):"diagonal2"===e&&a.from(1,0).to(0,1);return a}},{key:"getTextBasedOnMaxWidth",value:function(e){var t=e.text,r=e.maxWidth,n=e.fontSize,i=e.fontFamily,a=this.getTextRects(t,n,i),o=a.width/t.length,s=Math.floor(r/o);return r<a.width?t.slice(0,s-3)+"...":t}},{key:"drawText",value:function(e){var t=this,r=e.x,n=e.y,i=e.text,o=e.textAnchor,s=e.fontSize,l=e.fontFamily,c=e.fontWeight,u=e.foreColor,h=e.opacity,d=e.maxWidth,f=e.cssClass,p=void 0===f?"":f,m=e.isPlainText,v=void 0===m||m,g=this.w;void 0===i&&(i="");var y=i;o||(o="start"),u&&u.length||(u=g.config.chart.foreColor),l=l||g.config.chart.fontFamily,c=c||"regular";var x,b={maxWidth:d,fontSize:s=s||"11px",fontFamily:l};return Array.isArray(i)?x=g.globals.dom.Paper.text((function(e){for(var r=0;r<i.length;r++)y=i[r],d&&(y=t.getTextBasedOnMaxWidth(a({text:i[r]},b))),0===r?e.tspan(y):e.tspan(y).newLine()})):(d&&(y=this.getTextBasedOnMaxWidth(a({text:i},b))),x=v?g.globals.dom.Paper.plain(i):g.globals.dom.Paper.text((function(e){return e.tspan(y)}))),x.attr({x:r,y:n,"text-anchor":o,"dominant-baseline":"auto","font-size":s,"font-family":l,"font-weight":c,fill:u,class:"apexcharts-text "+p}),x.node.style.fontFamily=l,x.node.style.opacity=h,x}},{key:"drawMarker",value:function(e,t,r){e=e||0;var n=r.pSize||0,i=null;if("square"===r.shape||"rect"===r.shape){var a=void 0===r.pRadius?n/2:r.pRadius;null!==t&&n||(n=0,a=0);var o=1.2*n+a,s=this.drawRect(o,o,o,o,a);s.attr({x:e-o/2,y:t-o/2,cx:e,cy:t,class:r.class?r.class:"",fill:r.pointFillColor,"fill-opacity":r.pointFillOpacity?r.pointFillOpacity:1,stroke:r.pointStrokeColor,"stroke-width":r.pointStrokeWidth?r.pointStrokeWidth:0,"stroke-opacity":r.pointStrokeOpacity?r.pointStrokeOpacity:1}),i=s}else"circle"!==r.shape&&r.shape||(x.isNumber(t)||(n=0,t=0),i=this.drawCircle(n,{cx:e,cy:t,class:r.class?r.class:"",stroke:r.pointStrokeColor,fill:r.pointFillColor,"fill-opacity":r.pointFillOpacity?r.pointFillOpacity:1,"stroke-width":r.pointStrokeWidth?r.pointStrokeWidth:0,"stroke-opacity":r.pointStrokeOpacity?r.pointStrokeOpacity:1}));return i}},{key:"pathMouseEnter",value:function(e,t){var r=this.w,n=new _(this.ctx),i=parseInt(e.node.getAttribute("index"),10),a=parseInt(e.node.getAttribute("j"),10);if("function"==typeof r.config.chart.events.dataPointMouseEnter&&r.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:i,dataPointIndex:a,w:r}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:i,dataPointIndex:a,w:r}]),("none"===r.config.states.active.filter.type||"true"!==e.node.getAttribute("selected"))&&"none"!==r.config.states.hover.filter.type&&!r.globals.isTouchDevice){var o=r.config.states.hover.filter;n.applyFilter(e,i,o.type,o.value)}}},{key:"pathMouseLeave",value:function(e,t){var r=this.w,n=new _(this.ctx),i=parseInt(e.node.getAttribute("index"),10),a=parseInt(e.node.getAttribute("j"),10);"function"==typeof r.config.chart.events.dataPointMouseLeave&&r.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:i,dataPointIndex:a,w:r}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:i,dataPointIndex:a,w:r}]),"none"!==r.config.states.active.filter.type&&"true"===e.node.getAttribute("selected")||"none"!==r.config.states.hover.filter.type&&n.getDefaultFilter(e,i)}},{key:"pathMouseDown",value:function(e,t){var r=this.w,n=new _(this.ctx),i=parseInt(e.node.getAttribute("index"),10),a=parseInt(e.node.getAttribute("j"),10),o="false";if("true"===e.node.getAttribute("selected")){if(e.node.setAttribute("selected","false"),r.globals.selectedDataPoints[i].indexOf(a)>-1){var s=r.globals.selectedDataPoints[i].indexOf(a);r.globals.selectedDataPoints[i].splice(s,1)}}else{if(!r.config.states.active.allowMultipleDataPointsSelection&&r.globals.selectedDataPoints.length>0){r.globals.selectedDataPoints=[];var l=r.globals.dom.Paper.select(".apexcharts-series path").members,c=r.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,u=function(e){Array.prototype.forEach.call(e,(function(e){e.node.setAttribute("selected","false"),n.getDefaultFilter(e,i)}))};u(l),u(c)}e.node.setAttribute("selected","true"),o="true",void 0===r.globals.selectedDataPoints[i]&&(r.globals.selectedDataPoints[i]=[]),r.globals.selectedDataPoints[i].push(a)}if("true"===o){var h=r.config.states.active.filter;if("none"!==h)n.applyFilter(e,i,h.type,h.value);else if("none"!==r.config.states.hover.filter&&!r.globals.isTouchDevice){var d=r.config.states.hover.filter;n.applyFilter(e,i,d.type,d.value)}}else"none"!==r.config.states.active.filter.type&&("none"===r.config.states.hover.filter.type||r.globals.isTouchDevice?n.getDefaultFilter(e,i):(d=r.config.states.hover.filter,n.applyFilter(e,i,d.type,d.value)));"function"==typeof r.config.chart.events.dataPointSelection&&r.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:r.globals.selectedDataPoints,seriesIndex:i,dataPointIndex:a,w:r}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:r.globals.selectedDataPoints,seriesIndex:i,dataPointIndex:a,w:r}])}},{key:"rotateAroundCenter",value:function(e){var t={};return e&&"function"==typeof e.getBBox&&(t=e.getBBox()),{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(e,t,r,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.w,o=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:r,foreColor:"#fff",opacity:0});n&&o.attr("transform",n),a.globals.dom.Paper.add(o);var s=o.bbox();return i||(s=o.node.getBoundingClientRect()),o.remove(),{width:s.width,height:s.height}}},{key:"placeTextWithEllipsis",value:function(e,t,r){if("function"==typeof e.getComputedTextLength&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=r/1.1)){for(var n=t.length-3;n>0;n-=3)if(e.getSubStringLength(0,n)<=r/1.1)return void(e.textContent=t.substring(0,n)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r])}}]),e}(),k=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"getStackedSeriesTotals",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.w,r=[];if(0===t.globals.series.length)return r;for(var n=0;n<t.globals.series[t.globals.maxValsInArrayIndex].length;n++){for(var i=0,a=0;a<t.globals.series.length;a++)void 0!==t.globals.series[a][n]&&-1===e.indexOf(a)&&(i+=t.globals.series[a][n]);r.push(i)}return r}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this.w.config.series.reduce((function(e,t){return e+t}),0):this.w.globals.series[e].reduce((function(e,t){return e+t}),0)}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===e?this.w.config.series.filter((function(e){return null!==e})):this.w.config.series[e].data.filter((function(e){return null!==e}))).length}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every((function(e,t,r){return e===r[0]}))}},{key:"getCategoryLabels",value:function(e){var t=this.w,r=e.slice();return t.config.xaxis.convertedCatToNumeric&&(r=e.map((function(e,r){return t.config.xaxis.labels.formatter(e-t.globals.minX+1)}))),r}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map((function(e){return e.length})).indexOf(Math.max.apply(Math,e.globals.series.map((function(e){return e.length}))))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,t=0;return e.globals.markers.size.forEach((function(e){t=Math.max(t,e)})),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach((function(e){t=Math.max(t,e.size)})),t>0&&(t+=e.config.markers.hover.sizeOffset+1),e.globals.markers.largestSize=t,t}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map((function(e,t){var r=0;if(Array.isArray(e))for(var n=0;n<e.length;n++)r+=e[n];else r+=e;return r}))}},{key:"getSeriesTotalsXRange",value:function(e,t){var r=this.w;return r.globals.series.map((function(n,i){for(var a=0,o=0;o<n.length;o++)r.globals.seriesX[i][o]>e&&r.globals.seriesX[i][o]<t&&(a+=n[o]);return a}))}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map((function(t,r){var n=[];if(Array.isArray(t))for(var i=0;i<t.length;i++){var a=e.globals.stackedSeriesTotals[i],o=0;a&&(o=100*t[i]/a),n.push(o)}else{var s=100*t/e.globals.seriesTotals.reduce((function(e,t){return e+t}),0);n.push(s)}return n}))}},{key:"getCalculatedRatios",value:function(){var e,t,r,n,i=this.w.globals,a=[],o=0,s=[],l=.1,c=0;if(i.yRange=[],i.isMultipleYAxis)for(var u=0;u<i.minYArr.length;u++)i.yRange.push(Math.abs(i.minYArr[u]-i.maxYArr[u])),s.push(0);else i.yRange.push(Math.abs(i.minY-i.maxY));i.xRange=Math.abs(i.maxX-i.minX),i.zRange=Math.abs(i.maxZ-i.minZ);for(var h=0;h<i.yRange.length;h++)a.push(i.yRange[h]/i.gridHeight);if(t=i.xRange/i.gridWidth,r=Math.abs(i.initialMaxX-i.initialMinX)/i.gridWidth,e=i.yRange/i.gridWidth,n=i.xRange/i.gridHeight,(o=i.zRange/i.gridHeight*16)||(o=1),i.minY!==Number.MIN_VALUE&&0!==Math.abs(i.minY)&&(i.hasNegs=!0),i.isMultipleYAxis){s=[];for(var d=0;d<a.length;d++)s.push(-i.minYArr[d]/a[d])}else s.push(-i.minY/a[0]),i.minY!==Number.MIN_VALUE&&0!==Math.abs(i.minY)&&(l=-i.minY/e,c=i.minX/t);return{yRatio:a,invertedYRatio:e,zRatio:o,xRatio:t,initialXRatio:r,invertedXRatio:n,baseLineInvertedY:l,baseLineY:s,baseLineX:c}}},{key:"getLogSeries",value:function(e){var t=this,r=this.w;return r.globals.seriesLog=e.map((function(e,n){return r.config.yaxis[n]&&r.config.yaxis[n].logarithmic?e.map((function(e){return null===e?null:t.getLogVal(r.config.yaxis[n].logBase,e,n)})):e})),r.globals.invalidLogScale?e:r.globals.seriesLog}},{key:"getBaseLog",value:function(e,t){return Math.log(t)/Math.log(e)}},{key:"getLogVal",value:function(e,t,r){if(0===t)return 0;var n=this.w,i=0===n.globals.minYArr[r]?-1:this.getBaseLog(e,n.globals.minYArr[r]),a=(0===n.globals.maxYArr[r]?0:this.getBaseLog(e,n.globals.maxYArr[r]))-i;return t<1?t/a:(this.getBaseLog(e,t)-i)/a}},{key:"getLogYRatios",value:function(e){var t=this,r=this.w,n=this.w.globals;return n.yLogRatio=e.slice(),n.logYRange=n.yRange.map((function(e,i){if(r.config.yaxis[i]&&t.w.config.yaxis[i].logarithmic){var a,o=-Number.MAX_VALUE,s=Number.MIN_VALUE;return n.seriesLog.forEach((function(e,t){e.forEach((function(e){r.config.yaxis[t]&&r.config.yaxis[t].logarithmic&&(o=Math.max(e,o),s=Math.min(e,s))}))})),a=Math.pow(n.yRange[i],Math.abs(s-o)/n.yRange[i]),n.yLogRatio[i]=a/n.gridHeight,a}})),n.invalidLogScale?e.slice():n.yLogRatio}}],[{key:"checkComboSeries",value:function(e){var t=!1,r=0,n=0;return e.length&&void 0!==e[0].type&&e.forEach((function(e){"bar"!==e.type&&"column"!==e.type&&"candlestick"!==e.type&&"boxPlot"!==e.type||r++,void 0!==e.type&&n++})),n>0&&(t=!0),{comboBarCount:r,comboCharts:t}}},{key:"extendArrayProps",value:function(e,t,r){return t.yaxis&&(t=e.extendYAxis(t,r)),t.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),t.annotations.xaxis&&(t=e.extendXAxisAnnotations(t)),t.annotations.points&&(t=e.extendPointAnnotations(t))),t}}]),e}(),S=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t}return c(e,[{key:"setOrientations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.w;if("vertical"===e.label.orientation){var n=null!==t?t:0,i=r.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(n,"']"));if(null!==i){var a=i.getBoundingClientRect();i.setAttribute("x",parseFloat(i.getAttribute("x"))-a.height+4),"top"===e.label.position?i.setAttribute("y",parseFloat(i.getAttribute("y"))+a.width):i.setAttribute("y",parseFloat(i.getAttribute("y"))-a.width);var o=this.annoCtx.graphics.rotateAroundCenter(i),s=o.x,l=o.y;i.setAttribute("transform","rotate(-90 ".concat(s," ").concat(l,")"))}}}},{key:"addBackgroundToAnno",value:function(e,t){var r=this.w;if(!e||void 0===t.label.text||void 0!==t.label.text&&!String(t.label.text).trim())return null;var n=r.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),i=e.getBoundingClientRect(),a=t.label.style.padding.left,o=t.label.style.padding.right,s=t.label.style.padding.top,l=t.label.style.padding.bottom;"vertical"===t.label.orientation&&(s=t.label.style.padding.left,l=t.label.style.padding.right,a=t.label.style.padding.top,o=t.label.style.padding.bottom);var c=i.left-n.left-a,u=i.top-n.top-s,h=this.annoCtx.graphics.drawRect(c-r.globals.barPadForNumericAxis,u,i.width+a+o,i.height+s+l,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&h.node.classList.add(t.id),h}},{key:"annotationsBackground",value:function(){var e=this,t=this.w,r=function(r,n,i){var a=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(i,"-annotations .apexcharts-").concat(i,"-annotation-label[rel='").concat(n,"']"));if(a){var o=a.parentNode,s=e.addBackgroundToAnno(a,r);s&&(o.insertBefore(s.node,a),r.label.mouseEnter&&s.node.addEventListener("mouseenter",r.label.mouseEnter.bind(e,r)),r.label.mouseLeave&&s.node.addEventListener("mouseleave",r.label.mouseLeave.bind(e,r)),r.label.click&&s.node.addEventListener("click",r.label.click.bind(e,r)))}};t.config.annotations.xaxis.map((function(e,t){r(e,t,"xaxis")})),t.config.annotations.yaxis.map((function(e,t){r(e,t,"yaxis")})),t.config.annotations.points.map((function(e,t){r(e,t,"point")}))}},{key:"getY1Y2",value:function(e,t){var r,n="y1"===e?t.y:t.y2,i=this.w;if(this.annoCtx.invertAxis){var a=i.globals.labels.indexOf(n);i.config.xaxis.convertedCatToNumeric&&(a=i.globals.categoryLabels.indexOf(n));var o=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(a+1)+")");o&&(r=parseFloat(o.getAttribute("y")))}else{var s;s=i.config.yaxis[t.yAxisIndex].logarithmic?(n=new k(this.annoCtx.ctx).getLogVal(n,t.yAxisIndex))/i.globals.yLogRatio[t.yAxisIndex]:(n-i.globals.minYArr[t.yAxisIndex])/(i.globals.yRange[t.yAxisIndex]/i.globals.gridHeight),r=i.globals.gridHeight-s,!t.marker||void 0!==t.y&&null!==t.y||(r=0),i.config.yaxis[t.yAxisIndex]&&i.config.yaxis[t.yAxisIndex].reversed&&(r=s)}return"string"==typeof n&&n.indexOf("px")>-1&&(r=parseFloat(n)),r}},{key:"getX1X2",value:function(e,t){var r=this.w,n=this.annoCtx.invertAxis?r.globals.minY:r.globals.minX,i=this.annoCtx.invertAxis?r.globals.maxY:r.globals.maxX,a=this.annoCtx.invertAxis?r.globals.yRange[0]:r.globals.xRange,o=(t.x-n)/(a/r.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(o=(i-t.x)/(a/r.globals.gridWidth)),"category"!==r.config.xaxis.type&&!r.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||r.globals.dataFormatXNumeric||(o=this.getStringX(t.x));var s=(t.x2-n)/(a/r.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(s=(i-t.x2)/(a/r.globals.gridWidth)),"category"!==r.config.xaxis.type&&!r.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||r.globals.dataFormatXNumeric||(s=this.getStringX(t.x2)),void 0!==t.x&&null!==t.x||!t.marker||(o=r.globals.gridWidth),"x1"===e&&"string"==typeof t.x&&t.x.indexOf("px")>-1&&(o=parseFloat(t.x)),"x2"===e&&"string"==typeof t.x2&&t.x2.indexOf("px")>-1&&(s=parseFloat(t.x2)),"x1"===e?o:s}},{key:"getStringX",value:function(e){var t=this.w,r=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);var n=t.globals.labels.indexOf(e),i=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(n+1)+")");return i&&(r=parseFloat(i.getAttribute("x"))),r}}]),e}(),C=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new S(this.annoCtx)}return c(e,[{key:"addXaxisAnnotation",value:function(e,t,r){var n,i=this.w,a=this.helpers.getX1X2("x1",e),o=e.label.text,s=e.strokeDashArray;if(x.isNumber(a)){if(null===e.x2||void 0===e.x2){var l=this.annoCtx.graphics.drawLine(a+e.offsetX,0+e.offsetY,a+e.offsetX,i.globals.gridHeight+e.offsetY,e.borderColor,s,e.borderWidth);t.appendChild(l.node),e.id&&l.node.classList.add(e.id)}else{if((n=this.helpers.getX1X2("x2",e))<a){var c=a;a=n,n=c}var u=this.annoCtx.graphics.drawRect(a+e.offsetX,0+e.offsetY,n-a,i.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,s);u.node.classList.add("apexcharts-annotation-rect"),u.attr("clip-path","url(#gridRectMask".concat(i.globals.cuid,")")),t.appendChild(u.node),e.id&&u.node.classList.add(e.id)}var h=this.annoCtx.graphics.getTextRects(o,parseFloat(e.label.style.fontSize)),d="top"===e.label.position?4:"center"===e.label.position?i.globals.gridHeight/2+("vertical"===e.label.orientation?h.width/2:0):i.globals.gridHeight,f=this.annoCtx.graphics.drawText({x:a+e.label.offsetX,y:d+e.label.offsetY-("vertical"===e.label.orientation?"top"===e.label.position?h.width/2-12:-h.width/2:0),text:o,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});f.attr({rel:r}),t.appendChild(f.node),this.annoCtx.helpers.setOrientations(e,r)}}},{key:"drawXAxisAnnotations",value:function(){var e=this,t=this.w,r=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map((function(t,n){e.addXaxisAnnotation(t,r.node,n)})),r}}]),e}(),A=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.helpers=new S(this.annoCtx)}return c(e,[{key:"addYaxisAnnotation",value:function(e,t,r){var n,i=this.w,a=e.strokeDashArray,o=this.helpers.getY1Y2("y1",e),s=e.label.text;if(null===e.y2||void 0===e.y2){var l=this.annoCtx.graphics.drawLine(0+e.offsetX,o+e.offsetY,this._getYAxisAnnotationWidth(e),o+e.offsetY,e.borderColor,a,e.borderWidth);t.appendChild(l.node),e.id&&l.node.classList.add(e.id)}else{if((n=this.helpers.getY1Y2("y2",e))>o){var c=o;o=n,n=c}var u=this.annoCtx.graphics.drawRect(0+e.offsetX,n+e.offsetY,this._getYAxisAnnotationWidth(e),o-n,0,e.fillColor,e.opacity,1,e.borderColor,a);u.node.classList.add("apexcharts-annotation-rect"),u.attr("clip-path","url(#gridRectMask".concat(i.globals.cuid,")")),t.appendChild(u.node),e.id&&u.node.classList.add(e.id)}var h="right"===e.label.position?i.globals.gridWidth:"center"===e.label.position?i.globals.gridWidth/2:0,d=this.annoCtx.graphics.drawText({x:h+e.label.offsetX,y:(null!=n?n:o)+e.label.offsetY-3,text:s,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});d.attr({rel:r}),t.appendChild(d.node)}},{key:"_getYAxisAnnotationWidth",value:function(e){var t=this.w;return t.globals.gridWidth,(e.width.indexOf("%")>-1?t.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,t=this.w,r=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.map((function(t,n){e.addYaxisAnnotation(t,r.node,n)})),r}}]),e}(),T=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.helpers=new S(this.annoCtx)}return c(e,[{key:"addPointAnnotation",value:function(e,t,r){this.w;var n=this.helpers.getX1X2("x1",e),i=this.helpers.getY1Y2("y1",e);if(x.isNumber(n)){var a={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},o=this.annoCtx.graphics.drawMarker(n+e.marker.offsetX,i+e.marker.offsetY,a);t.appendChild(o.node);var s=e.label.text?e.label.text:"",l=this.annoCtx.graphics.drawText({x:n+e.label.offsetX,y:i+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:s,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(l.attr({rel:r}),t.appendChild(l.node),e.customSVG.SVG){var c=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});c.attr({transform:"translate(".concat(n+e.customSVG.offsetX,", ").concat(i+e.customSVG.offsetY,")")}),c.node.innerHTML=e.customSVG.SVG,t.appendChild(c.node)}if(e.image.path){var u=e.image.width?e.image.width:20,h=e.image.height?e.image.height:20;o=this.annoCtx.addImage({x:n+e.image.offsetX-u/2,y:i+e.image.offsetY-h/2,width:u,height:h,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&o.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&o.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e)),e.click&&o.node.addEventListener("click",e.click.bind(this,e))}}},{key:"drawPointAnnotations",value:function(){var e=this,t=this.w,r=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map((function(t,n){e.addPointAnnotation(t,r.node,n)})),r}}]),e}(),E={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},M=function(){function e(){s(this,e),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return c(e,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[E],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(e){return new Date(e).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)/e.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return null!==e?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),e}(),I=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.graphics=new w(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new S(this),this.xAxisAnnotations=new C(this),this.yAxisAnnotations=new A(this),this.pointsAnnotations=new T(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return c(e,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts){for(var t=this.yAxisAnnotations.drawYAxisAnnotations(),r=this.xAxisAnnotations.drawXAxisAnnotations(),n=this.pointsAnnotations.drawPointAnnotations(),i=e.config.chart.animations.enabled,a=[t,r,n],o=[r.node,t.node,n.node],s=0;s<3;s++)e.globals.dom.elGraphical.add(a[s]),!i||e.globals.resized||e.globals.dataChanged||"scatter"!==e.config.chart.type&&"bubble"!==e.config.chart.type&&e.globals.dataPoints>1&&o[s].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:o[s],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map((function(t,r){e.addImage(t,r)}))}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map((function(t,r){e.addText(t,r)}))}},{key:"addXaxisAnnotation",value:function(e,t,r){this.xAxisAnnotations.addXaxisAnnotation(e,t,r)}},{key:"addYaxisAnnotation",value:function(e,t,r){this.yAxisAnnotations.addYaxisAnnotation(e,t,r)}},{key:"addPointAnnotation",value:function(e,t,r){this.pointsAnnotations.addPointAnnotation(e,t,r)}},{key:"addText",value:function(e,t){var r=e.x,n=e.y,i=e.text,a=e.textAnchor,o=e.foreColor,s=e.fontSize,l=e.fontFamily,c=e.fontWeight,u=e.cssClass,h=e.backgroundColor,d=e.borderWidth,f=e.strokeDashArray,p=e.borderRadius,m=e.borderColor,v=e.appendTo,g=void 0===v?".apexcharts-annotations":v,y=e.paddingLeft,x=void 0===y?4:y,b=e.paddingRight,_=void 0===b?4:b,w=e.paddingBottom,k=void 0===w?2:w,S=e.paddingTop,C=void 0===S?2:S,A=this.w,T=this.graphics.drawText({x:r,y:n,text:i,textAnchor:a||"start",fontSize:s||"12px",fontWeight:c||"regular",fontFamily:l||A.config.chart.fontFamily,foreColor:o||A.config.chart.foreColor,cssClass:u}),E=A.globals.dom.baseEl.querySelector(g);E&&E.appendChild(T.node);var M=T.bbox();if(i){var I=this.graphics.drawRect(M.x-x,M.y-C,M.width+x+_,M.height+k+C,p,h||"transparent",1,d,m,f);E.insertBefore(I.node,T.node)}}},{key:"addImage",value:function(e,t){var r=this.w,n=e.path,i=e.x,a=void 0===i?0:i,o=e.y,s=void 0===o?0:o,l=e.width,c=void 0===l?20:l,u=e.height,h=void 0===u?20:u,d=e.appendTo,f=void 0===d?".apexcharts-annotations":d,p=r.globals.dom.Paper.image(n);p.size(c,h).move(a,s);var m=r.globals.dom.baseEl.querySelector(f);return m&&m.appendChild(p.node),p}},{key:"addXaxisAnnotationExternal",value:function(e,t,r){return this.addAnnotationExternal({params:e,pushToMemory:t,context:r,type:"xaxis",contextMethod:r.addXaxisAnnotation}),r}},{key:"addYaxisAnnotationExternal",value:function(e,t,r){return this.addAnnotationExternal({params:e,pushToMemory:t,context:r,type:"yaxis",contextMethod:r.addYaxisAnnotation}),r}},{key:"addPointAnnotationExternal",value:function(e,t,r){return void 0===this.invertAxis&&(this.invertAxis=r.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:r,type:"point",contextMethod:r.addPointAnnotation}),r}},{key:"addAnnotationExternal",value:function(e){var t=e.params,r=e.pushToMemory,n=e.context,i=e.type,a=e.contextMethod,o=n,s=o.w,l=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(i,"-annotations")),c=l.childNodes.length+1,u=new M,h=Object.assign({},"xaxis"===i?u.xAxisAnnotation:"yaxis"===i?u.yAxisAnnotation:u.pointAnnotation),d=x.extend(h,t);switch(i){case"xaxis":this.addXaxisAnnotation(d,l,c);break;case"yaxis":this.addYaxisAnnotation(d,l,c);break;case"point":this.addPointAnnotation(d,l,c)}var f=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(i,"-annotations .apexcharts-").concat(i,"-annotation-label[rel='").concat(c,"']")),p=this.helpers.addBackgroundToAnno(f,d);return p&&l.insertBefore(p.node,f),r&&s.globals.memory.methodsToExec.push({context:o,id:d.id?d.id:x.randomId(),method:a,label:"addAnnotation",params:t}),n}},{key:"clearAnnotations",value:function(e){var t=e.w,r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");t.globals.memory.methodsToExec.map((function(e,r){"addText"!==e.label&&"addAnnotation"!==e.label||t.globals.memory.methodsToExec.splice(r,1)})),r=x.listToArray(r),Array.prototype.forEach.call(r,(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}))}},{key:"removeAnnotation",value:function(e,t){var r=e.w,n=r.globals.dom.baseEl.querySelectorAll(".".concat(t));n&&(r.globals.memory.methodsToExec.map((function(e,n){e.id===t&&r.globals.memory.methodsToExec.splice(n,1)})),Array.prototype.forEach.call(n,(function(e){e.parentElement.removeChild(e)})))}}]),e}(),P=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return c(e,[{key:"isValidDate",value:function(e){return!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);var r=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(r)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,t){var r=this.w.globals.locale,n=this.w.config.xaxis.labels.datetimeUTC,i=["\0"].concat(v(r.months)),a=["\x01"].concat(v(r.shortMonths)),o=["\x02"].concat(v(r.days)),s=["\x03"].concat(v(r.shortDays));function l(e,t){var r=e+"";for(t=t||2;r.length<t;)r="0"+r;return r}var c=n?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+c)).replace(/(^|[^\\])yy/g,"$1"+c.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+c);var u=(n?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+i[0])).replace(/(^|[^\\])MMM/g,"$1"+a[0])).replace(/(^|[^\\])MM/g,"$1"+l(u))).replace(/(^|[^\\])M/g,"$1"+u);var h=n?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+o[0])).replace(/(^|[^\\])ddd/g,"$1"+s[0])).replace(/(^|[^\\])dd/g,"$1"+l(h))).replace(/(^|[^\\])d/g,"$1"+h);var d=n?e.getUTCHours():e.getHours(),f=d>12?d-12:0===d?12:d;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+l(d))).replace(/(^|[^\\])H/g,"$1"+d)).replace(/(^|[^\\])hh+/g,"$1"+l(f))).replace(/(^|[^\\])h/g,"$1"+f);var p=n?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+l(p))).replace(/(^|[^\\])m/g,"$1"+p);var m=n?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+l(m))).replace(/(^|[^\\])s/g,"$1"+m);var g=n?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+l(g,3)),g=Math.round(g/10),t=t.replace(/(^|[^\\])ff/g,"$1"+l(g)),g=Math.round(g/10);var y=d<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+g)).replace(/(^|[^\\])TT+/g,"$1"+y)).replace(/(^|[^\\])T/g,"$1"+y.charAt(0));var x=y.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+x)).replace(/(^|[^\\])t/g,"$1"+x.charAt(0));var b=-e.getTimezoneOffset(),_=n||!b?"Z":b>0?"+":"-";if(!n){var w=(b=Math.abs(b))%60;_+=l(Math.floor(b/60))+":"+l(w)}t=t.replace(/(^|[^\\])K/g,"$1"+_);var k=(n?e.getUTCDay():e.getDay())+1;return(t=(t=(t=(t=t.replace(new RegExp(o[0],"g"),o[k])).replace(new RegExp(s[0],"g"),s[k])).replace(new RegExp(i[0],"g"),i[u])).replace(new RegExp(a[0],"g"),a[u])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,t,r){var n=this.w;void 0!==n.config.xaxis.min&&(e=n.config.xaxis.min),void 0!==n.config.xaxis.max&&(t=n.config.xaxis.max);var i=this.getDate(e),a=this.getDate(t),o=this.formatDate(i,"yyyy MM dd HH mm ss fff").split(" "),s=this.formatDate(a,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(o[6],10),maxMillisecond:parseInt(s[6],10),minSecond:parseInt(o[5],10),maxSecond:parseInt(s[5],10),minMinute:parseInt(o[4],10),maxMinute:parseInt(s[4],10),minHour:parseInt(o[3],10),maxHour:parseInt(s[3],10),minDate:parseInt(o[2],10),maxDate:parseInt(s[2],10),minMonth:parseInt(o[1],10)-1,maxMonth:parseInt(s[1],10)-1,minYear:parseInt(o[0],10),maxYear:parseInt(s[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,t,r){return this.determineDaysOfMonths(e,t)-r}},{key:"determineDaysOfYear",value:function(e){var t=365;return this.isLeapYear(e)&&(t=366),t}},{key:"determineRemainingDaysOfYear",value:function(e,t,r){var n=this.daysCntOfYear[t]+r;return t>1&&this.isLeapYear()&&n++,n}},{key:"determineDaysOfMonths",value:function(e,t){var r=30;switch(e=x.monthMod(e),!0){case this.months30.indexOf(e)>-1:2===e&&(r=this.isLeapYear(t)?29:28);break;case this.months31.indexOf(e)>-1:default:r=31}return r}}]),e}(),R=function(e){var t,r=e.ctx,n=e.seriesIndex,i=e.dataPointIndex,a=e.y1,o=e.y2,s=e.w,l=s.globals.seriesRangeStart[n][i],c=s.globals.seriesRangeEnd[n][i],u=s.globals.labels[i],h=s.config.series[n].name?s.config.series[n].name:"",d=s.config.tooltip.y.formatter,f=s.config.tooltip.y.title.formatter,p={w:s,seriesIndex:n,dataPointIndex:i,start:l,end:c};"function"==typeof f&&(h=f(h,p)),null!==(t=s.config.series[n].data[i])&&void 0!==t&&t.x&&(u=s.config.series[n].data[i].x+":"),"function"==typeof d&&(u=d(u,p)),Number.isFinite(a)&&Number.isFinite(o)&&(l=a,c=o);var m="",v="",g=s.globals.colors[n];if(void 0===s.config.tooltip.x.formatter)if("datetime"===s.config.xaxis.type){var y=new P(r);m=y.formatDate(y.getDate(l),s.config.tooltip.x.format),v=y.formatDate(y.getDate(c),s.config.tooltip.x.format)}else m=l,v=c;else m=s.config.tooltip.x.formatter(l),v=s.config.tooltip.x.formatter(c);return{start:l,end:c,startVal:m,endVal:v,ylabel:u,color:g,seriesName:h}},z=function(e){var t=e.color,r=e.seriesName,n=e.ylabel,i=e.start,a=e.end,o=e.seriesIndex,s=e.dataPointIndex,l=e.ctx.tooltip.tooltipLabels.getFormatters(o);i=l.yLbFormatter(i),a=l.yLbFormatter(a);var c=l.yLbFormatter(e.w.globals.series[o][s]),u='<span class="value start-value">\n  '.concat(i,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(a,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+t+'">'+(r||"")+'</span></div><div> <span class="category">'+n+" </span> "+(e.w.globals.comboCharts?"rangeArea"===e.w.config.series[o].type||"rangeBar"===e.w.config.series[o].type?u:"<span>".concat(c,"</span>"):u)+" </div></div>"},L=function(){function e(t){s(this,e),this.opts=t}return c(e,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,x.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var r=t.seriesIndex,n=t.dataPointIndex,i=t.w;return e._getBoxTooltip(i,r,n,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var r=t.seriesIndex,n=t.dataPointIndex,i=t.w;return e._getBoxTooltip(i,r,n,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,t){t.ctx;var r=t.seriesIndex,n=t.dataPointIndex,i=t.w,a=function(){var e=i.globals.seriesRangeStart[r][n];return i.globals.seriesRangeEnd[r][n]-e};return i.globals.comboCharts?"rangeBar"===i.config.series[r].type||"rangeArea"===i.config.series[r].type?a():e:a()},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?function(e){var t=R(e),r=t.color,n=t.seriesName,i=t.ylabel,o=t.startVal,s=t.endVal;return z(a(a({},e),{},{color:r,seriesName:n,ylabel:i,start:o,end:s}))}(e):function(e){var t=R(e),r=t.color,n=t.seriesName,i=t.ylabel,o=t.start,s=t.end;return z(a(a({},e),{},{color:r,seriesName:n,ylabel:i,start:o,end:s}))}(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(e){return function(e){var t=R(e),r=t.color,n=t.seriesName,i=t.ylabel,o=t.start,s=t.end;return z(a(a({},e),{},{color:r,seriesName:n,ylabel:i,start:o,end:s}))}(e)}}}}},{key:"brush",value:function(e){return x.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var t=e.dataLabels.formatter;return e.yaxis.forEach((function(t,r){e.yaxis[r].min=0,e.yaxis[r].max=100})),"bar"===e.chart.type&&(e.dataLabels.formatter=t||function(e){return"number"==typeof e&&e?e.toFixed(0)+"%":e}),e}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,t,r){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(e){return x.isNumber(e)?Math.floor(e):e};var n=e.xaxis.labels.formatter,i=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return r&&r.length&&(i=r.map((function(e){return Array.isArray(e)?e:String(e)}))),i&&i.length&&(e.xaxis.labels.formatter=function(e){return x.isNumber(e)?n(i[Math.floor(e)-1]):n(e)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(e,t,r,n,i){var a=e.globals.seriesCandleO[t][r],o=e.globals.seriesCandleH[t][r],s=e.globals.seriesCandleM[t][r],l=e.globals.seriesCandleL[t][r],c=e.globals.seriesCandleC[t][r];return e.config.series[t].type&&e.config.series[t].type!==i?'<div class="apexcharts-custom-tooltip">\n          '.concat(e.config.series[t].name?e.config.series[t].name:"series-"+(t+1),": <strong>").concat(e.globals.series[t][r],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(n[0],': <span class="value">')+a+"</span></div>"+"<div>".concat(n[1],': <span class="value">')+o+"</span></div>"+(s?"<div>".concat(n[2],': <span class="value">')+s+"</span></div>":"")+"<div>".concat(n[3],': <span class="value">')+l+"</span></div>"+"<div>".concat(n[4],': <span class="value">')+c+"</span></div></div>"}}]),e}(),D=function(){function e(t){s(this,e),this.opts=t}return c(e,[{key:"init",value:function(e){var t=e.responsiveOverride,r=this.opts,n=new M,i=new L(r);this.chartType=r.chart.type,"histogram"===this.chartType&&(r.chart.type="bar",r=x.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},r)),r=this.extendYAxis(r),r=this.extendAnnotations(r);var a=n.init(),s={};if(r&&"object"===o(r)){var l={};l=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(r.chart.type)?i[r.chart.type]():i.line(),r.chart.brush&&r.chart.brush.enabled&&(l=i.brush(l)),r.chart.stacked&&"100%"===r.chart.stackType&&(r=i.stacked100(r)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(r),r.xaxis=r.xaxis||window.Apex.xaxis||{},t||(r.xaxis.convertedCatToNumeric=!1),((r=this.checkForCatToNumericXAxis(this.chartType,l,r)).chart.sparkline&&r.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(l=i.sparkline(l)),s=x.extend(a,l)}var c=x.extend(s,window.Apex);return a=x.extend(c,r),this.handleUserInputErrors(a)}},{key:"checkForCatToNumericXAxis",value:function(e,t,r){var n=new L(r),i=("bar"===e||"boxPlot"===e)&&r.plotOptions&&r.plotOptions.bar&&r.plotOptions.bar.horizontal,a="pie"===e||"polarArea"===e||"donut"===e||"radar"===e||"radialBar"===e||"heatmap"===e,o="datetime"!==r.xaxis.type&&"numeric"!==r.xaxis.type,s=r.xaxis.tickPlacement?r.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return i||a||!o||"between"===s||(r=n.convertCatToNumeric(r)),r}},{key:"extendYAxis",value:function(e,t){var r=new M;(void 0===e.yaxis||!e.yaxis||Array.isArray(e.yaxis)&&0===e.yaxis.length)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=x.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[x.extend(r.yAxis,e.yaxis)]:e.yaxis=x.extendArray(e.yaxis,r.yAxis);var n=!1;e.yaxis.forEach((function(e){e.logarithmic&&(n=!0)}));var i=e.series;return t&&!i&&(i=t.config.series),n&&i.length!==e.yaxis.length&&i.length&&(e.yaxis=i.map((function(t,n){if(t.name||(i[n].name="series-".concat(n+1)),e.yaxis[n])return e.yaxis[n].seriesName=i[n].name,e.yaxis[n];var a=x.extend(r.yAxis,e.yaxis[0]);return a.show=!1,a}))),n&&i.length>1&&i.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),e}},{key:"extendAnnotations",value:function(e){return void 0===e.annotations&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var t=new M;return e.annotations.yaxis=x.extendArray(void 0!==e.annotations.yaxis?e.annotations.yaxis:[],t.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var t=new M;return e.annotations.xaxis=x.extendArray(void 0!==e.annotations.xaxis?e.annotations.xaxis:[],t.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var t=new M;return e.annotations.points=x.extendArray(void 0!==e.annotations.points?e.annotations.points:[],t.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&"dark"===e.theme.mode&&(e.tooltip||(e.tooltip={}),"light"!==e.tooltip.theme&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.chart.background||(e.chart.background="#424242"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===t.chart.type&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return"bar"!==t.chart.type&&"rangeBar"!==t.chart.type||t.tooltip.shared&&"barWidth"===t.xaxis.crosshairs.width&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),"candlestick"!==t.chart.type&&"boxPlot"!==t.chart.type||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t}}]),e}(),O=function(){function e(){s(this,e)}return c(e,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRange=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.labels=[],e.hasGroups=!1,e.groups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.xaxisLabelsCount=0,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:"pan"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.pan,selectionEnabled:"selection"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(e){var t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=x.extend({},e),t.initialSeries=x.clone(e.series),t.lastXAxis=x.clone(t.initialConfig.xaxis),t.lastYAxis=x.clone(t.initialConfig.yaxis),t}}]),e}(),F=function(){function e(t){s(this,e),this.opts=t}return c(e,[{key:"init",value:function(){var e=new D(this.opts).init({responsiveOverride:!1});return{config:e,globals:(new O).init(e)}}}]),e}(),j=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.opts=null,this.seriesIndex=0}return c(e,[{key:"clippedImgArea",value:function(e){var t=this.w,r=t.config,n=parseInt(t.globals.gridWidth,10),i=parseInt(t.globals.gridHeight,10),a=n>i?n:i,o=e.image,s=0,l=0;void 0===e.width&&void 0===e.height?void 0!==r.fill.image.width&&void 0!==r.fill.image.height?(s=r.fill.image.width+1,l=r.fill.image.height):(s=a+1,l=a):(s=e.width,l=e.height);var c=document.createElementNS(t.globals.SVGNS,"pattern");w.setAttrs(c,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:s+"px",height:l+"px"});var u=document.createElementNS(t.globals.SVGNS,"image");c.appendChild(u),u.setAttributeNS(window.SVG.xlink,"href",o),w.setAttrs(u,{x:0,y:0,preserveAspectRatio:"none",width:s+"px",height:l+"px"}),u.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(c)}},{key:"getSeriesIndex",value:function(e){var t=this.w;return("bar"===t.config.chart.type||"rangeBar"===t.config.chart.type)&&t.config.plotOptions.bar.distributed||"heatmap"===t.config.chart.type||"treemap"===t.config.chart.type?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(e){var t=this.w;this.opts=e;var r,n,i,a=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var o=this.getFillColors()[this.seriesIndex];void 0!==t.globals.seriesColors[this.seriesIndex]&&(o=t.globals.seriesColors[this.seriesIndex]),"function"==typeof o&&(o=o({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:t}));var s=e.fillType?e.fillType:this.getFillType(this.seriesIndex),l=Array.isArray(a.fill.opacity)?a.fill.opacity[this.seriesIndex]:a.fill.opacity;e.color&&(o=e.color);var c=o;if(-1===o.indexOf("rgb")?o.length<9&&(c=x.hexToRgba(o,l)):o.indexOf("rgba")>-1&&(l=x.getOpacityFromRGBA(o)),e.opacity&&(l=e.opacity),"pattern"===s&&(n=this.handlePatternFill({fillConfig:e.fillConfig,patternFill:n,fillColor:o,fillOpacity:l,defaultColor:c})),"gradient"===s&&(i=this.handleGradientFill({fillConfig:e.fillConfig,fillColor:o,fillOpacity:l,i:this.seriesIndex})),"image"===s){var u=a.fill.image.src,h=e.patternID?e.patternID:"";this.clippedImgArea({opacity:l,image:Array.isArray(u)?e.seriesNumber<u.length?u[e.seriesNumber]:u[0]:u,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:"pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(h)}),r="url(#pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(h,")")}else r="gradient"===s?i:"pattern"===s?n:c;return e.solid&&(r=c),r}},{key:"getFillType",value:function(e){var t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,t=e.config,r=this.opts,n=[];return e.globals.comboCharts?"line"===e.config.series[this.seriesIndex].type?Array.isArray(e.globals.stroke.colors)?n=e.globals.stroke.colors:n.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?n=e.globals.fill.colors:n.push(e.globals.fill.colors):"line"===t.chart.type?Array.isArray(e.globals.stroke.colors)?n=e.globals.stroke.colors:n.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?n=e.globals.fill.colors:n.push(e.globals.fill.colors),void 0!==r.fillColors&&(n=[],Array.isArray(r.fillColors)?n=r.fillColors.slice():n.push(r.fillColors)),n}},{key:"handlePatternFill",value:function(e){var t=e.fillConfig,r=(e.patternFill,e.fillColor),n=e.fillOpacity,i=e.defaultColor,a=this.w.config.fill;t&&(a=t);var o=this.opts,s=new w(this.ctx),l=Array.isArray(a.pattern.strokeWidth)?a.pattern.strokeWidth[this.seriesIndex]:a.pattern.strokeWidth,c=r;return Array.isArray(a.pattern.style)?void 0!==a.pattern.style[o.seriesNumber]?s.drawPattern(a.pattern.style[o.seriesNumber],a.pattern.width,a.pattern.height,c,l,n):i:s.drawPattern(a.pattern.style,a.pattern.width,a.pattern.height,c,l,n)}},{key:"handleGradientFill",value:function(e){var t=e.fillColor,r=e.fillOpacity,n=e.fillConfig,i=e.i,o=this.w.config.fill;n&&(o=a(a({},o),n));var s,l=this.opts,c=new w(this.ctx),u=new x,h=o.gradient.type,d=t,f=void 0===o.gradient.opacityFrom?r:Array.isArray(o.gradient.opacityFrom)?o.gradient.opacityFrom[i]:o.gradient.opacityFrom;d.indexOf("rgba")>-1&&(f=x.getOpacityFromRGBA(d));var p=void 0===o.gradient.opacityTo?r:Array.isArray(o.gradient.opacityTo)?o.gradient.opacityTo[i]:o.gradient.opacityTo;if(void 0===o.gradient.gradientToColors||0===o.gradient.gradientToColors.length)s="dark"===o.gradient.shade?u.shadeColor(-1*parseFloat(o.gradient.shadeIntensity),t.indexOf("rgb")>-1?x.rgb2hex(t):t):u.shadeColor(parseFloat(o.gradient.shadeIntensity),t.indexOf("rgb")>-1?x.rgb2hex(t):t);else if(o.gradient.gradientToColors[l.seriesNumber]){var m=o.gradient.gradientToColors[l.seriesNumber];s=m,m.indexOf("rgba")>-1&&(p=x.getOpacityFromRGBA(m))}else s=t;if(o.gradient.gradientFrom&&(d=o.gradient.gradientFrom),o.gradient.gradientTo&&(s=o.gradient.gradientTo),o.gradient.inverseColors){var v=d;d=s,s=v}return d.indexOf("rgb")>-1&&(d=x.rgb2hex(d)),s.indexOf("rgb")>-1&&(s=x.rgb2hex(s)),c.drawGradient(h,d,s,f,p,l.size,o.gradient.stops,o.gradient.colorStops,i)}}]),e}(),N=function(){function e(t,r){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)void 0===e.globals.markers.size[t]&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map((function(t){return e.config.markers.size}))}},{key:"plotChartMarkers",value:function(e,t,r,n){var i,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.w,s=t,l=e,c=null,u=new w(this.ctx),h=o.config.markers.discrete&&o.config.markers.discrete.length;if((o.globals.markers.size[t]>0||a||h)&&(c=u.group({class:a||h?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(o.globals.cuid,")")),Array.isArray(l.x))for(var d=0;d<l.x.length;d++){var f=r;1===r&&0===d&&(f=0),1===r&&1===d&&(f=1);var p="apexcharts-marker";"line"!==o.config.chart.type&&"area"!==o.config.chart.type||o.globals.comboCharts||o.config.tooltip.intersect||(p+=" no-pointer-events");var m=Array.isArray(o.config.markers.size)?o.globals.markers.size[t]>0:o.config.markers.size>0;if(m||a||h){x.isNumber(l.y[d])?p+=" w".concat(x.randomId()):p="apexcharts-nullpoint";var v=this.getMarkerConfig({cssClass:p,seriesIndex:t,dataPointIndex:f});o.config.series[s].data[f]&&(o.config.series[s].data[f].fillColor&&(v.pointFillColor=o.config.series[s].data[f].fillColor),o.config.series[s].data[f].strokeColor&&(v.pointStrokeColor=o.config.series[s].data[f].strokeColor)),n&&(v.pSize=n),(i=u.drawMarker(l.x[d],l.y[d],v)).attr("rel",f),i.attr("j",f),i.attr("index",t),i.node.setAttribute("default-marker-size",v.pSize);var g=new _(this.ctx);g.setSelectionFilter(i,t,f),this.addEvents(i),c&&c.add(i)}else void 0===o.globals.pointsArray[t]&&(o.globals.pointsArray[t]=[]),o.globals.pointsArray[t].push([l.x[d],l.y[d]])}return c}},{key:"getMarkerConfig",value:function(e){var t=e.cssClass,r=e.seriesIndex,n=e.dataPointIndex,i=void 0===n?null:n,a=e.finishRadius,o=void 0===a?null:a,s=this.w,l=this.getMarkerStyle(r),c=s.globals.markers.size[r],u=s.config.markers;return null!==i&&u.discrete.length&&u.discrete.map((function(e){e.seriesIndex===r&&e.dataPointIndex===i&&(l.pointStrokeColor=e.strokeColor,l.pointFillColor=e.fillColor,c=e.size,l.pointShape=e.shape)})),{pSize:null===o?c:o,pRadius:u.radius,width:Array.isArray(u.width)?u.width[r]:u.width,height:Array.isArray(u.height)?u.height[r]:u.height,pointStrokeWidth:Array.isArray(u.strokeWidth)?u.strokeWidth[r]:u.strokeWidth,pointStrokeColor:l.pointStrokeColor,pointFillColor:l.pointFillColor,shape:l.pointShape||(Array.isArray(u.shape)?u.shape[r]:u.shape),class:t,pointStrokeOpacity:Array.isArray(u.strokeOpacity)?u.strokeOpacity[r]:u.strokeOpacity,pointStrokeDashArray:Array.isArray(u.strokeDashArray)?u.strokeDashArray[r]:u.strokeDashArray,pointFillOpacity:Array.isArray(u.fillOpacity)?u.fillOpacity[r]:u.fillOpacity,seriesIndex:r}}},{key:"addEvents",value:function(e){var t=this.w,r=new w(this.ctx);e.node.addEventListener("mouseenter",r.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",r.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",r.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",r.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var t=this.w,r=t.globals.markers.colors,n=t.config.markers.strokeColor||t.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(n)?n[e]:n,pointFillColor:Array.isArray(r)?r[e]:r}}}]),e}(),B=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return c(e,[{key:"draw",value:function(e,t,r){var n=this.w,i=new w(this.ctx),a=r.realIndex,o=r.pointsPos,s=r.zRatio,l=r.elParent,c=i.group({class:"apexcharts-series-markers apexcharts-series-".concat(n.config.chart.type)});if(c.attr("clip-path","url(#gridRectMarkerMask".concat(n.globals.cuid,")")),Array.isArray(o.x))for(var u=0;u<o.x.length;u++){var h=t+1,d=!0;0===t&&0===u&&(h=0),0===t&&1===u&&(h=1);var f=0,p=n.globals.markers.size[a];if(s!==1/0){var m=n.config.plotOptions.bubble;p=n.globals.seriesZ[a][h],m.zScaling&&(p/=s),m.minBubbleRadius&&p<m.minBubbleRadius&&(p=m.minBubbleRadius),m.maxBubbleRadius&&p>m.maxBubbleRadius&&(p=m.maxBubbleRadius)}n.config.chart.animations.enabled||(f=p);var v=o.x[u],g=o.y[u];if(f=f||0,null!==g&&void 0!==n.globals.series[a][h]||(d=!1),d){var y=this.drawPoint(v,g,f,p,a,h,t);c.add(y)}l.add(c)}}},{key:"drawPoint",value:function(e,t,r,n,i,a,o){var s=this.w,l=i,c=new b(this.ctx),u=new _(this.ctx),h=new j(this.ctx),d=new N(this.ctx),f=new w(this.ctx),p=d.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:l,dataPointIndex:a,finishRadius:"bubble"===s.config.chart.type||s.globals.comboCharts&&s.config.series[i]&&"bubble"===s.config.series[i].type?n:null});n=p.pSize;var m,v=h.fillPath({seriesNumber:i,dataPointIndex:a,color:p.pointFillColor,patternUnits:"objectBoundingBox",value:s.globals.series[i][o]});if("circle"===p.shape?m=f.drawCircle(r):"square"!==p.shape&&"rect"!==p.shape||(m=f.drawRect(0,0,p.width-p.pointStrokeWidth/2,p.height-p.pointStrokeWidth/2,p.pRadius)),s.config.series[l].data[a]&&s.config.series[l].data[a].fillColor&&(v=s.config.series[l].data[a].fillColor),m.attr({x:e-p.width/2-p.pointStrokeWidth/2,y:t-p.height/2-p.pointStrokeWidth/2,cx:e,cy:t,fill:v,"fill-opacity":p.pointFillOpacity,stroke:p.pointStrokeColor,r:n,"stroke-width":p.pointStrokeWidth,"stroke-dasharray":p.pointStrokeDashArray,"stroke-opacity":p.pointStrokeOpacity}),s.config.chart.dropShadow.enabled){var g=s.config.chart.dropShadow;u.dropShadow(m,g,i)}if(!this.initialAnim||s.globals.dataChanged||s.globals.resized)s.globals.animationEnded=!0;else{var y=s.config.chart.animations.speed;c.animateMarker(m,0,"circle"===p.shape?n:{width:p.width,height:p.height},y,s.globals.easing,(function(){window.setTimeout((function(){c.animationCompleted(m)}),100)}))}if(s.globals.dataChanged&&"circle"===p.shape)if(this.dynamicAnim){var x,k,S,C,A=s.config.chart.animations.dynamicAnimation.speed;null!=(C=s.globals.previousPaths[i]&&s.globals.previousPaths[i][o])&&(x=C.x,k=C.y,S=void 0!==C.r?C.r:n);for(var T=0;T<s.globals.collapsedSeries.length;T++)s.globals.collapsedSeries[T].index===i&&(A=1,n=0);0===e&&0===t&&(n=0),c.animateCircle(m,{cx:x,cy:k,r:S},{cx:e,cy:t,r:n},A,s.globals.easing)}else m.attr({r:n});return m.attr({rel:a,j:a,index:i,"default-marker-size":n}),u.setSelectionFilter(m,i,a),d.addEvents(m),m.node.classList.add("apexcharts-marker"),m}},{key:"centerTextInBubble",value:function(e){var t=this.w;return{y:e+=parseInt(t.config.dataLabels.style.fontSize,10)/4}}}]),e}(),Z=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"dataLabelsCorrection",value:function(e,t,r,n,i,a,o){var s=this.w,l=!1,c=new w(this.ctx).getTextRects(r,o),u=c.width,h=c.height;t<0&&(t=0),t>s.globals.gridHeight+h&&(t=s.globals.gridHeight+h/2),void 0===s.globals.dataLabelsRects[n]&&(s.globals.dataLabelsRects[n]=[]),s.globals.dataLabelsRects[n].push({x:e,y:t,width:u,height:h});var d=s.globals.dataLabelsRects[n].length-2,f=void 0!==s.globals.lastDrawnDataLabelsIndexes[n]?s.globals.lastDrawnDataLabelsIndexes[n][s.globals.lastDrawnDataLabelsIndexes[n].length-1]:0;if(void 0!==s.globals.dataLabelsRects[n][d]){var p=s.globals.dataLabelsRects[n][f];(e>p.x+p.width+2||t>p.y+p.height+2||e+u<p.x)&&(l=!0)}return(0===i||a)&&(l=!0),{x:e,y:t,textRects:c,drawnextLabel:l}}},{key:"drawDataLabel",value:function(e){var t=this,r=e.type,n=e.pos,i=e.i,a=e.j,o=e.isRangeStart,s=e.strokeWidth,l=void 0===s?2:s,c=this.w,u=new w(this.ctx),h=c.config.dataLabels,d=0,f=0,p=a,m=null;if(!h.enabled||!Array.isArray(n.x))return m;m=u.group({class:"apexcharts-data-labels"});for(var v=0;v<n.x.length;v++)if(d=n.x[v]+h.offsetX,f=n.y[v]+h.offsetY+l,!isNaN(d)){1===a&&0===v&&(p=0),1===a&&1===v&&(p=1);var g=c.globals.series[i][p];"rangeArea"===r&&(g=o?c.globals.seriesRangeStart[i][p]:c.globals.seriesRangeEnd[i][p]);var y="",x=function(e){return c.config.dataLabels.formatter(e,{ctx:t.ctx,seriesIndex:i,dataPointIndex:p,w:c})};"bubble"===c.config.chart.type?(y=x(g=c.globals.seriesZ[i][p]),f=n.y[v],f=new B(this.ctx).centerTextInBubble(f,i,p).y):void 0!==g&&(y=x(g)),this.plotDataLabelsText({x:d,y:f,text:y,i:i,j:p,parent:m,offsetCorrection:!0,dataLabelsConfig:c.config.dataLabels})}return m}},{key:"plotDataLabelsText",value:function(e){var t=this.w,r=new w(this.ctx),n=e.x,i=e.y,a=e.i,o=e.j,s=e.text,l=e.textAnchor,c=e.fontSize,u=e.parent,h=e.dataLabelsConfig,d=e.color,f=e.alwaysDrawDataLabel,p=e.offsetCorrection;if(!(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(a)<0)){var m={x:n,y:i,drawnextLabel:!0,textRects:null};p&&(m=this.dataLabelsCorrection(n,i,s,a,o,f,parseInt(h.style.fontSize,10))),t.globals.zoomed||(n=m.x,i=m.y),m.textRects&&(n<-10-m.textRects.width||n>t.globals.gridWidth+m.textRects.width+10)&&(s="");var v=t.globals.dataLabels.style.colors[a];(("bar"===t.config.chart.type||"rangeBar"===t.config.chart.type)&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(v=t.globals.dataLabels.style.colors[o]),"function"==typeof v&&(v=v({series:t.globals.series,seriesIndex:a,dataPointIndex:o,w:t})),d&&(v=d);var g=h.offsetX,y=h.offsetY;if("bar"!==t.config.chart.type&&"rangeBar"!==t.config.chart.type||(g=0,y=0),m.drawnextLabel){var x=r.drawText({width:100,height:parseInt(h.style.fontSize,10),x:n+g,y:i+y,foreColor:v,textAnchor:l||h.textAnchor,text:s,fontSize:c||h.style.fontSize,fontFamily:h.style.fontFamily,fontWeight:h.style.fontWeight||"normal"});if(x.attr({class:"apexcharts-datalabel",cx:n,cy:i}),h.dropShadow.enabled){var b=h.dropShadow;new _(this.ctx).dropShadow(x,b)}u.add(x),void 0===t.globals.lastDrawnDataLabelsIndexes[a]&&(t.globals.lastDrawnDataLabelsIndexes[a]=[]),t.globals.lastDrawnDataLabelsIndexes[a].push(o)}}}},{key:"addBackgroundToDataLabel",value:function(e,t){var r=this.w,n=r.config.dataLabels.background,i=n.padding,a=n.padding/2,o=t.width,s=t.height,l=new w(this.ctx).drawRect(t.x-i,t.y-a/2,o+2*i,s+a,n.borderRadius,"transparent"===r.config.chart.background?"#fff":r.config.chart.background,n.opacity,n.borderWidth,n.borderColor);return n.dropShadow.enabled&&new _(this.ctx).dropShadow(l,n.dropShadow),l}},{key:"dataLabelsBackground",value:function(){var e=this.w;if("bubble"!==e.config.chart.type)for(var t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),r=0;r<t.length;r++){var n=t[r],i=n.getBBox(),a=null;if(i.width&&i.height&&(a=this.addBackgroundToDataLabel(n,i)),a){n.parentNode.insertBefore(a.node,n);var o=n.getAttribute("fill");!e.config.chart.animations.enabled||e.globals.resized||e.globals.dataChanged?a.attr({fill:o}):a.animate().attr({fill:o}),n.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),r=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),n=0;n<t.length;n++)r&&r.insertBefore(t[n],r.nextSibling)}}]),e}(),U=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.legendInactiveClass="legend-mouseover-inactive"}return c(e,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(x.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var t=this.getSeriesByName(e),r=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:r}}},{key:"addCollapsedClassToSeries",value:function(e,t){var r=this.w;function n(r){for(var n=0;n<r.length;n++)r[n].index===t&&e.node.classList.add("apexcharts-series-collapsed")}n(r.globals.collapsedSeries),n(r.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.w,i=x.clone(n.globals.initialSeries);n.globals.previousPaths=[],r?(n.globals.collapsedSeries=[],n.globals.ancillaryCollapsedSeries=[],n.globals.collapsedSeriesIndices=[],n.globals.ancillaryCollapsedSeriesIndices=[]):i=this.emptyCollapsedSeries(i),n.config.series=i,e&&(t&&(n.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(i,n.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var t=this.w,r=0;r<e.length;r++)t.globals.collapsedSeriesIndices.indexOf(r)>-1&&(e[r].data=[]);return e}},{key:"toggleSeriesOnHover",value:function(e,t){var r=this.w;t||(t=e.target);var n=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===e.type){var i=parseInt(t.getAttribute("rel"),10)-1,a=null,o=null;r.globals.axisCharts||"radialBar"===r.config.chart.type?r.globals.axisCharts?(a=r.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(i,"']")),o=r.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(i,"']"))):a=r.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(i+1,"']")):a=r.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(i+1,"'] path"));for(var s=0;s<n.length;s++)n[s].classList.add(this.legendInactiveClass);null!==a&&(r.globals.axisCharts||a.parentNode.classList.remove(this.legendInactiveClass),a.classList.remove(this.legendInactiveClass),null!==o&&o.classList.remove(this.legendInactiveClass))}else if("mouseout"===e.type)for(var l=0;l<n.length;l++)n[l].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,t){var r=this,n=this.w,i=n.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),a=function(e){for(var t=0;t<i.length;t++)i[t].classList[e](r.legendInactiveClass)};if("mousemove"===e.type){var o=parseInt(t.getAttribute("rel"),10)-1;a("add"),function(e){for(var t=0;t<i.length;t++){var n=parseInt(i[t].getAttribute("val"),10);n>=e.from&&n<=e.to&&i[t].classList.remove(r.legendInactiveClass)}}(n.config.plotOptions.heatmap.colorScale.ranges[o])}else"mouseout"===e.type&&a("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.w,n=0;if(r.config.series.length>1)for(var i=r.config.series.map((function(e,n){return e.data&&e.data.length>0&&-1===r.globals.collapsedSeriesIndices.indexOf(n)&&(!r.globals.comboCharts||0===t.length||t.length&&t.indexOf(r.config.series[n].type)>-1)?n:-1})),a="asc"===e?0:i.length-1;"asc"===e?a<i.length:a>=0;"asc"===e?a++:a--)if(-1!==i[a]){n=i[a];break}return n}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map((function(e,t){return"bar"===e.type||"column"===e.type?t:-1})).filter((function(e){return-1!==e})):this.w.config.series.map((function(e,t){return t}))}},{key:"getPreviousPaths",value:function(){var e=this.w;function t(t,r,n){for(var i=t[r].childNodes,a={type:n,paths:[],realIndex:t[r].getAttribute("data:realIndex")},o=0;o<i.length;o++)if(i[o].hasAttribute("pathTo")){var s=i[o].getAttribute("pathTo");a.paths.push({d:s})}e.globals.previousPaths.push(a)}e.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach((function(r){for(var n,i=(n=r,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(n,"-series .apexcharts-series"))),a=0;a<i.length;a++)t(i,a,r)})),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(r.length>0)for(var n=function(t){for(var r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(t,"'] rect")),n=[],i=function(e){var t=function(t){return r[e].getAttribute(t)},i={x:parseFloat(t("x")),y:parseFloat(t("y")),width:parseFloat(t("width")),height:parseFloat(t("height"))};n.push({rect:i,color:r[e].getAttribute("color")})},a=0;a<r.length;a++)i(a);e.globals.previousPaths.push(n)},i=0;i<r.length;i++)n(i);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(e){var t=this.w,r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series"));if(r.length>0)for(var n=0;n<r.length;n++){for(var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series[data\\:realIndex='").concat(n,"'] circle")),a=[],o=0;o<i.length;o++)a.push({x:i[o].getAttribute("cx"),y:i[o].getAttribute("cy"),r:i[o].getAttribute("r")});t.globals.previousPaths.push(a)}}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,t=e.config.noData,r=new w(this.ctx),n=e.globals.svgWidth/2,i=e.globals.svgHeight/2,a="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,"left"===t.align?(n=10,a="start"):"right"===t.align&&(n=e.globals.svgWidth-10,a="end"),"top"===t.verticalAlign?i=50:"bottom"===t.verticalAlign&&(i=e.globals.svgHeight-50),n+=t.offsetX,i=i+parseInt(t.style.fontSize,10)+2+t.offsetY,void 0!==t.text&&""!==t.text){var o=r.drawText({x:n,y:i,text:t.text,textAnchor:a,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,foreColor:t.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(o)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var t=this.w,r=0;r<e.length;r++)if(0===e[r].length)for(var n=0;n<e[t.globals.maxValsInArrayIndex].length;n++)e[r].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,t=this.w,r=this.filteredSeriesX(),n=0;n<r.length-1;n++)if(r[n][0]!==r[n+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map((function(e){return e.length>0?e:[]}))}}]),e}(),V=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new k(this.ctx)}return c(e,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),t=new U(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),void 0!==e[this.activeSeriesIndex].data&&e[this.activeSeriesIndex].data.length>0&&null!==e[this.activeSeriesIndex].data[0]&&void 0!==e[this.activeSeriesIndex].data[0].x&&null!==e[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),t=new U(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),void 0!==e[this.activeSeriesIndex].data&&e[this.activeSeriesIndex].data.length>0&&void 0!==e[this.activeSeriesIndex].data[0]&&null!==e[this.activeSeriesIndex].data[0]&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,t){for(var r=this.w.config,n=this.w.globals,i="boxPlot"===r.chart.type||"boxPlot"===r.series[t].type,a=0;a<e[t].data.length;a++)if(void 0!==e[t].data[a][1]&&(Array.isArray(e[t].data[a][1])&&4===e[t].data[a][1].length&&!i?this.twoDSeries.push(x.parseNumber(e[t].data[a][1][3])):e[t].data[a].length>=5?this.twoDSeries.push(x.parseNumber(e[t].data[a][4])):this.twoDSeries.push(x.parseNumber(e[t].data[a][1])),n.dataFormatXNumeric=!0),"datetime"===r.xaxis.type){var o=new Date(e[t].data[a][0]);o=new Date(o).getTime(),this.twoDSeriesX.push(o)}else this.twoDSeriesX.push(e[t].data[a][0]);for(var s=0;s<e[t].data.length;s++)void 0!==e[t].data[s][2]&&(this.threeDSeries.push(e[t].data[s][2]),n.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,t){var r=this.w.config,n=this.w.globals,i=new P(this.ctx),a=t;n.collapsedSeriesIndices.indexOf(t)>-1&&(a=this.activeSeriesIndex);for(var o=0;o<e[t].data.length;o++)void 0!==e[t].data[o].y&&(Array.isArray(e[t].data[o].y)?this.twoDSeries.push(x.parseNumber(e[t].data[o].y[e[t].data[o].y.length-1])):this.twoDSeries.push(x.parseNumber(e[t].data[o].y))),void 0!==e[t].data[o].goals&&Array.isArray(e[t].data[o].goals)?(void 0===this.seriesGoals[t]&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[o].goals)):(void 0===this.seriesGoals[t]&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(var s=0;s<e[a].data.length;s++){var l="string"==typeof e[a].data[s].x,c=Array.isArray(e[a].data[s].x),u=!c&&!!i.isValidDate(e[a].data[s].x.toString());if(l||u)if(l||r.xaxis.convertedCatToNumeric){var h=n.isBarHorizontal&&n.isRangeData;"datetime"!==r.xaxis.type||h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[a].data[s].x)):this.twoDSeriesX.push(i.parseDate(e[a].data[s].x))}else"datetime"===r.xaxis.type?this.twoDSeriesX.push(i.parseDate(e[a].data[s].x.toString())):(n.dataFormatXNumeric=!0,n.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[a].data[s].x)));else c?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[a].data[s].x)):(n.isXNumeric=!0,n.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[a].data[s].x))}if(e[t].data[0]&&void 0!==e[t].data[0].z){for(var d=0;d<e[t].data.length;d++)this.threeDSeries.push(e[t].data[d].z);n.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,t){var r=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(n=this.handleRangeDataFormat("xy",e,t)),r.seriesRangeStart.push(n.start),r.seriesRangeEnd.push(n.end),r.seriesRange.push(n.rangeUniques),r.seriesRange.forEach((function(e,t){e&&e.forEach((function(e,t){e.y.forEach((function(t,r){for(var n=0;n<e.y.length;n++)if(r!==n){var i=t.y1,a=t.y2,o=e.y[n].y1;i<=e.y[n].y2&&o<=a&&(e.overlaps.indexOf(t.rangeName)<0&&e.overlaps.push(t.rangeName),e.overlaps.indexOf(e.y[n].rangeName)<0&&e.overlaps.push(e.y[n].rangeName))}}))}))})),n}},{key:"handleCandleStickBoxData",value:function(e,t){var r=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(n=this.handleCandleStickBoxDataFormat("xy",e,t)),r.seriesCandleO[t]=n.o,r.seriesCandleH[t]=n.h,r.seriesCandleM[t]=n.m,r.seriesCandleL[t]=n.l,r.seriesCandleC[t]=n.c,n}},{key:"handleRangeDataFormat",value:function(e,t,r){var n=[],i=[],a=t[r].data.filter((function(e,t,r){return t===r.findIndex((function(t){return t.x===e.x}))})).map((function(e,t){return{x:e.x,overlaps:[],y:[]}}));if("array"===e)for(var o=0;o<t[r].data.length;o++)Array.isArray(t[r].data[o])?(n.push(t[r].data[o][1][0]),i.push(t[r].data[o][1][1])):(n.push(t[r].data[o]),i.push(t[r].data[o]));else if("xy"===e)for(var s=function(e){var o=Array.isArray(t[r].data[e].y),s=x.randomId(),l=t[r].data[e].x,c={y1:o?t[r].data[e].y[0]:t[r].data[e].y,y2:o?t[r].data[e].y[1]:t[r].data[e].y,rangeName:s};t[r].data[e].rangeName=s;var u=a.findIndex((function(e){return e.x===l}));a[u].y.push(c),n.push(c.y1),i.push(c.y2)},l=0;l<t[r].data.length;l++)s(l);return{start:n,end:i,rangeUniques:a}}},{key:"handleCandleStickBoxDataFormat",value:function(e,t,r){var n=this.w,i="boxPlot"===n.config.chart.type||"boxPlot"===n.config.series[r].type,a=[],o=[],s=[],l=[],c=[];if("array"===e)if(i&&6===t[r].data[0].length||!i&&5===t[r].data[0].length)for(var u=0;u<t[r].data.length;u++)a.push(t[r].data[u][1]),o.push(t[r].data[u][2]),i?(s.push(t[r].data[u][3]),l.push(t[r].data[u][4]),c.push(t[r].data[u][5])):(l.push(t[r].data[u][3]),c.push(t[r].data[u][4]));else for(var h=0;h<t[r].data.length;h++)Array.isArray(t[r].data[h][1])&&(a.push(t[r].data[h][1][0]),o.push(t[r].data[h][1][1]),i?(s.push(t[r].data[h][1][2]),l.push(t[r].data[h][1][3]),c.push(t[r].data[h][1][4])):(l.push(t[r].data[h][1][2]),c.push(t[r].data[h][1][3])));else if("xy"===e)for(var d=0;d<t[r].data.length;d++)Array.isArray(t[r].data[d].y)&&(a.push(t[r].data[d].y[0]),o.push(t[r].data[d].y[1]),i?(s.push(t[r].data[d].y[2]),l.push(t[r].data[d].y[3]),c.push(t[r].data[d].y[4])):(l.push(t[r].data[d].y[2]),c.push(t[r].data[d].y[3])));return{o:a,h:o,m:s,l:l,c:c}}},{key:"parseDataAxisCharts",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,n=this.w.config,i=this.w.globals,a=new P(r),o=n.labels.length>0?n.labels.slice():n.xaxis.categories.slice();i.isRangeBar="rangeBar"===n.chart.type&&i.isBarHorizontal,i.hasGroups="category"===n.xaxis.type&&n.xaxis.group.groups.length>0,i.hasGroups&&(i.groups=n.xaxis.group.groups);for(var s=function(){for(var e=0;e<o.length;e++)if("string"==typeof o[e]){if(!a.isValidDate(o[e]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");t.twoDSeriesX.push(a.parseDate(o[e]))}else t.twoDSeriesX.push(o[e])},l=0;l<e.length;l++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===e[l].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==n.chart.type&&"rangeArea"!==n.chart.type&&"rangeBar"!==e[l].type&&"rangeArea"!==e[l].type||(i.isRangeData=!0,i.isComboCharts?"rangeBar"!==e[l].type&&"rangeArea"!==e[l].type||this.handleRangeData(e,l):"rangeBar"!==n.chart.type&&"rangeArea"!==n.chart.type||this.handleRangeData(e,l)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,l):this.isFormatXY()&&this.handleFormatXY(e,l),"candlestick"!==n.chart.type&&"candlestick"!==e[l].type&&"boxPlot"!==n.chart.type&&"boxPlot"!==e[l].type||this.handleCandleStickBoxData(e,l),i.series.push(this.twoDSeries),i.labels.push(this.twoDSeriesX),i.seriesX.push(this.twoDSeriesX),i.seriesGoals=this.seriesGoals,l!==this.activeSeriesIndex||this.fallbackToCategory||(i.isXNumeric=!0);else{"datetime"===n.xaxis.type?(i.isXNumeric=!0,s(),i.seriesX.push(this.twoDSeriesX)):"numeric"===n.xaxis.type&&(i.isXNumeric=!0,o.length>0&&(this.twoDSeriesX=o,i.seriesX.push(this.twoDSeriesX))),i.labels.push(this.twoDSeriesX);var c=e[l].data.map((function(e){return x.parseNumber(e)}));i.series.push(c)}i.seriesZ.push(this.threeDSeries),void 0!==e[l].name?i.seriesNames.push(e[l].name):i.seriesNames.push("series-"+parseInt(l+1,10)),void 0!==e[l].color?i.seriesColors.push(e[l].color):i.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var t=this.w.globals,r=this.w.config;t.series=e.slice(),t.seriesNames=r.labels.slice();for(var n=0;n<t.series.length;n++)void 0===t.seriesNames[n]&&t.seriesNames.push("series-"+(n+1));return this.w}},{key:"handleExternalLabelsData",value:function(e){var t=this.w.config,r=this.w.globals;t.xaxis.categories.length>0?r.labels=t.xaxis.categories:t.labels.length>0?r.labels=t.labels.slice():this.fallbackToCategory?(r.labels=r.labels[0],r.seriesRange.length&&(r.seriesRange.map((function(e){e.forEach((function(e){r.labels.indexOf(e.x)<0&&e.x&&r.labels.push(e.x)}))})),r.labels=r.labels.filter((function(e,t,r){return r.indexOf(e)===t}))),t.xaxis.convertedCatToNumeric&&(new L(t).convertCatToNumericXaxis(t,this.ctx,r.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var t=this.w.globals,r=this.w.config,n=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY())for(var i=r.series.map((function(e,t){return e.data.filter((function(e,t,r){return r.findIndex((function(t){return t.x===e.x}))===t}))})),a=i.reduce((function(e,t,r,n){return n[e].length>t.length?e:r}),0),o=0;o<i[a].length;o++)n.push(o+1);else for(var s=0;s<t.series[t.maxValsInArrayIndex].length;s++)n.push(s+1);t.seriesX=[];for(var l=0;l<e.length;l++)t.seriesX.push(n);t.isXNumeric=!0}if(0===n.length){n=t.axisCharts?[]:t.series.map((function(e,t){return t+1}));for(var c=0;c<e.length;c++)t.seriesX.push(n)}t.labels=n,r.xaxis.convertedCatToNumeric&&(t.categoryLabels=n.map((function(e){return r.xaxis.labels.formatter(e)}))),t.noLabelsProvided=!0}},{key:"parseData",value:function(e){var t=this.w,r=t.config,n=t.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),n.axisCharts?(this.parseDataAxisCharts(e),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(e),"bar"===r.chart.type&&r.chart.stacked){var i=new U(this.ctx);n.series=i.setNullSeriesToZeroValues(n.series)}this.coreUtils.getSeriesTotals(),n.axisCharts&&(n.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals()),this.coreUtils.getPercentSeries(),n.dataFormatXNumeric||n.isXNumeric&&("numeric"!==r.xaxis.type||0!==r.labels.length||0!==r.xaxis.categories.length)||this.handleExternalLabelsData(e);for(var a=this.coreUtils.getCategoryLabels(n.labels),o=0;o<a.length;o++)if(Array.isArray(a[o])){n.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this,t=this.w;t.globals.ignoreYAxisIndexes=t.globals.collapsedSeries.map((function(r,n){if(e.w.globals.isMultipleYAxis&&!t.config.chart.stacked)return r.index}))}}]),e}(),W=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.tooltipKeyFormat="dd MMM"}return c(e,[{key:"xLabelFormat",value:function(e,t,r,n){var i=this.w;if("datetime"===i.config.xaxis.type&&void 0===i.config.xaxis.labels.formatter&&void 0===i.config.tooltip.x.formatter){var a=new P(this.ctx);return a.formatDate(a.getDate(t),i.config.tooltip.x.format)}return e(t,r,n)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map((function(e){return e})):e}},{key:"defaultYFormatter",value:function(e,t,r){var n=this.w;return x.isNumber(e)&&(e=0!==n.globals.yValueDecimal?e.toFixed(void 0!==t.decimalsInFloat?t.decimalsInFloat:n.globals.yValueDecimal):n.globals.maxYArr[r]-n.globals.minYArr[r]<5?e.toFixed(1):e.toFixed(0)),e}},{key:"setLabelFormatters",value:function(){var e=this,t=this.w;return t.globals.xaxisTooltipFormatter=function(t){return e.defaultGeneralFormatter(t)},t.globals.ttKeyFormatter=function(t){return e.defaultGeneralFormatter(t)},t.globals.ttZFormatter=function(e){return e},t.globals.legendFormatter=function(t){return e.defaultGeneralFormatter(t)},void 0!==t.config.xaxis.labels.formatter?t.globals.xLabelFormatter=t.config.xaxis.labels.formatter:t.globals.xLabelFormatter=function(e){if(x.isNumber(e)){if(!t.config.xaxis.convertedCatToNumeric&&"numeric"===t.config.xaxis.type){if(x.isNumber(t.config.xaxis.decimalsInFloat))return e.toFixed(t.config.xaxis.decimalsInFloat);var r=t.globals.maxX-t.globals.minX;return r>0&&r<100?e.toFixed(1):e.toFixed(0)}return t.globals.isBarHorizontal&&t.globals.maxY-t.globals.minYArr<4?e.toFixed(1):e.toFixed(0)}return e},"function"==typeof t.config.tooltip.x.formatter?t.globals.ttKeyFormatter=t.config.tooltip.x.formatter:t.globals.ttKeyFormatter=t.globals.xLabelFormatter,"function"==typeof t.config.xaxis.tooltip.formatter&&(t.globals.xaxisTooltipFormatter=t.config.xaxis.tooltip.formatter),(Array.isArray(t.config.tooltip.y)||void 0!==t.config.tooltip.y.formatter)&&(t.globals.ttVal=t.config.tooltip.y),void 0!==t.config.tooltip.z.formatter&&(t.globals.ttZFormatter=t.config.tooltip.z.formatter),void 0!==t.config.legend.formatter&&(t.globals.legendFormatter=t.config.legend.formatter),t.config.yaxis.forEach((function(r,n){void 0!==r.labels.formatter?t.globals.yLabelFormatters[n]=r.labels.formatter:t.globals.yLabelFormatters[n]=function(i){return t.globals.xyCharts?Array.isArray(i)?i.map((function(t){return e.defaultYFormatter(t,r,n)})):e.defaultYFormatter(i,r,n):i}})),t.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if("heatmap"===e.config.chart.type){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var t=e.globals.seriesNames.reduce((function(e,t){return e.length>t.length?e:t}),0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}]),e}(),G=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"getLabel",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=this.w,l=void 0===e[n]?"":e[n],c=l,u=s.globals.xLabelFormatter,h=s.config.xaxis.labels.formatter,d=!1,f=new W(this.ctx),p=l;o&&(c=f.xLabelFormat(u,l,p,{i:n,dateFormatter:new P(this.ctx).formatDate,w:s}),void 0!==h&&(c=h(l,e[n],{i:n,dateFormatter:new P(this.ctx).formatDate,w:s})));var m=function(e){var r=null;return t.forEach((function(e){"month"===e.unit?r="year":"day"===e.unit?r="month":"hour"===e.unit?r="day":"minute"===e.unit&&(r="hour")})),r===e};t.length>0?(d=m(t[n].unit),r=t[n].position,c=t[n].value):"datetime"===s.config.xaxis.type&&void 0===h&&(c=""),void 0===c&&(c=""),c=Array.isArray(c)?c:c.toString();var v=new w(this.ctx),g={};g=s.globals.rotateXLabels&&o?v.getTextRects(c,parseInt(a,10),null,"rotate(".concat(s.config.xaxis.labels.rotate," 0 0)"),!1):v.getTextRects(c,parseInt(a,10));var y=!s.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(c)&&(0===c.indexOf("NaN")||0===c.toLowerCase().indexOf("invalid")||c.toLowerCase().indexOf("infinity")>=0||i.indexOf(c)>=0&&y)&&(c=""),{x:r,text:c,textRect:g,isBold:d}}},{key:"checkLabelBasedOnTickamount",value:function(e,t,r){var n=this.w,i=n.config.xaxis.tickAmount;return"dataPoints"===i&&(i=Math.round(n.globals.gridWidth/120)),i>r||e%Math.round(r/(i+1))==0||(t.text=""),t}},{key:"checkForOverflowingLabels",value:function(e,t,r,n,i){var a=this.w;if(0===e&&a.globals.skipFirstTimelinelabel&&(t.text=""),e===r-1&&a.globals.skipLastTimelinelabel&&(t.text=""),a.config.xaxis.labels.hideOverlappingLabels&&n.length>0){var o=i[i.length-1];t.x<o.textRect.width/(a.globals.rotateXLabels?Math.abs(a.config.xaxis.labels.rotate)/12:1.01)+o.x&&(t.text="")}return t}},{key:"checkForReversedLabels",value:function(e,t){var r=this.w;return r.config.yaxis[e]&&r.config.yaxis[e].reversed&&t.reverse(),t}},{key:"isYAxisHidden",value:function(e){var t=this.w,r=new k(this.ctx);return!t.config.yaxis[e].show||!t.config.yaxis[e].showForNullSeries&&r.isSeriesNull(e)&&-1===t.globals.collapsedSeriesIndices.indexOf(e)}},{key:"getYAxisForeColor",value:function(e,t){var r=this.w;return Array.isArray(e)&&r.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,r.globals.yAxisScale[t].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,t,r,n,i,a,o){var s=this.w,l=new w(this.ctx),c=s.globals.translateY;if(n.show&&t>0){!0===s.config.yaxis[i].opposite&&(e+=n.width);for(var u=t;u>=0;u--){var h=c+t/10+s.config.yaxis[i].labels.offsetY-1;s.globals.isBarHorizontal&&(h=a*u),"heatmap"===s.config.chart.type&&(h+=a/2);var d=l.drawLine(e+r.offsetX-n.width+n.offsetX,h+n.offsetY,e+r.offsetX+n.offsetX,h+n.offsetY,n.color);o.add(d),c+=a}}}}]),e}(),H=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"scaleSvgNode",value:function(e,t){var r=parseFloat(e.getAttributeNS(null,"width")),n=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",r*t),e.setAttributeNS(null,"height",n*t),e.setAttributeNS(null,"viewBox","0 0 "+r+" "+n)}},{key:"fixSvgStringForIe11",value:function(e){if(!x.isIE11())return e.replace(/&nbsp;/g,"&#160;");var t=0,r=e.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,(function(e){return 2===++t?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':e}));return(r=r.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(e){null==e&&(e=1);var t=this.w.globals.dom.Paper.svg();if(1!==e){var r=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(r,e),t=(new XMLSerializer).serializeToString(r)}return this.fixSvgStringForIe11(t)}},{key:"cleanup",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),r=e.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(n,(function(e){e.setAttribute("width",0)})),t&&t[0]&&(t[0].setAttribute("x",-500),t[0].setAttribute("x1",-500),t[0].setAttribute("x2",-500)),r&&r[0]&&(r[0].setAttribute("y",-100),r[0].setAttribute("y1",-100),r[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var e=this.getSvgString(),t=new Blob([e],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(t)}},{key:"dataURI",value:function(e){var t=this;return new Promise((function(r){var n=t.w,i=e?e.scale||e.width/n.globals.svgWidth:1;t.cleanup();var a=document.createElement("canvas");a.width=n.globals.svgWidth*i,a.height=parseInt(n.globals.dom.elWrap.style.height,10)*i;var o="transparent"===n.config.chart.background?"#fff":n.config.chart.background,s=a.getContext("2d");s.fillStyle=o,s.fillRect(0,0,a.width*i,a.height*i);var l=t.getSvgString(i);if(window.canvg&&x.isIE11()){var c=window.canvg.Canvg.fromString(s,l,{ignoreClear:!0,ignoreDimensions:!0});c.start();var u=a.msToBlob();c.stop(),r({blob:u})}else{var h="data:image/svg+xml,"+encodeURIComponent(l),d=new Image;d.crossOrigin="anonymous",d.onload=function(){if(s.drawImage(d,0,0),a.msToBlob){var e=a.msToBlob();r({blob:e})}else{var t=a.toDataURL("image/png");r({imgURI:t})}},d.src=h}}))}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var e=this;this.dataURI().then((function(t){var r=t.imgURI,n=t.blob;n?navigator.msSaveOrOpenBlob(n,e.w.globals.chartID+".png"):e.triggerDownload(r,e.w.config.chart.toolbar.export.png.filename,".png")}))}},{key:"exportToCSV",value:function(e){var t=this,r=e.series,n=e.fileName,i=e.columnDelimiter,a=void 0===i?",":i,o=e.lineDelimiter,s=void 0===o?"\n":o,l=this.w;r||(r=l.config.series);var c=[],u=[],h="",d=l.globals.series.map((function(e,t){return-1===l.globals.collapsedSeriesIndices.indexOf(t)?e:[]})),f=Math.max.apply(Math,v(r.map((function(e){return e.data?e.data.length:0})))),p=new V(this.ctx),m=new G(this.ctx),g=function(e){var r="";if(l.globals.axisCharts){if("category"===l.config.xaxis.type||l.config.xaxis.convertedCatToNumeric)if(l.globals.isBarHorizontal){var n=l.globals.yLabelFormatters[0],i=new U(t.ctx).getActiveConfigSeriesIndex();r=n(l.globals.labels[e],{seriesIndex:i,dataPointIndex:e,w:l})}else r=m.getLabel(l.globals.labels,l.globals.timescaleLabels,0,e).text;"datetime"===l.config.xaxis.type&&(l.config.xaxis.categories.length?r=l.config.xaxis.categories[e]:l.config.labels.length&&(r=l.config.labels[e]))}else r=l.config.labels[e];return Array.isArray(r)&&(r=r.join(" ")),x.isNumber(r)?r:r.split(a).join("")};c.push(l.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===l.config.chart.type?(c.push("minimum"),c.push("q1"),c.push("median"),c.push("q3"),c.push("maximum")):"candlestick"===l.config.chart.type?(c.push("open"),c.push("high"),c.push("low"),c.push("close")):"rangeBar"===l.config.chart.type?(c.push("minimum"),c.push("maximum")):r.map((function(e,t){var r=e.name?e.name:"series-".concat(t);l.globals.axisCharts&&c.push(r.split(a).join("")?r.split(a).join(""):"series-".concat(t))})),l.globals.axisCharts||(c.push(l.config.chart.toolbar.export.csv.headerValue),u.push(c.join(a))),r.map((function(e,t){l.globals.axisCharts?function(e,t){if(c.length&&0===t&&u.push(c.join(a)),e.data){e.data=e.data.length&&e.data||v(Array(f)).map((function(){return""}));for(var n=0;n<e.data.length;n++){c=[];var i=g(n);if(i||(p.isFormatXY()?i=r[t].data[n].x:p.isFormat2DArray()&&(i=r[t].data[n]?r[t].data[n][0]:"")),0===t){c.push((s=i,"datetime"===l.config.xaxis.type&&String(s).length>=10?l.config.chart.toolbar.export.csv.dateFormatter(i):x.isNumber(i)?i:i.split(a).join("")));for(var o=0;o<l.globals.series.length;o++)p.isFormatXY()?c.push(r[o].data[n].y):c.push(d[o][n])}("candlestick"===l.config.chart.type||e.type&&"candlestick"===e.type)&&(c.pop(),c.push(l.globals.seriesCandleO[t][n]),c.push(l.globals.seriesCandleH[t][n]),c.push(l.globals.seriesCandleL[t][n]),c.push(l.globals.seriesCandleC[t][n])),("boxPlot"===l.config.chart.type||e.type&&"boxPlot"===e.type)&&(c.pop(),c.push(l.globals.seriesCandleO[t][n]),c.push(l.globals.seriesCandleH[t][n]),c.push(l.globals.seriesCandleM[t][n]),c.push(l.globals.seriesCandleL[t][n]),c.push(l.globals.seriesCandleC[t][n])),"rangeBar"===l.config.chart.type&&(c.pop(),c.push(l.globals.seriesRangeStart[t][n]),c.push(l.globals.seriesRangeEnd[t][n])),c.length&&u.push(c.join(a))}}var s}(e,t):((c=[]).push(l.globals.labels[t].split(a).join("")),c.push(d[t]),u.push(c.join(a)))})),h+=u.join(s),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+h),n||l.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,t,r){var n=document.createElement("a");n.href=e,n.download=(t||this.w.globals.chartID)+r,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}]),e}(),X=function(){function e(t,r){s(this,e),this.ctx=t,this.elgrid=r,this.w=t.w;var n=this.w;this.axesUtils=new G(t),this.xaxisLabels=n.globals.labels.slice(),n.globals.timescaleLabels.length>0&&!n.globals.isBarHorizontal&&(this.xaxisLabels=n.globals.timescaleLabels.slice()),n.config.xaxis.overwriteCategories&&(this.xaxisLabels=n.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],"top"===n.config.xaxis.position?this.offY=0:this.offY=n.globals.gridHeight+1,this.offY=this.offY+n.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===n.config.chart.type&&n.config.plotOptions.bar.horizontal,this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.xaxisBorderWidth=n.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=n.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=n.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=n.config.xaxis.axisBorder.height,this.yaxis=n.config.yaxis[0]}return c(e,[{key:"drawXaxis",value:function(){var e=this.w,t=new w(this.ctx),r=t.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),n=t.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});r.add(n);for(var i=[],a=0;a<this.xaxisLabels.length;a++)i.push(this.xaxisLabels[a]);if(this.drawXAxisLabelAndGroup(!0,t,n,i,e.globals.isXNumeric,(function(e,t){return t})),e.globals.hasGroups){var o=e.globals.groups;i=[];for(var s=0;s<o.length;s++)i.push(o[s].title);var l={};e.config.xaxis.group.style&&(l.xaxisFontSize=e.config.xaxis.group.style.fontSize,l.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,l.xaxisForeColors=e.config.xaxis.group.style.colors,l.fontWeight=e.config.xaxis.group.style.fontWeight,l.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,n,i,!1,(function(e,t){return o[e].cols*t}),l)}if(void 0!==e.config.xaxis.title.text){var c=t.group({class:"apexcharts-xaxis-title"}),u=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===e.config.xaxis.title.position?e.globals.xAxisLabelsHeight:-e.globals.xAxisLabelsHeight-10)+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});c.add(u),r.add(c)}if(e.config.xaxis.axisBorder.show){var h=e.globals.barPadForNumericAxis,d=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-h,this.offY,this.xaxisBorderWidth+h,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders?this.elgrid.elGridBorders.add(d):r.add(d)}return r}},{key:"drawXAxisLabelAndGroup",value:function(e,t,r,n,i,a){var o,s=this,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=[],u=[],h=this.w,d=l.xaxisFontSize||this.xaxisFontSize,f=l.xaxisFontFamily||this.xaxisFontFamily,p=l.xaxisForeColors||this.xaxisForeColors,m=l.fontWeight||h.config.xaxis.labels.style.fontWeight,v=l.cssClass||h.config.xaxis.labels.style.cssClass,g=h.globals.padHorizontal,y=n.length,x="category"===h.config.xaxis.type?h.globals.dataPoints:y;if(0===x&&y>x&&(x=y),i){var b=x>1?x-1:x;o=h.globals.gridWidth/b,g=g+a(0,o)/2+h.config.xaxis.labels.offsetX}else o=h.globals.gridWidth/x,g=g+a(0,o)+h.config.xaxis.labels.offsetX;for(var _=function(i){var l=g-a(i,o)/2+h.config.xaxis.labels.offsetX;0===i&&1===y&&o/2===g&&1===x&&(l=h.globals.gridWidth/2);var b=s.axesUtils.getLabel(n,h.globals.timescaleLabels,l,i,c,d,e),_=28;if(h.globals.rotateXLabels&&e&&(_=22),h.config.xaxis.title.text&&"top"===h.config.xaxis.position&&(_+=parseFloat(h.config.xaxis.title.style.fontSize)+2),e||(_=_+parseFloat(d)+(h.globals.xAxisLabelsHeight-h.globals.xAxisGroupLabelsHeight)+(h.globals.rotateXLabels?10:0)),b=void 0!==h.config.xaxis.tickAmount&&"dataPoints"!==h.config.xaxis.tickAmount&&"datetime"!==h.config.xaxis.type?s.axesUtils.checkLabelBasedOnTickamount(i,b,y):s.axesUtils.checkForOverflowingLabels(i,b,y,c,u),e&&b.text&&h.globals.xaxisLabelsCount++,h.config.xaxis.labels.show){var w=t.drawText({x:b.x,y:s.offY+h.config.xaxis.labels.offsetY+_-("top"===h.config.xaxis.position?h.globals.xAxisHeight+h.config.xaxis.axisTicks.height-2:0),text:b.text,textAnchor:"middle",fontWeight:b.isBold?600:m,fontSize:d,fontFamily:f,foreColor:Array.isArray(p)?e&&h.config.xaxis.convertedCatToNumeric?p[h.globals.minX+i-1]:p[i]:p,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+v});if(r.add(w),w.on("click",(function(e){if("function"==typeof h.config.chart.events.xAxisLabelClick){var t=Object.assign({},h,{labelIndex:i});h.config.chart.events.xAxisLabelClick(e,s.ctx,t)}})),e){var k=document.createElementNS(h.globals.SVGNS,"title");k.textContent=Array.isArray(b.text)?b.text.join(" "):b.text,w.node.appendChild(k),""!==b.text&&(c.push(b.text),u.push(b))}}i<y-1&&(g+=a(i+1,o))},w=0;w<=y-1;w++)_(w)}},{key:"drawXaxisInversed",value:function(e){var t,r,n=this,i=this.w,a=new w(this.ctx),o=i.config.yaxis[0].opposite?i.globals.translateYAxisX[e]:0,s=a.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),l=a.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+o+", 0)"});s.add(l);var c=[];if(i.config.yaxis[e].show)for(var u=0;u<this.xaxisLabels.length;u++)c.push(this.xaxisLabels[u]);t=i.globals.gridHeight/c.length,r=-t/2.2;var h=i.globals.yLabelFormatters[0],d=i.config.yaxis[0].labels;if(d.show)for(var f=function(o){var s=void 0===c[o]?"":c[o];s=h(s,{seriesIndex:e,dataPointIndex:o,w:i});var u=n.axesUtils.getYAxisForeColor(d.style.colors,e),f=0;Array.isArray(s)&&(f=s.length/2*parseInt(d.style.fontSize,10));var p=a.drawText({x:d.offsetX-15,y:r+t+d.offsetY-f,text:s,textAnchor:n.yaxis.opposite?"start":"end",foreColor:Array.isArray(u)?u[o]:u,fontSize:d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+d.style.cssClass,maxWidth:d.maxWidth});l.add(p),p.on("click",(function(e){if("function"==typeof i.config.chart.events.xAxisLabelClick){var t=Object.assign({},i,{labelIndex:o});i.config.chart.events.xAxisLabelClick(e,n.ctx,t)}}));var m=document.createElementNS(i.globals.SVGNS,"title");if(m.textContent=Array.isArray(s)?s.join(" "):s,p.node.appendChild(m),0!==i.config.yaxis[e].labels.rotate){var v=a.rotateAroundCenter(p.node);p.node.setAttribute("transform","rotate(".concat(i.config.yaxis[e].labels.rotate," 0 ").concat(v.y,")"))}r+=t},p=0;p<=c.length-1;p++)f(p);if(void 0!==i.config.yaxis[0].title.text){var m=a.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+o+", 0)"}),v=a.drawText({x:i.config.yaxis[0].title.offsetX,y:i.globals.gridHeight/2+i.config.yaxis[0].title.offsetY,text:i.config.yaxis[0].title.text,textAnchor:"middle",foreColor:i.config.yaxis[0].title.style.color,fontSize:i.config.yaxis[0].title.style.fontSize,fontWeight:i.config.yaxis[0].title.style.fontWeight,fontFamily:i.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+i.config.yaxis[0].title.style.cssClass});m.add(v),s.add(m)}var g=0;this.isCategoryBarHorizontal&&i.config.yaxis[0].opposite&&(g=i.globals.gridWidth);var y=i.config.xaxis.axisBorder;if(y.show){var x=a.drawLine(i.globals.padHorizontal+y.offsetX+g,1+y.offsetY,i.globals.padHorizontal+y.offsetX+g,i.globals.gridHeight+y.offsetY,y.color,0);this.elgrid&&this.elgrid.elGridBorders?this.elgrid.elGridBorders.add(x):s.add(x)}return i.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(g,c.length,i.config.yaxis[0].axisBorder,i.config.yaxis[0].axisTicks,0,t,s),s}},{key:"drawXaxisTicks",value:function(e,t,r){var n=this.w,i=e;if(!(e<0||e-2>n.globals.gridWidth)){var a=this.offY+n.config.xaxis.axisTicks.offsetY;if(t=t+a+n.config.xaxis.axisTicks.height,"top"===n.config.xaxis.position&&(t=a-n.config.xaxis.axisTicks.height),n.config.xaxis.axisTicks.show){var o=new w(this.ctx).drawLine(e+n.config.xaxis.axisTicks.offsetX,a+n.config.xaxis.offsetY,i+n.config.xaxis.axisTicks.offsetX,t+n.config.xaxis.offsetY,n.config.xaxis.axisTicks.color);r.add(o),o.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,t=[],r=this.xaxisLabels.length,n=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var i=0;i<r;i++)n=this.xaxisLabels[i].position,t.push(n);else for(var a=r,o=0;o<a;o++){var s=a;e.globals.isXNumeric&&"bar"!==e.config.chart.type&&(s-=1),n+=e.globals.gridWidth/s,t.push(n)}return t}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,t=new w(this.ctx),r=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var o=0;o<n.length;o++){var s=t.rotateAroundCenter(n[o]);s.y=s.y-1,s.x=s.x+1,n[o].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(s.x," ").concat(s.y,")")),n[o].setAttribute("text-anchor","end"),r.setAttribute("transform","translate(0, ".concat(-10,")"));var l=n[o].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(l,(function(r){t.placeTextWithEllipsis(r,r.textContent,e.globals.xAxisLabelsHeight-("bottom"===e.config.legend.position?20:10))}))}else!function(){for(var r=e.globals.gridWidth/(e.globals.labels.length+1),i=0;i<n.length;i++){var a=n[i].childNodes;e.config.xaxis.labels.trim&&"datetime"!==e.config.xaxis.type&&Array.prototype.forEach.call(a,(function(e){t.placeTextWithEllipsis(e,e.textContent,r)}))}}();if(i.length>0){var c=i[i.length-1].getBBox(),u=i[0].getBBox();c.x<-20&&i[i.length-1].parentNode.removeChild(i[i.length-1]),u.x+u.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&i[0].parentNode.removeChild(i[0]);for(var h=0;h<a.length;h++)t.placeTextWithEllipsis(a[h],a[h].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),e}(),Y=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var r=this.w;this.xaxisLabels=r.globals.labels.slice(),this.axesUtils=new G(t),this.isRangeBar=r.globals.seriesRange.length,r.globals.timescaleLabels.length>0&&(this.xaxisLabels=r.globals.timescaleLabels.slice())}return c(e,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.w,r=new w(this.ctx);null===e&&(e=r.group({class:"apexcharts-grid"}));var n=r.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),i=r.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(i),e.add(n),e}},{key:"drawGrid",value:function(){var e=null;return this.w.globals.axisCharts&&(e=this.renderGrid(),this.drawGridArea(e.el)),e}},{key:"createGridMask",value:function(){var e=this.w,t=e.globals,r=new w(this.ctx),n=Array.isArray(e.config.stroke.width)?0:e.config.stroke.width;if(Array.isArray(e.config.stroke.width)){var i=0;e.config.stroke.width.forEach((function(e){i=Math.max(i,e)})),n=i}t.dom.elGridRectMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(t.cuid)),t.dom.elGridRectMarkerMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(t.cuid)),t.dom.elForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elForecastMask.setAttribute("id","forecastMask".concat(t.cuid)),t.dom.elNonForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(t.cuid));var a=e.config.chart.type,o=0,s=0;("bar"===a||"rangeBar"===a||"candlestick"===a||"boxPlot"===a||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(o=e.config.grid.padding.left,s=e.config.grid.padding.right,t.barPadForNumericAxis>o&&(o=t.barPadForNumericAxis,s=t.barPadForNumericAxis)),t.dom.elGridRect=r.drawRect(-n/2-o-2,-n/2,t.gridWidth+n+s+o+4,t.gridHeight+n,0,"#fff");var l=e.globals.markers.largestSize+1;t.dom.elGridRectMarker=r.drawRect(2*-l,2*-l,t.gridWidth+4*l,t.gridHeight+4*l,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);var c=t.dom.baseEl.querySelector("defs");c.appendChild(t.dom.elGridRectMask),c.appendChild(t.dom.elForecastMask),c.appendChild(t.dom.elNonForecastMask),c.appendChild(t.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(e){var t=e.i,r=e.x1,n=e.y1,i=e.x2,a=e.y2,o=e.xCount,s=e.parent,l=this.w;if(!(0===t&&l.globals.skipFirstTimelinelabel||t===o-1&&l.globals.skipLastTimelinelabel&&!l.config.xaxis.labels.formatter||"radar"===l.config.chart.type)){l.config.grid.xaxis.lines.show&&this._drawGridLine({i:t,x1:r,y1:n,x2:i,y2:a,xCount:o,parent:s});var c=0;if(l.globals.hasGroups&&"between"===l.config.xaxis.tickPlacement){var u=l.globals.groups;if(u){for(var h=0,d=0;h<t&&d<u.length;d++)h+=u[d].cols;h===t&&(c=.6*l.globals.xAxisLabelsHeight)}}new X(this.ctx).drawXaxisTicks(r,c,l.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(e){var t=e.i,r=e.x1,n=e.y1,i=e.x2,a=e.y2,o=e.xCount,s=e.parent,l=this.w,c=!1,u=s.node.classList.contains("apexcharts-gridlines-horizontal"),h=l.config.grid.strokeDashArray,d=l.globals.barPadForNumericAxis;(0===n&&0===a||0===r&&0===i)&&(c=!0),n===l.globals.gridHeight&&a===l.globals.gridHeight&&(c=!0),!l.globals.isBarHorizontal||0!==t&&t!==o-1||(c=!0);var f=new w(this).drawLine(r-(u?d:0),n,i+(u?d:0),a,l.config.grid.borderColor,h);f.node.classList.add("apexcharts-gridline"),c?this.elGridBorders.add(f):s.add(f)}},{key:"_drawGridBandRect",value:function(e){var t=e.c,r=e.x1,n=e.y1,i=e.x2,a=e.y2,o=e.type,s=this.w,l=new w(this.ctx),c=s.globals.barPadForNumericAxis;if("column"!==o||"datetime"!==s.config.xaxis.type){var u=s.config.grid[o].colors[t],h=l.drawRect(r-("row"===o?c:0),n,i+("row"===o?2*c:0),a,0,u,s.config.grid[o].opacity);this.elg.add(h),h.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),h.node.classList.add("apexcharts-grid-".concat(o))}}},{key:"_drawXYLines",value:function(e){var t=this,r=e.xCount,n=e.tickAmount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show){var a,o=i.globals.padHorizontal,s=i.globals.gridHeight;i.globals.timescaleLabels.length?function(e){for(var n=e.xC,i=e.x1,a=e.y1,o=e.x2,s=e.y2,l=0;l<n;l++)i=t.xaxisLabels[l].position,o=t.xaxisLabels[l].position,t._drawGridLines({i:l,x1:i,y1:a,x2:o,y2:s,xCount:r,parent:t.elgridLinesV})}({xC:r,x1:o,y1:0,x2:a,y2:s}):(i.globals.isXNumeric&&(r=i.globals.xAxisScale.result.length),i.config.xaxis.convertedCatToNumeric&&(r=i.globals.xaxisLabelsCount),function(e){var n=e.xC,a=e.x1,o=e.y1,s=e.x2,l=e.y2;if(void 0!==i.config.xaxis.tickAmount&&"dataPoints"!==i.config.xaxis.tickAmount&&"on"===i.config.xaxis.tickPlacement)i.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach((function(e,n){var i=e.getBBox();t._drawGridLines({i:n,x1:i.x+i.width/2,y1:o,x2:i.x+i.width/2,y2:l,xCount:r,parent:t.elgridLinesV})}));else for(var c=0;c<n+(i.globals.isXNumeric?0:1);c++)0===c&&1===n&&1===i.globals.dataPoints&&(s=a=i.globals.gridWidth/2),t._drawGridLines({i:c,x1:a,y1:o,x2:s,y2:l,xCount:r,parent:t.elgridLinesV}),s=a+=i.globals.gridWidth/(i.globals.isXNumeric?n-1:n)}({xC:r,x1:o,y1:0,x2:a,y2:s}))}if(i.config.grid.yaxis.lines.show){var l=0,c=0,u=i.globals.gridWidth,h=n+1;this.isRangeBar&&(h=i.globals.labels.length);for(var d=0;d<h+(this.isRangeBar?1:0);d++)this._drawGridLine({i:d,xCount:h+(this.isRangeBar?1:0),x1:0,y1:l,x2:u,y2:c,parent:this.elgridLinesH}),c=l+=i.globals.gridHeight/(this.isRangeBar?h:n)}}},{key:"_drawInvertedXYLines",value:function(e){var t=e.xCount,r=this.w;if(r.config.grid.xaxis.lines.show||r.config.xaxis.axisTicks.show)for(var n,i=r.globals.padHorizontal,a=r.globals.gridHeight,o=0;o<t+1;o++)r.config.grid.xaxis.lines.show&&this._drawGridLine({i:o,xCount:t+1,x1:i,y1:0,x2:n,y2:a,parent:this.elgridLinesV}),new X(this.ctx).drawXaxisTicks(i,0,r.globals.dom.elGraphical),n=i=i+r.globals.gridWidth/t+.3;if(r.config.grid.yaxis.lines.show)for(var s=0,l=0,c=r.globals.gridWidth,u=0;u<r.globals.dataPoints+1;u++)this._drawGridLine({i:u,xCount:r.globals.dataPoints+1,x1:0,y1:s,x2:c,y2:l,parent:this.elgridLinesH}),l=s+=r.globals.gridHeight/r.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,t=new w(this.ctx);this.elg=t.group({class:"apexcharts-grid"}),this.elgridLinesH=t.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=t.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=t.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var r,n=e.globals.yAxisScale.length?e.globals.yAxisScale[0].result.length-1:5,i=0;i<e.globals.series.length&&(void 0!==e.globals.yAxisScale[i]&&(n=e.globals.yAxisScale[i].result.length-1),!(n>2));i++);return!e.globals.isBarHorizontal||this.isRangeBar?(r=this.xaxisLabels.length,this.isRangeBar&&(n=e.globals.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(r=e.config.xaxis.tickAmount)),this._drawXYLines({xCount:r,tickAmount:n})):(r=n,n=e.globals.xTickAmount,this._drawInvertedXYLines({xCount:r,tickAmount:n})),this.drawGridBands(r,n),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:e.globals.gridWidth/r}}},{key:"drawGridBands",value:function(e,t){var r=this.w;if(void 0!==r.config.grid.row.colors&&r.config.grid.row.colors.length>0)for(var n=0,i=r.globals.gridHeight/t,a=r.globals.gridWidth,o=0,s=0;o<t;o++,s++)s>=r.config.grid.row.colors.length&&(s=0),this._drawGridBandRect({c:s,x1:0,y1:n,x2:a,y2:i,type:"row"}),n+=r.globals.gridHeight/t;if(void 0!==r.config.grid.column.colors&&r.config.grid.column.colors.length>0)for(var l=r.globals.isBarHorizontal||"category"!==r.config.xaxis.type&&!r.config.xaxis.convertedCatToNumeric?e:e-1,c=r.globals.padHorizontal,u=r.globals.padHorizontal+r.globals.gridWidth/l,h=r.globals.gridHeight,d=0,f=0;d<e;d++,f++)f>=r.config.grid.column.colors.length&&(f=0),this._drawGridBandRect({c:f,x1:c,y1:0,x2:u,y2:h,type:"column"}),c+=r.globals.gridWidth/l}}]),e}(),q=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"niceScale",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,a=this.w,o=Math.abs(t-e);if("dataPoints"===(r=this._adjustTicksForSmallRange(r,n,o))&&(r=a.globals.dataPoints-1),e===Number.MIN_VALUE&&0===t||!x.isNumber(e)&&!x.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE){e=0,t=r;var s=this.linearScale(e,t,r);return s}e>t?(console.warn("axis.min cannot be greater than axis.max"),t=e+.1):e===t&&(e=0===e?0:e-.5,t=0===t?2:t+.5);var l=[];o<1&&i&&("candlestick"===a.config.chart.type||"candlestick"===a.config.series[n].type||"boxPlot"===a.config.chart.type||"boxPlot"===a.config.series[n].type||a.globals.isRangeData)&&(t*=1.01);var c=r+1;c<2?c=2:c>2&&(c-=2);var u=o/c,h=Math.floor(x.log10(u)),d=Math.pow(10,h),f=Math.round(u/d);f<1&&(f=1);var p=f*d,m=p*Math.floor(e/p),v=p*Math.ceil(t/p),g=m;if(i&&o>2){for(;l.push(g),!((g+=p)>v););return{result:l,niceMin:l[0],niceMax:l[l.length-1]}}var y=e;(l=[]).push(y);for(var b=Math.abs(t-e)/r,_=0;_<=r;_++)y+=b,l.push(y);return l[l.length-2]>=t&&l.pop(),{result:l,niceMin:l[0],niceMax:l[l.length-1]}}},{key:"linearScale",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3?arguments[3]:void 0,i=Math.abs(t-e);"dataPoints"===(r=this._adjustTicksForSmallRange(r,n,i))&&(r=this.w.globals.dataPoints-1);var a=i/r;r===Number.MAX_VALUE&&(r=10,a=1);for(var o=[],s=e;r>=0;)o.push(s),s+=a,r-=1;return{result:o,niceMin:o[0],niceMax:o[o.length-1]}}},{key:"logarithmicScaleNice",value:function(e,t,r){t<=0&&(t=Math.max(e,r)),e<=0&&(e=Math.min(t,r));for(var n=[],i=Math.ceil(Math.log(t)/Math.log(r)+1),a=Math.floor(Math.log(e)/Math.log(r));a<i;a++)n.push(Math.pow(r,a));return{result:n,niceMin:n[0],niceMax:n[n.length-1]}}},{key:"logarithmicScale",value:function(e,t,r){t<=0&&(t=Math.max(e,r)),e<=0&&(e=Math.min(t,r));for(var n=[],i=Math.log(t)/Math.log(r),a=Math.log(e)/Math.log(r),o=i-a,s=Math.round(o),l=o/s,c=0,u=a;c<s;c++,u+=l)n.push(Math.pow(r,u));return n.push(Math.pow(r,i)),{result:n,niceMin:e,niceMax:t}}},{key:"_adjustTicksForSmallRange",value:function(e,t,r){var n=e;if(void 0!==t&&this.w.config.yaxis[t].labels.formatter&&void 0===this.w.config.yaxis[t].tickAmount){var i=this.w.config.yaxis[t].labels.formatter(1);x.isNumber(Number(i))&&!x.isFloat(i)&&(n=Math.ceil(r))}return n<e?n:e}},{key:"setYScaleForIndex",value:function(e,t,r){var n=this.w.globals,i=this.w.config,a=n.isBarHorizontal?i.xaxis:i.yaxis[e];void 0===n.yAxisScale[e]&&(n.yAxisScale[e]=[]);var o=Math.abs(r-t);if(a.logarithmic&&o<=5&&(n.invalidLogScale=!0),a.logarithmic&&o>5)n.allSeriesCollapsed=!1,n.yAxisScale[e]=this.logarithmicScale(t,r,a.logBase),n.yAxisScale[e]=a.forceNiceScale?this.logarithmicScaleNice(t,r,a.logBase):this.logarithmicScale(t,r,a.logBase);else if(r!==-Number.MAX_VALUE&&x.isNumber(r))if(n.allSeriesCollapsed=!1,void 0===a.min&&void 0===a.max||a.forceNiceScale){var s=void 0===i.yaxis[e].max&&void 0===i.yaxis[e].min||i.yaxis[e].forceNiceScale;n.yAxisScale[e]=this.niceScale(t,r,a.tickAmount?a.tickAmount:o<5&&o>1?o+1:5,e,s)}else n.yAxisScale[e]=this.linearScale(t,r,a.tickAmount,e);else n.yAxisScale[e]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(e,t){var r=this.w,n=r.globals,i=r.config.xaxis,a=Math.abs(t-e);return t!==-Number.MAX_VALUE&&x.isNumber(t)?n.xAxisScale=this.linearScale(e,t,i.tickAmount?i.tickAmount:a<5&&a>1?a+1:5,0):n.xAxisScale=this.linearScale(0,5,5),n.xAxisScale}},{key:"setMultipleYScales",value:function(){var e=this,t=this.w.globals,r=this.w.config,n=t.minYArr.concat([]),i=t.maxYArr.concat([]),a=[];r.yaxis.forEach((function(t,o){var s=o;r.series.forEach((function(e,r){e.name===t.seriesName&&(s=r,o!==r?a.push({index:r,similarIndex:o,alreadyExists:!0}):a.push({index:r}))}));var l=n[s],c=i[s];e.setYScaleForIndex(o,l,c)})),this.sameScaleInMultipleAxes(n,i,a)}},{key:"sameScaleInMultipleAxes",value:function(e,t,r){var n=this,i=this.w.config,a=this.w.globals,o=[];r.forEach((function(e){e.alreadyExists&&(void 0===o[e.index]&&(o[e.index]=[]),o[e.index].push(e.index),o[e.index].push(e.similarIndex))})),a.yAxisSameScaleIndices=o,o.forEach((function(e,t){o.forEach((function(r,n){var i,a;t!==n&&(i=e,a=r,i.filter((function(e){return-1!==a.indexOf(e)}))).length>0&&(o[t]=o[t].concat(o[n]))}))}));var s=o.map((function(e){return e.filter((function(t,r){return e.indexOf(t)===r}))})).map((function(e){return e.sort()}));o=o.filter((function(e){return!!e}));var l=s.slice(),c=l.map((function(e){return JSON.stringify(e)}));l=l.filter((function(e,t){return c.indexOf(JSON.stringify(e))===t}));var u=[],h=[];e.forEach((function(e,r){l.forEach((function(n,i){n.indexOf(r)>-1&&(void 0===u[i]&&(u[i]=[],h[i]=[]),u[i].push({key:r,value:e}),h[i].push({key:r,value:t[r]}))}))}));var d=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),f=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);u.forEach((function(e,t){e.forEach((function(e,r){d[t]=Math.min(e.value,d[t])}))})),h.forEach((function(e,t){e.forEach((function(e,r){f[t]=Math.max(e.value,f[t])}))})),e.forEach((function(e,t){h.forEach((function(e,r){var o=d[r],s=f[r];i.chart.stacked&&(s=0,e.forEach((function(e,t){e.value!==-Number.MAX_VALUE&&(s+=e.value),o!==Number.MIN_VALUE&&(o+=u[r][t].value)}))),e.forEach((function(r,l){e[l].key===t&&(void 0!==i.yaxis[t].min&&(o="function"==typeof i.yaxis[t].min?i.yaxis[t].min(a.minY):i.yaxis[t].min),void 0!==i.yaxis[t].max&&(s="function"==typeof i.yaxis[t].max?i.yaxis[t].max(a.maxY):i.yaxis[t].max),n.setYScaleForIndex(t,o,s))}))}))}))}},{key:"autoScaleY",value:function(e,t,r){e||(e=this);var n=e.w;if(n.globals.isMultipleYAxis||n.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),t;var i=n.globals.seriesX[0],a=n.config.chart.stacked;return t.forEach((function(e,o){for(var s=0,l=0;l<i.length;l++)if(i[l]>=r.xaxis.min){s=l;break}var c,u,h=n.globals.minYArr[o],d=n.globals.maxYArr[o],f=n.globals.stackedSeriesTotals;n.globals.series.forEach((function(o,l){var p=o[s];a?(p=f[s],c=u=p,f.forEach((function(e,t){i[t]<=r.xaxis.max&&i[t]>=r.xaxis.min&&(e>u&&null!==e&&(u=e),o[t]<c&&null!==o[t]&&(c=o[t]))}))):(c=u=p,o.forEach((function(e,t){if(i[t]<=r.xaxis.max&&i[t]>=r.xaxis.min){var a=e,o=e;n.globals.series.forEach((function(r,n){null!==e&&(a=Math.min(r[t],a),o=Math.max(r[t],o))})),o>u&&null!==o&&(u=o),a<c&&null!==a&&(c=a)}}))),void 0===c&&void 0===u&&(c=h,u=d),u*=u<0?.9:1.1,0===(c*=c<0?1.1:.9)&&0===u&&(c=-1,u=1),u<0&&u<d&&(u=d),c<0&&c>h&&(c=h),t.length>1?(t[l].min=void 0===e.min?c:e.min,t[l].max=void 0===e.max?u:e.max):(t[0].min=void 0===e.min?c:e.min,t[0].max=void 0===e.max?u:e.max)}))})),t}}]),e}(),$=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.scales=new q(t)}return c(e,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=this.w.config,a=this.w.globals,o=-Number.MAX_VALUE,s=Number.MIN_VALUE;null===n&&(n=e+1);var l=a.series,c=l,u=l;"candlestick"===i.chart.type?(c=a.seriesCandleL,u=a.seriesCandleH):"boxPlot"===i.chart.type?(c=a.seriesCandleO,u=a.seriesCandleC):a.isRangeData&&(c=a.seriesRangeStart,u=a.seriesRangeEnd);for(var h=e;h<n;h++){a.dataPoints=Math.max(a.dataPoints,l[h].length),a.categoryLabels.length&&(a.dataPoints=a.categoryLabels.filter((function(e){return void 0!==e})).length);for(var d=0;d<a.series[h].length;d++){var f=l[h][d];null!==f&&x.isNumber(f)?(void 0!==u[h][d]&&(o=Math.max(o,u[h][d]),t=Math.min(t,u[h][d])),void 0!==c[h][d]&&(t=Math.min(t,c[h][d]),r=Math.max(r,c[h][d])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type&&"rangeArea"===this.w.config.chart.type&&"rangeBar"===this.w.config.chart.type||("candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||void 0!==a.seriesCandleC[h][d]&&(o=Math.max(o,a.seriesCandleO[h][d]),o=Math.max(o,a.seriesCandleH[h][d]),o=Math.max(o,a.seriesCandleL[h][d]),o=Math.max(o,a.seriesCandleC[h][d]),"boxPlot"===this.w.config.chart.type&&(o=Math.max(o,a.seriesCandleM[h][d]))),!i.series[h].type||"candlestick"===i.series[h].type&&"boxPlot"===i.series[h].type&&"rangeArea"===i.series[h].type&&"rangeBar"===i.series[h].type||(o=Math.max(o,a.series[h][d]),t=Math.min(t,a.series[h][d])),r=o),a.seriesGoals[h]&&a.seriesGoals[h][d]&&Array.isArray(a.seriesGoals[h][d])&&a.seriesGoals[h][d].forEach((function(e){s!==Number.MIN_VALUE&&(s=Math.min(s,e.value),t=s),o=Math.max(o,e.value),r=o})),x.isFloat(f)&&(f=x.noExponents(f),a.yValueDecimal=Math.max(a.yValueDecimal,f.toString().split(".")[1].length)),s>c[h][d]&&c[h][d]<0&&(s=c[h][d])):a.hasNullValues=!0}}return"rangeBar"===i.chart.type&&a.seriesRangeStart.length&&a.isBarHorizontal&&(s=t),"bar"===i.chart.type&&(s<0&&o<0&&(o=0),s===Number.MIN_VALUE&&(s=0)),{minY:s,maxY:o,lowestY:t,highestY:r}}},{key:"setYRange",value:function(){var e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var r=Number.MAX_VALUE;if(e.isMultipleYAxis)for(var n=0;n<e.series.length;n++){var i=this.getMinYMaxY(n,r,null,n+1);e.minYArr.push(i.minY),e.maxYArr.push(i.maxY),r=i.lowestY}var a=this.getMinYMaxY(0,r,null,e.series.length);if(e.minY=a.minY,e.maxY=a.maxY,r=a.lowestY,t.chart.stacked&&this._setStackedMinMax(),("line"===t.chart.type||"area"===t.chart.type||"candlestick"===t.chart.type||"boxPlot"===t.chart.type||"rangeBar"===t.chart.type&&!e.isBarHorizontal)&&e.minY===Number.MIN_VALUE&&r!==-Number.MAX_VALUE&&r!==e.maxY){var o=e.maxY-r;(r>=0&&r<=10||void 0!==t.yaxis[0].min||void 0!==t.yaxis[0].max)&&(o=0),e.minY=r-5*o/100,r>0&&e.minY<0&&(e.minY=0),e.maxY=e.maxY+5*o/100}return t.yaxis.forEach((function(t,r){void 0!==t.max&&("number"==typeof t.max?e.maxYArr[r]=t.max:"function"==typeof t.max&&(e.maxYArr[r]=t.max(e.isMultipleYAxis?e.maxYArr[r]:e.maxY)),e.maxY=e.maxYArr[r]),void 0!==t.min&&("number"==typeof t.min?e.minYArr[r]=t.min:"function"==typeof t.min&&(e.minYArr[r]=t.min(e.isMultipleYAxis?e.minYArr[r]===Number.MIN_VALUE?0:e.minYArr[r]:e.minY)),e.minY=e.minYArr[r])})),e.isBarHorizontal&&["min","max"].forEach((function(r){void 0!==t.xaxis[r]&&"number"==typeof t.xaxis[r]&&("min"===r?e.minY=t.xaxis[r]:e.maxY=t.xaxis[r])})),e.isMultipleYAxis?(this.scales.setMultipleYScales(),e.minY=r,e.yAxisScale.forEach((function(t,r){e.minYArr[r]=t.niceMin,e.maxYArr[r]=t.niceMax}))):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.yAxisScale[0].niceMin,e.maxYArr[0]=e.yAxisScale[0].niceMax),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,t=this.w.config,r="numeric"===t.xaxis.type||"datetime"===t.xaxis.type||"category"===t.xaxis.type&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&function(){for(var t=0;t<e.series.length;t++)if(e.labels[t])for(var r=0;r<e.labels[t].length;r++)null!==e.labels[t][r]&&x.isNumber(e.labels[t][r])&&(e.maxX=Math.max(e.maxX,e.labels[t][r]),e.initialMaxX=Math.max(e.maxX,e.labels[t][r]),e.minX=Math.min(e.minX,e.labels[t][r]),e.initialMinX=Math.min(e.minX,e.labels[t][r]))}(),e.noLabelsProvided&&0===t.xaxis.categories.length&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var n;if(void 0===t.xaxis.tickAmount?(n=Math.round(e.svgWidth/150),"numeric"===t.xaxis.type&&e.dataPoints<30&&(n=e.dataPoints-1),n>e.dataPoints&&0!==e.dataPoints&&(n=e.dataPoints-1)):"dataPoints"===t.xaxis.tickAmount?(e.series.length>1&&(n=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric&&(n=e.maxX-e.minX-1)):n=t.xaxis.tickAmount,e.xTickAmount=n,void 0!==t.xaxis.max&&"number"==typeof t.xaxis.max&&(e.maxX=t.xaxis.max),void 0!==t.xaxis.min&&"number"==typeof t.xaxis.min&&(e.minX=t.xaxis.min),void 0!==t.xaxis.range&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var i=[],a=e.minX-1;a<e.maxX;a++)i.push(a+1);e.xAxisScale={result:i,niceMin:i[0],niceMax:i[i.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(1,n,n),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,n-1),e.seriesX=e.labels.slice());r&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ)for(var t=0;t<e.series.length;t++)if(void 0!==e.seriesZ[t])for(var r=0;r<e.seriesZ[t].length;r++)null!==e.seriesZ[t][r]&&x.isNumber(e.seriesZ[t][r])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][r]),e.minZ=Math.min(e.minZ,e.seriesZ[t][r]))}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){var r=new P(this.ctx);if("datetime"===t.xaxis.type){var n=r.getDate(e.minX);t.xaxis.labels.datetimeUTC?n.setUTCDate(n.getUTCDate()-2):n.setDate(n.getDate()-2),e.minX=new Date(n).getTime();var i=r.getDate(e.maxX);t.xaxis.labels.datetimeUTC?i.setUTCDate(i.getUTCDate()+2):i.setDate(i.getDate()+2),e.maxX=new Date(i).getTime()}else("numeric"===t.xaxis.type||"category"===t.xaxis.type&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach((function(t,r){1===t.length&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var n=t.slice();n.sort((function(e,t){return e-t})),n.forEach((function(t,r){if(r>0){var i=t-n[r-1];i>0&&(e.minXDiff=Math.min(i,e.minXDiff))}})),1!==e.dataPoints&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)}))}},{key:"_setStackedMinMax",value:function(){var e=this.w.globals,t=[],r=[];if(e.series.length)for(var n=0;n<e.series[e.maxValsInArrayIndex].length;n++)for(var i=0,a=0,o=0;o<e.series.length;o++)null!==e.series[o][n]&&x.isNumber(e.series[o][n])&&(e.series[o][n]>0?i=i+parseFloat(e.series[o][n])+1e-4:a+=parseFloat(e.series[o][n])),o===e.series.length-1&&(t.push(i),r.push(a));for(var s=0;s<t.length;s++)e.maxY=Math.max(e.maxY,t[s]),e.minY=Math.min(e.minY,r[s])}}]),e}(),K=function(){function e(t,r){s(this,e),this.ctx=t,this.elgrid=r,this.w=t.w;var n=this.w;this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.axisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===n.config.chart.type&&n.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===n.config.xaxis.position&&(this.xAxisoffX=n.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new G(t)}return c(e,[{key:"drawYaxis",value:function(e){var t=this,r=this.w,n=new w(this.ctx),i=r.config.yaxis[e].labels.style,a=i.fontSize,o=i.fontFamily,s=i.fontWeight,l=n.group({class:"apexcharts-yaxis",rel:e,transform:"translate("+r.globals.translateYAxisX[e]+", 0)"});if(this.axesUtils.isYAxisHidden(e))return l;var c=n.group({class:"apexcharts-yaxis-texts-g"});l.add(c);var u=r.globals.yAxisScale[e].result.length-1,h=r.globals.gridHeight/u,d=r.globals.translateY,f=r.globals.yLabelFormatters[e],p=r.globals.yAxisScale[e].result.slice();p=this.axesUtils.checkForReversedLabels(e,p);var m="";if(r.config.yaxis[e].labels.show)for(var v=function(l){var v=p[l];v=f(v,l,r);var g=r.config.yaxis[e].labels.padding;r.config.yaxis[e].opposite&&0!==r.config.yaxis.length&&(g*=-1);var y=t.axesUtils.getYAxisForeColor(i.colors,e),x=n.drawText({x:g,y:d+u/10+r.config.yaxis[e].labels.offsetY+1,text:v,textAnchor:r.config.yaxis[e].opposite?"start":"end",fontSize:a,fontFamily:o,fontWeight:s,maxWidth:r.config.yaxis[e].labels.maxWidth,foreColor:Array.isArray(y)?y[l]:y,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+i.cssClass});l===u&&(m=x),c.add(x);var b=document.createElementNS(r.globals.SVGNS,"title");if(b.textContent=Array.isArray(v)?v.join(" "):v,x.node.appendChild(b),0!==r.config.yaxis[e].labels.rotate){var _=n.rotateAroundCenter(m.node),w=n.rotateAroundCenter(x.node);x.node.setAttribute("transform","rotate(".concat(r.config.yaxis[e].labels.rotate," ").concat(_.x," ").concat(w.y,")"))}d+=h},g=u;g>=0;g--)v(g);if(void 0!==r.config.yaxis[e].title.text){var y=n.group({class:"apexcharts-yaxis-title"}),x=0;r.config.yaxis[e].opposite&&(x=r.globals.translateYAxisX[e]);var b=n.drawText({x:x,y:r.globals.gridHeight/2+r.globals.translateY+r.config.yaxis[e].title.offsetY,text:r.config.yaxis[e].title.text,textAnchor:"end",foreColor:r.config.yaxis[e].title.style.color,fontSize:r.config.yaxis[e].title.style.fontSize,fontWeight:r.config.yaxis[e].title.style.fontWeight,fontFamily:r.config.yaxis[e].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+r.config.yaxis[e].title.style.cssClass});y.add(b),l.add(y)}var _=r.config.yaxis[e].axisBorder,k=31+_.offsetX;if(r.config.yaxis[e].opposite&&(k=-31-_.offsetX),_.show){var S=n.drawLine(k,r.globals.translateY+_.offsetY-2,k,r.globals.gridHeight+r.globals.translateY+_.offsetY+2,_.color,0,_.width);l.add(S)}return r.config.yaxis[e].axisTicks.show&&this.axesUtils.drawYAxisTicks(k,u,_,r.config.yaxis[e].axisTicks,e,h,l),l}},{key:"drawYaxisInversed",value:function(e){var t=this.w,r=new w(this.ctx),n=r.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),i=r.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});n.add(i);var a=t.globals.yAxisScale[e].result.length-1,o=t.globals.gridWidth/a+.1,s=o+t.config.xaxis.labels.offsetX,l=t.globals.xLabelFormatter,c=t.globals.yAxisScale[e].result.slice(),u=t.globals.timescaleLabels;u.length>0&&(this.xaxisLabels=u.slice(),a=(c=u.slice()).length),c=this.axesUtils.checkForReversedLabels(e,c);var h=u.length;if(t.config.xaxis.labels.show)for(var d=h?0:a;h?d<h:d>=0;h?d++:d--){var f=c[d];f=l(f,d,t);var p=t.globals.gridWidth+t.globals.padHorizontal-(s-o+t.config.xaxis.labels.offsetX);if(u.length){var m=this.axesUtils.getLabel(c,u,p,d,this.drawnLabels,this.xaxisFontSize);p=m.x,f=m.text,this.drawnLabels.push(m.text),0===d&&t.globals.skipFirstTimelinelabel&&(f=""),d===c.length-1&&t.globals.skipLastTimelinelabel&&(f="")}var v=r.drawText({x:p,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-("top"===t.config.xaxis.position?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:f,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+t.config.xaxis.labels.style.cssClass});i.add(v),v.tspan(f);var g=document.createElementNS(t.globals.SVGNS,"title");g.textContent=f,v.node.appendChild(g),s+=o}return this.inversedYAxisTitleText(n),this.inversedYAxisBorder(n),n}},{key:"inversedYAxisBorder",value:function(e){var t=this.w,r=new w(this.ctx),n=t.config.xaxis.axisBorder;if(n.show){var i=0;"bar"===t.config.chart.type&&t.globals.isXNumeric&&(i-=15);var a=r.drawLine(t.globals.padHorizontal+i+n.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,n.color,0,n.height);this.elgrid&&this.elgrid.elGridBorders?this.elgrid.elGridBorders.add(a):e.add(a)}}},{key:"inversedYAxisTitleText",value:function(e){var t=this.w,r=new w(this.ctx);if(void 0!==t.config.xaxis.title.text){var n=r.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),i=r.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});n.add(i),e.add(n)}}},{key:"yAxisTitleRotate",value:function(e,t){var r=this.w,n=new w(this.ctx),i={width:0,height:0},a={width:0,height:0},o=r.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g"));null!==o&&(i=o.getBoundingClientRect());var s=r.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text"));if(null!==s&&(a=s.getBoundingClientRect()),null!==s){var l=this.xPaddingForYAxisTitle(e,i,a,t);s.setAttribute("x",l.xPos-(t?10:0))}if(null!==s){var c=n.rotateAroundCenter(s);s.setAttribute("transform","rotate(".concat(t?-1*r.config.yaxis[e].title.rotate:r.config.yaxis[e].title.rotate," ").concat(c.x," ").concat(c.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,t,r,n){var i=this.w,a=0,o=0,s=10;return void 0===i.config.yaxis[e].title.text||e<0?{xPos:o,padd:0}:(n?(o=t.width+i.config.yaxis[e].title.offsetX+r.width/2+s/2,0===(a+=1)&&(o-=s/2)):(o=-1*t.width+i.config.yaxis[e].title.offsetX+s/2+r.width/2,i.globals.isBarHorizontal&&(s=25,o=-1*t.width-i.config.yaxis[e].title.offsetX-s)),{xPos:o,padd:s})}},{key:"setYAxisXPosition",value:function(e,t){var r=this.w,n=0,i=0,a=18,o=1;r.config.yaxis.length>1&&(this.multipleYs=!0),r.config.yaxis.map((function(s,l){var c=r.globals.ignoreYAxisIndexes.indexOf(l)>-1||!s.show||s.floating||0===e[l].width,u=e[l].width+t[l].width;s.opposite?r.globals.isBarHorizontal?(i=r.globals.gridWidth+r.globals.translateX-1,r.globals.translateYAxisX[l]=i-s.labels.offsetX):(i=r.globals.gridWidth+r.globals.translateX+o,c||(o=o+u+20),r.globals.translateYAxisX[l]=i-s.labels.offsetX+20):(n=r.globals.translateX-a,c||(a=a+u+20),r.globals.translateYAxisX[l]=n+s.labels.offsetX)}))}},{key:"setYAxisTextAlignments",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(t=x.listToArray(t)).forEach((function(t,r){var n=e.config.yaxis[r];if(n&&void 0!==n.labels.align){var i=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(r,"'] .apexcharts-yaxis-texts-g")),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(r,"'] .apexcharts-yaxis-label"));a=x.listToArray(a);var o=i.getBoundingClientRect();"left"===n.labels.align?(a.forEach((function(e,t){e.setAttribute("text-anchor","start")})),n.opposite||i.setAttribute("transform","translate(-".concat(o.width,", 0)"))):"center"===n.labels.align?(a.forEach((function(e,t){e.setAttribute("text-anchor","middle")})),i.setAttribute("transform","translate(".concat(o.width/2*(n.opposite?1:-1),", 0)"))):"right"===n.labels.align&&(a.forEach((function(e,t){e.setAttribute("text-anchor","end")})),n.opposite&&i.setAttribute("transform","translate(".concat(o.width,", 0)")))}}))}}]),e}(),J=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.documentEvent=x.bind(this.documentEvent,this)}return c(e,[{key:"addEventListener",value:function(e,t){var r=this.w;r.globals.events.hasOwnProperty(e)?r.globals.events[e].push(t):r.globals.events[e]=[t]}},{key:"removeEventListener",value:function(e,t){var r=this.w;if(r.globals.events.hasOwnProperty(e)){var n=r.globals.events[e].indexOf(t);-1!==n&&r.globals.events[e].splice(n,1)}}},{key:"fireEvent",value:function(e,t){var r=this.w;if(r.globals.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var n=r.globals.events[e],i=n.length,a=0;a<i;a++)n[a].apply(null,t)}}},{key:"setupEventHandlers",value:function(){var e=this,t=this.w,r=this.ctx,n=t.globals.dom.baseEl.querySelector(t.globals.chartClass);this.ctx.eventList.forEach((function(e){n.addEventListener(e,(function(e){var n=Object.assign({},t,{seriesIndex:t.globals.capturedSeriesIndex,dataPointIndex:t.globals.capturedDataPointIndex});"mousemove"===e.type||"touchmove"===e.type?"function"==typeof t.config.chart.events.mouseMove&&t.config.chart.events.mouseMove(e,r,n):"mouseleave"===e.type||"touchleave"===e.type?"function"==typeof t.config.chart.events.mouseLeave&&t.config.chart.events.mouseLeave(e,r,n):("mouseup"===e.type&&1===e.which||"touchend"===e.type)&&("function"==typeof t.config.chart.events.click&&t.config.chart.events.click(e,r,n),r.ctx.events.fireEvent("click",[e,r,n]))}),{capture:!1,passive:!0})})),this.ctx.eventList.forEach((function(r){t.globals.dom.baseEl.addEventListener(r,e.documentEvent,{passive:!0})})),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var t=this.w,r=e.target.className;if("click"===e.type){var n=t.globals.dom.baseEl.querySelector(".apexcharts-menu");n&&n.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==r&&n.classList.remove("apexcharts-menu-open")}t.globals.clientX="touchmove"===e.type?e.touches[0].clientX:e.clientX,t.globals.clientY="touchmove"===e.type?e.touches[0].clientY:e.clientY}}]),e}(),Q=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));var r=t.filter((function(t){return t.name===e}))[0];if(!r)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var n=x.extend(E,r);this.w.globals.locale=n.options}}]),e}(),ee=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawAxis",value:function(e,t){var r,n,i=this.w.globals,a=this.w.config,o=new X(this.ctx,t),s=new K(this.ctx,t);i.axisCharts&&"radar"!==e&&(i.isBarHorizontal?(n=s.drawYaxisInversed(0),r=o.drawXaxisInversed(0),i.dom.elGraphical.add(r),i.dom.elGraphical.add(n)):(r=o.drawXaxis(),i.dom.elGraphical.add(r),a.yaxis.map((function(e,t){-1===i.ignoreYAxisIndexes.indexOf(t)&&(n=s.drawYaxis(t),i.dom.Paper.add(n))}))))}}]),e}(),te=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawXCrosshairs",value:function(){var e=this.w,t=new w(this.ctx),r=new _(this.ctx),n=e.config.xaxis.crosshairs.fill.gradient,i=e.config.xaxis.crosshairs.dropShadow,a=e.config.xaxis.crosshairs.fill.type,o=n.colorFrom,s=n.colorTo,l=n.opacityFrom,c=n.opacityTo,u=n.stops,h=i.enabled,d=i.left,f=i.top,p=i.blur,m=i.color,v=i.opacity,g=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){"gradient"===a&&(g=t.drawGradient("vertical",o,s,l,c,null,u,null));var y=t.drawRect();1===e.config.xaxis.crosshairs.width&&(y=t.drawLine());var b=e.globals.gridHeight;(!x.isNumber(b)||b<0)&&(b=0);var k=e.config.xaxis.crosshairs.width;(!x.isNumber(k)||k<0)&&(k=0),y.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:b,width:k,height:b,fill:g,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),h&&(y=r.dropShadow(y,{left:d,top:f,blur:p,color:m,opacity:v})),e.globals.dom.elGraphical.add(y)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,t=new w(this.ctx),r=e.config.yaxis[0].crosshairs,n=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var i=t.drawLine(-n,0,e.globals.gridWidth+n,0,r.stroke.color,r.stroke.dashArray,r.stroke.width);i.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(i)}var a=t.drawLine(-n,0,e.globals.gridWidth+n,0,r.stroke.color,0,0);a.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(a)}}]),e}(),re=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"checkResponsiveConfig",value:function(e){var t=this,r=this.w,n=r.config;if(0!==n.responsive.length){var i=n.responsive.slice();i.sort((function(e,t){return e.breakpoint>t.breakpoint?1:t.breakpoint>e.breakpoint?-1:0})).reverse();var a=new D({}),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i[0].breakpoint,o=window.innerWidth>0?window.innerWidth:screen.width;if(o>n){var s=k.extendArrayProps(a,r.globals.initialConfig,r);e=x.extend(s,e),e=x.extend(r.config,e),t.overrideResponsiveOptions(e)}else for(var l=0;l<i.length;l++)o<i[l].breakpoint&&(e=k.extendArrayProps(a,i[l].options,r),e=x.extend(r.config,e),t.overrideResponsiveOptions(e))};if(e){var s=k.extendArrayProps(a,e,r);s=x.extend(r.config,s),o(s=x.extend(s,e))}else o({})}}},{key:"overrideResponsiveOptions",value:function(e){var t=new D(e).init({responsiveOverride:!0});this.w.config=t}}]),e}(),ne=function(){function e(t){s(this,e),this.ctx=t,this.colors=[],this.w=t.w;var r=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===r.config.chart.type&&r.config.plotOptions.treemap.distributed||"heatmap"===r.config.chart.type&&r.config.plotOptions.heatmap.distributed,this.isBarDistributed=r.config.plotOptions.bar.distributed&&("bar"===r.config.chart.type||"rangeBar"===r.config.chart.type)}return c(e,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e=this,t=this.w,r=new x;if(t.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(t.config.theme.mode)),void 0===t.config.colors?t.globals.colors=this.predefined():(t.globals.colors=t.config.colors,Array.isArray(t.config.colors)&&t.config.colors.length>0&&"function"==typeof t.config.colors[0]&&(t.globals.colors=t.config.series.map((function(r,n){var i=t.config.colors[n];return i||(i=t.config.colors[0]),"function"==typeof i?(e.isColorFn=!0,i({value:t.globals.axisCharts?t.globals.series[n][0]?t.globals.series[n][0]:0:t.globals.series[n],seriesIndex:n,dataPointIndex:n,w:t})):i})))),t.globals.seriesColors.map((function(e,r){e&&(t.globals.colors[r]=e)})),t.config.theme.monochrome.enabled){var n=[],i=t.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(i=t.globals.series[0].length*t.globals.series.length);for(var a=t.config.theme.monochrome.color,o=1/(i/t.config.theme.monochrome.shadeIntensity),s=t.config.theme.monochrome.shadeTo,l=0,c=0;c<i;c++){var u=void 0;"dark"===s?(u=r.shadeColor(-1*l,a),l+=o):(u=r.shadeColor(l,a),l+=o),n.push(u)}t.globals.colors=n.slice()}var h=t.globals.colors.slice();this.pushExtraColors(t.globals.colors),["fill","stroke"].forEach((function(r){void 0===t.config[r].colors?t.globals[r].colors=e.isColorFn?t.config.colors:h:t.globals[r].colors=t.config[r].colors.slice(),e.pushExtraColors(t.globals[r].colors)})),void 0===t.config.dataLabels.style.colors?t.globals.dataLabels.style.colors=h:t.globals.dataLabels.style.colors=t.config.dataLabels.style.colors.slice(),this.pushExtraColors(t.globals.dataLabels.style.colors,50),void 0===t.config.plotOptions.radar.polygons.fill.colors?t.globals.radarPolygons.fill.colors=["dark"===t.config.theme.mode?"#424242":"none"]:t.globals.radarPolygons.fill.colors=t.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(t.globals.radarPolygons.fill.colors,20),void 0===t.config.markers.colors?t.globals.markers.colors=h:t.globals.markers.colors=t.config.markers.colors.slice(),this.pushExtraColors(t.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.w,i=t||n.globals.series.length;if(null===r&&(r=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===n.config.chart.type&&n.config.plotOptions.heatmap.colorScale.inverse),r&&n.globals.series.length&&(i=n.globals.series[n.globals.maxValsInArrayIndex].length*n.globals.series.length),e.length<i)for(var a=i-e.length,o=0;o<a;o++)e.push(e[o])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var t=e.theme.mode||"light",r=e.theme.palette?e.theme.palette:"dark"===t?"palette4":"palette1",n=e.chart.foreColor?e.chart.foreColor:"dark"===t?"#f6f7f8":"#373d3f";return e.tooltip.theme=t,e.chart.foreColor=n,e.theme.palette=r,e}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),e}(),ie=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var t=this.w,r="title"===e?t.config.title:t.config.subtitle,n=t.globals.svgWidth/2,i=r.offsetY,a="middle";if("left"===r.align?(n=10,a="start"):"right"===r.align&&(n=t.globals.svgWidth-10,a="end"),n+=r.offsetX,i=i+parseInt(r.style.fontSize,10)+r.margin/2,void 0!==r.text){var o=new w(this.ctx).drawText({x:n,y:i,text:r.text,textAnchor:a,fontSize:r.style.fontSize,fontFamily:r.style.fontFamily,fontWeight:r.style.fontWeight,foreColor:r.style.color,opacity:1});o.node.setAttribute("class","apexcharts-".concat(e,"-text")),t.globals.dom.Paper.add(o)}}}]),e}(),ae=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"getTitleSubtitleCoords",value:function(e){var t=this.w,r=0,n=0,i="title"===e?t.config.title.floating:t.config.subtitle.floating,a=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(null!==a&&!i){var o=a.getBoundingClientRect();r=o.width,n=t.globals.axisCharts?o.height+5:o.height}return{width:r,height:n}}},{key:"getLegendsRect",value:function(){var e=this.w,t=e.globals.dom.baseEl.querySelector(".apexcharts-legend");e.config.legend.height||"top"!==e.config.legend.position&&"bottom"!==e.config.legend.position||(t.style.maxHeight=e.globals.svgHeight/2+"px");var r=Object.assign({},x.getBoundingClientRect(t));return null!==t&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:r.x,y:r.y,height:r.height,width:0===r.height?0:r.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},"left"!==e.config.legend.position&&"right"!==e.config.legend.position||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(e,t){var r=e;if(this.w.globals.isMultiLineX){var n=t.map((function(e,t){return Array.isArray(e)?e.length:1})),i=Math.max.apply(Math,v(n));r=t[n.indexOf(i)]}return r}}]),e}(),oe=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"getxAxisLabelsCoords",value:function(){var e,t=this.w,r=t.globals.labels.slice();if(t.config.xaxis.convertedCatToNumeric&&0===r.length&&(r=t.globals.categoryLabels),t.globals.timescaleLabels.length>0){var n=this.getxAxisTimeScaleLabelsCoords();e={width:n.width,height:n.height},t.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==t.config.legend.position&&"right"!==t.config.legend.position||t.config.legend.floating?0:this.dCtx.lgRect.width;var i=t.globals.xLabelFormatter,a=x.getLargestStringFromArr(r),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(a,r);t.globals.isBarHorizontal&&(o=a=t.globals.yAxisScale[0].result.reduce((function(e,t){return e.length>t.length?e:t}),0));var s=new W(this.dCtx.ctx),l=a;a=s.xLabelFormat(i,a,l,{i:void 0,dateFormatter:new P(this.dCtx.ctx).formatDate,w:t}),o=s.xLabelFormat(i,o,l,{i:void 0,dateFormatter:new P(this.dCtx.ctx).formatDate,w:t}),(t.config.xaxis.convertedCatToNumeric&&void 0===a||""===String(a).trim())&&(o=a="1");var c=new w(this.dCtx.ctx),u=c.getTextRects(a,t.config.xaxis.labels.style.fontSize),h=u;if(a!==o&&(h=c.getTextRects(o,t.config.xaxis.labels.style.fontSize)),(e={width:u.width>=h.width?u.width:h.width,height:u.height>=h.height?u.height:h.height}).width*r.length>t.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==t.config.xaxis.labels.rotate||t.config.xaxis.labels.rotateAlways){if(!t.globals.isBarHorizontal){t.globals.rotateXLabels=!0;var d=function(e){return c.getTextRects(e,t.config.xaxis.labels.style.fontSize,t.config.xaxis.labels.style.fontFamily,"rotate(".concat(t.config.xaxis.labels.rotate," 0 0)"),!1)};u=d(a),a!==o&&(h=d(o)),e.height=(u.height>h.height?u.height:h.height)/1.5,e.width=u.width>h.width?u.width:h.width}}else t.globals.rotateXLabels=!1}return t.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,t=this.w;if(!t.globals.hasGroups)return{width:0,height:0};var r,n=(null===(e=t.config.xaxis.group.style)||void 0===e?void 0:e.fontSize)||t.config.xaxis.labels.style.fontSize,i=t.globals.groups.map((function(e){return e.title})),a=x.getLargestStringFromArr(i),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(a,i),s=new w(this.dCtx.ctx),l=s.getTextRects(a,n),c=l;return a!==o&&(c=s.getTextRects(o,n)),r={width:l.width>=c.width?l.width:c.width,height:l.height>=c.height?l.height:c.height},t.config.xaxis.labels.show||(r={width:0,height:0}),{width:r.width,height:r.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,t=0,r=0;if(void 0!==e.config.xaxis.title.text){var n=new w(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=n.width,r=n.height}return{width:t,height:r}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var r=this.dCtx.timescaleLabels.map((function(e){return e.value})),n=r.reduce((function(e,t){return void 0===e?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):e.length>t.length?e:t}),0);return 1.05*(e=new w(this.dCtx.ctx).getTextRects(n,t.config.xaxis.labels.style.fontSize)).width*r.length>t.globals.gridWidth&&0!==t.config.xaxis.labels.rotate&&(t.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var t=this,r=this.w,n=r.globals,i=r.config,a=i.xaxis.type,o=e.width;n.skipLastTimelinelabel=!1,n.skipFirstTimelinelabel=!1;var s=r.config.yaxis[0].opposite&&r.globals.isBarHorizontal,l=function(e,s){(function(e){return-1!==n.collapsedSeriesIndices.indexOf(e)})(s)||function(e){if(t.dCtx.timescaleLabels&&t.dCtx.timescaleLabels.length){var s=t.dCtx.timescaleLabels[0],l=t.dCtx.timescaleLabels[t.dCtx.timescaleLabels.length-1].position+o/1.75-t.dCtx.yAxisWidthRight,c=s.position-o/1.75+t.dCtx.yAxisWidthLeft,u="right"===r.config.legend.position&&t.dCtx.lgRect.width>0?t.dCtx.lgRect.width:0;l>n.svgWidth-n.translateX-u&&(n.skipLastTimelinelabel=!0),c<-(e.show&&!e.floating||"bar"!==i.chart.type&&"candlestick"!==i.chart.type&&"rangeBar"!==i.chart.type&&"boxPlot"!==i.chart.type?10:o/1.75)&&(n.skipFirstTimelinelabel=!0)}else"datetime"===a?t.dCtx.gridPad.right<o&&!n.rotateXLabels&&(n.skipLastTimelinelabel=!0):"datetime"!==a&&t.dCtx.gridPad.right<o/2-t.dCtx.yAxisWidthRight&&!n.rotateXLabels&&!r.config.xaxis.labels.trim&&("between"!==r.config.xaxis.tickPlacement||r.globals.isBarHorizontal)&&(t.dCtx.xPadRight=o/2+1)}(e)};i.yaxis.forEach((function(e,r){s?(t.dCtx.gridPad.left<o&&(t.dCtx.xPadLeft=o/2+1),t.dCtx.xPadRight=o/2+1):l(e,r)}))}}]),e}(),se=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"getyAxisLabelsCoords",value:function(){var e=this,t=this.w,r=[],n=10,i=new G(this.dCtx.ctx);return t.config.yaxis.map((function(a,o){var s=t.globals.yAxisScale[o],l=0;if(!i.isYAxisHidden(o)&&a.labels.show&&void 0!==a.labels.minWidth&&(l=a.labels.minWidth),!i.isYAxisHidden(o)&&a.labels.show&&s.result.length){var c=t.globals.yLabelFormatters[o],u=s.niceMin===Number.MIN_VALUE?0:s.niceMin,h=String(u).length>String(s.niceMax).length?u:s.niceMax,d=c(h,{seriesIndex:o,dataPointIndex:-1,w:t}),f=d;if(void 0!==d&&0!==d.length||(d=h),t.globals.isBarHorizontal){n=0;var p=t.globals.labels.slice();d=c(d=x.getLargestStringFromArr(p),{seriesIndex:o,dataPointIndex:-1,w:t}),f=e.dCtx.dimHelpers.getLargestStringFromMultiArr(d,p)}var m=new w(e.dCtx.ctx),v="rotate(".concat(a.labels.rotate," 0 0)"),g=m.getTextRects(d,a.labels.style.fontSize,a.labels.style.fontFamily,v,!1),y=g;d!==f&&(y=m.getTextRects(f,a.labels.style.fontSize,a.labels.style.fontFamily,v,!1)),r.push({width:(l>y.width||l>g.width?l:y.width>g.width?y.width:g.width)+n,height:y.height>g.height?y.height:g.height})}else r.push({width:0,height:0})})),r}},{key:"getyAxisTitleCoords",value:function(){var e=this,t=this.w,r=[];return t.config.yaxis.map((function(t,n){if(t.show&&void 0!==t.title.text){var i=new w(e.dCtx.ctx),a="rotate(".concat(t.title.rotate," 0 0)"),o=i.getTextRects(t.title.text,t.title.style.fontSize,t.title.style.fontFamily,a,!1);r.push({width:o.width,height:o.height})}else r.push({width:0,height:0})})),r}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,t=0,r=0,n=0,i=e.globals.yAxisScale.length>1?10:0,a=new G(this.dCtx.ctx),o=function(o,s){var l=e.config.yaxis[s].floating,c=0;o.width>0&&!l?(c=o.width+i,function(t){return e.globals.ignoreYAxisIndexes.indexOf(t)>-1}(s)&&(c=c-o.width-i)):c=l||a.isYAxisHidden(s)?0:5,e.config.yaxis[s].opposite?n+=c:r+=c,t+=c};return e.globals.yLabelsCoords.map((function(e,t){o(e,t)})),e.globals.yTitleCoords.map((function(e,t){o(e,t)})),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=r,this.dCtx.yAxisWidthRight=n,t}}]),e}(),le=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var t=this.w;if(t.globals.noData||t.globals.allSeriesCollapsed)return 0;var r=function(e){return"bar"===e||"rangeBar"===e||"candlestick"===e||"boxPlot"===e},n=t.config.chart.type,i=0,a=r(n)?t.config.series.length:1;if(t.globals.comboBarCount>0&&(a=t.globals.comboBarCount),t.globals.collapsedSeries.forEach((function(e){r(e.type)&&(a-=1)})),t.config.chart.stacked&&(a=1),(r(n)||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&a>0){var o,s,l=Math.abs(t.globals.initialMaxX-t.globals.initialMinX);l<=3&&(l=t.globals.dataPoints),o=l/e,t.globals.minXDiff&&t.globals.minXDiff/o>0&&(s=t.globals.minXDiff/o),s>e/2&&(s/=2),(i=s/a*parseInt(t.config.plotOptions.bar.columnWidth,10)/100)<1&&(i=1),i=i/(a>1?1:1.5)+5,t.globals.barPadForNumericAxis=i}return i}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,t=this.w,r=t.globals,n=this.dCtx.isSparkline||!t.globals.axisCharts?0:10;["title","subtitle"].forEach((function(r){void 0!==t.config[r].text?n+=t.config[r].margin:n+=e.dCtx.isSparkline||!t.globals.axisCharts?0:5})),!t.config.legend.show||"bottom"!==t.config.legend.position||t.config.legend.floating||t.globals.axisCharts||(n+=10);var i=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),a=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");r.gridHeight=r.gridHeight-i.height-a.height-n,r.translateY=r.translateY+i.height+a.height+n}},{key:"setGridXPosForDualYAxis",value:function(e,t){var r=this.w,n=new G(this.dCtx.ctx);r.config.yaxis.map((function(i,a){-1!==r.globals.ignoreYAxisIndexes.indexOf(a)||i.floating||n.isYAxisHidden(a)||(i.opposite&&(r.globals.translateX=r.globals.translateX-(t[a].width+e[a].width)-parseInt(r.config.yaxis[a].labels.style.fontSize,10)/1.2-12),r.globals.translateX<2&&(r.globals.translateX=2))}))}}]),e}(),ce=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new ae(this),this.dimYAxis=new se(this),this.dimXAxis=new oe(this),this.dimGrid=new le(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return c(e,[{key:"plotCoords",value:function(){var e=this,t=this.w,r=t.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&(t.config.markers.discrete.length>0||t.config.markers.size>0)&&Object.entries(this.gridPad).forEach((function(t){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return a}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),n=r[0],i=r[1];e.gridPad[n]=Math.max(i,e.w.globals.markers.largestSize/1.5)})),r.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),r.gridHeight=r.gridHeight-this.gridPad.top-this.gridPad.bottom,r.gridWidth=r.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var n=this.dimGrid.gridPadForColumnsInNumericAxis(r.gridWidth);r.gridWidth=r.gridWidth-2*n,r.translateX=r.translateX+this.gridPad.left+this.xPadLeft+(n>0?n+4:0),r.translateY=r.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,t=this.w,r=t.globals,n=this.dimYAxis.getyAxisLabelsCoords(),i=this.dimYAxis.getyAxisTitleCoords();t.globals.yLabelsCoords=[],t.globals.yTitleCoords=[],t.config.yaxis.map((function(e,r){t.globals.yLabelsCoords.push({width:n[r].width,index:r}),t.globals.yTitleCoords.push({width:i[r].width,index:r})})),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var a=this.dimXAxis.getxAxisLabelsCoords(),o=this.dimXAxis.getxAxisGroupLabelsCoords(),s=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(a,s,o),r.translateXAxisY=t.globals.rotateXLabels?this.xAxisHeight/8:-4,r.translateXAxisX=t.globals.rotateXLabels&&t.globals.isXNumeric&&t.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,t.globals.isBarHorizontal&&(r.rotateXLabels=!1,r.translateXAxisY=parseInt(t.config.xaxis.labels.style.fontSize,10)/1.5*-1),r.translateXAxisY=r.translateXAxisY+t.config.xaxis.labels.offsetY,r.translateXAxisX=r.translateXAxisX+t.config.xaxis.labels.offsetX;var l=this.yAxisWidth,c=this.xAxisHeight;r.xAxisLabelsHeight=this.xAxisHeight-s.height,r.xAxisGroupLabelsHeight=r.xAxisLabelsHeight-a.height,r.xAxisLabelsWidth=this.xAxisWidth,r.xAxisHeight=this.xAxisHeight;var u=10;("radar"===t.config.chart.type||this.isSparkline)&&(l=0,c=r.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===t.config.chart.type)&&(l=0,c=0,u=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(a);var h=function(){r.translateX=l,r.gridHeight=r.svgHeight-e.lgRect.height-c-(e.isSparkline||"treemap"===t.config.chart.type?0:t.globals.rotateXLabels?10:15),r.gridWidth=r.svgWidth-l};switch("top"===t.config.xaxis.position&&(u=r.xAxisHeight-t.config.xaxis.axisTicks.height-5),t.config.legend.position){case"bottom":r.translateY=u,h();break;case"top":r.translateY=this.lgRect.height+u,h();break;case"left":r.translateY=u,r.translateX=this.lgRect.width+l,r.gridHeight=r.svgHeight-c-12,r.gridWidth=r.svgWidth-this.lgRect.width-l;break;case"right":r.translateY=u,r.translateX=l,r.gridHeight=r.svgHeight-c-12,r.gridWidth=r.svgWidth-this.lgRect.width-l-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(i,n),new K(this.ctx).setYAxisXPosition(n,i)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,t=e.globals,r=e.config,n=0;e.config.legend.show&&!e.config.legend.floating&&(n=20);var i="pie"===r.chart.type||"polarArea"===r.chart.type||"donut"===r.chart.type?"pie":"radialBar",a=r.plotOptions[i].offsetY,o=r.plotOptions[i].offsetX;if(!r.legend.show||r.legend.floating)return t.gridHeight=t.svgHeight-r.grid.padding.left+r.grid.padding.right,t.gridWidth=t.gridHeight,t.translateY=a,void(t.translateX=o+(t.svgWidth-t.gridWidth)/2);switch(r.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=a-10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+a+10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-n,t.gridHeight="auto"!==r.chart.height?t.svgHeight:t.gridWidth,t.translateY=a,t.translateX=o+this.lgRect.width+n;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-n-5,t.gridHeight="auto"!==r.chart.height?t.svgHeight:t.gridWidth,t.translateY=a,t.translateX=o+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,t,r){var n=this.w,i=n.globals.hasGroups?2:1,a=r.height+e.height+t.height,o=n.globals.isMultiLineX?1.2:n.globals.LINE_HEIGHT_RATIO,s=n.globals.rotateXLabels?22:10,l=n.globals.rotateXLabels&&"bottom"===n.config.legend.position?10:0;this.xAxisHeight=a*o+i*s+l,this.xAxisWidth=e.width,this.xAxisHeight-t.height>n.config.xaxis.labels.maxHeight&&(this.xAxisHeight=n.config.xaxis.labels.maxHeight),n.config.xaxis.labels.minHeight&&this.xAxisHeight<n.config.xaxis.labels.minHeight&&(this.xAxisHeight=n.config.xaxis.labels.minHeight),n.config.xaxis.floating&&(this.xAxisHeight=0);var c=0,u=0;n.config.yaxis.forEach((function(e){c+=e.labels.minWidth,u+=e.labels.maxWidth})),this.yAxisWidth<c&&(this.yAxisWidth=c),this.yAxisWidth>u&&(this.yAxisWidth=u)}}]),e}(),ue=function(){function e(t){s(this,e),this.w=t.w,this.lgCtx=t}return c(e,[{key:"getLegendStyles",value:function(){var e=document.createElement("style");e.setAttribute("type","text/css");var t=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return e.appendChild(t),e}},{key:"getLegendBBox",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),t=e.width;return{clwh:e.height,clww:t}}},{key:"appendToForeignObject",value:function(){var e=this.w.globals;e.dom.elLegendForeign=document.createElementNS(e.SVGNS,"foreignObject");var t=e.dom.elLegendForeign;t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("width",e.svgWidth),t.setAttribute("height",e.svgHeight),e.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),t.appendChild(e.dom.elLegendWrap),t.appendChild(this.getLegendStyles()),e.dom.Paper.node.insertBefore(t,e.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(e,t){var r=this,n=this.w;if(n.globals.axisCharts||"radialBar"===n.config.chart.type){n.globals.resized=!0;var i=null,a=null;n.globals.risingSeries=[],n.globals.axisCharts?(i=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),a=parseInt(i.getAttribute("data:realIndex"),10)):(i=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),a=parseInt(i.getAttribute("rel"),10)-1),t?[{cs:n.globals.collapsedSeries,csi:n.globals.collapsedSeriesIndices},{cs:n.globals.ancillaryCollapsedSeries,csi:n.globals.ancillaryCollapsedSeriesIndices}].forEach((function(e){r.riseCollapsedSeries(e.cs,e.csi,a)})):this.hideSeries({seriesEl:i,realIndex:a})}else{var o=n.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(e+1,"'] path")),s=n.config.chart.type;if("pie"===s||"polarArea"===s||"donut"===s){var l=n.config.plotOptions.pie.donut.labels;new w(this.lgCtx.ctx).pathMouseDown(o.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(o.members[0].node,l)}o.fire("click")}}},{key:"hideSeries",value:function(e){var t=e.seriesEl,r=e.realIndex,n=this.w,i=x.clone(n.config.series);if(n.globals.axisCharts){var a=!1;if(n.config.yaxis[r]&&n.config.yaxis[r].show&&n.config.yaxis[r].showAlways&&(a=!0,n.globals.ancillaryCollapsedSeriesIndices.indexOf(r)<0&&(n.globals.ancillaryCollapsedSeries.push({index:r,data:i[r].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),n.globals.ancillaryCollapsedSeriesIndices.push(r))),!a){n.globals.collapsedSeries.push({index:r,data:i[r].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),n.globals.collapsedSeriesIndices.push(r);var o=n.globals.risingSeries.indexOf(r);n.globals.risingSeries.splice(o,1)}}else n.globals.collapsedSeries.push({index:r,data:i[r]}),n.globals.collapsedSeriesIndices.push(r);for(var s=t.childNodes,l=0;l<s.length;l++)s[l].classList.contains("apexcharts-series-markers-wrap")&&(s[l].classList.contains("apexcharts-hide")?s[l].classList.remove("apexcharts-hide"):s[l].classList.add("apexcharts-hide"));n.globals.allSeriesCollapsed=n.globals.collapsedSeries.length===n.config.series.length,i=this._getSeriesBasedOnCollapsedState(i),this.lgCtx.ctx.updateHelpers._updateSeries(i,n.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,t,r){var n=this.w,i=x.clone(n.config.series);if(e.length>0){for(var a=0;a<e.length;a++)e[a].index===r&&(n.globals.axisCharts?(i[r].data=e[a].data.slice(),e.splice(a,1),t.splice(a,1),n.globals.risingSeries.push(r)):(i[r]=e[a].data,e.splice(a,1),t.splice(a,1),n.globals.risingSeries.push(r)));i=this._getSeriesBasedOnCollapsedState(i),this.lgCtx.ctx.updateHelpers._updateSeries(i,n.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var t=this.w;return t.globals.axisCharts?e.forEach((function(r,n){t.globals.collapsedSeriesIndices.indexOf(n)>-1&&(e[n].data=[])})):e.forEach((function(r,n){t.globals.collapsedSeriesIndices.indexOf(n)>-1&&(e[n]=0)})),e}}]),e}(),he=function(){function e(t,r){s(this,e),this.ctx=t,this.w=t.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new ue(this)}return c(e,[{key:"init",value:function(){var e=this.w,t=e.globals,r=e.config;if((r.legend.showForSingleSeries&&1===t.series.length||this.isBarsDistributed||t.series.length>1||!t.axisCharts)&&r.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),x.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===r.legend.position||"top"===r.legend.position?this.legendAlignHorizontal():"right"!==r.legend.position&&"left"!==r.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var e=this,t=this.w,r=t.config.legend.fontFamily,n=t.globals.seriesNames,i=t.globals.colors.slice();if("heatmap"===t.config.chart.type){var a=t.config.plotOptions.heatmap.colorScale.ranges;n=a.map((function(e){return e.name?e.name:e.from+" - "+e.to})),i=a.map((function(e){return e.color}))}else this.isBarsDistributed&&(n=t.globals.labels.slice());t.config.legend.customLegendItems.length&&(n=t.config.legend.customLegendItems);for(var o=t.globals.legendFormatter,s=t.config.legend.inverseOrder,l=s?n.length-1:0;s?l>=0:l<=n.length-1;s?l--:l++){var c=o(n[l],{seriesIndex:l,w:t}),u=!1,h=!1;if(t.globals.collapsedSeries.length>0)for(var d=0;d<t.globals.collapsedSeries.length;d++)t.globals.collapsedSeries[d].index===l&&(u=!0);if(t.globals.ancillaryCollapsedSeriesIndices.length>0)for(var f=0;f<t.globals.ancillaryCollapsedSeriesIndices.length;f++)t.globals.ancillaryCollapsedSeriesIndices[f]===l&&(h=!0);var p=document.createElement("span");p.classList.add("apexcharts-legend-marker");var m=t.config.legend.markers.offsetX,v=t.config.legend.markers.offsetY,g=t.config.legend.markers.height,y=t.config.legend.markers.width,b=t.config.legend.markers.strokeWidth,_=t.config.legend.markers.strokeColor,S=t.config.legend.markers.radius,C=p.style;C.background=i[l],C.color=i[l],C.setProperty("background",i[l],"important"),t.config.legend.markers.fillColors&&t.config.legend.markers.fillColors[l]&&(C.background=t.config.legend.markers.fillColors[l]),void 0!==t.globals.seriesColors[l]&&(C.background=t.globals.seriesColors[l],C.color=t.globals.seriesColors[l]),C.height=Array.isArray(g)?parseFloat(g[l])+"px":parseFloat(g)+"px",C.width=Array.isArray(y)?parseFloat(y[l])+"px":parseFloat(y)+"px",C.left=(Array.isArray(m)?parseFloat(m[l]):parseFloat(m))+"px",C.top=(Array.isArray(v)?parseFloat(v[l]):parseFloat(v))+"px",C.borderWidth=Array.isArray(b)?b[l]:b,C.borderColor=Array.isArray(_)?_[l]:_,C.borderRadius=Array.isArray(S)?parseFloat(S[l])+"px":parseFloat(S)+"px",t.config.legend.markers.customHTML&&(Array.isArray(t.config.legend.markers.customHTML)?t.config.legend.markers.customHTML[l]&&(p.innerHTML=t.config.legend.markers.customHTML[l]()):p.innerHTML=t.config.legend.markers.customHTML()),w.setAttrs(p,{rel:l+1,"data:collapsed":u||h}),(u||h)&&p.classList.add("apexcharts-inactive-legend");var A=document.createElement("div"),T=document.createElement("span");T.classList.add("apexcharts-legend-text"),T.innerHTML=Array.isArray(c)?c.join(" "):c;var E=t.config.legend.labels.useSeriesColors?t.globals.colors[l]:t.config.legend.labels.colors;E||(E=t.config.chart.foreColor),T.style.color=E,T.style.fontSize=parseFloat(t.config.legend.fontSize)+"px",T.style.fontWeight=t.config.legend.fontWeight,T.style.fontFamily=r||t.config.chart.fontFamily,w.setAttrs(T,{rel:l+1,i:l,"data:default-text":encodeURIComponent(c),"data:collapsed":u||h}),A.appendChild(p),A.appendChild(T);var M=new k(this.ctx);t.config.legend.showForZeroSeries||0===M.getSeriesTotalByIndex(l)&&M.seriesHaveSameValues(l)&&!M.isSeriesNull(l)&&-1===t.globals.collapsedSeriesIndices.indexOf(l)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&A.classList.add("apexcharts-hidden-zero-series"),t.config.legend.showForNullSeries||M.isSeriesNull(l)&&-1===t.globals.collapsedSeriesIndices.indexOf(l)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&A.classList.add("apexcharts-hidden-null-series"),t.globals.dom.elLegendWrap.appendChild(A),t.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(t.config.legend.horizontalAlign)),t.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+t.config.legend.position),A.classList.add("apexcharts-legend-series"),A.style.margin="".concat(t.config.legend.itemMargin.vertical,"px ").concat(t.config.legend.itemMargin.horizontal,"px"),t.globals.dom.elLegendWrap.style.width=t.config.legend.width?t.config.legend.width+"px":"",t.globals.dom.elLegendWrap.style.height=t.config.legend.height?t.config.legend.height+"px":"",w.setAttrs(A,{rel:l+1,seriesName:x.escapeString(n[l]),"data:collapsed":u||h}),(u||h)&&A.classList.add("apexcharts-inactive-legend"),t.config.legend.onItemClick.toggleDataSeries||A.classList.add("apexcharts-no-click")}t.globals.dom.elWrap.addEventListener("click",e.onLegendClick,!0),t.config.legend.onItemHover.highlightDataSeries&&0===t.config.legend.customLegendItems.length&&(t.globals.dom.elWrap.addEventListener("mousemove",e.onLegendHovered,!0),t.globals.dom.elWrap.addEventListener("mouseout",e.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,t){var r=this.w,n=r.globals.dom.baseEl.querySelector(".apexcharts-legend"),i=n.getBoundingClientRect(),a=0,o=0;if("bottom"===r.config.legend.position)o+=r.globals.svgHeight-i.height/2;else if("top"===r.config.legend.position){var s=new ce(this.ctx),l=s.dimHelpers.getTitleSubtitleCoords("title").height,c=s.dimHelpers.getTitleSubtitleCoords("subtitle").height;o=o+(l>0?l-10:0)+(c>0?c-10:0)}n.style.position="absolute",a=a+e+r.config.legend.offsetX,o=o+t+r.config.legend.offsetY,n.style.left=a+"px",n.style.top=o+"px","bottom"===r.config.legend.position?(n.style.top="auto",n.style.bottom=5-r.config.legend.offsetY+"px"):"right"===r.config.legend.position&&(n.style.left="auto",n.style.right=25+r.config.legend.offsetX+"px"),["width","height"].forEach((function(e){n.style[e]&&(n.style[e]=parseInt(r.config.legend[e],10)+"px")}))}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var t=this.legendHelpers.getLegendBBox(),r=new ce(this.ctx),n=r.dimHelpers.getTitleSubtitleCoords("title"),i=r.dimHelpers.getTitleSubtitleCoords("subtitle"),a=0;"bottom"===e.config.legend.position?a=-t.clwh/1.8:"top"===e.config.legend.position&&(a=n.height+i.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,a)}},{key:"legendAlignVertical",value:function(){var e=this.w,t=this.legendHelpers.getLegendBBox(),r=0;"left"===e.config.legend.position&&(r=20),"right"===e.config.legend.position&&(r=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(r,20)}},{key:"onLegendHovered",value:function(e){var t=this.w,r=e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if("heatmap"===t.config.chart.type||this.isBarsDistributed){if(r){var n=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,n,this.w]),new U(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&r&&new U(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var r=parseInt(e.target.getAttribute("rel"),10)-1,n="true"===e.target.getAttribute("data:collapsed"),i=this.w.config.chart.events.legendClick;"function"==typeof i&&i(this.ctx,r,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,r,this.w]);var a=this.w.config.legend.markers.onClick;"function"==typeof a&&e.target.classList.contains("apexcharts-legend-marker")&&(a(this.ctx,r,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,r,this.w])),"treemap"!==t.config.chart.type&&"heatmap"!==t.config.chart.type&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(r,n)}}}]),e}(),de=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var r=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=r.globals.minX,this.maxX=r.globals.maxX}return c(e,[{key:"createToolbar",value:function(){var e=this,t=this.w,r=function(){return document.createElement("div")},n=r();if(n.setAttribute("class","apexcharts-toolbar"),n.style.top=t.config.chart.toolbar.offsetY+"px",n.style.right=3-t.config.chart.toolbar.offsetX+"px",t.globals.dom.elWrap.appendChild(n),this.elZoom=r(),this.elZoomIn=r(),this.elZoomOut=r(),this.elPan=r(),this.elSelection=r(),this.elZoomReset=r(),this.elMenuIcon=r(),this.elMenu=r(),this.elCustomIcons=[],this.t=t.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var i=0;i<this.t.customIcons.length;i++)this.elCustomIcons.push(r());var a=[],o=function(r,n,i){var o=r.toLowerCase();e.t[o]&&t.config.chart.zoom.enabled&&a.push({el:n,icon:"string"==typeof e.t[o]?e.t[o]:i,title:e.localeValues[r],class:"apexcharts-".concat(o,"-icon")})};o("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),o("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var s=function(r){e.t[r]&&t.config.chart[r].enabled&&a.push({el:"zoom"===r?e.elZoom:e.elSelection,icon:"string"==typeof e.t[r]?e.t[r]:"zoom"===r?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:e.localeValues["zoom"===r?"selectionZoom":"selection"],class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(r,"-icon")})};s("zoom"),s("selection"),this.t.pan&&t.config.chart.zoom.enabled&&a.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),o("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&a.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var l=0;l<this.elCustomIcons.length;l++)a.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});a.forEach((function(e,t){e.index&&x.moveIndexInArray(a,t,e.index)}));for(var c=0;c<a.length;c++)w.setAttrs(a[c].el,{class:a[c].class,title:a[c].title}),a[c].el.innerHTML=a[c].icon,n.appendChild(a[c].el);this._createHamburgerMenu(n),t.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):t.globals.panEnabled?this.elPan.classList.add(this.selectedClass):t.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),w.setAttrs(this.elMenu,{class:"apexcharts-menu"});var t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||t.splice(2,1);for(var r=0;r<t.length;r++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[r].innerHTML=t[r].title,w.setAttrs(this.elMenuItems[r],{class:"apexcharts-menu-item ".concat(t[r].name),title:t[r].title}),this.elMenu.appendChild(this.elMenuItems[r])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach((function(t){t.classList.contains("exportSVG")?t.addEventListener("click",e.handleDownload.bind(e,"svg")):t.classList.contains("exportPNG")?t.addEventListener("click",e.handleDownload.bind(e,"png")):t.classList.contains("exportCSV")&&t.addEventListener("click",e.handleDownload.bind(e,"csv"))}));for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach((function(t){t.ctx.toolbar.toggleOtherControls();var r="selection"===e?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,n="selection"===e?"selectionEnabled":"zoomEnabled";t.w.globals[n]=!t.w.globals[n],r.classList.contains(t.ctx.toolbar.selectedClass)?r.classList.remove(t.ctx.toolbar.selectedClass):r.classList.add(t.ctx.toolbar.selectedClass)}))}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),"pan"===e?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var t="pan"===e?this.elPan:this.elZoom,r="pan"===e?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),r&&r.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach((function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)}))}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach((function(t){t&&t.classList.remove(e.selectedClass)}))}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var t=(this.minX+this.maxX)/2,r=(this.minX+t)/2,n=(this.maxX+t)/2,i=this._getNewMinXMaxX(r,n);e.globals.disableZoomIn||this.zoomUpdateOptions(i.minX,i.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!("datetime"===e.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var t=(this.minX+this.maxX)/2,r=this.minX-(t-this.minX),n=this.maxX-(t-this.maxX),i=this._getNewMinXMaxX(r,n);e.globals.disableZoomOut||this.zoomUpdateOptions(i.minX,i.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,t){var r=this.w.config.xaxis.convertedCatToNumeric;return{minX:r?Math.floor(e):e,maxX:r?Math.floor(t):t}}},{key:"zoomUpdateOptions",value:function(e,t){var r=this.w;if(void 0!==e||void 0!==t){if(!(r.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=r.globals.dataPoints),t-e<2))){var n={min:e,max:t},i=this.getBeforeZoomRange(n);i&&(n=i.xaxis);var a={xaxis:n},o=x.clone(r.globals.initialConfig.yaxis);r.config.chart.zoom.autoScaleYaxis&&(o=new q(this.ctx).autoScaleY(this.ctx,o,{xaxis:n})),r.config.chart.group||(a.yaxis=o),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(a,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(n,o)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,t){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t})}},{key:"getBeforeZoomRange",value:function(e,t){var r=null;return"function"==typeof this.ev.beforeZoom&&(r=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),r}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout((function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")}),0)}},{key:"handleDownload",value:function(e){var t=this.w,r=new H(this.ctx);switch(e){case"svg":r.exportToSVG(this.ctx);break;case"png":r.exportToPng(this.ctx);break;case"csv":r.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach((function(e){var t=e.w;if(t.globals.lastXAxis.min=void 0,t.globals.lastXAxis.max=void 0,e.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof t.config.chart.events.beforeResetZoom){var r=t.config.chart.events.beforeResetZoom(e,t);r&&e.updateHelpers.revertDefaultAxisMinMax(r)}"function"==typeof t.config.chart.events.zoomed&&e.ctx.toolbar.zoomCallback({min:t.config.xaxis.min,max:t.config.xaxis.max}),t.globals.zoomed=!1;var n=e.ctx.series.emptyCollapsedSeries(x.clone(t.globals.initialSeries));e.updateHelpers._updateSeries(n,t.config.chart.animations.dynamicAnimation.enabled)}))}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),e}(),fe=function(e){h(r,de);var t=m(r);function r(e){var n;return s(this,r),(n=t.call(this,e)).ctx=e,n.w=e.w,n.dragged=!1,n.graphics=new w(n.ctx),n.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],n.clientX=0,n.clientY=0,n.startX=0,n.endX=0,n.dragX=0,n.startY=0,n.endY=0,n.dragY=0,n.moveDirection="none",n}return c(r,[{key:"init",value:function(e){var t=this,r=e.xyRatios,n=this.w,i=this;this.xyRatios=r,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=n.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),n.globals.dom.elGraphical.add(this.zoomRect),n.globals.dom.elGraphical.add(this.selectionRect),"x"===n.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:n.globals.gridWidth,maxY:n.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===n.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:n.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=n.globals.dom.baseEl.querySelector("".concat(n.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach((function(e){t.hoverArea.addEventListener(e,i.svgMouseEvents.bind(i,r),{capture:!1,passive:!0})}))}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(e,t){var r=this.w,n=this,i=this.ctx.toolbar,a=r.globals.zoomEnabled?r.config.chart.zoom.type:r.config.chart.selection.type,o=r.config.chart.toolbar.autoSelected;if(t.shiftKey?(this.shiftWasPressed=!0,i.enableZoomPanFromToolbar("pan"===o?"zoom":"pan")):this.shiftWasPressed&&(i.enableZoomPanFromToolbar(o),this.shiftWasPressed=!1),t.target){var s,l=t.target.classList;if(t.target.parentNode&&null!==t.target.parentNode&&(s=t.target.parentNode.classList),!(l.contains("apexcharts-selection-rect")||l.contains("apexcharts-legend-marker")||l.contains("apexcharts-legend-text")||s&&s.contains("apexcharts-toolbar"))){if(n.clientX="touchmove"===t.type||"touchstart"===t.type?t.touches[0].clientX:"touchend"===t.type?t.changedTouches[0].clientX:t.clientX,n.clientY="touchmove"===t.type||"touchstart"===t.type?t.touches[0].clientY:"touchend"===t.type?t.changedTouches[0].clientY:t.clientY,"mousedown"===t.type&&1===t.which){var c=n.gridRect.getBoundingClientRect();n.startX=n.clientX-c.left,n.startY=n.clientY-c.top,n.dragged=!1,n.w.globals.mousedown=!0}if(("mousemove"===t.type&&1===t.which||"touchmove"===t.type)&&(n.dragged=!0,r.globals.panEnabled?(r.globals.selection=null,n.w.globals.mousedown&&n.panDragging({context:n,zoomtype:a,xyRatios:e})):(n.w.globals.mousedown&&r.globals.zoomEnabled||n.w.globals.mousedown&&r.globals.selectionEnabled)&&(n.selection=n.selectionDrawing({context:n,zoomtype:a}))),"mouseup"===t.type||"touchend"===t.type||"mouseleave"===t.type){var u=n.gridRect.getBoundingClientRect();n.w.globals.mousedown&&(n.endX=n.clientX-u.left,n.endY=n.clientY-u.top,n.dragX=Math.abs(n.endX-n.startX),n.dragY=Math.abs(n.endY-n.startY),(r.globals.zoomEnabled||r.globals.selectionEnabled)&&n.selectionDrawn({context:n,zoomtype:a}),r.globals.panEnabled&&r.config.xaxis.convertedCatToNumeric&&n.delayedPanScrolled()),r.globals.zoomEnabled&&n.hideSelectionRect(this.selectionRect),n.dragged=!1,n.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var e=this.w;if(this.selectionRect){var t=this.selectionRect.node.getBoundingClientRect();t.width>0&&t.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:e.globals.gridWidth,maxY:e.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var e=this.w,t=this.xyRatios;if(!e.globals.zoomEnabled)if(void 0!==e.globals.selection&&null!==e.globals.selection)this.drawSelectionRect(e.globals.selection);else if(void 0!==e.config.chart.selection.xaxis.min&&void 0!==e.config.chart.selection.xaxis.max){var r=(e.config.chart.selection.xaxis.min-e.globals.minX)/t.xRatio,n={x:r,y:0,width:e.globals.gridWidth-(e.globals.maxX-e.config.chart.selection.xaxis.max)/t.xRatio-r,height:e.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(n),this.makeSelectionRectDraggable(),"function"==typeof e.config.chart.events.selection&&e.config.chart.events.selection(this.ctx,{xaxis:{min:e.config.chart.selection.xaxis.min,max:e.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(e){var t=e.x,r=e.y,n=e.width,i=e.height,a=e.translateX,o=void 0===a?0:a,s=e.translateY,l=void 0===s?0:s,c=this.w,u=this.zoomRect,h=this.selectionRect;if(this.dragged||null!==c.globals.selection){var d={transform:"translate("+o+", "+l+")"};c.globals.zoomEnabled&&this.dragged&&(n<0&&(n=1),u.attr({x:t,y:r,width:n,height:i,fill:c.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":c.config.chart.zoom.zoomedArea.fill.opacity,stroke:c.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":c.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":c.config.chart.zoom.zoomedArea.stroke.opacity}),w.setAttrs(u.node,d)),c.globals.selectionEnabled&&(h.attr({x:t,y:r,width:n>0?n:0,height:i>0?i:0,fill:c.config.chart.selection.fill.color,"fill-opacity":c.config.chart.selection.fill.opacity,stroke:c.config.chart.selection.stroke.color,"stroke-width":c.config.chart.selection.stroke.width,"stroke-dasharray":c.config.chart.selection.stroke.dashArray,"stroke-opacity":c.config.chart.selection.stroke.opacity}),w.setAttrs(h.node,d))}}},{key:"hideSelectionRect",value:function(e){e&&e.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(e){var t,r=e.context,n=e.zoomtype,i=this.w,a=r,o=this.gridRect.getBoundingClientRect(),s=a.startX-1,l=a.startY,c=!1,u=!1,h=a.clientX-o.left-s,d=a.clientY-o.top-l;return Math.abs(h+s)>i.globals.gridWidth?h=i.globals.gridWidth-s:a.clientX-o.left<0&&(h=s),s>a.clientX-o.left&&(c=!0,h=Math.abs(h)),l>a.clientY-o.top&&(u=!0,d=Math.abs(d)),t="x"===n?{x:c?s-h:s,y:0,width:h,height:i.globals.gridHeight}:"y"===n?{x:0,y:u?l-d:l,width:i.globals.gridWidth,height:d}:{x:c?s-h:s,y:u?l-d:l,width:h,height:d},a.drawSelectionRect(t),a.selectionDragging("resizing"),t}},{key:"selectionDragging",value:function(e,t){var r=this,n=this.w,i=this.xyRatios,a=this.selectionRect,o=0;"resizing"===e&&(o=30);var s=function(e){return parseFloat(a.node.getAttribute(e))},l={x:s("x"),y:s("y"),width:s("width"),height:s("height")};n.globals.selection=l,"function"==typeof n.config.chart.events.selection&&n.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout((function(){var e=r.gridRect.getBoundingClientRect(),t=a.node.getBoundingClientRect(),o={xaxis:{min:n.globals.xAxisScale.niceMin+(t.left-e.left)*i.xRatio,max:n.globals.xAxisScale.niceMin+(t.right-e.left)*i.xRatio},yaxis:{min:n.globals.yAxisScale[0].niceMin+(e.bottom-t.bottom)*i.yRatio[0],max:n.globals.yAxisScale[0].niceMax-(t.top-e.top)*i.yRatio[0]}};n.config.chart.events.selection(r.ctx,o),n.config.chart.brush.enabled&&void 0!==n.config.chart.events.brushScrolled&&n.config.chart.events.brushScrolled(r.ctx,o)}),o))}},{key:"selectionDrawn",value:function(e){var t=e.context,r=e.zoomtype,n=this.w,i=t,a=this.xyRatios,o=this.ctx.toolbar;if(i.startX>i.endX){var s=i.startX;i.startX=i.endX,i.endX=s}if(i.startY>i.endY){var l=i.startY;i.startY=i.endY,i.endY=l}var c=void 0,u=void 0;n.globals.isRangeBar?(c=n.globals.yAxisScale[0].niceMin+i.startX*a.invertedYRatio,u=n.globals.yAxisScale[0].niceMin+i.endX*a.invertedYRatio):(c=n.globals.xAxisScale.niceMin+i.startX*a.xRatio,u=n.globals.xAxisScale.niceMin+i.endX*a.xRatio);var h=[],d=[];if(n.config.yaxis.forEach((function(e,t){h.push(n.globals.yAxisScale[t].niceMax-a.yRatio[t]*i.startY),d.push(n.globals.yAxisScale[t].niceMax-a.yRatio[t]*i.endY)})),i.dragged&&(i.dragX>10||i.dragY>10)&&c!==u)if(n.globals.zoomEnabled){var f=x.clone(n.globals.initialConfig.yaxis),p=x.clone(n.globals.initialConfig.xaxis);if(n.globals.zoomed=!0,n.config.xaxis.convertedCatToNumeric&&(c=Math.floor(c),u=Math.floor(u),c<1&&(c=1,u=n.globals.dataPoints),u-c<2&&(u=c+1)),"xy"!==r&&"x"!==r||(p={min:c,max:u}),"xy"!==r&&"y"!==r||f.forEach((function(e,t){f[t].min=d[t],f[t].max=h[t]})),n.config.chart.zoom.autoScaleYaxis){var m=new q(i.ctx);f=m.autoScaleY(i.ctx,f,{xaxis:p})}if(o){var v=o.getBeforeZoomRange(p,f);v&&(p=v.xaxis?v.xaxis:p,f=v.yaxis?v.yaxis:f)}var g={xaxis:p};n.config.chart.group||(g.yaxis=f),i.ctx.updateHelpers._updateOptions(g,!1,i.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof n.config.chart.events.zoomed&&o.zoomCallback(p,f)}else if(n.globals.selectionEnabled){var y,b=null;y={min:c,max:u},"xy"!==r&&"y"!==r||(b=x.clone(n.config.yaxis)).forEach((function(e,t){b[t].min=d[t],b[t].max=h[t]})),n.globals.selection=i.selection,"function"==typeof n.config.chart.events.selection&&n.config.chart.events.selection(i.ctx,{xaxis:y,yaxis:b})}}},{key:"panDragging",value:function(e){var t=e.context,r=this.w,n=t;if(void 0!==r.globals.lastClientPosition.x){var i=r.globals.lastClientPosition.x-n.clientX,a=r.globals.lastClientPosition.y-n.clientY;Math.abs(i)>Math.abs(a)&&i>0?this.moveDirection="left":Math.abs(i)>Math.abs(a)&&i<0?this.moveDirection="right":Math.abs(a)>Math.abs(i)&&a>0?this.moveDirection="up":Math.abs(a)>Math.abs(i)&&a<0&&(this.moveDirection="down")}r.globals.lastClientPosition={x:n.clientX,y:n.clientY};var o=r.globals.isRangeBar?r.globals.minY:r.globals.minX,s=r.globals.isRangeBar?r.globals.maxY:r.globals.maxX;r.config.xaxis.convertedCatToNumeric||n.panScrolled(o,s)}},{key:"delayedPanScrolled",value:function(){var e=this.w,t=e.globals.minX,r=e.globals.maxX,n=(e.globals.maxX-e.globals.minX)/2;"left"===this.moveDirection?(t=e.globals.minX+n,r=e.globals.maxX+n):"right"===this.moveDirection&&(t=e.globals.minX-n,r=e.globals.maxX-n),t=Math.floor(t),r=Math.floor(r),this.updateScrolledChart({xaxis:{min:t,max:r}},t,r)}},{key:"panScrolled",value:function(e,t){var r=this.w,n=this.xyRatios,i=x.clone(r.globals.initialConfig.yaxis),a=n.xRatio,o=r.globals.minX,s=r.globals.maxX;r.globals.isRangeBar&&(a=n.invertedYRatio,o=r.globals.minY,s=r.globals.maxY),"left"===this.moveDirection?(e=o+r.globals.gridWidth/15*a,t=s+r.globals.gridWidth/15*a):"right"===this.moveDirection&&(e=o-r.globals.gridWidth/15*a,t=s-r.globals.gridWidth/15*a),r.globals.isRangeBar||(e<r.globals.initialMinX||t>r.globals.initialMaxX)&&(e=o,t=s);var l={min:e,max:t};r.config.chart.zoom.autoScaleYaxis&&(i=new q(this.ctx).autoScaleY(this.ctx,i,{xaxis:l}));var c={xaxis:{min:e,max:t}};r.config.chart.group||(c.yaxis=i),this.updateScrolledChart(c,e,t)}},{key:"updateScrolledChart",value:function(e,t,r){var n=this.w;this.ctx.updateHelpers._updateOptions(e,!1,!1),"function"==typeof n.config.chart.events.scrolled&&n.config.chart.events.scrolled(this.ctx,{xaxis:{min:t,max:r}})}}]),r}(),pe=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx}return c(e,[{key:"getNearestValues",value:function(e){var t=e.hoverArea,r=e.elGrid,n=e.clientX,i=e.clientY,a=this.w,o=r.getBoundingClientRect(),s=o.width,l=o.height,c=s/(a.globals.dataPoints-1),u=l/a.globals.dataPoints,h=this.hasBars();!a.globals.comboCharts&&!h||a.config.xaxis.convertedCatToNumeric||(c=s/a.globals.dataPoints);var d=n-o.left-a.globals.barPadForNumericAxis,f=i-o.top;d<0||f<0||d>s||f>l?(t.classList.remove("hovering-zoom"),t.classList.remove("hovering-pan")):a.globals.zoomEnabled?(t.classList.remove("hovering-pan"),t.classList.add("hovering-zoom")):a.globals.panEnabled&&(t.classList.remove("hovering-zoom"),t.classList.add("hovering-pan"));var p=Math.round(d/c),m=Math.floor(f/u);h&&!a.config.xaxis.convertedCatToNumeric&&(p=Math.ceil(d/c),p-=1);var v=null,g=null,y=[],b=[];if(a.globals.seriesXvalues.forEach((function(e){y.push([e[0]+1e-6].concat(e))})),a.globals.seriesYvalues.forEach((function(e){b.push([e[0]+1e-6].concat(e))})),y=y.map((function(e){return e.filter((function(e){return x.isNumber(e)}))})),b=b.map((function(e){return e.filter((function(e){return x.isNumber(e)}))})),a.globals.isXNumeric){var _=this.ttCtx.getElGrid().getBoundingClientRect(),w=d*(_.width/s),k=f*(_.height/l);v=(g=this.closestInMultiArray(w,k,y,b)).index,p=g.j,null!==v&&(y=a.globals.seriesXvalues[v],p=(g=this.closestInArray(w,y)).index)}return a.globals.capturedSeriesIndex=null===v?-1:v,(!p||p<1)&&(p=0),a.globals.isBarHorizontal?a.globals.capturedDataPointIndex=m:a.globals.capturedDataPointIndex=p,{capturedSeries:v,j:a.globals.isBarHorizontal?m:p,hoverX:d,hoverY:f}}},{key:"closestInMultiArray",value:function(e,t,r,n){var i=this.w,a=0,o=null,s=-1;i.globals.series.length>1?a=this.getFirstActiveXArray(r):o=0;var l=r[a][0],c=Math.abs(e-l);if(r.forEach((function(t){t.forEach((function(t,r){var n=Math.abs(e-t);n<c&&(c=n,s=r)}))})),-1!==s){var u=n[a][s],h=Math.abs(t-u);o=a,n.forEach((function(e,r){var n=Math.abs(t-e[s]);n<h&&(h=n,o=r)}))}return{index:o,j:s}}},{key:"getFirstActiveXArray",value:function(e){for(var t=this.w,r=0,n=e.map((function(e,t){return e.length>0?t:-1})),i=0;i<n.length;i++)if(-1!==n[i]&&-1===t.globals.collapsedSeriesIndices.indexOf(i)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(i)){r=n[i];break}return r}},{key:"closestInArray",value:function(e,t){for(var r=t[0],n=null,i=Math.abs(e-r),a=0;a<t.length;a++){var o=Math.abs(e-t[a]);o<i&&(i=o,n=a)}return{index:n}}},{key:"isXoverlap",value:function(e){var t=[],r=this.w.globals.seriesX.filter((function(e){return void 0!==e[0]}));if(r.length>0)for(var n=0;n<r.length-1;n++)void 0!==r[n][e]&&void 0!==r[n+1][e]&&r[n][e]!==r[n+1][e]&&t.push("unEqual");return 0===t.length}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,t=this.w.globals.initialSeries,r=0;r<t.length-1;r++)if(t[r].data.length!==t[r+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return v(e).reduce((function(e,t){return e+t.getBBox().height}),0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(e=v(e)).sort((function(e,t){var r=Number(e.getAttribute("data:realIndex")),n=Number(t.getAttribute("data:realIndex"));return n<r?1:n>r?-1:0}));var t=[];return e.forEach((function(e){t.push(e.querySelector(".apexcharts-marker"))})),t}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var t=this.w,r=t.config.markers.hover.size;return void 0===r&&(r=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),r}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var t=this.w,r=this.ttCtx;0===r.allTooltipSeriesGroups.length&&(r.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var n=r.allTooltipSeriesGroups,i=0;i<n.length;i++)"enable"===e?(n[i].classList.add("apexcharts-active"),n[i].style.display=t.config.tooltip.items.display):(n[i].classList.remove("apexcharts-active"),n[i].style.display="none")}}]),e}(),me=function(){function e(t){s(this,e),this.w=t.w,this.ctx=t.ctx,this.ttCtx=t,this.tooltipUtil=new pe(t)}return c(e,[{key:"drawSeriesTexts",value:function(e){var t=e.shared,r=void 0===t||t,n=e.ttItems,i=e.i,a=void 0===i?0:i,o=e.j,s=void 0===o?null:o,l=e.y1,c=e.y2,u=e.e,h=this.w;void 0!==h.config.tooltip.custom?this.handleCustomTooltip({i:a,j:s,y1:l,y2:c,w:h}):this.toggleActiveInactiveSeries(r);var d=this.getValuesToPrint({i:a,j:s});this.printLabels({i:a,j:s,values:d,ttItems:n,shared:r,e:u});var f=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=f.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=f.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var t,r=this,n=e.i,i=e.j,o=e.values,s=e.ttItems,l=e.shared,c=e.e,u=this.w,h=[],d=function(e){return u.globals.seriesGoals[e]&&u.globals.seriesGoals[e][i]&&Array.isArray(u.globals.seriesGoals[e][i])},f=o.xVal,p=o.zVal,m=o.xAxisTTVal,v="",g=u.globals.colors[n];null!==i&&u.config.plotOptions.bar.distributed&&(g=u.globals.colors[i]);for(var y=function(e,o){var y=r.getFormatters(n);v=r.getSeriesName({fn:y.yLbTitleFormatter,index:n,seriesIndex:n,j:i}),"treemap"===u.config.chart.type&&(v=y.yLbTitleFormatter(String(u.config.series[n].data[i].x),{series:u.globals.series,seriesIndex:n,dataPointIndex:i,w:u}));var x=u.config.tooltip.inverseOrder?o:e;if(u.globals.axisCharts){var b=function(e){return y.yLbFormatter(u.globals.series[e][i],{series:u.globals.series,seriesIndex:e,dataPointIndex:i,w:u})};if(l)y=r.getFormatters(x),v=r.getSeriesName({fn:y.yLbTitleFormatter,index:x,seriesIndex:n,j:i}),g=u.globals.colors[x],t=b(x),d(x)&&(h=u.globals.seriesGoals[x][i].map((function(e){return{attrs:e,val:y.yLbFormatter(e.value,{seriesIndex:x,dataPointIndex:i,w:u})}})));else{var _,w=null==c||null===(_=c.target)||void 0===_?void 0:_.getAttribute("fill");w&&(g=-1!==w.indexOf("url")?document.querySelector(w.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):w),t=b(n),d(n)&&Array.isArray(u.globals.seriesGoals[n][i])&&(h=u.globals.seriesGoals[n][i].map((function(e){return{attrs:e,val:y.yLbFormatter(e.value,{seriesIndex:n,dataPointIndex:i,w:u})}})))}}null===i&&(t=y.yLbFormatter(u.globals.series[n],a(a({},u),{},{seriesIndex:n,dataPointIndex:n}))),r.DOMHandling({i:n,t:x,j:i,ttItems:s,values:{val:t,goalVals:h,xVal:f,xAxisTTVal:m,zVal:p},seriesName:v,shared:l,pColor:g})},x=0,b=u.globals.series.length-1;x<u.globals.series.length;x++,b--)y(x,b)}},{key:"getFormatters",value:function(e){var t,r=this.w,n=r.globals.yLabelFormatters[e];return void 0!==r.globals.ttVal?Array.isArray(r.globals.ttVal)?(n=r.globals.ttVal[e]&&r.globals.ttVal[e].formatter,t=r.globals.ttVal[e]&&r.globals.ttVal[e].title&&r.globals.ttVal[e].title.formatter):(n=r.globals.ttVal.formatter,"function"==typeof r.globals.ttVal.title.formatter&&(t=r.globals.ttVal.title.formatter)):t=r.config.tooltip.y.title.formatter,"function"!=typeof n&&(n=r.globals.yLabelFormatters[0]?r.globals.yLabelFormatters[0]:function(e){return e}),"function"!=typeof t&&(t=function(e){return e}),{yLbFormatter:n,yLbTitleFormatter:t}}},{key:"getSeriesName",value:function(e){var t=e.fn,r=e.index,n=e.seriesIndex,i=e.j,a=this.w;return t(String(a.globals.seriesNames[r]),{series:a.globals.series,seriesIndex:n,dataPointIndex:i,w:a})}},{key:"DOMHandling",value:function(e){e.i;var t=e.t,r=e.j,n=e.ttItems,i=e.values,a=e.seriesName,o=e.shared,s=e.pColor,l=this.w,c=this.ttCtx,u=i.val,h=i.goalVals,d=i.xVal,f=i.xAxisTTVal,p=i.zVal,m=null;m=n[t].children,l.config.tooltip.fillSeriesColor&&(n[t].style.backgroundColor=s,m[0].style.display="none"),c.showTooltipTitle&&(null===c.tooltipTitle&&(c.tooltipTitle=l.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),c.tooltipTitle.innerHTML=d),c.isXAxisTooltipEnabled&&(c.xaxisTooltipText.innerHTML=""!==f?f:d);var v=n[t].querySelector(".apexcharts-tooltip-text-y-label");v&&(v.innerHTML=a||"");var g=n[t].querySelector(".apexcharts-tooltip-text-y-value");g&&(g.innerHTML=void 0!==u?u:""),m[0]&&m[0].classList.contains("apexcharts-tooltip-marker")&&(l.config.tooltip.marker.fillColors&&Array.isArray(l.config.tooltip.marker.fillColors)&&(s=l.config.tooltip.marker.fillColors[t]),m[0].style.backgroundColor=s),l.config.tooltip.marker.show||(m[0].style.display="none");var y=n[t].querySelector(".apexcharts-tooltip-text-goals-label"),x=n[t].querySelector(".apexcharts-tooltip-text-goals-value");if(h.length&&l.globals.seriesGoals[t]){var b=function(){var e="<div >",t="<div>";h.forEach((function(r,n){e+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(r.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(r.attrs.name,"</div>"),t+="<div>".concat(r.val,"</div>")})),y.innerHTML=e+"</div>",x.innerHTML=t+"</div>"};o?l.globals.seriesGoals[t][r]&&Array.isArray(l.globals.seriesGoals[t][r])?b():(y.innerHTML="",x.innerHTML=""):b()}else y.innerHTML="",x.innerHTML="";null!==p&&(n[t].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=l.config.tooltip.z.title,n[t].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==p?p:""),o&&m[0]&&(null==u||l.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||l.globals.collapsedSeriesIndices.indexOf(t)>-1?m[0].parentNode.style.display="none":m[0].parentNode.style.display=l.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(e){var t=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var r=t.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");r&&(r.classList.add("apexcharts-active"),r.style.display=t.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var t=e.i,r=e.j,n=this.w,i=this.ctx.series.filteredSeriesX(),a="",o="",s=null,l=null,c={series:n.globals.series,seriesIndex:t,dataPointIndex:r,w:n},u=n.globals.ttZFormatter;null===r?l=n.globals.series[t]:n.globals.isXNumeric&&"treemap"!==n.config.chart.type?(a=i[t][r],0===i[t].length&&(a=i[this.tooltipUtil.getFirstActiveXArray(i)][r])):a=void 0!==n.globals.labels[r]?n.globals.labels[r]:"";var h=a;return a=n.globals.isXNumeric&&"datetime"===n.config.xaxis.type?new W(this.ctx).xLabelFormat(n.globals.ttKeyFormatter,h,h,{i:void 0,dateFormatter:new P(this.ctx).formatDate,w:this.w}):n.globals.isBarHorizontal?n.globals.yLabelFormatters[0](h,c):n.globals.xLabelFormatter(h,c),void 0!==n.config.tooltip.x.formatter&&(a=n.globals.ttKeyFormatter(h,c)),n.globals.seriesZ.length>0&&n.globals.seriesZ[t].length>0&&(s=u(n.globals.seriesZ[t][r],n)),o="function"==typeof n.config.xaxis.tooltip.formatter?n.globals.xaxisTooltipFormatter(h,c):a,{val:Array.isArray(l)?l.join(" "):l,xVal:Array.isArray(a)?a.join(" "):a,xAxisTTVal:Array.isArray(o)?o.join(" "):o,zVal:s}}},{key:"handleCustomTooltip",value:function(e){var t=e.i,r=e.j,n=e.y1,i=e.y2,a=e.w,o=this.ttCtx.getElTooltip(),s=a.config.tooltip.custom;Array.isArray(s)&&s[t]&&(s=s[t]),o.innerHTML=s({ctx:this.ctx,series:a.globals.series,seriesIndex:t,dataPointIndex:r,y1:n,y2:i,w:a})}}]),e}(),ve=function(){function e(t){s(this,e),this.ttCtx=t,this.ctx=t.ctx,this.w=t.w}return c(e,[{key:"moveXCrosshairs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.ttCtx,n=this.w,i=r.getElXCrosshairs(),a=e-r.xcrosshairsWidth/2,o=n.globals.labels.slice().length;if(null!==t&&(a=n.globals.gridWidth/o*t),null===i||n.globals.isBarHorizontal||(i.setAttribute("x",a),i.setAttribute("x1",a),i.setAttribute("x2",a),i.setAttribute("y2",n.globals.gridHeight),i.classList.add("apexcharts-active")),a<0&&(a=0),a>n.globals.gridWidth&&(a=n.globals.gridWidth),r.isXAxisTooltipEnabled){var s=a;"tickWidth"!==n.config.xaxis.crosshairs.width&&"barWidth"!==n.config.xaxis.crosshairs.width||(s=a+r.xcrosshairsWidth/2),this.moveXAxisTooltip(s)}}},{key:"moveYCrosshairs",value:function(e){var t=this.ttCtx;null!==t.ycrosshairs&&w.setAttrs(t.ycrosshairs,{y1:e,y2:e}),null!==t.ycrosshairsHidden&&w.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var t=this.w,r=this.ttCtx;if(null!==r.xaxisTooltip&&0!==r.xcrosshairsWidth){r.xaxisTooltip.classList.add("apexcharts-active");var n,i=r.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY;if(e-=r.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e))e+=t.globals.translateX,n=new w(this.ctx).getTextRects(r.xaxisTooltipText.innerHTML),r.xaxisTooltipText.style.minWidth=n.width+"px",r.xaxisTooltip.style.left=e+"px",r.xaxisTooltip.style.top=i+"px"}}},{key:"moveYAxisTooltip",value:function(e){var t=this.w,r=this.ttCtx;null===r.yaxisTTEls&&(r.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var n=parseInt(r.ycrosshairsHidden.getAttribute("y1"),10),i=t.globals.translateY+n,a=r.yaxisTTEls[e].getBoundingClientRect().height,o=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(o-=26),i-=a/2,-1===t.globals.ignoreYAxisIndexes.indexOf(e)?(r.yaxisTTEls[e].classList.add("apexcharts-active"),r.yaxisTTEls[e].style.top=i+"px",r.yaxisTTEls[e].style.left=o+t.config.yaxis[e].tooltip.offsetX+"px"):r.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.w,i=this.ttCtx,a=i.getElTooltip(),o=i.tooltipRect,s=null!==r?parseFloat(r):1,l=parseFloat(e)+s+5,c=parseFloat(t)+s/2;if(l>n.globals.gridWidth/2&&(l=l-o.ttWidth-s-10),l>n.globals.gridWidth-o.ttWidth-10&&(l=n.globals.gridWidth-o.ttWidth),l<-20&&(l=-20),n.config.tooltip.followCursor){var u=i.getElGrid(),h=u.getBoundingClientRect();c=i.e.clientY+n.globals.translateY-h.top-o.ttHeight/2}else n.globals.isBarHorizontal||(o.ttHeight/2+c>n.globals.gridHeight&&(c=n.globals.gridHeight-o.ttHeight+n.globals.translateY),c<0&&(c=0));isNaN(l)||(l+=n.globals.translateX,a.style.left=l+"px",a.style.top=c+"px")}},{key:"moveMarkers",value:function(e,t){var r=this.w,n=this.ttCtx;if(r.globals.markers.size[e]>0)for(var i=r.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),a=0;a<i.length;a++)parseInt(i[a].getAttribute("rel"),10)===t&&(n.marker.resetPointsSize(),n.marker.enlargeCurrentPoint(t,i[a]));else n.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}},{key:"moveDynamicPointOnHover",value:function(e,t){var r,n,i=this.w,a=this.ttCtx,o=i.globals.pointsArray,s=a.tooltipUtil.getHoverMarkerSize(t),l=i.config.series[t].type;if(!l||"column"!==l&&"candlestick"!==l&&"boxPlot"!==l){r=o[t][e][0],n=o[t][e][1]?o[t][e][1]:0;var c=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers circle"));c&&n<i.globals.gridHeight&&n>0&&(c.setAttribute("r",s),c.setAttribute("cx",r),c.setAttribute("cy",n)),this.moveXCrosshairs(r),a.fixedTooltip||this.moveTooltip(r,n,s)}}},{key:"moveDynamicPointsOnHover",value:function(e){var t,r=this.ttCtx,n=r.w,i=0,a=0,o=n.globals.pointsArray;t=new U(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var s=r.tooltipUtil.getHoverMarkerSize(t);o[t]&&(i=o[t][e][0],a=o[t][e][1]);var l=r.tooltipUtil.getAllMarkers();if(null!==l)for(var c=0;c<n.globals.series.length;c++){var u=o[c];if(n.globals.comboCharts&&void 0===u&&l.splice(c,0,null),u&&u.length){var h=o[c][e][1],d=void 0;if(l[c].setAttribute("cx",i),"rangeArea"===n.config.chart.type&&!n.globals.comboCharts){var f=e+n.globals.series[c].length;d=o[c][f][1],h-=Math.abs(h-d)/2}null!==h&&!isNaN(h)&&h<n.globals.gridHeight+s&&h+s>0?(l[c]&&l[c].setAttribute("r",s),l[c]&&l[c].setAttribute("cy",h)):l[c]&&l[c].setAttribute("r",0)}}if(this.moveXCrosshairs(i),!r.fixedTooltip){var p=a||n.globals.gridHeight;this.moveTooltip(i,p,s)}}},{key:"moveStickyTooltipOverBars",value:function(e){var t=this.w,r=this.ttCtx,n=t.globals.columnSeries?t.globals.columnSeries.length:t.globals.series.length,i=n>=2&&n%2==0?Math.floor(n/2):Math.floor(n/2)+1;t.globals.isBarHorizontal&&(i=new U(this.ctx).getActiveConfigSeriesIndex("desc")+1);var a=t.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(i,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(i,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(i,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(i,"'] path[j='").concat(e,"']")),o=a?parseFloat(a.getAttribute("cx")):0,s=a?parseFloat(a.getAttribute("cy")):0,l=a?parseFloat(a.getAttribute("barWidth")):0,c=a?parseFloat(a.getAttribute("barHeight")):0,u=r.getElGrid().getBoundingClientRect(),h=a.classList.contains("apexcharts-candlestick-area")||a.classList.contains("apexcharts-boxPlot-area");if(t.globals.isXNumeric?(a&&!h&&(o-=n%2!=0?l/2:0),a&&h&&t.globals.comboCharts&&(o-=l/2)):t.globals.isBarHorizontal||(o=r.xAxisTicksPositions[e-1]+r.dataPointsDividedWidth/2,isNaN(o)&&(o=r.xAxisTicksPositions[e]-r.dataPointsDividedWidth/2)),t.globals.isBarHorizontal?(s>t.globals.gridHeight/2&&(s-=r.tooltipRect.ttHeight),(s=s+t.config.grid.padding.top+c/3)+c>t.globals.gridHeight&&(s=t.globals.gridHeight-c)):t.config.tooltip.followCursor?s=r.e.clientY-u.top-r.tooltipRect.ttHeight/2:s+r.tooltipRect.ttHeight+15>t.globals.gridHeight&&(s=t.globals.gridHeight),s<-10&&(s=-10),t.globals.isBarHorizontal||this.moveXCrosshairs(o),!r.fixedTooltip){var d=s||t.globals.gridHeight;this.moveTooltip(o,d)}}}]),e}(),ge=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx,this.tooltipPosition=new ve(t)}return c(e,[{key:"drawDynamicPoints",value:function(){var e=this.w,t=new w(this.ctx),r=new N(this.ctx),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");n=v(n),e.config.chart.stacked&&n.sort((function(e,t){return parseFloat(e.getAttribute("data:realIndex"))-parseFloat(t.getAttribute("data:realIndex"))}));for(var i=0;i<n.length;i++){var a=n[i].querySelector(".apexcharts-series-markers-wrap");if(null!==a){var o=void 0,s="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==e.config.chart.type&&"area"!==e.config.chart.type||e.globals.comboCharts||e.config.tooltip.intersect||(s+=" no-pointer-events");var l=r.getMarkerConfig({cssClass:s,seriesIndex:Number(a.getAttribute("data:realIndex"))});(o=t.drawMarker(0,0,l)).node.setAttribute("default-marker-size",0);var c=document.createElementNS(e.globals.SVGNS,"g");c.classList.add("apexcharts-series-markers"),c.appendChild(o.node),a.appendChild(c)}}}},{key:"enlargeCurrentPoint",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=this.w;"bubble"!==i.config.chart.type&&this.newPointSize(e,t);var a=t.getAttribute("cx"),o=t.getAttribute("cy");if(null!==r&&null!==n&&(a=r,o=n),this.tooltipPosition.moveXCrosshairs(a),!this.fixedTooltip){if("radar"===i.config.chart.type){var s=this.ttCtx.getElGrid(),l=s.getBoundingClientRect();a=this.ttCtx.e.clientX-l.left}this.tooltipPosition.moveTooltip(a,o,i.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var t=this.w,r=this,n=this.ttCtx,i=e,a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),o=t.config.markers.hover.size,s=0;s<a.length;s++){var l=a[s].getAttribute("rel"),c=a[s].getAttribute("index");if(void 0===o&&(o=t.globals.markers.size[c]+t.config.markers.hover.sizeOffset),i===parseInt(l,10)){r.newPointSize(i,a[s]);var u=a[s].getAttribute("cx"),h=a[s].getAttribute("cy");r.tooltipPosition.moveXCrosshairs(u),n.fixedTooltip||r.tooltipPosition.moveTooltip(u,h,o)}else r.oldPointSize(a[s])}}},{key:"newPointSize",value:function(e,t){var r=this.w,n=r.config.markers.hover.size,i=0===e?t.parentNode.firstChild:t.parentNode.lastChild;if("0"!==i.getAttribute("default-marker-size")){var a=parseInt(i.getAttribute("index"),10);void 0===n&&(n=r.globals.markers.size[a]+r.config.markers.hover.sizeOffset),n<0&&(n=0),i.setAttribute("r",n)}}},{key:"oldPointSize",value:function(e){var t=parseFloat(e.getAttribute("default-marker-size"));e.setAttribute("r",t)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),t=0;t<e.length;t++){var r=parseFloat(e[t].getAttribute("default-marker-size"));x.isNumber(r)&&r>=0?e[t].setAttribute("r",r):e[t].setAttribute("r",0)}}}]),e}(),ye=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t}return c(e,[{key:"getAttr",value:function(e,t){return parseFloat(e.target.getAttribute(t))}},{key:"handleHeatTreeTooltip",value:function(e){var t=e.e,r=e.opt,n=e.x,i=e.y,a=e.type,o=this.ttCtx,s=this.w;if(t.target.classList.contains("apexcharts-".concat(a,"-rect"))){var l=this.getAttr(t,"i"),c=this.getAttr(t,"j"),u=this.getAttr(t,"cx"),h=this.getAttr(t,"cy"),d=this.getAttr(t,"width"),f=this.getAttr(t,"height");if(o.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:l,j:c,shared:!1,e:t}),s.globals.capturedSeriesIndex=l,s.globals.capturedDataPointIndex=c,n=u+o.tooltipRect.ttWidth/2+d,i=h+o.tooltipRect.ttHeight/2-f/2,o.tooltipPosition.moveXCrosshairs(u+d/2),n>s.globals.gridWidth/2&&(n=u-o.tooltipRect.ttWidth/2+d),o.w.config.tooltip.followCursor){var p=s.globals.dom.elWrap.getBoundingClientRect();n=s.globals.clientX-p.left-(n>s.globals.gridWidth/2?o.tooltipRect.ttWidth:0),i=s.globals.clientY-p.top-(i>s.globals.gridHeight/2?o.tooltipRect.ttHeight:0)}}return{x:n,y:i}}},{key:"handleMarkerTooltip",value:function(e){var t,r,n=e.e,i=e.opt,a=e.x,o=e.y,s=this.w,l=this.ttCtx;if(n.target.classList.contains("apexcharts-marker")){var c=parseInt(i.paths.getAttribute("cx"),10),u=parseInt(i.paths.getAttribute("cy"),10),h=parseFloat(i.paths.getAttribute("val"));if(r=parseInt(i.paths.getAttribute("rel"),10),t=parseInt(i.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,l.intersect){var d=x.findAncestor(i.paths,"apexcharts-series");d&&(t=parseInt(d.getAttribute("data:realIndex"),10))}if(l.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:t,j:r,shared:!l.showOnIntersect&&s.config.tooltip.shared,e:n}),"mouseup"===n.type&&l.markerClick(n,t,r),s.globals.capturedSeriesIndex=t,s.globals.capturedDataPointIndex=r,a=c,o=u+s.globals.translateY-1.4*l.tooltipRect.ttHeight,l.w.config.tooltip.followCursor){var f=l.getElGrid().getBoundingClientRect();o=l.e.clientY+s.globals.translateY-f.top}h<0&&(o=u),l.marker.enlargeCurrentPoint(r,i.paths,a,o)}return{x:a,y:o}}},{key:"handleBarTooltip",value:function(e){var t,r,n=e.e,i=e.opt,a=this.w,o=this.ttCtx,s=o.getElTooltip(),l=0,c=0,u=0,h=this.getBarTooltipXY({e:n,opt:i});t=h.i;var d=h.barHeight,f=h.j;a.globals.capturedSeriesIndex=t,a.globals.capturedDataPointIndex=f,a.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||!a.config.tooltip.shared?(c=h.x,u=h.y,r=Array.isArray(a.config.stroke.width)?a.config.stroke.width[t]:a.config.stroke.width,l=c):a.globals.comboCharts||a.config.tooltip.shared||(l/=2),isNaN(u)?u=a.globals.svgHeight-o.tooltipRect.ttHeight:u<0&&(u=0);var p=parseInt(i.paths.parentNode.getAttribute("data:realIndex"),10),m=a.globals.isMultipleYAxis?a.config.yaxis[p]&&a.config.yaxis[p].reversed:a.config.yaxis[0].reversed;if(c+o.tooltipRect.ttWidth>a.globals.gridWidth&&!m?c-=o.tooltipRect.ttWidth:c<0&&(c=0),o.w.config.tooltip.followCursor){var v=o.getElGrid().getBoundingClientRect();u=o.e.clientY-v.top}null===o.tooltip&&(o.tooltip=a.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),a.config.tooltip.shared||(a.globals.comboBarCount>0?o.tooltipPosition.moveXCrosshairs(l+r/2):o.tooltipPosition.moveXCrosshairs(l)),!o.fixedTooltip&&(!a.config.tooltip.shared||a.globals.isBarHorizontal&&o.tooltipUtil.hasBars())&&(m&&(c-=o.tooltipRect.ttWidth)<0&&(c=0),!m||a.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||(u=u+d-2*(a.globals.series[t][f]<0?d:0)),o.tooltipRect.ttHeight+u>a.globals.gridHeight?u=a.globals.gridHeight-o.tooltipRect.ttHeight+a.globals.translateY:(u=u+a.globals.translateY-o.tooltipRect.ttHeight/2)<0&&(u=0),s.style.left=c+a.globals.translateX+"px",s.style.top=u+"px")}},{key:"getBarTooltipXY",value:function(e){var t=e.e,r=e.opt,n=this.w,i=null,a=this.ttCtx,o=0,s=0,l=0,c=0,u=0,h=t.target.classList;if(h.contains("apexcharts-bar-area")||h.contains("apexcharts-candlestick-area")||h.contains("apexcharts-boxPlot-area")||h.contains("apexcharts-rangebar-area")){var d=t.target,f=d.getBoundingClientRect(),p=r.elGrid.getBoundingClientRect(),m=f.height;u=f.height;var v=f.width,g=parseInt(d.getAttribute("cx"),10),y=parseInt(d.getAttribute("cy"),10);c=parseFloat(d.getAttribute("barWidth"));var x="touchmove"===t.type?t.touches[0].clientX:t.clientX;i=parseInt(d.getAttribute("j"),10),o=parseInt(d.parentNode.getAttribute("rel"),10)-1;var b=d.getAttribute("data-range-y1"),_=d.getAttribute("data-range-y2");n.globals.comboCharts&&(o=parseInt(d.parentNode.getAttribute("data:realIndex"),10)),a.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:o,j:i,y1:b?parseInt(b,10):null,y2:_?parseInt(_,10):null,shared:!a.showOnIntersect&&n.config.tooltip.shared,e:t}),n.config.tooltip.followCursor?n.globals.isBarHorizontal?(s=x-p.left+15,l=y-a.dataPointsDividedHeight+m/2-a.tooltipRect.ttHeight/2):(s=n.globals.isXNumeric?g-v/2:g-a.dataPointsDividedWidth+v/2,l=t.clientY-p.top-a.tooltipRect.ttHeight/2-15):n.globals.isBarHorizontal?((s=g)<a.xyRatios.baseLineInvertedY&&(s=g-a.tooltipRect.ttWidth),l=y-a.dataPointsDividedHeight+m/2-a.tooltipRect.ttHeight/2):(s=n.globals.isXNumeric?g-v/2:g-a.dataPointsDividedWidth+v/2,l=y)}return{x:s,y:l,barHeight:u,barWidth:c,i:o,j:i}}}]),e}(),xe=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t}return c(e,[{key:"drawXaxisTooltip",value:function(){var e=this.w,t=this.ttCtx,r="bottom"===e.config.xaxis.position;t.xaxisOffY=r?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var n=r?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",i=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&null===e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+e.config.tooltip.theme),i.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,t=this.ttCtx,r=function(r){var n=e.config.yaxis[r].opposite||e.config.yaxis[r].crosshairs.opposite;t.yaxisOffX=n?e.globals.gridWidth+1:1;var i="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(r,n?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");e.globals.yAxisSameScaleIndices.map((function(t,n){t.map((function(t,n){n===r&&(i+=e.config.yaxis[n].show?" ":" apexcharts-yaxistooltip-hidden")}))}));var a=e.globals.dom.elWrap;null===e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(r))&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",i+" apexcharts-theme-"+e.config.tooltip.theme),a.appendChild(t.yaxisTooltip),0===r&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[r]=document.createElement("div"),t.yaxisTooltipText[r].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[r]))},n=0;n<e.config.yaxis.length;n++)r(n)}},{key:"setXCrosshairWidth",value:function(){var e=this.w,t=this.ttCtx,r=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var n=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==n&&"barWidth"===e.config.xaxis.crosshairs.width){var i=parseFloat(n.getAttribute("barWidth"));t.xcrosshairsWidth=i}else if("tickWidth"===e.config.xaxis.crosshairs.width){var a=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/a}}else if("tickWidth"===e.config.xaxis.crosshairs.width){var o=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/o}else if("barWidth"===e.config.xaxis.crosshairs.width){var s=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==s){var l=parseFloat(s.getAttribute("barWidth"));t.xcrosshairsWidth=l}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),null!==r&&t.xcrosshairsWidth>0&&r.setAttribute("width",t.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,t,r){var n=this.ttCtx,i=this.w,a=i.globals.yLabelFormatters[e];if(n.yaxisTooltips[e]){var o=n.getElGrid().getBoundingClientRect(),s=(t-o.top)*r.yRatio[e],l=i.globals.maxYArr[e]-i.globals.minYArr[e],c=i.globals.minYArr[e]+(l-s);n.tooltipPosition.moveYCrosshairs(t-o.top),n.yaxisTooltipText[e].innerHTML=a(c),n.tooltipPosition.moveYAxisTooltip(e)}}}]),e}(),be=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var r=this.w;this.tConfig=r.config.tooltip,this.tooltipUtil=new pe(this),this.tooltipLabels=new me(this),this.tooltipPosition=new ve(this),this.marker=new ge(this),this.intersect=new ye(this),this.axesTooltip=new xe(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!r.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return c(e,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map((function(e,r){return!!(e.show&&e.tooltip.enabled&&t.globals.axisCharts)})),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);var r=document.createElement("div");if(r.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&r.classList.add(t.config.tooltip.cssClass),r.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),t.globals.dom.elWrap.appendChild(r),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var n=new X(this.ctx);this.xAxisTicksPositions=n.getXAxisTicksPositions()}if(!t.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==t.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==t.config.markers.size&&0!==t.globals.markers.largestSize||this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length!==t.globals.series.length){this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,r.appendChild(this.tooltipTitle));var i=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(i=this.showOnIntersect?1:t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(i),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var t=this,r=this.w,n=[],i=this.getElTooltip(),a=function(a){var o=document.createElement("div");o.classList.add("apexcharts-tooltip-series-group"),o.style.order=r.config.tooltip.inverseOrder?e-a:a+1,t.tConfig.shared&&t.tConfig.enabledOnSeries&&Array.isArray(t.tConfig.enabledOnSeries)&&t.tConfig.enabledOnSeries.indexOf(a)<0&&o.classList.add("apexcharts-tooltip-series-group-hidden");var s=document.createElement("span");s.classList.add("apexcharts-tooltip-marker"),s.style.backgroundColor=r.globals.colors[a],o.appendChild(s);var l=document.createElement("div");l.classList.add("apexcharts-tooltip-text"),l.style.fontFamily=t.tConfig.style.fontFamily||r.config.chart.fontFamily,l.style.fontSize=t.tConfig.style.fontSize,["y","goals","z"].forEach((function(e){var t=document.createElement("div");t.classList.add("apexcharts-tooltip-".concat(e,"-group"));var r=document.createElement("span");r.classList.add("apexcharts-tooltip-text-".concat(e,"-label")),t.appendChild(r);var n=document.createElement("span");n.classList.add("apexcharts-tooltip-text-".concat(e,"-value")),t.appendChild(n),l.appendChild(t)})),o.appendChild(l),i.appendChild(o),n.push(o)},o=0;o<e;o++)a(o);return n}},{key:"addSVGEvents",value:function(){var e=this.w,t=e.config.chart.type,r=this.getElTooltip(),n=!("bar"!==t&&"candlestick"!==t&&"boxPlot"!==t&&"rangeBar"!==t),i="area"===t||"line"===t||"scatter"===t||"bubble"===t||"radar"===t,a=e.globals.dom.Paper.node,o=this.getElGrid();o&&(this.seriesBound=o.getBoundingClientRect());var s,l=[],c=[],u={hoverArea:a,elGrid:o,tooltipEl:r,tooltipY:l,tooltipX:c,ttItems:this.ttItems};if(e.globals.axisCharts&&(i?s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):n?s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==t&&"treemap"!==t||(s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),s&&s.length))for(var h=0;h<s.length;h++)l.push(s[h].getAttribute("cy")),c.push(s[h].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||n&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([a],u);else if(n&&!e.globals.comboCharts||i&&this.showOnIntersect)this.addDatapointEventsListeners(u);else if(!e.globals.axisCharts||"heatmap"===t||"treemap"===t){var d=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(d,u)}if(this.showOnIntersect){var f=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");f.length>0&&this.addPathsEventListeners(f,u),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(u)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,t=this.getElTooltip(),r=t.getBoundingClientRect(),n=r.width+10,i=r.height+10,a=this.tConfig.fixed.offsetX,o=this.tConfig.fixed.offsetY,s=this.tConfig.fixed.position.toLowerCase();return s.indexOf("right")>-1&&(a=a+e.globals.svgWidth-n+10),s.indexOf("bottom")>-1&&(o=o+e.globals.svgHeight-i-10),t.style.left=a+"px",t.style.top=o+"px",{x:a,y:o,ttWidth:n,ttHeight:i}}},{key:"addDatapointEventsListeners",value:function(e){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(t,e)}},{key:"addPathsEventListeners",value:function(e,t){for(var r=this,n=function(n){var i={paths:e[n],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map((function(t){return e[n].addEventListener(t,r.onSeriesHover.bind(r,i),{capture:!1,passive:!0})}))},i=0;i<e.length;i++)n(i)}},{key:"onSeriesHover",value:function(e,t){var r=this,n=Date.now()-this.lastHoverTime;n>=100?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout((function(){r.seriesHover(e,t)}),100-n))}},{key:"seriesHover",value:function(e,t){var r=this;this.lastHoverTime=Date.now();var n=[],i=this.w;i.config.chart.group&&(n=this.ctx.getGroupedCharts()),i.globals.axisCharts&&(i.globals.minX===-1/0&&i.globals.maxX===1/0||0===i.globals.dataPoints)||(n.length?n.forEach((function(n){var i=r.getElTooltip(n),a={paths:e.paths,tooltipEl:i,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:n.w.globals.tooltip.ttItems};n.w.globals.minX===r.w.globals.minX&&n.w.globals.maxX===r.w.globals.maxX&&n.w.globals.tooltip.seriesHoverByContext({chartCtx:n,ttCtx:n.w.globals.tooltip,opt:a,e:t})})):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}},{key:"seriesHoverByContext",value:function(e){var t=e.chartCtx,r=e.ttCtx,n=e.opt,i=e.e,a=t.w,o=this.getElTooltip();o&&(r.tooltipRect={x:0,y:0,ttWidth:o.getBoundingClientRect().width,ttHeight:o.getBoundingClientRect().height},r.e=i,!r.tooltipUtil.hasBars()||a.globals.comboCharts||r.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new U(t).toggleSeriesOnHover(i,i.target.parentNode),r.fixedTooltip&&r.drawFixedTooltipRect(),a.globals.axisCharts?r.axisChartsTooltips({e:i,opt:n,tooltipRect:r.tooltipRect}):r.nonAxisChartsTooltips({e:i,opt:n,tooltipRect:r.tooltipRect}))}},{key:"axisChartsTooltips",value:function(e){var t,r,n=e.e,i=e.opt,a=this.w,o=i.elGrid.getBoundingClientRect(),s="touchmove"===n.type?n.touches[0].clientX:n.clientX,l="touchmove"===n.type?n.touches[0].clientY:n.clientY;if(this.clientY=l,this.clientX=s,a.globals.capturedSeriesIndex=-1,a.globals.capturedDataPointIndex=-1,l<o.top||l>o.top+o.height)this.handleMouseOut(i);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!a.config.tooltip.shared){var c=parseInt(i.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(c)<0)return void this.handleMouseOut(i)}var u=this.getElTooltip(),h=this.getElXCrosshairs(),d=a.globals.xyCharts||"bar"===a.config.chart.type&&!a.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||a.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===n.type||"touchmove"===n.type||"mouseup"===n.type){if(a.globals.collapsedSeries.length+a.globals.ancillaryCollapsedSeries.length===a.globals.series.length)return;null!==h&&h.classList.add("apexcharts-active");var f=this.yaxisTooltips.filter((function(e){return!0===e}));if(null!==this.ycrosshairs&&f.length&&this.ycrosshairs.classList.add("apexcharts-active"),d&&!this.showOnIntersect)this.handleStickyTooltip(n,s,l,i);else if("heatmap"===a.config.chart.type||"treemap"===a.config.chart.type){var p=this.intersect.handleHeatTreeTooltip({e:n,opt:i,x:t,y:r,type:a.config.chart.type});t=p.x,r=p.y,u.style.left=t+"px",u.style.top=r+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:n,opt:i}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:n,opt:i,x:t,y:r});if(this.yaxisTooltips.length)for(var m=0;m<a.config.yaxis.length;m++)this.axesTooltip.drawYaxisTooltipText(m,l,this.xyRatios);i.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==n.type&&"touchend"!==n.type||this.handleMouseOut(i)}}},{key:"nonAxisChartsTooltips",value:function(e){var t=e.e,r=e.opt,n=e.tooltipRect,i=this.w,a=r.paths.getAttribute("rel"),o=this.getElTooltip(),s=i.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===t.type||"touchmove"===t.type){o.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:parseInt(a,10)-1,shared:!1});var l=i.globals.clientX-s.left-n.ttWidth/2,c=i.globals.clientY-s.top-n.ttHeight-10;if(o.style.left=l+"px",o.style.top=c+"px",i.config.legend.tooltipHoverFormatter){var u=a-1,h=(0,i.config.legend.tooltipHoverFormatter)(this.legendLabels[u].getAttribute("data:default-text"),{seriesIndex:u,dataPointIndex:u,w:i});this.legendLabels[u].innerHTML=h}}else"mouseout"!==t.type&&"touchend"!==t.type||(o.classList.remove("apexcharts-active"),i.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)})))}},{key:"handleStickyTooltip",value:function(e,t,r,n){var i=this.w,a=this.tooltipUtil.getNearestValues({context:this,hoverArea:n.hoverArea,elGrid:n.elGrid,clientX:t,clientY:r}),o=a.j,s=a.capturedSeries,l=n.elGrid.getBoundingClientRect();a.hoverX<0||a.hoverX>l.width?this.handleMouseOut(n):null!==s?this.handleStickyCapturedSeries(e,s,n,o):(this.tooltipUtil.isXoverlap(o)||i.globals.isBarHorizontal)&&this.create(e,this,0,o,n.ttItems)}},{key:"handleStickyCapturedSeries",value:function(e,t,r,n){var i=this.w;this.tConfig.shared||null!==i.globals.series[t][n]?void 0!==i.globals.series[t][n]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(n)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,n,r.ttItems):this.create(e,this,t,n,r.ttItems,!1):this.tooltipUtil.isXoverlap(n)&&this.create(e,this,0,n,r.ttItems):this.handleMouseOut(r)}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,t=new w(this.ctx),r=e.globals.dom.Paper.select(".apexcharts-bar-area"),n=0;n<r.length;n++)t.pathMouseLeave(r[n])}},{key:"handleMouseOut",value:function(e){var t=this.w,r=this.getElXCrosshairs();if(e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==t.config.chart.type&&this.marker.resetPointsSize(),null!==r&&r.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var n=0;n<this.yaxisTTEls.length;n++)this.yaxisTTEls[n].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)}))}},{key:"markerClick",value:function(e,t,r){var n=this.w;"function"==typeof n.config.chart.events.markerClick&&n.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:r,w:n}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:r,w:n}])}},{key:"create",value:function(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=this.w,s=t;"mouseup"===e.type&&this.markerClick(e,r,n),null===a&&(a=this.tConfig.shared);var l=this.tooltipUtil.hasMarkers(),c=this.tooltipUtil.getElBars();if(o.config.legend.tooltipHoverFormatter){var u=o.config.legend.tooltipHoverFormatter,h=Array.from(this.legendLabels);h.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)}));for(var d=0;d<h.length;d++){var f=h[d],p=parseInt(f.getAttribute("i"),10),m=decodeURIComponent(f.getAttribute("data:default-text")),v=u(m,{seriesIndex:a?p:r,dataPointIndex:n,w:o});if(a)f.innerHTML=o.globals.collapsedSeriesIndices.indexOf(p)<0?v:m;else if(f.innerHTML=p===r?v:m,r===p)break}}if(a){if(s.tooltipLabels.drawSeriesTexts({ttItems:i,i:r,j:n,shared:!this.showOnIntersect&&this.tConfig.shared}),l&&(o.globals.markers.largestSize>0?s.marker.enlargePoints(n):s.tooltipPosition.moveDynamicPointsOnHover(n)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(c),this.barSeriesHeight>0)){var g=new w(this.ctx),y=o.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(n,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(n);for(var x=0;x<y.length;x++)g.pathMouseEnter(y[x])}}else s.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:i,i:r,j:n}),this.tooltipUtil.hasBars()&&s.tooltipPosition.moveStickyTooltipOverBars(n),l&&s.tooltipPosition.moveMarkers(r,n)}}]),e}(),_e=function(){function e(t){s(this,e),this.w=t.w,this.barCtx=t,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return c(e,[{key:"handleBarDataLabels",value:function(e){var t=e.x,r=e.y,n=e.y1,i=e.y2,a=e.i,o=e.j,s=e.realIndex,l=e.series,c=e.barHeight,u=e.barWidth,h=e.barYPosition,d=e.visibleSeries,f=e.renderedPath,p=this.w,m=new w(this.barCtx.ctx),v=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[s]:this.barCtx.strokeWidth,g=t+parseFloat(u*d),y=r+parseFloat(c*d);p.globals.isXNumeric&&!p.globals.isBarHorizontal&&(g=t+parseFloat(u*(d+1)),y=r+parseFloat(c*(d+1))-v);var x,b,_=null,k=t,S=r,C=p.config.dataLabels,A=this.barCtx.barOptions.dataLabels,T=this.barCtx.barOptions.dataLabels.total;void 0!==h&&this.barCtx.isRangeBar&&(y=h,S=h);var E=C.offsetX,M=C.offsetY,I={width:0,height:0};if(p.config.dataLabels.enabled){var P=this.barCtx.series[a][o];I=m.getTextRects(p.globals.yLabelFormatters[0](P),parseFloat(C.style.fontSize))}var R={x:t,y:r,i:a,j:o,realIndex:s,renderedPath:f,bcx:g,bcy:y,barHeight:c,barWidth:u,textRects:I,strokeWidth:v,dataLabelsX:k,dataLabelsY:S,dataLabelsConfig:C,barDataLabelsConfig:A,barTotalDataLabelsConfig:T,offX:E,offY:M};return b=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(R):this.calculateColumnsDataLabelsPosition(R),f.attr({cy:b.bcy,cx:b.bcx,j:o,val:l[a][o],barHeight:c,barWidth:u}),x=this.drawCalculatedDataLabels({x:b.dataLabelsX,y:b.dataLabelsY,val:this.barCtx.isRangeBar?[n,i]:l[a][o],i:s,j:o,barWidth:u,barHeight:c,textRects:I,dataLabelsConfig:C}),p.config.chart.stacked&&T.enabled&&(_=this.drawTotalDataLabels({x:b.totalDataLabelsX,y:b.totalDataLabelsY,realIndex:s,textAnchor:b.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:s,j:o}),dataLabelsConfig:C,barTotalDataLabelsConfig:T})),{dataLabels:x,totalDataLabels:_}}},{key:"getStackedTotalDataLabel",value:function(e){var t=e.realIndex,r=e.j,n=this.w,i=this.barCtx.stackedSeriesTotals[r];return this.totalFormatter&&(i=this.totalFormatter(i,a(a({},n),{},{seriesIndex:t,dataPointIndex:r,w:n}))),i}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var t,r,n,i=this.w,a=e.i,o=e.j,s=e.realIndex,l=e.y,c=e.bcx,u=e.barWidth,h=e.barHeight,d=e.textRects,f=e.dataLabelsY,p=e.dataLabelsConfig,m=e.barDataLabelsConfig,v=e.barTotalDataLabelsConfig,g=e.strokeWidth,y=e.offX,x=e.offY;h=Math.abs(h);var b="vertical"===i.config.plotOptions.bar.dataLabels.orientation;c-=g/2;var _=i.globals.gridWidth/i.globals.dataPoints;t=i.globals.isXNumeric?c-u/2+y:c-_+u/2+y,b&&(t=t+d.height/2-g/2-2);var k=this.barCtx.series[a][o]<0,S=l;switch(this.barCtx.isReversed&&(S=l-h+(k?2*h:0),l-=h),m.position){case"center":f=b?k?S+h/2+x:S+h/2-x:k?S-h/2+d.height/2+x:S+h/2+d.height/2-x;break;case"bottom":f=b?k?S+h+x:S+h-x:k?S-h+d.height+g+x:S+h-d.height/2+g-x;break;case"top":f=b?k?S+x:S-x:k?S-d.height/2-x:S+d.height+x}if(this.barCtx.lastActiveBarSerieIndex===s&&v.enabled){var C=new w(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:s,j:o}),p.fontSize);r=k?S-C.height/2-x-v.offsetY+18:S+C.height+x+v.offsetY-18,n=t+v.offsetX}return i.config.chart.stacked||(f<0?f=0+g:f+d.height/3>i.globals.gridHeight&&(f=i.globals.gridHeight-g)),{bcx:c,bcy:l,dataLabelsX:t,dataLabelsY:f,totalDataLabelsX:n,totalDataLabelsY:r,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var t=this.w,r=e.x,n=e.i,i=e.j,a=e.realIndex,o=e.bcy,s=e.barHeight,l=e.barWidth,c=e.textRects,u=e.dataLabelsX,h=e.strokeWidth,d=e.dataLabelsConfig,f=e.barDataLabelsConfig,p=e.barTotalDataLabelsConfig,m=e.offX,v=e.offY,g=t.globals.gridHeight/t.globals.dataPoints;l=Math.abs(l);var y,x,b=o-(this.barCtx.isRangeBar?0:g)+s/2+c.height/2+v-3,_="start",k=this.barCtx.series[n][i]<0,S=r;switch(this.barCtx.isReversed&&(S=r+l-(k?2*l:0),r=t.globals.gridWidth-l),f.position){case"center":u=k?S+l/2-m:Math.max(c.width/2,S-l/2)+m;break;case"bottom":u=k?S+l-h-Math.round(c.width/2)-m:S-l+h+Math.round(c.width/2)+m;break;case"top":u=k?S-h+Math.round(c.width/2)-m:S-h-Math.round(c.width/2)+m}if(this.barCtx.lastActiveBarSerieIndex===a&&p.enabled){var C=new w(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:a,j:i}),d.fontSize);k?(y=S-h+Math.round(C.width/2)-m-p.offsetX-15,_="end"):y=S-h-Math.round(C.width/2)+m+p.offsetX+15,x=b+p.offsetY}return t.config.chart.stacked||(u<0?u=u+c.width+h:u+c.width/2>t.globals.gridWidth&&(u=t.globals.gridWidth-c.width-h)),{bcx:r,bcy:o,dataLabelsX:u,dataLabelsY:b,totalDataLabelsX:y,totalDataLabelsY:x,totalDataLabelsAnchor:_}}},{key:"drawCalculatedDataLabels",value:function(e){var t=e.x,r=e.y,n=e.val,i=e.i,o=e.j,s=e.textRects,l=e.barHeight,c=e.barWidth,u=e.dataLabelsConfig,h=this.w,d="rotate(0)";"vertical"===h.config.plotOptions.bar.dataLabels.orientation&&(d="rotate(-90, ".concat(t,", ").concat(r,")"));var f=new Z(this.barCtx.ctx),p=new w(this.barCtx.ctx),m=u.formatter,v=null,g=h.globals.collapsedSeriesIndices.indexOf(i)>-1;if(u.enabled&&!g){v=p.group({class:"apexcharts-data-labels",transform:d});var y="";void 0!==n&&(y=m(n,a(a({},h),{},{seriesIndex:i,dataPointIndex:o,w:h})));var x=h.globals.series[i][o]<0,b=h.config.plotOptions.bar.dataLabels.position;"vertical"===h.config.plotOptions.bar.dataLabels.orientation&&("top"===b&&(u.textAnchor=x?"end":"start"),"center"===b&&(u.textAnchor="middle"),"bottom"===b&&(u.textAnchor=x?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&c<p.getTextRects(y,parseFloat(u.style.fontSize)).width&&(y=""),h.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?s.width/1.6>Math.abs(c)&&(y=""):s.height/1.6>Math.abs(l)&&(y=""));var _=a({},u);this.barCtx.isHorizontal&&n<0&&("start"===u.textAnchor?_.textAnchor="end":"end"===u.textAnchor&&(_.textAnchor="start")),f.plotDataLabelsText({x:t,y:r,text:y,i:i,j:o,parent:v,dataLabelsConfig:_,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return v}},{key:"drawTotalDataLabels",value:function(e){var t,r=e.x,n=e.y,i=e.val,a=e.realIndex,o=e.textAnchor,s=e.barTotalDataLabelsConfig,l=new w(this.barCtx.ctx);return s.enabled&&void 0!==r&&void 0!==n&&this.barCtx.lastActiveBarSerieIndex===a&&(t=l.drawText({x:r,y:n,foreColor:s.style.color,text:i,textAnchor:o,fontFamily:s.style.fontFamily,fontSize:s.style.fontSize,fontWeight:s.style.fontWeight})),t}}]),e}(),we=function(){function e(t){s(this,e),this.w=t.w,this.barCtx=t}return c(e,[{key:"initVariables",value:function(e){var t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var r=0;r<e.length;r++)if(e[r].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[r].length),t.globals.isXNumeric)for(var n=0;n<e[r].length;n++)t.globals.seriesX[r][n]>t.globals.minX&&t.globals.seriesX[r][n]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=e.length-1,t.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(){var e,t,r,n,i,a,o,s,l=this.w,c=l.globals.dataPoints;this.barCtx.isRangeBar&&(c=l.globals.labels.length);var u=this.barCtx.seriesLen;if(l.config.plotOptions.bar.rangeBarGroupRows&&(u=1),this.barCtx.isHorizontal)i=(r=l.globals.gridHeight/c)/u,l.globals.isXNumeric&&(i=(r=l.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),i=i*parseInt(this.barCtx.barOptions.barHeight,10)/100,s=this.barCtx.baseLineInvertedY+l.globals.padHorizontal+(this.barCtx.isReversed?l.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),t=(r-i*this.barCtx.seriesLen)/2;else{if(n=l.globals.gridWidth/this.barCtx.visibleItems,l.config.xaxis.convertedCatToNumeric&&(n=l.globals.gridWidth/l.globals.dataPoints),a=n/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,l.globals.isXNumeric){var h=this.barCtx.xRatio;l.config.xaxis.convertedCatToNumeric&&(h=this.barCtx.initialXRatio),l.globals.minXDiff&&.5!==l.globals.minXDiff&&l.globals.minXDiff/h>0&&(n=l.globals.minXDiff/h),(a=n/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(a=1)}o=l.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?l.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),e=l.globals.padHorizontal+(n-a*this.barCtx.seriesLen)/2}return{x:e,y:t,yDivision:r,xDivision:n,barHeight:i,barWidth:a,zeroH:o,zeroW:s}}},{key:"getPathFillColor",value:function(e,t,r,n){var i,a,o,s,l=this.w,c=new j(this.barCtx.ctx),u=null,h=this.barCtx.barOptions.distributed?r:t;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map((function(n){e[t][r]>=n.from&&e[t][r]<=n.to&&(u=n.color)})),l.config.series[t].data[r]&&l.config.series[t].data[r].fillColor&&(u=l.config.series[t].data[r].fillColor),c.fillPath({seriesNumber:this.barCtx.barOptions.distributed?h:n,dataPointIndex:r,color:u,value:e[t][r],fillConfig:null===(i=l.config.series[t].data[r])||void 0===i?void 0:i.fill,fillType:null!==(a=l.config.series[t].data[r])&&void 0!==a&&null!==(o=a.fill)&&void 0!==o&&o.type?null===(s=l.config.series[t].data[r])||void 0===s?void 0:s.fill.type:l.config.fill.type})}},{key:"getStrokeWidth",value:function(e,t,r){var n=0,i=this.w;return void 0===this.barCtx.series[e][t]||null===this.barCtx.series[e][t]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,i.config.stroke.show&&(this.barCtx.isNullValue||(n=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[r]:this.barCtx.strokeWidth)),n}},{key:"shouldApplyRadius",value:function(e){var t=this.w,r=!1;return t.config.plotOptions.bar.borderRadius>0&&(t.config.chart.stacked&&"last"===t.config.plotOptions.bar.borderRadiusWhenStacked?this.barCtx.lastActiveBarSerieIndex===e&&(r=!0):r=!0),r}},{key:"barBackground",value:function(e){var t=e.j,r=e.i,n=e.x1,i=e.x2,a=e.y1,o=e.y2,s=e.elSeries,l=this.w,c=new w(this.barCtx.ctx),u=new U(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&u===r){t>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(t%=this.barCtx.barOptions.colors.backgroundBarColors.length);var h=this.barCtx.barOptions.colors.backgroundBarColors[t],d=c.drawRect(void 0!==n?n:0,void 0!==a?a:0,void 0!==i?i:l.globals.gridWidth,void 0!==o?o:l.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,h,this.barCtx.barOptions.colors.backgroundBarOpacity);s.add(d),d.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var t,r=e.barWidth,n=e.barXPosition,i=e.y1,a=e.y2,o=e.strokeWidth,s=e.realIndex,l=e.i,c=e.j,u=e.w,h=new w(this.barCtx.ctx);(o=Array.isArray(o)?o[s]:o)||(o=0);var d=r,f=n;null!==(t=u.config.series[s].data[c])&&void 0!==t&&t.columnWidthOffset&&(f=n-u.config.series[s].data[c].columnWidthOffset/2,d=r+u.config.series[s].data[c].columnWidthOffset);var p=f,m=f+d;i+=.001,a+=.001;var v=h.move(p,i),g=h.move(p,i),y=h.line(m-o,i);return u.globals.previousPaths.length>0&&(g=this.barCtx.getPreviousPath(s,c,!1)),v=v+h.line(p,a)+h.line(m-o,a)+h.line(m-o,i)+("around"===u.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),g=g+h.line(p,i)+y+y+y+y+y+h.line(p,i)+("around"===u.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(s)&&(v=h.roundPathCorners(v,u.config.plotOptions.bar.borderRadius)),u.config.chart.stacked&&(this.barCtx.yArrj.push(a),this.barCtx.yArrjF.push(Math.abs(i-a)),this.barCtx.yArrjVal.push(this.barCtx.series[l][c])),{pathTo:v,pathFrom:g}}},{key:"getBarpaths",value:function(e){var t,r=e.barYPosition,n=e.barHeight,i=e.x1,a=e.x2,o=e.strokeWidth,s=e.realIndex,l=e.i,c=e.j,u=e.w,h=new w(this.barCtx.ctx);(o=Array.isArray(o)?o[s]:o)||(o=0);var d=r,f=n;null!==(t=u.config.series[s].data[c])&&void 0!==t&&t.barHeightOffset&&(d=r-u.config.series[s].data[c].barHeightOffset/2,f=n+u.config.series[s].data[c].barHeightOffset);var p=d,m=d+f;i+=.001,a+=.001;var v=h.move(i,p),g=h.move(i,p);u.globals.previousPaths.length>0&&(g=this.barCtx.getPreviousPath(s,c,!1));var y=h.line(i,m-o);return v=v+h.line(a,p)+h.line(a,m-o)+y+("around"===u.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),g=g+h.line(i,p)+y+y+y+y+y+h.line(i,p)+("around"===u.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(s)&&(v=h.roundPathCorners(v,u.config.plotOptions.bar.borderRadius)),u.config.chart.stacked&&(this.barCtx.xArrj.push(a),this.barCtx.xArrjF.push(Math.abs(i-a)),this.barCtx.xArrjVal.push(this.barCtx.series[l][c])),{pathTo:v,pathFrom:g}}},{key:"checkZeroSeries",value:function(e){for(var t=e.series,r=this.w,n=0;n<t.length;n++){for(var i=0,a=0;a<t[r.globals.maxValsInArrayIndex].length;a++)i+=t[n][a];0===i&&this.barCtx.zeroSerieses.push(n)}for(var o=t.length-1;o>=0;o--)this.barCtx.zeroSerieses.indexOf(o)>-1&&o===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var s=t.length-1;s>=0;s--)r.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}},{key:"getXForValue",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=r?t:null;return null!=e&&(n=t+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),n}},{key:"getYForValue",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=r?t:null;return null!=e&&(n=t-e/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),n}},{key:"getGoalValues",value:function(e,t,r,n,i){var a=this,o=this.w,s=[];return o.globals.seriesGoals[n]&&o.globals.seriesGoals[n][i]&&Array.isArray(o.globals.seriesGoals[n][i])&&o.globals.seriesGoals[n][i].forEach((function(n){var i;s.push((u(i={},e,"x"===e?a.getXForValue(n.value,t,!1):a.getYForValue(n.value,r,!1)),u(i,"attrs",n),i))})),s}},{key:"drawGoalLine",value:function(e){var t=e.barXPosition,r=e.barYPosition,n=e.goalX,i=e.goalY,a=e.barWidth,o=e.barHeight,s=new w(this.barCtx.ctx),l=s.group({className:"apexcharts-bar-goals-groups"}),c=null;return this.barCtx.isHorizontal?Array.isArray(n)&&n.forEach((function(e){var t=void 0!==e.attrs.strokeHeight?e.attrs.strokeHeight:o/2,n=r+t+o/2;c=s.drawLine(e.x,n-2*t,e.x,n,e.attrs.strokeColor?e.attrs.strokeColor:void 0,e.attrs.strokeDashArray,e.attrs.strokeWidth?e.attrs.strokeWidth:2,e.attrs.strokeLineCap),l.add(c)})):Array.isArray(i)&&i.forEach((function(e){var r=void 0!==e.attrs.strokeWidth?e.attrs.strokeWidth:a/2,n=t+r+a/2;c=s.drawLine(n-2*r,e.y,n,e.y,e.attrs.strokeColor?e.attrs.strokeColor:void 0,e.attrs.strokeDashArray,e.attrs.strokeHeight?e.attrs.strokeHeight:2,e.attrs.strokeLineCap),l.add(c)})),l}}]),e}(),ke=function(){function e(t,r){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.barOptions=n.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=n.config.stroke.width,this.isNullValue=!1,this.isRangeBar=n.globals.seriesRange.length&&this.isHorizontal,this.xyRatios=r,null!==this.xyRatios&&(this.xRatio=r.xRatio,this.initialXRatio=r.initialXRatio,this.yRatio=r.yRatio,this.invertedXRatio=r.invertedXRatio,this.invertedYRatio=r.invertedYRatio,this.baseLineY=r.baseLineY,this.baseLineInvertedY=r.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0;var i=new U(this.ctx);this.lastActiveBarSerieIndex=i.getActiveConfigSeriesIndex("desc",["bar","column"]);var a=i.getBarSeriesIndices(),o=new k(this.ctx);this.stackedSeriesTotals=o.getStackedSeriesTotals(this.w.config.series.map((function(e,t){return-1===a.indexOf(t)?t:-1})).filter((function(e){return-1!==e}))),this.barHelpers=new we(this)}return c(e,[{key:"draw",value:function(e,t){var r=this.w,n=new w(this.ctx),i=new k(this.ctx,r);e=i.getLogSeries(e),this.series=e,this.yRatio=i.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var o=n.group({class:"apexcharts-bar-series apexcharts-plot-series"});r.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var s=0,l=0;s<e.length;s++,l++){var c,u,h,d,f=void 0,p=void 0,m=[],v=[],g=r.globals.comboCharts?t[s]:s,y=n.group({class:"apexcharts-series",rel:s+1,seriesName:x.escapeString(r.globals.seriesNames[g]),"data:realIndex":g});this.ctx.series.addCollapsedClassToSeries(y,g),e[s].length>0&&(this.visibleI=this.visibleI+1);var b=0,_=0;this.yRatio.length>1&&(this.yaxisIndex=g),this.isReversed=r.config.yaxis[this.yaxisIndex]&&r.config.yaxis[this.yaxisIndex].reversed;var S=this.barHelpers.initialPositions();p=S.y,b=S.barHeight,u=S.yDivision,d=S.zeroW,f=S.x,_=S.barWidth,c=S.xDivision,h=S.zeroH,this.horizontal||v.push(f+_/2);for(var C=n.group({class:"apexcharts-datalabels","data:realIndex":g}),A=n.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),T=0;T<r.globals.dataPoints;T++){var E=this.barHelpers.getStrokeWidth(s,T,g),M=null,I={indexes:{i:s,j:T,realIndex:g,bc:l},x:f,y:p,strokeWidth:E,elSeries:y};this.isHorizontal?(M=this.drawBarPaths(a(a({},I),{},{barHeight:b,zeroW:d,yDivision:u})),_=this.series[s][T]/this.invertedYRatio):(M=this.drawColumnPaths(a(a({},I),{},{xDivision:c,barWidth:_,zeroH:h})),b=this.series[s][T]/this.yRatio[this.yaxisIndex]);var P=this.barHelpers.drawGoalLine({barXPosition:M.barXPosition,barYPosition:M.barYPosition,goalX:M.goalX,goalY:M.goalY,barHeight:b,barWidth:_});P&&A.add(P),p=M.y,f=M.x,T>0&&v.push(f+_/2),m.push(p);var R=this.barHelpers.getPathFillColor(e,s,T,g);this.renderSeries({realIndex:g,pathFill:R,j:T,i:s,pathFrom:M.pathFrom,pathTo:M.pathTo,strokeWidth:E,elSeries:y,x:f,y:p,series:e,barHeight:b,barWidth:_,elDataLabelsWrap:C,elGoalsMarkers:A,visibleSeries:this.visibleI,type:"bar"})}r.globals.seriesXvalues[g]=v,r.globals.seriesYvalues[g]=m,o.add(y)}return o}},{key:"renderSeries",value:function(e){var t=e.realIndex,r=e.pathFill,n=e.lineFill,i=e.j,a=e.i,o=e.pathFrom,s=e.pathTo,l=e.strokeWidth,c=e.elSeries,u=e.x,h=e.y,d=e.y1,f=e.y2,p=e.series,m=e.barHeight,v=e.barWidth,g=e.barYPosition,y=e.elDataLabelsWrap,x=e.elGoalsMarkers,b=e.visibleSeries,k=e.type,S=this.w,C=new w(this.ctx);n||(n=this.barOptions.distributed?S.globals.stroke.colors[i]:S.globals.stroke.colors[t]),S.config.series[a].data[i]&&S.config.series[a].data[i].strokeColor&&(n=S.config.series[a].data[i].strokeColor),this.isNullValue&&(r="none");var A=i/S.config.chart.animations.animateGradually.delay*(S.config.chart.animations.speed/S.globals.dataPoints)/2.4,T=C.renderPaths({i:a,j:i,realIndex:t,pathFrom:o,pathTo:s,stroke:n,strokeWidth:l,strokeLineCap:S.config.stroke.lineCap,fill:r,animationDelay:A,initialSpeed:S.config.chart.animations.speed,dataChangeSpeed:S.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(k,"-area")});T.attr("clip-path","url(#gridRectMask".concat(S.globals.cuid,")"));var E=S.config.forecastDataPoints;E.count>0&&i>=S.globals.dataPoints-E.count&&(T.node.setAttribute("stroke-dasharray",E.dashArray),T.node.setAttribute("stroke-width",E.strokeWidth),T.node.setAttribute("fill-opacity",E.fillOpacity)),void 0!==d&&void 0!==f&&(T.attr("data-range-y1",d),T.attr("data-range-y2",f)),new _(this.ctx).setSelectionFilter(T,t,i),c.add(T);var M=new _e(this).handleBarDataLabels({x:u,y:h,y1:d,y2:f,i:a,j:i,series:p,realIndex:t,barHeight:m,barWidth:v,barYPosition:g,renderedPath:T,visibleSeries:b});return null!==M.dataLabels&&y.add(M.dataLabels),M.totalDataLabels&&y.add(M.totalDataLabels),c.add(y),x&&c.add(x),c}},{key:"drawBarPaths",value:function(e){var t=e.indexes,r=e.barHeight,n=e.strokeWidth,i=e.zeroW,a=e.x,o=e.y,s=e.yDivision,l=e.elSeries,c=this.w,u=t.i,h=t.j;c.globals.isXNumeric&&(o=(c.globals.seriesX[u][h]-c.globals.minX)/this.invertedXRatio-r);var d=o+r*this.visibleI;a=this.barHelpers.getXForValue(this.series[u][h],i);var f=this.barHelpers.getBarpaths({barYPosition:d,barHeight:r,x1:i,x2:a,strokeWidth:n,series:this.series,realIndex:t.realIndex,i:u,j:h,w:c});return c.globals.isXNumeric||(o+=s),this.barHelpers.barBackground({j:h,i:u,y1:d-r*this.visibleI,y2:r*this.seriesLen,elSeries:l}),{pathTo:f.pathTo,pathFrom:f.pathFrom,x:a,y:o,goalX:this.barHelpers.getGoalValues("x",i,null,u,h),barYPosition:d}}},{key:"drawColumnPaths",value:function(e){var t=e.indexes,r=e.x,n=e.y,i=e.xDivision,a=e.barWidth,o=e.zeroH,s=e.strokeWidth,l=e.elSeries,c=this.w,u=t.realIndex,h=t.i,d=t.j,f=t.bc;if(c.globals.isXNumeric){var p=u;c.globals.seriesX[u].length||(p=c.globals.maxValsInArrayIndex),r=(c.globals.seriesX[p][d]-c.globals.minX)/this.xRatio-a*this.seriesLen/2}var m=r+a*this.visibleI;n=this.barHelpers.getYForValue(this.series[h][d],o);var v=this.barHelpers.getColumnPaths({barXPosition:m,barWidth:a,y1:o,y2:n,strokeWidth:s,series:this.series,realIndex:t.realIndex,i:h,j:d,w:c});return c.globals.isXNumeric||(r+=i),this.barHelpers.barBackground({bc:f,j:d,i:h,x1:m-s/2-a*this.visibleI,x2:a*this.seriesLen+s/2,elSeries:l}),{pathTo:v.pathTo,pathFrom:v.pathFrom,x:r,y:n,goalY:this.barHelpers.getGoalValues("y",null,o,h,d),barXPosition:m}}},{key:"getPreviousPath",value:function(e,t){for(var r,n=this.w,i=0;i<n.globals.previousPaths.length;i++){var a=n.globals.previousPaths[i];a.paths&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(e,10)&&void 0!==n.globals.previousPaths[i].paths[t]&&(r=n.globals.previousPaths[i].paths[t].d)}return r}}]),e}(),Se=function(e){h(r,ke);var t=m(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"draw",value:function(e,t){var r=this,n=this.w;this.graphics=new w(this.ctx),this.bar=new ke(this.ctx,this.xyRatios);var i=new k(this.ctx,n);e=i.getLogSeries(e),this.yRatio=i.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e),"100%"===n.config.chart.stackType&&(e=n.globals.seriesPercent.slice()),this.series=e,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var o=0;o<e.length;o++)e[o].length>0&&(this.totalItems+=e[o].length);for(var s=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),l=0,c=0,u=function(i,o){var u=void 0,h=void 0,d=void 0,f=void 0,p=[],m=[],v=n.globals.comboCharts?t[i]:i;r.yRatio.length>1&&(r.yaxisIndex=v),r.isReversed=n.config.yaxis[r.yaxisIndex]&&n.config.yaxis[r.yaxisIndex].reversed;var g=r.graphics.group({class:"apexcharts-series",seriesName:x.escapeString(n.globals.seriesNames[v]),rel:i+1,"data:realIndex":v});r.ctx.series.addCollapsedClassToSeries(g,v);var y=r.graphics.group({class:"apexcharts-datalabels","data:realIndex":v}),b=r.graphics.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),_=0,w=0,k=r.initialPositions(l,c,u,h,d,f);c=k.y,_=k.barHeight,h=k.yDivision,f=k.zeroW,l=k.x,w=k.barWidth,u=k.xDivision,d=k.zeroH,r.yArrj=[],r.yArrjF=[],r.yArrjVal=[],r.xArrj=[],r.xArrjF=[],r.xArrjVal=[],1===r.prevY.length&&r.prevY[0].every((function(e){return isNaN(e)}))&&(r.prevY[0]=r.prevY[0].map((function(e){return d})),r.prevYF[0]=r.prevYF[0].map((function(e){return 0})));for(var S=0;S<n.globals.dataPoints;S++){var C=r.barHelpers.getStrokeWidth(i,S,v),A={indexes:{i:i,j:S,realIndex:v,bc:o},strokeWidth:C,x:l,y:c,elSeries:g},T=null;r.isHorizontal?(T=r.drawStackedBarPaths(a(a({},A),{},{zeroW:f,barHeight:_,yDivision:h})),w=r.series[i][S]/r.invertedYRatio):(T=r.drawStackedColumnPaths(a(a({},A),{},{xDivision:u,barWidth:w,zeroH:d})),_=r.series[i][S]/r.yRatio[r.yaxisIndex]);var E=r.barHelpers.drawGoalLine({barXPosition:T.barXPosition,barYPosition:T.barYPosition,goalX:T.goalX,goalY:T.goalY,barHeight:_,barWidth:w});E&&b.add(E),c=T.y,l=T.x,p.push(l),m.push(c);var M=r.barHelpers.getPathFillColor(e,i,S,v);g=r.renderSeries({realIndex:v,pathFill:M,j:S,i:i,pathFrom:T.pathFrom,pathTo:T.pathTo,strokeWidth:C,elSeries:g,x:l,y:c,series:e,barHeight:_,barWidth:w,elDataLabelsWrap:y,elGoalsMarkers:b,type:"bar",visibleSeries:0})}n.globals.seriesXvalues[v]=p,n.globals.seriesYvalues[v]=m,r.prevY.push(r.yArrj),r.prevYF.push(r.yArrjF),r.prevYVal.push(r.yArrjVal),r.prevX.push(r.xArrj),r.prevXF.push(r.xArrjF),r.prevXVal.push(r.xArrjVal),s.add(g)},h=0,d=0;h<e.length;h++,d++)u(h,d);return s}},{key:"initialPositions",value:function(e,t,r,n,i,a){var o,s,l=this.w;return this.isHorizontal?(o=(o=n=l.globals.gridHeight/l.globals.dataPoints)*parseInt(l.config.plotOptions.bar.barHeight,10)/100,a=this.baseLineInvertedY+l.globals.padHorizontal+(this.isReversed?l.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),t=(n-o)/2):(s=r=l.globals.gridWidth/l.globals.dataPoints,s=l.globals.isXNumeric&&l.globals.dataPoints>1?(r=l.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:s*parseInt(l.config.plotOptions.bar.columnWidth,10)/100,i=l.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?l.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),e=l.globals.padHorizontal+(r-s)/2),{x:e,y:t,yDivision:n,xDivision:r,barHeight:o,barWidth:s,zeroH:i,zeroW:a}}},{key:"drawStackedBarPaths",value:function(e){for(var t,r=e.indexes,n=e.barHeight,i=e.strokeWidth,a=e.zeroW,o=e.x,s=e.y,l=e.yDivision,c=e.elSeries,u=this.w,h=s,d=r.i,f=r.j,p=0,m=0;m<this.prevXF.length;m++)p+=this.prevXF[m][f];if(d>0){var v=a;this.prevXVal[d-1][f]<0?v=this.series[d][f]>=0?this.prevX[d-1][f]+p-2*(this.isReversed?p:0):this.prevX[d-1][f]:this.prevXVal[d-1][f]>=0&&(v=this.series[d][f]>=0?this.prevX[d-1][f]:this.prevX[d-1][f]-p+2*(this.isReversed?p:0)),t=v}else t=a;o=null===this.series[d][f]?t:t+this.series[d][f]/this.invertedYRatio-2*(this.isReversed?this.series[d][f]/this.invertedYRatio:0);var g=this.barHelpers.getBarpaths({barYPosition:h,barHeight:n,x1:t,x2:o,strokeWidth:i,series:this.series,realIndex:r.realIndex,i:d,j:f,w:u});return this.barHelpers.barBackground({j:f,i:d,y1:h,y2:n,elSeries:c}),s+=l,{pathTo:g.pathTo,pathFrom:g.pathFrom,goalX:this.barHelpers.getGoalValues("x",a,null,d,f),barYPosition:h,x:o,y:s}}},{key:"drawStackedColumnPaths",value:function(e){var t=e.indexes,r=e.x,n=e.y,i=e.xDivision,a=e.barWidth,o=e.zeroH;e.strokeWidth;var s=e.elSeries,l=this.w,c=t.i,u=t.j,h=t.bc;if(l.globals.isXNumeric){var d=l.globals.seriesX[c][u];d||(d=0),r=(d-l.globals.minX)/this.xRatio-a/2}for(var f,p=r,m=0,v=0;v<this.prevYF.length;v++)m+=isNaN(this.prevYF[v][u])?0:this.prevYF[v][u];if(c>0&&!l.globals.isXNumeric||c>0&&l.globals.isXNumeric&&l.globals.seriesX[c-1][u]===l.globals.seriesX[c][u]){var g,y,x=Math.min(this.yRatio.length+1,c+1);if(void 0!==this.prevY[c-1])for(var b=1;b<x;b++)if(!isNaN(this.prevY[c-b][u])){y=this.prevY[c-b][u];break}for(var _=1;_<x;_++){if(this.prevYVal[c-_][u]<0){g=this.series[c][u]>=0?y-m+2*(this.isReversed?m:0):y;break}if(this.prevYVal[c-_][u]>=0){g=this.series[c][u]>=0?y:y+m-2*(this.isReversed?m:0);break}}void 0===g&&(g=l.globals.gridHeight),f=this.prevYF[0].every((function(e){return 0===e}))&&this.prevYF.slice(1,c).every((function(e){return e.every((function(e){return isNaN(e)}))}))?o:g}else f=o;n=f-this.series[c][u]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[c][u]/this.yRatio[this.yaxisIndex]:0);var w=this.barHelpers.getColumnPaths({barXPosition:p,barWidth:a,y1:f,y2:n,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:t.realIndex,i:c,j:u,w:l});return this.barHelpers.barBackground({bc:h,j:u,i:c,x1:p,x2:a,elSeries:s}),r+=i,{pathTo:w.pathTo,pathFrom:w.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,o,c,u),barXPosition:p,x:l.globals.isXNumeric?r-i:r,y:n}}}]),r}(),Ce=function(e){h(r,ke);var t=m(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"draw",value:function(e,t){var r=this,n=this.w,i=new w(this.ctx),o=new j(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=n.config.plotOptions.bar.horizontal;var s=new k(this.ctx,n);e=s.getLogSeries(e),this.series=e,this.yRatio=s.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);for(var l=i.group({class:"apexcharts-".concat(n.config.chart.type,"-series apexcharts-plot-series")}),c=function(s){r.isBoxPlot="boxPlot"===n.config.chart.type||"boxPlot"===n.config.series[s].type;var c,u,h,d,f,p,m=void 0,v=void 0,g=[],y=[],b=n.globals.comboCharts?t[s]:s,_=i.group({class:"apexcharts-series",seriesName:x.escapeString(n.globals.seriesNames[b]),rel:s+1,"data:realIndex":b});r.ctx.series.addCollapsedClassToSeries(_,b),e[s].length>0&&(r.visibleI=r.visibleI+1),r.yRatio.length>1&&(r.yaxisIndex=b);var w=r.barHelpers.initialPositions();v=w.y,f=w.barHeight,u=w.yDivision,d=w.zeroW,m=w.x,p=w.barWidth,c=w.xDivision,h=w.zeroH,y.push(m+p/2);for(var k=i.group({class:"apexcharts-datalabels","data:realIndex":b}),S=function(t){var i=r.barHelpers.getStrokeWidth(s,t,b),l=null,x={indexes:{i:s,j:t,realIndex:b},x:m,y:v,strokeWidth:i,elSeries:_};l=r.isHorizontal?r.drawHorizontalBoxPaths(a(a({},x),{},{yDivision:u,barHeight:f,zeroW:d})):r.drawVerticalBoxPaths(a(a({},x),{},{xDivision:c,barWidth:p,zeroH:h})),v=l.y,m=l.x,t>0&&y.push(m+p/2),g.push(v),l.pathTo.forEach((function(a,c){var u=!r.isBoxPlot&&r.candlestickOptions.wick.useFillColor?l.color[c]:n.globals.stroke.colors[s],h=o.fillPath({seriesNumber:b,dataPointIndex:t,color:l.color[c],value:e[s][t]});r.renderSeries({realIndex:b,pathFill:h,lineFill:u,j:t,i:s,pathFrom:l.pathFrom,pathTo:a,strokeWidth:i,elSeries:_,x:m,y:v,series:e,barHeight:f,barWidth:p,elDataLabelsWrap:k,visibleSeries:r.visibleI,type:n.config.chart.type})}))},C=0;C<n.globals.dataPoints;C++)S(C);n.globals.seriesXvalues[b]=y,n.globals.seriesYvalues[b]=g,l.add(_)},u=0;u<e.length;u++)c(u);return l}},{key:"drawVerticalBoxPaths",value:function(e){var t=e.indexes,r=e.x;e.y;var n=e.xDivision,i=e.barWidth,a=e.zeroH,o=e.strokeWidth,s=this.w,l=new w(this.ctx),c=t.i,u=t.j,h=!0,d=s.config.plotOptions.candlestick.colors.upward,f=s.config.plotOptions.candlestick.colors.downward,p="";this.isBoxPlot&&(p=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var m=this.yRatio[this.yaxisIndex],v=t.realIndex,g=this.getOHLCValue(v,u),y=a,x=a;g.o>g.c&&(h=!1);var b=Math.min(g.o,g.c),_=Math.max(g.o,g.c),k=g.m;s.globals.isXNumeric&&(r=(s.globals.seriesX[v][u]-s.globals.minX)/this.xRatio-i/2);var S=r+i*this.visibleI;void 0===this.series[c][u]||null===this.series[c][u]?(b=a,_=a):(b=a-b/m,_=a-_/m,y=a-g.h/m,x=a-g.l/m,k=a-g.m/m);var C=l.move(S,a),A=l.move(S+i/2,b);return s.globals.previousPaths.length>0&&(A=this.getPreviousPath(v,u,!0)),C=this.isBoxPlot?[l.move(S,b)+l.line(S+i/2,b)+l.line(S+i/2,y)+l.line(S+i/4,y)+l.line(S+i-i/4,y)+l.line(S+i/2,y)+l.line(S+i/2,b)+l.line(S+i,b)+l.line(S+i,k)+l.line(S,k)+l.line(S,b+o/2),l.move(S,k)+l.line(S+i,k)+l.line(S+i,_)+l.line(S+i/2,_)+l.line(S+i/2,x)+l.line(S+i-i/4,x)+l.line(S+i/4,x)+l.line(S+i/2,x)+l.line(S+i/2,_)+l.line(S,_)+l.line(S,k)+"z"]:[l.move(S,_)+l.line(S+i/2,_)+l.line(S+i/2,y)+l.line(S+i/2,_)+l.line(S+i,_)+l.line(S+i,b)+l.line(S+i/2,b)+l.line(S+i/2,x)+l.line(S+i/2,b)+l.line(S,b)+l.line(S,_-o/2)],A+=l.move(S,b),s.globals.isXNumeric||(r+=n),{pathTo:C,pathFrom:A,x:r,y:_,barXPosition:S,color:this.isBoxPlot?p:h?[d]:[f]}}},{key:"drawHorizontalBoxPaths",value:function(e){var t=e.indexes;e.x;var r=e.y,n=e.yDivision,i=e.barHeight,a=e.zeroW,o=e.strokeWidth,s=this.w,l=new w(this.ctx),c=t.i,u=t.j,h=this.boxOptions.colors.lower;this.isBoxPlot&&(h=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var d=this.invertedYRatio,f=t.realIndex,p=this.getOHLCValue(f,u),m=a,v=a,g=Math.min(p.o,p.c),y=Math.max(p.o,p.c),x=p.m;s.globals.isXNumeric&&(r=(s.globals.seriesX[f][u]-s.globals.minX)/this.invertedXRatio-i/2);var b=r+i*this.visibleI;void 0===this.series[c][u]||null===this.series[c][u]?(g=a,y=a):(g=a+g/d,y=a+y/d,m=a+p.h/d,v=a+p.l/d,x=a+p.m/d);var _=l.move(a,b),k=l.move(g,b+i/2);return s.globals.previousPaths.length>0&&(k=this.getPreviousPath(f,u,!0)),_=[l.move(g,b)+l.line(g,b+i/2)+l.line(m,b+i/2)+l.line(m,b+i/2-i/4)+l.line(m,b+i/2+i/4)+l.line(m,b+i/2)+l.line(g,b+i/2)+l.line(g,b+i)+l.line(x,b+i)+l.line(x,b)+l.line(g+o/2,b),l.move(x,b)+l.line(x,b+i)+l.line(y,b+i)+l.line(y,b+i/2)+l.line(v,b+i/2)+l.line(v,b+i-i/4)+l.line(v,b+i/4)+l.line(v,b+i/2)+l.line(y,b+i/2)+l.line(y,b)+l.line(x,b)+"z"],k+=l.move(g,b),s.globals.isXNumeric||(r+=n),{pathTo:_,pathFrom:k,x:y,y:r,barYPosition:b,color:h}}},{key:"getOHLCValue",value:function(e,t){var r=this.w;return{o:this.isBoxPlot?r.globals.seriesCandleH[e][t]:r.globals.seriesCandleO[e][t],h:this.isBoxPlot?r.globals.seriesCandleO[e][t]:r.globals.seriesCandleH[e][t],m:r.globals.seriesCandleM[e][t],l:this.isBoxPlot?r.globals.seriesCandleC[e][t]:r.globals.seriesCandleL[e][t],c:this.isBoxPlot?r.globals.seriesCandleL[e][t]:r.globals.seriesCandleC[e][t]}}}]),r}(),Ae=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"checkColorRange",value:function(){var e=this.w,t=!1,r=e.config.plotOptions[e.config.chart.type];return r.colorScale.ranges.length>0&&r.colorScale.ranges.map((function(e,r){e.from<=0&&(t=!0)})),t}},{key:"getShadeColor",value:function(e,t,r,n){var i=this.w,a=1,o=i.config.plotOptions[e].shadeIntensity,s=this.determineColor(e,t,r);i.globals.hasNegs||n?a=i.config.plotOptions[e].reverseNegativeShade?s.percent<0?s.percent/100*(1.25*o):(1-s.percent/100)*(1.25*o):s.percent<=0?1-(1+s.percent/100)*o:(1-s.percent/100)*o:(a=1-s.percent/100,"treemap"===e&&(a=(1-s.percent/100)*(1.25*o)));var l=s.color,c=new x;return i.config.plotOptions[e].enableShades&&(l="dark"===this.w.config.theme.mode?x.hexToRgba(c.shadeColor(-1*a,s.color),i.config.fill.opacity):x.hexToRgba(c.shadeColor(a,s.color),i.config.fill.opacity)),{color:l,colorProps:s}}},{key:"determineColor",value:function(e,t,r){var n=this.w,i=n.globals.series[t][r],a=n.config.plotOptions[e],o=a.colorScale.inverse?r:t;a.distributed&&"treemap"===n.config.chart.type&&(o=r);var s=n.globals.colors[o],l=null,c=Math.min.apply(Math,v(n.globals.series[t])),u=Math.max.apply(Math,v(n.globals.series[t]));a.distributed||"heatmap"!==e||(c=n.globals.minY,u=n.globals.maxY),void 0!==a.colorScale.min&&(c=a.colorScale.min<n.globals.minY?a.colorScale.min:n.globals.minY,u=a.colorScale.max>n.globals.maxY?a.colorScale.max:n.globals.maxY);var h=Math.abs(u)+Math.abs(c),d=100*i/(0===h?h-1e-6:h);return a.colorScale.ranges.length>0&&a.colorScale.ranges.map((function(e,t){if(i>=e.from&&i<=e.to){s=e.color,l=e.foreColor?e.foreColor:null,c=e.from,u=e.to;var r=Math.abs(u)+Math.abs(c);d=100*i/(0===r?r-1e-6:r)}})),{color:s,foreColor:l,percent:d}}},{key:"calculateDataLabels",value:function(e){var t=e.text,r=e.x,n=e.y,i=e.i,a=e.j,o=e.colorProps,s=e.fontSize,l=this.w.config.dataLabels,c=new w(this.ctx),u=new Z(this.ctx),h=null;if(l.enabled){h=c.group({class:"apexcharts-data-labels"});var d=l.offsetX,f=l.offsetY,p=r+d,m=n+parseFloat(l.style.fontSize)/3+f;u.plotDataLabelsText({x:p,y:m,text:t,i:i,j:a,color:o.foreColor,parent:h,fontSize:s,dataLabelsConfig:l})}return h}},{key:"addListeners",value:function(e){var t=new w(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}]),e}(),Te=function(){function e(t,r){s(this,e),this.ctx=t,this.w=t.w,this.xRatio=r.xRatio,this.yRatio=r.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Ae(t),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return c(e,[{key:"draw",value:function(e){var t=this.w,r=new w(this.ctx),n=r.group({class:"apexcharts-heatmap"});n.attr("clip-path","url(#gridRectMask".concat(t.globals.cuid,")"));var i=t.globals.gridWidth/t.globals.dataPoints,a=t.globals.gridHeight/t.globals.series.length,o=0,s=!1;this.negRange=this.helpers.checkColorRange();var l=e.slice();t.config.yaxis[0].reversed&&(s=!0,l.reverse());for(var c=s?0:l.length-1;s?c<l.length:c>=0;s?c++:c--){var u=r.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:x.escapeString(t.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});if(this.ctx.series.addCollapsedClassToSeries(u,c),t.config.chart.dropShadow.enabled){var h=t.config.chart.dropShadow;new _(this.ctx).dropShadow(u,h,c)}for(var d=0,f=t.config.plotOptions.heatmap.shadeIntensity,p=0;p<l[c].length;p++){var m=this.helpers.getShadeColor(t.config.chart.type,c,p,this.negRange),v=m.color,g=m.colorProps;"image"===t.config.fill.type&&(v=new j(this.ctx).fillPath({seriesNumber:c,dataPointIndex:p,opacity:t.globals.hasNegs?g.percent<0?1-(1+g.percent/100):f+g.percent/100:g.percent/100,patternID:x.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:i,height:t.config.fill.image.height?t.config.fill.image.height:a}));var y=this.rectRadius,b=r.drawRect(d,o,i,a,y);if(b.attr({cx:d,cy:o}),b.node.classList.add("apexcharts-heatmap-rect"),u.add(b),b.attr({fill:v,i:c,index:c,j:p,val:l[c][p],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?v:t.globals.stroke.colors[0],color:v}),this.helpers.addListeners(b),t.config.chart.animations.enabled&&!t.globals.dataChanged){var k=1;t.globals.resized||(k=t.config.chart.animations.speed),this.animateHeatMap(b,d,o,i,a,k)}if(t.globals.dataChanged){var S=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){S=this.dynamicAnim.speed;var C=t.globals.previousPaths[c]&&t.globals.previousPaths[c][p]&&t.globals.previousPaths[c][p].color;C||(C="rgba(255, 255, 255, 0)"),this.animateHeatColor(b,x.isColorHex(C)?C:x.rgb2hex(C),x.isColorHex(v)?v:x.rgb2hex(v),S)}}var A=(0,t.config.dataLabels.formatter)(t.globals.series[c][p],{value:t.globals.series[c][p],seriesIndex:c,dataPointIndex:p,w:t}),T=this.helpers.calculateDataLabels({text:A,x:d+i/2,y:o+a/2,i:c,j:p,colorProps:g,series:l});null!==T&&u.add(T),d+=i}o+=a,n.add(u)}var E=t.globals.yAxisScale[0].result.slice();t.config.yaxis[0].reversed?E.unshift(""):E.push(""),t.globals.yAxisScale[0].result=E;var M=t.globals.gridHeight/t.globals.series.length;return t.config.yaxis[0].labels.offsetY=-M/2,n}},{key:"animateHeatMap",value:function(e,t,r,n,i,a){var o=new b(this.ctx);o.animateRect(e,{x:t+n/2,y:r+i/2,width:0,height:0},{x:t,y:r,width:n,height:i},a,(function(){o.animationCompleted(e)}))}},{key:"animateHeatColor",value:function(e,t,r,n){e.attr({fill:t}).animate(n).attr({fill:r})}}]),e}(),Ee=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawYAxisTexts",value:function(e,t,r,n){var i=this.w,a=i.config.yaxis[0],o=i.globals.yLabelFormatters[0];return new w(this.ctx).drawText({x:e+a.labels.offsetX,y:t+a.labels.offsetY,text:o(n,r),textAnchor:"middle",fontSize:a.labels.style.fontSize,fontFamily:a.labels.style.fontFamily,foreColor:Array.isArray(a.labels.style.colors)?a.labels.style.colors[r]:a.labels.style.colors})}}]),e}(),Me=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var r=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==r.globals.stroke.colors?r.globals.stroke.colors:r.globals.colors,this.defaultSize=Math.min(r.globals.gridWidth,r.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=r.globals.gridWidth/2,"radialBar"===r.config.chart.type?this.fullAngle=360:this.fullAngle=Math.abs(r.config.plotOptions.pie.endAngle-r.config.plotOptions.pie.startAngle),this.initialAngle=r.config.plotOptions.pie.startAngle%this.fullAngle,r.globals.radialSize=this.defaultSize/2.05-r.config.stroke.width-(r.config.chart.sparkline.enabled?0:r.config.chart.dropShadow.blur),this.donutSize=r.globals.radialSize*parseInt(r.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return c(e,[{key:"draw",value:function(e){var t=this,r=this.w,n=new w(this.ctx);if(this.ret=n.group({class:"apexcharts-pie"}),r.globals.noData)return this.ret;for(var i=0,a=0;a<e.length;a++)i+=x.negToZero(e[a]);var o=[],s=n.group();0===i&&(i=1e-5),e.forEach((function(e){t.maxY=Math.max(t.maxY,e)})),r.config.yaxis[0].max&&(this.maxY=r.config.yaxis[0].max),"back"===r.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var l=0;l<e.length;l++){var c=this.fullAngle*x.negToZero(e[l])/i;o.push(c),"polarArea"===this.chartType?(o[l]=this.fullAngle/e.length,this.sliceSizes.push(r.globals.radialSize*e[l]/this.maxY)):this.sliceSizes.push(r.globals.radialSize)}if(r.globals.dataChanged){for(var u,h=0,d=0;d<r.globals.previousPaths.length;d++)h+=x.negToZero(r.globals.previousPaths[d]);for(var f=0;f<r.globals.previousPaths.length;f++)u=this.fullAngle*x.negToZero(r.globals.previousPaths[f])/h,this.prevSectorAngleArr.push(u)}this.donutSize<0&&(this.donutSize=0);var p=r.config.plotOptions.pie.customScale,m=r.globals.gridWidth/2,v=r.globals.gridHeight/2,g=m-r.globals.gridWidth/2*p,y=v-r.globals.gridHeight/2*p;if("donut"===this.chartType){var b=n.drawCircle(this.donutSize);b.attr({cx:this.centerX,cy:this.centerY,fill:r.config.plotOptions.pie.donut.background?r.config.plotOptions.pie.donut.background:"transparent"}),s.add(b)}var _=this.drawArcs(o,e);if(this.sliceLabels.forEach((function(e){_.add(e)})),s.attr({transform:"translate(".concat(g,", ").concat(y,") scale(").concat(p,")")}),s.add(_),this.ret.add(s),this.donutDataLabels.show){var k=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:g,translateY:y});this.ret.add(k)}return"front"===r.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(e,t){var r=this.w,n=new _(this.ctx),i=new w(this.ctx),a=new j(this.ctx),o=i.group({class:"apexcharts-slices"}),s=this.initialAngle,l=this.initialAngle,c=this.initialAngle,u=this.initialAngle;this.strokeWidth=r.config.stroke.show?r.config.stroke.width:0;for(var h=0;h<e.length;h++){var d=i.group({class:"apexcharts-series apexcharts-pie-series",seriesName:x.escapeString(r.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});o.add(d),l=u,c=(s=c)+e[h],u=l+this.prevSectorAngleArr[h];var f=c<s?this.fullAngle+c-s:c-s,p=a.fillPath({seriesNumber:h,size:this.sliceSizes[h],value:t[h]}),m=this.getChangedPath(l,u),v=i.drawPath({d:m,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[h]:this.lineColorArr,strokeWidth:0,fill:p,fillOpacity:r.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(h)});if(v.attr({index:0,j:h}),n.setSelectionFilter(v,0,h),r.config.chart.dropShadow.enabled){var g=r.config.chart.dropShadow;n.dropShadow(v,g,h)}this.addListeners(v,this.donutDataLabels),w.setAttrs(v.node,{"data:angle":f,"data:startAngle":s,"data:strokeWidth":this.strokeWidth,"data:value":t[h]});var y={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?y=x.polarToCartesian(this.centerX,this.centerY,r.globals.radialSize/1.25+r.config.plotOptions.pie.dataLabels.offset,(s+f/2)%this.fullAngle):"donut"===this.chartType&&(y=x.polarToCartesian(this.centerX,this.centerY,(r.globals.radialSize+this.donutSize)/2+r.config.plotOptions.pie.dataLabels.offset,(s+f/2)%this.fullAngle)),d.add(v);var b=0;if(!this.initialAnim||r.globals.resized||r.globals.dataChanged?this.animBeginArr.push(0):(0===(b=f/this.fullAngle*r.config.chart.animations.speed)&&(b=1),this.animDur=b+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&r.globals.dataChanged?this.animatePaths(v,{size:this.sliceSizes[h],endAngle:c,startAngle:s,prevStartAngle:l,prevEndAngle:u,animateStartingPos:!0,i:h,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:r.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(v,{size:this.sliceSizes[h],endAngle:c,startAngle:s,i:h,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:b}),r.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&v.click(this.pieClicked.bind(this,h)),void 0!==r.globals.selectedDataPoints[0]&&r.globals.selectedDataPoints[0].indexOf(h)>-1&&this.pieClicked(h),r.config.dataLabels.enabled){var k=y.x,S=y.y,C=100*f/this.fullAngle+"%";if(0!==f&&r.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[h]){var A=r.config.dataLabels.formatter;void 0!==A&&(C=A(r.globals.seriesPercent[h][0],{seriesIndex:h,w:r}));var T=r.globals.dataLabels.style.colors[h],E=i.group({class:"apexcharts-datalabels"}),M=i.drawText({x:k,y:S,text:C,textAnchor:"middle",fontSize:r.config.dataLabels.style.fontSize,fontFamily:r.config.dataLabels.style.fontFamily,fontWeight:r.config.dataLabels.style.fontWeight,foreColor:T});if(E.add(M),r.config.dataLabels.dropShadow.enabled){var I=r.config.dataLabels.dropShadow;n.dropShadow(M,I)}M.node.classList.add("apexcharts-pie-label"),r.config.chart.animations.animate&&!1===r.globals.resized&&(M.node.classList.add("apexcharts-pie-label-delay"),M.node.style.animationDelay=r.config.chart.animations.speed/940+"s"),this.sliceLabels.push(E)}}}return o}},{key:"addListeners",value:function(e,t){var r=new w(this.ctx);e.node.addEventListener("mouseenter",r.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",r.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",r.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}},{key:"animatePaths",value:function(e,t){var r=this.w,n=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,i=n,a=t.startAngle,o=t.startAngle;void 0!==t.prevStartAngle&&void 0!==t.prevEndAngle&&(a=t.prevEndAngle,i=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===r.config.series.length-1&&(n+o>this.fullAngle?t.endAngle=t.endAngle-(n+o):n+o<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(n+o)))),n===this.fullAngle&&(n=this.fullAngle-.01),this.animateArc(e,a,o,n,i,t)}},{key:"animateArc",value:function(e,t,r,n,i,a){var o,s=this,l=this.w,c=new b(this.ctx),u=a.size;(isNaN(t)||isNaN(i))&&(t=r,i=n,a.dur=0);var h=n,d=r,f=t<r?this.fullAngle+t-r:t-r;l.globals.dataChanged&&a.shouldSetPrevPaths&&a.prevEndAngle&&(o=s.getPiePath({me:s,startAngle:a.prevStartAngle,angle:a.prevEndAngle<a.prevStartAngle?this.fullAngle+a.prevEndAngle-a.prevStartAngle:a.prevEndAngle-a.prevStartAngle,size:u}),e.attr({d:o})),0!==a.dur?e.animate(a.dur,l.globals.easing,a.animBeginArr[a.i]).afterAll((function(){"pie"!==s.chartType&&"donut"!==s.chartType&&"polarArea"!==s.chartType||this.animate(l.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":s.strokeWidth}),a.i===l.config.series.length-1&&c.animationCompleted(e)})).during((function(l){h=f+(n-f)*l,a.animateStartingPos&&(h=i+(n-i)*l,d=t-i+(r-(t-i))*l),o=s.getPiePath({me:s,startAngle:d,angle:h,size:u}),e.node.setAttribute("data:pathOrig",o),e.attr({d:o})})):(o=s.getPiePath({me:s,startAngle:d,angle:n,size:u}),a.isTrack||(l.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",o),e.attr({d:o,"stroke-width":s.strokeWidth}))}},{key:"pieClicked",value:function(e){var t,r=this.w,n=this,i=n.sliceSizes[e]+(r.config.plotOptions.pie.expandOnClick?4:0),a=r.globals.dom.Paper.select(".apexcharts-".concat(n.chartType.toLowerCase(),"-slice-").concat(e)).members[0];if("true"!==a.attr("data:pieClicked")){var o=r.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(o,(function(e){e.setAttribute("data:pieClicked","false");var t=e.getAttribute("data:pathOrig");e.setAttribute("d",t)})),a.attr("data:pieClicked","true");var s=parseInt(a.attr("data:startAngle"),10),l=parseInt(a.attr("data:angle"),10);t=n.getPiePath({me:n,startAngle:s,angle:l,size:i}),360!==l&&a.plot(t)}else{a.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(a.node,this.donutDataLabels);var c=a.attr("data:pathOrig");a.attr({d:c})}}},{key:"getChangedPath",value:function(e,t){var r="";return this.dynamicAnim&&this.w.globals.dataChanged&&(r=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),r}},{key:"getPiePath",value:function(e){var t=e.me,r=e.startAngle,n=e.angle,i=e.size,a=r,o=Math.PI*(a-90)/180,s=n+r;Math.ceil(s)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(s=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(s)>this.fullAngle&&(s-=this.fullAngle);var l=Math.PI*(s-90)/180,c=t.centerX+i*Math.cos(o),u=t.centerY+i*Math.sin(o),h=t.centerX+i*Math.cos(l),d=t.centerY+i*Math.sin(l),f=x.polarToCartesian(t.centerX,t.centerY,t.donutSize,s),p=x.polarToCartesian(t.centerX,t.centerY,t.donutSize,a),m=n>180?1:0,v=["M",c,u,"A",i,i,0,m,1,h,d];return"donut"===t.chartType?[].concat(v,["L",f.x,f.y,"A",t.donutSize,t.donutSize,0,m,0,p.x,p.y,"L",c,u,"z"]).join(" "):"pie"===t.chartType||"polarArea"===t.chartType?[].concat(v,["L",t.centerX,t.centerY,"L",c,u]).join(" "):[].concat(v).join(" ")}},{key:"drawPolarElements",value:function(e){var t=this.w,r=new q(this.ctx),n=new w(this.ctx),i=new Ee(this.ctx),a=n.group(),o=n.group(),s=r.niceScale(0,Math.ceil(this.maxY),t.config.yaxis[0].tickAmount,0,!0),l=s.result.reverse(),c=s.result.length;this.maxY=s.niceMax;for(var u=t.globals.radialSize,h=u/(c-1),d=0;d<c-1;d++){var f=n.drawCircle(u);if(f.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var p=i.drawYAxisTexts(this.centerX,this.centerY-u+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,d,l[d]);o.add(p)}a.add(f),u-=h}this.drawSpokes(e),e.add(a),e.add(o)}},{key:"renderInnerDataLabels",value:function(e,t){var r=this.w,n=new w(this.ctx),i=n.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(t.translateX?t.translateX:0,", ").concat(t.translateY?t.translateY:0,") scale(").concat(r.config.plotOptions.pie.customScale,")")}),a=e.total.show;i.node.style.opacity=t.opacity;var o,s,l=t.centerX,c=t.centerY;o=void 0===e.name.color?r.globals.colors[0]:e.name.color;var u=e.name.fontSize,h=e.name.fontFamily,d=e.name.fontWeight;s=void 0===e.value.color?r.config.chart.foreColor:e.value.color;var f=e.value.formatter,p="",m="";if(a?(o=e.total.color,u=e.total.fontSize,h=e.total.fontFamily,d=e.total.fontWeight,m=e.total.label,p=e.total.formatter(r)):1===r.globals.series.length&&(p=f(r.globals.series[0],r),m=r.globals.seriesNames[0]),m&&(m=e.name.formatter(m,e.total.show,r)),e.name.show){var v=n.drawText({x:l,y:c+parseFloat(e.name.offsetY),text:m,textAnchor:"middle",foreColor:o,fontSize:u,fontWeight:d,fontFamily:h});v.node.classList.add("apexcharts-datalabel-label"),i.add(v)}if(e.value.show){var g=e.name.show?parseFloat(e.value.offsetY)+16:e.value.offsetY,y=n.drawText({x:l,y:c+g,text:p,textAnchor:"middle",foreColor:s,fontWeight:e.value.fontWeight,fontSize:e.value.fontSize,fontFamily:e.value.fontFamily});y.node.classList.add("apexcharts-datalabel-value"),i.add(y)}return i}},{key:"printInnerLabels",value:function(e,t,r,n){var i,a=this.w;n?i=void 0===e.name.color?a.globals.colors[parseInt(n.parentNode.getAttribute("rel"),10)-1]:e.name.color:a.globals.series.length>1&&e.total.show&&(i=e.total.color);var o=a.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),s=a.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");r=(0,e.value.formatter)(r,a),n||"function"!=typeof e.total.formatter||(r=e.total.formatter(a));var l=t===e.total.label;t=e.name.formatter(t,l,a),null!==o&&(o.textContent=t),null!==s&&(s.textContent=r),null!==o&&(o.style.fill=i)}},{key:"printDataLabelsInner",value:function(e,t){var r=this.w,n=e.getAttribute("data:value"),i=r.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];r.globals.series.length>1&&this.printInnerLabels(t,i,n,e);var a=r.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==a&&(a.style.opacity=1)}},{key:"drawSpokes",value:function(e){var t=this,r=this.w,n=new w(this.ctx),i=r.config.plotOptions.polarArea.spokes;if(0!==i.strokeWidth){for(var a=[],o=360/r.globals.series.length,s=0;s<r.globals.series.length;s++)a.push(x.polarToCartesian(this.centerX,this.centerY,r.globals.radialSize,r.config.plotOptions.pie.startAngle+o*s));a.forEach((function(r,a){var o=n.drawLine(r.x,r.y,t.centerX,t.centerY,Array.isArray(i.connectorColors)?i.connectorColors[a]:i.connectorColors);e.add(o)}))}}},{key:"revertDataLabelsInner",value:function(e,t,r){var n=this,i=this.w,a=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),o=!1,s=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),l=function(e){var r=e.makeSliceOut,i=e.printLabel;Array.prototype.forEach.call(s,(function(e){"true"===e.getAttribute("data:pieClicked")&&(r&&(o=!0),i&&n.printDataLabelsInner(e,t))}))};if(l({makeSliceOut:!0,printLabel:!1}),t.total.show&&i.globals.series.length>1)o&&!t.total.showAlways?l({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(t,t.total.label,t.total.formatter(i));else if(l({makeSliceOut:!1,printLabel:!0}),!o)if(i.globals.selectedDataPoints.length&&i.globals.series.length>1)if(i.globals.selectedDataPoints[0].length>0){var c=i.globals.selectedDataPoints[0],u=i.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(c));this.printDataLabelsInner(u,t)}else a&&i.globals.selectedDataPoints.length&&0===i.globals.selectedDataPoints[0].length&&(a.style.opacity=0);else a&&i.globals.series.length>1&&(a.style.opacity=0)}}]),e}(),Ie=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var r=this.w;this.graphics=new w(this.ctx),this.lineColorArr=void 0!==r.globals.stroke.colors?r.globals.stroke.colors:r.globals.colors,this.defaultSize=r.globals.svgHeight<r.globals.svgWidth?r.globals.gridHeight+1.5*r.globals.goldenPadding:r.globals.gridWidth,this.isLog=r.config.yaxis[0].logarithmic,this.coreUtils=new k(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(r.globals.maxY,0):r.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):r.globals.minY,this.polygons=r.config.plotOptions.radar.polygons,this.strokeWidth=r.config.stroke.show?r.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-r.config.chart.dropShadow.blur,r.config.xaxis.labels.show&&(this.size=this.size-r.globals.xAxisLabelsWidth/1.75),void 0!==r.config.plotOptions.radar.size&&(this.size=r.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return c(e,[{key:"draw",value:function(e){var t=this,r=this.w,n=new j(this.ctx),i=[],o=new Z(this.ctx);e.length&&(this.dataPointsLen=e[r.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var s=r.globals.gridWidth/2,l=r.globals.gridHeight/2,c=s+r.config.plotOptions.radar.offsetX,u=l+r.config.plotOptions.radar.offsetY,h=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(c||0,", ").concat(u||0,")")}),d=[],f=null,p=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach((function(e,s){var l=e.length===r.globals.dataPoints,c=t.graphics.group().attr({class:"apexcharts-series","data:longestSeries":l,seriesName:x.escapeString(r.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});t.dataRadiusOfPercent[s]=[],t.dataRadius[s]=[],t.angleArr[s]=[],e.forEach((function(e,r){var n=Math.abs(t.maxValue-t.minValue);e+=Math.abs(t.minValue),t.isLog&&(e=t.coreUtils.getLogVal(e,0)),t.dataRadiusOfPercent[s][r]=e/n,t.dataRadius[s][r]=t.dataRadiusOfPercent[s][r]*t.size,t.angleArr[s][r]=r*t.disAngle})),d=t.getDataPointsPos(t.dataRadius[s],t.angleArr[s]);var u=t.createPaths(d,{x:0,y:0});f=t.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),p=t.graphics.group({class:"apexcharts-datalabels","data:realIndex":s}),r.globals.delayedElements.push({el:f.node,index:s});var h={i:s,realIndex:s,animationDelay:s,initialSpeed:r.config.chart.animations.speed,dataChangeSpeed:r.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:r.globals.stroke.colors[s],strokeLineCap:r.config.stroke.lineCap},m=null;r.globals.previousPaths.length>0&&(m=t.getPreviousPath(s));for(var v=0;v<u.linePathsTo.length;v++){var g=t.graphics.renderPaths(a(a({},h),{},{pathFrom:null===m?u.linePathsFrom[v]:m,pathTo:u.linePathsTo[v],strokeWidth:Array.isArray(t.strokeWidth)?t.strokeWidth[s]:t.strokeWidth,fill:"none",drawShadow:!1}));c.add(g);var y=n.fillPath({seriesNumber:s}),b=t.graphics.renderPaths(a(a({},h),{},{pathFrom:null===m?u.areaPathsFrom[v]:m,pathTo:u.areaPathsTo[v],strokeWidth:0,fill:y,drawShadow:!1}));if(r.config.chart.dropShadow.enabled){var w=new _(t.ctx),k=r.config.chart.dropShadow;w.dropShadow(b,Object.assign({},k,{noUserSpaceOnUse:!0}),s)}c.add(b)}e.forEach((function(e,n){var i=new N(t.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:s,dataPointIndex:n}),l=t.graphics.drawMarker(d[n].x,d[n].y,i);l.attr("rel",n),l.attr("j",n),l.attr("index",s),l.node.setAttribute("default-marker-size",i.pSize);var u=t.graphics.group({class:"apexcharts-series-markers"});u&&u.add(l),f.add(u),c.add(f);var h=r.config.dataLabels;if(h.enabled){var m=h.formatter(r.globals.series[s][n],{seriesIndex:s,dataPointIndex:n,w:r});o.plotDataLabelsText({x:d[n].x,y:d[n].y,text:m,textAnchor:"middle",i:s,j:s,parent:p,offsetCorrection:!1,dataLabelsConfig:a({},h)})}c.add(p)})),i.push(c)})),this.drawPolygons({parent:h}),r.config.xaxis.labels.show){var m=this.drawXAxisTexts();h.add(m)}return i.forEach((function(e){h.add(e)})),h.add(this.yaxisLabels),h}},{key:"drawPolygons",value:function(e){for(var t=this,r=this.w,n=e.parent,i=new Ee(this.ctx),a=r.globals.yAxisScale[0].result.reverse(),o=a.length,s=[],l=this.size/(o-1),c=0;c<o;c++)s[c]=l*c;s.reverse();var u=[],h=[];s.forEach((function(e,r){var n=x.getPolygonPos(e,t.dataPointsLen),i="";n.forEach((function(e,n){if(0===r){var a=t.graphics.drawLine(e.x,e.y,0,0,Array.isArray(t.polygons.connectorColors)?t.polygons.connectorColors[n]:t.polygons.connectorColors);h.push(a)}0===n&&t.yaxisLabelsTextsPos.push({x:e.x,y:e.y}),i+=e.x+","+e.y+" "})),u.push(i)})),u.forEach((function(e,i){var a=t.polygons.strokeColors,o=t.polygons.strokeWidth,s=t.graphics.drawPolygon(e,Array.isArray(a)?a[i]:a,Array.isArray(o)?o[i]:o,r.globals.radarPolygons.fill.colors[i]);n.add(s)})),h.forEach((function(e){n.add(e)})),r.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((function(e,r){var n=i.drawYAxisTexts(e.x,e.y,r,a[r]);t.yaxisLabels.add(n)}))}},{key:"drawXAxisTexts",value:function(){var e=this,t=this.w,r=t.config.xaxis.labels,n=this.graphics.group({class:"apexcharts-xaxis"}),i=x.getPolygonPos(this.size,this.dataPointsLen);return t.globals.labels.forEach((function(o,s){var l=t.config.xaxis.labels.formatter,c=new Z(e.ctx);if(i[s]){var u=e.getTextPos(i[s],e.size),h=l(o,{seriesIndex:-1,dataPointIndex:s,w:t});c.plotDataLabelsText({x:u.newX,y:u.newY,text:h,textAnchor:u.textAnchor,i:s,j:s,parent:n,color:Array.isArray(r.style.colors)&&r.style.colors[s]?r.style.colors[s]:"#a8a8a8",dataLabelsConfig:a({textAnchor:u.textAnchor,dropShadow:{enabled:!1}},r),offsetCorrection:!1})}})),n}},{key:"createPaths",value:function(e,t){var r=this,n=[],i=[],a=[],o=[];if(e.length){i=[this.graphics.move(t.x,t.y)],o=[this.graphics.move(t.x,t.y)];var s=this.graphics.move(e[0].x,e[0].y),l=this.graphics.move(e[0].x,e[0].y);e.forEach((function(t,n){s+=r.graphics.line(t.x,t.y),l+=r.graphics.line(t.x,t.y),n===e.length-1&&(s+="Z",l+="Z")})),n.push(s),a.push(l)}return{linePathsFrom:i,linePathsTo:n,areaPathsFrom:o,areaPathsTo:a}}},{key:"getTextPos",value:function(e,t){var r="middle",n=e.x,i=e.y;return Math.abs(e.x)>=10?e.x>0?(r="start",n+=10):e.x<0&&(r="end",n-=10):r="middle",Math.abs(e.y)>=t-10&&(e.y<0?i-=10:e.y>0&&(i+=10)),{textAnchor:r,newX:n,newY:i}}},{key:"getPreviousPath",value:function(e){for(var t=this.w,r=null,n=0;n<t.globals.previousPaths.length;n++){var i=t.globals.previousPaths[n];i.paths.length>0&&parseInt(i.realIndex,10)===parseInt(e,10)&&void 0!==t.globals.previousPaths[n].paths[0]&&(r=t.globals.previousPaths[n].paths[0].d)}return r}},{key:"getDataPointsPos",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;e=e||[],t=t||[];for(var n=[],i=0;i<r;i++){var a={};a.x=e[i]*Math.sin(t[i]),a.y=-e[i]*Math.cos(t[i]),n.push(a)}return n}}]),e}(),Pe=function(e){h(r,Me);var t=m(r);function r(e){var n;s(this,r),(n=t.call(this,e)).ctx=e,n.w=e.w,n.animBeginArr=[0],n.animDur=0;var i=n.w;return n.startAngle=i.config.plotOptions.radialBar.startAngle,n.endAngle=i.config.plotOptions.radialBar.endAngle,n.totalAngle=Math.abs(i.config.plotOptions.radialBar.endAngle-i.config.plotOptions.radialBar.startAngle),n.trackStartAngle=i.config.plotOptions.radialBar.track.startAngle,n.trackEndAngle=i.config.plotOptions.radialBar.track.endAngle,n.donutDataLabels=n.w.config.plotOptions.radialBar.dataLabels,n.radialDataLabels=n.donutDataLabels,n.trackStartAngle||(n.trackStartAngle=n.startAngle),n.trackEndAngle||(n.trackEndAngle=n.endAngle),360===n.endAngle&&(n.endAngle=359.99),n.margin=parseInt(i.config.plotOptions.radialBar.track.margin,10),n}return c(r,[{key:"draw",value:function(e){var t=this.w,r=new w(this.ctx),n=r.group({class:"apexcharts-radialbar"});if(t.globals.noData)return n;var i=r.group(),a=this.defaultSize/2,o=t.globals.gridWidth/2,s=this.defaultSize/2.05;t.config.chart.sparkline.enabled||(s=s-t.config.stroke.width-t.config.chart.dropShadow.blur);var l=t.globals.fill.colors;if(t.config.plotOptions.radialBar.track.show){var c=this.drawTracks({size:s,centerX:o,centerY:a,colorArr:l,series:e});i.add(c)}var u=this.drawArcs({size:s,centerX:o,centerY:a,colorArr:l,series:e}),h=360;t.config.plotOptions.radialBar.startAngle<0&&(h=this.totalAngle);var d=(360-h)/360;if(t.globals.radialSize=s-s*d,this.radialDataLabels.value.show){var f=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);t.globals.radialSize+=f*d}return i.add(u.g),"front"===t.config.plotOptions.radialBar.hollow.position&&(u.g.add(u.elHollow),u.dataLabels&&u.g.add(u.dataLabels)),n.add(i),n}},{key:"drawTracks",value:function(e){var t=this.w,r=new w(this.ctx),n=r.group({class:"apexcharts-tracks"}),i=new _(this.ctx),a=new j(this.ctx),o=this.getStrokeWidth(e);e.size=e.size-o/2;for(var s=0;s<e.series.length;s++){var l=r.group({class:"apexcharts-radialbar-track apexcharts-track"});n.add(l),l.attr({rel:s+1}),e.size=e.size-o-this.margin;var c=t.config.plotOptions.radialBar.track,u=a.fillPath({seriesNumber:0,size:e.size,fillColors:Array.isArray(c.background)?c.background[s]:c.background,solid:!0}),h=this.trackStartAngle,d=this.trackEndAngle;Math.abs(d)+Math.abs(h)>=360&&(d=360-Math.abs(this.startAngle)-.1);var f=r.drawPath({d:"",stroke:u,strokeWidth:o*parseInt(c.strokeWidth,10)/100,fill:"none",strokeOpacity:c.opacity,classes:"apexcharts-radialbar-area"});if(c.dropShadow.enabled){var p=c.dropShadow;i.dropShadow(f,p)}l.add(f),f.attr("id","apexcharts-radialbarTrack-"+s),this.animatePaths(f,{centerX:e.centerX,centerY:e.centerY,endAngle:d,startAngle:h,size:e.size,i:s,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:t.globals.easing})}return n}},{key:"drawArcs",value:function(e){var t=this.w,r=new w(this.ctx),n=new j(this.ctx),i=new _(this.ctx),a=r.group(),o=this.getStrokeWidth(e);e.size=e.size-o/2;var s=t.config.plotOptions.radialBar.hollow.background,l=e.size-o*e.series.length-this.margin*e.series.length-o*parseInt(t.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,c=l-t.config.plotOptions.radialBar.hollow.margin;void 0!==t.config.plotOptions.radialBar.hollow.image&&(s=this.drawHollowImage(e,a,l,s));var u=this.drawHollow({size:c,centerX:e.centerX,centerY:e.centerY,fill:s||"transparent"});if(t.config.plotOptions.radialBar.hollow.dropShadow.enabled){var h=t.config.plotOptions.radialBar.hollow.dropShadow;i.dropShadow(u,h)}var d=1;!this.radialDataLabels.total.show&&t.globals.series.length>1&&(d=0);var f=null;this.radialDataLabels.show&&(f=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:l,centerX:e.centerX,centerY:e.centerY,opacity:d})),"back"===t.config.plotOptions.radialBar.hollow.position&&(a.add(u),f&&a.add(f));var p=!1;t.config.plotOptions.radialBar.inverseOrder&&(p=!0);for(var m=p?e.series.length-1:0;p?m>=0:m<e.series.length;p?m--:m++){var v=r.group({class:"apexcharts-series apexcharts-radial-series",seriesName:x.escapeString(t.globals.seriesNames[m])});a.add(v),v.attr({rel:m+1,"data:realIndex":m}),this.ctx.series.addCollapsedClassToSeries(v,m),e.size=e.size-o-this.margin;var g=n.fillPath({seriesNumber:m,size:e.size,value:e.series[m]}),y=this.startAngle,b=void 0,k=x.negToZero(e.series[m]>100?100:e.series[m])/100,S=Math.round(this.totalAngle*k)+this.startAngle,C=void 0;t.globals.dataChanged&&(b=this.startAngle,C=Math.round(this.totalAngle*x.negToZero(t.globals.previousPaths[m])/100)+b),Math.abs(S)+Math.abs(y)>=360&&(S-=.01),Math.abs(C)+Math.abs(b)>=360&&(C-=.01);var A=S-y,T=Array.isArray(t.config.stroke.dashArray)?t.config.stroke.dashArray[m]:t.config.stroke.dashArray,E=r.drawPath({d:"",stroke:g,strokeWidth:o,fill:"none",fillOpacity:t.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+m,strokeDashArray:T});if(w.setAttrs(E.node,{"data:angle":A,"data:value":e.series[m]}),t.config.chart.dropShadow.enabled){var M=t.config.chart.dropShadow;i.dropShadow(E,M,m)}i.setSelectionFilter(E,0,m),this.addListeners(E,this.radialDataLabels),v.add(E),E.attr({index:0,j:m});var I=0;!this.initialAnim||t.globals.resized||t.globals.dataChanged||(I=t.config.chart.animations.speed),t.globals.dataChanged&&(I=t.config.chart.animations.dynamicAnimation.speed),this.animDur=I/(1.2*e.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(E,{centerX:e.centerX,centerY:e.centerY,endAngle:S,startAngle:y,prevEndAngle:C,prevStartAngle:b,size:e.size,i:m,totalItems:2,animBeginArr:this.animBeginArr,dur:I,shouldSetPrevPaths:!0,easing:t.globals.easing})}return{g:a,elHollow:u,dataLabels:f}}},{key:"drawHollow",value:function(e){var t=new w(this.ctx).drawCircle(2*e.size);return t.attr({class:"apexcharts-radialbar-hollow",cx:e.centerX,cy:e.centerY,r:e.size,fill:e.fill}),t}},{key:"drawHollowImage",value:function(e,t,r,n){var i=this.w,a=new j(this.ctx),o=x.randomId(),s=i.config.plotOptions.radialBar.hollow.image;if(i.config.plotOptions.radialBar.hollow.imageClipped)a.clippedImgArea({width:r,height:r,image:s,patternID:"pattern".concat(i.globals.cuid).concat(o)}),n="url(#pattern".concat(i.globals.cuid).concat(o,")");else{var l=i.config.plotOptions.radialBar.hollow.imageWidth,c=i.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===l&&void 0===c){var u=i.globals.dom.Paper.image(s).loaded((function(t){this.move(e.centerX-t.width/2+i.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-t.height/2+i.config.plotOptions.radialBar.hollow.imageOffsetY)}));t.add(u)}else{var h=i.globals.dom.Paper.image(s).loaded((function(t){this.move(e.centerX-l/2+i.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-c/2+i.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(l,c)}));t.add(h)}}return n}},{key:"getStrokeWidth",value:function(e){var t=this.w;return e.size*(100-parseInt(t.config.plotOptions.radialBar.hollow.size,10))/100/(e.series.length+1)-this.margin}}]),r}(),Re=function(e){h(r,ke);var t=m(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"draw",value:function(e,t){var r=this.w,n=new w(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=e,this.seriesRangeStart=r.globals.seriesRangeStart,this.seriesRangeEnd=r.globals.seriesRangeEnd,this.barHelpers.initVariables(e);for(var i=n.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),o=0;o<e.length;o++){var s,l,c,u=void 0,h=void 0,d=void 0,f=r.globals.comboCharts?t[o]:o,p=n.group({class:"apexcharts-series",seriesName:x.escapeString(r.globals.seriesNames[f]),rel:o+1,"data:realIndex":f});this.ctx.series.addCollapsedClassToSeries(p,f),e[o].length>0&&(this.visibleI=this.visibleI+1);var m=0,v=0;this.yRatio.length>1&&(this.yaxisIndex=f);var g=this.barHelpers.initialPositions();h=g.y,c=g.zeroW,u=g.x,v=g.barWidth,s=g.xDivision,l=g.zeroH;for(var y=n.group({class:"apexcharts-datalabels","data:realIndex":f}),b=n.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),_=0;_<r.globals.dataPoints;_++){var k=this.barHelpers.getStrokeWidth(o,_,f),S=this.seriesRangeStart[o][_],C=this.seriesRangeEnd[o][_],A=null,T=null,E={x:u,y:h,strokeWidth:k,elSeries:p};if(d=g.yDivision,m=g.barHeight,this.isHorizontal){T=h+m*this.visibleI;var M=this.seriesLen;r.config.plotOptions.bar.rangeBarGroupRows&&(M=1);var I=(d-m*M)/2;if(void 0===r.config.series[o].data[_])break;if(r.config.series[o].data[_].x){var P=this.detectOverlappingBars({i:o,j:_,barYPosition:T,srty:I,barHeight:m,yDivision:d,initPositions:g});m=P.barHeight,T=P.barYPosition}v=(A=this.drawRangeBarPaths(a({indexes:{i:o,j:_,realIndex:f},barHeight:m,barYPosition:T,zeroW:c,yDivision:d,y1:S,y2:C},E))).barWidth}else m=(A=this.drawRangeColumnPaths(a({indexes:{i:o,j:_,realIndex:f},zeroH:l,barWidth:v,xDivision:s},E))).barHeight;var R=this.barHelpers.drawGoalLine({barXPosition:A.barXPosition,barYPosition:T,goalX:A.goalX,goalY:A.goalY,barHeight:m,barWidth:v});R&&b.add(R),h=A.y,u=A.x;var z=this.barHelpers.getPathFillColor(e,o,_,f),L=r.globals.stroke.colors[f];this.renderSeries({realIndex:f,pathFill:z,lineFill:L,j:_,i:o,x:u,y:h,y1:S,y2:C,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:k,elSeries:p,series:e,barHeight:m,barYPosition:T,barWidth:v,elDataLabelsWrap:y,elGoalsMarkers:b,visibleSeries:this.visibleI,type:"rangebar"})}i.add(p)}return i}},{key:"detectOverlappingBars",value:function(e){var t=e.i,r=e.j,n=e.barYPosition,i=e.srty,a=e.barHeight,o=e.yDivision,s=e.initPositions,l=this.w,c=[],u=l.config.series[t].data[r].rangeName,h=l.config.series[t].data[r].x,d=l.globals.labels.indexOf(h),f=l.globals.seriesRange[t].findIndex((function(e){return e.x===h&&e.overlaps.length>0}));return n=l.config.plotOptions.bar.rangeBarGroupRows?i+o*d:i+a*this.visibleI+o*d,f>-1&&!l.config.plotOptions.bar.rangeBarOverlap&&(c=l.globals.seriesRange[t][f].overlaps).indexOf(u)>-1&&(n=(a=s.barHeight/c.length)*this.visibleI+o*(100-parseInt(this.barOptions.barHeight,10))/100/2+a*(this.visibleI+c.indexOf(u))+o*d),{barYPosition:n,barHeight:a}}},{key:"drawRangeColumnPaths",value:function(e){var t=e.indexes,r=e.x;e.strokeWidth;var n=e.xDivision,i=e.barWidth,a=e.zeroH,o=this.w,s=t.i,l=t.j,c=this.yRatio[this.yaxisIndex],u=t.realIndex,h=this.getRangeValue(u,l),d=Math.min(h.start,h.end),f=Math.max(h.start,h.end);o.globals.isXNumeric&&(r=(o.globals.seriesX[s][l]-o.globals.minX)/this.xRatio-i/2);var p=r+i*this.visibleI;void 0===this.series[s][l]||null===this.series[s][l]?d=a:(d=a-d/c,f=a-f/c);var m=Math.abs(f-d),v=this.barHelpers.getColumnPaths({barXPosition:p,barWidth:i,y1:d,y2:f,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:t.realIndex,i:u,j:l,w:o});return o.globals.isXNumeric||(r+=n),{pathTo:v.pathTo,pathFrom:v.pathFrom,barHeight:m,x:r,y:f,goalY:this.barHelpers.getGoalValues("y",null,a,s,l),barXPosition:p}}},{key:"drawRangeBarPaths",value:function(e){var t=e.indexes,r=e.y,n=e.y1,i=e.y2,a=e.yDivision,o=e.barHeight,s=e.barYPosition,l=e.zeroW,c=this.w,u=l+n/this.invertedYRatio,h=l+i/this.invertedYRatio,d=Math.abs(h-u),f=this.barHelpers.getBarpaths({barYPosition:s,barHeight:o,x1:u,x2:h,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:t.realIndex,realIndex:t.realIndex,j:t.j,w:c});return c.globals.isXNumeric||(r+=a),{pathTo:f.pathTo,pathFrom:f.pathFrom,barWidth:d,x:h,goalX:this.barHelpers.getGoalValues("x",l,null,t.realIndex,t.j),y:r}}},{key:"getRangeValue",value:function(e,t){var r=this.w;return{start:r.globals.seriesRangeStart[e][t],end:r.globals.seriesRangeEnd[e][t]}}}]),r}(),ze=function(){function e(t){s(this,e),this.w=t.w,this.lineCtx=t}return c(e,[{key:"sameValueSeriesFix",value:function(e,t){var r=this.w;if(("gradient"===r.config.fill.type||"gradient"===r.config.fill.type[e])&&new k(this.lineCtx.ctx,r).seriesHaveSameValues(e)){var n=t[e].slice();n[n.length-1]=n[n.length-1]+1e-6,t[e]=n}return t}},{key:"calculatePoints",value:function(e){var t=e.series,r=e.realIndex,n=e.x,i=e.y,a=e.i,o=e.j,s=e.prevY,l=this.w,c=[],u=[];if(0===o){var h=this.lineCtx.categoryAxisCorrection+l.config.markers.offsetX;l.globals.isXNumeric&&(h=(l.globals.seriesX[r][0]-l.globals.minX)/this.lineCtx.xRatio+l.config.markers.offsetX),c.push(h),u.push(x.isNumber(t[a][0])?s+l.config.markers.offsetY:null),c.push(n+l.config.markers.offsetX),u.push(x.isNumber(t[a][o+1])?i+l.config.markers.offsetY:null)}else c.push(n+l.config.markers.offsetX),u.push(x.isNumber(t[a][o+1])?i+l.config.markers.offsetY:null);return{x:c,y:u}}},{key:"checkPreviousPaths",value:function(e){for(var t=e.pathFromLine,r=e.pathFromArea,n=e.realIndex,i=this.w,a=0;a<i.globals.previousPaths.length;a++){var o=i.globals.previousPaths[a];("line"===o.type||"area"===o.type)&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(n,10)&&("line"===o.type?(this.lineCtx.appendPathFrom=!1,t=i.globals.previousPaths[a].paths[0].d):"area"===o.type&&(this.lineCtx.appendPathFrom=!1,r=i.globals.previousPaths[a].paths[0].d,i.config.stroke.show&&i.globals.previousPaths[a].paths[1]&&(t=i.globals.previousPaths[a].paths[1].d)))}return{pathFromLine:t,pathFromArea:r}}},{key:"determineFirstPrevY",value:function(e){var t,r=e.i,n=e.series,i=e.prevY,a=e.lineYPosition,o=this.w;if(void 0!==(null===(t=n[r])||void 0===t?void 0:t[0]))i=(a=o.config.chart.stacked&&r>0?this.lineCtx.prevSeriesY[r-1][0]:this.lineCtx.zeroY)-n[r][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?n[r][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(o.config.chart.stacked&&r>0&&void 0===n[r][0])for(var s=r-1;s>=0;s--)if(null!==n[s][0]&&void 0!==n[s][0]){i=a=this.lineCtx.prevSeriesY[s][0];break}return{prevY:i,lineYPosition:a}}}]),e}(),Le=function(){function e(t,r,n){s(this,e),this.ctx=t,this.w=t.w,this.xyRatios=r,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||n,this.scatter=new B(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new ze(this),this.markers=new N(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return c(e,[{key:"draw",value:function(e,t,r,n){var i=this.w,o=new w(this.ctx),s=i.globals.comboCharts?t:i.config.chart.type,l=o.group({class:"apexcharts-".concat(s,"-series apexcharts-plot-series")}),c=new k(this.ctx,i);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=c.getLogSeries(e),this.yRatio=c.getLogYRatios(this.yRatio);for(var u=[],h=0;h<e.length;h++){e=this.lineHelpers.sameValueSeriesFix(h,e);var d=i.globals.comboCharts?r[h]:h;this._initSerieVariables(e,h,d);var f=[],p=[],m=i.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,d),i.globals.isXNumeric&&i.globals.seriesX.length>0&&(m=(i.globals.seriesX[d][0]-i.globals.minX)/this.xRatio),p.push(m);var v,g=m,y=void 0,x=g,b=this.zeroY,_=this.zeroY;b=this.lineHelpers.determineFirstPrevY({i:h,series:e,prevY:b,lineYPosition:0}).prevY,f.push(b),v=b,"rangeArea"===s&&(y=_=this.lineHelpers.determineFirstPrevY({i:h,series:n,prevY:_,lineYPosition:0}).prevY);var S={type:s,series:e,realIndex:d,i:h,x:m,y:1,pX:g,pY:v,pathsFrom:this._calculatePathsFrom({type:s,series:e,i:h,realIndex:d,prevX:x,prevY:b,prevY2:_}),linePaths:[],areaPaths:[],seriesIndex:r,lineYPosition:0,xArrj:p,yArrj:f,seriesRangeEnd:n},C=this._iterateOverDataPoints(a(a({},S),{},{iterations:"rangeArea"===s?e[h].length-1:void 0,isRangeStart:!0}));if("rangeArea"===s){var A=this._calculatePathsFrom({series:n,i:h,realIndex:d,prevX:x,prevY:_}),T=this._iterateOverDataPoints(a(a({},S),{},{series:n,pY:y,pathsFrom:A,iterations:n[h].length-1,isRangeStart:!1}));C.linePaths[0]=T.linePath+C.linePath,C.pathFromLine=T.pathFromLine+C.pathFromLine}this._handlePaths({type:s,realIndex:d,i:h,paths:C}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),u.push(this.elSeries)}if(i.config.chart.stacked)for(var E=u.length;E>0;E--)l.add(u[E-1]);else for(var M=0;M<u.length;M++)l.add(u[M]);return l}},{key:"_initSerieVariables",value:function(e,t,r){var n=this.w,i=new w(this.ctx);this.xDivision=n.globals.gridWidth/(n.globals.dataPoints-("on"===n.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(n.config.stroke.width)?n.config.stroke.width[r]:n.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=r),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed,this.zeroY=n.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?n.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>n.globals.gridHeight||"end"===n.config.plotOptions.area.fillTo)&&(this.areaBottomY=n.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=i.group({class:"apexcharts-series",seriesName:x.escapeString(n.globals.seriesNames[r])}),this.elPointsMain=i.group({class:"apexcharts-series-markers-wrap","data:realIndex":r}),this.elDataLabelsWrap=i.group({class:"apexcharts-datalabels","data:realIndex":r});var a=e[t].length===n.globals.dataPoints;this.elSeries.attr({"data:longestSeries":a,rel:t+1,"data:realIndex":r}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var t,r,n,i,a=e.type,o=e.series,s=e.i,l=e.realIndex,c=e.prevX,u=e.prevY,h=e.prevY2,d=this.w,f=new w(this.ctx);if(null===o[s][0]){for(var p=0;p<o[s].length;p++)if(null!==o[s][p]){c=this.xDivision*p,u=this.zeroY-o[s][p]/this.yRatio[this.yaxisIndex],t=f.move(c,u),r=f.move(c,this.areaBottomY);break}}else t=f.move(c,u),"rangeArea"===a&&(t=f.move(c,h)+f.line(c,u)),r=f.move(c,this.areaBottomY)+f.line(c,u);if(n=f.move(-1,this.zeroY)+f.line(-1,this.zeroY),i=f.move(-1,this.zeroY)+f.line(-1,this.zeroY),d.globals.previousPaths.length>0){var m=this.lineHelpers.checkPreviousPaths({pathFromLine:n,pathFromArea:i,realIndex:l});n=m.pathFromLine,i=m.pathFromArea}return{prevX:c,prevY:u,linePath:t,areaPath:r,pathFromLine:n,pathFromArea:i}}},{key:"_handlePaths",value:function(e){var t=e.type,r=e.realIndex,n=e.i,i=e.paths,o=this.w,s=new w(this.ctx),l=new j(this.ctx);this.prevSeriesY.push(i.yArrj),o.globals.seriesXvalues[r]=i.xArrj,o.globals.seriesYvalues[r]=i.yArrj;var c=o.config.forecastDataPoints;if(c.count>0&&"rangeArea"!==t){var u=o.globals.seriesXvalues[r][o.globals.seriesXvalues[r].length-c.count-1],h=s.drawRect(u,0,o.globals.gridWidth,o.globals.gridHeight,0);o.globals.dom.elForecastMask.appendChild(h.node);var d=s.drawRect(0,0,u,o.globals.gridHeight,0);o.globals.dom.elNonForecastMask.appendChild(d.node)}this.pointsChart||o.globals.delayedElements.push({el:this.elPointsMain.node,index:r});var f={i:n,realIndex:r,animationDelay:n,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(t)};if("area"===t)for(var p=l.fillPath({seriesNumber:r}),m=0;m<i.areaPaths.length;m++){var v=s.renderPaths(a(a({},f),{},{pathFrom:i.pathFromArea,pathTo:i.areaPaths[m],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:p}));this.elSeries.add(v)}if(o.config.stroke.show&&!this.pointsChart){var g=null;if("line"===t)g=l.fillPath({seriesNumber:r,i:n});else if("solid"===o.config.stroke.fill.type)g=o.globals.stroke.colors[r];else{var y=o.config.fill;o.config.fill=o.config.stroke.fill,g=l.fillPath({seriesNumber:r,i:n}),o.config.fill=y}for(var x=0;x<i.linePaths.length;x++){var b=g;"rangeArea"===t&&(b=l.fillPath({seriesNumber:r}));var _=a(a({},f),{},{pathFrom:i.pathFromLine,pathTo:i.linePaths[x],stroke:g,strokeWidth:this.strokeWidth,strokeLineCap:o.config.stroke.lineCap,fill:"rangeArea"===t?b:"none"}),k=s.renderPaths(_);if(this.elSeries.add(k),k.attr("fill-rule","evenodd"),c.count>0&&"rangeArea"!==t){var S=s.renderPaths(_);S.node.setAttribute("stroke-dasharray",c.dashArray),c.strokeWidth&&S.node.setAttribute("stroke-width",c.strokeWidth),this.elSeries.add(S),S.attr("clip-path","url(#forecastMask".concat(o.globals.cuid,")")),k.attr("clip-path","url(#nonForecastMask".concat(o.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){var t=e.type,r=e.series,n=e.iterations,i=e.realIndex,a=e.i,o=e.x,s=e.y,l=e.pX,c=e.pY,u=e.pathsFrom,h=e.linePaths,d=e.areaPaths,f=e.seriesIndex,p=e.lineYPosition,m=e.xArrj,v=e.yArrj,g=e.isRangeStart,y=e.seriesRangeEnd,b=this.w,_=new w(this.ctx),k=this.yRatio,S=u.prevY,C=u.linePath,A=u.areaPath,T=u.pathFromLine,E=u.pathFromArea,M=x.isNumber(b.globals.minYArr[i])?b.globals.minYArr[i]:b.globals.minY;n||(n=b.globals.dataPoints>1?b.globals.dataPoints-1:b.globals.dataPoints);for(var I=s,P=0;P<n;P++){var R=void 0===r[a][P+1]||null===r[a][P+1];if(b.globals.isXNumeric){var z=b.globals.seriesX[i][P+1];void 0===b.globals.seriesX[i][P+1]&&(z=b.globals.seriesX[i][n-1]),o=(z-b.globals.minX)/this.xRatio}else o+=this.xDivision;p=b.config.chart.stacked&&a>0&&b.globals.collapsedSeries.length<b.config.series.length-1?this.prevSeriesY[function(e){for(var t=e,r=0;r<b.globals.series.length;r++)if(b.globals.collapsedSeriesIndices.indexOf(e)>-1){t--;break}return t>=0?t:0}(a-1)][P+1]:this.zeroY,R?s=p-M/k[this.yaxisIndex]+2*(this.isReversed?M/k[this.yaxisIndex]:0):(s=p-r[a][P+1]/k[this.yaxisIndex]+2*(this.isReversed?r[a][P+1]/k[this.yaxisIndex]:0),"rangeArea"===t&&(I=p-y[a][P+1]/k[this.yaxisIndex]+2*(this.isReversed?y[a][P+1]/k[this.yaxisIndex]:0))),m.push(o),v.push(s);var L=this.lineHelpers.calculatePoints({series:r,x:o,y:s,realIndex:i,i:a,j:P,prevY:S}),D=this._createPaths({type:t,series:r,i:a,realIndex:i,j:P,x:o,y:s,y2:I,pX:l,pY:c,linePath:C,areaPath:A,linePaths:h,areaPaths:d,seriesIndex:f,isRangeStart:g});d=D.areaPaths,h=D.linePaths,l=D.pX,c=D.pY,A=D.areaPath,C=D.linePath,this.appendPathFrom&&(T+=_.line(o,this.zeroY),E+=_.line(o,this.zeroY)),this.handleNullDataPoints(r,L,a,P,i),this._handleMarkersAndLabels({type:t,pointsPos:L,i:a,j:P,realIndex:i,isRangeStart:g})}return{yArrj:v,xArrj:m,pathFromArea:E,areaPaths:d,pathFromLine:T,linePaths:h,linePath:C,areaPath:A}}},{key:"_handleMarkersAndLabels",value:function(e){var t=e.type,r=e.pointsPos,n=e.isRangeStart,i=e.i,a=e.j,o=e.realIndex,s=this.w,l=new Z(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,a,{realIndex:o,pointsPos:r,zRatio:this.zRatio,elParent:this.elPointsMain});else{s.globals.series[i].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var c=this.markers.plotChartMarkers(r,o,a+1);null!==c&&this.elPointsMain.add(c)}var u=l.drawDataLabel({type:t,isRangeStart:n,pos:r,i:o,j:a+1});null!==u&&this.elDataLabelsWrap.add(u)}},{key:"_createPaths",value:function(e){var t=e.type,r=e.series,n=e.i,i=e.realIndex,a=e.j,o=e.x,s=e.y,l=e.y2,c=e.pX,u=e.pY,h=e.linePath,d=e.areaPath,f=e.linePaths,p=e.areaPaths,m=e.seriesIndex,v=e.isRangeStart,g=this.w,y=new w(this.ctx),x=g.config.stroke.curve,b=this.areaBottomY;if(Array.isArray(g.config.stroke.curve)&&(x=Array.isArray(m)?g.config.stroke.curve[m[n]]:g.config.stroke.curve[n]),"smooth"===x){var _=.35*(o-c);g.globals.hasNullValues?(null!==r[n][a]&&(null!==r[n][a+1]?(h=y.move(c,u)+y.curve(c+_,u,o-_,s,o+1,s),d=y.move(c+1,u)+y.curve(c+_,u,o-_,s,o+1,s)+y.line(o,b)+y.line(c,b)+"z"):(h=y.move(c,u),d=y.move(c,u)+"z")),f.push(h),p.push(d)):(h+=y.curve(c+_,u,o-_,s,o,s),d+=y.curve(c+_,u,o-_,s,o,s)),c=o,u=s,a===r[n].length-2&&(d=d+y.curve(c,u,o,s,o,b)+y.move(o,s)+"z","rangeArea"===t&&v?h=h+y.curve(c,u,o,s,o,l)+y.move(o,l)+"z":g.globals.hasNullValues||(f.push(h),p.push(d)))}else{if(null===r[n][a+1]){h+=y.move(o,s);var k=g.globals.isXNumeric?(g.globals.seriesX[i][a]-g.globals.minX)/this.xRatio:o-this.xDivision;d=d+y.line(k,b)+y.move(o,s)+"z"}null===r[n][a]&&(h+=y.move(o,s),d+=y.move(o,b)),"stepline"===x?(h=h+y.line(o,null,"H")+y.line(null,s,"V"),d=d+y.line(o,null,"H")+y.line(null,s,"V")):"straight"===x&&(h+=y.line(o,s),d+=y.line(o,s)),a===r[n].length-2&&(d=d+y.line(o,b)+y.move(o,s)+"z","rangeArea"===t&&v?h=h+y.line(o,l)+y.move(o,l)+"z":(f.push(h),p.push(d)))}return{linePaths:f,areaPaths:p,pX:c,pY:u,linePath:h,areaPath:d}}},{key:"handleNullDataPoints",value:function(e,t,r,n,i){var a=this.w;if(null===e[r][n]&&a.config.markers.showNullDataPoints||1===e[r].length){var o=this.markers.plotChartMarkers(t,i,n+1,this.strokeWidth-a.config.markers.strokeWidth/2,!0);null!==o&&this.elPointsMain.add(o)}}}]),e}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function e(t,r,n,i){this.xoffset=t,this.yoffset=r,this.height=i,this.width=n,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(e){var t,r=[],n=this.xoffset,i=this.yoffset,o=a(e)/this.height,s=a(e)/this.width;if(this.width>=this.height)for(t=0;t<e.length;t++)r.push([n,i,n+o,i+e[t]/o]),i+=e[t]/o;else for(t=0;t<e.length;t++)r.push([n,i,n+e[t]/s,i+s]),n+=e[t]/s;return r},this.cutArea=function(t){var r;if(this.width>=this.height){var n=t/this.height,i=this.width-n;r=new e(this.xoffset+n,this.yoffset,i,this.height)}else{var a=t/this.width,o=this.height-a;r=new e(this.xoffset,this.yoffset+a,this.width,o)}return r}}function t(t,n,i,o,s){o=void 0===o?0:o,s=void 0===s?0:s;var l=r(function(e,t){var r,n=[],i=t/a(e);for(r=0;r<e.length;r++)n[r]=e[r]*i;return n}(t,n*i),[],new e(o,s,n,i),[]);return function(e){var t,r,n=[];for(t=0;t<e.length;t++)for(r=0;r<e[t].length;r++)n.push(e[t][r]);return n}(l)}function r(e,t,i,o){var s,l,c;if(0!==e.length)return s=i.shortestEdge(),function(e,t,r){var i;return 0===e.length||((i=e.slice()).push(t),n(e,r)>=n(i,r))}(t,l=e[0],s)?(t.push(l),r(e.slice(1),t,i,o)):(c=i.cutArea(a(t),o),o.push(i.getCoordinates(t)),r(e,[],c,o)),o;o.push(i.getCoordinates(t))}function n(e,t){var r=Math.min.apply(Math,e),n=Math.max.apply(Math,e),i=a(e);return Math.max(Math.pow(t,2)*n/Math.pow(i,2),Math.pow(i,2)/(Math.pow(t,2)*r))}function i(e){return e&&e.constructor===Array}function a(e){var t,r=0;for(t=0;t<e.length;t++)r+=e[t];return r}function o(e){var t,r=0;if(i(e[0]))for(t=0;t<e.length;t++)r+=o(e[t]);else r=a(e);return r}return function e(r,n,a,s,l){s=void 0===s?0:s,l=void 0===l?0:l;var c,u,h=[],d=[];if(i(r[0])){for(u=0;u<r.length;u++)h[u]=o(r[u]);for(c=t(h,n,a,s,l),u=0;u<r.length;u++)d.push(e(r[u],c[u][2]-c[u][0],c[u][3]-c[u][1],c[u][0],c[u][1]))}else d=t(r,n,a,s,l);return d}}();var De,Oe,Fe=function(){function e(t,r){s(this,e),this.ctx=t,this.w=t.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Ae(t),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return c(e,[{key:"draw",value:function(e){var t=this,r=this.w,n=new w(this.ctx),i=new j(this.ctx),a=n.group({class:"apexcharts-treemap"});if(r.globals.noData)return a;var o=[];return e.forEach((function(e){var t=e.map((function(e){return Math.abs(e)}));o.push(t)})),this.negRange=this.helpers.checkColorRange(),r.config.series.forEach((function(e,r){e.data.forEach((function(e){Array.isArray(t.labels[r])||(t.labels[r]=[]),t.labels[r].push(e.x)}))})),window.TreemapSquared.generate(o,r.globals.gridWidth,r.globals.gridHeight).forEach((function(o,s){var l=n.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:x.escapeString(r.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});if(r.config.chart.dropShadow.enabled){var c=r.config.chart.dropShadow;new _(t.ctx).dropShadow(a,c,s)}var u=n.group({class:"apexcharts-data-labels"});o.forEach((function(a,o){var c=a[0],u=a[1],h=a[2],d=a[3],f=n.drawRect(c,u,h-c,d-u,0,"#fff",1,t.strokeWidth,r.config.plotOptions.treemap.useFillColorAsStroke?m:r.globals.stroke.colors[s]);f.attr({cx:c,cy:u,index:s,i:s,j:o,width:h-c,height:d-u});var p=t.helpers.getShadeColor(r.config.chart.type,s,o,t.negRange),m=p.color;void 0!==r.config.series[s].data[o]&&r.config.series[s].data[o].fillColor&&(m=r.config.series[s].data[o].fillColor);var v=i.fillPath({color:m,seriesNumber:s,dataPointIndex:o});f.node.classList.add("apexcharts-treemap-rect"),f.attr({fill:v}),t.helpers.addListeners(f);var g={x:c+(h-c)/2,y:u+(d-u)/2,width:0,height:0},y={x:c,y:u,width:h-c,height:d-u};if(r.config.chart.animations.enabled&&!r.globals.dataChanged){var x=1;r.globals.resized||(x=r.config.chart.animations.speed),t.animateTreemap(f,g,y,x)}if(r.globals.dataChanged){var b=1;t.dynamicAnim.enabled&&r.globals.shouldAnimate&&(b=t.dynamicAnim.speed,r.globals.previousPaths[s]&&r.globals.previousPaths[s][o]&&r.globals.previousPaths[s][o].rect&&(g=r.globals.previousPaths[s][o].rect),t.animateTreemap(f,g,y,b))}var _=t.getFontSize(a),w=r.config.dataLabels.formatter(t.labels[s][o],{value:r.globals.series[s][o],seriesIndex:s,dataPointIndex:o,w:r}),k=t.helpers.calculateDataLabels({text:w,x:(c+h)/2,y:(u+d)/2+t.strokeWidth/2+_/3,i:s,j:o,colorProps:p,fontSize:_,series:e});r.config.dataLabels.enabled&&k&&t.rotateToFitLabel(k,_,w,c,u,h,d),l.add(f),null!==k&&l.add(k)})),l.add(u),a.add(l)})),a}},{key:"getFontSize",value:function(e){var t,r,n=this.w,i=function e(t){var r,n=0;if(Array.isArray(t[0]))for(r=0;r<t.length;r++)n+=e(t[r]);else for(r=0;r<t.length;r++)n+=t[r].length;return n}(this.labels)/function e(t){var r,n=0;if(Array.isArray(t[0]))for(r=0;r<t.length;r++)n+=e(t[r]);else for(r=0;r<t.length;r++)n+=1;return n}(this.labels);return t=(e[2]-e[0])*(e[3]-e[1]),r=Math.pow(t,.5),Math.min(r/i,parseInt(n.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(e,t,r,n,i,a,o){var s=new w(this.ctx),l=s.getTextRects(r,t);if(l.width+this.w.config.stroke.width+5>a-n&&l.width<=o-i){var c=s.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(c.x," ").concat(c.y,")"))}}},{key:"animateTreemap",value:function(e,t,r,n){var i=new b(this.ctx);i.animateRect(e,{x:t.x,y:t.y,width:t.width,height:t.height},{x:r.x,y:r.y,width:r.width,height:r.height},n,(function(){i.animationCompleted(e)}))}}]),e}(),je=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return c(e,[{key:"calculateTimeScaleTicks",value:function(e,t){var r=this,n=this.w;if(n.globals.allSeriesCollapsed)return n.globals.labels=[],n.globals.timescaleLabels=[],[];var i=new P(this.ctx),o=(t-e)/864e5;this.determineInterval(o),n.globals.disableZoomIn=!1,n.globals.disableZoomOut=!1,o<.00011574074074074075?n.globals.disableZoomIn=!0:o>5e4&&(n.globals.disableZoomOut=!0);var s=i.getTimeUnitsfromTimestamp(e,t,this.utc),l=n.globals.gridWidth/o,c=l/24,u=c/60,h=u/60,d=Math.floor(24*o),f=Math.floor(1440*o),p=Math.floor(86400*o),m=Math.floor(o),v=Math.floor(o/30),g=Math.floor(o/365),y={minMillisecond:s.minMillisecond,minSecond:s.minSecond,minMinute:s.minMinute,minHour:s.minHour,minDate:s.minDate,minMonth:s.minMonth,minYear:s.minYear},x={firstVal:y,currentMillisecond:y.minMillisecond,currentSecond:y.minSecond,currentMinute:y.minMinute,currentHour:y.minHour,currentMonthDate:y.minDate,currentDate:y.minDate,currentMonth:y.minMonth,currentYear:y.minYear,daysWidthOnXAxis:l,hoursWidthOnXAxis:c,minutesWidthOnXAxis:u,secondsWidthOnXAxis:h,numberOfSeconds:p,numberOfMinutes:f,numberOfHours:d,numberOfDays:m,numberOfMonths:v,numberOfYears:g};switch(this.tickInterval){case"years":this.generateYearScale(x);break;case"months":case"half_year":this.generateMonthScale(x);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(x);break;case"hours":this.generateHourScale(x);break;case"minutes_fives":case"minutes":this.generateMinuteScale(x);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(x)}var b=this.timeScaleArray.map((function(e){var t={position:e.position,unit:e.unit,year:e.year,day:e.day?e.day:1,hour:e.hour?e.hour:0,month:e.month+1};return"month"===e.unit?a(a({},t),{},{day:1,value:e.value+1}):"day"===e.unit||"hour"===e.unit?a(a({},t),{},{value:e.value}):"minute"===e.unit?a(a({},t),{},{value:e.value,minute:e.value}):"second"===e.unit?a(a({},t),{},{value:e.value,minute:e.minute,second:e.second}):e}));return b.filter((function(e){var t=1,i=Math.ceil(n.globals.gridWidth/120),a=e.value;void 0!==n.config.xaxis.tickAmount&&(i=n.config.xaxis.tickAmount),b.length>i&&(t=Math.floor(b.length/i));var o=!1,s=!1;switch(r.tickInterval){case"years":"year"===e.unit&&(o=!0);break;case"half_year":t=7,"year"===e.unit&&(o=!0);break;case"months":t=1,"year"===e.unit&&(o=!0);break;case"months_fortnight":t=15,"year"!==e.unit&&"month"!==e.unit||(o=!0),30===a&&(s=!0);break;case"months_days":t=10,"month"===e.unit&&(o=!0),30===a&&(s=!0);break;case"week_days":t=8,"month"===e.unit&&(o=!0);break;case"days":t=1,"month"===e.unit&&(o=!0);break;case"hours":"day"===e.unit&&(o=!0);break;case"minutes_fives":case"seconds_fives":a%5!=0&&(s=!0);break;case"seconds_tens":a%10!=0&&(s=!0)}if("hours"===r.tickInterval||"minutes_fives"===r.tickInterval||"seconds_tens"===r.tickInterval||"seconds_fives"===r.tickInterval){if(!s)return!0}else if((a%t==0||o)&&!s)return!0}))}},{key:"recalcDimensionsBasedOnFormat",value:function(e,t){var r=this.w,n=this.formatDates(e),i=this.removeOverlappingTS(n);r.globals.timescaleLabels=i.slice(),new ce(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var t=24*e,r=60*t;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case t>2.4:this.tickInterval="hours";break;case r>15:this.tickInterval="minutes_fives";break;case r>5:this.tickInterval="minutes";break;case r>1:this.tickInterval="seconds_tens";break;case 60*r>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var t=e.firstVal,r=e.currentMonth,n=e.currentYear,i=e.daysWidthOnXAxis,a=e.numberOfYears,o=t.minYear,s=0,l=new P(this.ctx),c="year";if(t.minDate>1||t.minMonth>0){var u=l.determineRemainingDaysOfYear(t.minYear,t.minMonth,t.minDate);s=(l.determineDaysOfYear(t.minYear)-u+1)*i,o=t.minYear+1,this.timeScaleArray.push({position:s,value:o,unit:c,year:o,month:x.monthMod(r+1)})}else 1===t.minDate&&0===t.minMonth&&this.timeScaleArray.push({position:s,value:o,unit:c,year:n,month:x.monthMod(r+1)});for(var h=o,d=s,f=0;f<a;f++)h++,d=l.determineDaysOfYear(h-1)*i+d,this.timeScaleArray.push({position:d,value:h,unit:c,year:h,month:1})}},{key:"generateMonthScale",value:function(e){var t=e.firstVal,r=e.currentMonthDate,n=e.currentMonth,i=e.currentYear,a=e.daysWidthOnXAxis,o=e.numberOfMonths,s=n,l=0,c=new P(this.ctx),u="month",h=0;if(t.minDate>1){l=(c.determineDaysOfMonths(n+1,t.minYear)-r+1)*a,s=x.monthMod(n+1);var d=i+h,f=x.monthMod(s),p=s;0===s&&(u="year",p=d,f=1,d+=h+=1),this.timeScaleArray.push({position:l,value:p,unit:u,year:d,month:f})}else this.timeScaleArray.push({position:l,value:s,unit:u,year:i,month:x.monthMod(n)});for(var m=s+1,v=l,g=0,y=1;g<o;g++,y++){0===(m=x.monthMod(m))?(u="year",h+=1):u="month";var b=this._getYear(i,m,h);v=c.determineDaysOfMonths(m,b)*a+v;var _=0===m?b:m;this.timeScaleArray.push({position:v,value:_,unit:u,year:b,month:0===m?1:m}),m++}}},{key:"generateDayScale",value:function(e){var t=e.firstVal,r=e.currentMonth,n=e.currentYear,i=e.hoursWidthOnXAxis,a=e.numberOfDays,o=new P(this.ctx),s="day",l=t.minDate+1,c=l,u=function(e,t,r){return e>o.determineDaysOfMonths(t+1,r)?(c=1,s="month",d=t+=1,t):t},h=(24-t.minHour)*i,d=l,f=u(c,r,n);0===t.minHour&&1===t.minDate?(h=0,d=x.monthMod(t.minMonth),s="month",c=t.minDate,a++):1!==t.minDate&&0===t.minHour&&0===t.minMinute&&(h=0,l=t.minDate,d=l,f=u(c=l,r,n)),this.timeScaleArray.push({position:h,value:d,unit:s,year:this._getYear(n,f,0),month:x.monthMod(f),day:c});for(var p=h,m=0;m<a;m++){s="day",f=u(c+=1,f,this._getYear(n,f,0));var v=this._getYear(n,f,0);p=24*i+p;var g=1===c?x.monthMod(f):c;this.timeScaleArray.push({position:p,value:g,unit:s,year:v,month:x.monthMod(f),day:g})}}},{key:"generateHourScale",value:function(e){var t=e.firstVal,r=e.currentDate,n=e.currentMonth,i=e.currentYear,a=e.minutesWidthOnXAxis,o=e.numberOfHours,s=new P(this.ctx),l="hour",c=function(e,t){return e>s.determineDaysOfMonths(t+1,i)&&(m=1,t+=1),{month:t,date:m}},u=function(e,t){return e>s.determineDaysOfMonths(t+1,i)?t+=1:t},h=60-(t.minMinute+t.minSecond/60),d=h*a,f=t.minHour+1,p=f+1;60===h&&(d=0,p=(f=t.minHour)+1);var m=r,v=u(m,n);this.timeScaleArray.push({position:d,value:f,unit:l,day:m,hour:p,year:i,month:x.monthMod(v)});for(var g=d,y=0;y<o;y++){l="hour",p>=24&&(p=0,l="day",v=c(m+=1,v).month,v=u(m,v));var b=this._getYear(i,v,0);g=0===p&&0===y?h*a:60*a+g;var _=0===p?m:p;this.timeScaleArray.push({position:g,value:_,unit:l,hour:p,day:m,year:b,month:x.monthMod(v)}),p++}}},{key:"generateMinuteScale",value:function(e){for(var t=e.currentMillisecond,r=e.currentSecond,n=e.currentMinute,i=e.currentHour,a=e.currentDate,o=e.currentMonth,s=e.currentYear,l=e.minutesWidthOnXAxis,c=e.secondsWidthOnXAxis,u=e.numberOfMinutes,h=n+1,d=a,f=o,p=s,m=i,v=(60-r-t/1e3)*c,g=0;g<u;g++)h>=60&&(h=0,24===(m+=1)&&(m=0)),this.timeScaleArray.push({position:v,value:h,unit:"minute",hour:m,minute:h,day:d,year:this._getYear(p,f,0),month:x.monthMod(f)}),v+=l,h++}},{key:"generateSecondScale",value:function(e){for(var t=e.currentMillisecond,r=e.currentSecond,n=e.currentMinute,i=e.currentHour,a=e.currentDate,o=e.currentMonth,s=e.currentYear,l=e.secondsWidthOnXAxis,c=e.numberOfSeconds,u=r+1,h=n,d=a,f=o,p=s,m=i,v=(1e3-t)/1e3*l,g=0;g<c;g++)u>=60&&(u=0,++h>=60&&(h=0,24===++m&&(m=0))),this.timeScaleArray.push({position:v,value:u,unit:"second",hour:m,minute:h,second:u,day:d,year:this._getYear(p,f,0),month:x.monthMod(f)}),v+=l,u++}},{key:"createRawDateString",value:function(e,t){var r=e.year;return 0===e.month&&(e.month=1),r+="-"+("0"+e.month.toString()).slice(-2),"day"===e.unit?r+="day"===e.unit?"-"+("0"+t).slice(-2):"-01":r+="-"+("0"+(e.day?e.day:"1")).slice(-2),"hour"===e.unit?r+="hour"===e.unit?"T"+("0"+t).slice(-2):"T00":r+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),"minute"===e.unit?r+=":"+("0"+t).slice(-2):r+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),"second"===e.unit?r+=":"+("0"+t).slice(-2):r+=":00",this.utc&&(r+=".000Z"),r}},{key:"formatDates",value:function(e){var t=this,r=this.w;return e.map((function(e){var n=e.value.toString(),i=new P(t.ctx),a=t.createRawDateString(e,n),o=i.getDate(i.parseDate(a));if(t.utc||(o=i.getDate(i.parseDateWithTimezone(a))),void 0===r.config.xaxis.labels.format){var s="dd MMM",l=r.config.xaxis.labels.datetimeFormatter;"year"===e.unit&&(s=l.year),"month"===e.unit&&(s=l.month),"day"===e.unit&&(s=l.day),"hour"===e.unit&&(s=l.hour),"minute"===e.unit&&(s=l.minute),"second"===e.unit&&(s=l.second),n=i.formatDate(o,s)}else n=i.formatDate(o,r.config.xaxis.labels.format);return{dateString:a,position:e.position,value:n,unit:e.unit,year:e.year,month:e.month}}))}},{key:"removeOverlappingTS",value:function(e){var t,r=this,n=new w(this.ctx),i=!1;e.length>0&&e[0].value&&e.every((function(t){return t.value.length===e[0].value.length}))&&(i=!0,t=n.getTextRects(e[0].value).width);var a=0,o=e.map((function(o,s){if(s>0&&r.w.config.xaxis.labels.hideOverlappingLabels){var l=i?t:n.getTextRects(e[a].value).width,c=e[a].position;return o.position>c+l+10?(a=s,o):null}return o}));return o.filter((function(e){return null!==e}))}},{key:"_getYear",value:function(e,t,r){return e+Math.floor(t/12)+r}}]),e}(),Ne=function(){function e(t,r){s(this,e),this.ctx=r,this.w=r.w,this.el=t}return c(e,[{key:"setupElements",value:function(){var e=this.w.globals,t=this.w.config,r=t.chart.type;e.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(r)>-1,e.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(r)>-1,e.isBarHorizontal=("bar"===t.chart.type||"rangeBar"===t.chart.type||"boxPlot"===t.chart.type)&&t.plotOptions.bar.horizontal,e.chartClass=".apexcharts"+e.chartID,e.dom.baseEl=this.el,e.dom.elWrap=document.createElement("div"),w.setAttrs(e.dom.elWrap,{id:e.chartClass.substring(1),class:"apexcharts-canvas "+e.chartClass.substring(1)}),this.el.appendChild(e.dom.elWrap),e.dom.Paper=new window.SVG.Doc(e.dom.elWrap),e.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(t.chart.offsetX,", ").concat(t.chart.offsetY,")")}),e.dom.Paper.node.style.background=t.chart.background,this.setSVGDimensions(),e.dom.elGraphical=e.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),e.dom.elAnnotations=e.dom.Paper.group().attr({class:"apexcharts-annotations"}),e.dom.elDefs=e.dom.Paper.defs(),e.dom.elLegendWrap=document.createElement("div"),e.dom.elLegendWrap.classList.add("apexcharts-legend"),e.dom.elWrap.appendChild(e.dom.elLegendWrap),e.dom.Paper.add(e.dom.elGraphical),e.dom.elGraphical.add(e.dom.elDefs)}},{key:"plotChartType",value:function(e,t){var r=this.w,n=r.config,i=r.globals,a={series:[],i:[]},o={series:[],i:[]},s={series:[],i:[]},l={series:[],i:[]},c={series:[],i:[]},u={series:[],i:[]},h={series:[],i:[]},d={series:[],i:[]},f={series:[],seriesRangeEnd:[],i:[]};i.series.map((function(t,p){var m=0;void 0!==e[p].type?("column"===e[p].type||"bar"===e[p].type?(i.series.length>1&&n.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),c.series.push(t),c.i.push(p),m++,r.globals.columnSeries=c.series):"area"===e[p].type?(o.series.push(t),o.i.push(p),m++):"line"===e[p].type?(a.series.push(t),a.i.push(p),m++):"scatter"===e[p].type?(s.series.push(t),s.i.push(p)):"bubble"===e[p].type?(l.series.push(t),l.i.push(p),m++):"candlestick"===e[p].type?(u.series.push(t),u.i.push(p),m++):"boxPlot"===e[p].type?(h.series.push(t),h.i.push(p),m++):"rangeBar"===e[p].type?(d.series.push(t),d.i.push(p),m++):"rangeArea"===e[p].type?(f.series.push(i.seriesRangeStart[p]),f.seriesRangeEnd.push(i.seriesRangeEnd[p]),f.i.push(p),m++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),m>1&&(i.comboCharts=!0)):(a.series.push(t),a.i.push(p))}));var p=new Le(this.ctx,t),m=new Ce(this.ctx,t);this.ctx.pie=new Me(this.ctx);var v=new Pe(this.ctx);this.ctx.rangeBar=new Re(this.ctx,t);var g=new Ie(this.ctx),y=[];if(i.comboCharts){if(o.series.length>0&&y.push(p.draw(o.series,"area",o.i)),c.series.length>0)if(r.config.chart.stacked){var x=new Se(this.ctx,t);y.push(x.draw(c.series,c.i))}else this.ctx.bar=new ke(this.ctx,t),y.push(this.ctx.bar.draw(c.series,c.i));if(f.series.length>0&&y.push(p.draw(f.series,"rangeArea",f.i,f.seriesRangeEnd)),a.series.length>0&&y.push(p.draw(a.series,"line",a.i)),u.series.length>0&&y.push(m.draw(u.series,u.i)),h.series.length>0&&y.push(m.draw(h.series,h.i)),d.series.length>0&&y.push(this.ctx.rangeBar.draw(d.series,d.i)),s.series.length>0){var b=new Le(this.ctx,t,!0);y.push(b.draw(s.series,"scatter",s.i))}if(l.series.length>0){var _=new Le(this.ctx,t,!0);y.push(_.draw(l.series,"bubble",l.i))}}else switch(n.chart.type){case"line":y=p.draw(i.series,"line");break;case"area":y=p.draw(i.series,"area");break;case"bar":n.chart.stacked?y=new Se(this.ctx,t).draw(i.series):(this.ctx.bar=new ke(this.ctx,t),y=this.ctx.bar.draw(i.series));break;case"candlestick":case"boxPlot":y=new Ce(this.ctx,t).draw(i.series);break;case"rangeBar":y=this.ctx.rangeBar.draw(i.series);break;case"rangeArea":y=p.draw(i.seriesRangeStart,"rangeArea",void 0,i.seriesRangeEnd);break;case"heatmap":y=new Te(this.ctx,t).draw(i.series);break;case"treemap":y=new Fe(this.ctx,t).draw(i.series);break;case"pie":case"donut":case"polarArea":y=this.ctx.pie.draw(i.series);break;case"radialBar":y=v.draw(i.series);break;case"radar":y=g.draw(i.series);break;default:y=p.draw(i.series)}return y}},{key:"setSVGDimensions",value:function(){var e=this.w.globals,t=this.w.config;e.svgWidth=t.chart.width,e.svgHeight=t.chart.height;var r=x.getDimensions(this.el),n=t.chart.width.toString().split(/[0-9]+/g).pop();"%"===n?x.isNumber(r[0])&&(0===r[0].width&&(r=x.getDimensions(this.el.parentNode)),e.svgWidth=r[0]*parseInt(t.chart.width,10)/100):"px"!==n&&""!==n||(e.svgWidth=parseInt(t.chart.width,10));var i=t.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==e.svgHeight&&""!==e.svgHeight)if("%"===i){var a=x.getDimensions(this.el.parentNode);e.svgHeight=a[1]*parseInt(t.chart.height,10)/100}else e.svgHeight=parseInt(t.chart.height,10);else e.axisCharts?e.svgHeight=e.svgWidth/1.61:e.svgHeight=e.svgWidth/1.2;if(e.svgWidth<0&&(e.svgWidth=0),e.svgHeight<0&&(e.svgHeight=0),w.setAttrs(e.dom.Paper.node,{width:e.svgWidth,height:e.svgHeight}),"%"!==i){var o=t.chart.sparkline.enabled?0:e.axisCharts?t.chart.parentHeightOffset:0;e.dom.Paper.node.parentNode.parentNode.style.minHeight=e.svgHeight+o+"px"}e.dom.elWrap.style.width=e.svgWidth+"px",e.dom.elWrap.style.height=e.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,t=e.translateY,r={transform:"translate("+e.translateX+", "+t+")"};w.setAttrs(e.dom.elGraphical.node,r)}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,t=e.globals,r=0,n=e.config.chart.sparkline.enabled?1:15;n+=e.config.grid.padding.bottom,"top"!==e.config.legend.position&&"bottom"!==e.config.legend.position||!e.config.legend.show||e.config.legend.floating||(r=new he(this.ctx).legendHelpers.getLegendBBox().clwh+10);var i=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),a=2.05*e.globals.radialSize;if(i&&!e.config.chart.sparkline.enabled&&0!==e.config.plotOptions.radialBar.startAngle){var o=x.getBoundingClientRect(i);a=o.bottom;var s=o.bottom-o.top;a=Math.max(2.05*e.globals.radialSize,s)}var l=a+t.translateY+r+n;t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",l),e.config.chart.height&&String(e.config.chart.height).indexOf("%")>0||(t.dom.elWrap.style.height=l+"px",w.setAttrs(t.dom.Paper.node,{height:l}),t.dom.Paper.node.parentNode.parentNode.style.minHeight=l+"px")}},{key:"coreCalculations",value:function(){new $(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,t=function(){return e.w.config.series.map((function(e){return[]}))},r=new O,n=this.w.globals;r.initGlobalVars(n),n.seriesXvalues=t(),n.seriesYvalues=t()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var e=null,t=this.w;if(t.globals.axisCharts){if("back"===t.config.xaxis.crosshairs.position&&new te(this.ctx).drawXCrosshairs(),"back"===t.config.yaxis[0].crosshairs.position&&new te(this.ctx).drawYCrosshairs(),"datetime"===t.config.xaxis.type&&void 0===t.config.xaxis.labels.formatter){this.ctx.timeScale=new je(this.ctx);var r=[];isFinite(t.globals.minX)&&isFinite(t.globals.maxX)&&!t.globals.isBarHorizontal?r=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minX,t.globals.maxX):t.globals.isBarHorizontal&&(r=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minY,t.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(r)}e=new k(this.ctx).getCalculatedRatios()}return e}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,t=this.w;if(t.config.chart.brush.enabled&&"function"!=typeof t.config.chart.events.selection){var r=t.config.chart.brush.targets||[t.config.chart.brush.target];r.forEach((function(t){var r=ApexCharts.getChartByID(t);r.w.globals.brushSource=e.ctx,"function"!=typeof r.w.config.chart.events.zoomed&&(r.w.config.chart.events.zoomed=function(){e.updateSourceChart(r)}),"function"!=typeof r.w.config.chart.events.scrolled&&(r.w.config.chart.events.scrolled=function(){e.updateSourceChart(r)})})),t.config.chart.events.selection=function(e,n){r.forEach((function(e){var r=ApexCharts.getChartByID(e),i=x.clone(t.config.yaxis);if(t.config.chart.brush.autoScaleYaxis&&1===r.w.globals.series.length){var o=new q(r);i=o.autoScaleY(r,i,n)}var s=r.w.config.yaxis.reduce((function(e,t,n){return[].concat(v(e),[a(a({},r.w.config.yaxis[n]),{},{min:i[0].min,max:i[0].max})])}),[]);r.ctx.updateHelpers._updateOptions({xaxis:{min:n.xaxis.min,max:n.xaxis.max},yaxis:s},!1,!1,!1,!1)}))}}}}]),e}(),Be=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"_updateOptions",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise((function(s){var l=[t.ctx];i&&(l=t.ctx.getSyncedCharts()),t.ctx.w.globals.isExecCalled&&(l=[t.ctx],t.ctx.w.globals.isExecCalled=!1),l.forEach((function(i,c){var u=i.w;if(u.globals.shouldAnimate=n,r||(u.globals.resized=!0,u.globals.dataChanged=!0,n&&i.series.getPreviousPaths()),e&&"object"===o(e)&&(i.config=new D(e),e=k.extendArrayProps(i.config,e,u),i.w.globals.chartID!==t.ctx.w.globals.chartID&&delete e.series,u.config=x.extend(u.config,e),a&&(u.globals.lastXAxis=e.xaxis?x.clone(e.xaxis):[],u.globals.lastYAxis=e.yaxis?x.clone(e.yaxis):[],u.globals.initialConfig=x.extend({},u.config),u.globals.initialSeries=x.clone(u.config.series),e.series))){for(var h=0;h<u.globals.collapsedSeriesIndices.length;h++){var d=u.config.series[u.globals.collapsedSeriesIndices[h]];u.globals.collapsedSeries[h].data=u.globals.axisCharts?d.data.slice():d}for(var f=0;f<u.globals.ancillaryCollapsedSeriesIndices.length;f++){var p=u.config.series[u.globals.ancillaryCollapsedSeriesIndices[f]];u.globals.ancillaryCollapsedSeries[f].data=u.globals.axisCharts?p.data.slice():p}i.series.emptyCollapsedSeries(u.config.series)}return i.update(e).then((function(){c===l.length-1&&s(i)}))}))}))}},{key:"_updateSeries",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(i){var a,o=r.w;return o.globals.shouldAnimate=t,o.globals.dataChanged=!0,t&&r.ctx.series.getPreviousPaths(),o.globals.axisCharts?(0===(a=e.map((function(e,t){return r._extendSeries(e,t)}))).length&&(a=[{data:[]}]),o.config.series=a):o.config.series=e.slice(),n&&(o.globals.initialConfig.series=x.clone(o.config.series),o.globals.initialSeries=x.clone(o.config.series)),r.ctx.update().then((function(){i(r.ctx)}))}))}},{key:"_extendSeries",value:function(e,t){var r=this.w,n=r.config.series[t];return a(a({},r.config.series[t]),{},{name:e.name?e.name:n&&n.name,color:e.color?e.color:n&&n.color,type:e.type?e.type:n&&n.type,data:e.data?e.data:n&&n.data})}},{key:"toggleDataPointSelection",value:function(e,t){var r=this.w,n=null,i=".apexcharts-series[data\\:realIndex='".concat(e,"']");return r.globals.axisCharts?n=r.globals.dom.Paper.select("".concat(i," path[j='").concat(t,"'], ").concat(i," circle[j='").concat(t,"'], ").concat(i," rect[j='").concat(t,"']")).members[0]:void 0===t&&(n=r.globals.dom.Paper.select("".concat(i," path[j='").concat(e,"']")).members[0],"pie"!==r.config.chart.type&&"polarArea"!==r.config.chart.type&&"donut"!==r.config.chart.type||this.ctx.pie.pieClicked(e)),n?(new w(this.ctx).pathMouseDown(n,null),n.node?n.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t=this.w;if(["min","max"].forEach((function(r){void 0!==e.xaxis[r]&&(t.config.xaxis[r]=e.xaxis[r],t.globals.lastXAxis[r]=e.xaxis[r])})),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric){var r=new L(e);e=r.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){return e.chart&&e.chart.stacked&&"100%"===e.chart.stackType&&(Array.isArray(e.yaxis)?e.yaxis.forEach((function(t,r){e.yaxis[r].min=0,e.yaxis[r].max=100})):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var t=this,r=this.w,n=r.globals.lastXAxis,i=r.globals.lastYAxis;e&&e.xaxis&&(n=e.xaxis),e&&e.yaxis&&(i=e.yaxis),r.config.xaxis.min=n.min,r.config.xaxis.max=n.max;r.config.yaxis.map((function(e,n){r.globals.zoomed||void 0!==i[n]?function(e){void 0!==i[e]&&(r.config.yaxis[e].min=i[e].min,r.config.yaxis[e].max=i[e].max)}(n):void 0!==t.ctx.opts.yaxis[n]&&(e.min=t.ctx.opts.yaxis[n].min,e.max=t.ctx.opts.yaxis[n].max)}))}}]),e}();De="undefined"!=typeof window?window:void 0,Oe=function(e,t){var r=(void 0!==this?this:e).SVG=function(e){if(r.supported)return e=new r.Doc(e),r.parser.draw||r.prepare(),e};if(r.ns="http://www.w3.org/2000/svg",r.xmlns="http://www.w3.org/2000/xmlns/",r.xlink="http://www.w3.org/1999/xlink",r.svgjs="http://svgjs.dev",r.supported=!0,!r.supported)return!1;r.did=1e3,r.eid=function(e){return"Svgjs"+h(e)+r.did++},r.create=function(e){var r=t.createElementNS(this.ns,e);return r.setAttribute("id",this.eid(e)),r},r.extend=function(){var e,t;t=(e=[].slice.call(arguments)).pop();for(var n=e.length-1;n>=0;n--)if(e[n])for(var i in t)e[n].prototype[i]=t[i];r.Set&&r.Set.inherit&&r.Set.inherit()},r.invent=function(e){var t="function"==typeof e.create?e.create:function(){this.constructor.call(this,r.create(e.create))};return e.inherit&&(t.prototype=new e.inherit),e.extend&&r.extend(t,e.extend),e.construct&&r.extend(e.parent||r.Container,e.construct),t},r.adopt=function(t){return t?t.instance?t.instance:((n="svg"==t.nodeName?t.parentNode instanceof e.SVGElement?new r.Nested:new r.Doc:"linearGradient"==t.nodeName?new r.Gradient("linear"):"radialGradient"==t.nodeName?new r.Gradient("radial"):r[h(t.nodeName)]?new(r[h(t.nodeName)]):new r.Element(t)).type=t.nodeName,n.node=t,t.instance=n,n instanceof r.Doc&&n.namespace().defs(),n.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),n):null;var n},r.prepare=function(){var e=t.getElementsByTagName("body")[0],n=(e?new r.Doc(e):r.adopt(t.documentElement).nested()).size(2,0);r.parser={body:e||t.documentElement,draw:n.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:n.polyline().node,path:n.path().node,native:r.create("svg")}},r.parser={native:r.create("svg")},t.addEventListener("DOMContentLoaded",(function(){r.parser.draw||r.prepare()}),!1),r.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},r.utils={map:function(e,t){for(var r=e.length,n=[],i=0;i<r;i++)n.push(t(e[i]));return n},filter:function(e,t){for(var r=e.length,n=[],i=0;i<r;i++)t(e[i])&&n.push(e[i]);return n},filterSVGElements:function(t){return this.filter(t,(function(t){return t instanceof e.SVGElement}))}},r.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},r.Color=function(e){var t,n;this.r=0,this.g=0,this.b=0,e&&("string"==typeof e?r.regex.isRgb.test(e)?(t=r.regex.rgb.exec(e.replace(r.regex.whitespace,"")),this.r=parseInt(t[1]),this.g=parseInt(t[2]),this.b=parseInt(t[3])):r.regex.isHex.test(e)&&(t=r.regex.hex.exec(4==(n=e).length?["#",n.substring(1,2),n.substring(1,2),n.substring(2,3),n.substring(2,3),n.substring(3,4),n.substring(3,4)].join(""):n),this.r=parseInt(t[1],16),this.g=parseInt(t[2],16),this.b=parseInt(t[3],16)):"object"===o(e)&&(this.r=e.r,this.g=e.g,this.b=e.b))},r.extend(r.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+d(this.r)+d(this.g)+d(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(e){return this.destination=new r.Color(e),this},at:function(e){return this.destination?(e=e<0?0:e>1?1:e,new r.Color({r:~~(this.r+(this.destination.r-this.r)*e),g:~~(this.g+(this.destination.g-this.g)*e),b:~~(this.b+(this.destination.b-this.b)*e)})):this}}),r.Color.test=function(e){return e+="",r.regex.isHex.test(e)||r.regex.isRgb.test(e)},r.Color.isRgb=function(e){return e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b},r.Color.isColor=function(e){return r.Color.isRgb(e)||r.Color.test(e)},r.Array=function(e,t){0==(e=(e||[]).valueOf()).length&&t&&(e=t.valueOf()),this.value=this.parse(e)},r.extend(r.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(e){return e=e.valueOf(),Array.isArray(e)?e:this.split(e)}}),r.PointArray=function(e,t){r.Array.call(this,e,t||[[0,0]])},r.PointArray.prototype=new r.Array,r.PointArray.prototype.constructor=r.PointArray;for(var n={M:function(e,t,r){return t.x=r.x=e[0],t.y=r.y=e[1],["M",t.x,t.y]},L:function(e,t){return t.x=e[0],t.y=e[1],["L",e[0],e[1]]},H:function(e,t){return t.x=e[0],["H",e[0]]},V:function(e,t){return t.y=e[0],["V",e[0]]},C:function(e,t){return t.x=e[4],t.y=e[5],["C",e[0],e[1],e[2],e[3],e[4],e[5]]},Q:function(e,t){return t.x=e[2],t.y=e[3],["Q",e[0],e[1],e[2],e[3]]},Z:function(e,t,r){return t.x=r.x,t.y=r.y,["Z"]}},i="mlhvqtcsaz".split(""),a=0,s=i.length;a<s;++a)n[i[a]]=function(e){return function(t,r,i){if("H"==e)t[0]=t[0]+r.x;else if("V"==e)t[0]=t[0]+r.y;else if("A"==e)t[5]=t[5]+r.x,t[6]=t[6]+r.y;else for(var a=0,o=t.length;a<o;++a)t[a]=t[a]+(a%2?r.y:r.x);if(n&&"function"==typeof n[e])return n[e](t,r,i)}}(i[a].toUpperCase());r.PathArray=function(e,t){r.Array.call(this,e,t||[["M",0,0]])},r.PathArray.prototype=new r.Array,r.PathArray.prototype.constructor=r.PathArray,r.extend(r.PathArray,{toString:function(){return function(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t][0],null!=e[t][1]&&(n+=e[t][1],null!=e[t][2]&&(n+=" ",n+=e[t][2],null!=e[t][3]&&(n+=" ",n+=e[t][3],n+=" ",n+=e[t][4],null!=e[t][5]&&(n+=" ",n+=e[t][5],n+=" ",n+=e[t][6],null!=e[t][7]&&(n+=" ",n+=e[t][7])))));return n+" "}(this.value)},move:function(e,t){var r=this.bbox();return r.x,r.y,this},at:function(e){if(!this.destination)return this;for(var t=this.value,n=this.destination.value,i=[],a=new r.PathArray,o=0,s=t.length;o<s;o++){i[o]=[t[o][0]];for(var l=1,c=t[o].length;l<c;l++)i[o][l]=t[o][l]+(n[o][l]-t[o][l])*e;"A"===i[o][0]&&(i[o][4]=+(0!=i[o][4]),i[o][5]=+(0!=i[o][5]))}return a.value=i,a},parse:function(e){if(e instanceof r.PathArray)return e.valueOf();var t,i={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};e="string"==typeof e?e.replace(r.regex.numbersWithDots,c).replace(r.regex.pathLetters," $& ").replace(r.regex.hyphen,"$1 -").trim().split(r.regex.delimiter):e.reduce((function(e,t){return[].concat.call(e,t)}),[]);var a=[],o=new r.Point,s=new r.Point,l=0,u=e.length;do{r.regex.isPathLetter.test(e[l])?(t=e[l],++l):"M"==t?t="L":"m"==t&&(t="l"),a.push(n[t].call(null,e.slice(l,l+=i[t.toUpperCase()]).map(parseFloat),o,s))}while(u>l);return a},bbox:function(){return r.parser.draw||r.prepare(),r.parser.path.setAttribute("d",this.toString()),r.parser.path.getBBox()}}),r.Number=r.invent({create:function(e,t){this.value=0,this.unit=t||"","number"==typeof e?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:"string"==typeof e?(t=e.match(r.regex.numberAndUnit))&&(this.value=parseFloat(t[1]),"%"==t[5]?this.value/=100:"s"==t[5]&&(this.value*=1e3),this.unit=t[5]):e instanceof r.Number&&(this.value=e.valueOf(),this.unit=e.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(e){return e=new r.Number(e),new r.Number(this+e,this.unit||e.unit)},minus:function(e){return e=new r.Number(e),new r.Number(this-e,this.unit||e.unit)},times:function(e){return e=new r.Number(e),new r.Number(this*e,this.unit||e.unit)},divide:function(e){return e=new r.Number(e),new r.Number(this/e,this.unit||e.unit)},to:function(e){var t=new r.Number(this);return"string"==typeof e&&(t.unit=e),t},morph:function(e){return this.destination=new r.Number(e),e.relative&&(this.destination.value+=this.value),this},at:function(e){return this.destination?new r.Number(this.destination).minus(this).times(e).plus(this):this}}}),r.Element=r.invent({create:function(e){this._stroke=r.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=e)&&(this.type=e.nodeName,this.node.instance=this,this._stroke=e.getAttribute("stroke")||this._stroke)},extend:{x:function(e){return this.attr("x",e)},y:function(e){return this.attr("y",e)},cx:function(e){return null==e?this.x()+this.width()/2:this.x(e-this.width()/2)},cy:function(e){return null==e?this.y()+this.height()/2:this.y(e-this.height()/2)},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},width:function(e){return this.attr("width",e)},height:function(e){return this.attr("height",e)},size:function(e,t){var n=f(this,e,t);return this.width(new r.Number(n.width)).height(new r.Number(n.height))},clone:function(e){this.writeDataToDom();var t=v(this.node.cloneNode(!0));return e?e.add(t):this.after(t),t},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(e){return this.after(e).remove(),e},addTo:function(e){return e.put(this)},putIn:function(e){return e.add(this)},id:function(e){return this.attr("id",e)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var e=this.attr("class");return null==e?[]:e.trim().split(r.regex.delimiter)},hasClass:function(e){return-1!=this.classes().indexOf(e)},addClass:function(e){if(!this.hasClass(e)){var t=this.classes();t.push(e),this.attr("class",t.join(" "))}return this},removeClass:function(e){return this.hasClass(e)&&this.attr("class",this.classes().filter((function(t){return t!=e})).join(" ")),this},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)},reference:function(e){return r.get(this.attr(e))},parent:function(t){var n=this;if(!n.node.parentNode)return null;if(n=r.adopt(n.node.parentNode),!t)return n;for(;n&&n.node instanceof e.SVGElement;){if("string"==typeof t?n.matches(t):n instanceof t)return n;if(!n.node.parentNode||"#document"==n.node.parentNode.nodeName)return null;n=r.adopt(n.node.parentNode)}},doc:function(){return this instanceof r.Doc?this:this.parent(r.Doc)},parents:function(e){var t=[],r=this;do{if(!(r=r.parent(e))||!r.node)break;t.push(r)}while(r.parent);return t},matches:function(e){return function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}(this.node,e)},native:function(){return this.node},svg:function(e){var n=t.createElement("svg");if(!(e&&this instanceof r.Parent))return n.appendChild(e=t.createElement("svg")),this.writeDataToDom(),e.appendChild(this.node.cloneNode(!0)),n.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");n.innerHTML="<svg>"+e.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var i=0,a=n.firstChild.childNodes.length;i<a;i++)this.node.appendChild(n.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each((function(){this.writeDataToDom()})),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(e){return this.dom=e,this},is:function(e){return function(e,t){return e instanceof t}(this,e)}}}),r.easing={"-":function(e){return e},"<>":function(e){return-Math.cos(e*Math.PI)/2+.5},">":function(e){return Math.sin(e*Math.PI/2)},"<":function(e){return 1-Math.cos(e*Math.PI/2)}},r.morph=function(e){return function(t,n){return new r.MorphObj(t,n).at(e)}},r.Situation=r.invent({create:function(e){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new r.Number(e.duration).valueOf(),this.delay=new r.Number(e.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=e.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),r.FX=r.invent({create:function(e){this._target=e,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(e,t,n){"object"===o(e)&&(t=e.ease,n=e.delay,e=e.duration);var i=new r.Situation({duration:e||1e3,delay:n||0,ease:r.easing[t||"-"]||t});return this.queue(i),this},target:function(e){return e&&e instanceof r.Element?(this._target=e,this):this._target},timeToAbsPos:function(e){return(e-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(e){return this.situation.duration/this._speed*e+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=e.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){e.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(e){return("function"==typeof e||e instanceof r.Situation)&&this.situations.push(e),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof r.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var e,t=this.situation;if(t.init)return this;for(var n in t.animations){e=this.target()[n](),Array.isArray(e)||(e=[e]),Array.isArray(t.animations[n])||(t.animations[n]=[t.animations[n]]);for(var i=e.length;i--;)t.animations[n][i]instanceof r.Number&&(e[i]=new r.Number(e[i])),t.animations[n][i]=e[i].morph(t.animations[n][i])}for(var n in t.attrs)t.attrs[n]=new r.MorphObj(this.target().attr(n),t.attrs[n]);for(var n in t.styles)t.styles[n]=new r.MorphObj(this.target().style(n),t.styles[n]);return t.initialTransformation=this.target().matrixify(),t.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(e,t){var r=this.active;return this.active=!1,t&&this.clearQueue(),e&&this.situation&&(!r&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(e){var t=this.last();return this.target().on("finished.fx",(function r(n){n.detail.situation==t&&(e.call(this,t),this.off("finished.fx",r))})),this._callStart()},during:function(e){var t=this.last(),n=function(n){n.detail.situation==t&&e.call(this,n.detail.pos,r.morph(n.detail.pos),n.detail.eased,t)};return this.target().off("during.fx",n).on("during.fx",n),this.after((function(){this.off("during.fx",n)})),this._callStart()},afterAll:function(e){var t=function t(r){e.call(this),this.off("allfinished.fx",t)};return this.target().off("allfinished.fx",t).on("allfinished.fx",t),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(e,t,r){return this.last()[r||"animations"][e]=t,this._callStart()},step:function(e){var t,r,n;e||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(t=Math.max(this.absPos,0),r=Math.floor(t),!0===this.situation.loops||r<this.situation.loops?(this.pos=t-r,n=this.situation.loop,this.situation.loop=r):(this.absPos=this.situation.loops,this.pos=1,n=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-n)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var i=this.situation.ease(this.pos);for(var a in this.situation.once)a>this.lastPos&&a<=i&&(this.situation.once[a].call(this.target(),this.pos,i),delete this.situation.once[a]);return this.active&&this.target().fire("during",{pos:this.pos,eased:i,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=i,this):this},eachAt:function(){var e,t=this,n=this.target(),i=this.situation;for(var a in i.animations)e=[].concat(i.animations[a]).map((function(e){return"string"!=typeof e&&e.at?e.at(i.ease(t.pos),t.pos):e})),n[a].apply(n,e);for(var a in i.attrs)e=[a].concat(i.attrs[a]).map((function(e){return"string"!=typeof e&&e.at?e.at(i.ease(t.pos),t.pos):e})),n.attr.apply(n,e);for(var a in i.styles)e=[a].concat(i.styles[a]).map((function(e){return"string"!=typeof e&&e.at?e.at(i.ease(t.pos),t.pos):e})),n.style.apply(n,e);if(i.transforms.length){e=i.initialTransformation,a=0;for(var o=i.transforms.length;a<o;a++){var s=i.transforms[a];s instanceof r.Matrix?e=s.relative?e.multiply((new r.Matrix).morph(s).at(i.ease(this.pos))):e.morph(s).at(i.ease(this.pos)):(s.relative||s.undo(e.extract()),e=e.multiply(s.at(i.ease(this.pos))))}n.matrix(e)}return this},once:function(e,t,r){var n=this.last();return r||(e=n.ease(e)),n.once[e]=t,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:r.Element,construct:{animate:function(e,t,n){return(this.fx||(this.fx=new r.FX(this))).animate(e,t,n)},delay:function(e){return(this.fx||(this.fx=new r.FX(this))).delay(e)},stop:function(e,t){return this.fx&&this.fx.stop(e,t),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),r.MorphObj=r.invent({create:function(e,t){return r.Color.isColor(t)?new r.Color(e).morph(t):r.regex.delimiter.test(e)?r.regex.pathLetters.test(e)?new r.PathArray(e).morph(t):new r.Array(e).morph(t):r.regex.numberAndUnit.test(t)?new r.Number(e).morph(t):(this.value=e,void(this.destination=t))},extend:{at:function(e,t){return t<1?this.value:this.destination},valueOf:function(){return this.value}}}),r.extend(r.FX,{attr:function(e,t,r){if("object"===o(e))for(var n in e)this.attr(n,e[n]);else this.add(e,t,"attrs");return this},plot:function(e,t,r,n){return 4==arguments.length?this.plot([e,t,r,n]):this.add("plot",new(this.target().morphArray)(e))}}),r.Box=r.invent({create:function(e,t,n,i){if(!("object"!==o(e)||e instanceof r.Element))return r.Box.call(this,null!=e.left?e.left:e.x,null!=e.top?e.top:e.y,e.width,e.height);4==arguments.length&&(this.x=e,this.y=t,this.width=n,this.height=i),g(this)}}),r.BBox=r.invent({create:function(e){if(r.Box.apply(this,[].slice.call(arguments)),e instanceof r.Element){var n;try{if(!t.documentElement.contains){for(var i=e.node;i.parentNode;)i=i.parentNode;if(i!=t)throw new Error("Element not in the dom")}n=e.node.getBBox()}catch(t){if(e instanceof r.Shape){r.parser.draw||r.prepare();var a=e.clone(r.parser.draw.instance).show();a&&a.node&&"function"==typeof a.node.getBBox&&(n=a.node.getBBox()),a&&"function"==typeof a.remove&&a.remove()}else n={x:e.node.clientLeft,y:e.node.clientTop,width:e.node.clientWidth,height:e.node.clientHeight}}r.Box.call(this,n)}},inherit:r.Box,parent:r.Element,construct:{bbox:function(){return new r.BBox(this)}}}),r.BBox.prototype.constructor=r.BBox,r.Matrix=r.invent({create:function(e){var t=m([1,0,0,1,0,0]);e=null===e?t:e instanceof r.Element?e.matrixify():"string"==typeof e?m(e.split(r.regex.delimiter).map(parseFloat)):6==arguments.length?m([].slice.call(arguments)):Array.isArray(e)?m(e):e&&"object"===o(e)?e:t;for(var n=x.length-1;n>=0;--n)this[x[n]]=null!=e[x[n]]?e[x[n]]:t[x[n]]},extend:{extract:function(){var e=p(this,0,1);p(this,1,0);var t=180/Math.PI*Math.atan2(e.y,e.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(t*Math.PI/180)+this.f*Math.sin(t*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(t*Math.PI/180)+this.e*Math.sin(-t*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new r.Matrix(this)}},clone:function(){return new r.Matrix(this)},morph:function(e){return this.destination=new r.Matrix(e),this},multiply:function(e){return new r.Matrix(this.native().multiply(function(e){return e instanceof r.Matrix||(e=new r.Matrix(e)),e}(e).native()))},inverse:function(){return new r.Matrix(this.native().inverse())},translate:function(e,t){return new r.Matrix(this.native().translate(e||0,t||0))},native:function(){for(var e=r.parser.native.createSVGMatrix(),t=x.length-1;t>=0;t--)e[x[t]]=this[x[t]];return e},toString:function(){return"matrix("+y(this.a)+","+y(this.b)+","+y(this.c)+","+y(this.d)+","+y(this.e)+","+y(this.f)+")"}},parent:r.Element,construct:{ctm:function(){return new r.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof r.Nested){var e=this.rect(1,1),t=e.node.getScreenCTM();return e.remove(),new r.Matrix(t)}return new r.Matrix(this.node.getScreenCTM())}}}),r.Point=r.invent({create:function(e,t){var r;r=Array.isArray(e)?{x:e[0],y:e[1]}:"object"===o(e)?{x:e.x,y:e.y}:null!=e?{x:e,y:null!=t?t:e}:{x:0,y:0},this.x=r.x,this.y=r.y},extend:{clone:function(){return new r.Point(this)},morph:function(e,t){return this.destination=new r.Point(e,t),this}}}),r.extend(r.Element,{point:function(e,t){return new r.Point(e,t).transform(this.screenCTM().inverse())}}),r.extend(r.Element,{attr:function(e,t,n){if(null==e){for(e={},n=(t=this.node.attributes).length-1;n>=0;n--)e[t[n].nodeName]=r.regex.isNumber.test(t[n].nodeValue)?parseFloat(t[n].nodeValue):t[n].nodeValue;return e}if("object"===o(e))for(var i in e)this.attr(i,e[i]);else if(null===t)this.node.removeAttribute(e);else{if(null==t)return null==(t=this.node.getAttribute(e))?r.defaults.attrs[e]:r.regex.isNumber.test(t)?parseFloat(t):t;"stroke-width"==e?this.attr("stroke",parseFloat(t)>0?this._stroke:null):"stroke"==e&&(this._stroke=t),"fill"!=e&&"stroke"!=e||(r.regex.isImage.test(t)&&(t=this.doc().defs().image(t,0,0)),t instanceof r.Image&&(t=this.doc().defs().pattern(0,0,(function(){this.add(t)})))),"number"==typeof t?t=new r.Number(t):r.Color.isColor(t)?t=new r.Color(t):Array.isArray(t)&&(t=new r.Array(t)),"leading"==e?this.leading&&this.leading(t):"string"==typeof n?this.node.setAttributeNS(n,e,t.toString()):this.node.setAttribute(e,t.toString()),!this.rebuild||"font-size"!=e&&"x"!=e||this.rebuild(e,t)}return this}}),r.extend(r.Element,{transform:function(e,t){var n;return"object"!==o(e)?(n=new r.Matrix(this).extract(),"string"==typeof e?n[e]:n):(n=new r.Matrix(this),t=!!t||!!e.relative,null!=e.a&&(n=t?n.multiply(new r.Matrix(e)):new r.Matrix(e)),this.attr("transform",n))}}),r.extend(r.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(r.regex.transforms).slice(0,-1).map((function(e){var t=e.trim().split("(");return[t[0],t[1].split(r.regex.delimiter).map((function(e){return parseFloat(e)}))]})).reduce((function(e,t){return"matrix"==t[0]?e.multiply(m(t[1])):e[t[0]].apply(e,t[1])}),new r.Matrix)},toParent:function(e){if(this==e)return this;var t=this.screenCTM(),r=e.screenCTM().inverse();return this.addTo(e).untransform().transform(r.multiply(t)),this},toDoc:function(){return this.toParent(this.doc())}}),r.Transformation=r.invent({create:function(e,t){if(arguments.length>1&&"boolean"!=typeof t)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(e))for(var r=0,n=this.arguments.length;r<n;++r)this[this.arguments[r]]=e[r];else if(e&&"object"===o(e))for(r=0,n=this.arguments.length;r<n;++r)this[this.arguments[r]]=e[this.arguments[r]];this.inversed=!1,!0===t&&(this.inversed=!0)}}),r.Translate=r.invent({parent:r.Matrix,inherit:r.Transformation,create:function(e,t){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),r.extend(r.Element,{style:function(e,t){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===o(e))for(var n in e)this.style(n,e[n]);else{if(!r.regex.isCss.test(e))return this.node.style[u(e)];for(e=e.split(/\s*;\s*/).filter((function(e){return!!e})).map((function(e){return e.split(/\s*:\s*/)}));t=e.pop();)this.style(t[0],t[1])}else this.node.style[u(e)]=null===t||r.regex.isBlank.test(t)?"":t;return this}}),r.Parent=r.invent({create:function(e){this.constructor.call(this,e)},inherit:r.Element,extend:{children:function(){return r.utils.map(r.utils.filterSVGElements(this.node.childNodes),(function(e){return r.adopt(e)}))},add:function(e,t){return null==t?this.node.appendChild(e.node):e.node!=this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this},put:function(e,t){return this.add(e,t),e},has:function(e){return this.index(e)>=0},index:function(e){return[].slice.call(this.node.childNodes).indexOf(e.node)},get:function(e){return r.adopt(this.node.childNodes[e])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(e,t){for(var n=this.children(),i=0,a=n.length;i<a;i++)n[i]instanceof r.Element&&e.apply(n[i],[i,n]),t&&n[i]instanceof r.Container&&n[i].each(e,t);return this},removeElement:function(e){return this.node.removeChild(e.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),r.extend(r.Parent,{ungroup:function(e,t){return 0===t||this instanceof r.Defs||this.node==r.parser.draw||(e=e||(this instanceof r.Doc?this:this.parent(r.Parent)),t=t||1/0,this.each((function(){return this instanceof r.Defs?this:this instanceof r.Parent?this.ungroup(e,t-1):this.toParent(e)})),this.node.firstChild||this.remove()),this},flatten:function(e,t){return this.ungroup(e,t)}}),r.Container=r.invent({create:function(e){this.constructor.call(this,e)},inherit:r.Parent}),r.ViewBox=r.invent({parent:r.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach((function(e){r.Element.prototype[e]=function(t){return r.on(this.node,e,t),this}})),r.listeners=[],r.handlerMap=[],r.listenerId=0,r.on=function(e,t,n,i,a){var o=n.bind(i||e.instance||e),s=(r.handlerMap.indexOf(e)+1||r.handlerMap.push(e))-1,l=t.split(".")[0],c=t.split(".")[1]||"*";r.listeners[s]=r.listeners[s]||{},r.listeners[s][l]=r.listeners[s][l]||{},r.listeners[s][l][c]=r.listeners[s][l][c]||{},n._svgjsListenerId||(n._svgjsListenerId=++r.listenerId),r.listeners[s][l][c][n._svgjsListenerId]=o,e.addEventListener(l,o,a||{passive:!0})},r.off=function(e,t,n){var i=r.handlerMap.indexOf(e),a=t&&t.split(".")[0],o=t&&t.split(".")[1],s="";if(-1!=i)if(n){if("function"==typeof n&&(n=n._svgjsListenerId),!n)return;r.listeners[i][a]&&r.listeners[i][a][o||"*"]&&(e.removeEventListener(a,r.listeners[i][a][o||"*"][n],!1),delete r.listeners[i][a][o||"*"][n])}else if(o&&a){if(r.listeners[i][a]&&r.listeners[i][a][o]){for(var l in r.listeners[i][a][o])r.off(e,[a,o].join("."),l);delete r.listeners[i][a][o]}}else if(o)for(var c in r.listeners[i])for(var s in r.listeners[i][c])o===s&&r.off(e,[c,o].join("."));else if(a){if(r.listeners[i][a]){for(var s in r.listeners[i][a])r.off(e,[a,s].join("."));delete r.listeners[i][a]}}else{for(var c in r.listeners[i])r.off(e,c);delete r.listeners[i],delete r.handlerMap[i]}},r.extend(r.Element,{on:function(e,t,n,i){return r.on(this.node,e,t,n,i),this},off:function(e,t){return r.off(this.node,e,t),this},fire:function(t,n){return t instanceof e.Event?this.node.dispatchEvent(t):this.node.dispatchEvent(t=new r.CustomEvent(t,{detail:n,cancelable:!0})),this._event=t,this},event:function(){return this._event}}),r.Defs=r.invent({create:"defs",inherit:r.Container}),r.G=r.invent({create:"g",inherit:r.Container,extend:{x:function(e){return null==e?this.transform("x"):this.transform({x:e-this.x()},!0)}},construct:{group:function(){return this.put(new r.G)}}}),r.Doc=r.invent({create:function(e){e&&("svg"==(e="string"==typeof e?t.getElementById(e):e).nodeName?this.constructor.call(this,e):(this.constructor.call(this,r.create("svg")),e.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:r.Container,extend:{namespace:function(){return this.attr({xmlns:r.ns,version:"1.1"}).attr("xmlns:xlink",r.xlink,r.xmlns).attr("xmlns:svgjs",r.svgjs,r.xmlns)},defs:function(){var e;return this._defs||((e=this.node.getElementsByTagName("defs")[0])?this._defs=r.adopt(e):this._defs=new r.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,r.parser.draw&&!r.parser.draw.parentNode&&this.node.appendChild(r.parser.draw),this},clone:function(e){this.writeDataToDom();var t=this.node,r=v(t.cloneNode(!0));return e?(e.node||e).appendChild(r.node):t.parentNode.insertBefore(r.node,t.nextSibling),r}}}),r.extend(r.Element,{}),r.Gradient=r.invent({create:function(e){this.constructor.call(this,r.create(e+"Gradient")),this.type=e},inherit:r.Container,extend:{at:function(e,t,n){return this.put(new r.Stop).update(e,t,n)},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(e,t,n){return"transform"==e&&(e="gradientTransform"),r.Container.prototype.attr.call(this,e,t,n)}},construct:{gradient:function(e,t){return this.defs().gradient(e,t)}}}),r.extend(r.Gradient,r.FX,{from:function(e,t){return"radial"==(this._target||this).type?this.attr({fx:new r.Number(e),fy:new r.Number(t)}):this.attr({x1:new r.Number(e),y1:new r.Number(t)})},to:function(e,t){return"radial"==(this._target||this).type?this.attr({cx:new r.Number(e),cy:new r.Number(t)}):this.attr({x2:new r.Number(e),y2:new r.Number(t)})}}),r.extend(r.Defs,{gradient:function(e,t){return this.put(new r.Gradient(e)).update(t)}}),r.Stop=r.invent({create:"stop",inherit:r.Element,extend:{update:function(e){return("number"==typeof e||e instanceof r.Number)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new r.Number(e.offset)),this}}}),r.Pattern=r.invent({create:"pattern",inherit:r.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},toString:function(){return this.fill()},attr:function(e,t,n){return"transform"==e&&(e="patternTransform"),r.Container.prototype.attr.call(this,e,t,n)}},construct:{pattern:function(e,t,r){return this.defs().pattern(e,t,r)}}}),r.extend(r.Defs,{pattern:function(e,t,n){return this.put(new r.Pattern).update(n).attr({x:0,y:0,width:e,height:t,patternUnits:"userSpaceOnUse"})}}),r.Shape=r.invent({create:function(e){this.constructor.call(this,e)},inherit:r.Element}),r.Symbol=r.invent({create:"symbol",inherit:r.Container,construct:{symbol:function(){return this.put(new r.Symbol)}}}),r.Use=r.invent({create:"use",inherit:r.Shape,extend:{element:function(e,t){return this.attr("href",(t||"")+"#"+e,r.xlink)}},construct:{use:function(e,t){return this.put(new r.Use).element(e,t)}}}),r.Rect=r.invent({create:"rect",inherit:r.Shape,construct:{rect:function(e,t){return this.put(new r.Rect).size(e,t)}}}),r.Circle=r.invent({create:"circle",inherit:r.Shape,construct:{circle:function(e){return this.put(new r.Circle).rx(new r.Number(e).divide(2)).move(0,0)}}}),r.extend(r.Circle,r.FX,{rx:function(e){return this.attr("r",e)},ry:function(e){return this.rx(e)}}),r.Ellipse=r.invent({create:"ellipse",inherit:r.Shape,construct:{ellipse:function(e,t){return this.put(new r.Ellipse).size(e,t).move(0,0)}}}),r.extend(r.Ellipse,r.Rect,r.FX,{rx:function(e){return this.attr("rx",e)},ry:function(e){return this.attr("ry",e)}}),r.extend(r.Circle,r.Ellipse,{x:function(e){return null==e?this.cx()-this.rx():this.cx(e+this.rx())},y:function(e){return null==e?this.cy()-this.ry():this.cy(e+this.ry())},cx:function(e){return null==e?this.attr("cx"):this.attr("cx",e)},cy:function(e){return null==e?this.attr("cy"):this.attr("cy",e)},width:function(e){return null==e?2*this.rx():this.rx(new r.Number(e).divide(2))},height:function(e){return null==e?2*this.ry():this.ry(new r.Number(e).divide(2))},size:function(e,t){var n=f(this,e,t);return this.rx(new r.Number(n.width).divide(2)).ry(new r.Number(n.height).divide(2))}}),r.Line=r.invent({create:"line",inherit:r.Shape,extend:{array:function(){return new r.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(e,t,n,i){return null==e?this.array():(e=void 0!==t?{x1:e,y1:t,x2:n,y2:i}:new r.PointArray(e).toLine(),this.attr(e))},move:function(e,t){return this.attr(this.array().move(e,t).toLine())},size:function(e,t){var r=f(this,e,t);return this.attr(this.array().size(r.width,r.height).toLine())}},construct:{line:function(e,t,n,i){return r.Line.prototype.plot.apply(this.put(new r.Line),null!=e?[e,t,n,i]:[0,0,0,0])}}}),r.Polyline=r.invent({create:"polyline",inherit:r.Shape,construct:{polyline:function(e){return this.put(new r.Polyline).plot(e||new r.PointArray)}}}),r.Polygon=r.invent({create:"polygon",inherit:r.Shape,construct:{polygon:function(e){return this.put(new r.Polygon).plot(e||new r.PointArray)}}}),r.extend(r.Polyline,r.Polygon,{array:function(){return this._array||(this._array=new r.PointArray(this.attr("points")))},plot:function(e){return null==e?this.array():this.clear().attr("points","string"==typeof e?e:this._array=new r.PointArray(e))},clear:function(){return delete this._array,this},move:function(e,t){return this.attr("points",this.array().move(e,t))},size:function(e,t){var r=f(this,e,t);return this.attr("points",this.array().size(r.width,r.height))}}),r.extend(r.Line,r.Polyline,r.Polygon,{morphArray:r.PointArray,x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},width:function(e){var t=this.bbox();return null==e?t.width:this.size(e,t.height)},height:function(e){var t=this.bbox();return null==e?t.height:this.size(t.width,e)}}),r.Path=r.invent({create:"path",inherit:r.Shape,extend:{morphArray:r.PathArray,array:function(){return this._array||(this._array=new r.PathArray(this.attr("d")))},plot:function(e){return null==e?this.array():this.clear().attr("d","string"==typeof e?e:this._array=new r.PathArray(e))},clear:function(){return delete this._array,this}},construct:{path:function(e){return this.put(new r.Path).plot(e||new r.PathArray)}}}),r.Image=r.invent({create:"image",inherit:r.Shape,extend:{load:function(t){if(!t)return this;var n=this,i=new e.Image;return r.on(i,"load",(function(){r.off(i);var e=n.parent(r.Pattern);null!==e&&(0==n.width()&&0==n.height()&&n.size(i.width,i.height),e&&0==e.width()&&0==e.height()&&e.size(n.width(),n.height()),"function"==typeof n._loaded&&n._loaded.call(n,{width:i.width,height:i.height,ratio:i.width/i.height,url:t}))})),r.on(i,"error",(function(e){r.off(i),"function"==typeof n._error&&n._error.call(n,e)})),this.attr("href",i.src=this.src=t,r.xlink)},loaded:function(e){return this._loaded=e,this},error:function(e){return this._error=e,this}},construct:{image:function(e,t,n){return this.put(new r.Image).load(e).size(t||0,n||t||0)}}}),r.Text=r.invent({create:function(){this.constructor.call(this,r.create("text")),this.dom.leading=new r.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",r.defaults.attrs["font-family"])},inherit:r.Shape,extend:{x:function(e){return null==e?this.attr("x"):this.attr("x",e)},text:function(e){if(void 0===e){e="";for(var t=this.node.childNodes,n=0,i=t.length;n<i;++n)0!=n&&3!=t[n].nodeType&&1==r.adopt(t[n]).dom.newLined&&(e+="\n"),e+=t[n].textContent;return e}if(this.clear().build(!0),"function"==typeof e)e.call(this,this);else{n=0;for(var a=(e=e.split("\n")).length;n<a;n++)this.tspan(e[n]).newLine()}return this.build(!1).rebuild()},size:function(e){return this.attr("font-size",e).rebuild()},leading:function(e){return null==e?this.dom.leading:(this.dom.leading=new r.Number(e),this.rebuild())},lines:function(){var e=(this.textPath&&this.textPath()||this).node,t=r.utils.map(r.utils.filterSVGElements(e.childNodes),(function(e){return r.adopt(e)}));return new r.Set(t)},rebuild:function(e){if("boolean"==typeof e&&(this._rebuild=e),this._rebuild){var t=this,n=0,i=this.dom.leading*new r.Number(this.attr("font-size"));this.lines().each((function(){this.dom.newLined&&(t.textPath()||this.attr("x",t.attr("x")),"\n"==this.text()?n+=i:(this.attr("dy",i+n),n=0))})),this.fire("rebuild")}return this},build:function(e){return this._build=!!e,this},setData:function(e){return this.dom=e,this.dom.leading=new r.Number(e.leading||1.3),this}},construct:{text:function(e){return this.put(new r.Text).text(e)},plain:function(e){return this.put(new r.Text).plain(e)}}}),r.Tspan=r.invent({create:"tspan",inherit:r.Shape,extend:{text:function(e){return null==e?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof e?e.call(this,this):this.plain(e),this)},dx:function(e){return this.attr("dx",e)},dy:function(e){return this.attr("dy",e)},newLine:function(){var e=this.parent(r.Text);return this.dom.newLined=!0,this.dy(e.dom.leading*e.attr("font-size")).attr("x",e.x())}}}),r.extend(r.Text,r.Tspan,{plain:function(e){return!1===this._build&&this.clear(),this.node.appendChild(t.createTextNode(e)),this},tspan:function(e){var t=(this.textPath&&this.textPath()||this).node,n=new r.Tspan;return!1===this._build&&this.clear(),t.appendChild(n.node),n.text(e)},clear:function(){for(var e=(this.textPath&&this.textPath()||this).node;e.hasChildNodes();)e.removeChild(e.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),r.TextPath=r.invent({create:"textPath",inherit:r.Parent,parent:r.Text,construct:{morphArray:r.PathArray,array:function(){var e=this.track();return e?e.array():null},plot:function(e){var t=this.track(),r=null;return t&&(r=t.plot(e)),null==e?r:this},track:function(){var e=this.textPath();if(e)return e.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return r.adopt(this.node.firstChild)}}}),r.Nested=r.invent({create:function(){this.constructor.call(this,r.create("svg")),this.style("overflow","visible")},inherit:r.Container,construct:{nested:function(){return this.put(new r.Nested)}}});var l={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(e,t){return"color"==t?e:e+"-"+t}};function c(e,t,n,i){return n+i.replace(r.regex.dots," .")}function u(e){return e.toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))}function h(e){return e.charAt(0).toUpperCase()+e.slice(1)}function d(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function f(e,t,r){if(null==t||null==r){var n=e.bbox();null==t?t=n.width/n.height*r:null==r&&(r=n.height/n.width*t)}return{width:t,height:r}}function p(e,t,r){return{x:t*e.a+r*e.c+0,y:t*e.b+r*e.d+0}}function m(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}function v(t){for(var n=t.childNodes.length-1;n>=0;n--)t.childNodes[n]instanceof e.SVGElement&&v(t.childNodes[n]);return r.adopt(t).id(r.eid(t.nodeName))}function g(e){return null==e.x&&(e.x=0,e.y=0,e.width=0,e.height=0),e.w=e.width,e.h=e.height,e.x2=e.x+e.width,e.y2=e.y+e.height,e.cx=e.x+e.width/2,e.cy=e.y+e.height/2,e}function y(e){return Math.abs(e)>1e-37?e:0}["fill","stroke"].forEach((function(e){var t={};t[e]=function(t){if(void 0===t)return this;if("string"==typeof t||r.Color.isRgb(t)||t&&"function"==typeof t.fill)this.attr(e,t);else for(var n=l[e].length-1;n>=0;n--)null!=t[l[e][n]]&&this.attr(l.prefix(e,l[e][n]),t[l[e][n]]);return this},r.extend(r.Element,r.FX,t)})),r.extend(r.Element,r.FX,{translate:function(e,t){return this.transform({x:e,y:t})},matrix:function(e){return this.attr("transform",new r.Matrix(6==arguments.length?[].slice.call(arguments):e))},opacity:function(e){return this.attr("opacity",e)},dx:function(e){return this.x(new r.Number(e).plus(this instanceof r.FX?0:this.x()),!0)},dy:function(e){return this.y(new r.Number(e).plus(this instanceof r.FX?0:this.y()),!0)}}),r.extend(r.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(e){return this.node.getPointAtLength(e)}}),r.Set=r.invent({create:function(e){Array.isArray(e)?this.members=e:this.clear()},extend:{add:function(){for(var e=[].slice.call(arguments),t=0,r=e.length;t<r;t++)this.members.push(e[t]);return this},remove:function(e){var t=this.index(e);return t>-1&&this.members.splice(t,1),this},each:function(e){for(var t=0,r=this.members.length;t<r;t++)e.apply(this.members[t],[t,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(e){return this.index(e)>=0},index:function(e){return this.members.indexOf(e)},get:function(e){return this.members[e]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(e){return new r.Set(e)}}}),r.FX.Set=r.invent({create:function(e){this.set=e}}),r.Set.inherit=function(){var e=[];for(var t in r.Shape.prototype)"function"==typeof r.Shape.prototype[t]&&"function"!=typeof r.Set.prototype[t]&&e.push(t);for(var t in e.forEach((function(e){r.Set.prototype[e]=function(){for(var t=0,n=this.members.length;t<n;t++)this.members[t]&&"function"==typeof this.members[t][e]&&this.members[t][e].apply(this.members[t],arguments);return"animate"==e?this.fx||(this.fx=new r.FX.Set(this)):this}})),e=[],r.FX.prototype)"function"==typeof r.FX.prototype[t]&&"function"!=typeof r.FX.Set.prototype[t]&&e.push(t);e.forEach((function(e){r.FX.Set.prototype[e]=function(){for(var t=0,r=this.set.members.length;t<r;t++)this.set.members[t].fx[e].apply(this.set.members[t].fx,arguments);return this}}))},r.extend(r.Element,{}),r.extend(r.Element,{remember:function(e,t){if("object"===o(arguments[0]))for(var r in e)this.remember(r,e[r]);else{if(1==arguments.length)return this.memory()[e];this.memory()[e]=t}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this},memory:function(){return this._memory||(this._memory={})}}),r.get=function(e){var n=t.getElementById(function(e){var t=(e||"").toString().match(r.regex.reference);if(t)return t[1]}(e)||e);return r.adopt(n)},r.select=function(e,n){return new r.Set(r.utils.map((n||t).querySelectorAll(e),(function(e){return r.adopt(e)})))},r.extend(r.Parent,{select:function(e){return r.select(e,this.node)}});var x="abcdef".split("");if("function"!=typeof e.CustomEvent){var b=function(e,r){r=r||{bubbles:!1,cancelable:!1,detail:void 0};var n=t.createEvent("CustomEvent");return n.initCustomEvent(e,r.bubbles,r.cancelable,r.detail),n};b.prototype=e.Event.prototype,r.CustomEvent=b}else r.CustomEvent=e.CustomEvent;return r},void 0!==(n=function(){return Oe(De,De.document)}.call(t,r,t,e))&&(e.exports=n),function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(e,t){return this.add(e,t),!e.attr("in")&&this.autoSetIn&&e.attr("in",this.source),e.attr("result")||e.attr("result",e),e},blend:function(e,t,r){return this.put(new SVG.BlendEffect(e,t,r))},colorMatrix:function(e,t){return this.put(new SVG.ColorMatrixEffect(e,t))},convolveMatrix:function(e){return this.put(new SVG.ConvolveMatrixEffect(e))},componentTransfer:function(e){return this.put(new SVG.ComponentTransferEffect(e))},composite:function(e,t,r){return this.put(new SVG.CompositeEffect(e,t,r))},flood:function(e,t){return this.put(new SVG.FloodEffect(e,t))},offset:function(e,t){return this.put(new SVG.OffsetEffect(e,t))},image:function(e){return this.put(new SVG.ImageEffect(e))},merge:function(){var e=[void 0];for(var t in arguments)e.push(arguments[t]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,e)))},gaussianBlur:function(e,t){return this.put(new SVG.GaussianBlurEffect(e,t))},morphology:function(e,t){return this.put(new SVG.MorphologyEffect(e,t))},diffuseLighting:function(e,t,r){return this.put(new SVG.DiffuseLightingEffect(e,t,r))},displacementMap:function(e,t,r,n,i){return this.put(new SVG.DisplacementMapEffect(e,t,r,n,i))},specularLighting:function(e,t,r,n){return this.put(new SVG.SpecularLightingEffect(e,t,r,n))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(e,t,r,n,i){return this.put(new SVG.TurbulenceEffect(e,t,r,n,i))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(e){var t=this.put(new SVG.Filter);return"function"==typeof e&&e.call(t,t),t}}),SVG.extend(SVG.Container,{filter:function(e){return this.defs().filter(e)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(e){return this.filterer=e instanceof SVG.Element?e:this.doc().filter(e),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(e){return this.filterer&&!0===e&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",e)},result:function(e){return null==e?this.attr("result"):this.attr("result",e)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",e)},result:function(e){return null==e?this.attr("result"):this.attr("result",e)},toString:function(){return this.result()}}});var e={blend:function(e,t){return this.parent()&&this.parent().blend(this,e,t)},colorMatrix:function(e,t){return this.parent()&&this.parent().colorMatrix(e,t).in(this)},convolveMatrix:function(e){return this.parent()&&this.parent().convolveMatrix(e).in(this)},componentTransfer:function(e){return this.parent()&&this.parent().componentTransfer(e).in(this)},composite:function(e,t){return this.parent()&&this.parent().composite(this,e,t)},flood:function(e,t){return this.parent()&&this.parent().flood(e,t)},offset:function(e,t){return this.parent()&&this.parent().offset(e,t).in(this)},image:function(e){return this.parent()&&this.parent().image(e)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(e,t){return this.parent()&&this.parent().gaussianBlur(e,t).in(this)},morphology:function(e,t){return this.parent()&&this.parent().morphology(e,t).in(this)},diffuseLighting:function(e,t,r){return this.parent()&&this.parent().diffuseLighting(e,t,r).in(this)},displacementMap:function(e,t,r,n){return this.parent()&&this.parent().displacementMap(this,e,t,r,n)},specularLighting:function(e,t,r,n){return this.parent()&&this.parent().specularLighting(e,t,r,n).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(e,t,r,n,i){return this.parent()&&this.parent().turbulence(e,t,r,n,i).in(this)}};SVG.extend(SVG.Effect,e),SVG.extend(SVG.ParentEffect,e),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(e){this.attr("in",e)}}});var t={blend:function(e,t,r){this.attr({in:e,in2:t,mode:r||"normal"})},colorMatrix:function(e,t){"matrix"==e&&(t=i(t)),this.attr({type:e,values:void 0===t?null:t})},convolveMatrix:function(e){e=i(e),this.attr({order:Math.sqrt(e.split(" ").length),kernelMatrix:e})},composite:function(e,t,r){this.attr({in:e,in2:t,operator:r})},flood:function(e,t){this.attr("flood-color",e),null!=t&&this.attr("flood-opacity",t)},offset:function(e,t){this.attr({dx:e,dy:t})},image:function(e){this.attr("href",e,SVG.xlink)},displacementMap:function(e,t,r,n,i){this.attr({in:e,in2:t,scale:r,xChannelSelector:n,yChannelSelector:i})},gaussianBlur:function(e,t){null!=e||null!=t?this.attr("stdDeviation",a(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(e,t){this.attr({operator:e,radius:t})},tile:function(){},turbulence:function(e,t,r,n,i){this.attr({numOctaves:t,seed:r,stitchTiles:n,baseFrequency:e,type:i})}},r={merge:function(){var e;if(arguments[0]instanceof SVG.Set){var t=this;arguments[0].each((function(e){this instanceof SVG.MergeNode?t.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&t.put(new SVG.MergeNode(this))}))}else{e=Array.isArray(arguments[0])?arguments[0]:arguments;for(var r=0;r<e.length;r++)e[r]instanceof SVG.MergeNode?this.put(e[r]):this.put(new SVG.MergeNode(e[r]))}},componentTransfer:function(e){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(e){this[e]=new(SVG["Func"+e.toUpperCase()])("identity"),this.rgb.add(this[e]),this.node.appendChild(this[e].node)}.bind(this)),e)for(var t in e.rgb&&(["r","g","b"].forEach(function(t){this[t].attr(e.rgb)}.bind(this)),delete e.rgb),e)this[t].attr(e[t])},diffuseLighting:function(e,t,r){this.attr({surfaceScale:e,diffuseConstant:t,kernelUnitLength:r})},specularLighting:function(e,t,r,n){this.attr({surfaceScale:e,diffuseConstant:t,specularExponent:r,kernelUnitLength:n})}},n={distantLight:function(e,t){this.attr({azimuth:e,elevation:t})},pointLight:function(e,t,r){this.attr({x:e,y:t,z:r})},spotLight:function(e,t,r,n,i,a){this.attr({x:e,y:t,z:r,pointsAtX:n,pointsAtY:i,pointsAtZ:a})},mergeNode:function(e){this.attr("in",e)}};function i(e){return Array.isArray(e)&&(e=new SVG.Array(e)),e.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function a(e){if(!Array.isArray(e))return e;for(var t=0,r=e.length,n=[];t<r;t++)n.push(e[t]);return n.join(" ")}function o(){var e=function(){};for(var t in"function"==typeof arguments[arguments.length-1]&&(e=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var r in arguments[t])e(arguments[t][r],r,arguments[t])}["r","g","b","a"].forEach((function(e){n["Func"+e.toUpperCase()]=function(e){switch(this.attr("type",e),e){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}})),o(t,(function(e,t){var r=t.charAt(0).toUpperCase()+t.slice(1);SVG[r+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+r)),e.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})})),o(r,(function(e,t){var r=t.charAt(0).toUpperCase()+t.slice(1);SVG[r+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+r)),e.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})})),o(n,(function(e,t){var r=t.charAt(0).toUpperCase()+t.slice(1);SVG[r]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+r)),e.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})})),SVG.extend(SVG.MergeEffect,{in:function(e){return e instanceof SVG.MergeNode?this.add(e,0):this.add(new SVG.MergeNode(e),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",e)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function e(e,i,a,o,s,l,c){for(var u=e.slice(i,a||c),h=o.slice(s,l||c),d=0,f={pos:[0,0],start:[0,0]},p={pos:[0,0],start:[0,0]};u[d]=t.call(f,u[d]),h[d]=t.call(p,h[d]),u[d][0]!=h[d][0]||"M"==u[d][0]||"A"==u[d][0]&&(u[d][4]!=h[d][4]||u[d][5]!=h[d][5])?(Array.prototype.splice.apply(u,[d,1].concat(n.call(f,u[d]))),Array.prototype.splice.apply(h,[d,1].concat(n.call(p,h[d])))):(u[d]=r.call(f,u[d]),h[d]=r.call(p,h[d])),++d!=u.length||d!=h.length;)d==u.length&&u.push(["C",f.pos[0],f.pos[1],f.pos[0],f.pos[1],f.pos[0],f.pos[1]]),d==h.length&&h.push(["C",p.pos[0],p.pos[1],p.pos[0],p.pos[1],p.pos[0],p.pos[1]]);return{start:u,dest:h}}function t(e){switch(e[0]){case"z":case"Z":e[0]="L",e[1]=this.start[0],e[2]=this.start[1];break;case"H":e[0]="L",e[2]=this.pos[1];break;case"V":e[0]="L",e[2]=e[1],e[1]=this.pos[0];break;case"T":e[0]="Q",e[3]=e[1],e[4]=e[2],e[1]=this.reflection[1],e[2]=this.reflection[0];break;case"S":e[0]="C",e[6]=e[4],e[5]=e[3],e[4]=e[2],e[3]=e[1],e[2]=this.reflection[1],e[1]=this.reflection[0]}return e}function r(e){var t=e.length;return this.pos=[e[t-2],e[t-1]],-1!="SCQT".indexOf(e[0])&&(this.reflection=[2*this.pos[0]-e[t-4],2*this.pos[1]-e[t-3]]),e}function n(e){var t=[e];switch(e[0]){case"M":return this.pos=this.start=[e[1],e[2]],t;case"L":e[5]=e[3]=e[1],e[6]=e[4]=e[2],e[1]=this.pos[0],e[2]=this.pos[1];break;case"Q":e[6]=e[4],e[5]=e[3],e[4]=1*e[4]/3+2*e[2]/3,e[3]=1*e[3]/3+2*e[1]/3,e[2]=1*this.pos[1]/3+2*e[2]/3,e[1]=1*this.pos[0]/3+2*e[1]/3;break;case"A":t=function(e,t){var r,n,i,a,o,s,l,c,u,h,d,f,p,m,v,g,y,x,b,_,w,k,S,C,A,T,E=Math.abs(t[1]),M=Math.abs(t[2]),I=t[3]%360,P=t[4],R=t[5],z=t[6],L=t[7],D=new SVG.Point(e),O=new SVG.Point(z,L),F=[];if(0===E||0===M||D.x===O.x&&D.y===O.y)return[["C",D.x,D.y,O.x,O.y,O.x,O.y]];for((n=(r=new SVG.Point((D.x-O.x)/2,(D.y-O.y)/2).transform((new SVG.Matrix).rotate(I))).x*r.x/(E*E)+r.y*r.y/(M*M))>1&&(E*=n=Math.sqrt(n),M*=n),i=(new SVG.Matrix).rotate(I).scale(1/E,1/M).rotate(-I),D=D.transform(i),s=(a=[(O=O.transform(i)).x-D.x,O.y-D.y])[0]*a[0]+a[1]*a[1],o=Math.sqrt(s),a[0]/=o,a[1]/=o,l=s<4?Math.sqrt(1-s/4):0,P===R&&(l*=-1),c=new SVG.Point((O.x+D.x)/2+l*-a[1],(O.y+D.y)/2+l*a[0]),u=new SVG.Point(D.x-c.x,D.y-c.y),h=new SVG.Point(O.x-c.x,O.y-c.y),d=Math.acos(u.x/Math.sqrt(u.x*u.x+u.y*u.y)),u.y<0&&(d*=-1),f=Math.acos(h.x/Math.sqrt(h.x*h.x+h.y*h.y)),h.y<0&&(f*=-1),R&&d>f&&(f+=2*Math.PI),!R&&d<f&&(f-=2*Math.PI),g=[],y=d,p=(f-d)/(m=Math.ceil(2*Math.abs(d-f)/Math.PI)),v=4*Math.tan(p/4)/3,w=0;w<=m;w++)b=Math.cos(y),x=Math.sin(y),_=new SVG.Point(c.x+b,c.y+x),g[w]=[new SVG.Point(_.x+v*x,_.y-v*b),_,new SVG.Point(_.x-v*x,_.y+v*b)],y+=p;for(g[0][0]=g[0][1].clone(),g[g.length-1][2]=g[g.length-1][1].clone(),i=(new SVG.Matrix).rotate(I).scale(E,M).rotate(-I),w=0,k=g.length;w<k;w++)g[w][0]=g[w][0].transform(i),g[w][1]=g[w][1].transform(i),g[w][2]=g[w][2].transform(i);for(w=1,k=g.length;w<k;w++)S=(_=g[w-1][2]).x,C=_.y,A=(_=g[w][0]).x,T=_.y,z=(_=g[w][1]).x,L=_.y,F.push(["C",S,C,A,T,z,L]);return F}(this.pos,e),e=t[0]}return e[0]="C",this.pos=[e[5],e[6]],this.reflection=[2*e[5]-e[3],2*e[6]-e[4]],t}function i(e,t){if(!1===t)return!1;for(var r=t,n=e.length;r<n;++r)if("M"==e[r][0])return r;return!1}SVG.extend(SVG.PathArray,{morph:function(t){for(var r=this.value,n=this.parse(t),a=0,o=0,s=!1,l=!1;!1!==a||!1!==o;){var c;s=i(r,!1!==a&&a+1),l=i(n,!1!==o&&o+1),!1===a&&(a=0==(c=new SVG.PathArray(u.start).bbox()).height||0==c.width?r.push(r[0])-1:r.push(["M",c.x+c.width/2,c.y+c.height/2])-1),!1===o&&(o=0==(c=new SVG.PathArray(u.dest).bbox()).height||0==c.width?n.push(n[0])-1:n.push(["M",c.x+c.width/2,c.y+c.height/2])-1);var u=e(r,a,s,n,o,l);r=r.slice(0,a).concat(u.start,!1===s?[]:r.slice(s)),n=n.slice(0,o).concat(u.dest,!1===l?[]:n.slice(l)),a=!1!==s&&a+u.start.length,o=!1!==l&&o+u.dest.length}return this.value=r,this.destination=new SVG.PathArray,this.destination.value=n,this}})}(),function(){function e(e){e.remember("_draggable",this),this.el=e}e.prototype.init=function(e,t){var r=this;this.constraint=e,this.value=t,this.el.on("mousedown.drag",(function(e){r.start(e)})),this.el.on("touchstart.drag",(function(e){r.start(e)}))},e.prototype.transformPoint=function(e,t){var r=(e=e||window.event).changedTouches&&e.changedTouches[0]||e;return this.p.x=r.clientX-(t||0),this.p.y=r.clientY,this.p.matrixTransform(this.m)},e.prototype.getBBox=function(){var e=this.el.bbox();return this.el instanceof SVG.Nested&&(e=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(e.x=this.el.x(),e.y=this.el.y()),e},e.prototype.start=function(e){if("click"!=e.type&&"mousedown"!=e.type&&"mousemove"!=e.type||1==(e.which||e.buttons)){var t=this;if(this.el.fire("beforedrag",{event:e,handler:this}),!this.el.event().defaultPrevented){e.preventDefault(),e.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var r,n=this.getBBox();if(this.el instanceof SVG.Text)switch(r=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":r/=2;break;case"start":r=0}this.startPoints={point:this.transformPoint(e,r),box:n,transform:this.el.transform()},SVG.on(window,"mousemove.drag",(function(e){t.drag(e)})),SVG.on(window,"touchmove.drag",(function(e){t.drag(e)})),SVG.on(window,"mouseup.drag",(function(e){t.end(e)})),SVG.on(window,"touchend.drag",(function(e){t.end(e)})),this.el.fire("dragstart",{event:e,p:this.startPoints.point,m:this.m,handler:this})}}},e.prototype.drag=function(e){var t=this.getBBox(),r=this.transformPoint(e),n=this.startPoints.box.x+r.x-this.startPoints.point.x,i=this.startPoints.box.y+r.y-this.startPoints.point.y,a=this.constraint,o=r.x-this.startPoints.point.x,s=r.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:e,p:r,m:this.m,handler:this}),this.el.event().defaultPrevented)return r;if("function"==typeof a){var l=a.call(this.el,n,i,this.m);"boolean"==typeof l&&(l={x:l,y:l}),!0===l.x?this.el.x(n):!1!==l.x&&this.el.x(l.x),!0===l.y?this.el.y(i):!1!==l.y&&this.el.y(l.y)}else"object"==typeof a&&(null!=a.minX&&n<a.minX?o=(n=a.minX)-this.startPoints.box.x:null!=a.maxX&&n>a.maxX-t.width&&(o=(n=a.maxX-t.width)-this.startPoints.box.x),null!=a.minY&&i<a.minY?s=(i=a.minY)-this.startPoints.box.y:null!=a.maxY&&i>a.maxY-t.height&&(s=(i=a.maxY-t.height)-this.startPoints.box.y),null!=a.snapToGrid&&(n-=n%a.snapToGrid,i-=i%a.snapToGrid,o-=o%a.snapToGrid,s-=s%a.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:o,y:s},!0):this.el.move(n,i));return r},e.prototype.end=function(e){var t=this.drag(e);this.el.fire("dragend",{event:e,p:t,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(t,r){"function"!=typeof t&&"object"!=typeof t||(r=t,t=!0);var n=this.remember("_draggable")||new e(this);return(t=void 0===t||t)?n.init(r||{},t):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function e(e){this.el=e,e.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(e,t,r){var n="string"!=typeof e?e:t[e];return r?n/2:n},this.pointCoords=function(e,t){var r=this.pointsList[e];return{x:this.pointCoord(r[0],t,"t"===e||"b"===e),y:this.pointCoord(r[1],t,"r"===e||"l"===e)}}}e.prototype.init=function(e,t){var r=this.el.bbox();this.options={};var n=this.el.selectize.defaults.points;for(var i in this.el.selectize.defaults)this.options[i]=this.el.selectize.defaults[i],void 0!==t[i]&&(this.options[i]=t[i]);var a=["points","pointsExclude"];for(var i in a){var o=this.options[a[i]];"string"==typeof o?o=o.length>0?o.split(/\s*,\s*/i):[]:"boolean"==typeof o&&"points"===a[i]&&(o=o?n:[]),this.options[a[i]]=o}this.options.points=[n,this.options.points].reduce((function(e,t){return e.filter((function(e){return t.indexOf(e)>-1}))})),this.options.points=[this.options.points,this.options.pointsExclude].reduce((function(e,t){return e.filter((function(e){return t.indexOf(e)<0}))})),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(r.x,r.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(e):this.selectRect(e),this.observe(),this.cleanup()},e.prototype.selectPoints=function(e){return this.pointSelection.isSelected=e,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},e.prototype.getPointArray=function(){var e=this.el.bbox();return this.el.array().valueOf().map((function(t){return[t[0]-e.x,t[1]-e.y]}))},e.prototype.drawPoints=function(){for(var e=this,t=this.getPointArray(),r=0,n=t.length;r<n;++r){var i=function(t){return function(r){(r=r||window.event).preventDefault?r.preventDefault():r.returnValue=!1,r.stopPropagation();var n=r.pageX||r.touches[0].pageX,i=r.pageY||r.touches[0].pageY;e.el.fire("point",{x:n,y:i,i:t,event:r})}}(r),a=this.drawPoint(t[r][0],t[r][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",i).on("mousedown",i);this.pointSelection.set.add(a)}},e.prototype.drawPoint=function(e,t){var r=this.options.pointType;switch(r){case"circle":return this.drawCircle(e,t);case"rect":return this.drawRect(e,t);default:if("function"==typeof r)return r.call(this,e,t);throw new Error("Unknown "+r+" point type!")}},e.prototype.drawCircle=function(e,t){return this.nested.circle(this.options.pointSize).center(e,t)},e.prototype.drawRect=function(e,t){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(e,t)},e.prototype.updatePointSelection=function(){var e=this.getPointArray();this.pointSelection.set.each((function(t){this.cx()===e[t][0]&&this.cy()===e[t][1]||this.center(e[t][0],e[t][1])}))},e.prototype.updateRectSelection=function(){var e=this,t=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:t.width,height:t.height}),this.options.points.length&&this.options.points.map((function(r,n){var i=e.pointCoords(r,t);e.rectSelection.set.get(n+1).center(i.x,i.y)})),this.options.rotationPoint){var r=this.rectSelection.set.length();this.rectSelection.set.get(r-1).center(t.width/2,20)}},e.prototype.selectRect=function(e){var t=this,r=this.el.bbox();function n(e){return function(r){(r=r||window.event).preventDefault?r.preventDefault():r.returnValue=!1,r.stopPropagation();var n=r.pageX||r.touches[0].pageX,i=r.pageY||r.touches[0].pageY;t.el.fire(e,{x:n,y:i,event:r})}}if(this.rectSelection.isSelected=e,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(r.width,r.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map((function(e,i){var a=t.pointCoords(e,r),o=t.drawPoint(a.x,a.y).attr("class",t.options.classPoints+"_"+e).on("mousedown",n(e)).on("touchstart",n(e));t.rectSelection.set.add(o)})),this.rectSelection.set.each((function(){this.addClass(t.options.classPoints)}))),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var i=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation();var r=e.pageX||e.touches[0].pageX,n=e.pageY||e.touches[0].pageY;t.el.fire("rot",{x:r,y:n,event:e})},a=this.drawPoint(r.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",i).on("mousedown",i);this.rectSelection.set.add(a)}},e.prototype.handler=function(){var e=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(e.x,e.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},e.prototype.observe=function(){var e=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver((function(){e.handler()})),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(e){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",(function(){e.handler()}))},e.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each((function(){this.remove()})),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each((function(){this.remove()})),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(t,r){return"object"==typeof t&&(r=t,t=!0),(this.remember("_selectHandler")||new e(this)).init(void 0===t||t,r||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function e(e){e.remember("_resizeHandler",this),this.el=e,this.parameters={},this.lastUpdateCall=null,this.p=e.doc().node.createSVGPoint()}e.prototype.transformPoint=function(e,t,r){return this.p.x=e-(this.offset.x-window.pageXOffset),this.p.y=t-(this.offset.y-window.pageYOffset),this.p.matrixTransform(r||this.m)},e.prototype._extractPosition=function(e){return{x:null!=e.clientX?e.clientX:e.touches[0].clientX,y:null!=e.clientY?e.clientY:e.touches[0].clientY}},e.prototype.init=function(e){var t=this;if(this.stop(),"stop"!==e){for(var r in this.options={},this.el.resize.defaults)this.options[r]=this.el.resize.defaults[r],void 0!==e[r]&&(this.options[r]=e[r]);this.el.on("lt.resize",(function(e){t.resize(e||window.event)})),this.el.on("rt.resize",(function(e){t.resize(e||window.event)})),this.el.on("rb.resize",(function(e){t.resize(e||window.event)})),this.el.on("lb.resize",(function(e){t.resize(e||window.event)})),this.el.on("t.resize",(function(e){t.resize(e||window.event)})),this.el.on("r.resize",(function(e){t.resize(e||window.event)})),this.el.on("b.resize",(function(e){t.resize(e||window.event)})),this.el.on("l.resize",(function(e){t.resize(e||window.event)})),this.el.on("rot.resize",(function(e){t.resize(e||window.event)})),this.el.on("point.resize",(function(e){t.resize(e||window.event)})),this.update()}},e.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},e.prototype.resize=function(e){var t=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var r=this._extractPosition(e.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(r.x,r.y),x:e.detail.x,y:e.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==e.detail.i){var n=this.el.array().valueOf();this.parameters.i=e.detail.i,this.parameters.pointCoords=[n[e.detail.i][0],n[e.detail.i][1]]}switch(e.type){case"lt":this.calc=function(e,t){var r=this.snapToGrid(e,t);if(this.parameters.box.width-r[0]>0&&this.parameters.box.height-r[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+r[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-r[0]);r=this.checkAspectRatio(r),this.el.move(this.parameters.box.x+r[0],this.parameters.box.y+r[1]).size(this.parameters.box.width-r[0],this.parameters.box.height-r[1])}};break;case"rt":this.calc=function(e,t){var r=this.snapToGrid(e,t,2);if(this.parameters.box.width+r[0]>0&&this.parameters.box.height-r[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-r[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+r[0]);r=this.checkAspectRatio(r,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+r[1]).size(this.parameters.box.width+r[0],this.parameters.box.height-r[1])}};break;case"rb":this.calc=function(e,t){var r=this.snapToGrid(e,t,0);if(this.parameters.box.width+r[0]>0&&this.parameters.box.height+r[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-r[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+r[0]);r=this.checkAspectRatio(r),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+r[0],this.parameters.box.height+r[1])}};break;case"lb":this.calc=function(e,t){var r=this.snapToGrid(e,t,1);if(this.parameters.box.width-r[0]>0&&this.parameters.box.height+r[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+r[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-r[0]);r=this.checkAspectRatio(r,!0),this.el.move(this.parameters.box.x+r[0],this.parameters.box.y).size(this.parameters.box.width-r[0],this.parameters.box.height+r[1])}};break;case"t":this.calc=function(e,t){var r=this.snapToGrid(e,t,2);if(this.parameters.box.height-r[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+r[1]).height(this.parameters.box.height-r[1])}};break;case"r":this.calc=function(e,t){var r=this.snapToGrid(e,t,0);if(this.parameters.box.width+r[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+r[0])}};break;case"b":this.calc=function(e,t){var r=this.snapToGrid(e,t,0);if(this.parameters.box.height+r[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+r[1])}};break;case"l":this.calc=function(e,t){var r=this.snapToGrid(e,t,1);if(this.parameters.box.width-r[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+r[0],this.parameters.box.y).width(this.parameters.box.width-r[0])}};break;case"rot":this.calc=function(e,t){var r=e+this.parameters.p.x,n=t+this.parameters.p.y,i=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),a=Math.atan2(n-this.parameters.box.y-this.parameters.box.height/2,r-this.parameters.box.x-this.parameters.box.width/2),o=this.parameters.rotation+180*(a-i)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(o-o%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(e,t){var r=this.snapToGrid(e,t,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),n=this.el.array().valueOf();n[this.parameters.i][0]=this.parameters.pointCoords[0]+r[0],n[this.parameters.i][1]=this.parameters.pointCoords[1]+r[1],this.el.plot(n)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:e}),SVG.on(window,"touchmove.resize",(function(e){t.update(e||window.event)})),SVG.on(window,"touchend.resize",(function(){t.done()})),SVG.on(window,"mousemove.resize",(function(e){t.update(e||window.event)})),SVG.on(window,"mouseup.resize",(function(){t.done()}))},e.prototype.update=function(e){if(e){var t=this._extractPosition(e),r=this.transformPoint(t.x,t.y),n=r.x-this.parameters.p.x,i=r.y-this.parameters.p.y;this.lastUpdateCall=[n,i],this.calc(n,i),this.el.fire("resizing",{dx:n,dy:i,event:e})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},e.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},e.prototype.snapToGrid=function(e,t,r,n){var i;return void 0!==n?i=[(r+e)%this.options.snapToGrid,(n+t)%this.options.snapToGrid]:(r=null==r?3:r,i=[(this.parameters.box.x+e+(1&r?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+t+(2&r?0:this.parameters.box.height))%this.options.snapToGrid]),e<0&&(i[0]-=this.options.snapToGrid),t<0&&(i[1]-=this.options.snapToGrid),e-=Math.abs(i[0])<this.options.snapToGrid/2?i[0]:i[0]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),t-=Math.abs(i[1])<this.options.snapToGrid/2?i[1]:i[1]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(e,t,r,n)},e.prototype.constraintToBox=function(e,t,r,n){var i,a,o=this.options.constraint||{};return void 0!==n?(i=r,a=n):(i=this.parameters.box.x+(1&r?0:this.parameters.box.width),a=this.parameters.box.y+(2&r?0:this.parameters.box.height)),void 0!==o.minX&&i+e<o.minX&&(e=o.minX-i),void 0!==o.maxX&&i+e>o.maxX&&(e=o.maxX-i),void 0!==o.minY&&a+t<o.minY&&(t=o.minY-a),void 0!==o.maxY&&a+t>o.maxY&&(t=o.maxY-a),[e,t]},e.prototype.checkAspectRatio=function(e,t){if(!this.options.saveAspectRatio)return e;var r=e.slice(),n=this.parameters.box.width/this.parameters.box.height,i=this.parameters.box.width+e[0],a=this.parameters.box.height-e[1],o=i/a;return o<n?(r[1]=i/n-this.parameters.box.height,t&&(r[1]=-r[1])):o>n&&(r[0]=this.parameters.box.width-a*n,t&&(r[0]=-r[0])),r},SVG.extend(SVG.Element,{resize:function(t){return(this.remember("_resizeHandler")||new e(this)).init(t||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var Ze=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new b(this.ctx),this.ctx.axes=new ee(this.ctx),this.ctx.core=new Ne(this.ctx.el,this.ctx),this.ctx.config=new D({}),this.ctx.data=new V(this.ctx),this.ctx.grid=new Y(this.ctx),this.ctx.graphics=new w(this.ctx),this.ctx.coreUtils=new k(this.ctx),this.ctx.crosshairs=new te(this.ctx),this.ctx.events=new J(this.ctx),this.ctx.exports=new H(this.ctx),this.ctx.localization=new Q(this.ctx),this.ctx.options=new M,this.ctx.responsive=new re(this.ctx),this.ctx.series=new U(this.ctx),this.ctx.theme=new ne(this.ctx),this.ctx.formatters=new W(this.ctx),this.ctx.titleSubtitle=new ie(this.ctx),this.ctx.legend=new he(this.ctx),this.ctx.toolbar=new de(this.ctx),this.ctx.tooltip=new be(this.ctx),this.ctx.dimensions=new ce(this.ctx),this.ctx.updateHelpers=new Be(this.ctx),this.ctx.zoomPanSelection=new fe(this.ctx),this.ctx.w.globals.tooltip=new be(this.ctx)}}]),e}(),Ue=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"clear",value:function(e){var t=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(e){e.each((function(e,t){this.removeClass("*"),this.off(),this.stop()}),!0),e.ungroup(),e.clear()}},{key:"clearDomElements",value:function(e){var t=this,r=e.isUpdating,n=this.w.globals.dom.Paper.node;n.parentNode&&n.parentNode.parentNode&&!r&&(n.parentNode.parentNode.style.minHeight="unset");var i=this.w.globals.dom.baseEl;i&&this.ctx.eventList.forEach((function(e){i.removeEventListener(e,t.ctx.events.documentEvent)}));var a=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(a.Paper),a.Paper.remove(),a.elWrap=null,a.elGraphical=null,a.elAnnotations=null,a.elLegendWrap=null,a.baseEl=null,a.elGridRect=null,a.elGridRectMask=null,a.elGridRectMarkerMask=null,a.elForecastMask=null,a.elNonForecastMask=null,a.elDefs=null}}]),e}(),Ve=new WeakMap,We=function(){function e(t,r){s(this,e),this.opts=r,this.ctx=this,this.w=new F(r).init(),this.el=t,this.w.globals.cuid=x.randomId(),this.w.globals.chartID=this.w.config.chart.id?x.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Ze(this).initModules(),this.create=x.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return c(e,[{key:"render",value:function(){var e=this;return new Promise((function(t,r){if(null!==e.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var n=e.w.config.chart.events.beforeMount;if("function"==typeof n&&n(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),function(e,t){var r=!1;if(e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var n=e.getBoundingClientRect();"none"!==e.style.display&&0!==n.width||(r=!0)}var i=new ResizeObserver((function(n){r&&t.call(e,n),r=!0}));e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(e.children).forEach((function(e){return i.observe(e)})):i.observe(e),Ve.set(t,i)}(e.el.parentNode,e.parentResizeHandler),!e.css){var i=e.el.getRootNode&&e.el.getRootNode(),a=x.is("ShadowRoot",i),o=e.el.ownerDocument,s=o.getElementById("apexcharts-css");!a&&s||(e.css=document.createElement("style"),e.css.id="apexcharts-css",e.css.textContent='@keyframes opaque {\n  0% {\n      opacity: 0\n  }\n\n  to {\n      opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n  0%,to {\n      opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0,0,0,.5);\n  box-shadow: 0 0 1px rgba(255,255,255,.5);\n  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\n.legend-mouseover-inactive {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255,255,255,.96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30,30,30,.8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0,0,0,.7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0;\n  margin-right: 10px;\n  border-radius: 50%\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0!important\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_boundingRect,.svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0,0,0,.7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n      opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {\n  opacity: 0\n}\n\n.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {\n  pointer-events: none\n}\n\n.apexcharts-marker {\n  transition: .15s ease all\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,.resize-triggers,.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n',a?i.prepend(e.css):o.head.appendChild(e.css))}var l=e.create(e.w.config.series,{});if(!l)return t(e);e.mount(l).then((function(){"function"==typeof e.w.config.chart.events.mounted&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),t(l)})).catch((function(e){r(e)}))}else r(new Error("Element not found"))}))}},{key:"create",value:function(e,t){var r=this.w;new Ze(this).initModules();var n=this.w.globals;if(n.noData=!1,n.animationEnded=!1,this.responsive.checkResponsiveConfig(t),r.config.xaxis.convertedCatToNumeric&&new L(r.config).convertCatToNumericXaxis(r.config,this.ctx),null===this.el)return n.animationEnded=!0,null;if(this.core.setupElements(),"treemap"===r.config.chart.type&&(r.config.grid.show=!1,r.config.yaxis[0].show=!1),0===n.svgWidth)return n.animationEnded=!0,null;var i=k.checkComboSeries(e);n.comboCharts=i.comboCharts,n.comboBarCount=i.comboBarCount;var a=e.every((function(e){return e.data&&0===e.data.length}));(0===e.length||a)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(e),this.theme.init(),new N(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),n.noData&&n.collapsedSeries.length!==n.series.length&&!r.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),n.axisCharts&&(this.core.coreCalculations(),"category"!==r.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=r.globals.minX,this.ctx.toolbar.maxX=r.globals.maxX),this.formatters.heatmapLabelFormatters(),new k(this).getLargestMarkerSize(),this.dimensions.plotCoords();var o=this.core.xySettings();this.grid.createGridMask();var s=this.core.plotChartType(e,o),l=new Z(this);l.bringForward(),r.config.dataLabels.background.enabled&&l.dataLabelsBackground(),this.core.shiftGraphPosition();var c={plot:{left:r.globals.translateX,top:r.globals.translateY,width:r.globals.gridWidth,height:r.globals.gridHeight}};return{elGraph:s,xyRatios:o,elInner:r.globals.dom.elGraphical,dimensions:c}}},{key:"mount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this,n=r.w;return new Promise((function(i,a){if(null===r.el)return a(new Error("Not enough data to display or target element not found"));(null===t||n.globals.allSeriesCollapsed)&&r.series.handleNoData(),r.grid=new Y(r);var o=r.grid.drawGrid();"treemap"!==n.config.chart.type&&r.axes.drawAxis(n.config.chart.type,o),r.annotations=new I(r),r.annotations.drawImageAnnos(),r.annotations.drawTextAnnos(),"back"===n.config.grid.position&&o&&n.globals.dom.elGraphical.add(o.el);var s=new X(e.ctx,o),l=new K(e.ctx,o);if(null!==o&&(s.xAxisLabelCorrections(o.xAxisTickWidth),l.setYAxisTextAlignments(),n.config.yaxis.map((function(e,t){-1===n.globals.ignoreYAxisIndexes.indexOf(t)&&l.yAxisTitleRotate(t,e.opposite)}))),"back"===n.config.annotations.position&&(n.globals.dom.Paper.add(n.globals.dom.elAnnotations),r.annotations.drawAxesAnnotations()),Array.isArray(t.elGraph))for(var c=0;c<t.elGraph.length;c++)n.globals.dom.elGraphical.add(t.elGraph[c]);else n.globals.dom.elGraphical.add(t.elGraph);if("front"===n.config.grid.position&&o&&n.globals.dom.elGraphical.add(o.el),o&&o.elGridBorders&&o.elGridBorders.node&&n.globals.dom.elGraphical.add(o.elGridBorders),"front"===n.config.xaxis.crosshairs.position&&r.crosshairs.drawXCrosshairs(),"front"===n.config.yaxis[0].crosshairs.position&&r.crosshairs.drawYCrosshairs(),"front"===n.config.annotations.position&&(n.globals.dom.Paper.add(n.globals.dom.elAnnotations),r.annotations.drawAxesAnnotations()),!n.globals.noData){if(n.config.tooltip.enabled&&!n.globals.noData&&r.w.globals.tooltip.drawTooltip(t.xyRatios),n.globals.axisCharts&&(n.globals.isXNumeric||n.config.xaxis.convertedCatToNumeric||n.globals.isRangeBar))(n.config.chart.zoom.enabled||n.config.chart.selection&&n.config.chart.selection.enabled||n.config.chart.pan&&n.config.chart.pan.enabled)&&r.zoomPanSelection.init({xyRatios:t.xyRatios});else{var u=n.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach((function(e){u[e]=!1}))}n.config.chart.toolbar.show&&!n.globals.allSeriesCollapsed&&r.toolbar.createToolbar()}n.globals.memory.methodsToExec.length>0&&n.globals.memory.methodsToExec.forEach((function(e){e.method(e.params,!1,e.context)})),n.globals.axisCharts||n.globals.noData||r.core.resizeNonAxisCharts(),i(r)}))}},{key:"destroy",value:function(){var e,t;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,e=this.parentResizeHandler,(t=Ve.get(e))&&(t.disconnect(),Ve.delete(e));var r=this.w.config.chart.id;r&&Apex._chartInstances.forEach((function(e,t){e.id===x.escapeString(r)&&Apex._chartInstances.splice(t,1)})),new Ue(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.w;return o.globals.selection=void 0,e.series&&(this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map((function(e,r){return t.updateHelpers._extendSeries(e,r)}))),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),o.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,r,n,i,a)}},{key:"updateSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,r)}},{key:"appendSeries",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.w.config.series.slice();return n.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(n,t,r)}},{key:"appendData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;r.w.globals.dataChanged=!0,r.series.getPreviousPaths();for(var n=r.w.config.series.slice(),i=0;i<n.length;i++)if(null!==e[i]&&void 0!==e[i])for(var a=0;a<e[i].data.length;a++)n[i].data.push(e[i].data[a]);return r.w.config.series=n,t&&(r.w.globals.initialSeries=x.clone(r.w.config.series)),this.update()}},{key:"update",value:function(e){var t=this;return new Promise((function(r,n){new Ue(t.ctx).clear({isUpdating:!0});var i=t.create(t.w.config.series,e);if(!i)return r(t);t.mount(i).then((function(){"function"==typeof t.w.config.chart.events.updated&&t.w.config.chart.events.updated(t,t.w),t.events.fireEvent("updated",[t,t.w]),t.w.globals.isDirty=!0,r(t)})).catch((function(e){n(e)}))}))}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),t=[this];return e.length&&(t=[],e.forEach((function(e){t.push(e)}))),t}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter((function(e){if(e.group)return!0})).map((function(t){return e.w.config.chart.group===t.group?t.chart:e}))}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,t){return this.series.toggleSeriesOnHover(e,t)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(e,t)}},{key:"addEventListener",value:function(e,t){this.events.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.events.removeEventListener(e,t)}},{key:"addXaxisAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this;r&&(n=r),n.annotations.addXaxisAnnotationExternal(e,t,n)}},{key:"addYaxisAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this;r&&(n=r),n.annotations.addYaxisAnnotationExternal(e,t,n)}},{key:"addPointAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this;r&&(n=r),n.annotations.addPointAnnotationExternal(e,t,n)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=this;e&&(t=e),t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this;t&&(r=t),r.annotations.removeAnnotation(r,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new $(this.ctx);return t.getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new $(this.ctx);return t.getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}},{key:"zoomX",value:function(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new H(this.ctx).dataURI(e)}},{key:"exportToCSV",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new H(this.ctx);return t.exportToCSV(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout((function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()}),150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;"function"==typeof e&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var t=x.escapeString(e),r=Apex._chartInstances.filter((function(e){return e.id===t}))[0];return r&&r.chart}},{key:"initOnLoad",value:function(){for(var t=document.querySelectorAll("[data-apexcharts]"),r=0;r<t.length;r++)new e(t[r],JSON.parse(t[r].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,t){var r=this.getChartByID(e);if(r){r.w.globals.isExecCalled=!0;var n=null;if(-1!==r.publicMethods.indexOf(t)){for(var i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];n=r[t].apply(r,a)}return n}}},{key:"merge",value:function(e,t){return x.extend(e,t)}}]),e}();e.exports=We},7472:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},8182:function(e,t,r){"use strict";function n(e){var t,r,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}t.Z=function(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(i&&(i+=" "),i+=t);return i}},2110:function(e,t,r){"use strict";var n=r(7441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return n.isMemo(e)?o:s[e.$$typeof]||i}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,r,n){if("string"!==typeof r){if(p){var i=f(r);i&&i!==p&&e(t,i,n)}var o=u(r);h&&(o=o.concat(h(r)));for(var s=l(t),m=l(r),v=0;v<o.length;++v){var g=o[v];if(!a[g]&&(!n||!n[g])&&(!m||!m[g])&&(!s||!s[g])){var y=d(r,g);try{c(t,g,y)}catch(x){}}}}return t}},4819:function(e,t,r){var n=r(6115).default,i=r(7061).default,a=r(7156).default,o=r(2122).default,s=r(7424).default,l=r(3515).default,c=r(1655).default,u=r(6389).default,h=r(3578).default,d=r(861).default,f=r(8416).default,p=r(4704).default,m=r(6690).default,v=r(9728).default;self,e.exports=function(){return e={7629:function(e,t,r){"use strict";var n=r(375),i=r(8571),a=r(9474),o=r(1687),s=r(8652),l=r(8160),c=r(3292),u=r(6354),h=r(8901),g=r(9708),y=r(6914),x=r(2294),b=r(6133),_=r(1152),w=r(8863),k=r(2036),S={Base:function(){function e(t){m(this,e),this.type=t,this.$_root=null,this._definition={},this._reset()}return v(e,[{key:"_reset",value:function(){this._ids=new x.Ids,this._preferences=null,this._refs=new b.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}},{key:"describe",value:function(){return n("function"==typeof g.describe,"Manifest functionality disabled"),g.describe(this)}},{key:"allow",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l.verifyFlat(t,"allow"),this._values(t,"_valids")}},{key:"alter",value:function(e){n(e&&"object"==typeof e&&!Array.isArray(e),"Invalid targets argument"),n(!this._inRuleset(),"Cannot set alterations inside a ruleset");var t=this.clone();for(var r in t.$_terms.alterations=t.$_terms.alterations||[],e){var i=e[r];n("function"==typeof i,"Alteration adjuster for",r,"must be a function"),t.$_terms.alterations.push({target:r,adjuster:i})}return t.$_temp.ruleset=!1,t}},{key:"artifact",value:function(e){return n(void 0!==e,"Artifact cannot be undefined"),n(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",e)}},{key:"cast",value:function(e){return n(!1===e||"string"==typeof e,"Invalid to value"),n(!1===e||this._definition.cast[e],"Type",this.type,"does not support casting to",e),this.$_setFlag("cast",!1===e?void 0:e)}},{key:"default",value:function(e,t){return this._default("default",e,t)}},{key:"description",value:function(e){return n(e&&"string"==typeof e,"Description must be a non-empty string"),this.$_setFlag("description",e)}},{key:"empty",value:function(e){var t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}},{key:"error",value:function(e){return n(e,"Missing error"),n(e instanceof Error||"function"==typeof e,"Must provide a valid Error object or a function"),this.$_setFlag("error",e)}},{key:"example",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(void 0!==e,"Missing example"),l.assertOptions(t,["override"]),this._inner("examples",e,{single:!0,override:t.override})}},{key:"external",value:function(e,t){return"object"==typeof e&&(n(!t,"Cannot combine options with description"),t=e.description,e=e.method),n("function"==typeof e,"Method must be a function"),n(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this._inner("externals",{method:e,description:t},{single:!0})}},{key:"failover",value:function(e,t){return this._default("failover",e,t)}},{key:"forbidden",value:function(){return this.presence("forbidden")}},{key:"id",value:function(e){return e?(n("string"==typeof e,"id must be a non-empty string"),n(/^[^\.]+$/.test(e),"id cannot contain period character"),this.$_setFlag("id",e)):this.$_setFlag("id",void 0)}},{key:"invalid",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._values(t,"_invalids")}},{key:"label",value:function(e){return n(e&&"string"==typeof e,"Label name must be a non-empty string"),this.$_setFlag("label",e)}},{key:"meta",value:function(e){return n(void 0!==e,"Meta cannot be undefined"),this._inner("metas",e,{single:!0})}},{key:"note",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n(t.length,"Missing notes");for(var i=0,a=t;i<a.length;i++){var o=a[i];n(o&&"string"==typeof o,"Notes must be non-empty strings")}return this._inner("notes",t)}},{key:"only",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"Invalid mode:",e),this.$_setFlag("only",e)}},{key:"optional",value:function(){return this.presence("optional")}},{key:"prefs",value:function(e){n(e,"Missing preferences"),n(void 0===e.context,"Cannot override context"),n(void 0===e.externals,"Cannot override externals"),n(void 0===e.warnings,"Cannot override warnings"),n(void 0===e.debug,"Cannot override debug"),l.checkPreferences(e);var t=this.clone();return t._preferences=l.preferences(t._preferences,e),t}},{key:"presence",value:function(e){return n(["optional","required","forbidden"].includes(e),"Unknown presence mode",e),this.$_setFlag("presence",e)}},{key:"raw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",e?"raw":void 0)}},{key:"result",value:function(e){return n(["raw","strip"].includes(e),"Unknown result mode",e),this.$_setFlag("result",e)}},{key:"required",value:function(){return this.presence("required")}},{key:"strict",value:function(e){var t=this.clone(),r=void 0!==e&&!e;return t._preferences=l.preferences(t._preferences,{convert:r}),t}},{key:"strip",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",e?"strip":void 0)}},{key:"tag",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n(t.length,"Missing tags");for(var i=0,a=t;i<a.length;i++){var o=a[i];n(o&&"string"==typeof o,"Tags must be non-empty strings")}return this._inner("tags",t)}},{key:"unit",value:function(e){return n(e&&"string"==typeof e,"Unit name must be a non-empty string"),this.$_setFlag("unit",e)}},{key:"valid",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];l.verifyFlat(t,"valid");var n=this.allow.apply(this,t);return n.$_setFlag("only",!!n._valids,{clone:!1}),n}},{key:"when",value:function(e,t){var r=this.clone();r.$_terms.whens||(r.$_terms.whens=[]);var i=c.when(r,e,t);if(!["any","link"].includes(r.type)){var a,o=i.is?[i]:i.switch,s=p(o);try{for(s.s();!(a=s.n()).done;){var l=a.value;n(!l.then||"any"===l.then.type||l.then.type===r.type,"Cannot combine",r.type,"with",l.then&&l.then.type),n(!l.otherwise||"any"===l.otherwise.type||l.otherwise.type===r.type,"Cannot combine",r.type,"with",l.otherwise&&l.otherwise.type)}}catch(u){s.e(u)}finally{s.f()}}return r.$_terms.whens.push(i),r.$_mutateRebuild()}},{key:"cache",value:function(e){n(!this._inRuleset(),"Cannot set caching inside a ruleset"),n(!this._cache,"Cannot override schema cache"),n(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");var t=this.clone();return t._cache=e||s.provider.provision(),t.$_temp.ruleset=!1,t}},{key:"clone",value:function(){var e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}},{key:"concat",value:function(e){n(l.isSchema(e),"Invalid schema object"),n("any"===this.type||"any"===e.type||e.type===this.type,"Cannot merge type",this.type,"with another type:",e.type),n(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),n(!e._inRuleset(),"Cannot concatenate a schema with open ruleset");var t=this.clone();if("any"===this.type&&"any"!==e.type){for(var r=e.clone(),i=0,a=Object.keys(t);i<a.length;i++){var s=a[i];"type"!==s&&(r[s]=t[s])}t=r}t._ids.concat(e._ids),t._refs.register(e,b.toSibling),t._preferences=t._preferences?l.preferences(t._preferences,e._preferences):e._preferences,t._valids=k.merge(t._valids,e._valids,e._invalids),t._invalids=k.merge(t._invalids,e._invalids,e._valids);var c,u=p(e._singleRules.keys());try{var h=function(){var e=c.value;t._singleRules.has(e)&&(t._rules=t._rules.filter((function(t){return t.keep||t.name!==e})),t._singleRules.delete(e))};for(u.s();!(c=u.n()).done;)h()}catch(_){u.e(_)}finally{u.f()}var d,f=p(e._rules);try{for(f.s();!(d=f.n()).done;){var m=d.value;e._definition.rules[m.method].multi||t._singleRules.set(m.name,m),t._rules.push(m)}}catch(_){f.e(_)}finally{f.f()}if(t._flags.empty&&e._flags.empty){t._flags.empty=t._flags.empty.concat(e._flags.empty);var v=Object.assign({},e._flags);delete v.empty,o(t._flags,v)}else if(e._flags.empty){t._flags.empty=e._flags.empty;var g=Object.assign({},e._flags);delete g.empty,o(t._flags,g)}else o(t._flags,e._flags);for(var y in e.$_terms){var x=e.$_terms[y];x?t.$_terms[y]?t.$_terms[y]=t.$_terms[y].concat(x):t.$_terms[y]=x.slice():t.$_terms[y]||(t.$_terms[y]=x)}return this.$_root._tracer&&this.$_root._tracer._combine(t,[this,e]),t.$_mutateRebuild()}},{key:"extend",value:function(e){return n(!e.base,"Cannot extend type with another base"),h.type(this,e)}},{key:"extract",value:function(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}},{key:"fork",value:function(e,t){n(!this._inRuleset(),"Cannot fork inside a ruleset");var r,i=this,a=p([].concat(e));try{for(a.s();!(r=a.n()).done;){var o=r.value;o=Array.isArray(o)?o:o.split("."),i=i._ids.fork(o,t,i)}}catch(s){a.e(s)}finally{a.f()}return i.$_temp.ruleset=!1,i}},{key:"rule",value:function(e){var t=this._definition;l.assertOptions(e,Object.keys(t.modifiers)),n(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");var r=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;n(r>=0&&r<this._rules.length,"Cannot apply rules to empty ruleset");for(var a=this.clone(),o=r;o<a._rules.length;++o){var s=a._rules[o],c=i(s);for(var u in e)t.modifiers[u](c,e[u]),n(c.name===s.name,"Cannot change rule name");a._rules[o]=c,a._singleRules.get(c.name)===s&&a._singleRules.set(c.name,c)}return a.$_temp.ruleset=!1,a.$_mutateRebuild()}},{key:"ruleset",get:function(){n(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");var e=this.clone();return e.$_temp.ruleset=e._rules.length,e}},{key:"$",get:function(){return this.ruleset}},{key:"tailor",value:function(e){e=[].concat(e),n(!this._inRuleset(),"Cannot tailor inside a ruleset");var t=this;if(this.$_terms.alterations){var r,i=p(this.$_terms.alterations);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.target,s=a.adjuster;e.includes(o)&&(t=s(t),n(l.isSchema(t),"Alteration adjuster for",o,"failed to return a schema object"))}}catch(c){i.e(c)}finally{i.f()}}return(t=t.$_modify({each:function(t){return t.tailor(e)},ref:!1})).$_temp.ruleset=!1,t.$_mutateRebuild()}},{key:"tracer",value:function(){return _.location?_.location(this):this}},{key:"validate",value:function(e,t){return w.entry(e,this,t)}},{key:"validateAsync",value:function(e,t){return w.entryAsync(e,this,t)}},{key:"$_addRule",value:function(e){for(var t in"string"==typeof e&&(e={name:e}),n(e&&"object"==typeof e,"Invalid options"),n(e.name&&"string"==typeof e.name,"Invalid rule name"),e)n("_"!==t[0],"Cannot set private rule properties");var r=Object.assign({},e);r._resolve=[],r.method=r.method||r.name;var i=this._definition.rules[r.method],a=r.args;n(i,"Unknown rule",r.method);var o=this.clone();if(a)for(var s in n(1===Object.keys(a).length||Object.keys(a).length===this._definition.rules[r.name].args.length,"Invalid rule definition for",this.type,r.name),a){var c=a[s];if(i.argsByName){var u=i.argsByName.get(s);if(u.ref&&l.isResolvable(c))r._resolve.push(s),o.$_mutateRegister(c);else if(u.normalize&&(c=u.normalize(c),a[s]=c),u.assert){var h=l.validateArg(c,s,u);n(!h,h,"or reference")}}void 0!==c?a[s]=c:delete a[s]}return i.multi||(o._ruleRemove(r.name,{clone:!1}),o._singleRules.set(r.name,r)),!1===o.$_temp.ruleset&&(o.$_temp.ruleset=null),i.priority?o._rules.unshift(r):o._rules.push(r),o}},{key:"$_compile",value:function(e,t){return c.schema(this.$_root,e,t)}},{key:"$_createError",value:function(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=!1!==a.flags?this._flags:{},s=a.messages?y.merge(this._definition.messages,a.messages):this._definition.messages;return new u.Report(e,t,r,o,s,n,i)}},{key:"$_getFlag",value:function(e){return this._flags[e]}},{key:"$_getRule",value:function(e){return this._singleRules.get(e)}},{key:"$_mapLabels",value:function(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}},{key:"$_match",value:function(e,t,r,n){(r=Object.assign({},r)).abortEarly=!0,r._externals=!1,t.snapshot();var i=!w.validate(e,this,t,r,n).errors;return t.restore(),i}},{key:"$_modify",value:function(e){return l.assertOptions(e,["each","once","ref","schema"]),x.schema(this,e)||this}},{key:"$_mutateRebuild",value:function(){var e=this;return n(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:function(t,r){var n=r.source,i=r.name,a=(r.path,r.key),o=e._definition[n][i]&&e._definition[n][i].register;!1!==o&&e.$_mutateRegister(t,{family:o,key:a})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}},{key:"$_mutateRegister",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.family,n=t.key;this._refs.register(e,r),this._ids.register(e,{key:n})}},{key:"$_property",value:function(e){return this._definition.properties[e]}},{key:"$_reach",value:function(e){return this._ids.reach(e)}},{key:"$_rootReferences",value:function(){return this._refs.roots()}},{key:"$_setFlag",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n("_"===e[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");var i=this._definition.flags[e]||{};if(a(t,i.default)&&(t=void 0),a(t,this._flags[e]))return this;var o=!1!==r.clone?this.clone():this;return void 0!==t?(o._flags[e]=t,o.$_mutateRegister(t)):delete o._flags[e],"_"!==e[0]&&(o.$_temp.ruleset=!1),o}},{key:"$_parent",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(t=this[e][l.symbols.parent]).call.apply(t,[this].concat(n))}},{key:"$_validate",value:function(e,t,r){return w.validate(e,this,t,r)}},{key:"_assign",value:function(e){for(var t in e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=i(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={},this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;for(var r in e.$_super={},this.$_super)e.$_super[r]=this._super[r].bind(e);return e}},{key:"_bare",value:function(){var e=this.clone();e._reset();var t=e._definition.terms;for(var r in t){var n=t[r];e.$_terms[r]=n.init}return e.$_mutateRebuild()}},{key:"_default",value:function(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.assertOptions(i,"literal"),n(void 0!==t,"Missing",e,"value"),n("function"==typeof t||!i.literal,"Only function value supports literal option"),"function"==typeof t&&i.literal&&(f(r={},l.symbols.literal,!0),f(r,"literal",t),t=r),this.$_setFlag(e,t)}},{key:"_generate",value:function(e,t,r){if(!this.$_terms.whens)return{schema:this};for(var n=[],i=[],a=0;a<this.$_terms.whens.length;++a){var o=this.$_terms.whens[a];if(o.concat)n.push(o.concat),i.push("".concat(a,".concat"));else{for(var s=o.ref?o.ref.resolve(e,t,r):e,l=o.is?[o]:o.switch,c=i.length,u=0;u<l.length;++u){var h=l[u],f=h.is,p=h.then,m=h.otherwise,v="".concat(a).concat(o.switch?"."+u:"");if(f.$_match(s,t.nest(f,"".concat(v,".is")),r)){if(p){var g=t.localize([].concat(d(t.path),["".concat(v,".then")]),t.ancestors,t.schemas),y=p._generate(e,g,r),x=y.schema,b=y.id;n.push(x),i.push("".concat(v,".then").concat(b?"(".concat(b,")"):""));break}}else if(m){var _=t.localize([].concat(d(t.path),["".concat(v,".otherwise")]),t.ancestors,t.schemas),w=m._generate(e,_,r),k=w.schema,S=w.id;n.push(k),i.push("".concat(v,".otherwise").concat(S?"(".concat(S,")"):""));break}}if(o.break&&i.length>c)break}}var C=i.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",C),!C)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[C])return{schema:this.$_temp.whens[C],id:C};var A=this;this._definition.generate&&(A=this._definition.generate(this,e,t,r));for(var T=0,E=n;T<E.length;T++){var M=E[T];A=A.concat(M)}return this.$_root._tracer&&this.$_root._tracer._combine(A,[this].concat(n)),this.$_temp.whens[C]=A,{schema:A,id:C}}},{key:"_inner",value:function(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(!this._inRuleset(),"Cannot set ".concat(e," inside a ruleset"));var a=this.clone();return a.$_terms[e]&&!i.override||(a.$_terms[e]=[]),i.single?a.$_terms[e].push(t):(r=a.$_terms[e]).push.apply(r,d(t)),a.$_temp.ruleset=!1,a}},{key:"_inRuleset",value:function(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}},{key:"_ruleRemove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._singleRules.has(e))return this;var r=!1!==t.clone?this.clone():this;r._singleRules.delete(e);for(var n=[],i=0;i<r._rules.length;++i){var a=r._rules[i];a.name!==e||a.keep?n.push(a):r._inRuleset()&&i<r.$_temp.ruleset&&--r.$_temp.ruleset}return r._rules=n,r}},{key:"_values",value:function(e,t){l.verifyFlat(e,t.slice(1,-1));var r=this.clone(),i=e[0]===l.symbols.override;if(i&&(e=e.slice(1)),!r[t]&&e.length?r[t]=new k:i&&(r[t]=e.length?new k:null,r.$_mutateRebuild()),!r[t])return r;i&&r[t].override();var a,o=p(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;n(void 0!==s,"Cannot call allow/valid/invalid with undefined"),n(s!==l.symbols.override,"Override must be the first value");var c="_invalids"===t?"_valids":"_invalids";r[c]&&(r[c].remove(s),r[c].length||(n("_valids"===t||!r._flags.only,"Setting invalid value",s,"leaves schema rejecting all values due to previous valid rule"),r[c]=null)),r[t].add(s,r._refs)}}catch(u){o.e(u)}finally{o.f()}return r}}]),e}()};S.Base.prototype[l.symbols.any]={version:l.version,compile:c.compile,root:"$_root"},S.Base.prototype.isImmutable=!0,S.Base.prototype.deny=S.Base.prototype.invalid,S.Base.prototype.disallow=S.Base.prototype.invalid,S.Base.prototype.equal=S.Base.prototype.valid,S.Base.prototype.exist=S.Base.prototype.required,S.Base.prototype.not=S.Base.prototype.invalid,S.Base.prototype.options=S.Base.prototype.prefs,S.Base.prototype.preferences=S.Base.prototype.prefs,e.exports=new S.Base},8652:function(e,t,r){"use strict";var n=r(375),i=r(8571),a=r(8160),o={max:1e3,supported:new Set(["undefined","boolean","number","string"])};t.provider={provision:function(e){return new o.Cache(e)}},o.Cache=function(){function e(){m(this,e);var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.assertOptions(t,["max"]),n(void 0===t.max||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this._max=t.max||o.max,this._map=new Map,this._list=new o.List}return v(e,[{key:"length",get:function(){return this._map.size}},{key:"set",value:function(e,t){if(null===e||o.supported.has(typeof e)){var r=this._map.get(e);if(r)return r.value=t,void this._list.first(r);r=this._list.unshift({key:e,value:t}),this._map.set(e,r),this._compact()}}},{key:"get",value:function(e){var t=this._map.get(e);if(t)return this._list.first(t),i(t.value)}},{key:"_compact",value:function(){if(this._map.size>this._max){var e=this._list.pop();this._map.delete(e.key)}}}]),e}(),o.List=function(){function e(){m(this,e),this.tail=null,this.head=null}return v(e,[{key:"unshift",value:function(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}},{key:"first",value:function(e){e!==this.head&&(this._remove(e),this.unshift(e))}},{key:"pop",value:function(){return this._remove(this.tail)}},{key:"_remove",value:function(e){var t=e.next,r=e.prev;return t.prev=r,r&&(r.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}}]),e}()},8160:function(e,t,r){"use strict";var n,i,a=r(375),o=r(7916),s=r(5934),l={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};t.version=s.version,t.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},t.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},t.assertOptions=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Options";a(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");var n=Object.keys(e).filter((function(e){return!t.includes(e)}));a(0===n.length,"".concat(r," contain unknown keys: ").concat(n))},t.checkPreferences=function(e){var t=(i=i||r(3378)).preferences.validate(e);if(t.error)throw new o([t.error.details[0].message])},t.compare=function(e,t,r){switch(r){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}},t.default=function(e,t){return void 0===e?t:e},t.isIsoDate=function(e){return l.isoDate.test(e)},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isResolvable=function(e){return!!e&&(e[t.symbols.ref]||e[t.symbols.template])},t.isSchema=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e&&e[t.symbols.any];return!!n&&(a(r.legacy||n.version===t.version,"Cannot mix different versions of joi schemas"),!0)},t.isValues=function(e){return e[t.symbols.values]},t.limit=function(e){return Number.isSafeInteger(e)&&e>=0},t.preferences=function(e,i){n=n||r(6914),e=e||{},i=i||{};var a=Object.assign({},e,i);return i.errors&&e.errors&&(a.errors=Object.assign({},e.errors,i.errors),a.errors.wrap=Object.assign({},e.errors.wrap,i.errors.wrap)),i.messages&&(a.messages=n.compile(i.messages,e.messages)),delete a[t.symbols.prefs],a},t.tryWithPath=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return e()}catch(e){throw void 0!==e.path?e.path=t+"."+e.path:e.path=t,r.append&&(e.message="".concat(e.message," (").concat(e.path,")")),e}},t.validateArg=function(e,r,n){var i=n.assert,a=n.message;if(t.isSchema(i)){var o=i.validate(e);if(!o.error)return;return o.error.message}if(!i(e))return r?"".concat(r," ").concat(a):a},t.verifyFlat=function(e,t){var r,n=p(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;a(!Array.isArray(i),"Method no longer accepts array arguments:",t)}}catch(o){n.e(o)}finally{n.f()}}},3292:function(e,t,r){"use strict";var n=r(375),i=r(8160),a=r(6133),o={};t.schema=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.assertOptions(r,["appendPath","override"]);try{return o.schema(e,t,r)}catch(e){throw r.appendPath&&void 0!==e.path&&(e.message="".concat(e.message," (").concat(e.path,")")),e}},o.schema=function(e,t,r){n(void 0!==t,"Invalid undefined schema"),Array.isArray(t)&&(n(t.length,"Invalid empty array schema"),1===t.length&&(t=t[0]));var a=function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return!1!==r.override?t.valid.apply(t,[e.override].concat(i)):t.valid.apply(t,i)};if(o.simple(t))return a(e,t);if("function"==typeof t)return e.custom(t);if(n("object"==typeof t,"Invalid schema content:",typeof t),i.isResolvable(t))return a(e,t);if(i.isSchema(t))return t;if(Array.isArray(t)){var s,l=p(t);try{for(l.s();!(s=l.n()).done;){var c,u=s.value;if(!o.simple(u))return(c=e.alternatives()).try.apply(c,d(t))}}catch(h){l.e(h)}finally{l.f()}return a.apply(void 0,[e].concat(d(t)))}return t instanceof RegExp?e.string().regex(t):t instanceof Date?a(e.date(),t):(n(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(t))},t.ref=function(e,t){return a.isRef(e)?e:a.create(e,t)},t.compile=function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.assertOptions(a,["legacy"]);var s=r&&r[i.symbols.any];if(s)return n(a.legacy||s.version===i.version,"Cannot mix different versions of joi schemas:",s.version,i.version),r;if("object"!=typeof r||!a.legacy)return t.schema(e,r,{appendPath:!0});var l=o.walk(r);return l?l.compile(l.root,r):t.schema(e,r,{appendPath:!0})},o.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){var t,r=p(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,s=o.walk(a);if(s)return s}}catch(h){r.e(h)}finally{r.f()}return null}var l=e[i.symbols.any];if(l)return{root:e[l.root],compile:l.compile};for(var c in n(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e){var u=o.walk(e[c]);if(u)return u}return null},o.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},t.when=function(e,r,s){if(void 0===s&&(n(r&&"object"==typeof r,"Missing options"),s=r,r=a.create(".")),Array.isArray(s)&&(s={switch:s}),i.assertOptions(s,["is","not","then","otherwise","switch","break"]),i.isSchema(r))return n(void 0===s.is,'"is" can not be used with a schema condition'),n(void 0===s.not,'"not" can not be used with a schema condition'),n(void 0===s.switch,'"switch" can not be used with a schema condition'),o.condition(e,{is:r,then:s.then,otherwise:s.otherwise,break:s.break});if(n(a.isRef(r)||"string"==typeof r,"Invalid condition:",r),n(void 0===s.not||void 0===s.is,'Cannot combine "is" with "not"'),void 0===s.switch){var l=s;void 0!==s.not&&(l={is:s.not,then:s.otherwise,otherwise:s.then,break:s.break});var c=void 0!==l.is?e.$_compile(l.is):e.$_root.invalid(null,!1,0,"").required();return n(void 0!==l.then||void 0!==l.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),n(void 0===l.break||void 0===l.then||void 0===l.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===s.is||a.isRef(s.is)||i.isSchema(s.is)||(c=c.required()),o.condition(e,{ref:t.ref(r),is:c,then:l.then,otherwise:l.otherwise,break:l.break})}n(Array.isArray(s.switch),'"switch" must be an array'),n(void 0===s.is,'Cannot combine "switch" with "is"'),n(void 0===s.not,'Cannot combine "switch" with "not"'),n(void 0===s.then,'Cannot combine "switch" with "then"');for(var u={ref:t.ref(r),switch:[],break:s.break},h=0;h<s.switch.length;++h){var d=s.switch[h],f=h===s.switch.length-1;i.assertOptions(d,f?["is","then","otherwise"]:["is","then"]),n(void 0!==d.is,'Switch statement missing "is"'),n(void 0!==d.then,'Switch statement missing "then"');var p={is:e.$_compile(d.is),then:e.$_compile(d.then)};if(a.isRef(d.is)||i.isSchema(d.is)||(p.is=p.is.required()),f){n(void 0===s.otherwise||void 0===d.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');var m=void 0!==s.otherwise?s.otherwise:d.otherwise;void 0!==m&&(n(void 0===u.break,"Cannot specify both otherwise and break"),p.otherwise=e.$_compile(m))}u.switch.push(p)}return u},o.condition=function(e,t){for(var r=0,n=["then","otherwise"];r<n.length;r++){var i=n[r];void 0===t[i]?delete t[i]:t[i]=e.$_compile(t[i])}return t}},6354:function(e,t,r){"use strict";var n=r(5688),i=r(8160),a=r(3328);t.Report=function(){function e(r,n,i,a,o,s,l){if(m(this,e),this.code=r,this.flags=a,this.messages=o,this.path=s.path,this.prefs=l,this.state=s,this.value=n,this.message=null,this.template=null,this.local=i||{},this.local.label=t.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){var c=this.path[this.path.length-1];"object"!=typeof c&&(this.local.key=c)}}return v(e,[{key:"_setTemplate",value:function(e){if(this.template=e,!this.flags.label&&0===this.path.length){var t=this._template(this.template,"root");t&&(this.local.label=t)}}},{key:"toString",value:function(){if(this.message)return this.message;var e=this.code;if(!this.prefs.errors.render)return this.code;var t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?'Error code "'.concat(e,'" is not defined, your custom type is missing the correct messages definition'):(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}},{key:"_template",value:function(e,r){return t.template(this.value,e,r||this.code,this.state,this.prefs)}}]),e}(),t.path=function(e){var t,r="",n=p(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;"object"!=typeof i&&("string"==typeof i?(r&&(r+="."),r+=i):r+="[".concat(i,"]"))}}catch(a){n.e(a)}finally{n.f()}return r},t.template=function(e,t,r,n,o){if(t){if(a.isTemplate(t))return"root"!==r?t:null;var s=o.errors.language;if(i.isResolvable(s)&&(s=s.resolve(e,n,o)),s&&t[s]){if(void 0!==t[s][r])return t[s][r];if(void 0!==t[s]["*"])return t[s]["*"]}return t[r]?t[r]:t["*"]}},t.label=function(e,r,n,i){if(e.label)return e.label;if(!n.errors.label)return"";var a=r.path;return"key"===n.errors.label&&r.path.length>1&&(a=r.path.slice(-1)),t.path(a)||t.template(null,n.messages,"root",r,n)||i&&t.template(null,i,"root",r,n)||"value"},t.process=function(e,r,n){if(!e)return null;var i=t.details(e),a=i.override,o=i.message,s=i.details;if(a)return a;if(n.errors.stack)return new t.ValidationError(o,s,r);var l=Error.stackTraceLimit;Error.stackTraceLimit=0;var c=new t.ValidationError(o,s,r);return Error.stackTraceLimit=l,c},t.details=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=[],a=p(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(o instanceof Error){if(!1!==r.override)return{override:o};var s=o.toString();n.push(s),i.push({message:s,type:"override",context:{error:o}})}else{var l=o.toString();n.push(l),i.push({message:l,path:o.path.filter((function(e){return"object"!=typeof e})),type:o.code,context:o.local})}}}catch(c){a.e(c)}finally{a.f()}return n.length>1&&(n=d(new Set(n))),{message:n.join(". "),details:i}},t.ValidationError=function(e){c(n,e);var r=u(n);function n(e,t,i){var a;return m(this,n),(a=r.call(this,e))._original=i,a.details=t,a}return v(n,null,[{key:"isError",value:function(e){return e instanceof t.ValidationError}}]),n}(h(Error)),t.ValidationError.prototype.isJoi=!0,t.ValidationError.prototype.name="ValidationError",t.ValidationError.prototype.annotate=n.error},8901:function(e,t,r){"use strict";var n=r(375),i=r(8571),a=r(8160),o=r(6914),s={};t.type=function(e,t){var r=Object.getPrototypeOf(e),l=i(r),c=e._assign(Object.create(l)),u=Object.assign({},t);delete u.base,l._definition=u;var h=r._definition||{};u.messages=o.merge(h.messages,u.messages),u.properties=Object.assign({},h.properties,u.properties),c.type=u.type,u.flags=Object.assign({},h.flags,u.flags);var d=Object.assign({},h.terms);if(u.terms)for(var m in u.terms){var v=u.terms[m];n(void 0===c.$_terms[m],"Invalid term override for",u.type,m),c.$_terms[m]=v.init,d[m]=v}u.terms=d,u.args||(u.args=h.args),u.prepare=s.prepare(u.prepare,h.prepare),u.coerce&&("function"==typeof u.coerce&&(u.coerce={method:u.coerce}),u.coerce.from&&!Array.isArray(u.coerce.from)&&(u.coerce={method:u.coerce.method,from:[].concat(u.coerce.from)})),u.coerce=s.coerce(u.coerce,h.coerce),u.validate=s.validate(u.validate,h.validate);var g=Object.assign({},h.rules);if(u.rules){var y=function(e){var t=u.rules[e];n("object"==typeof t,"Invalid rule definition for",u.type,e);var r=t.method;if(void 0===r&&(r=function(){return this.$_addRule(e)}),r&&(n(!l[e],"Rule conflict in",u.type,e),l[e]=r),n(!g[e],"Rule conflict in",u.type,e),g[e]=t,t.alias){var i,o=[].concat(t.alias),s=p(o);try{for(s.s();!(i=s.n()).done;){var c=i.value;l[c]=t.method}}catch(h){s.e(h)}finally{s.f()}}t.args&&(t.argsByName=new Map,t.args=t.args.map((function(e){return"string"==typeof e&&(e={name:e}),n(!t.argsByName.has(e.name),"Duplicated argument name",e.name),a.isSchema(e.assert)&&(e.assert=e.assert.strict().label(e.name)),t.argsByName.set(e.name,e),e})))};for(var x in u.rules)y(x)}u.rules=g;var b=Object.assign({},h.modifiers);if(u.modifiers){var _=function(e){n(!l[e],"Rule conflict in",u.type,e);var t=u.modifiers[e];n("function"==typeof t,"Invalid modifier definition for",u.type,e);var r=function(t){return this.rule(f({},e,t))};l[e]=r,b[e]=t};for(var w in u.modifiers)_(w)}if(u.modifiers=b,u.overrides){for(var k in l._super=r,c.$_super={},u.overrides)n(r[k],"Cannot override missing",k),u.overrides[k][a.symbols.parent]=r[k],c.$_super[k]=r[k].bind(c);Object.assign(l,u.overrides)}u.cast=Object.assign({},h.cast,u.cast);var S=Object.assign({},h.manifest,u.manifest);return S.build=s.build(u.manifest&&u.manifest.build,h.manifest&&h.manifest.build),u.manifest=S,u.rebuild=s.rebuild(u.rebuild,h.rebuild),c},s.build=function(e,t){return e&&t?function(r,n){return t(e(r,n),n)}:e||t},s.coerce=function(e,t){return e&&t?{from:e.from&&t.from?d(new Set([].concat(d(e.from),d(t.from)))):null,method:function(r,n){var i;if((!t.from||t.from.includes(typeof r))&&(i=t.method(r,n))){if(i.errors||void 0===i.value)return i;r=i.value}if(!e.from||e.from.includes(typeof r)){var a=e.method(r,n);if(a)return a}return i}}:e||t},s.prepare=function(e,t){return e&&t?function(r,n){var i=e(r,n);if(i){if(i.errors||void 0===i.value)return i;r=i.value}return t(r,n)||i}:e||t},s.rebuild=function(e,t){return e&&t?function(r){t(r),e(r)}:e||t},s.validate=function(e,t){return e&&t?function(r,n){var i=t(r,n);if(i){if(i.errors&&(!Array.isArray(i.errors)||i.errors.length))return i;r=i.value}return e(r,n)||i}:e||t}},5107:function(e,t,r){"use strict";var n,i=r(375),a=r(8571),o=r(8652),s=r(8160),c=r(3292),u=r(6354),h=r(8901),f=r(9708),m=r(6133),v=r(3328),g=r(1152),y={types:{alternatives:r(4946),any:r(8068),array:r(546),boolean:r(4937),date:r(7500),function:r(390),link:r(8785),number:r(3832),object:r(8966),string:r(7417),symbol:r(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){var e,t={_types:new Set(Object.keys(y.types))},r=p(t._types);try{var n=function(){var r=e.value;t[r]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i(!t.length||["alternatives","link","object"].includes(r),"The",r,"type does not allow arguments"),y.generate(this,y.types[r],t)}};for(r.s();!(e=r.n()).done;)n()}catch(u){r.e(u)}finally{r.f()}for(var a=function(){var e=s[o];t[e]=function(){var t;return(t=this.any())[e].apply(t,arguments)}},o=0,s=["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"];o<s.length;o++)a();for(var l in Object.assign(t,y.methods),y.aliases){var c=y.aliases[l];t[l]=t[c]}return t.x=t.expression,g.setup&&g.setup(t),t}};y.methods={ValidationError:u.ValidationError,version:s.version,cache:o.provider,assert:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];y.assert(e,t,!0,n)},attempt:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return y.assert(e,t,!1,n)},build:function(e){return i("function"==typeof f.build,"Manifest functionality disabled"),f.build(this,e)},checkPreferences:function(e){s.checkPreferences(e)},compile:function(e,t){return c.compile(this,e,t)},defaults:function(e){i("function"==typeof e,"modifier must be a function");var t,r=Object.assign({},this),n=p(r._types);try{var a=function(){var n=t.value,a=e(r[n]());i(s.isSchema(a),"modifier must return a valid schema object"),r[n]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y.generate(this,a,t)}};for(n.s();!(t=n.n()).done;)a()}catch(o){n.e(o)}finally{n.f()}return r},expression:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l(v,t)},extend:function(){for(var e=this,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];s.verifyFlat(a,"extend"),n=n||r(3378),i(a.length,"You need to provide at least one extension"),this.assert(a,n.extensions);var l=Object.assign({},this);l._types=new Set(l._types);for(var c=0,u=a;c<u.length;c++){var d=u[c];"function"==typeof d&&(d=d(l)),this.assert(d,n.extension);var f,m=y.expandExtension(d,l),v=p(m);try{var g=function(){var t=f.value;i(void 0===l[t.type]||l._types.has(t.type),"Cannot override name",t.type);var r=t.base||e.any(),n=h.type(r,t);l._types.add(t.type),l[t.type]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y.generate(this,n,t)}};for(v.s();!(f=v.n()).done;)g()}catch(x){v.e(x)}finally{v.f()}}return l},isError:u.ValidationError.isError,isExpression:v.isTemplate,isRef:m.isRef,isSchema:s.isSchema,in:function(){return m.in.apply(m,arguments)},override:s.symbols.override,ref:function(){return m.create.apply(m,arguments)},types:function(){var e,t={},r=p(this._types);try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n]=this[n]()}}catch(a){r.e(a)}finally{r.f()}for(var i in y.aliases)t[i]=this[i]();return t}},y.assert=function(e,t,r,n){var i=n[0]instanceof Error||"string"==typeof n[0]?n[0]:null,o=null!==i?n[1]:n[0],l=t.validate(e,s.preferences({errors:{stack:!0}},o||{})),c=l.error;if(!c)return l.value;if(i instanceof Error)throw i;var h=r&&"function"==typeof c.annotate?c.annotate():c.message;throw c instanceof u.ValidationError==0&&(c=a(c)),c.message=i?"".concat(i," ").concat(h):h,c},y.generate=function(e,t,r){var n;return i(e,"Must be invoked on a Joi instance."),t.$_root=e,t._definition.args&&r.length?(n=t._definition).args.apply(n,[t].concat(d(r))):t},y.expandExtension=function(e,t){if("string"==typeof e.type)return[e];var r,n=[],i=p(t._types);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(e.type.test(a)){var o=Object.assign({},e);o.type=a,o.base=t[a](),n.push(o)}}}catch(s){i.e(s)}finally{i.f()}return n},e.exports=y.root()},6914:function(e,t,r){"use strict";var n=r(375),i=r(8571),a=r(3328);t.compile=function(e,t){if("string"==typeof e)return n(!t,"Cannot set single message string"),new a(e);if(a.isTemplate(e))return n(!t,"Cannot set single message template"),e;for(var r in n("object"==typeof e&&!Array.isArray(e),"Invalid message options"),t=t?i(t):{},e){var o=e[r];if("root"===r||a.isTemplate(o))t[r]=o;else if("string"!=typeof o){n("object"==typeof o&&!Array.isArray(o),"Invalid message for",r);var s=r;for(r in t[s]=t[s]||{},o){var l=o[r];"root"===r||a.isTemplate(l)?t[s][r]=l:(n("string"==typeof l,"Invalid message for",r,"in",s),t[s][r]=new a(l))}}else t[r]=new a(o)}return t},t.decompile=function(e){var t={};for(var r in e){var n=e[r];if("root"!==r)if(a.isTemplate(n))t[r]=n.describe({compact:!0});else{var i=r;for(r in t[i]={},n){var o=n[r];"root"!==r?t[i][r]=o.describe({compact:!0}):t[i].root=o}}else t.root=n}return t},t.merge=function(e,r){if(!e)return t.compile(r);if(!r)return e;if("string"==typeof r)return new a(r);if(a.isTemplate(r))return r;var o=i(e);for(var s in r){var l=r[s];if("root"===s||a.isTemplate(l))o[s]=l;else if("string"!=typeof l){n("object"==typeof l&&!Array.isArray(l),"Invalid message for",s);var c=s;for(s in o[c]=o[c]||{},l){var u=l[s];"root"===s||a.isTemplate(u)?o[c][s]=u:(n("string"==typeof u,"Invalid message for",s,"in",c),o[c][s]=new a(u))}}else o[s]=new a(l)}return o}},2294:function(e,t,r){"use strict";var n=r(375),i=r(8160),a=r(6133),l={};t.Ids=l.Ids=function(){function e(){m(this,e),this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}return v(e,[{key:"clone",value:function(){var e=new l.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}},{key:"concat",value:function(e){e._schemaChain&&(this._schemaChain=!0);var t,r=p(e._byId.entries());try{for(r.s();!(t=r.n()).done;){var i=s(t.value,2),a=i[0],o=i[1];n(!this._byKey.has(a),"Schema id conflicts with existing key:",a),this._byId.set(a,o)}}catch(f){r.e(f)}finally{r.f()}var l,c=p(e._byKey.entries());try{for(c.s();!(l=c.n()).done;){var u=s(l.value,2),h=u[0],d=u[1];n(!this._byId.has(h),"Schema key conflicts with existing id:",h),this._byKey.set(h,d)}}catch(f){c.e(f)}finally{c.f()}}},{key:"fork",value:function(e,t,r){var a=this._collect(e);a.push({schema:r});var o=a.shift(),s={id:o.id,schema:t(o.schema)};n(i.isSchema(s.schema),"adjuster function failed to return a joi schema type");var c,u=p(a);try{for(u.s();!(c=u.n()).done;){var h=c.value;s={id:h.id,schema:l.fork(h.schema,s.id,s.schema)}}}catch(d){u.e(d)}finally{u.f()}return s.schema}},{key:"labels",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e[0],n=this._get(r);if(!n)return[].concat(d(t),d(e)).join(".");var i=e.slice(1);return t=[].concat(d(t),[n.schema._flags.label||r]),i.length?n.schema._ids.labels(i,t):t.join(".")}},{key:"reach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e[0],i=this._get(r);n(i,"Schema does not contain path",[].concat(d(t),d(e)).join("."));var a=e.slice(1);return a.length?i.schema._ids.reach(a,[].concat(d(t),[r])):i.schema}},{key:"register",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).key;if(e&&i.isSchema(e)){(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);var r=e._flags.id;if(r){var a=this._byId.get(r);n(!a||a.schema===e,"Cannot add different schemas with the same id:",r),n(!this._byKey.has(r),"Schema id conflicts with existing key:",r),this._byId.set(r,{schema:e,id:r})}t&&(n(!this._byKey.has(t),"Schema already contains key:",t),n(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,{schema:e,id:t}))}}},{key:"reset",value:function(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}},{key:"_collect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=e[0],a=this._get(i);n(a,"Schema does not contain path",[].concat(d(t),d(e)).join(".")),r=[a].concat(d(r));var o=e.slice(1);return o.length?a.schema._ids._collect(o,[].concat(d(t),[i]),r):r}},{key:"_get",value:function(e){return this._byId.get(e)||this._byKey.get(e)}}]),e}(),l.fork=function(e,r,n){var i=t.schema(e,{each:function(e,t){var i=t.key;if(r===(e._flags.id||i))return n},ref:!1});return i?i.$_mutateRebuild():e},t.schema=function(e,t){var r;for(var n in e._flags)if("_"!==n[0]){var i=l.scan(e._flags[n],{source:"flags",name:n},t);void 0!==i&&((r=r||e.clone())._flags[n]=i)}for(var a=0;a<e._rules.length;++a){var o=e._rules[a],s=l.scan(o.args,{source:"rules",name:o.name},t);if(void 0!==s){r=r||e.clone();var c=Object.assign({},o);c.args=s,r._rules[a]=c,r._singleRules.get(o.name)===o&&r._singleRules.set(o.name,c)}}for(var u in e.$_terms)if("_"!==u[0]){var h=l.scan(e.$_terms[u],{source:"terms",name:u},t);void 0!==h&&((r=r||e.clone()).$_terms[u]=h)}return r},l.scan=function(e,t,r,n,s){var c=n||[];if(null!==e&&"object"==typeof e){var u;if(Array.isArray(e)){for(var h=0;h<e.length;++h){var f="terms"===t.source&&"keys"===t.name&&e[h].key,p=l.scan(e[h],t,r,[h].concat(d(c)),f);void 0!==p&&((u=u||e.slice())[h]=p)}return u}if(!1!==r.schema&&i.isSchema(e)||!1!==r.ref&&a.isRef(e)){var m=r.each(e,o(o({},t),{},{path:c,key:s}));if(m===e)return;return m}for(var v in e)if("_"!==v[0]){var g=l.scan(e[v],t,r,[v].concat(d(c)),s);void 0!==g&&((u=u||Object.assign({},e))[v]=g)}return u}}},6133:function(e,t,r){"use strict";var n,i=r(375),a=r(8571),l=r(9621),c=r(8160),u={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};t.create=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i("string"==typeof e,"Invalid reference key:",e),c.assertOptions(t,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),i(!t.prefix||"object"==typeof t.prefix,"options.prefix must be of type object");var r=Object.assign({},u.defaults,t);delete r.prefix;var n=r.separator,a=u.context(e,n,t.prefix);if(r.type=a.type,e=a.key,"value"===r.type)if(a.root&&(i(!n||e[0]!==n,"Cannot specify relative path with root prefix"),r.ancestor="root",e||(e=null)),n&&n===e)e=null,r.ancestor=0;else if(void 0!==r.ancestor)i(!n||!e||e[0]!==n,"Cannot combine prefix with ancestor option");else{var o=u.ancestor(e,n),l=s(o,2),h=l[0],d=l[1];d&&""===(e=e.slice(d))&&(e=null),r.ancestor=h}return r.path=n?null===e?[]:e.split(n):[e],new u.Ref(r)},t.in=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.create(e,o(o({},r),{},{in:!0}))},t.isRef=function(e){return!!e&&!!e[c.symbols.ref]},u.Ref=function(){function e(t){m(this,e),i("object"==typeof t,"Invalid reference construction"),c.assertOptions(t,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),i([!1,void 0].includes(t.separator)||"string"==typeof t.separator&&1===t.separator.length,"Invalid separator"),i(!t.adjust||"function"==typeof t.adjust,"options.adjust must be a function"),i(!t.map||Array.isArray(t.map),"options.map must be an array"),i(!t.map||!t.adjust,"Cannot set both map and adjust options"),Object.assign(this,u.defaults,t),i("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}return v(e,[{key:"resolve",value:function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return i(!this.in||a.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(r.context,t,a):"local"===this.type?this._resolve(n,t,a):this.ancestor?"root"===this.ancestor?this._resolve(t.ancestors[t.ancestors.length-1],t,a):(i(this.ancestor<=t.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(t.ancestors[this.ancestor-1],t,a)):this._resolve(e,t,a)}},{key:"_resolve",value:function(e,t,r){var n;if("value"===this.type&&t.mainstay.shadow&&!1!==r.shadow&&(n=t.mainstay.shadow.get(this.absolute(t))),void 0===n&&(n=l(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(n=this.adjust(n)),this.map){var i=this.map.get(n);void 0!==i&&(n=i)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,n),n}},{key:"toString",value:function(){return this.display}},{key:"absolute",value:function(e){return[].concat(d(e.path.slice(0,-this.ancestor)),d(this.path))}},{key:"clone",value:function(){return new u.Ref(this)}},{key:"describe",value:function(){var e={path:this.path};"value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=d(this.map));for(var t=0,r=["adjust","iterables","render"];t<r.length;t++){var n=r[t];null!==this[n]&&void 0!==this[n]&&(e[n]=this[n])}return!1!==this.in&&(e.in=!0),{ref:e}}},{key:"updateDisplay",value:function(){var e=null!==this.key?this.key:"";if("value"===this.type)if(this.separator)if(this.ancestor)if("root"!==this.ancestor)if(1!==this.ancestor){var t=new Array(this.ancestor+1).fill(this.separator).join("");this.display="ref:".concat(t).concat(e||"")}else this.display="ref:".concat(e||"..");else this.display="ref:root:".concat(e);else this.display="ref:".concat(this.separator).concat(e);else this.display="ref:".concat(e);else this.display="ref:".concat(this.type,":").concat(e)}}]),e}(),u.Ref.prototype[c.symbols.ref]=!0,t.build=function(e){return"value"===(e=Object.assign({},u.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new u.Ref(e)},u.context=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e=e.trim(),r){var n=void 0===r.global?"$":r.global;if(n!==t&&e.startsWith(n))return{key:e.slice(n.length),type:"global"};var i=void 0===r.local?"#":r.local;if(i!==t&&e.startsWith(i))return{key:e.slice(i.length),type:"local"};var a=void 0===r.root?"/":r.root;if(a!==t&&e.startsWith(a))return{key:e.slice(a.length),type:"value",root:!0}}return{key:e,type:"value"}},u.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];for(var r=2;e[r]===t;)++r;return[r-1,r]},t.toSibling=0,t.toParent=1,t.Manager=function(){function e(){m(this,e),this.refs=[]}return v(e,[{key:"register",value:function(e,i){if(e)if(i=void 0===i?t.toParent:i,Array.isArray(e)){var a,o=p(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.register(s,i)}}catch(d){o.e(d)}finally{o.f()}}else if(c.isSchema(e)){var l,u=p(e._refs.refs);try{for(u.s();!(l=u.n()).done;){var h=l.value;h.ancestor-i>=0&&this.refs.push({ancestor:h.ancestor-i,root:h.root})}}catch(d){u.e(d)}finally{u.f()}}else t.isRef(e)&&"value"===e.type&&e.ancestor-i>=0&&this.refs.push({ancestor:e.ancestor-i,root:e.root}),(n=n||r(3328)).isTemplate(e)&&this.register(e.refs(),i)}},{key:"length",get:function(){return this.refs.length}},{key:"clone",value:function(){var e=new t.Manager;return e.refs=a(this.refs),e}},{key:"reset",value:function(){this.refs=[]}},{key:"roots",value:function(){return this.refs.filter((function(e){return!e.ancestor})).map((function(e){return e.root}))}}]),e}()},3378:function(e,t,r){"use strict";var n=r(5107),i={};i.wrap=n.string().min(1).max(2).allow(!1),t.preferences=n.object({allowUnknown:n.boolean(),abortEarly:n.boolean(),artifacts:n.boolean(),cache:n.boolean(),context:n.object(),convert:n.boolean(),dateFormat:n.valid("date","iso","string","time","utc"),debug:n.boolean(),errors:{escapeHtml:n.boolean(),label:n.valid("path","key",!1),language:[n.string(),n.object().ref()],render:n.boolean(),stack:n.boolean(),wrap:{label:i.wrap,array:i.wrap,string:i.wrap}},externals:n.boolean(),messages:n.object(),noDefaults:n.boolean(),nonEnumerables:n.boolean(),presence:n.valid("required","optional","forbidden"),skipFunctions:n.boolean(),stripUnknown:n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects").allow(!0,!1),warnings:n.boolean()}).strict(),i.nameRx=/^[a-zA-Z0-9]\w*$/,i.rule=n.object({alias:n.array().items(n.string().pattern(i.nameRx)).single(),args:n.array().items(n.string(),n.object({name:n.string().pattern(i.nameRx).required(),ref:n.boolean(),assert:n.alternatives([n.function(),n.object().schema()]).conditional("ref",{is:!0,then:n.required()}),normalize:n.function(),message:n.string().when("assert",{is:n.function(),then:n.required()})})),convert:n.boolean(),manifest:n.boolean(),method:n.function().allow(!1),multi:n.boolean(),validate:n.function()}),t.extension=n.object({type:n.alternatives([n.string(),n.object().regex()]).required(),args:n.function(),cast:n.object().pattern(i.nameRx,n.object({from:n.function().maxArity(1).required(),to:n.function().minArity(1).maxArity(2).required()})),base:n.object().schema().when("type",{is:n.object().regex(),then:n.forbidden()}),coerce:[n.function().maxArity(3),n.object({method:n.function().maxArity(3).required(),from:n.array().items(n.string()).single()})],flags:n.object().pattern(i.nameRx,n.object({setter:n.string(),default:n.any()})),manifest:{build:n.function().arity(2)},messages:[n.object(),n.string()],modifiers:n.object().pattern(i.nameRx,n.function().minArity(1).maxArity(2)),overrides:n.object().pattern(i.nameRx,n.function()),prepare:n.function().maxArity(3),rebuild:n.function().arity(1),rules:n.object().pattern(i.nameRx,i.rule),terms:n.object().pattern(i.nameRx,n.object({init:n.array().allow(null).required(),manifest:n.object().pattern(/.+/,[n.valid("schema","single"),n.object({mapped:n.object({from:n.string().required(),to:n.string().required()}).required()})])})),validate:n.function().maxArity(3)}).strict(),t.extensions=n.array().items(n.object(),n.function().arity(1)).strict(),i.desc={buffer:n.object({buffer:n.string()}),func:n.object({function:n.function().required(),options:{literal:!0}}),override:n.object({override:!0}),ref:n.object({ref:n.object({type:n.valid("value","global","local"),path:n.array().required(),separator:n.string().length(1).allow(!1),ancestor:n.number().min(0).integer().allow("root"),map:n.array().items(n.array().length(2)).min(1),adjust:n.function(),iterables:n.boolean(),in:n.boolean(),render:n.boolean()}).required()}),regex:n.object({regex:n.string().min(3)}),special:n.object({special:n.valid("deep").required()}),template:n.object({template:n.string().required(),options:n.object()}),value:n.object({value:n.alternatives([n.object(),n.array()]).required()})},i.desc.entity=n.alternatives([n.array().items(n.link("...")),n.boolean(),n.function(),n.number(),n.string(),i.desc.buffer,i.desc.func,i.desc.ref,i.desc.regex,i.desc.special,i.desc.template,i.desc.value,n.link("/")]),i.desc.values=n.array().items(null,n.boolean(),n.function(),n.number().allow(1/0,-1/0),n.string().allow(""),n.symbol(),i.desc.buffer,i.desc.func,i.desc.override,i.desc.ref,i.desc.regex,i.desc.template,i.desc.value),i.desc.messages=n.object().pattern(/.+/,[n.string(),i.desc.template,n.object().pattern(/.+/,[n.string(),i.desc.template])]),t.description=n.object({type:n.string().required(),flags:n.object({cast:n.string(),default:n.any(),description:n.string(),empty:n.link("/"),failover:i.desc.entity,id:n.string(),label:n.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:n.boolean(),unit:n.string()}).unknown(),preferences:{allowUnknown:n.boolean(),abortEarly:n.boolean(),artifacts:n.boolean(),cache:n.boolean(),convert:n.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:n.boolean(),label:["path","key"],language:[n.string(),i.desc.ref],wrap:{label:i.wrap,array:i.wrap}},externals:n.boolean(),messages:i.desc.messages,noDefaults:n.boolean(),nonEnumerables:n.boolean(),presence:["required","optional","forbidden"],skipFunctions:n.boolean(),stripUnknown:n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects").allow(!0,!1),warnings:n.boolean()},allow:i.desc.values,invalid:i.desc.values,rules:n.array().min(1).items({name:n.string().required(),args:n.object().min(1),keep:n.boolean(),message:[n.string(),i.desc.messages],warn:n.boolean()}),keys:n.object().pattern(/.*/,n.link("/")),link:i.desc.ref}).pattern(/^[a-z]\w*$/,n.any())},493:function(e,t,r){"use strict";var n=r(8571),i=r(9621),a=r(8160),o={value:Symbol("value")};e.exports=o.State=function(){function e(t,r,n){m(this,e),this.path=t,this.ancestors=r,this.mainstay=n.mainstay,this.schemas=n.schemas,this.debug=null}return v(e,[{key:"localize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=new o.State(e,t,this);return r&&n.schemas&&(n.schemas=[o.schemas(r)].concat(d(n.schemas))),n}},{key:"nest",value:function(e,t){var r=new o.State(this.path,this.ancestors,this);return r.schemas=r.schemas&&[o.schemas(e)].concat(d(r.schemas)),r.debug=t,r}},{key:"shadow",value:function(e,t){this.mainstay.shadow=this.mainstay.shadow||new o.Shadow,this.mainstay.shadow.set(this.path,e,t)}},{key:"snapshot",value:function(){this.mainstay.shadow&&(this._snapshot=n(this.mainstay.shadow.node(this.path)))}},{key:"restore",value:function(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0)}}]),e}(),o.schemas=function(e){return a.isSchema(e)?{schema:e}:e},o.Shadow=function(){function e(){m(this,e),this._values=null}return v(e,[{key:"set",value:function(e,t,r){if(e.length&&("strip"!==r||"number"!=typeof e[e.length-1])){this._values=this._values||new Map;for(var n=this._values,i=0;i<e.length;++i){var a=e[i],s=n.get(a);s||(s=new Map,n.set(a,s)),n=s}n[o.value]=t}}},{key:"get",value:function(e){var t=this.node(e);if(t)return t[o.value]}},{key:"node",value:function(e){if(this._values)return i(this._values,e,{iterables:!0})}},{key:"override",value:function(e,t){if(this._values){var r=e.slice(0,-1),n=e[e.length-1],a=i(this._values,r,{iterables:!0});t?a.set(n,t):a&&a.delete(n)}}}]),e}()},3328:function(e,t,r){"use strict";var n=r(375),i=r(8571),a=r(5277),l=r(1447),c=r(8160),u=r(6354),h=r(6133),f={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join("\x01"),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=f.Template=function(){function e(t,r){m(this,e),n("string"==typeof t,"Template source must be a string"),n(!t.includes("\0")&&!t.includes("\x01"),"Template source cannot contain reserved control characters"),this.source=t,this.rendered=t,this._template=null,this._settings=i(r),this._parse()}return v(e,[{key:"_parse",value:function(){if(this.source.includes("{")){var e=f.encode(this.source),t=f.split(e),r=!1,n=[],i=t.shift();i&&n.push(i);var a,o=p(t);try{for(o.s();!(a=o.n()).done;){var s=a.value,l="{"!==s[0],c=l?"}":"}}",u=s.indexOf(c);if(-1!==u&&"{"!==s[1]){var h=s.slice(l?0:1,u),d=":"===h[0];d&&(h=h.slice(1));var m=this._ref(f.decode(h),{raw:l,wrapped:d});n.push(m),"string"!=typeof m&&(r=!0);var v=s.slice(u+c.length);v&&n.push(f.decode(v))}else n.push("{".concat(f.decode(s)))}}catch(g){o.e(g)}finally{o.f()}r?this._template=n:this.rendered=n.join("")}}},{key:"describe",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._settings&&e.compact)return this.source;var t={template:this.source};return this._settings&&(t.options=this._settings),t}},{key:"isDynamic",value:function(){return!!this._template}},{key:"refs",value:function(){if(this._template){var e,t=[],r=p(this._template);try{for(r.s();!(e=r.n()).done;){var n=e.value;"string"!=typeof n&&t.push.apply(t,d(n.refs))}}catch(i){r.e(i)}finally{r.f()}return t}}},{key:"resolve",value:function(e,t,r,n){return this._template&&1===this._template.length?this._part(this._template[0],e,t,r,n,{}):this.render(e,t,r,n)}},{key:"_part",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return e.ref?(t=e.ref).resolve.apply(t,n):e.formula.evaluate(n)}},{key:"render",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this.isDynamic())return this.rendered;var o,s=[],l=p(this._template);try{for(l.s();!(o=l.n()).done;){var c=o.value;if("string"==typeof c)s.push(c);else{var u=this._part(c,e,t,r,n,i),h=f.stringify(u,e,t,r,n,i);if(void 0!==h){var d=c.raw||!1===(i.errors&&i.errors.escapeHtml)?h:a(h);s.push(f.wrap(d,c.wrapped&&r.errors.wrap.label))}}}}catch(m){l.e(m)}finally{l.f()}return s.join("")}},{key:"_ref",value:function(e,t){var r=this,n=t.raw,i=t.wrapped,a=[],o=function(e){var t=h.create(e,r._settings);return a.push(t),function(e){return t.resolve.apply(t,d(e))}};try{var s=new l.Parser(e,{reference:o,functions:f.functions,constants:f.constants})}catch(t){throw t.message='Invalid template variable "'.concat(e,'" fails due to: ').concat(t.message),t}if(s.single){if("reference"===s.single.type){var c=a[0];return{ref:c,raw:n,refs:a,wrapped:i||"local"===c.type&&"label"===c.key}}return f.stringify(s.single.value)}return{formula:s,raw:n,refs:a}}},{key:"toString",value:function(){return this.source}}],[{key:"date",value:function(e,t){return f.dateFormat[t.dateFormat].call(e)}},{key:"build",value:function(e){return new f.Template(e.template,e.options)}},{key:"isTemplate",value:function(e){return!!e&&!!e[c.symbols.template]}}]),e}(),f.Template.prototype[c.symbols.template]=!0,f.Template.prototype.isImmutable=!0,f.encode=function(e){return e.replace(/\\(\{+)/g,(function(e,t){return f.opens.slice(0,t.length)})).replace(/\\(\}+)/g,(function(e,t){return f.closes.slice(0,t.length)}))},f.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},f.split=function(e){for(var t=[],r="",n=0;n<e.length;++n){var i=e[n];if("{"===i){for(var a="";n+1<e.length&&"{"===e[n+1];)a+="{",++n;t.push(r),r=a}else r+=i}return t.push(r),t},f.wrap=function(e,t){return t?1===t.length?"".concat(t).concat(e).concat(t):"".concat(t[0]).concat(e).concat(t[1]):e},f.stringify=function(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=typeof e,c=n&&n.errors&&n.errors.wrap||{},u=!1;if(h.isRef(e)&&e.render&&(u=e.in,e=e.resolve(t,r,n,i,o({in:e.in},a))),null===e)return"null";if("string"===l)return f.wrap(e,a.arrayItems&&c.string);if("number"===l||"function"===l||"symbol"===l)return e.toString();if("object"!==l)return JSON.stringify(e);if(e instanceof Date)return f.Template.date(e,n);if(e instanceof Map){var d,m=[],v=p(e.entries());try{for(v.s();!(d=v.n()).done;){var g=s(d.value,2),y=g[0],x=g[1];m.push("".concat(y.toString()," -> ").concat(x.toString()))}}catch(S){v.e(S)}finally{v.f()}e=m}if(!Array.isArray(e))return e.toString();var b,_=[],w=p(e);try{for(w.s();!(b=w.n()).done;){var k=b.value;_.push(f.stringify(k,t,r,n,i,o({arrayItems:!0},a)))}}catch(S){w.e(S)}finally{w.f()}return f.wrap(_.join(", "),!u&&c.array)},f.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},f.functions={if:function(e,t,r){return e?t:r},length:function(e){return"string"==typeof e?e.length:e&&"object"==typeof e?Array.isArray(e)?e.length:Object.keys(e).length:null},msg:function(e){var t=s(this,5),r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],l=o.messages;if(!l)return"";var c=u.template(r,l[0],e,n,i)||u.template(r,l[1],e,n,i);return c?c.render(r,n,i,a,o):""},number:function(e){return"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}}},4946:function(e,t,r){"use strict";var n=r(375),i=r(1687),a=r(8068),o=r(8160),l=r(3292),c=r(6354),u=r(6133),h={};e.exports=a.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:u.toSibling}},args:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return 1===r.length&&Array.isArray(r[0])?e.try.apply(e,d(r[0])):e.try.apply(e,r)},validate:function(e,t){var r=t.schema,n=t.error,a=t.state,o=t.prefs;if(r._flags.match){for(var s=[],l=[],u=0;u<r.$_terms.matches.length;++u){var d=r.$_terms.matches[u],f=a.nest(d.schema,"match.".concat(u));f.snapshot();var p=d.schema.$_validate(e,f,o);p.errors?(l.push(p.errors),f.restore()):s.push(p.value)}if(0===s.length)return{errors:n("alternatives.any",{details:l.map((function(e){return c.details(e,{override:!1})}))})};if("one"===r._flags.match)return 1===s.length?{value:s[0]}:{errors:n("alternatives.one")};if(s.length!==r.$_terms.matches.length)return{errors:n("alternatives.all",{details:l.map((function(e){return c.details(e,{override:!1})}))})};var m=function e(t){return t.$_terms.matches.some((function(t){return"object"===t.schema.type||"alternatives"===t.schema.type&&e(t.schema)}))};return m(r)?{value:s.reduce((function(e,t){return i(e,t,{mergeArrays:!1})}))}:{value:s[s.length-1]}}for(var v=[],g=0;g<r.$_terms.matches.length;++g){var y=r.$_terms.matches[g];if(y.schema){var x=a.nest(y.schema,"match.".concat(g));x.snapshot();var b=y.schema.$_validate(e,x,o);if(!b.errors)return b;x.restore(),v.push({schema:y.schema,reports:b.errors})}else for(var _=y.ref?y.ref.resolve(e,a,o):e,w=y.is?[y]:y.switch,k=0;k<w.length;++k){var S=w[k],C=S.is,A=S.then,T=S.otherwise,E="match.".concat(g).concat(y.switch?"."+k:"");if(C.$_match(_,a.nest(C,"".concat(E,".is")),o)){if(A)return A.$_validate(e,a.nest(A,"".concat(E,".then")),o)}else if(T)return T.$_validate(e,a.nest(T,"".concat(E,".otherwise")),o)}}return h.errors(v,t)},rules:{conditional:{method:function(e,t){n(!this._flags._endedSwitch,"Unreachable condition"),n(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),n(void 0===t.break,"Cannot use break option with alternatives conditional");var r,i=this.clone(),a=l.when(i,e,t),o=a.is?[a]:a.switch,s=p(o);try{for(s.s();!(r=s.n()).done;){var c=r.value;if(c.then&&c.otherwise){i.$_setFlag("_endedSwitch",!0,{clone:!1});break}}}catch(u){s.e(u)}finally{s.f()}return i.$_terms.matches.push(a),i.$_mutateRebuild()}},match:{method:function(e){if(n(["any","one","all"].includes(e),"Invalid alternatives match mode",e),"any"!==e){var t,r=p(this.$_terms.matches);try{for(r.s();!(t=r.n()).done;){var i=t.value;n(i.schema,"Cannot combine match mode",e,"with conditional rules")}}catch(a){r.e(a)}finally{r.f()}}return this.$_setFlag("match",e)}},try:{method:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n(t.length,"Missing alternative schemas"),o.verifyFlat(t,"try"),n(!this._flags._endedSwitch,"Unreachable condition");for(var i=this.clone(),a=0,s=t;a<s.length;a++){var l=s[a];i.$_terms.matches.push({schema:i.$_compile(l)})}return i.$_mutateRebuild()}}},overrides:{label:function(e){return this.$_parent("label",e).$_modify({each:function(t,r){return"is"!==r.path[0]?t.label(e):void 0},ref:!1})}},rebuild:function(e){e.$_modify({each:function(t){o.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build:function(e,t){if(t.matches){var r,n=p(t.matches);try{for(n.s();!(r=n.n()).done;){var i=r.value,a=i.schema,o=i.ref,s=i.is,l=i.not,c=i.then,u=i.otherwise;e=a?e.try(a):o?e.conditional(o,{is:s,then:c,not:l,otherwise:u,switch:i.switch}):e.conditional(s,{then:c,otherwise:u})}}catch(h){n.e(h)}finally{n.f()}}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),h.errors=function(e,t){var r=t.error,n=t.state;if(!e.length)return{errors:r("alternatives.any")};if(1===e.length)return{errors:e[0].reports};var i,a=new Set,o=[],l=p(e);try{for(l.s();!(i=l.n()).done;){var u=i.value,f=u.reports,m=u.schema;if(f.length>1)return h.unmatched(e,r);var v=f[0];if(v instanceof c.Report==0)return h.unmatched(e,r);if(v.state.path.length===n.path.length)if("any.only"!==v.code){var g=v.code.split("."),y=s(g,2),x=y[0];"base"===y[1]?a.add(x):o.push({type:m.type,report:v})}else{var b,_=p(v.local.valids);try{for(_.s();!(b=_.n()).done;){var w=b.value;a.add(w)}}catch(k){_.e(k)}finally{_.f()}}else o.push({type:m.type,report:v})}}catch(k){l.e(k)}finally{l.f()}return o.length?1===o.length?{errors:o[0].report}:h.unmatched(e,r):{errors:r("alternatives.types",{types:d(a)})}},h.unmatched=function(e,t){var r,n=[],i=p(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.push.apply(n,d(a.reports))}}catch(o){i.e(o)}finally{i.f()}return{errors:t("alternatives.match",c.details(n,{override:!1}))}}},8068:function(e,t,r){"use strict";var n=r(375),i=r(7629),a=r(8160),o=r(6914);e.exports=i.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method:function(e,t){return n("function"==typeof e,"Method must be a function"),n(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:t}})},validate:function(e,t,r){var n=r.method;try{return n(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method:function(e){return this.prefs({messages:e})}},shared:{method:function(e){n(a.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");var t=this.clone();return t.$_terms.shared=t.$_terms.shared||[],t.$_terms.shared.push(e),t.$_mutateRegister(e),t}},warning:{method:function(e,t){return n(e&&"string"==typeof e,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:t},warn:!0})},validate:function(e,t,r){var n=r.code,i=r.local;return t.error(n,i)},args:["code","local"],multi:!0}},modifiers:{keep:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.keep=t},message:function(e,t){e.message=o.compile(t)},warn:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.warn=t}},manifest:{build:function(e,t){for(var r in t){var n=t[r];if(["examples","externals","metas","notes","tags"].includes(r)){var i,a=p(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;e=e[r.slice(0,-1)](o)}}catch(A){a.e(A)}finally{a.f()}}else if("alterations"!==r)if("whens"!==r){if("shared"===r){var s,l=p(n);try{for(l.s();!(s=l.n()).done;){var c=s.value;e=e.shared(c)}}catch(A){l.e(A)}finally{l.f()}}}else{var u,h=p(n);try{for(h.s();!(u=h.n()).done;){var d=u.value,f=d.ref,m=d.is,v=d.not,g=d.then,y=d.otherwise,x=d.concat;e=x?e.concat(x):f?e.when(f,{is:m,not:v,then:g,otherwise:y,switch:d.switch,break:d.break}):e.when(m,{then:g,otherwise:y,break:d.break})}}catch(A){h.e(A)}finally{h.f()}}else{var b,_={},w=p(n);try{for(w.s();!(b=w.n()).done;){var k=b.value,S=k.target,C=k.adjuster;_[S]=C}}catch(A){w.e(A)}finally{w.f()}e=e.alter(_)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:function(e,t,r){"use strict";var n=r(375),i=r(9474),a=r(9621),o=r(8068),s=r(8160),l=r(3292),c={};e.exports=o.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method:function(e,t){var r=t.schema,n=t.state,i=t.prefs;if(Array.isArray(e)){var a=r.$_getRule("sort");return a?c.sort(r,e,a.args.options,n,i):void 0}}},validate:function(e,t){var r=t.schema,n=t.error;if(!Array.isArray(e)){if(r._flags.single){var i=[e];return i[s.symbols.arraySingle]=!0,{value:i}}return{errors:n("array.base")}}if(r.$_getRule("items")||r.$_terms.externals)return{value:e.slice()}},rules:{has:{method:function(e){e=this.$_compile(e,{appendPath:!0});var t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate:function(e,t,r){for(var n=t.state,i=t.prefs,a=t.error,o=r.schema,s=[e].concat(d(n.ancestors)),l=0;l<e.length;++l){var c=n.localize([].concat(d(n.path),[l]),s,o);if(o.$_match(e[l],c,i))return e}var u=o._flags.label;return u?a("array.hasKnown",{patternLabel:u}):a("array.hasUnknown",null)},multi:!0},items:{method:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];s.verifyFlat(r,"items");for(var i=this.$_addRule("items"),a=function(t){var n=s.tryWithPath((function(){return e.$_compile(r[t])}),t,{append:!0});i.$_terms.items.push(n)},o=0;o<r.length;++o)a(o);return i.$_mutateRebuild()},validate:function(e,t){var r=t.schema,n=t.error,i=t.state,a=t.prefs,o=t.errorsArray,l=r.$_terms._requireds.slice(),u=r.$_terms.ordered.slice(),h=[].concat(d(r.$_terms._inclusions),d(l)),f=!e[s.symbols.arraySingle];delete e[s.symbols.arraySingle];for(var m=o(),v=e.length,g=0;g<v;++g){var y=e[g],x=!1,b=!1,_=f?g:new Number(g),w=[].concat(d(i.path),[_]);if(r._flags.sparse||void 0!==y){var k,S=[e].concat(d(i.ancestors)),C=p(r.$_terms._exclusions);try{for(C.s();!(k=C.n()).done;){var A=k.value;if(A.$_match(y,i.localize(w,S,A),a,{presence:"ignore"})){if(m.push(n("array.excludes",{pos:g,value:y},i.localize(w))),a.abortEarly)return m;x=!0,u.shift();break}}}catch(Z){C.e(Z)}finally{C.f()}if(!x){if(r.$_terms.ordered.length){if(u.length){var T=u.shift(),E=T.$_validate(y,i.localize(w,S,T),a);if(E.errors){if(m.push.apply(m,d(E.errors)),a.abortEarly)return m}else if("strip"===T._flags.result)c.fastSplice(e,g),--g,--v;else{if(!r._flags.sparse&&void 0===E.value){if(m.push(n("array.sparse",{key:_,path:w,pos:g,value:void 0},i.localize(w))),a.abortEarly)return m;continue}e[g]=E.value}continue}if(!r.$_terms.items.length){if(m.push(n("array.orderedLength",{pos:g,limit:r.$_terms.ordered.length})),a.abortEarly)return m;break}}for(var M=[],I=l.length,P=0;P<I;++P){var R=i.localize(w,S,l[P]);R.snapshot();var z=l[P].$_validate(y,R,a);if(M[P]=z,!z.errors){if(e[g]=z.value,b=!0,c.fastSplice(l,P),--P,--I,!r._flags.sparse&&void 0===z.value&&(m.push(n("array.sparse",{key:_,path:w,pos:g,value:void 0},i.localize(w))),a.abortEarly))return m;break}R.restore()}if(!b){var L=a.stripUnknown&&!!a.stripUnknown.arrays||!1;I=h.length;var D,O=p(h);try{for(O.s();!(D=O.n()).done;){var F=D.value,j=void 0,N=l.indexOf(F);if(-1!==N)j=M[N];else{var B=i.localize(w,S,F);if(B.snapshot(),!(j=F.$_validate(y,B,a)).errors){"strip"===F._flags.result?(c.fastSplice(e,g),--g,--v):r._flags.sparse||void 0!==j.value?e[g]=j.value:(m.push(n("array.sparse",{key:_,path:w,pos:g,value:void 0},i.localize(w))),x=!0),b=!0;break}B.restore()}if(1===I){if(L){c.fastSplice(e,g),--g,--v,b=!0;break}if(m.push.apply(m,d(j.errors)),a.abortEarly)return m;x=!0;break}}}catch(Z){O.e(Z)}finally{O.f()}if(!x&&(r.$_terms._inclusions.length||r.$_terms._requireds.length)&&!b){if(L){c.fastSplice(e,g),--g,--v;continue}if(m.push(n("array.includes",{pos:g,value:y},i.localize(w))),a.abortEarly)return m}}}}else{if(m.push(n("array.sparse",{key:_,path:w,pos:g,value:void 0},i.localize(w))),a.abortEarly)return m;u.shift()}}return l.length&&c.fillMissedErrors(r,m,l,e,i,a),u.length&&(c.fillOrderedErrors(r,m,u,e,i,a),m.length||c.fillDefault(u,e,i,a)),m.length?m:e},priority:!0,manifest:!1},length:{method:function(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:function(e,t,r,n){var i=r.limit,a=n.name,o=n.operator,l=n.args;return s.compare(e.length,i,o)?e:t.error("array."+a,{limit:l.limit,value:e})},args:[{name:"limit",ref:!0,assert:s.limit,message:"must be a positive integer"}]},max:{method:function(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method:function(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];s.verifyFlat(r,"ordered");for(var i=this.$_addRule("items"),a=function(t){var n=s.tryWithPath((function(){return e.$_compile(r[t])}),t,{append:!0});c.validateSingle(n,i),i.$_mutateRegister(n),i.$_terms.ordered.push(n)},o=0;o<r.length;++o)a(o);return i.$_mutateRebuild()}},single:{method:function(e){var t=void 0===e||!!e;return n(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s.assertOptions(e,["by","order"]);var t={order:e.order||"ascending"};return e.by&&(t.by=l.ref(e.by,{ancestor:0}),n(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate:function(e,t,r){var n=t.error,i=t.state,a=t.prefs,o=t.schema,s=r.options,l=c.sort(o,e,s,i,a),u=l.value,h=l.errors;if(h)return h;for(var d=0;d<e.length;++d)if(e[d]!==u[d])return n("array.sort",{order:s.order,by:s.by?s.by.key:"value"});return e},convert:!0},sparse:{method:function(e){var t=void 0===e||!!e;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(!e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string"),s.assertOptions(t,["ignoreUndefined","separator"]);var r={name:"unique",args:{options:t,comparator:e}};if(e)if("string"==typeof e){var i=s.default(t.separator,".");r.path=i?e.split(i):[e]}else r.comparator=e;return this.$_addRule(r)},validate:function(e,t,r,o){for(var s=t.state,l=t.error,c=(t.schema,r.comparator),u=r.options,h=o.comparator,f=o.path,p={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},m=h||i,v=u.ignoreUndefined,g=0;g<e.length;++g){var y=f?a(e[g],f):e[g],x=h?p.custom:p[typeof y];if(n(x,"Failed to find unique map container for type",typeof y),x instanceof Map){for(var b=x.entries(),_=void 0;!(_=b.next()).done;)if(m(_.value[0],y)){var w=s.localize([].concat(d(s.path),[g]),[e].concat(d(s.ancestors))),k={pos:g,value:e[g],dupePos:_.value[1],dupeValue:e[_.value[1]]};return f&&(k.path=c),l("array.unique",k,w)}x.set(y,g)}else{if((!v||void 0!==y)&&void 0!==x[y]){var S={pos:g,value:e[g],dupePos:x[y],dupeValue:e[x[y]]};return f&&(S.path=c),l("array.unique",S,s.localize([].concat(d(s.path),[g]),[e].concat(d(s.ancestors))))}x[y]=g}}return e},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:function(e,t){return new Set(e)}}},rebuild:function(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];var t,r=p(e.$_terms.items);try{for(r.s();!(t=r.n()).done;){var n=t.value;c.validateSingle(n,e),"required"===n._flags.presence?e.$_terms._requireds.push(n):"forbidden"===n._flags.presence?e.$_terms._exclusions.push(n):e.$_terms._inclusions.push(n)}}catch(s){r.e(s)}finally{r.f()}var i,a=p(e.$_terms.ordered);try{for(a.s();!(i=a.n()).done;){var o=i.value;c.validateSingle(o,e)}}catch(s){a.e(s)}finally{a.f()}},manifest:{build:function(e,t){var r,n;return t.items&&(e=(r=e).items.apply(r,d(t.items))),t.ordered&&(e=(n=e).ordered.apply(n,d(t.ordered))),e}},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),c.fillMissedErrors=function(e,t,r,n,i,a){var o,s=[],l=0,c=p(r);try{for(c.s();!(o=c.n()).done;){var u=o.value._flags.label;u?s.push(u):++l}}catch(h){c.e(h)}finally{c.f()}s.length?l?t.push(e.$_createError("array.includesRequiredBoth",n,{knownMisses:s,unknownMisses:l},i,a)):t.push(e.$_createError("array.includesRequiredKnowns",n,{knownMisses:s},i,a)):t.push(e.$_createError("array.includesRequiredUnknowns",n,{unknownMisses:l},i,a))},c.fillOrderedErrors=function(e,t,r,n,i,a){var o,s=[],l=p(r);try{for(l.s();!(o=l.n()).done;){var u=o.value;"required"===u._flags.presence&&s.push(u)}}catch(h){l.e(h)}finally{l.f()}s.length&&c.fillMissedErrors(e,t,s,n,i,a)},c.fillDefault=function(e,t,r,n){for(var i=[],a=!0,o=e.length-1;o>=0;--o){var s=e[o],l=[t].concat(d(r.ancestors)),c=s.$_validate(void 0,r.localize(r.path,l,s),n).value;if(a){if(void 0===c)continue;a=!1}i.unshift(c)}i.length&&t.push.apply(t,i)},c.fastSplice=function(e,t){for(var r=t;r<e.length;)e[r++]=e[r];--e.length},c.validateSingle=function(e,t){("array"===e.type||e._flags._arrayItems)&&(n(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))},c.sort=function(e,t,r,n,i){var a="ascending"===r.order?1:-1,o=-1*a,s=a,l=function(l,u){var h=c.compare(l,u,o,s);if(null!==h)return h;if(r.by&&(l=r.by.resolve(l,n,i),u=r.by.resolve(u,n,i)),null!==(h=c.compare(l,u,o,s)))return h;var d=typeof l;if(d!==typeof u)throw e.$_createError("array.sort.mismatching",t,null,n,i);if("number"!==d&&"string"!==d)throw e.$_createError("array.sort.unsupported",t,{type:d},n,i);return"number"===d?(l-u)*a:l<u?o:s};try{return{value:t.slice().sort(l)}}catch(e){return{errors:e}}},c.compare=function(e,t,r,n){return e===t?0:void 0===e?1:void 0===t?-1:null===e?n:null===t?r:null}},4937:function(e,t,r){"use strict";var n=r(375),i=r(8068),a=r(8160),o=r(2036),s={isBool:function(e){return"boolean"==typeof e}};e.exports=i.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce:function(e,t){var r=t.schema;if("boolean"!=typeof e){if("string"==typeof e){var n=r._flags.sensitive?e:e.toLowerCase();e="true"===n||"false"!==n&&e}return"boolean"!=typeof e&&(e=r.$_terms.truthy&&r.$_terms.truthy.has(e,null,null,!r._flags.sensitive)||(!r.$_terms.falsy||!r.$_terms.falsy.has(e,null,null,!r._flags.sensitive))&&e),{value:e}}},validate:function(e,t){var r=t.error;if("boolean"!=typeof e)return{value:e,errors:r("boolean.base")}},rules:{truthy:{method:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];a.verifyFlat(t,"truthy");var i=this.clone();i.$_terms.truthy=i.$_terms.truthy||new o;for(var s=0;s<t.length;++s){var l=t[s];n(void 0!==l,"Cannot call truthy with undefined"),i.$_terms.truthy.add(l)}return i}},falsy:{method:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];a.verifyFlat(t,"falsy");var i=this.clone();i.$_terms.falsy=i.$_terms.falsy||new o;for(var s=0;s<t.length;++s){var l=t[s];n(void 0!==l,"Cannot call falsy with undefined"),i.$_terms.falsy.add(l)}return i}},sensitive:{method:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("sensitive",e)}}},cast:{number:{from:s.isBool,to:function(e,t){return e?1:0}},string:{from:s.isBool,to:function(e,t){return e?"true":"false"}}},manifest:{build:function(e,t){var r,n;return t.truthy&&(e=(r=e).truthy.apply(r,d(t.truthy))),t.falsy&&(e=(n=e).falsy.apply(n,d(t.falsy))),e}},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:function(e,t,r){"use strict";var n=r(375),i=r(8068),a=r(8160),o=r(3328),s={isDate:function(e){return e instanceof Date}};e.exports=i.extend({type:"date",coerce:{from:["number","string"],method:function(e,t){var r=t.schema;return{value:s.parse(e,r._flags.format)||e}}},validate:function(e,t){var r=t.schema,n=t.error,i=t.prefs;if(!(e instanceof Date)||isNaN(e.getTime())){var a=r._flags.format;return i.convert&&a&&"string"==typeof e?{value:e,errors:n("date.format",{format:a})}:{value:e,errors:n("date.base")}}},rules:{compare:{method:!1,validate:function(e,t,r,n){var i=r.date,o=n.name,s=n.operator,l=n.args,c="now"===i?Date.now():i.getTime();return a.compare(e.getTime(),c,s)?e:t.error("date."+o,{limit:l.date,value:e})},args:[{name:"date",ref:!0,normalize:function(e){return"now"===e?e:s.parse(e)},assert:function(e){return null!==e},message:"must have a valid date format"}]},format:{method:function(e){return n(["iso","javascript","unix"].includes(e),"Unknown date format",e),this.$_setFlag("format",e)}},greater:{method:function(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method:function(){return this.format("iso")}},less:{method:function(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method:function(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method:function(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";return n(["javascript","unix"].includes(e),'"type" must be one of "javascript, unix"'),this.format(e)}}},cast:{number:{from:s.isDate,to:function(e,t){return e.getTime()}},string:{from:s.isDate,to:function(e,t){var r=t.prefs;return o.date(e,r)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),s.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e)))return null;if(/^\s*$/.test(e))return null;if("iso"===t)return a.isIsoDate(e)?s.date(e.toString()):null;var r=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return s.date(1*e);if("unix"===t)return s.date(1e3*e);if("string"==typeof r)return null}return s.date(e)},s.date=function(e){var t=new Date(e);return isNaN(t.getTime())?null:t}},390:function(e,t,r){"use strict";var n=r(375),i=r(7824);e.exports=i.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method:function(e){return n(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:e}})},validate:function(e,t,r){var n=r.n;return e.length===n?e:t.error("function.arity",{n:n})}},class:{method:function(){return this.$_addRule("class")},validate:function(e,t){return/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})}},minArity:{method:function(e){return n(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:e}})},validate:function(e,t,r){var n=r.n;return e.length>=n?e:t.error("function.minArity",{n:n})}},maxArity:{method:function(e){return n(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:e}})},validate:function(e,t,r){var n=r.n;return e.length<=n?e:t.error("function.maxArity",{n:n})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:function(e,t,r){"use strict";var n=r(978),i=r(375),a=r(8571),s=r(3652),g=r(8068),y=r(8160),x=r(3292),b=r(6354),_=r(6133),w=r(3328),k={renameDefaults:{alias:!1,multiple:!1,override:!1}};e.exports=g.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:function(e,t){return e.keys(t)},validate:function(e,t){var r=t.schema,n=t.error,i=t.state,a=t.prefs;if(!e||typeof e!==r.$_property("typeof")||Array.isArray(e))return{value:e,errors:n("object.base",{type:r.$_property("typeof")})};if(r.$_terms.renames||r.$_terms.dependencies||r.$_terms.keys||r.$_terms.patterns||r.$_terms.externals){e=k.clone(e,a);var o=[];if(r.$_terms.renames&&!k.rename(r,e,i,a,o))return{value:e,errors:o};if(!r.$_terms.keys&&!r.$_terms.patterns&&!r.$_terms.dependencies)return{value:e,errors:o};var s=new Set(Object.keys(e));if(r.$_terms.keys){var l,c=[e].concat(d(i.ancestors)),u=p(r.$_terms.keys);try{for(u.s();!(l=u.n()).done;){var h=l.value,f=h.key,m=e[f];s.delete(f);var v=i.localize([].concat(d(i.path),[f]),c,h),g=h.schema.$_validate(m,v,a);if(g.errors){if(a.abortEarly)return{value:e,errors:g.errors};void 0!==g.value&&(e[f]=g.value),o.push.apply(o,d(g.errors))}else"strip"===h.schema._flags.result||void 0===g.value&&void 0!==m?delete e[f]:void 0!==g.value&&(e[f]=g.value)}}catch(C){u.e(C)}finally{u.f()}}if(s.size||r._flags._hasPatternMatch){var y=k.unknown(r,e,s,o,i,a);if(y)return y}if(r.$_terms.dependencies){var x,b=p(r.$_terms.dependencies);try{for(b.s();!(x=b.n()).done;){var _=x.value;if(null===_.key||!1!==k.isPresent(_.options)(_.key.resolve(e,i,a,null,{shadow:!1}))){var w=k.dependencies[_.rel](r,_,e,i,a);if(w){var S=r.$_createError(w.code,e,w.context,i,a);if(a.abortEarly)return{value:e,errors:S};o.push(S)}}}}catch(C){b.e(C)}finally{b.f()}}return{value:e,errors:o}}},rules:{and:{method:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y.verifyFlat(t,"and"),k.dependency(this,"and",null,t)}},append:{method:function(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method:function(e,t,r){w.isTemplate(e)||(e=x.ref(e)),i(void 0===r||"string"==typeof r,"Message must be a string"),t=this.$_compile(t,{appendPath:!0});var n=this.$_addRule({name:"assert",args:{subject:e,schema:t,message:r}});return n.$_mutateRegister(e),n.$_mutateRegister(t),n},validate:function(e,t,r){var n=t.error,i=t.prefs,a=t.state,o=r.subject,s=r.schema,l=r.message,c=o.resolve(e,a,i),u=_.isRef(o)?o.absolute(a):[];return s.$_match(c,a.localize(u,[e].concat(d(a.ancestors)),s),i)?e:n("object.assert",{subject:o,message:l})},args:["subject","schema","message"],multi:!0},instance:{method:function(e,t){return i("function"==typeof e,"constructor must be a function"),t=t||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:t}})},validate:function(e,t,r){var n=r.constructor,i=r.name;return e instanceof n?e:t.error("object.instance",{type:i,value:e})},args:["constructor","name"]},keys:{method:function(e){var t=this;i(void 0===e||"object"==typeof e,"Object schema must be a valid object"),i(!y.isSchema(e),"Object schema cannot be a joi schema");var r=this.clone();if(e)if(Object.keys(e).length){r.$_terms.keys=r.$_terms.keys?r.$_terms.keys.filter((function(t){return!e.hasOwnProperty(t.key)})):new k.Keys;var n=function(n){y.tryWithPath((function(){return r.$_terms.keys.push({key:n,schema:t.$_compile(e[n])})}),n)};for(var a in e)n(a)}else r.$_terms.keys=new k.Keys;else r.$_terms.keys=null;return r.$_mutateRebuild()}},length:{method:function(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:function(e,t,r,n){var i=r.limit,a=n.name,o=n.operator,s=n.args;return y.compare(Object.keys(e).length,i,o)?e:t.error("object."+a,{limit:s.limit,value:e})},args:[{name:"limit",ref:!0,assert:y.limit,message:"must be a positive integer"}]},max:{method:function(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method:function(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y.verifyFlat(t,"nand"),k.dependency(this,"nand",null,t)}},or:{method:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y.verifyFlat(t,"or"),k.dependency(this,"or",null,t)}},oxor:{method:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return k.dependency(this,"oxor",null,t)}},pattern:{method:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e instanceof RegExp;a||(e=this.$_compile(e,{appendPath:!0})),i(void 0!==t,"Invalid rule"),y.assertOptions(n,["fallthrough","matches"]),a&&i(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),t=this.$_compile(t,{appendPath:!0});var o=this.clone();o.$_terms.patterns=o.$_terms.patterns||[];var s=(f(r={},a?"regex":"schema",e),f(r,"rule",t),r);return n.matches&&(s.matches=this.$_compile(n.matches),"array"!==s.matches.type&&(s.matches=s.matches.$_root.array().items(s.matches)),o.$_mutateRegister(s.matches),o.$_setFlag("_hasPatternMatch",!0,{clone:!1})),n.fallthrough&&(s.fallthrough=!0),o.$_terms.patterns.push(s),o.$_mutateRegister(t),o}},ref:{method:function(){return this.$_addRule("ref")},validate:function(e,t){return _.isRef(e)?e:t.error("object.refType",{value:e})}},regex:{method:function(){return this.$_addRule("regex")},validate:function(e,t){return e instanceof RegExp?e:t.error("object.regex",{value:e})}},rename:{method:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),i("string"==typeof t||t instanceof w,"Invalid rename to argument"),i(t!==e,"Cannot rename key to same name:",e),y.assertOptions(r,["alias","ignoreUndefined","override","multiple"]);var a=this.clone();a.$_terms.renames=a.$_terms.renames||[];var o,s=p(a.$_terms.renames);try{for(s.s();!(o=s.n()).done;){var l=o.value;i(l.from!==e,"Cannot rename the same key multiple times")}}catch(c){s.e(c)}finally{s.f()}return t instanceof w&&a.$_mutateRegister(t),a.$_terms.renames.push({from:e,to:t,options:n(k.renameDefaults,r)}),a}},schema:{method:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return this.$_addRule({name:"schema",args:{type:e}})},validate:function(e,t,r){var n=r.type;return!y.isSchema(e)||"any"!==n&&e.type!==n?t.error("object.schema",{type:n}):e}},unknown:{method:function(e){return this.$_setFlag("unknown",!1!==e)}},with:{method:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return k.dependency(this,"with",e,t,r)}},without:{method:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return k.dependency(this,"without",e,t,r)}},xor:{method:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y.verifyFlat(t,"xor"),k.dependency(this,"xor",null,t)}}},overrides:{default:function(e,t){return void 0===e&&(e=y.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild:function(e){e.$_terms.keys&&function(){var t,r=new s.Sorter,n=p(e.$_terms.keys);try{var i=function(){var e=t.value;y.tryWithPath((function(){return r.add(e,{after:e.schema.$_rootReferences(),group:e.key})}),e.key)};for(n.s();!(t=n.n()).done;)i()}catch(a){n.e(a)}finally{n.f()}e.$_terms.keys=l(k.Keys,d(r.nodes))}()},manifest:{build:function(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies){var r,n=p(t.dependencies);try{for(n.s();!(r=n.n()).done;){var i=r.value,a=i.rel,o=i.key,s=void 0===o?null:o,l=i.peers,c=i.options;e=k.dependency(e,a,s,l,c)}}catch(A){n.e(A)}finally{n.f()}}if(t.patterns){var u,h=p(t.patterns);try{for(h.s();!(u=h.n()).done;){var d=u.value,f=d.regex,m=d.schema,v=d.rule,g=d.fallthrough,y=d.matches;e=e.pattern(f||m,v,{fallthrough:g,matches:y})}}catch(A){h.e(A)}finally{h.f()}}if(t.renames){var x,b=p(t.renames);try{for(b.s();!(x=b.n()).done;){var _=x.value,w=_.from,S=_.to,C=_.options;e=e.rename(w,S,C)}}catch(A){b.e(A)}finally{b.f()}}return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),k.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return a(e,{shallow:!0});var r=Object.create(Object.getPrototypeOf(e));return Object.assign(r,e),r}var n=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(this,r)};return n.prototype=a(e.prototype),Object.defineProperty(n,"name",{value:e.name,writable:!1}),Object.defineProperty(n,"length",{value:e.length,writable:!1}),Object.assign(n,e),n},k.dependency=function(e,t,r,n,a){i(null===r||"string"==typeof r,t,"key must be a strings"),a||(a=n.length>1&&"object"==typeof n[n.length-1]?n.pop():{}),y.assertOptions(a,["separator","isPresent"]),n=[].concat(n);var o,s=y.default(a.separator,"."),l=[],c=p(n);try{for(c.s();!(o=c.n()).done;){var u=o.value;i("string"==typeof u,t,"peers must be strings"),l.push(x.ref(u,{separator:s,ancestor:0,prefix:!1}))}}catch(d){c.e(d)}finally{c.f()}null!==r&&(r=x.ref(r,{separator:s,ancestor:0,prefix:!1}));var h=e.clone();return h.$_terms.dependencies=h.$_terms.dependencies||[],h.$_terms.dependencies.push(new k.Dependency(t,r,l,n,a)),h},k.dependencies={and:function(e,t,r,n,i){var a,o=[],s=[],l=t.peers.length,c=k.isPresent(t.options),u=p(t.peers);try{for(u.s();!(a=u.n()).done;){var h=a.value;!1===c(h.resolve(r,n,i,null,{shadow:!1}))?o.push(h.key):s.push(h.key)}}catch(d){u.e(d)}finally{u.f()}if(o.length!==l&&s.length!==l)return{code:"object.and",context:{present:s,presentWithLabels:k.keysToLabels(e,s),missing:o,missingWithLabels:k.keysToLabels(e,o)}}},nand:function(e,t,r,n,i){var a,o=[],s=k.isPresent(t.options),l=p(t.peers);try{for(l.s();!(a=l.n()).done;){var c=a.value;s(c.resolve(r,n,i,null,{shadow:!1}))&&o.push(c.key)}}catch(d){l.e(d)}finally{l.f()}if(o.length===t.peers.length){var u=t.paths[0],h=t.paths.slice(1);return{code:"object.nand",context:{main:u,mainWithLabel:k.keysToLabels(e,u),peers:h,peersWithLabels:k.keysToLabels(e,h)}}}},or:function(e,t,r,n,i){var a,o=k.isPresent(t.options),s=p(t.peers);try{for(s.s();!(a=s.n()).done;)if(o(a.value.resolve(r,n,i,null,{shadow:!1})))return}catch(l){s.e(l)}finally{s.f()}return{code:"object.missing",context:{peers:t.paths,peersWithLabels:k.keysToLabels(e,t.paths)}}},oxor:function(e,t,r,n,i){var a,o=[],s=k.isPresent(t.options),l=p(t.peers);try{for(l.s();!(a=l.n()).done;){var c=a.value;s(c.resolve(r,n,i,null,{shadow:!1}))&&o.push(c.key)}}catch(h){l.e(h)}finally{l.f()}if(o.length&&1!==o.length){var u={peers:t.paths,peersWithLabels:k.keysToLabels(e,t.paths)};return u.present=o,u.presentWithLabels=k.keysToLabels(e,o),{code:"object.oxor",context:u}}},with:function(e,t,r,n,i){var a,o=k.isPresent(t.options),s=p(t.peers);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(!1===o(l.resolve(r,n,i,null,{shadow:!1})))return{code:"object.with",context:{main:t.key.key,mainWithLabel:k.keysToLabels(e,t.key.key),peer:l.key,peerWithLabel:k.keysToLabels(e,l.key)}}}}catch(c){s.e(c)}finally{s.f()}},without:function(e,t,r,n,i){var a,o=k.isPresent(t.options),s=p(t.peers);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(o(l.resolve(r,n,i,null,{shadow:!1})))return{code:"object.without",context:{main:t.key.key,mainWithLabel:k.keysToLabels(e,t.key.key),peer:l.key,peerWithLabel:k.keysToLabels(e,l.key)}}}}catch(c){s.e(c)}finally{s.f()}},xor:function(e,t,r,n,i){var a,o=[],s=k.isPresent(t.options),l=p(t.peers);try{for(l.s();!(a=l.n()).done;){var c=a.value;s(c.resolve(r,n,i,null,{shadow:!1}))&&o.push(c.key)}}catch(h){l.e(h)}finally{l.f()}if(1!==o.length){var u={peers:t.paths,peersWithLabels:k.keysToLabels(e,t.paths)};return 0===o.length?{code:"object.missing",context:u}:(u.present=o,u.presentWithLabels=k.keysToLabels(e,o),{code:"object.xor",context:u})}}},k.keysToLabels=function(e,t){return Array.isArray(t)?t.map((function(t){return e.$_mapLabels(t)})):e.$_mapLabels(t)},k.isPresent=function(e){return"function"==typeof e.isPresent?e.isPresent:function(e){return void 0!==e}},k.rename=function(e,t,r,n,i){var a,o={},s=p(e.$_terms.renames);try{for(s.s();!(a=s.n()).done;){var l=a.value,c=[],u="string"!=typeof l.from;if(u){for(var h in t)if((void 0!==t[h]||!l.options.ignoreUndefined)&&h!==l.to){var d=l.from.exec(h);d&&c.push({from:h,to:l.to,match:d})}}else!Object.prototype.hasOwnProperty.call(t,l.from)||void 0===t[l.from]&&l.options.ignoreUndefined||c.push(l);for(var f=0,m=c;f<m.length;f++){var v=m[f],g=v.from,y=v.to;if(y instanceof w&&(y=y.render(t,r,n,v.match)),g!==y){if(!l.options.multiple&&o[y]&&(i.push(e.$_createError("object.rename.multiple",t,{from:g,to:y,pattern:u},r,n)),n.abortEarly))return!1;if(Object.prototype.hasOwnProperty.call(t,y)&&!l.options.override&&!o[y]&&(i.push(e.$_createError("object.rename.override",t,{from:g,to:y,pattern:u},r,n)),n.abortEarly))return!1;void 0===t[g]?delete t[y]:t[y]=t[g],o[y]=!0,l.options.alias||delete t[g]}}}}catch(x){s.e(x)}finally{s.f()}return!0},k.unknown=function(e,t,r,n,i,a){if(e.$_terms.patterns){var o,s=!1,l=e.$_terms.patterns.map((function(e){if(e.matches)return s=!0,[]})),c=[t].concat(d(i.ancestors)),u=p(r);try{for(u.s();!(o=u.n()).done;)for(var h=o.value,f=t[h],m=[].concat(d(i.path),[h]),v=0;v<e.$_terms.patterns.length;++v){var g=e.$_terms.patterns[v];if(g.regex){var x=g.regex.test(h);if(i.mainstay.tracer.debug(i,"rule","pattern.".concat(v),x?"pass":"error"),!x)continue}else if(!g.schema.$_match(h,i.nest(g.schema,"pattern.".concat(v)),a))continue;r.delete(h);var _=i.localize(m,c,{schema:g.rule,key:h}),w=g.rule.$_validate(f,_,a);if(w.errors){if(a.abortEarly)return{value:t,errors:w.errors};n.push.apply(n,d(w.errors))}if(g.matches&&l[v].push(h),t[h]=w.value,!g.fallthrough)break}}catch(N){u.e(N)}finally{u.f()}if(s)for(var k=0;k<l.length;++k){var S=l[k];if(S){var C=e.$_terms.patterns[k].matches,A=i.localize(i.path,c,C),T=C.$_validate(S,A,a);if(T.errors){var E=b.details(T.errors,{override:!1});E.matches=S;var M=e.$_createError("object.pattern.match",t,E,i,a);if(a.abortEarly)return{value:t,errors:M};n.push(M)}}}}if(r.size&&(e.$_terms.keys||e.$_terms.patterns)){if(a.stripUnknown&&!e._flags.unknown||a.skipFunctions){var I,P=!(!a.stripUnknown||!0!==a.stripUnknown&&!a.stripUnknown.objects),R=p(r);try{for(R.s();!(I=R.n()).done;){var z=I.value;P?(delete t[z],r.delete(z)):"function"==typeof t[z]&&r.delete(z)}}catch(N){R.e(N)}finally{R.f()}}if(!y.default(e._flags.unknown,a.allowUnknown)){var L,D=p(r);try{for(D.s();!(L=D.n()).done;){var O=L.value,F=i.localize([].concat(d(i.path),[O]),[]),j=e.$_createError("object.unknown",t[O],{child:O},F,a,{flags:!1});if(a.abortEarly)return{value:t,errors:j};n.push(j)}}catch(N){D.e(N)}finally{D.f()}}}},k.Dependency=function(){function e(t,r,n,i,a){m(this,e),this.rel=t,this.key=r,this.peers=n,this.paths=i,this.options=a}return v(e,[{key:"describe",value:function(){var e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options=o(o({},e.options),{},{separator:this.peers[0].separator})),this.options.isPresent&&(e.options=o(o({},e.options),{},{isPresent:this.options.isPresent})),e}}]),e}(),k.Keys=function(e){c(r,e);var t=u(r);function r(){return m(this,r),t.apply(this,arguments)}return v(r,[{key:"concat",value:function(e){for(var t=this.slice(),r=new Map,n=0;n<t.length;++n)r.set(t[n].key,n);var i,a=p(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.key,l=r.get(s);void 0!==l?t[l]={key:s,schema:t[l].schema.concat(o.schema)}:t.push(o)}}catch(c){a.e(c)}finally{a.f()}return t}}]),r}(h(Array))},8785:function(e,t,r){"use strict";var n=r(375),i=r(8068),a=r(8160),o=r(3292),s=r(6354),l={};e.exports=i.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:function(e,t){return e.ref(t)},validate:function(e,t){var r=t.schema,i=t.state,a=t.prefs;n(r.$_terms.link,"Uninitialized link schema");var o=l.generate(r,e,i,a),s=r.$_terms.link[0].ref;return o.$_validate(e,i.nest(o,"link:".concat(s.display,":").concat(o.type)),a)},generate:function(e,t,r,n){return l.generate(e,t,r,n)},rules:{ref:{method:function(e){n(!this.$_terms.link,"Cannot reinitialize schema"),e=o.ref(e),n("value"===e.type||"local"===e.type,"Invalid reference type:",e.type),n("local"===e.type||"root"===e.ancestor||e.ancestor>0,"Link cannot reference itself");var t=this.clone();return t.$_terms.link=[{ref:e}],t}},relative:{method:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("relative",e)}}},overrides:{concat:function(e){n(this.$_terms.link,"Uninitialized link schema"),n(a.isSchema(e),"Invalid schema object"),n("link"!==e.type,"Cannot merge type link with another link");var t=this.clone();return t.$_terms.whens||(t.$_terms.whens=[]),t.$_terms.whens.push({concat:e}),t.$_mutateRebuild()}},manifest:{build:function(e,t){return n(t.link,"Invalid link description missing link"),e.ref(t.link)}}}),l.generate=function(e,t,r,n){var i=r.mainstay.links.get(e);if(i)return i._generate(t,r,n).schema;var a=e.$_terms.link[0].ref,o=l.perspective(a,r),s=o.perspective,c=o.path;l.assert(s,"which is outside of schema boundaries",a,e,r,n);try{i=c.length?s.$_reach(c):s}catch(t){l.assert(!1,"to non-existing schema",a,e,r,n)}return l.assert("link"!==i.type,"which is another link",a,e,r,n),e._flags.relative||r.mainstay.links.set(e,i),i._generate(t,r,n).schema},l.perspective=function(e,t){if("local"===e.type){var r,n=p(t.schemas);try{for(n.s();!(r=n.n()).done;){var i=r.value,a=i.schema,o=i.key;if((a._flags.id||o)===e.path[0])return{perspective:a,path:e.path.slice(1)};if(a.$_terms.shared){var s,l=p(a.$_terms.shared);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(c._flags.id===e.path[0])return{perspective:c,path:e.path.slice(1)}}}catch(u){l.e(u)}finally{l.f()}}}}catch(u){n.e(u)}finally{n.f()}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},l.assert=function(e,t,r,i,a,o){e||n(!1,'"'.concat(s.label(i._flags,a,o),'" contains link reference "').concat(r.display,'" ').concat(t))}},3832:function(e,t,r){"use strict";var n=r(375),i=r(8068),a=r(8160),o={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/};e.exports=i.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method:function(e,t){var r=t.schema,n=t.error;if(e.match(o.numberRx)){e=e.trim();var i={value:parseFloat(e)};if(0===i.value&&(i.value=0),!r._flags.unsafe)if(e.match(/e/i)){if(o.extractSignificantDigits(e)!==o.extractSignificantDigits(String(i.value)))return i.errors=n("number.unsafe"),i}else{var a=i.value.toString();if(a.match(/e/i))return i;if(a!==o.normalizeDecimal(e))return i.errors=n("number.unsafe"),i}return i}}},validate:function(e,t){var r=t.schema,n=t.error,i=t.prefs;if(e===1/0||e===-1/0)return{value:e,errors:n("number.infinity")};if(!a.isNumber(e))return{value:e,errors:n("number.base")};var o={value:e};if(i.convert){var s=r.$_getRule("precision");if(s){var l=Math.pow(10,s.args.limit);o.value=Math.round(o.value*l)/l}}return 0===o.value&&(o.value=0),!r._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(o.errors=n("number.unsafe")),o},rules:{compare:{method:!1,validate:function(e,t,r,n){var i=r.limit,o=n.name,s=n.operator,l=n.args;return a.compare(e,i,s)?e:t.error("number."+o,{limit:l.limit,value:e})},args:[{name:"limit",ref:!0,assert:a.isNumber,message:"must be a number"}]},greater:{method:function(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method:function(){return this.$_addRule("integer")},validate:function(e,t){return Math.trunc(e)-e==0?e:t.error("number.integer")}},less:{method:function(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method:function(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method:function(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method:function(e){return this.$_addRule({name:"multiple",args:{base:e}})},validate:function(e,t,r,n){return e*(1/r.base)%1==0?e:t.error("number.multiple",{multiple:n.args.base,value:e})},args:[{name:"base",ref:!0,assert:function(e){return"number"==typeof e&&isFinite(e)&&e>0},message:"must be a positive number"}],multi:!0},negative:{method:function(){return this.sign("negative")}},port:{method:function(){return this.$_addRule("port")},validate:function(e,t){return Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")}},positive:{method:function(){return this.sign("positive")}},precision:{method:function(e){return n(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate:function(e,t,r){var n=r.limit,i=e.toString().match(o.precisionRx);return Math.max((i[1]?i[1].length:0)-(i[2]?parseInt(i[2],10):0),0)<=n?e:t.error("number.precision",{limit:n,value:e})},convert:!0},sign:{method:function(e){return n(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate:function(e,t,r){var n=r.sign;return"negative"===n&&e<0||"positive"===n&&e>0?e:t.error("number.".concat(n))}},unsafe:{method:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:function(e){return"number"==typeof e},to:function(e,t){return e.toString()}}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),o.extractSignificantDigits=function(e){return e.replace(o.exponentialPartRegex,"").replace(o.dotRegex,"").replace(o.trailingZerosRegex,"").replace(o.leadingSignAndZerosRegex,"")},o.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e}},8966:function(e,t,r){"use strict";var n=r(7824);e.exports=n.extend({type:"object",cast:{map:{from:function(e){return e&&"object"==typeof e},to:function(e,t){return new Map(Object.entries(e))}}}})},7417:function(e,t,r){"use strict";var n=r(375),i=r(5380),a=r(1745),s=r(9959),l=r(6064),c=r(9926),u=r(5752),h=r(8068),d=r(8160),f={tlds:c instanceof Set&&{tlds:{allow:c,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:/^[a-f0-9]+$/i,ipRegex:s.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};e.exports=h.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method:function(e,t){var r=t.schema,n=t.state,i=t.prefs,a=r.$_getRule("normalize");a&&(e=e.normalize(a.args.form));var o=r.$_getRule("case");o&&(e="upper"===o.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());var s=r.$_getRule("trim");if(s&&s.args.enabled&&(e=e.trim()),r.$_terms.replacements){var l,c=p(r.$_terms.replacements);try{for(c.s();!(l=c.n()).done;){var u=l.value;e=e.replace(u.pattern,u.replacement)}}catch(y){c.e(y)}finally{c.f()}}var h=r.$_getRule("hex");if(h&&h.args.options.byteAligned&&e.length%2!=0&&(e="0".concat(e)),r.$_getRule("isoDate")){var m=f.isoDate(e);m&&(e=m)}if(r._flags.truncate){var v=r.$_getRule("max");if(v){var g=v.args.limit;if(d.isResolvable(g)&&(g=g.resolve(e,n,i),!d.limit(g)))return{value:e,errors:r.$_createError("any.ref",g,{ref:v.args.limit,arg:"limit",reason:"must be a positive integer"},n,i)};e=e.slice(0,g)}}return{value:e}}},validate:function(e,t){var r=t.schema,n=t.error;if("string"!=typeof e)return{value:e,errors:n("string.base")};if(""===e){var i=r.$_getRule("min");if(i&&0===i.args.limit)return;return{value:e,errors:n("string.empty")}}},rules:{alphanum:{method:function(){return this.$_addRule("alphanum")},validate:function(e,t){return/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")}},base64:{method:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.assertOptions(e,["paddingRequired","urlSafe"]),e=o({urlSafe:!1,paddingRequired:!0},e),n("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),n("boolean"==typeof e.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:e}})},validate:function(e,t,r){var n=r.options;return f.base64Regex[n.paddingRequired][n.urlSafe].test(e)?e:t.error("string.base64")}},case:{method:function(e){return n(["lower","upper"].includes(e),"Invalid case:",e),this.$_addRule({name:"case",args:{direction:e}})},validate:function(e,t,r){var n=r.direction;return"lower"===n&&e===e.toLocaleLowerCase()||"upper"===n&&e===e.toLocaleUpperCase()?e:t.error("string.".concat(n,"case"))},convert:!0},creditCard:{method:function(){return this.$_addRule("creditCard")},validate:function(e,t){for(var r=e.length,n=0,i=1;r--;){var a=e.charAt(r)*i;n+=a-9*(a>9),i^=3}return n>0&&n%10==0?e:t.error("string.creditCard")}},dataUri:{method:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.assertOptions(e,["paddingRequired"]),e=o({paddingRequired:!0},e),n("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:e}})},validate:function(e,t,r){var n=r.options,i=e.match(f.dataUriRegex);if(i){if(!i[2])return e;if("base64"!==i[2])return e;if(f.base64Regex[n.paddingRequired].false.test(i[3]))return e}return t.error("string.dataUri")}},domain:{method:function(e){e&&d.assertOptions(e,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);var t=f.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate:function(e,t,r,n){var a=n.address;return i.isValid(e,a)?e:t.error("string.domain")}},email:{method:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.assertOptions(e,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),n(void 0===e.multiple||"boolean"==typeof e.multiple,"multiple option must be an boolean");var t=f.addressOptions(e),r=new RegExp("\\s*[".concat(e.separator?l(e.separator):",","]\\s*"));return this.$_addRule({name:"email",args:{options:e},regex:r,address:t})},validate:function(e,t,r,n){var i,o=r.options,s=n.regex,l=n.address,c=o.multiple?e.split(s):[e],u=[],h=p(c);try{for(h.s();!(i=h.n()).done;){var d=i.value;a.isValid(d,l)||u.push(d)}}catch(f){h.e(f)}finally{h.f()}return u.length?t.error("string.email",{value:e,invalids:u}):e}},guid:{alias:"uuid",method:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.assertOptions(e,["version","separator"]);var t="";if(e.version){var r=[].concat(e.version);n(r.length>=1,"version must have at least 1 valid version specified");for(var i=new Set,a=0;a<r.length;++a){var o=r[a];n("string"==typeof o,"version at position "+a+" must be a string");var s=f.guidVersions[o.toLowerCase()];n(s,"version at position "+a+" must be one of "+Object.keys(f.guidVersions).join(", ")),n(!i.has(s),"version at position "+a+" must not be a duplicate"),t+=s,i.add(s)}}n(f.guidSeparators.has(e.separator),'separator must be one of true, false, "-", or ":"');var l=void 0===e.separator?"[:-]?":!0===e.separator?"[:-]":!1===e.separator?"[]?":"\\".concat(e.separator),c=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}(".concat(l,")[0-9A-F]{4}\\2?[").concat(t||"0-9A-F","][0-9A-F]{3}\\2?[").concat(t?"89AB":"0-9A-F","][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$"),"i");return this.$_addRule({name:"guid",args:{options:e},regex:c})},validate:function(e,t,r,n){var i=n.regex.exec(e);return i?f.guidBrackets[i[1]]!==i[i.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.assertOptions(e,["byteAligned"]),e=o({byteAligned:!1},e),n("boolean"==typeof e.byteAligned,"byteAligned must be boolean"),this.$_addRule({name:"hex",args:{options:e}})},validate:function(e,t,r){var n=r.options;return f.hexRegex.test(e)?n.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")}},hostname:{method:function(){return this.$_addRule("hostname")},validate:function(e,t){return i.isValid(e,{minDomainSegments:1})||f.ipRegex.test(e)?e:t.error("string.hostname")}},insensitive:{method:function(){return this.$_setFlag("insensitive",!0)}},ip:{method:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.assertOptions(e,["cidr","version"]);var t=s.regex(e),r=t.cidr,n=t.versions,i=t.regex,a=e.version?n:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:r,version:a}},regex:i})},validate:function(e,t,r,n){var i=r.options;return n.regex.test(e)?e:i.version?t.error("string.ipVersion",{value:e,cidr:i.cidr,version:i.version}):t.error("string.ip",{value:e,cidr:i.cidr})}},isoDate:{method:function(){return this.$_addRule("isoDate")},validate:function(e,t){var r=t.error;return f.isoDate(e)?e:r("string.isoDate")}},isoDuration:{method:function(){return this.$_addRule("isoDuration")},validate:function(e,t){return f.isoDurationRegex.test(e)?e:t.error("string.isoDuration")}},length:{method:function(e,t){return f.length(this,"length",e,"=",t)},validate:function(e,t,r,n){var i=r.limit,a=r.encoding,o=n.name,s=n.operator,l=n.args,c=!a&&e.length;return d.compare(c,i,s)?e:t.error("string."+o,{limit:l.limit,value:e,encoding:a})},args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method:function(){return this.case("lower")}},max:{method:function(e,t){return f.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method:function(e,t){return f.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NFC";return n(f.normalizationForms.includes(e),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:e}})},validate:function(e,t,r){var n=t.error,i=r.form;return e===e.normalize(i)?e:n("string.normalize",{value:e,form:i})},convert:!0},pattern:{alias:"regex",method:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(e instanceof RegExp,"regex must be a RegExp"),n(!e.flags.includes("g")&&!e.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof t&&(t={name:t}),d.assertOptions(t,["invert","name"]);var r=["string.pattern",t.invert?".invert":"",t.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:e,options:t},errorCode:r})},validate:function(e,t,r,n){var i=r.regex,a=r.options,o=n.errorCode;return i.test(e)^a.invert?e:t.error(o,{name:a.name,regex:i,value:e})},args:["regex","options"],multi:!0},replace:{method:function(e,t){"string"==typeof e&&(e=new RegExp(l(e),"g")),n(e instanceof RegExp,"pattern must be a RegExp"),n("string"==typeof t,"replacement must be a String");var r=this.clone();return r.$_terms.replacements||(r.$_terms.replacements=[]),r.$_terms.replacements.push({pattern:e,replacement:t}),r}},token:{method:function(){return this.$_addRule("token")},validate:function(e,t){return/^\w+$/.test(e)?e:t.error("string.token")}},trim:{method:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:e}})},validate:function(e,t,r){return r.enabled&&e!==e.trim()?t.error("string.trim"):e},convert:!0},truncate:{method:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("truncate",e)}},uppercase:{method:function(){return this.case("upper")}},uri:{method:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme"]),e.domain&&d.assertOptions(e.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);var t=u.regex(e),r=t.regex,n=t.scheme,i=e.domain?f.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:r,domain:i,scheme:n})},validate:function(e,t,r,n){var a=r.options,o=n.regex,s=n.domain,l=n.scheme;if(["http:/","https:/"].includes(e))return t.error("string.uri");var c=o.exec(e);if(c){var u=c[1]||c[2];return!s||a.allowRelative&&!u||i.isValid(u,s)?e:t.error("string.domain",{value:u})}return a.relativeOnly?t.error("string.uriRelativeOnly"):a.scheme?t.error("string.uriCustomScheme",{scheme:l,value:e}):t.error("string.uri")}}},manifest:{build:function(e,t){if(t.replacements){var r,n=p(t.replacements);try{for(n.s();!(r=n.n()).done;){var i=r.value,a=i.pattern,o=i.replacement;e=e.replace(a,o)}}catch(s){n.e(s)}finally{n.f()}}return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(e){if(!e)return e;if(n(void 0===e.minDomainSegments||Number.isSafeInteger(e.minDomainSegments)&&e.minDomainSegments>0,"minDomainSegments must be a positive integer"),n(void 0===e.maxDomainSegments||Number.isSafeInteger(e.maxDomainSegments)&&e.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===e.tlds)return e;if(!0===e.tlds||void 0===e.tlds)return n(f.tlds,"Built-in TLD list disabled"),Object.assign({},e,f.tlds);n("object"==typeof e.tlds,"tlds must be true, false, or an object");var t=e.tlds.deny;if(t)return Array.isArray(t)&&(e=Object.assign({},e,{tlds:{deny:new Set(t)}})),n(e.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),n(!e.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(e.tlds.deny,"tlds.deny"),e;var r=e.tlds.allow;return r?!0===r?(n(f.tlds,"Built-in TLD list disabled"),Object.assign({},e,f.tlds)):(Array.isArray(r)&&(e=Object.assign({},e,{tlds:{allow:new Set(r)}})),n(e.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(e.tlds.allow,"tlds.allow"),e):e},f.validateTlds=function(e,t){var r,a=p(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;n(i.isValid(o,{minDomainSegments:1,maxDomainSegments:1}),"".concat(t," must contain valid top level domain names"))}}catch(s){a.e(s)}finally{a.f()}},f.isoDate=function(e){if(!d.isIsoDate(e))return null;/.*T.*[+-]\d\d$/.test(e)&&(e+="00");var t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},f.length=function(e,t,r,i,a){return n(!a||!1,"Invalid encoding:",a),e.$_addRule({name:t,method:"length",args:{limit:r,encoding:a},operator:i})}},8826:function(e,t,r){"use strict";var n=r(375),i=r(8068),a={};a.Map=function(e){c(r,e);var t=u(r);function r(){return m(this,r),t.apply(this,arguments)}return v(r,[{key:"slice",value:function(){return new a.Map(this)}}]),r}(h(Map)),e.exports=i.extend({type:"symbol",terms:{map:{init:new a.Map}},coerce:{method:function(e,t){var r=t.schema,n=t.error,i=r.$_terms.map.get(e);return i&&(e=i),r._flags.only&&"symbol"!=typeof e?{value:e,errors:n("symbol.map",{map:r.$_terms.map})}:{value:e}}},validate:function(e,t){var r=t.error;if("symbol"!=typeof e)return{value:e,errors:r("symbol.base")}},rules:{map:{method:function(e){e&&!e[Symbol.iterator]&&"object"==typeof e&&(e=Object.entries(e)),n(e&&e[Symbol.iterator],"Iterable must be an iterable or object");var t,r=this.clone(),i=[],a=p(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;n(o&&o[Symbol.iterator],"Entry must be an iterable");var l=s(o,2),c=l[0],u=l[1];n("object"!=typeof c&&"function"!=typeof c&&"symbol"!=typeof c,"Key must not be of type object, function, or Symbol"),n("symbol"==typeof u,"Value must be a Symbol"),r.$_terms.map.set(c,u),i.push(u)}}catch(h){a.e(h)}finally{a.f()}return r.valid.apply(r,i)}}},manifest:{build:function(e,t){return t.map&&(e=e.map(t.map)),e}},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:function(e,t,r){"use strict";var n=r(375),o=r(8571),s=r(738),l=r(9621),c=r(8160),u=r(6354),h=r(493),f={result:Symbol("result")};t.entry=function(e,t,r){var i=c.defaults;r&&(n(void 0===r.warnings,"Cannot override warnings preference in synchronous validation"),n(void 0===r.artifacts,"Cannot override artifacts preference in synchronous validation"),i=c.preferences(c.defaults,r));var a=f.entry(e,t,i);n(!a.mainstay.externals.length,"Schema with external rules must use validateAsync()");var o={value:a.value};return a.error&&(o.error=a.error),a.mainstay.warnings.length&&(o.warning=u.details(a.mainstay.warnings)),a.mainstay.debug&&(o.debug=a.mainstay.debug),a.mainstay.artifacts&&(o.artifacts=a.mainstay.artifacts),o},t.entryAsync=function(){var e=a(i().mark((function e(t,r,n){var a,o,s,h,d,m,v,g,y,x,b,_,w,k,S;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=c.defaults,n&&(a=c.preferences(c.defaults,n)),o=f.entry(t,r,a),s=o.mainstay,!o.error){e.next=5;break}throw s.debug&&(o.error.debug=s.debug),o.error;case 5:if(!s.externals.length){e.next=37;break}h=o.value,d=p(s.externals),e.prev=8,d.s();case 10:if((m=d.n()).done){e.next=28;break}return v=m.value,g=v.method,y=v.path,x=v.label,b=void 0,_=void 0,w=h,y.length&&(b=y[y.length-1],_=l(h,y.slice(0,-1)),w=_[b]),e.prev=14,e.next=17,g(w,{prefs:n});case 17:if(void 0!==(k=e.sent)&&k!==w){e.next=20;break}return e.abrupt("continue",26);case 20:_?_[b]=k:h=k,e.next=26;break;case 23:throw e.prev=23,e.t0=e.catch(14),a.errors.label&&(e.t0.message+=" (".concat(x,")")),e.t0;case 26:e.next=10;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(8),d.e(e.t1);case 33:return e.prev=33,d.f(),e.finish(33);case 36:o.value=h;case 37:if(a.warnings||a.debug||a.artifacts){e.next=39;break}return e.abrupt("return",o.value);case 39:return S={value:o.value},e.abrupt("return",(s.warnings.length&&(S.warning=u.details(s.warnings)),s.debug&&(S.debug=s.debug),s.artifacts&&(S.artifacts=s.artifacts),S));case 41:case"end":return e.stop()}}),e,null,[[8,30,33,36],[14,23]])})));return function(t,r,n){return e.apply(this,arguments)}}(),f.entry=function(e,r,n){var i=f.tracer(r,n),a=i.tracer,o=i.cleanup,s={externals:[],warnings:[],tracer:a,debug:n.debug?[]:null,links:r._ids._schemaChain?new Map:null},l=r._ids._schemaChain?[{schema:r}]:null,c=new h([],[],{mainstay:s,schemas:l}),d=t.validate(e,r,c,n);o&&r.$_root.untrace();var p=u.process(d.errors,e,n);return{value:d.value,error:p,mainstay:s}},f.tracer=function(e,t){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:t.debug?(n(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:f.ignore}},t.validate=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t.$_terms.whens&&(t=t._generate(e,r,n).schema),t._preferences&&(n=f.prefs(t,n)),t._cache&&n.cache){var a=t._cache.get(e);if(r.mainstay.tracer.debug(r,"validate","cached",!!a),a)return a}var o=function(i,a,o){return t.$_createError(i,e,a,o||r,n)},s={original:e,prefs:n,schema:t,state:r,error:o,errorsArray:f.errorsArray,warn:function(e,t,n){return r.mainstay.warnings.push(o(e,t,n))},message:function(i,a){return t.$_createError("custom",e,a,r,n,{messages:i})}};r.mainstay.tracer.entry(t,r);var l=t._definition;if(l.prepare&&void 0!==e&&n.convert){var u=l.prepare(e,s);if(u){if(r.mainstay.tracer.value(r,"prepare",e,u.value),u.errors)return f.finalize(u.value,[].concat(u.errors),s);e=u.value}}if(l.coerce&&void 0!==e&&n.convert&&(!l.coerce.from||l.coerce.from.includes(typeof e))){var h=l.coerce.method(e,s);if(h){if(r.mainstay.tracer.value(r,"coerced",e,h.value),h.errors)return f.finalize(h.value,[].concat(h.errors),s);e=h.value}}var p=t._flags.empty;p&&p.$_match(f.trim(e,t),r.nest(p),c.defaults)&&(r.mainstay.tracer.value(r,"empty",e,void 0),e=void 0);var m=i.presence||t._flags.presence||(t._flags._endedSwitch?null:n.presence);if(void 0===e){if("forbidden"===m)return f.finalize(e,null,s);if("required"===m)return f.finalize(e,[t.$_createError("any.required",e,null,r,n)],s);if("optional"===m){if(t._flags.default!==c.symbols.deepDefault)return f.finalize(e,null,s);r.mainstay.tracer.value(r,"default",e,{}),e={}}}else if("forbidden"===m)return f.finalize(e,[t.$_createError("any.unknown",e,null,r,n)],s);var v=[];if(t._valids){var g=t._valids.get(e,r,n,t._flags.insensitive);if(g)return n.convert&&(r.mainstay.tracer.value(r,"valids",e,g.value),e=g.value),r.mainstay.tracer.filter(t,r,"valid",g),f.finalize(e,null,s);if(t._flags.only){var y=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},r,n);if(n.abortEarly)return f.finalize(e,[y],s);v.push(y)}}if(t._invalids){var x=t._invalids.get(e,r,n,t._flags.insensitive);if(x){r.mainstay.tracer.filter(t,r,"invalid",x);var b=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},r,n);if(n.abortEarly)return f.finalize(e,[b],s);v.push(b)}}if(l.validate){var _=l.validate(e,s);if(_&&(r.mainstay.tracer.value(r,"base",e,_.value),e=_.value,_.errors)){if(!Array.isArray(_.errors))return v.push(_.errors),f.finalize(e,v,s);if(_.errors.length)return v.push.apply(v,d(_.errors)),f.finalize(e,v,s)}}return t._rules.length?f.rules(e,v,s):f.finalize(e,v,s)},f.rules=function(e,t,r){var n,i=r.schema,a=r.state,o=r.prefs,s=p(i._rules);try{for(s.s();!(n=s.n()).done;){var l=n.value,u=i._definition.rules[l.method];if(u.convert&&o.convert)a.mainstay.tracer.log(i,a,"rule",l.name,"full");else{var h=void 0,m=l.args;if(l._resolve.length){m=Object.assign({},m);var v,g=p(l._resolve);try{for(g.s();!(v=g.n()).done;){var y=v.value,x=u.argsByName.get(y),b=m[y].resolve(e,a,o),_=x.normalize?x.normalize(b):b,w=c.validateArg(_,null,x);if(w){h=i.$_createError("any.ref",b,{arg:y,ref:m[y],reason:w},a,o);break}m[y]=_}}catch(C){g.e(C)}finally{g.f()}}h=h||u.validate(e,r,m,l);var k=f.rule(h,l);if(k.errors){if(a.mainstay.tracer.log(i,a,"rule",l.name,"error"),l.warn){var S;(S=a.mainstay.warnings).push.apply(S,d(k.errors));continue}if(o.abortEarly)return f.finalize(e,k.errors,r);t.push.apply(t,d(k.errors))}else a.mainstay.tracer.log(i,a,"rule",l.name,"pass"),a.mainstay.tracer.value(a,"rule",e,k.value,l.name),e=k.value}}}catch(C){s.e(C)}finally{s.f()}return f.finalize(e,t,r)},f.rule=function(e,t){return e instanceof u.Report?(f.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&e[c.symbols.errors]?(e.forEach((function(e){return f.error(e,t)})),{errors:e,value:null}):{errors:null,value:e}},f.error=function(e,t){return t.message&&e._setTemplate(t.message),e},f.finalize=function(e,t,r){t=t||[];var i=r.schema,a=r.state,o=r.prefs;if(t.length){var s=f.default("failover",void 0,t,r);void 0!==s&&(a.mainstay.tracer.value(a,"failover",e,s),e=s,t=[])}if(t.length&&i._flags.error)if("function"==typeof i._flags.error){t=i._flags.error(t),Array.isArray(t)||(t=[t]);var l,c=p(t);try{for(c.s();!(l=c.n()).done;){var h=l.value;n(h instanceof Error||h instanceof u.Report,"error() must return an Error object")}}catch(_){c.e(_)}finally{c.f()}}else t=[i._flags.error];if(void 0===e){var d=f.default("default",e,t,r);a.mainstay.tracer.value(a,"default",e,d),e=d}if(i._flags.cast&&void 0!==e){var m=i._definition.cast[i._flags.cast];if(m.from(e)){var v=m.to(e,r);a.mainstay.tracer.value(a,"cast",e,v,i._flags.cast),e=v}}if(i.$_terms.externals&&o.externals&&!1!==o._externals){var g,y=p(i.$_terms.externals);try{for(y.s();!(g=y.n()).done;){var x=g.value.method;a.mainstay.externals.push({method:x,path:a.path,label:u.label(i._flags,a,o)})}}catch(_){y.e(_)}finally{y.f()}}var b={value:e,errors:t.length?t:null};return i._flags.result&&(b.value="strip"===i._flags.result?void 0:r.original,a.mainstay.tracer.value(a,i._flags.result,e,b.value),a.shadow(e,i._flags.result)),i._cache&&!1!==o.cache&&!i._refs.length&&i._cache.set(r.original,b),void 0===e||b.errors||void 0===i._flags.artifact||(a.mainstay.artifacts=a.mainstay.artifacts||new Map,a.mainstay.artifacts.has(i._flags.artifact)||a.mainstay.artifacts.set(i._flags.artifact,[]),a.mainstay.artifacts.get(i._flags.artifact).push(a.path)),b},f.prefs=function(e,t){var r=t===c.defaults;return r&&e._preferences[c.symbols.prefs]?e._preferences[c.symbols.prefs]:(t=c.preferences(t,e._preferences),r&&(e._preferences[c.symbols.prefs]=t),t)},f.default=function(e,t,r,n){var i=n.schema,a=n.state,s=n.prefs,l=i._flags[e];if(s.noDefaults||void 0===l)return t;if(a.mainstay.tracer.log(i,a,"rule",e,"full"),!l)return l;if("function"==typeof l){var u=l.length?[o(a.ancestors[0]),n]:[];try{return l.apply(void 0,u)}catch(t){return void r.push(i.$_createError("any.".concat(e),null,{error:t},a,s))}}return"object"!=typeof l?l:l[c.symbols.literal]?l.literal:c.isResolvable(l)?l.resolve(t,a,s):o(l)},f.trim=function(e,t){if("string"!=typeof e)return e;var r=t.$_getRule("trim");return r&&r.args.enabled?e.trim():e},f.ignore={active:!1,debug:s,entry:s,filter:s,log:s,resolve:s,value:s},f.errorsArray=function(){var e=[];return e[c.symbols.errors]=!0,e}},2036:function(e,t,r){"use strict";var n=r(375),i=r(9474),a=r(8160),o={};e.exports=o.Values=function(){function e(t,r){m(this,e),this._values=new Set(t),this._refs=new Set(r),this._lowercase=o.lowercases(t),this._override=!1}return v(e,[{key:"length",get:function(){return this._values.size+this._refs.size}},{key:"add",value:function(e,t){a.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}},{key:"remove",value:function(e){a.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}},{key:"has",value:function(e,t,r,n){return!!this.get(e,t,r,n)}},{key:"get",value:function(e,t,r,n){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&n){var a=this._lowercase.get(e.toLowerCase());if(a)return{value:a}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e){var o,s=p(this._values);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(i(l,e))return{value:l}}}catch(y){s.e(y)}finally{s.f()}}if(t){var c,u=p(this._refs);try{for(u.s();!(c=u.n()).done;){var h=c.value,d=h.resolve(e,t,r,null,{in:!0});if(void 0!==d){var f,m=h.in&&"object"==typeof d?Array.isArray(d)?d:Object.keys(d):[d],v=p(m);try{for(v.s();!(f=v.n()).done;){var g=f.value;if(typeof g==typeof e)if(n&&e&&"string"==typeof e){if(g.toLowerCase()===e.toLowerCase())return{value:g,ref:h}}else if(i(g,e))return{value:g,ref:h}}}catch(y){v.e(y)}finally{v.f()}}}}catch(y){u.e(y)}finally{u.f()}}return!1}},{key:"override",value:function(){this._override=!0}},{key:"values",value:function(e){if(e&&e.display){for(var t=[],r=0,n=[].concat(d(this._values),d(this._refs));r<n.length;r++){var i=n[r];void 0!==i&&t.push(i)}return t}return Array.from([].concat(d(this._values),d(this._refs)))}},{key:"clone",value:function(){var e=new o.Values(this._values,this._refs);return e._override=this._override,e}},{key:"concat",value:function(e){n(!e._override,"Cannot concat override set of values");var t=new o.Values([].concat(d(this._values),d(e._values)),[].concat(d(this._refs),d(e._refs)));return t._override=this._override,t}},{key:"describe",value:function(){var e=[];this._override&&e.push({override:!0});var t,r=p(this._values.values());try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n&&"object"==typeof n?{value:n}:n)}}catch(s){r.e(s)}finally{r.f()}var i,a=p(this._refs.values());try{for(a.s();!(i=a.n()).done;){var o=i.value;e.push(o.describe())}}catch(s){a.e(s)}finally{a.f()}return e}}],[{key:"merge",value:function(e,t,r){if(e=e||new o.Values,t){if(t._override)return t.clone();for(var n=0,i=[].concat(d(t._values),d(t._refs));n<i.length;n++){var a=i[n];e.add(a)}}if(r)for(var s=0,l=[].concat(d(r._values),d(r._refs));s<l.length;s++){var c=l[s];e.remove(c)}return e.length?e:null}}]),e}(),o.Values.prototype[a.symbols.values]=!0,o.Values.prototype.slice=o.Values.prototype.clone,o.lowercases=function(e){var t=new Map;if(e){var r,n=p(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;"string"==typeof i&&t.set(i.toLowerCase(),i)}}catch(a){n.e(a)}finally{n.f()}}return t}},978:function(e,t,r){"use strict";var n=r(375),i=r(8571),a=r(1687),o=r(9621),s={};e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n(e&&"object"==typeof e,"Invalid defaults value: must be an object"),n(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),n("object"==typeof r,"Invalid options: must be an object"),!t)return null;if(r.shallow)return s.applyToDefaultsWithShallow(e,t,r);var o=i(e);if(!0===t)return o;var l=void 0!==r.nullOverride&&r.nullOverride;return a(o,t,{nullOverride:l,mergeArrays:!1})},s.applyToDefaultsWithShallow=function(e,t,r){var l=r.shallow;n(Array.isArray(l),"Invalid keys");var c,u=new Map,h=!0===t?null:new Set,d=p(l);try{for(d.s();!(c=d.n()).done;){var f=c.value;f=Array.isArray(f)?f:f.split(".");var m=o(e,f);m&&"object"==typeof m?u.set(m,h&&o(t,f)||m):h&&h.add(f)}}catch(_){d.e(_)}finally{d.f()}var v=i(e,{},u);if(!h)return v;var g,y=p(h);try{for(y.s();!(g=y.n()).done;){var x=g.value;s.reachCopy(v,t,x)}}catch(_){y.e(_)}finally{y.f()}var b=void 0!==r.nullOverride&&r.nullOverride;return a(v,t,{nullOverride:b,mergeArrays:!1})},s.reachCopy=function(e,t,r){var n,i=p(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(!(a in t))return;var o=t[a];if("object"!=typeof o||null===o)return;t=o}}catch(h){i.e(h)}finally{i.f()}for(var s=t,l=e,c=0;c<r.length-1;++c){var u=r[c];"object"!=typeof l[u]&&(l[u]={}),l=l[u]}l[r[r.length-1]]=s}},375:function(e,t,r){"use strict";var n=r(7916);e.exports=function(e){if(!e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(1===r.length&&r[0]instanceof Error)throw r[0];throw new n(r)}}},8571:function(e,t,r){"use strict";var n=r(9621),i=r(4277),a=r(7043),o={needsProtoHack:new Set([i.set,i.map,i.weakSet,i.weakMap])};e.exports=o.clone=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("object"!=typeof e||null===e)return e;var n=o.clone,l=r;if(t.shallow){if(!0!==t.shallow)return o.cloneWithShallow(e,t);n=function(e){return e}}else if(l){var c=l.get(e);if(c)return c}else l=new Map;var u=i.getInternalProto(e);if(u===i.buffer)return!1;if(u===i.date)return new Date(e.getTime());if(u===i.regex)return new RegExp(e);var h=o.base(e,u,t);if(h===e)return e;if(l&&l.set(e,h),u===i.set){var d,f=p(e);try{for(f.s();!(d=f.n()).done;){var m=d.value;h.add(n(m,t,l))}}catch(A){f.e(A)}finally{f.f()}}else if(u===i.map){var v,g=p(e);try{for(g.s();!(v=g.n()).done;){var y=s(v.value,2),x=y[0],b=y[1];h.set(x,n(b,t,l))}}catch(A){g.e(A)}finally{g.f()}}var _,w=a.keys(e,t),k=p(w);try{for(k.s();!(_=k.n()).done;){var S=_.value;if("__proto__"!==S)if(u!==i.array||"length"!==S){var C=Object.getOwnPropertyDescriptor(e,S);C?C.get||C.set?Object.defineProperty(h,S,C):C.enumerable?h[S]=n(e[S],t,l):Object.defineProperty(h,S,{enumerable:!1,writable:!0,configurable:!0,value:n(e[S],t,l)}):Object.defineProperty(h,S,{enumerable:!0,writable:!0,configurable:!0,value:n(e[S],t,l)})}else h.length=e.length}}catch(A){k.e(A)}finally{k.f()}return h},o.cloneWithShallow=function(e,t){var r=t.shallow;(t=Object.assign({},t)).shallow=!1;var i,a=new Map,s=p(r);try{for(s.s();!(i=s.n()).done;){var l=i.value,c=n(e,l);"object"!=typeof c&&"function"!=typeof c||a.set(c,c)}}catch(u){s.e(u)}finally{s.f()}return o.clone(e,t,a)},o.base=function(e,t,r){if(!1===r.prototype)return o.needsProtoHack.has(t)?new t.constructor:t===i.array?[]:{};var n=Object.getPrototypeOf(e);if(n&&n.isImmutable)return e;if(t===i.array){var a=[];return n!==t&&Object.setPrototypeOf(a,n),a}if(o.needsProtoHack.has(t)){var s=new n.constructor;return n!==t&&Object.setPrototypeOf(s,n),s}return Object.create(n)}},9474:function(e,t,r){"use strict";var n=r(4277),i={mismatched:null};e.exports=function(e,t,r){return r=Object.assign({prototype:!0},r),!!i.isDeepEqual(e,t,r,[])},i.isDeepEqual=function(e,t,r,a){if(e===t)return 0!==e||1/e==1/t;var o=typeof e;if(o!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===o){if(!r.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==o)return e!=e&&t!=t;var s=i.getSharedType(e,t,!!r.prototype);switch(s){case n.buffer:return!1;case n.promise:return e===t;case n.regex:return e.toString()===t.toString();case i.mismatched:return!1}for(var l=a.length-1;l>=0;--l)if(a[l].isSame(e,t))return!0;a.push(new i.SeenEntry(e,t));try{return!!i.isDeepEqualObj(s,e,t,r,a)}finally{a.pop()}},i.getSharedType=function(e,t,r){if(r)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?i.mismatched:n.getInternalProto(e);var a=n.getInternalProto(e);return a!==n.getInternalProto(t)?i.mismatched:a},i.valueOf=function(e){var t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},i.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},i.isSetSimpleEqual=function(e,t){var r,n=p(Set.prototype.values.call(e));try{for(n.s();!(r=n.n()).done;){var i=r.value;if(!Set.prototype.has.call(t,i))return!1}}catch(a){n.e(a)}finally{n.f()}return!0},i.isDeepEqualObj=function(e,t,r,a,o){var l=i.isDeepEqual,c=i.valueOf,u=i.hasOwnEnumerableProperty,h=Object.keys,d=Object.getOwnPropertySymbols;if(e===n.array){if(!a.part){if(t.length!==r.length)return!1;for(var f=0;f<t.length;++f)if(!l(t[f],r[f],a,o))return!1;return!0}var m,v=p(t);try{for(v.s();!(m=v.n()).done;){var g,y=m.value,x=p(r);try{for(x.s();!(g=x.n()).done;)if(l(y,g.value,a,o))return!0}catch(X){x.e(X)}finally{x.f()}}}catch(X){v.e(X)}finally{v.f()}}else if(e===n.set){if(t.size!==r.size)return!1;if(!i.isSetSimpleEqual(t,r)){var b,_=new Set(Set.prototype.values.call(r)),w=p(Set.prototype.values.call(t));try{for(w.s();!(b=w.n()).done;){var k=b.value;if(!_.delete(k)){var S,C=!1,A=p(_);try{for(A.s();!(S=A.n()).done;){var T=S.value;if(l(k,T,a,o)){_.delete(T),C=!0;break}}}catch(X){A.e(X)}finally{A.f()}if(!C)return!1}}}catch(X){w.e(X)}finally{w.f()}}}else if(e===n.map){if(t.size!==r.size)return!1;var E,M=p(Map.prototype.entries.call(t));try{for(M.s();!(E=M.n()).done;){var I=s(E.value,2),P=I[0],R=I[1];if(void 0===R&&!Map.prototype.has.call(r,P))return!1;if(!l(R,Map.prototype.get.call(r,P),a,o))return!1}}catch(X){M.e(X)}finally{M.f()}}else if(e===n.error&&(t.name!==r.name||t.message!==r.message))return!1;var z=c(t),L=c(r);if((t!==z||r!==L)&&!l(z,L,a,o))return!1;var D=h(t);if(!a.part&&D.length!==h(r).length&&!a.skip)return!1;var O,F=0,j=p(D);try{for(j.s();!(O=j.n()).done;){var N=O.value;if(a.skip&&a.skip.includes(N))void 0===r[N]&&++F;else{if(!u(r,N))return!1;if(!l(t[N],r[N],a,o))return!1}}}catch(X){j.e(X)}finally{j.f()}if(!a.part&&D.length-F!==h(r).length)return!1;if(!1!==a.symbols){var B,Z=d(t),U=new Set(d(r)),V=p(Z);try{for(V.s();!(B=V.n()).done;){var W=B.value;if(!a.skip||!a.skip.includes(W))if(u(t,W)){if(!u(r,W))return!1;if(!l(t[W],r[W],a,o))return!1}else if(u(r,W))return!1;U.delete(W)}}catch(X){V.e(X)}finally{V.f()}var G,H=p(U);try{for(H.s();!(G=H.n()).done;)if(u(r,G.value))return!1}catch(X){H.e(X)}finally{H.f()}}return!0},i.SeenEntry=function(){function e(t,r){m(this,e),this.obj=t,this.ref=r}return v(e,[{key:"isSame",value:function(e,t){return this.obj===e&&this.ref===t}}]),e}()},7916:function(e,t,r){"use strict";var i=r(8761);e.exports=function(e){c(a,e);var r=u(a);function a(e){var o;return m(this,a),o=r.call(this,e.filter((function(e){return""!==e})).map((function(e){return"string"==typeof e?e:e instanceof Error?e.message:i(e)})).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(n(o),t.assert),o}return v(a)}(h(Error))},5277:function(e){"use strict";var t={};e.exports=function(e){if(!e)return"";for(var r="",n=0;n<e.length;++n){var i=e.charCodeAt(n);t.isSafe(i)?r+=e[n]:r+=t.escapeHtmlChar(i)}return r},t.escapeHtmlChar=function(e){return t.namedHtml.get(e)||(e>=256?"&#"+e+";":"&#x".concat(e.toString(16).padStart(2,"0"),";"))},t.isSafe=function(e){return t.safeCharCodes.has(e)},t.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),t.safeCharCodes=function(){for(var e=new Set,t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&e.add(t);return e}()},6064:function(e){"use strict";e.exports=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:function(e){"use strict";e.exports=function(){}},1687:function(e,t,r){"use strict";var n=r(375),i=r(8571),a=r(7043),o={};e.exports=o.merge=function(e,t,r){if(n(e&&"object"==typeof e,"Invalid target value: must be an object"),n(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(r=Object.assign({nullOverride:!0,mergeArrays:!0},r),Array.isArray(t)){n(Array.isArray(e),"Cannot merge array onto an object"),r.mergeArrays||(e.length=0);for(var s=0;s<t.length;++s)e.push(i(t[s],{symbols:r.symbols}));return e}for(var l=a.keys(t,r),c=0;c<l.length;++c){var u=l[c];if("__proto__"!==u&&Object.prototype.propertyIsEnumerable.call(t,u)){var h=t[u];if(h&&"object"==typeof h){if(e[u]===h)continue;!e[u]||"object"!=typeof e[u]||Array.isArray(e[u])!==Array.isArray(h)||h instanceof Date||h instanceof RegExp?e[u]=i(h,{symbols:r.symbols}):o.merge(e[u],h,r)}else(null!=h||r.nullOverride)&&(e[u]=h)}}return e}},9621:function(e,t,r){"use strict";var n=r(375),i={};e.exports=function(e,t,r){if(!1===t||null==t)return e;"string"==typeof(r=r||{})&&(r={separator:r});var a=Array.isArray(t);n(!a||!r.separator,"Separator option is not valid for array-based chain");for(var o=a?t:t.split(r.separator||"."),s=e,l=0;l<o.length;++l){var c=o[l],u=r.iterables&&i.iterables(s);if(Array.isArray(s)||"set"===u){var h=Number(c);Number.isInteger(h)&&(c=h<0?s.length+h:h)}if(!s||"function"==typeof s&&!1===r.functions||!u&&void 0===s[c]){n(!r.strict||l+1===o.length,"Missing segment",c,"in reach path ",t),n("object"==typeof s||!0===r.functions||"function"!=typeof s,"Invalid segment",c,"in reach path ",t),s=r.default;break}s=u?"set"===u?d(s)[c]:s.get(c):s[c]}return s},i.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0}},8761:function(e){"use strict";e.exports=function(){try{return JSON.stringify.apply(JSON,arguments)}catch(e){return"[Cannot display object: "+e.message+"]"}}},4277:function(e,t){"use strict";var r={};t=e.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},r.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;var n=Object.prototype.toString.call(e);return r.typeMap.get(n)||t.generic}},7043:function(e,t){"use strict";t.keys=function(e){return!1!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}},3652:function(e,t,r){"use strict";var n=r(375),i={};t.Sorter=function(){function e(){m(this,e),this._items=[],this.nodes=[]}return v(e,[{key:"add",value:function(e,t){var r=[].concat((t=t||{}).before||[]),i=[].concat(t.after||[]),a=t.group||"?",o=t.sort||0;n(!r.includes(a),"Item cannot come before itself: ".concat(a)),n(!r.includes("?"),"Item cannot come before unassociated items"),n(!i.includes(a),"Item cannot come after itself: ".concat(a)),n(!i.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);var s,l=p(e);try{for(l.s();!(s=l.n()).done;){var c=s.value,u={seq:this._items.length,sort:o,before:r,after:i,group:a,node:c};this._items.push(u)}}catch(d){l.e(d)}finally{l.f()}if(!t.manual){var h=this._sort();n(h,"item","?"!==a?"added into group ".concat(a):"","created a dependencies error")}return this.nodes}},{key:"merge",value:function(e){Array.isArray(e)||(e=[e]);var t,r=p(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a){var o,s=p(a._items);try{for(s.s();!(o=s.n()).done;){var l=o.value;this._items.push(Object.assign({},l))}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){r.e(h)}finally{r.f()}this._items.sort(i.mergeSort);for(var c=0;c<this._items.length;++c)this._items[c].seq=c;var u=this._sort();return n(u,"merge created a dependencies error"),this.nodes}},{key:"sort",value:function(){var e=this._sort();return n(e,"sort created a dependencies error"),this.nodes}},{key:"_sort",value:function(){var e,t={},r=Object.create(null),n=Object.create(null),i=p(this._items);try{for(i.s();!(e=i.n()).done;){var a=e.value,o=a.seq,s=a.group;n[s]=n[s]||[],n[s].push(o),t[o]=a.before;var l,c=p(a.after);try{for(c.s();!(l=c.n()).done;){var u=l.value;r[u]=r[u]||[],r[u].push(o)}}catch(U){c.e(U)}finally{c.f()}}}catch(U){i.e(U)}finally{i.f()}for(var h in t){var f=[];for(var m in t[h]){var v=t[h][m];n[v]=n[v]||[],f.push.apply(f,d(n[v]))}t[h]=f}for(var g in r)if(n[g]){var y,x=p(n[g]);try{for(x.s();!(y=x.n()).done;){var b;(b=t[y.value]).push.apply(b,d(r[g]))}}catch(U){x.e(U)}finally{x.f()}}var _={};for(var w in t){var k,S=t[w],C=p(S);try{for(C.s();!(k=C.n()).done;){var A=k.value;_[A]=_[A]||[],_[A].push(w)}}catch(U){C.e(U)}finally{C.f()}}for(var T={},E=[],M=0;M<this._items.length;++M){var I=M;if(_[M]){I=null;for(var P=0;P<this._items.length;++P)if(!0!==T[P]){_[P]||(_[P]=[]);for(var R=_[P].length,z=0,L=0;L<R;++L)T[_[P][L]]&&++z;if(z===R){I=P;break}}}null!==I&&(T[I]=!0,E.push(I))}if(E.length!==this._items.length)return!1;var D,O={},F=p(this._items);try{for(F.s();!(D=F.n()).done;){var j=D.value;O[j.seq]=j}}catch(U){F.e(U)}finally{F.f()}this._items=[],this.nodes=[];for(var N=0,B=E;N<B.length;N++){var Z=O[B[N]];this.nodes.push(Z.node),this._items.push(Z)}return!0}}]),e}(),i.mergeSort=function(e,t){return e.sort===t.sort?0:e.sort<t.sort?-1:1}},5380:function(e,t,r){"use strict";var n=r(443),i=r(2178),a={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:n.URL||URL};t.analyze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return i.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof e)throw new Error("Invalid input: domain must be a string");if(e.length>256)return i.code("DOMAIN_TOO_LONG");if(a.nonAsciiRx.test(e)){if(!1===t.allowUnicode)return i.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(a.domainControlRx.test(e))return i.code("DOMAIN_INVALID_CHARS");e=a.punycode(e),t.allowFullyQualified&&"."===e[e.length-1]&&(e=e.slice(0,-1));var r=t.minDomainSegments||a.minDomainSegments,n=e.split(".");if(n.length<r)return i.code("DOMAIN_SEGMENTS_COUNT");if(t.maxDomainSegments&&n.length>t.maxDomainSegments)return i.code("DOMAIN_SEGMENTS_COUNT_MAX");var o=t.tlds;if(o){var s=n[n.length-1].toLowerCase();if(o.deny&&o.deny.has(s)||o.allow&&!o.allow.has(s))return i.code("DOMAIN_FORBIDDEN_TLDS")}for(var l=0;l<n.length;++l){var c=n[l];if(!c.length)return i.code("DOMAIN_EMPTY_SEGMENT");if(c.length>63)return i.code("DOMAIN_LONG_SEGMENT");if(l<n.length-1){if(!a.domainSegmentRx.test(c))return i.code("DOMAIN_INVALID_CHARS")}else if(!a.tldSegmentRx.test(c))return i.code("DOMAIN_INVALID_TLDS_CHARS")}return null},t.isValid=function(e,r){return!t.analyze(e,r)},a.punycode=function(e){e.includes("%")&&(e=e.replace(/%/g,"%25"));try{return new a.URL("http://".concat(e)).host}catch(t){return e}}},1745:function(e,t,r){"use strict";var n=r(9848),i=r(5380),a=r(2178),o={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(n.TextEncoder||TextEncoder)};t.analyze=function(e,t){return o.email(e,t)},t.isValid=function(e,t){return!o.email(e,t)},o.email=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)throw new Error("Invalid input: email must be a string");if(!e)return a.code("EMPTY_STRING");var r=!o.nonAsciiRx.test(e);if(!r){if(!1===t.allowUnicode)return a.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}var n=e.split("@");if(2!==n.length)return n.length>2?a.code("MULTIPLE_AT_CHAR"):a.code("MISSING_AT_CHAR");var l=s(n,2),c=l[0],u=l[1];if(!c)return a.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return a.code("ADDRESS_TOO_LONG");if(o.encoder.encode(c).length>64)return a.code("LOCAL_TOO_LONG")}return o.local(c,r)||i.analyze(u,t)},o.local=function(e,t){var r,n=e.split("."),i=p(n);try{for(i.s();!(r=i.n()).done;){var s=r.value;if(!s.length)return a.code("EMPTY_LOCAL_SEGMENT");if(t){if(!o.atextRx.test(s))return a.code("INVALID_LOCAL_CHARS")}else{var l,c=p(s);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(!o.atextRx.test(u)){var h=o.binary(u);if(!o.atomRx.test(h))return a.code("INVALID_LOCAL_CHARS")}}}catch(d){c.e(d)}finally{c.f()}}}}catch(d){i.e(d)}finally{i.f()}},o.binary=function(e){return Array.from(o.encoder.encode(e)).map((function(e){return String.fromCharCode(e)})).join("")},o.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,o.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:function(e,t){"use strict";t.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},t.code=function(e){return{code:e,error:t.codes[e]}}},9959:function(e,t,r){"use strict";var n=r(375),i=r(5752);t.regex=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");var t=e.cidr?e.cidr.toLowerCase():"optional";n(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),n(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");var r=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(r)||(r=[r]),n(r.length>=1,"options.version must have at least 1 version specified");for(var a=0;a<r.length;++a)n("string"==typeof r[a],"options.version must only contain strings"),r[a]=r[a].toLowerCase(),n(["ipv4","ipv6","ipvfuture"].includes(r[a]),"options.version contains unknown version "+r[a]+" - must be one of ipv4, ipv6, ipvfuture");var o=(r=Array.from(new Set(r))).map((function(e){if("forbidden"===t)return i.ip[e];var r="\\/".concat("ipv4"===e?i.ip.v4Cidr:i.ip.v6Cidr);return"required"===t?"".concat(i.ip[e]).concat(r):"".concat(i.ip[e],"(?:").concat(r,")?")})),s="(?:".concat(o.join("|"),")"),l=new RegExp("^".concat(s,"$"));return{cidr:t,versions:r,regex:l,raw:s}}},5752:function(e,t,r){"use strict";var n=r(375),i=r(6064),a={generate:function(){var e={},t="!\\$&'\\(\\)\\*\\+,;=",r="\\w-\\.~%\\dA-Fa-f"+t+":@",n="["+r+"]",i="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+i+"\\.){3}"+i;var a="[\\dA-Fa-f]{1,4}",o="(?:"+a+":"+a+"|"+e.ipv4address+")",s="(?:"+a+":){6}"+o,l="::(?:"+a+":){5}"+o,c="(?:"+a+")?::(?:"+a+":){4}"+o,u="(?:(?:"+a+":){0,1}"+a+")?::(?:"+a+":){3}"+o,h="(?:(?:"+a+":){0,2}"+a+")?::(?:"+a+":){2}"+o,d="(?:(?:"+a+":){0,3}"+a+")?::"+a+":"+o,f="(?:(?:"+a+":){0,4}"+a+")?::"+o;e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:"+s+"|"+l+"|"+c+"|"+u+"|"+h+"|"+d+"|"+f+"|(?:(?:[\\dA-Fa-f]{1,4}:){0,5}[\\dA-Fa-f]{1,4})?::[\\dA-Fa-f]{1,4}|(?:(?:[\\dA-Fa-f]{1,4}:){0,6}[\\dA-Fa-f]{1,4})?::)",e.ipvFuture="v[\\dA-Fa-f]+\\.[\\w-\\.~"+t+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=new RegExp(e.scheme);var p="[\\w-\\.~%\\dA-Fa-f"+t+":]*",m="(?:\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]|"+e.ipv4address+"|[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=]{1,255})",v="(?:"+p+"@)?"+m+"(?::\\d*)?",g="(?:"+p+"@)?("+m+")(?::\\d*)?",y=n+"+",x="(?:\\/[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*",b="\\/(?:"+y+x+")?",_=y+x,w="[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=@]+"+x;return e.hierPart="(?:(?:\\/\\/"+v+x+")|"+b+"|"+_+"|(?:\\/\\/\\/[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*(?:\\/[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*))",e.hierPartCapture="(?:(?:\\/\\/"+g+x+")|"+b+"|"+_+")",e.relativeRef="(?:(?:\\/\\/"+v+x+")|"+b+"|"+w+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+g+x+")|"+b+"|"+w+"|)",e.query="["+r+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+r+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+r+"\\/\\?]*",e}};a.rfc3986=a.generate(),t.ip={v4Cidr:a.rfc3986.ipv4Cidr,v6Cidr:a.rfc3986.ipv6Cidr,ipv4:a.rfc3986.ipv4address,ipv6:a.rfc3986.ipv6address,ipvfuture:a.rfc3986.ipvFuture},a.createRegex=function(e){var t=a.rfc3986,r="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",o=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return a.wrap(o+r);var s="";if(e.scheme){n(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");var l=[].concat(e.scheme);n(l.length>=1,"scheme must have at least 1 scheme specified");for(var c=[],u=0;u<l.length;++u){var h=l[u];n(h instanceof RegExp||"string"==typeof h,"scheme at position "+u+" must be a RegExp or String"),h instanceof RegExp?c.push(h.source.toString()):(n(t.schemeRegex.test(h),"scheme at position "+u+" must be a valid scheme"),c.push(i(h)))}s=c.join("|")}var d="(?:"+(s?"(?:"+s+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")",f=e.allowRelative?"(?:"+d+"|"+o+")":d;return a.wrap(f+r,s)},a.wrap=function(e,t){return{raw:e="(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])".concat(e),regex:new RegExp("^".concat(e,"$")),scheme:t}},a.uriRegex=a.createRegex({}),t.regex=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?a.createRegex(e):a.uriRegex}},1447:function(e,t){"use strict";var r={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*\.?[0-9]*){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};t.Parser=function(){function e(t){var n;m(this,e);var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i[r.settings]&&i.constants)for(var a in i.constants){var o=i.constants[a];if(null!==o&&!["boolean","number","string"].includes(typeof o))throw new Error("Formula constant ".concat(a," contains invalid ").concat(typeof o," value type"))}this.settings=i[r.settings]?i:Object.assign((f(n={},r.settings,!0),f(n,"constants",{}),f(n,"functions",{}),n),i),this.single=null,this._parts=null,this._parse(t)}return v(e,[{key:"_parse",value:function(e){var n,i=this,a=[],o="",s=0,l=!1,c=function(e){if(s)throw new Error("Formula missing closing parenthesis");var n=a.length?a[a.length-1]:null;if(l||o||e){if(n&&"reference"===n.type&&")"===e)return n.type="function",n.value=i._subFormula(o,n.value),void(o="");if(")"===e){var c=new t.Parser(o,i.settings);a.push({type:"segment",value:c})}else if(l){if("]"===l)return a.push({type:"reference",value:o}),void(o="");a.push({type:"literal",value:o})}else if(r.operatorCharacters.includes(o))n&&"operator"===n.type&&r.operators.includes(n.value+o)?n.value+=o:a.push({type:"operator",value:o});else if(o.match(r.numberRx))a.push({type:"constant",value:parseFloat(o)});else if(void 0!==i.settings.constants[o])a.push({type:"constant",value:i.settings.constants[o]});else{if(!o.match(r.tokenRx))throw new Error("Formula contains invalid token: ".concat(o));a.push({type:"reference",value:o})}o=""}},u=p(e);try{for(u.s();!(n=u.n()).done;){var h=n.value;l?h===l?(c(),l=!1):o+=h:s?"("===h?(o+=h,++s):")"===h?--s?o+=h:c(h):o+=h:h in r.literals?l=r.literals[h]:"("===h?(c(),++s):r.operatorCharacters.includes(h)?(c(),o=h,c()):" "!==h?o+=h:c()}}catch(g){u.e(g)}finally{u.f()}c(),a=a.map((function(e,t){return"operator"!==e.type||"-"!==e.value||t&&"operator"!==a[t-1].type?e:{type:"operator",value:"n"}}));var d,f=!1,m=p(a);try{for(m.s();!(d=m.n()).done;){var v=d.value;if("operator"===v.type){if(r.operatorsPrefix.includes(v.value))continue;if(!f)throw new Error("Formula contains an operator in invalid position");if(!r.operators.includes(v.value))throw new Error("Formula contains an unknown operator ".concat(v.value))}else if(f)throw new Error("Formula missing expected operator");f=!f}}catch(g){m.e(g)}finally{m.f()}if(!f)throw new Error("Formula contains invalid trailing operator");1===a.length&&["reference","literal","constant"].includes(a[0].type)&&(this.single={type:"reference"===a[0].type?"reference":"value",value:a[0].value}),this._parts=a.map((function(e){if("operator"===e.type)return r.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(i.settings.tokenRx&&!i.settings.tokenRx.test(e.value))throw new Error("Formula contains invalid reference ".concat(e.value));return i.settings.reference?i.settings.reference(e.value):r.reference(e.value)}))}},{key:"_subFormula",value:function(e,n){var i=this,a=this.settings.functions[n];if("function"!=typeof a)throw new Error("Formula contains unknown function ".concat(n));var o=[];if(e){for(var s="",l=0,c=!1,u=function(){if(!s)throw new Error("Formula contains function ".concat(n," with invalid arguments ").concat(e));o.push(s),s=""},h=0;h<e.length;++h){var d=e[h];c?(s+=d,d===c&&(c=!1)):d in r.literals&&!l?(s+=d,c=r.literals[d]):","!==d||l?(s+=d,"("===d?++l:")"===d&&--l):u()}u()}return o=o.map((function(e){return new t.Parser(e,i.settings)})),function(e){var t,r=[],n=p(o);try{for(n.s();!(t=n.n()).done;){var i=t.value;r.push(i.evaluate(e))}}catch(s){n.e(s)}finally{n.f()}return a.call.apply(a,[e].concat(r))}}},{key:"evaluate",value:function(e){for(var t=this._parts.slice(),n=t.length-2;n>=0;--n){var i=t[n];if(i&&"operator"===i.type){var a=t[n+1];t.splice(n+1,1);var o=r.evaluate(a,e);t[n]=r.single(i.value,o)}}return r.operatorsOrder.forEach((function(n){for(var i=1;i<t.length-1;)if(n.includes(t[i])){var a=t[i],o=r.evaluate(t[i-1],e),s=r.evaluate(t[i+1],e);t.splice(i,2);var l=r.calculate(a,o,s);t[i-1]=0===l?0:l}else i+=2})),r.evaluate(t[0],e)}}]),e}(),t.Parser.prototype[r.symbol]=!0,r.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},r.evaluate=function(e,t){return null===e?null:"function"==typeof e?e(t):e[r.symbol]?e.evaluate(t):e},r.single=function(e,t){if("!"===e)return!t;var r=-t;return 0===r?0:r},r.calculate=function(e,t,n){if("??"===e)return r.exists(t)?t:n;if("string"==typeof t||"string"==typeof n){if("+"===e)return(t=r.exists(t)?t:"")+(r.exists(n)?n:"")}else switch(e){case"^":return Math.pow(t,n);case"*":return t*n;case"/":return t/n;case"%":return t%n;case"+":return t+n;case"-":return t-n}switch(e){case"<":return t<n;case"<=":return t<=n;case">":return t>n;case">=":return t>=n;case"==":return t===n;case"!=":return t!==n;case"&&":return t&&n;case"||":return t||n}return null},r.exists=function(e){return null!=e}},9926:function(){},5688:function(){},9708:function(){},1152:function(){},443:function(){},9848:function(){},5934:function(e){"use strict";e.exports={version:"17.7.0"}}},t={},function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}(5107);var e,t}()},5483:function(e,t,r){var n=r(8416).default,i=r(6115).default,a=r(3515).default,o=r(1588).default,s=r(3808).default,l=r(4993).default,c=r(1589).default,u=r(861).default,h=r(7424).default,d=r(4704).default,f=r(6690).default,p=r(9728).default,m=r(1655).default,v=r(6389).default,g=r(3578).default;e.exports=function(){"use strict";var e,t,r;function y(n,i){if(e)if(t){var a="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",o={};e(o),r=i(o),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(r.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else t=i;else e=i}return y(["exports"],(function(e){var t,r,n,y="undefined"!=typeof self?self:{},x="2.11.0",b={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==t){var e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{t=null!={NODE_ENV:"production",PUBLIC_URL:"/vision-dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_CLIENT_ID:"f7e95b44ab6db727ce72",REACT_APP_GLOBAL_HOME_LOCATION:"/#/",REACT_APP_NOT_FOUND_REDIRECT:"/#/404",REACT_APP_SERVER_ERROR_REDIRECT:"/#/server-error"}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"/vision-dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_CLIENT_ID:"f7e95b44ab6db727ce72",REACT_APP_GLOBAL_HOME_LOCATION:"/#/",REACT_APP_NOT_FOUND_REDIRECT:"/#/404",REACT_APP_SERVER_ERROR_REDIRECT:"/#/server-error"}.API_URL_REGEX):e}catch(y){t=e}}return t},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},_={supported:!1,testSupport:function(e){!w&&n&&(k?S(e):r=e)}},w=!1,k=!1;function S(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.isContextLost())return;_.supported=!0}catch(e){}e.deleteTexture(t),w=!0}y.document&&((n=y.document.createElement("img")).onload=function(){r&&S(r),r=null,k=!0},n.onerror=function(){w=!0,r=null},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var C="01",A=T;function T(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=n}T.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,n=0;n<8;n++){var i=this.sampleCurveX(r)-e;if(Math.abs(i)<t)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r-=i/a}var o=0,s=1;for(r=e,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-e)<t));n++)e>i?o=r:s=r,r=.5*(s-o)+o;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var E=M;function M(e,t){this.x=e,this.y=t}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=n,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),i=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-n*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},M.convert=function(e){return e instanceof M?e:Array.isArray(e)?new M(e[0],e[1]):e};var I=Math.PI/180,P=180/Math.PI;function R(e){return e*I}function z(e){return e*P}var L=[[0,0],[1,0],[1,1],[0,1]];function D(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function O(e,t,r,n){var i=new A(e,t,r,n);return function(e){return i.solve(e)}}var F=O(.25,.1,.25,1);function j(e,t,r){return Math.min(r,Math.max(t,e))}function N(e,t,r){return(r=j((r-e)/(t-e),0,1))*r*(3-2*r)}function B(e,t,r){var n=r-t,i=((e-t)%n+n)%n+t;return i===t?r:i}function Z(e,t,r){if(!e.length)return r(null,[]);var n=e.length,i=new Array(e.length),a=null;e.forEach((function(e,o){t(e,(function(e,t){e&&(a=e),i[o]=t,0==--n&&r(a,i)}))}))}function U(e){var t=[];for(var r in e)t.push(e[r]);return t}function V(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i=0,a=r;i<a.length;i++){var o=a[i];for(var s in o)e[s]=o[s]}return e}var W=1;function G(){return W++}function H(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function X(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Y(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function q(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function $(e,t){return-1!==e.indexOf(t,e.length-t.length)}function K(e,t,r){var n={};for(var i in e)n[i]=t.call(r||this,e[i],i,e);return n}function J(e,t,r){var n={};for(var i in e)t.call(r||this,e[i],i,e)&&(n[i]=e[i]);return n}function Q(e){return Array.isArray(e)?e.map(Q):"object"==typeof e&&e?K(e,Q):e}var ee={};function te(e){ee[e]||("undefined"!=typeof console&&console.warn(e),ee[e]=!0)}function re(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function ne(e){for(var t,r,n=0,i=0,a=e.length,o=a-1;i<a;o=i++)t=e[i],n+=((r=e[o]).x-t.x)*(t.y+r.y);return n}function ie(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function ae(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,r,n,i){var a=n||i;return t[r]=!a||a.toLowerCase(),""})),t["max-age"]){var r=parseInt(t["max-age"],10);isNaN(r)?delete t["max-age"]:t["max-age"]=r}return t}var oe=null;function se(e){if(null==oe){var t=e.navigator?e.navigator.userAgent:null;oe=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return oe}function le(e){try{var t=y[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function ce(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}var ue,he,de="mapbox-tiles",fe=500,pe=50;function me(){try{return y.caches}catch(e){}}function ve(){me()&&!ue&&(ue=y.caches.open(de))}function ge(e){var t=e.indexOf("?");if(t<0)return e;var r=function(e){var t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e),n=r.filter((function(e){var t=e.split("=");return"language"===t[0]||"worldview"===t[0]}));return n.length?"".concat(e.slice(0,t),"?").concat(n.join("&")):e.slice(0,t)}var ye=1/0,xe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(xe);var be=function(e){m(r,e);var t=v(r);function r(e,n,i){var a;return f(this,r),401===n&&Pe(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),(a=t.call(this,e)).status=n,a.url=i,a}return p(r,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),r}(g(Error)),_e=ie()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===y.location.protocol?y.parent:y).location.href},we=function(e,t){if(!(/^file:/.test(r=e.url)||/^file:/.test(_e())&&!/^\w+:/.test(r))){if(y.fetch&&y.Request&&y.AbortController&&y.Request.prototype.hasOwnProperty("signal"))return function(e,t){var r,n=new y.AbortController,i=new y.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:_e(),signal:n.signal}),a=!1,o=!1,s=(r=i.url).indexOf("sku=")>0&&Pe(r);"json"===e.type&&i.headers.set("Accept","application/json");var l=function(r,n,a){if(!o){if(r&&"SecurityError"!==r.message&&te(r),n&&a)return c(n);var l=Date.now();y.fetch(i).then((function(r){if(r.ok){var n=s?r.clone():null;return c(r,n,l)}return t(new be(r.statusText,r.status,e.url))})).catch((function(e){20!==e.code&&t(new Error(e.message))}))}},c=function(r,n,s){("arrayBuffer"===e.type?r.arrayBuffer():"json"===e.type?r.json():r.text()).then((function(e){o||(n&&s&&function(e,t,r){if(ve(),ue){var n={status:t.status,statusText:t.statusText,headers:new y.Headers};t.headers.forEach((function(e,t){return n.headers.set(t,e)}));var i=ae(t.headers.get("Cache-Control")||"");if(!i["no-store"]){i["max-age"]&&n.headers.set("Expires",new Date(r+1e3*i["max-age"]).toUTCString());var a=n.headers.get("Expires");a&&(new Date(a).getTime()-r<42e4||function(e,t){if(void 0===he)try{new Response(new ReadableStream),he=!0}catch(e){he=!1}he?t(e.body):e.blob().then(t)}(t,(function(t){var r=new y.Response(t,n);ve(),ue&&ue.then((function(t){return t.put(ge(e.url),r)})).catch((function(e){return te(e.message)}))})))}}}(i,n,s),a=!0,t(null,e,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((function(e){o||t(new Error(e.message))}))};return s?function(e,t){if(ve(),!ue)return t(null);var r=ge(e.url);ue.then((function(e){e.match(r).then((function(n){var i=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),r=ae(e.headers.get("Cache-Control")||"");return t>Date.now()&&!r["no-cache"]}(n);e.delete(r),i&&e.put(r,n.clone()),t(null,n,i)})).catch(t)})).catch(t)}(i,l):l(null,null),{cancel:function(){o=!0,a||n.abort()}}}(e,t);if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var r;return function(e,t){var r=new y.XMLHttpRequest;for(var n in r.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(r.responseType="arraybuffer"),e.headers)r.setRequestHeader(n,e.headers[n]);return"json"===e.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===e.credentials,r.onerror=function(){t(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){var n=r.response;if("json"===e.type)try{n=JSON.parse(r.response)}catch(e){return t(e)}t(null,n,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else t(new be(r.statusText,r.status,e.url))},r.send(e.body),{cancel:function(){return r.abort()}}}(e,t)},ke=function(e,t){return we(V(e,{type:"arrayBuffer"}),t)};function Se(e){var t=y.document.createElement("a");return t.href=e,t.protocol===y.document.location.protocol&&t.host===y.document.location.host}var Ce,Ae,Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ce=[],Ae=0;var Ee=function e(t,r){if(_.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Ae>=b.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:t,callback:r,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ce.push(n),n}Ae++;var i=!1,a=function(){if(!i)for(i=!0,Ae--;Ce.length&&Ae<b.MAX_PARALLEL_IMAGE_REQUESTS;){var t=Ce.shift(),r=t.requestParameters,n=t.callback;t.cancelled||(t.cancel=e(r,n).cancel)}},o=ke(t,(function(e,t,n,i){a(),e?r(e):t&&(y.createImageBitmap?function(e,t){var r=new y.Blob([new Uint8Array(e)],{type:"image/png"});y.createImageBitmap(r).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(t,(function(e,t){return r(e,t,n,i)})):function(e,t){var r=new y.Image,n=y.URL;r.onload=function(){t(null,r),n.revokeObjectURL(r.src),r.onload=null,y.requestAnimationFrame((function(){r.src=Te}))},r.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var i=new y.Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?n.createObjectURL(i):Te}(t,(function(e,t){return r(e,t,n,i)})))}));return{cancel:function(){o.cancel(),a()}}},Me="NO_ACCESS_TOKEN";function Ie(e){return 0===e.indexOf("mapbox:")}function Pe(e){return b.API_URL_REGEX.test(e)}function Re(e){return b.API_STYLE_REGEX.test(e)&&!ze(e)}function ze(e){return b.API_SPRITE_REGEX.test(e)}var Le=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function De(e){var t=e.match(Le);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Oe(e){var t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}function Fe(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(y.atob(t[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var je=function(){function e(t){f(this,e),this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}return p(e,[{key:"getStorageKey",value:function(e){var t=Fe(b.ACCESS_TOKEN),r="";return r=t&&t.u?y.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):b.ACCESS_TOKEN||"",e?"mapbox.eventData.".concat(e,":").concat(r):"mapbox.eventData:".concat(r)}},{key:"fetchEventData",value:function(){var e=le("localStorage"),t=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{var n=y.localStorage.getItem(t);n&&(this.eventData=JSON.parse(n));var i=y.localStorage.getItem(r);i&&(this.anonId=i)}catch(e){te("Unable to read from LocalStorage")}}},{key:"saveEventData",value:function(){var e=le("localStorage"),t=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{y.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&y.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){te("Unable to write to LocalStorage")}}},{key:"processRequests",value:function(e){}},{key:"postEvent",value:function(e,t,r,n){var i=this;if(b.EVENTS_URL){var a=De(b.EVENTS_URL);a.params.push("access_token=".concat(n||b.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(e).toISOString()},s=t?V(o,t):o,l={url:Oe(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(e,t){return we(V(e,{method:"POST"}),t)}(l,(function(e){i.pendingRequest=null,r(e),i.saveEventData(),i.processRequests(n)}))}}},{key:"queueRequest",value:function(e,t){this.queue.push(e),this.processRequests(t)}}]),e}(),Ne=new(function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,"appUserTurnstile"))._customAccessToken=e,n}return p(r,[{key:"postTurnstileEvent",value:function(e,t){b.EVENTS_URL&&b.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return Ie(e)||Pe(e)}))&&this.queueRequest(Date.now(),t)}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var r=Fe(b.ACCESS_TOKEN),n=r?r.u:b.ACCESS_TOKEN,i=n!==this.eventData.tokenU;Y(this.anonId)||(this.anonId=H(),i=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),l=(a-this.eventData.lastSuccess)/864e5;i=i||l>=1||l<-1||o.getDate()!==s.getDate()}else i=!0;i?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:x,skuId:C,"enabled.telemetry":!1,userId:this.anonId},(function(e){e||(t.eventData.lastSuccess=a,t.eventData.tokenU=n)}),e):this.processRequests()}}}]),r}(je)),Be=Ne.postTurnstileEvent.bind(Ne),Ze=new(function(e){m(r,e);var t=v(r);function r(){var e;return f(this,r),(e=t.call(this,"map.load")).success={},e.skuToken="",e}return p(r,[{key:"postMapLoadEvent",value:function(e,t,r,n){this.skuToken=t,this.errorCb=n,b.EVENTS_URL&&(r||b.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(new Error(Me)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var r=this.queue.shift(),n=r.id,i=r.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),Y(this.anonId)||(this.anonId=H()),this.postEvent(i,{sdkIdentifier:"mapbox-gl-js",sdkVersion:x,skuId:C,skuToken:this.skuToken,userId:this.anonId},(function(e){e?t.errorCb(e):n&&(t.success[n]=!0)}),e))}}}]),r}(je)),Ue=Ze.postMapLoadEvent.bind(Ze),Ve=new(function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.call(this,"gljs.performance")}return p(r,[{key:"postPerformanceEvent",value:function(e,t){b.EVENTS_URL&&(e||b.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}},{key:"processRequests",value:function(e){if(!this.pendingRequest&&0!==this.queue.length){var t,r=this.queue.shift(),n=r.timestamp,i=function(e){var t=y.performance.getEntriesByType("resource"),r=y.performance.getEntriesByType("mark"),n=function(e){var t={};if(e)for(var r in e)if("other"!==r){var n,i=d(e[r]);try{for(i.s();!(n=i.n()).done;){var a=n.value,o="".concat(r,"RequestCount"),s="".concat(r,"ResolveRangeMin"),l="".concat(r,"ResolveRangeMax");t[s]=Math.min(t[s]||1/0,a.startTime),t[l]=Math.max(t[l]||-1/0,a.responseEnd),void 0===t[o]&&(t[o]=0),++t[o]}}catch(c){i.e(c)}finally{i.f()}}return t}(function(e,t){var r={};if(e){var n,i=d(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t(a);void 0===r[o]&&(r[o]=[]),r[o].push(a)}}catch(s){i.e(s)}finally{i.f()}}return r}(t,$e)),i=y.devicePixelRatio,a=y.navigator.connection||y.navigator.mozConnection||y.navigator.webkitConnection,o={counters:[],metadata:[],attributes:[]},s=function(e,t,r){null!=r&&e.push({name:t,value:r.toString()})};for(var l in n)s(o.counters,l,n[l]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(s(o.counters,"interactionRangeMin",e.interactionRange[0]),s(o.counters,"interactionRangeMax",e.interactionRange[1])),r)for(var c=function(){var e=h[u],t=Ye[e],n=r.find((function(e){return e.name===t}));n&&s(o.counters,t,n.startTime)},u=0,h=Object.keys(Ye);u<h.length;u++)c();return s(o.attributes,"style",function(e){if(e){var t,r=d(e);try{for(r.s();!(t=r.n()).done;){var n=t.value.name.split("?")[0];if(Re(n)){var i=n.split("/").slice(-2);if(2===i.length)return"mapbox://styles/".concat(i[0],"/").concat(i[1])}}}catch(a){r.e(a)}finally{r.f()}}}(t)),s(o.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),s(o.attributes,"fogEnabled",e.fogEnabled?"true":"false"),s(o.attributes,"projection",e.projection.name),s(o.attributes,"zoom",e.zoom),s(o.metadata,"devicePixelRatio",i),s(o.metadata,"connectionEffectiveType",a?a.effectiveType:void 0),s(o.metadata,"navigatorUserAgent",y.navigator.userAgent),s(o.metadata,"screenWidth",y.screen.width),s(o.metadata,"screenHeight",y.screen.height),s(o.metadata,"windowWidth",y.innerWidth),s(o.metadata,"windowHeight",y.innerHeight),s(o.metadata,"mapWidth",e.width/i),s(o.metadata,"mapHeight",e.height/i),s(o.metadata,"webglRenderer",e.renderer),s(o.metadata,"webglVendor",e.vendor),s(o.metadata,"sdkVersion",x),s(o.metadata,"sdkIdentifier","mapbox-gl-js"),o}(r.performanceData),a=d(i.metadata);try{for(a.s();!(t=a.n()).done;)t.value}catch(u){a.e(u)}finally{a.f()}var o,s=d(i.counters);try{for(s.s();!(o=s.n()).done;)o.value}catch(u){s.e(u)}finally{s.f()}var l,c=d(i.attributes);try{for(c.s();!(l=c.n()).done;)l.value}catch(u){c.e(u)}finally{c.f()}this.postEvent(n,i,(function(){}),e)}}}]),r}(je)),We=Ve.postPerformanceEvent.bind(Ve),Ge=new(function(e){m(r,e);var t=v(r);function r(){var e;return f(this,r),(e=t.call(this,"map.auth")).success={},e.skuToken="",e}return p(r,[{key:"getSession",value:function(e,t,r,n){var i=this;if(b.API_URL&&b.SESSION_PATH){var a=De(b.API_URL+b.SESSION_PATH);a.params.push("sku=".concat(t||"")),a.params.push("access_token=".concat(n||b.ACCESS_TOKEN||""));var o={url:Oe(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return we(V(e,{method:"GET"}),t)}(o,(function(e){i.pendingRequest=null,r(e),i.saveEventData(),i.processRequests(n)}))}}},{key:"getSessionAPI",value:function(e,t,r,n){this.skuToken=t,this.errorCb=n,b.SESSION_PATH&&b.API_URL&&(r||b.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(new Error(Me)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var r=this.queue.shift(),n=r.id,i=r.timestamp;n&&this.success[n]||this.getSession(i,this.skuToken,(function(e){e?t.errorCb(e):n&&(t.success[n]=!0)}),e)}}}]),r}(je)),He=Ge.getSessionAPI.bind(Ge),Xe=new Set,Ye={create:"create",load:"load",fullLoad:"fullLoad"},qe={mark:function(e){y.performance.mark(e)},measure:function(e,t,r){y.performance.measure(e,t,r)}};function $e(e){var t=e.name.split("?")[0];return t.includes("mapbox-gl.js")?"javascript":t.includes("mapbox-gl.css")?"css":function(e){return b.API_FONTS_REGEX.test(e)}(t)?"fontRange":ze(t)?"sprite":Re(t)?"style":function(e){return b.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}var Ke,Je,Qe,et,tt=y.performance;function rt(e){var t=e?e.url.toString():void 0;return tt.getEntriesByName(t)}var nt={now:function(){return void 0!==Qe?Qe:y.performance.now()},setNow:function(e){Qe=e},restoreNow:function(){Qe=void 0},frame:function(e){var t=y.requestAnimationFrame(e);return{cancel:function(){return y.cancelAnimationFrame(t)}}},getImageData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.width,n=e.height;et||(et=y.document.createElement("canvas"));var i=et.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return(r>et.width||n>et.height)&&(et.width=r,et.height=n),i.clearRect(-t,-t,r+2*t,n+2*t),i.drawImage(e,0,0,r,n),i.getImageData(-t,-t,r+2*t,n+2*t)},resolveURL:function(e){return Ke||(Ke=y.document.createElement("a")),Ke.href=e,Ke.href},get devicePixelRatio(){return y.devicePixelRatio},get prefersReducedMotion(){return!!y.matchMedia&&(null==Je&&(Je=y.matchMedia("(prefers-reduced-motion: reduce)")),Je.matches)}};function it(e,t,r){r[e]&&-1!==r[e].indexOf(t)||(r[e]=r[e]||[],r[e].push(t))}function at(e,t,r){if(r&&r[e]){var n=r[e].indexOf(t);-1!==n&&r[e].splice(n,1)}}var ot=p((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,e),V(this,r),this.type=t})),st=function(e){m(r,e);var t=v(r);function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,r),t.call(this,"error",V({error:e},n))}return p(r)}(ot),lt=function(){function e(){f(this,e)}return p(e,[{key:"on",value:function(e,t){return this._listeners=this._listeners||{},it(e,t,this._listeners),this}},{key:"off",value:function(e,t){return at(e,t,this._listeners),at(e,t,this._oneTimeListeners),this}},{key:"once",value:function(e,t){var r=this;return t?(this._oneTimeListeners=this._oneTimeListeners||{},it(e,t,this._oneTimeListeners),this):new Promise((function(t){return r.once(e,t)}))}},{key:"fire",value:function(e,t){"string"==typeof e&&(e=new ot(e,t||{}));var r=e.type;if(this.listens(r)){e.target=this;var n,i=this._listeners&&this._listeners[r]?this._listeners[r].slice():[],a=d(i);try{for(a.s();!(n=a.n()).done;)n.value.call(this,e)}catch(h){a.e(h)}finally{a.f()}var o,s=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[],l=d(s);try{for(l.s();!(o=l.n()).done;){var c=o.value;at(r,c,this._oneTimeListeners),c.call(this,e)}}catch(h){l.e(h)}finally{l.f()}var u=this._eventedParent;u&&(V(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(e))}else e instanceof st&&console.error(e.error);return this}},{key:"listens",value:function(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}},{key:"setEventedParent",value:function(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}]),e}(),ct=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ut(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i=0,a=r;i<a.length;i++){var o=a[i];for(var s in o)e[s]=o[s]}return e}function ht(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function dt(e){if(Array.isArray(e))return e.map(dt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var r in e)t[r]=dt(e[r]);return t}return ht(e)}var ft=function(e){m(r,e);var t=v(r);function r(e,n){var i;return f(this,r),(i=t.call(this,n)).message=n,i.key=e,i}return p(r)}(g(Error)),pt=ft,mt=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];f(this,e),this.parent=t,this.bindings={};var n,i=d(r);try{for(i.s();!(n=i.n()).done;){var a=h(n.value,2),o=a[0],s=a[1];this.bindings[o]=s}}catch(l){i.e(l)}finally{i.f()}}return p(e,[{key:"concat",value:function(t){return new e(this,t)}},{key:"get",value:function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}},{key:"has",value:function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}]),e}(),vt=mt,gt={kind:"null"},yt={kind:"number"},xt={kind:"string"},bt={kind:"boolean"},_t={kind:"color"},wt={kind:"object"},kt={kind:"value"},St={kind:"collator"},Ct={kind:"formatted"},At={kind:"resolvedImage"};function Tt(e,t){return{kind:"array",itemType:e,N:t}}function Et(e){if("array"===e.kind){var t=Et(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}var Mt=[gt,yt,xt,bt,_t,Ct,wt,Tt(kt),At];function It(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!It(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind){var r,n=d(Mt);try{for(n.s();!(r=n.n()).done;)if(!It(r.value,t))return null}catch(i){n.e(i)}finally{n.f()}}}return"Expected ".concat(Et(e)," but found ").concat(Et(t)," instead.")}function Pt(e,t){return t.some((function(t){return t.kind===e.kind}))}function Rt(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}var zt,Lt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Dt(e){return(e=Math.round(e))<0?0:e>255?255:e}function Ot(e){return Dt("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Ft(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function jt(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}try{zt={}.parseCSSColor=function(e){var t,r=e.replace(/ /g,"").toLowerCase();if(r in Lt)return Lt[r].slice();if("#"===r[0])return 4===r.length?(t=parseInt(r.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===r.length&&(t=parseInt(r.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var n=r.indexOf("("),i=r.indexOf(")");if(-1!==n&&i+1===r.length){var a=r.substr(0,n),o=r.substr(n+1,i-(n+1)).split(","),s=1;switch(a){case"rgba":if(4!==o.length)return null;s=Ft(o.pop());case"rgb":return 3!==o.length?null:[Ot(o[0]),Ot(o[1]),Ot(o[2]),s];case"hsla":if(4!==o.length)return null;s=Ft(o.pop());case"hsl":if(3!==o.length)return null;var l=(parseFloat(o[0])%360+360)%360/360,c=Ft(o[1]),u=Ft(o[2]),h=u<=.5?u*(c+1):u+c-u*c,d=2*u-h;return[Dt(255*jt(d,h,l+1/3)),Dt(255*jt(d,h,l)),Dt(255*jt(d,h,l-1/3)),s];default:return null}}return null}}catch(e){}var Nt=function(){function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;f(this,e),this.r=t,this.g=r,this.b=n,this.a=i}return p(e,[{key:"toString",value:function(){var e=this.toArray(),t=h(e,4),r=t[0],n=t[1],i=t[2],a=t[3];return"rgba(".concat(Math.round(r),",").concat(Math.round(n),",").concat(Math.round(i),",").concat(a,")")}},{key:"toArray",value:function(){var e=this.r,t=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*e/n,255*t/n,255*r/n,n]}},{key:"toArray01",value:function(){var e=this.r,t=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[e/n,t/n,r/n,n]}},{key:"toArray01PremultipliedAlpha",value:function(){return[this.r,this.g,this.b,this.a]}}],[{key:"parse",value:function(t){if(t){if(t instanceof e)return t;if("string"==typeof t){var r=zt(t);return r?new e(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3]):void 0}}}}]),e}();Nt.black=new Nt(0,0,0,1),Nt.white=new Nt(1,1,1,1),Nt.transparent=new Nt(0,0,0,0),Nt.red=new Nt(1,0,0,1),Nt.blue=new Nt(0,0,1,1);var Bt=Nt,Zt=function(){function e(t,r,n){f(this,e),this.sensitivity=t?r?"variant":"case":r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return p(e,[{key:"compare",value:function(e,t){return this.collator.compare(e,t)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),e}(),Ut=p((function e(t,r,n,i,a){f(this,e),this.text=t.normalize?t.normalize():t,this.image=r,this.scale=n,this.fontStack=i,this.textColor=a})),Vt=function(){function e(t){f(this,e),this.sections=t}return p(e,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")}},{key:"serialize",value:function(){var e,t=["format"],r=d(this.sections);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(n.image)t.push(["image",n.image.name]);else{t.push(n.text);var i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),n.textColor&&(i["text-color"]=["rgba"].concat(n.textColor.toArray())),t.push(i)}}}catch(a){r.e(a)}finally{r.f()}return t}}],[{key:"fromString",value:function(t){return new e([new Ut(t,null,null,null,null)])}},{key:"factory",value:function(t){return t instanceof e?t:e.fromString(t)}}]),e}(),Wt=function(){function e(t){f(this,e),this.name=t.name,this.available=t.available}return p(e,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(t){return t?new e({name:t,available:!1}):null}}]),e}();function Gt(e,t,r,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value [".concat([e,t,r,n].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Ht(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Bt)return!0;if(e instanceof Zt)return!0;if(e instanceof Vt)return!0;if(e instanceof Wt)return!0;if(Array.isArray(e)){var t,r=d(e);try{for(r.s();!(t=r.n()).done;)if(!Ht(t.value))return!1}catch(i){r.e(i)}finally{r.f()}return!0}if("object"==typeof e){for(var n in e)if(!Ht(e[n]))return!1;return!0}return!1}function Xt(e){if(null===e)return gt;if("string"==typeof e)return xt;if("boolean"==typeof e)return bt;if("number"==typeof e)return yt;if(e instanceof Bt)return _t;if(e instanceof Zt)return St;if(e instanceof Vt)return Ct;if(e instanceof Wt)return At;if(Array.isArray(e)){var t,r,n=e.length,i=d(e);try{for(i.s();!(r=i.n()).done;){var a=Xt(r.value);if(t){if(t===a)continue;t=kt;break}t=a}}catch(o){i.e(o)}finally{i.f()}return Tt(t||kt,n)}return wt}function Yt(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Bt||e instanceof Vt||e instanceof Wt?e.toString():JSON.stringify(e)}var qt=function(){function e(t,r){f(this,e),this.type=t,this.value=r}return p(e,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Bt?["rgba"].concat(this.value.toArray()):this.value instanceof Vt?this.value.serialize():this.value}}],[{key:"parse",value:function(t,r){if(2!==t.length)return r.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!Ht(t[1]))return r.error("invalid value");var n=t[1],i=Xt(n),a=r.expectedType;return"array"!==i.kind||0!==i.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(i=a),new e(i,n)}}]),e}(),$t=qt,Kt=function(){function e(t){f(this,e),this.name="ExpressionEvaluationError",this.message=t}return p(e,[{key:"toJSON",value:function(){return this.message}}]),e}(),Jt={string:xt,number:yt,boolean:bt,object:wt},Qt=function(){function e(t,r){f(this,e),this.type=t,this.args=r}return p(e,[{key:"evaluate",value:function(e){for(var t=0;t<this.args.length;t++){var r=this.args[t].evaluate(e);if(!It(this.type,Xt(r)))return r;if(t===this.args.length-1)throw new Kt("Expected value to be of type ".concat(Et(this.type),", but found ").concat(Et(Xt(r))," instead."))}return null}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=this.type,t=[e.kind];if("array"===e.kind){var r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){t.push(r.kind);var n=e.N;("number"==typeof n||this.args.length>1)&&t.push(n)}}return t.concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,r){if(t.length<2)return r.error("Expected at least one argument.");var n,i=1,a=t[0];if("array"===a){var o,s;if(t.length>2){var l=t[1];if("string"!=typeof l||!(l in Jt)||"object"===l)return r.error('The item type argument of "array" must be one of string, number, boolean',1);o=Jt[l],i++}else o=kt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return r.error('The length argument to "array" must be a positive integer literal',2);s=t[2],i++}n=Tt(o,s)}else n=Jt[a];for(var c=[];i<t.length;i++){var u=r.parse(t[i],i,kt);if(!u)return null;c.push(u)}return new e(n,c)}}]),e}(),er=Qt,tr=function(){function e(t){f(this,e),this.type=Ct,this.sections=t}return p(e,[{key:"evaluate",value:function(e){return new Vt(this.sections.map((function(t){var r=t.content.evaluate(e);return Xt(r)===At?new Ut("",r,null,null,null):new Ut(Yt(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}},{key:"eachChild",value:function(e){var t,r=d(this.sections);try{for(r.s();!(t=r.n()).done;){var n=t.value;e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}}catch(i){r.e(i)}finally{r.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e,t=["format"],r=d(this.sections);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(n.content.serialize());var i={};n.scale&&(i["font-scale"]=n.scale.serialize()),n.font&&(i["text-font"]=n.font.serialize()),n.textColor&&(i["text-color"]=n.textColor.serialize()),t.push(i)}}catch(a){r.e(a)}finally{r.f()}return t}}],[{key:"parse",value:function(t,r){if(t.length<2)return r.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return r.error("First argument must be an image or text section.");for(var i=[],a=!1,o=1;o<=t.length-1;++o){var s=t[o];if(a&&"object"==typeof s&&!Array.isArray(s)){a=!1;var l=null;if(s["font-scale"]&&!(l=r.parse(s["font-scale"],1,yt)))return null;var c=null;if(s["text-font"]&&!(c=r.parse(s["text-font"],1,Tt(xt))))return null;var u=null;if(s["text-color"]&&!(u=r.parse(s["text-color"],1,_t)))return null;var h=i[i.length-1];h.scale=l,h.font=c,h.textColor=u}else{var d=r.parse(t[o],1,kt);if(!d)return null;var f=d.type.kind;if("string"!==f&&"value"!==f&&"null"!==f&&"resolvedImage"!==f)return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,i.push({content:d,scale:null,font:null,textColor:null})}}return new e(i)}}]),e}(),rr=function(){function e(t){f(this,e),this.type=At,this.input=t}return p(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),r=Wt.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(t,r){if(2!==t.length)return r.error("Expected two arguments.");var n=r.parse(t[1],1,xt);return n?new e(n):r.error("No image name provided.")}}]),e}(),nr={"to-boolean":bt,"to-color":_t,"to-number":yt,"to-string":xt},ir=function(){function e(t,r){f(this,e),this.type=t,this.args=r}return p(e,[{key:"evaluate",value:function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){var t,r,n,i=d(this.args);try{for(i.s();!(n=i.n()).done;){if(t=n.value.evaluate(e),r=null,t instanceof Bt)return t;if("string"==typeof t){var a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&!(r=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):Gt(t[0],t[1],t[2],t[3])))return new Bt(t[0]/255,t[1]/255,t[2]/255,t[3])}}catch(u){i.e(u)}finally{i.f()}throw new Kt(r||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){var o,s=null,l=d(this.args);try{for(l.s();!(o=l.n()).done;){if(null===(s=o.value.evaluate(e)))return 0;var c=Number(s);if(!isNaN(c))return c}}catch(u){l.e(u)}finally{l.f()}throw new Kt("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?Vt.fromString(Yt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Wt.fromString(Yt(this.args[0].evaluate(e))):Yt(this.args[0].evaluate(e))}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new tr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new rr(this.args[0]).serialize();var e=["to-".concat(this.type.kind)];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,r){if(t.length<2)return r.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return r.error("Expected one argument.");for(var i=nr[n],a=[],o=1;o<t.length;o++){var s=r.parse(t[o],o,kt);if(!s)return null;a.push(s)}return new e(i,a)}}]),e}(),ar=ir,or=["Unknown","Point","LineString","Polygon"],sr=function(){function e(){f(this,e),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}return p(e,[{key:"id",value:function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?or[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"distanceFromCenter",value:function(){if(this.featureTileCoord&&this.featureDistanceData){var e=this.featureDistanceData.center,t=this.featureDistanceData.scale,r=this.featureTileCoord,n=r.x,i=r.y;return this.featureDistanceData.bearing[0]*(n*t-e[0])+this.featureDistanceData.bearing[1]*(i*t-e[1])}return 0}},{key:"parseColor",value:function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Bt.parse(e)),t}}]),e}(),lr=function(){function e(t,r,n,i){f(this,e),this.name=t,this.type=r,this._evaluate=n,this.args=i}return p(e,[{key:"evaluate",value:function(e){return this._evaluate(e,this.args)}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,r){var n,i=t[0],a=e.definitions[i];if(!a)return r.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0);var o,s=Array.isArray(a)?a[0]:a.type,l=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,c=l.filter((function(e){var r=h(e,1)[0];return!Array.isArray(r)||r.length===t.length-1})),f=null,p=d(c);try{for(p.s();!(o=p.n()).done;){var m=h(o.value,2),v=m[0],g=m[1];f=new Dr(r.registry,r.path,null,r.scope);for(var y=[],x=!1,b=1;b<t.length;b++){var _=t[b],w=Array.isArray(v)?v[b-1]:v.type,k=f.parse(_,1+y.length,w);if(!k){x=!0;break}y.push(k)}if(!x)if(Array.isArray(v)&&v.length!==y.length)f.error("Expected ".concat(v.length," arguments, but found ").concat(y.length," instead."));else{for(var S=0;S<y.length;S++){var C=Array.isArray(v)?v[S]:v.type,A=y[S];f.concat(S+1).checkSubtype(C,A.type)}if(0===f.errors.length)return new e(i,s,g,y)}}}catch(P){p.e(P)}finally{p.f()}if(1===c.length)(n=r.errors).push.apply(n,u(f.errors));else{for(var T=(c.length?c:l).map((function(e){var t;return t=h(e,1)[0],Array.isArray(t)?"(".concat(t.map(Et).join(", "),")"):"(".concat(Et(t.type),"...)")})).join(" | "),E=[],M=1;M<t.length;M++){var I=r.parse(t[M],1+E.length);if(!I)return null;E.push(Et(I.type))}r.error("Expected arguments of type ".concat(T,", but found (").concat(E.join(", "),") instead."))}return null}},{key:"register",value:function(t,r){for(var n in e.definitions=r,r)t[n]=e}}]),e}(),cr=lr,ur=function(){function e(t,r,n){f(this,e),this.type=St,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=r}return p(e,[{key:"evaluate",value:function(e){return new Zt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}},{key:"eachChild",value:function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}],[{key:"parse",value:function(t,r){if(2!==t.length)return r.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return r.error("Collator options argument must be an object.");var i=r.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,bt);if(!i)return null;var a=r.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,bt);if(!a)return null;var o=null;return n.locale&&!(o=r.parse(n.locale,1,xt))?null:new e(i,a,o)}}]),e}(),hr=8192;function dr(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function fr(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function pr(e,t){var r=(180+e[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(r*i*hr),Math.round(n*i*hr)]}function mr(e,t,r){var n=e[0]-t[0],i=e[1]-t[1],a=e[0]-r[0],o=e[1]-r[1];return n*o-a*i==0&&n*a<=0&&i*o<=0}function vr(e,t){for(var r,n,i,a=!1,o=0,s=t.length;o<s;o++)for(var l=t[o],c=0,u=l.length;c<u-1;c++){if(mr(e,l[c],l[c+1]))return!1;(n=l[c])[1]>(r=e)[1]!=(i=l[c+1])[1]>r[1]&&r[0]<(i[0]-n[0])*(r[1]-n[1])/(i[1]-n[1])+n[0]&&(a=!a)}return a}function gr(e,t){for(var r=0;r<t.length;r++)if(vr(e,t[r]))return!0;return!1}function yr(e,t,r,n){var i=n[0]-r[0],a=n[1]-r[1],o=(e[0]-r[0])*a-i*(e[1]-r[1]),s=(t[0]-r[0])*a-i*(t[1]-r[1]);return o>0&&s<0||o<0&&s>0}function xr(e,t,r){var n,i,a,o,s,l,c,u=d(r);try{for(u.s();!(n=u.n()).done;)for(var h=n.value,f=0;f<h.length-1;++f)if(0!=(l=[(s=h[f+1])[0]-(o=h[f])[0],s[1]-o[1]])[0]*(c=[(a=t)[0]-(i=e)[0],a[1]-i[1]])[1]-l[1]*c[0]&&yr(i,a,o,s)&&yr(o,s,i,a))return!0}catch(p){u.e(p)}finally{u.f()}return!1}function br(e,t){for(var r=0;r<e.length;++r)if(!vr(e[r],t))return!1;for(var n=0;n<e.length-1;++n)if(xr(e[n],e[n+1],t))return!1;return!0}function _r(e,t){for(var r=0;r<t.length;r++)if(br(e,t[r]))return!0;return!1}function wr(e,t,r){for(var n=[],i=0;i<e.length;i++){for(var a=[],o=0;o<e[i].length;o++){var s=pr(e[i][o],r);dr(t,s),a.push(s)}n.push(a)}return n}function kr(e,t,r){for(var n=[],i=0;i<e.length;i++){var a=wr(e[i],t,r);n.push(a)}return n}function Sr(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){var i=.5*n,a=e[0]-r[0]>i?-n:r[0]-e[0]>i?n:0;0===a&&(a=e[0]-r[2]>i?-n:r[2]-e[0]>i?n:0),e[0]+=a}dr(t,e)}function Cr(e,t,r,n){var i=Math.pow(2,n.z)*hr,a=[n.x*hr,n.y*hr],o=[];if(!e)return o;var s,l=d(e);try{for(l.s();!(s=l.n()).done;){var c,u=s.value,h=d(u);try{for(h.s();!(c=h.n()).done;){var f=c.value,p=[f.x+a[0],f.y+a[1]];Sr(p,t,r,i),o.push(p)}}catch(m){h.e(m)}finally{h.f()}}}catch(m){l.e(m)}finally{l.f()}return o}function Ar(e,t,r,n){var i=Math.pow(2,n.z)*hr,a=[n.x*hr,n.y*hr],o=[];if(!e)return o;var s,l,c=d(e);try{for(c.s();!(s=c.n()).done;){var u,h=s.value,f=[],p=d(h);try{for(p.s();!(u=p.n()).done;){var m=u.value,v=[m.x+a[0],m.y+a[1]];dr(t,v),f.push(v)}}catch(w){p.e(w)}finally{p.f()}o.push(f)}}catch(w){c.e(w)}finally{c.f()}if(t[2]-t[0]<=i/2){(l=t)[0]=l[1]=1/0,l[2]=l[3]=-1/0;var g,y=d(o);try{for(y.s();!(g=y.n()).done;){var x,b=g.value,_=d(b);try{for(_.s();!(x=_.n()).done;)Sr(x.value,t,r,i)}catch(w){_.e(w)}finally{_.f()}}}catch(w){y.e(w)}finally{y.f()}}return o}var Tr=function(){function e(t,r){f(this,e),this.type=bt,this.geojson=t,this.geometries=r}return p(e,[{key:"evaluate",value:function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){var a=wr(t.coordinates,n,i),o=Cr(e.geometry(),r,n,i);if(!fr(r,n))return!1;var s,l=d(o);try{for(l.s();!(s=l.n()).done;)if(!vr(s.value,a))return!1}catch(p){l.e(p)}finally{l.f()}}if("MultiPolygon"===t.type){var c=kr(t.coordinates,n,i),u=Cr(e.geometry(),r,n,i);if(!fr(r,n))return!1;var h,f=d(u);try{for(f.s();!(h=f.n()).done;)if(!gr(h.value,c))return!1}catch(p){f.e(p)}finally{f.f()}}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){var a=wr(t.coordinates,n,i),o=Ar(e.geometry(),r,n,i);if(!fr(r,n))return!1;var s,l=d(o);try{for(l.s();!(s=l.n()).done;)if(!br(s.value,a))return!1}catch(p){l.e(p)}finally{l.f()}}if("MultiPolygon"===t.type){var c=kr(t.coordinates,n,i),u=Ar(e.geometry(),r,n,i);if(!fr(r,n))return!1;var h,f=d(u);try{for(f.s();!(h=f.n()).done;)if(!_r(h.value,c))return!1}catch(p){f.e(p)}finally{f.f()}}return!0}(e,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(t,r){if(2!==t.length)return r.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(Ht(t[1])){var n=t[1];if("FeatureCollection"===n.type)for(var i=0;i<n.features.length;++i){var a=n.features[i].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new e(n,n.features[i].geometry)}else if("Feature"===n.type){var o=n.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new e(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new e(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),e}(),Er=Tr;function Mr(e){if(e instanceof cr){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Er)return!1;var t=!0;return e.eachChild((function(e){t&&!Mr(e)&&(t=!1)})),t}function Ir(e){if(e instanceof cr&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!Ir(e)&&(t=!1)})),t}function Pr(e,t){if(e instanceof cr&&t.indexOf(e.name)>=0)return!1;var r=!0;return e.eachChild((function(e){r&&!Pr(e,t)&&(r=!1)})),r}var Rr=function(){function e(t,r){f(this,e),this.type=r.type,this.name=t,this.boundExpression=r}return p(e,[{key:"evaluate",value:function(e){return this.boundExpression.evaluate(e)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(t,r){if(2!==t.length||"string"!=typeof t[1])return r.error("'var' expression requires exactly one string literal argument.");var n=t[1];return r.scope.has(n)?new e(n,r.scope.get(n)):r.error('Unknown variable "'.concat(n,'". Make sure "').concat(n,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),e}(),zr=Rr,Lr=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new vt,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];f(this,e),this.registry=t,this.path=r,this.key=r.map((function(e){return"[".concat(e,"]")})).join(""),this.scope=i,this.errors=a,this.expectedType=n}return p(e,[{key:"parse",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,r,n)._parse(e,i):this._parse(e,i)}},{key:"_parse",value:function(e,t){function r(e,t,r){return"assert"===r?new er(t,[e]):"coerce"===r?new ar(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=e[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found ".concat(typeof n,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var i=this.registry[n];if(i){var a=i.parse(e,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=r(a,o,t.typeAnnotation||"coerce");else a=r(a,o,t.typeAnnotation||"assert")}if(!(a instanceof $t)&&"resolvedImage"!==a.type.kind&&Or(a)){var l=new sr;try{a=new $t(a.type,a.evaluate(l))}catch(e){return this.error(e.message),null}}return a}return this.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}},{key:"concat",value:function(t,r,n){var i="number"==typeof t?this.path.concat(t):this.path,a=n?this.scope.concat(n):this.scope;return new e(this.registry,i,r||null,a,this.errors)}},{key:"error",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i="".concat(this.key).concat(r.map((function(e){return"[".concat(e,"]")})).join(""));this.errors.push(new pt(i,e))}},{key:"checkSubtype",value:function(e,t){var r=It(e,t);return r&&this.error(r),r}}]),e}(),Dr=Lr;function Or(e){if(e instanceof zr)return Or(e.boundExpression);if(e instanceof cr&&"error"===e.name)return!1;if(e instanceof ur)return!1;if(e instanceof Er)return!1;var t=e instanceof ar||e instanceof er,r=!0;return e.eachChild((function(e){r=t?r&&Or(e):r&&e instanceof $t})),!!r&&Mr(e)&&Pr(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Fr(e,t){for(var r,n,i=e.length-1,a=0,o=i,s=0;a<=o;)if(r=e[s=Math.floor((a+o)/2)],n=e[s+1],r<=t){if(s===i||t<n)return s;a=s+1}else{if(!(r>t))throw new Kt("Input is not a number.");o=s-1}return 0}var jr=function(){function e(t,r,n){f(this,e),this.type=t,this.input=r,this.labels=[],this.outputs=[];var i,a=d(n);try{for(a.s();!(i=a.n()).done;){var o=h(i.value,2),s=o[0],l=o[1];this.labels.push(s),this.outputs.push(l)}}catch(c){a.e(c)}finally{a.f()}}return p(e,[{key:"evaluate",value:function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);var i=t.length;return n>=t[i-1]?r[i-1].evaluate(e):r[Fr(t,n)].evaluate(e)}},{key:"eachChild",value:function(e){e(this.input);var t,r=d(this.outputs);try{for(r.s();!(t=r.n()).done;)e(t.value)}catch(n){r.e(n)}finally{r.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}],[{key:"parse",value:function(t,r){if(t.length-1<4)return r.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");var n=r.parse(t[1],1,yt);if(!n)return null;var i=[],a=null;r.expectedType&&"value"!==r.expectedType.kind&&(a=r.expectedType);for(var o=1;o<t.length;o+=2){var s=1===o?-1/0:t[o],l=t[o+1],c=o,u=o+1;if("number"!=typeof s)return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',c);if(i.length&&i[i.length-1][0]>=s)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',c);var h=r.parse(l,u,a);if(!h)return null;a=a||h.type,i.push([s,h])}return new e(a,n,i)}}]),e}(),Nr=jr;function Br(e,t,r){return e*(1-r)+t*r}var Zr=Object.freeze({__proto__:null,number:Br,color:function(e,t,r){return new Bt(Br(e.r,t.r,r),Br(e.g,t.g,r),Br(e.b,t.b,r),Br(e.a,t.a,r))},array:function(e,t,r){return e.map((function(e,n){return Br(e,t[n],r)}))}}),Ur=.95047,Vr=1.08883,Wr=4/29,Gr=6/29,Hr=3*Gr*Gr,Xr=Math.PI/180,Yr=180/Math.PI;function qr(e){return e>.008856451679035631?Math.pow(e,1/3):e/Hr+Wr}function $r(e){return e>Gr?e*e*e:Hr*(e-Wr)}function Kr(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Jr(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Qr(e){var t=Jr(e.r),r=Jr(e.g),n=Jr(e.b),i=qr((.4124564*t+.3575761*r+.1804375*n)/Ur),a=qr((.2126729*t+.7151522*r+.072175*n)/1);return{l:116*a-16,a:500*(i-a),b:200*(a-qr((.0193339*t+.119192*r+.9503041*n)/Vr)),alpha:e.a}}function en(e){var t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=1*$r(t),r=Ur*$r(r),n=Vr*$r(n),new Bt(Kr(3.2404542*r-1.5371385*t-.4985314*n),Kr(-.969266*r+1.8760108*t+.041556*n),Kr(.0556434*r-.2040259*t+1.0572252*n),e.alpha)}function tn(e,t,r){var n=t-e;return e+r*(n>180||n<-180?n-360*Math.round(n/360):n)}var rn={forward:Qr,reverse:en,interpolate:function(e,t,r){return{l:Br(e.l,t.l,r),a:Br(e.a,t.a,r),b:Br(e.b,t.b,r),alpha:Br(e.alpha,t.alpha,r)}}},nn={forward:function(e){var t=Qr(e),r=t.l,n=t.a,i=t.b,a=Math.atan2(i,n)*Yr;return{h:a<0?a+360:a,c:Math.sqrt(n*n+i*i),l:r,alpha:e.a}},reverse:function(e){var t=e.h*Xr,r=e.c;return en({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})},interpolate:function(e,t,r){return{h:tn(e.h,t.h,r),c:Br(e.c,t.c,r),l:Br(e.l,t.l,r),alpha:Br(e.alpha,t.alpha,r)}}},an=Object.freeze({__proto__:null,lab:rn,hcl:nn}),on=function(){function e(t,r,n,i,a){f(this,e),this.type=t,this.operator=r,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];var o,s=d(a);try{for(s.s();!(o=s.n()).done;){var l=h(o.value,2),c=l[0],u=l[1];this.labels.push(c),this.outputs.push(u)}}catch(p){s.e(p)}finally{s.f()}}return p(e,[{key:"evaluate",value:function(t){var r=this.labels,n=this.outputs;if(1===r.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=r[0])return n[0].evaluate(t);var a=r.length;if(i>=r[a-1])return n[a-1].evaluate(t);var o=Fr(r,i),s=e.interpolationFactor(this.interpolation,i,r[o],r[o+1]),l=n[o].evaluate(t),c=n[o+1].evaluate(t);return"interpolate"===this.operator?Zr[this.type.kind.toLowerCase()](l,c,s):"interpolate-hcl"===this.operator?nn.reverse(nn.interpolate(nn.forward(l),nn.forward(c),s)):rn.reverse(rn.interpolate(rn.forward(l),rn.forward(c),s))}},{key:"eachChild",value:function(e){e(this.input);var t,r=d(this.outputs);try{for(r.s();!(t=r.n()).done;)e(t.value)}catch(n){r.e(n)}finally{r.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t}}],[{key:"interpolationFactor",value:function(e,t,r,n){var i=0;if("exponential"===e.name)i=sn(t,e.base,r,n);else if("linear"===e.name)i=sn(t,1,r,n);else if("cubic-bezier"===e.name){var a=e.controlPoints;i=new A(a[0],a[1],a[2],a[3]).solve(sn(t,1,r,n))}return i}},{key:"parse",value:function(t,r){var n=c(t),i=n[0],a=n[1],o=n[2],s=n.slice(3);if(!Array.isArray(a)||0===a.length)return r.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var l=a[1];if("number"!=typeof l)return r.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:l}}else{if("cubic-bezier"!==a[0])return r.error("Unknown interpolation type ".concat(String(a[0])),1,0);var u=a.slice(1);if(4!==u.length||u.some((function(e){return"number"!=typeof e||e<0||e>1})))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:u}}if(t.length-1<4)return r.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(!(o=r.parse(o,2,yt)))return null;var h=[],d=null;"interpolate-hcl"===i||"interpolate-lab"===i?d=_t:r.expectedType&&"value"!==r.expectedType.kind&&(d=r.expectedType);for(var f=0;f<s.length;f+=2){var p=s[f],m=s[f+1],v=f+3,g=f+4;if("number"!=typeof p)return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(h.length&&h[h.length-1][0]>=p)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var y=r.parse(m,g,d);if(!y)return null;d=d||y.type,h.push([p,y])}return"number"===d.kind||"color"===d.kind||"array"===d.kind&&"number"===d.itemType.kind&&"number"==typeof d.N?new e(d,i,a,o,h):r.error("Type ".concat(Et(d)," is not interpolatable."))}}]),e}();function sn(e,t,r,n){var i=n-r,a=e-r;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}var ln=on,cn=function(){function e(t,r){f(this,e),this.type=t,this.args=r}return p(e,[{key:"evaluate",value:function(e){var t,r,n=null,i=0,a=d(this.args);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(i++,(n=o.evaluate(e))&&n instanceof Wt&&!n.available&&(t||(t=n),n=null,i===this.args.length))return t;if(null!==n)break}}catch(s){a.e(s)}finally{a.f()}return n}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,r){if(t.length<2)return r.error("Expectected at least one argument.");var n=null,i=r.expectedType;i&&"value"!==i.kind&&(n=i);var a,o=[],s=d(t.slice(1));try{for(s.s();!(a=s.n()).done;){var l=a.value,c=r.parse(l,1+o.length,n,void 0,{typeAnnotation:"omit"});if(!c)return null;n=n||c.type,o.push(c)}}catch(h){s.e(h)}finally{s.f()}var u=i&&o.some((function(e){return It(i,e.type)}));return new e(u?kt:n,o)}}]),e}(),un=cn,hn=function(){function e(t,r){f(this,e),this.type=r.type,this.bindings=[].concat(t),this.result=r}return p(e,[{key:"evaluate",value:function(e){return this.result.evaluate(e)}},{key:"eachChild",value:function(e){var t,r=d(this.bindings);try{for(r.s();!(t=r.n()).done;)e(t.value[1])}catch(n){r.e(n)}finally{r.f()}e(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var e,t=["let"],r=d(this.bindings);try{for(r.s();!(e=r.n()).done;){var n=h(e.value,2),i=n[0],a=n[1];t.push(i,a.serialize())}}catch(o){r.e(o)}finally{r.f()}return t.push(this.result.serialize()),t}}],[{key:"parse",value:function(t,r){if(t.length<4)return r.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));for(var n=[],i=1;i<t.length-1;i+=2){var a=t[i];if("string"!=typeof a)return r.error("Expected string, but found ".concat(typeof a," instead."),i);if(/[^a-zA-Z0-9_]/.test(a))return r.error("Variable names must contain only alphanumeric characters or '_'.",i);var o=r.parse(t[i+1],i+1);if(!o)return null;n.push([a,o])}var s=r.parse(t[t.length-1],t.length-1,r.expectedType,n);return s?new e(n,s):null}}]),e}(),dn=hn,fn=function(){function e(t,r,n){f(this,e),this.type=t,this.index=r,this.input=n}return p(e,[{key:"evaluate",value:function(e){var t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new Kt("Array index out of bounds: ".concat(t," < 0."));if(t>=r.length)throw new Kt("Array index out of bounds: ".concat(t," > ").concat(r.length-1,"."));if(t!==Math.floor(t))throw new Kt("Array index must be an integer, but found ".concat(t," instead."));return r[t]}},{key:"eachChild",value:function(e){e(this.index),e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(t,r){if(3!==t.length)return r.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var n=r.parse(t[1],1,yt),i=r.parse(t[2],2,Tt(r.expectedType||kt));return n&&i?new e(i.type.itemType,n,i):null}}]),e}(),pn=fn,mn=function(){function e(t,r){f(this,e),this.type=bt,this.needle=t,this.haystack=r}return p(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(null==r)return!1;if(!Rt(t,["boolean","string","number","null"]))throw new Kt("Expected first argument to be of type boolean, string, number or null, but found ".concat(Et(Xt(t))," instead."));if(!Rt(r,["string","array"]))throw new Kt("Expected second argument to be of type array or string, but found ".concat(Et(Xt(r))," instead."));return r.indexOf(t)>=0}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,r){if(3!==t.length)return r.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var n=r.parse(t[1],1,kt),i=r.parse(t[2],2,kt);return n&&i?Pt(n.type,[bt,xt,yt,gt,kt])?new e(n,i):r.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Et(n.type)," instead")):null}}]),e}(),vn=mn,gn=function(){function e(t,r,n){f(this,e),this.type=yt,this.needle=t,this.haystack=r,this.fromIndex=n}return p(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!Rt(t,["boolean","string","number","null"]))throw new Kt("Expected first argument to be of type boolean, string, number or null, but found ".concat(Et(Xt(t))," instead."));if(!Rt(r,["string","array"]))throw new Kt("Expected second argument to be of type array or string, but found ".concat(Et(Xt(r))," instead."));if(this.fromIndex){var n=this.fromIndex.evaluate(e);return r.indexOf(t,n)}return r.indexOf(t)}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,r){if(t.length<=2||t.length>=5)return r.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var n=r.parse(t[1],1,kt),i=r.parse(t[2],2,kt);if(!n||!i)return null;if(!Pt(n.type,[bt,xt,yt,gt,kt]))return r.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Et(n.type)," instead"));if(4===t.length){var a=r.parse(t[3],3,yt);return a?new e(n,i,a):null}return new e(n,i)}}]),e}(),yn=gn,xn=function(){function e(t,r,n,i,a,o){f(this,e),this.inputType=t,this.type=r,this.input=n,this.cases=i,this.outputs=a,this.otherwise=o}return p(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);return(Xt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}},{key:"eachChild",value:function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e,t=this,r=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),i=[],a={},o=d(n);try{for(o.s();!(e=o.n()).done;){var s=e.value,l=a[this.cases[s]];void 0===l?(a[this.cases[s]]=i.length,i.push([this.cases[s],[s]])):i[l][1].push(s)}}catch(g){o.e(g)}finally{o.f()}for(var c=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,f=i;u<f.length;u++){var p=h(f[u],2),m=p[0],v=p[1];r.push(1===v.length?c(v[0]):v.map(c)),r.push(this.outputs[m].serialize())}return r.push(this.otherwise.serialize()),r}}],[{key:"parse",value:function(t,r){if(t.length<5)return r.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return r.error("Expected an even number of arguments.");var n,i;r.expectedType&&"value"!==r.expectedType.kind&&(i=r.expectedType);for(var a={},o=[],s=2;s<t.length-1;s+=2){var l=t[s],c=t[s+1];Array.isArray(l)||(l=[l]);var u=r.concat(s);if(0===l.length)return u.error("Expected at least one branch label.");var h,f=d(l);try{for(f.s();!(h=f.n()).done;){var p=h.value;if("number"!=typeof p&&"string"!=typeof p)return u.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof p&&Math.floor(p)!==p)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,Xt(p)))return null}else n=Xt(p);if(void 0!==a[String(p)])return u.error("Branch labels must be unique.");a[String(p)]=o.length}}catch(y){f.e(y)}finally{f.f()}var m=r.parse(c,s,i);if(!m)return null;i=i||m.type,o.push(m)}var v=r.parse(t[1],1,kt);if(!v)return null;var g=r.parse(t[t.length-1],t.length-1,i);return g?"value"!==v.type.kind&&r.concat(1).checkSubtype(n,v.type)?null:new e(n,i,v,a,o,g):null}}]),e}(),bn=xn,_n=function(){function e(t,r,n){f(this,e),this.type=t,this.branches=r,this.otherwise=n}return p(e,[{key:"evaluate",value:function(e){var t,r=d(this.branches);try{for(r.s();!(t=r.n()).done;){var n=h(t.value,2),i=n[0],a=n[1];if(i.evaluate(e))return a.evaluate(e)}}catch(o){r.e(o)}finally{r.f()}return this.otherwise.evaluate(e)}},{key:"eachChild",value:function(e){var t,r=d(this.branches);try{for(r.s();!(t=r.n()).done;){var n=h(t.value,2),i=n[0],a=n[1];e(i),e(a)}}catch(o){r.e(o)}finally{r.f()}e(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(e){var t=h(e,2);return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,r){if(t.length<4)return r.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return r.error("Expected an odd number of arguments.");var n;r.expectedType&&"value"!==r.expectedType.kind&&(n=r.expectedType);for(var i=[],a=1;a<t.length-1;a+=2){var o=r.parse(t[a],a,bt);if(!o)return null;var s=r.parse(t[a+1],a+1,n);if(!s)return null;i.push([o,s]),n=n||s.type}var l=r.parse(t[t.length-1],t.length-1,n);return l?new e(n,i,l):null}}]),e}(),wn=_n,kn=function(){function e(t,r,n,i){f(this,e),this.type=t,this.input=r,this.beginIndex=n,this.endIndex=i}return p(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!Rt(t,["string","array"]))throw new Kt("Expected first argument to be of type array or string, but found ".concat(Et(Xt(t))," instead."));if(this.endIndex){var n=this.endIndex.evaluate(e);return t.slice(r,n)}return t.slice(r)}},{key:"eachChild",value:function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(t,r){if(t.length<=2||t.length>=5)return r.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var n=r.parse(t[1],1,kt),i=r.parse(t[2],2,yt);if(!n||!i)return null;if(!Pt(n.type,[Tt(kt),xt,kt]))return r.error("Expected first argument to be of type array or string, but found ".concat(Et(n.type)," instead"));if(4===t.length){var a=r.parse(t[3],3,yt);return a?new e(n.type,n,i,a):null}return new e(n.type,n,i)}}]),e}(),Sn=kn;function Cn(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function An(e,t,r,n){return 0===n.compare(t,r)}function Tn(e,t,r){var n="=="!==e&&"!="!==e;return function(){function i(e,t,r){f(this,i),this.type=bt,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return p(i,[{key:"evaluate",value:function(i){var a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){var s=Xt(a),l=Xt(o);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new Kt('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(l.kind,") instead."))}if(this.collator&&!n&&this.hasUntypedArgument){var c=Xt(a),u=Xt(o);if("string"!==c.kind||"string"!==u.kind)return t(i,a,o)}return this.collator?r(i,a,o,this.collator.evaluate(i)):t(i,a,o)}},{key:"eachChild",value:function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var r=e[0],a=t.parse(e[1],1,kt);if(!a)return null;if(!Cn(r,a.type))return t.concat(1).error('"'.concat(r,"\" comparisons are not supported for type '").concat(Et(a.type),"'."));var o=t.parse(e[2],2,kt);if(!o)return null;if(!Cn(r,o.type))return t.concat(2).error('"'.concat(r,"\" comparisons are not supported for type '").concat(Et(o.type),"'."));if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '".concat(Et(a.type),"' and '").concat(Et(o.type),"'."));n&&("value"===a.type.kind&&"value"!==o.type.kind?a=new er(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new er(a.type,[o])));var s=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,St)))return null}return new i(a,o,s)}}]),i}()}var En=Tn("==",(function(e,t,r){return t===r}),An),Mn=Tn("!=",(function(e,t,r){return t!==r}),(function(e,t,r,n){return!An(0,t,r,n)})),In=Tn("<",(function(e,t,r){return t<r}),(function(e,t,r,n){return n.compare(t,r)<0})),Pn=Tn(">",(function(e,t,r){return t>r}),(function(e,t,r,n){return n.compare(t,r)>0})),Rn=Tn("<=",(function(e,t,r){return t<=r}),(function(e,t,r,n){return n.compare(t,r)<=0})),zn=Tn(">=",(function(e,t,r){return t>=r}),(function(e,t,r,n){return n.compare(t,r)>=0})),Ln=function(){function e(t,r,n,i,a,o){f(this,e),this.type=xt,this.number=t,this.locale=r,this.currency=n,this.unit=i,this.minFractionDigits=a,this.maxFractionDigits=o}return p(e,[{key:"evaluate",value:function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}},{key:"eachChild",value:function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}],[{key:"parse",value:function(t,r){if(3!==t.length)return r.error("Expected two arguments.");var n=r.parse(t[1],1,yt);if(!n)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return r.error("NumberFormat options argument must be an object.");var a=null;if(i.locale&&!(a=r.parse(i.locale,1,xt)))return null;var o=null;if(i.currency&&!(o=r.parse(i.currency,1,xt)))return null;var s=null;if(i.unit&&!(s=r.parse(i.unit,1,xt)))return null;var l=null;if(i["min-fraction-digits"]&&!(l=r.parse(i["min-fraction-digits"],1,yt)))return null;var c=null;return i["max-fraction-digits"]&&!(c=r.parse(i["max-fraction-digits"],1,yt))?null:new e(n,a,o,s,l,c)}}]),e}(),Dn=function(){function e(t){f(this,e),this.type=yt,this.input=t}return p(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Kt("Expected value to be of type string or array, but found ".concat(Et(Xt(t))," instead."))}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,r){if(2!==t.length)return r.error("Expected 1 argument, but found ".concat(t.length-1," instead."));var n=r.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?r.error("Expected argument of type string or array, but found ".concat(Et(n.type)," instead.")):new e(n):null}}]),e}(),On={"==":En,"!=":Mn,">":Pn,"<":In,">=":zn,"<=":Rn,array:er,at:pn,boolean:er,case:wn,coalesce:un,collator:ur,format:tr,image:rr,in:vn,"index-of":yn,interpolate:ln,"interpolate-hcl":ln,"interpolate-lab":ln,length:Dn,let:dn,literal:$t,match:bn,number:er,"number-format":Ln,object:er,slice:Sn,step:Nr,string:er,"to-boolean":ar,"to-color":ar,"to-number":ar,"to-string":ar,var:zr,within:Er};function Fn(e,t){var r=h(t,4),n=r[0],i=r[1],a=r[2],o=r[3];n=n.evaluate(e),i=i.evaluate(e),a=a.evaluate(e);var s=o?o.evaluate(e):1,l=Gt(n,i,a,s);if(l)throw new Kt(l);return new Bt(n/255*s,i/255*s,a/255*s,s)}function jn(e,t){return e in t}function Nn(e,t){var r=t[e];return void 0===r?null:r}function Bn(e){return{type:e}}cr.register(On,{error:[{kind:"error"},[xt],function(e,t){var r=h(t,1)[0];throw new Kt(r.evaluate(e))}],typeof:[xt,[kt],function(e,t){return Et(Xt(h(t,1)[0].evaluate(e)))}],"to-rgba":[Tt(yt,4),[_t],function(e,t){return h(t,1)[0].evaluate(e).toArray()}],rgb:[_t,[yt,yt,yt],Fn],rgba:[_t,[yt,yt,yt,yt],Fn],has:{type:bt,overloads:[[[xt],function(e,t){return jn(h(t,1)[0].evaluate(e),e.properties())}],[[xt,wt],function(e,t){var r=h(t,2),n=r[0],i=r[1];return jn(n.evaluate(e),i.evaluate(e))}]]},get:{type:kt,overloads:[[[xt],function(e,t){return Nn(h(t,1)[0].evaluate(e),e.properties())}],[[xt,wt],function(e,t){var r=h(t,2),n=r[0],i=r[1];return Nn(n.evaluate(e),i.evaluate(e))}]]},"feature-state":[kt,[xt],function(e,t){return Nn(h(t,1)[0].evaluate(e),e.featureState||{})}],properties:[wt,[],function(e){return e.properties()}],"geometry-type":[xt,[],function(e){return e.geometryType()}],id:[kt,[],function(e){return e.id()}],zoom:[yt,[],function(e){return e.globals.zoom}],pitch:[yt,[],function(e){return e.globals.pitch||0}],"distance-from-center":[yt,[],function(e){return e.distanceFromCenter()}],"heatmap-density":[yt,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[yt,[],function(e){return e.globals.lineProgress||0}],"sky-radial-progress":[yt,[],function(e){return e.globals.skyRadialProgress||0}],accumulated:[kt,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[yt,Bn(yt),function(e,t){var r,n=0,i=d(t);try{for(i.s();!(r=i.n()).done;)n+=r.value.evaluate(e)}catch(a){i.e(a)}finally{i.f()}return n}],"*":[yt,Bn(yt),function(e,t){var r,n=1,i=d(t);try{for(i.s();!(r=i.n()).done;)n*=r.value.evaluate(e)}catch(a){i.e(a)}finally{i.f()}return n}],"-":{type:yt,overloads:[[[yt,yt],function(e,t){var r=h(t,2),n=r[0],i=r[1];return n.evaluate(e)-i.evaluate(e)}],[[yt],function(e,t){return-h(t,1)[0].evaluate(e)}]]},"/":[yt,[yt,yt],function(e,t){var r=h(t,2),n=r[0],i=r[1];return n.evaluate(e)/i.evaluate(e)}],"%":[yt,[yt,yt],function(e,t){var r=h(t,2),n=r[0],i=r[1];return n.evaluate(e)%i.evaluate(e)}],ln2:[yt,[],function(){return Math.LN2}],pi:[yt,[],function(){return Math.PI}],e:[yt,[],function(){return Math.E}],"^":[yt,[yt,yt],function(e,t){var r=h(t,2),n=r[0],i=r[1];return Math.pow(n.evaluate(e),i.evaluate(e))}],sqrt:[yt,[yt],function(e,t){var r=h(t,1)[0];return Math.sqrt(r.evaluate(e))}],log10:[yt,[yt],function(e,t){var r=h(t,1)[0];return Math.log(r.evaluate(e))/Math.LN10}],ln:[yt,[yt],function(e,t){var r=h(t,1)[0];return Math.log(r.evaluate(e))}],log2:[yt,[yt],function(e,t){var r=h(t,1)[0];return Math.log(r.evaluate(e))/Math.LN2}],sin:[yt,[yt],function(e,t){var r=h(t,1)[0];return Math.sin(r.evaluate(e))}],cos:[yt,[yt],function(e,t){var r=h(t,1)[0];return Math.cos(r.evaluate(e))}],tan:[yt,[yt],function(e,t){var r=h(t,1)[0];return Math.tan(r.evaluate(e))}],asin:[yt,[yt],function(e,t){var r=h(t,1)[0];return Math.asin(r.evaluate(e))}],acos:[yt,[yt],function(e,t){var r=h(t,1)[0];return Math.acos(r.evaluate(e))}],atan:[yt,[yt],function(e,t){var r=h(t,1)[0];return Math.atan(r.evaluate(e))}],min:[yt,Bn(yt),function(e,t){return Math.min.apply(Math,u(t.map((function(t){return t.evaluate(e)}))))}],max:[yt,Bn(yt),function(e,t){return Math.max.apply(Math,u(t.map((function(t){return t.evaluate(e)}))))}],abs:[yt,[yt],function(e,t){var r=h(t,1)[0];return Math.abs(r.evaluate(e))}],round:[yt,[yt],function(e,t){var r=h(t,1)[0].evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[yt,[yt],function(e,t){var r=h(t,1)[0];return Math.floor(r.evaluate(e))}],ceil:[yt,[yt],function(e,t){var r=h(t,1)[0];return Math.ceil(r.evaluate(e))}],"filter-==":[bt,[xt,kt],function(e,t){var r=h(t,2),n=r[0],i=r[1];return e.properties()[n.value]===i.value}],"filter-id-==":[bt,[kt],function(e,t){var r=h(t,1)[0];return e.id()===r.value}],"filter-type-==":[bt,[xt],function(e,t){var r=h(t,1)[0];return e.geometryType()===r.value}],"filter-<":[bt,[xt,kt],function(e,t){var r=h(t,2),n=r[0],i=r[1],a=e.properties()[n.value],o=i.value;return typeof a==typeof o&&a<o}],"filter-id-<":[bt,[kt],function(e,t){var r=h(t,1)[0],n=e.id(),i=r.value;return typeof n==typeof i&&n<i}],"filter->":[bt,[xt,kt],function(e,t){var r=h(t,2),n=r[0],i=r[1],a=e.properties()[n.value],o=i.value;return typeof a==typeof o&&a>o}],"filter-id->":[bt,[kt],function(e,t){var r=h(t,1)[0],n=e.id(),i=r.value;return typeof n==typeof i&&n>i}],"filter-<=":[bt,[xt,kt],function(e,t){var r=h(t,2),n=r[0],i=r[1],a=e.properties()[n.value],o=i.value;return typeof a==typeof o&&a<=o}],"filter-id-<=":[bt,[kt],function(e,t){var r=h(t,1)[0],n=e.id(),i=r.value;return typeof n==typeof i&&n<=i}],"filter->=":[bt,[xt,kt],function(e,t){var r=h(t,2),n=r[0],i=r[1],a=e.properties()[n.value],o=i.value;return typeof a==typeof o&&a>=o}],"filter-id->=":[bt,[kt],function(e,t){var r=h(t,1)[0],n=e.id(),i=r.value;return typeof n==typeof i&&n>=i}],"filter-has":[bt,[kt],function(e,t){return h(t,1)[0].value in e.properties()}],"filter-has-id":[bt,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[bt,[Tt(xt)],function(e,t){return h(t,1)[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[bt,[Tt(kt)],function(e,t){return h(t,1)[0].value.indexOf(e.id())>=0}],"filter-in-small":[bt,[xt,Tt(kt)],function(e,t){var r=h(t,2),n=r[0];return r[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[bt,[xt,Tt(kt)],function(e,t){var r=h(t,2),n=r[0],i=r[1];return function(e,t,r,n){for(;r<=n;){var i=r+n>>1;if(t[i]===e)return!0;t[i]>e?n=i-1:r=i+1}return!1}(e.properties()[n.value],i.value,0,i.value.length-1)}],all:{type:bt,overloads:[[[bt,bt],function(e,t){var r=h(t,2),n=r[0],i=r[1];return n.evaluate(e)&&i.evaluate(e)}],[Bn(bt),function(e,t){var r,n=d(t);try{for(n.s();!(r=n.n()).done;)if(!r.value.evaluate(e))return!1}catch(i){n.e(i)}finally{n.f()}return!0}]]},any:{type:bt,overloads:[[[bt,bt],function(e,t){var r=h(t,2),n=r[0],i=r[1];return n.evaluate(e)||i.evaluate(e)}],[Bn(bt),function(e,t){var r,n=d(t);try{for(n.s();!(r=n.n()).done;)if(r.value.evaluate(e))return!0}catch(i){n.e(i)}finally{n.f()}return!1}]]},"!":[bt,[bt],function(e,t){return!h(t,1)[0].evaluate(e)}],"is-supported-script":[bt,[xt],function(e,t){var r=h(t,1)[0],n=e.globals&&e.globals.isSupportedScript;return!n||n(r.evaluate(e))}],upcase:[xt,[xt],function(e,t){return h(t,1)[0].evaluate(e).toUpperCase()}],downcase:[xt,[xt],function(e,t){return h(t,1)[0].evaluate(e).toLowerCase()}],concat:[xt,Bn(kt),function(e,t){return t.map((function(t){return Yt(t.evaluate(e))})).join("")}],"resolved-locale":[xt,[St],function(e,t){return h(t,1)[0].evaluate(e).resolvedLocale()}]});var Zn=On;function Un(e){return{result:"success",value:e}}function Vn(e){return{result:"error",value:e}}function Wn(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Gn(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Hn(e){return!!e.expression&&e.expression.interpolated}function Xn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Yn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function qn(e){return e}function $n(e,t){var r,n,i,a="color"===t.type,o=e.stops&&"object"==typeof e.stops[0][0],s=o||!(o||void 0!==e.property),l=e.type||(Hn(t)?"exponential":"interval");if(a&&((e=ut({},e)).stops&&(e.stops=e.stops.map((function(e){return[e[0],Bt.parse(e[1])]}))),e.default=Bt.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!an[e.colorSpace])throw new Error("Unknown color space: ".concat(e.colorSpace));if("exponential"===l)r=ei;else if("interval"===l)r=Qn;else if("categorical"===l){r=Jn,n=Object.create(null);var c,u=d(e.stops);try{for(u.s();!(c=u.n()).done;){var h=c.value;n[h[0]]=h[1]}}catch(S){u.e(S)}finally{u.f()}i=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'.concat(l,'"'));r=ti}if(o){for(var f={},p=[],m=0;m<e.stops.length;m++){var v=e.stops[m],g=v[0].zoom;void 0===f[g]&&(f[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},p.push(g)),f[g].stops.push([v[0].value,v[1]])}for(var y=[],x=0,b=p;x<b.length;x++){var _=b[x];y.push([f[_].zoom,$n(f[_],t)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:ln.interpolationFactor.bind(void 0,w),zoomStops:y.map((function(e){return e[0]})),evaluate:function(r,n){var i=r.zoom;return ei({stops:y,base:e.base},t,i).evaluate(i,n)}}}if(s){var k="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:ln.interpolationFactor.bind(void 0,k),zoomStops:e.stops.map((function(e){return e[0]})),evaluate:function(a){var o=a.zoom;return r(e,t,o,n,i)}}}return{kind:"source",evaluate:function(a,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?Kn(e.default,t.default):r(e,t,s,n,i)}}}function Kn(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function Jn(e,t,r,n,i){return Kn(typeof r===i?n[r]:void 0,e.default,t.default)}function Qn(e,t,r){if("number"!==Xn(r))return Kn(e.default,t.default);var n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];var i=Fr(e.stops.map((function(e){return e[0]})),r);return e.stops[i][1]}function ei(e,t,r){var n=void 0!==e.base?e.base:1;if("number"!==Xn(r))return Kn(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[i-1][0])return e.stops[i-1][1];var a=Fr(e.stops.map((function(e){return e[0]})),r),o=function(e,t,r,n){var i=n-r,a=e-r;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}(r,n,e.stops[a][0],e.stops[a+1][0]),s=e.stops[a][1],l=e.stops[a+1][1],c=Zr[t.type]||qn;if(e.colorSpace&&"rgb"!==e.colorSpace){var u=an[e.colorSpace];c=function(e,t){return u.reverse(u.interpolate(u.forward(e),u.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=s.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==i)return c(n,i,o)}}:c(s,l,o)}function ti(e,t,r){return"color"===t.type?r=Bt.parse(r):"formatted"===t.type?r=Vt.fromString(r.toString()):"resolvedImage"===t.type?r=Wt.fromString(r.toString()):Xn(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0),Kn(r,e.default,t.default)}var ri=function(){function e(t,r){f(this,e),this.expression=t,this._warningHistory={},this._evaluator=new sr,this._defaultValue=r?function(e){return"color"===e.type&&(Yn(e.default)||Array.isArray(e.default))?new Bt(0,0,0,0):"color"===e.type?Bt.parse(e.default)||null:void 0===e.default?null:e.default}(r):null,this._enumValues=r&&"enum"===r.type?r.values:null}return p(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,r,n,i,a,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(e,t,r,n,i,a,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null;try{var l=this.expression.evaluate(this._evaluator);if(null==l||"number"==typeof l&&l!=l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new Kt("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", "),", but found ").concat(JSON.stringify(l)," instead."));return l}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}]),e}();function ni(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Zn}function ii(e,t){var r=new Dr(Zn,[],t?function(e){var t={color:_t,string:xt,number:yt,enum:xt,boolean:bt,formatted:Ct,resolvedImage:At};return"array"===e.type?Tt(t[e.value]||kt,e.length):t[e.type]}(t):void 0),n=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?Un(new ri(n,t)):Vn(r.errors)}var ai=function(){function e(t,r){f(this,e),this.kind=t,this._styleExpression=r,this.isStateDependent="constant"!==t&&!Ir(r.expression)}return p(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,r,n,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,i,a)}},{key:"evaluate",value:function(e,t,r,n,i,a){return this._styleExpression.evaluate(e,t,r,n,i,a)}}]),e}(),oi=function(){function e(t,r,n,i){f(this,e),this.kind=t,this.zoomStops=n,this._styleExpression=r,this.isStateDependent="camera"!==t&&!Ir(r.expression),this.interpolationType=i}return p(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,r,n,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,i,a)}},{key:"evaluate",value:function(e,t,r,n,i,a){return this._styleExpression.evaluate(e,t,r,n,i,a)}},{key:"interpolationFactor",value:function(e,t,r){return this.interpolationType?ln.interpolationFactor(this.interpolationType,e,t,r):0}}]),e}();function si(e,t){if("error"===(e=ii(e,t)).result)return e;var r=e.value.expression,n=Mr(r);if(!n&&!Wn(t))return Vn([new pt("","data expressions not supported")]);var i=Pr(r,["zoom","pitch","distance-from-center"]);if(!i&&!Gn(t))return Vn([new pt("","zoom expressions not supported")]);var a=ci(r);return a||i?a instanceof pt?Vn([a]):a instanceof ln&&!Hn(t)?Vn([new pt("",'"interpolate" expressions cannot be used with this property')]):Un(a?new oi(n?"camera":"composite",e.value,a.labels,a instanceof ln?a.interpolation:void 0):new ai(n?"constant":"source",e.value)):Vn([new pt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var li=function(){function e(t,r){f(this,e),this._parameters=t,this._specification=r,ut(this,$n(this._parameters,this._specification))}return p(e,null,[{key:"deserialize",value:function(t){return new e(t._parameters,t._specification)}},{key:"serialize",value:function(e){return{_parameters:e._parameters,_specification:e._specification}}}]),e}();function ci(e){var t=null;if(e instanceof dn)t=ci(e.result);else if(e instanceof un){var r,n=d(e.args);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(t=ci(i))break}}catch(a){n.e(a)}finally{n.f()}}else(e instanceof Nr||e instanceof ln)&&e.input instanceof cr&&"zoom"===e.input.name&&(t=e);return t instanceof pt||e.eachChild((function(e){var r=ci(e);r instanceof pt?t=r:!t&&r?t=new pt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new pt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}var ui=p((function e(t,r,n,i){f(this,e),this.message=(t?"".concat(t,": "):"")+n,i&&(this.identifier=i),null!=r&&r.__line__&&(this.line=r.__line__)}));function hi(e){var t=e.key,r=e.value,n=e.valueSpec||{},i=e.objectElementValidators||{},a=e.style,o=e.styleSpec,s=[],l=Xn(r);if("object"!==l)return[new ui(t,r,"object expected, ".concat(l," found"))];for(var c in r){var u=c.split(".")[0],h=n[u]||n["*"],d=void 0;i[u]?d=i[u]:n[u]?d=Wi:i["*"]?d=i["*"]:n["*"]&&(d=Wi),d?s=s.concat(d({key:(t?"".concat(t,"."):t)+c,value:r[c],valueSpec:h,style:a,styleSpec:o,object:r,objectKey:c},r)):s.push(new ui(t,r[c],'unknown property "'.concat(c,'"')))}for(var f in n)i[f]||n[f].required&&void 0===n[f].default&&void 0===r[f]&&s.push(new ui(t,r,'missing required property "'.concat(f,'"')));return s}function di(e){var t=e.value,r=e.valueSpec,n=e.style,i=e.styleSpec,a=e.key,o=e.arrayElementValidator||Wi;if("array"!==Xn(t))return[new ui(a,t,"array expected, ".concat(Xn(t)," found"))];if(r.length&&t.length!==r.length)return[new ui(a,t,"array length ".concat(r.length," expected, length ").concat(t.length," found"))];if(r["min-length"]&&t.length<r["min-length"])return[new ui(a,t,"array length at least ".concat(r["min-length"]," expected, length ").concat(t.length," found"))];var s={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};i.$version<7&&(s.function=r.function),"object"===Xn(r.value)&&(s=r.value);for(var l=[],c=0;c<t.length;c++)l=l.concat(o({array:t,arrayIndex:c,value:t[c],valueSpec:s,style:n,styleSpec:i,key:"".concat(a,"[").concat(c,"]")}));return l}function fi(e){var t=e.key,r=e.value,n=e.valueSpec,i=Xn(r);if("number"===i&&r!=r&&(i="NaN"),"number"!==i)return[new ui(t,r,"number expected, ".concat(i," found"))];if("minimum"in n){var a=n.minimum;if("array"===Xn(n.minimum)&&(a=n.minimum[e.arrayIndex]),r<a)return[new ui(t,r,"".concat(r," is less than the minimum value ").concat(a))]}if("maximum"in n){var o=n.maximum;if("array"===Xn(n.maximum)&&(o=n.maximum[e.arrayIndex]),r>o)return[new ui(t,r,"".concat(r," is greater than the maximum value ").concat(o))]}return[]}function pi(e){var t,r,n,i=e.valueSpec,a=ht(e.value.type),o={},s="categorical"!==a&&void 0===e.value.property,l=!s,c="array"===Xn(e.value.stops)&&"array"===Xn(e.value.stops[0])&&"object"===Xn(e.value.stops[0][0]),u=hi({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===a)return[new ui(e.key,e.value,'identity function may not have a "stops" property')];var t=[],r=e.value;return t=t.concat(di({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Xn(r)&&0===r.length&&t.push(new ui(e.key,r,"array must have at least one stop")),t},default:function(e){return Wi({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===a&&s&&u.push(new ui(e.key,e.value,'missing required property "property"')),"identity"===a||e.value.stops||u.push(new ui(e.key,e.value,'missing required property "stops"')),"exponential"===a&&e.valueSpec.expression&&!Hn(e.valueSpec)&&u.push(new ui(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Wn(e.valueSpec)?u.push(new ui(e.key,e.value,"property functions not supported")):s&&!Gn(e.valueSpec)&&u.push(new ui(e.key,e.value,"zoom functions not supported"))),"categorical"!==a&&!c||void 0!==e.value.property||u.push(new ui(e.key,e.value,'"property" property is required')),u;function h(e){var t=[],a=e.value,s=e.key;if("array"!==Xn(a))return[new ui(s,a,"array expected, ".concat(Xn(a)," found"))];if(2!==a.length)return[new ui(s,a,"array length 2 expected, length ".concat(a.length," found"))];if(c){if("object"!==Xn(a[0]))return[new ui(s,a,"object expected, ".concat(Xn(a[0])," found"))];if(void 0===a[0].zoom)return[new ui(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new ui(s,a,"object stop key must have value")];var l=ht(a[0].zoom);if("number"!=typeof l)return[new ui(s,a[0].zoom,"stop zoom values must be numbers")];if(n&&n>l)return[new ui(s,a[0].zoom,"stop zoom values must appear in ascending order")];l!==n&&(n=l,r=void 0,o={}),t=t.concat(hi({key:"".concat(s,"[0]"),value:a[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:fi,value:d}}))}else t=t.concat(d({key:"".concat(s,"[0]"),value:a[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},a));return ni(dt(a[1]))?t.concat([new ui("".concat(s,"[1]"),a[1],"expressions are not allowed in function stops.")]):t.concat(Wi({key:"".concat(s,"[1]"),value:a[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function d(e,n){var s=Xn(e.value),l=ht(e.value),c=null!==e.value?e.value:n;if(t){if(s!==t)return[new ui(e.key,c,"".concat(s," stop domain type must match previous stop domain type ").concat(t))]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new ui(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var u="number expected, ".concat(s," found");return Wn(i)&&void 0===a&&(u+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ui(e.key,c,u)]}return"categorical"!==a||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==a&&"number"===s&&"number"==typeof l&&"number"==typeof r&&void 0!==r&&l<r?[new ui(e.key,c,"stop domain values must appear in ascending order")]:(r=l,"categorical"===a&&l in o?[new ui(e.key,c,"stop domain values must be unique")]:(o[l]=!0,[])):[new ui(e.key,c,"integer expected, found ".concat(String(l)))]}}function mi(e){var t=("property"===e.expressionContext?si:ii)(dt(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new ui("".concat(e.key).concat(t.key),e.value,t.message)}));var r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new ui(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Ir(r))return[new ui(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return vi(r,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Pr(r,["zoom","feature-state"]))return[new ui(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Mr(r))return[new ui(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function vi(e,t){var r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression){var n,i=d(t.valueSpec.expression.parameters);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.delete(a)}}catch(s){i.e(s)}finally{i.f()}}if(0===r.size)return[];var o=[];return e instanceof cr&&r.has(e.name)?[new ui(t.key,t.value,'["'.concat(e.name,'"] expression is not supported in a filter for a ').concat(t.object.type," layer with id: ").concat(t.object.id))]:(e.eachChild((function(e){o.push.apply(o,u(vi(e,t)))})),o)}function gi(e){var t=e.key,r=e.value,n=e.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(ht(r))&&i.push(new ui(t,r,"expected one of [".concat(n.values.join(", "),"], ").concat(JSON.stringify(r)," found"))):-1===Object.keys(n.values).indexOf(ht(r))&&i.push(new ui(t,r,"expected one of [".concat(Object.keys(n.values).join(", "),"], ").concat(JSON.stringify(r)," found"))),i}function yi(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":var t,r=d(e.slice(1));try{for(r.s();!(t=r.n()).done;){var n=t.value;if(!yi(n)&&"boolean"!=typeof n)return!1}}catch(i){r.e(i)}finally{r.f()}return!0;default:return!0}}function xi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==e)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};yi(e)||(e=Ai(e));var r=e,n=!0;try{n=function(e){if(!wi(e))return e;var t=dt(e);return _i(t),t=bi(t)}(r)}catch(e){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(r,null,2),"\n        "))}var i=ct["filter_".concat(t)],a=ii(n,i),o=null;if("error"===a.result)throw new Error(a.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));o=function(e,t,r){return a.value.evaluate(e,t,{},r)};var s=null,l=null;if(n!==r){var c=ii(r,i);if("error"===c.result)throw new Error(c.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));s=function(e,t,r,n,i){return c.value.evaluate(e,t,{},r,void 0,void 0,n,i)},l=!Mr(c.value.expression)}return{filter:o,dynamicFilter:s||void 0,needGeometry:Ci(n),needFeature:!!l}}function bi(e){if(!Array.isArray(e))return e;var t=function(e){if(ki.has(e[0]))for(var t=1;t<e.length;t++)if(wi(e[t]))return!0;return e}(e);return!0===t?t:t.map((function(e){return bi(e)}))}function _i(e){var t=!1,r=[];if("case"===e[0]){for(var n=1;n<e.length-1;n+=2)t=t||wi(e[n]),r.push(e[n+1]);r.push(e[e.length-1])}else if("match"===e[0]){t=t||wi(e[1]);for(var i=2;i<e.length-1;i+=2)r.push(e[i+1]);r.push(e[e.length-1])}else if("step"===e[0]){t=t||wi(e[1]);for(var a=1;a<e.length-1;a+=2)r.push(e[a+1])}t&&(e.length=0,e.push.apply(e,["any"].concat(r)));for(var o=1;o<e.length;o++)_i(e[o])}function wi(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;for(var t,r=1;r<e.length;r++)if(wi(e[r]))return!0;return!1}var ki=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Si(e,t){return e<t?-1:e>t?1:0}function Ci(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(Ci(e[t]))return!0;return!1}function Ai(e){if(!e)return!0;var t,r=e[0];return e.length<=1?"any"!==r:"=="===r?Ti(e[1],e[2],"=="):"!="===r?Ii(Ti(e[1],e[2],"==")):"<"===r||">"===r||"<="===r||">="===r?Ti(e[1],e[2],r):"any"===r?(t=e.slice(1),["any"].concat(t.map(Ai))):"all"===r?["all"].concat(e.slice(1).map(Ai)):"none"===r?["all"].concat(e.slice(1).map(Ai).map(Ii)):"in"===r?Ei(e[1],e.slice(2)):"!in"===r?Ii(Ei(e[1],e.slice(2))):"has"===r?Mi(e[1]):"!has"===r?Ii(Mi(e[1])):"within"!==r||e}function Ti(e,t,r){switch(e){case"$type":return["filter-type-".concat(r),t];case"$id":return["filter-id-".concat(r),t];default:return["filter-".concat(r),e,t]}}function Ei(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(Si)]]:["filter-in-small",e,["literal",t]]}}function Mi(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Ii(e){return["!",e]}function Pi(e){return yi(dt(e.value))?mi(ut({},e,{expressionContext:"filter",valueSpec:e.styleSpec["filter_".concat(e.layerType||"fill")]})):Ri(e)}function Ri(e){var t=e.value,r=e.key;if("array"!==Xn(t))return[new ui(r,t,"array expected, ".concat(Xn(t)," found"))];var n,i=e.styleSpec,a=[];if(t.length<1)return[new ui(r,t,"filter array must have at least 1 element")];switch(a=a.concat(gi({key:"".concat(r,"[0]"),value:t[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),ht(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===ht(t[1])&&a.push(new ui(r,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&a.push(new ui(r,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&"string"!==(n=Xn(t[1]))&&a.push(new ui("".concat(r,"[1]"),t[1],"string expected, ".concat(n," found")));for(var o=2;o<t.length;o++)n=Xn(t[o]),"$type"===ht(t[1])?a=a.concat(gi({key:"".concat(r,"[").concat(o,"]"),value:t[o],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&a.push(new ui("".concat(r,"[").concat(o,"]"),t[o],"string, number, or boolean expected, ".concat(n," found")));break;case"any":case"all":case"none":for(var s=1;s<t.length;s++)a=a.concat(Ri({key:"".concat(r,"[").concat(s,"]"),value:t[s],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=Xn(t[1]),2!==t.length?a.push(new ui(r,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==n&&a.push(new ui("".concat(r,"[1]"),t[1],"string expected, ".concat(n," found")));break;case"within":n=Xn(t[1]),2!==t.length?a.push(new ui(r,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"object"!==n&&a.push(new ui("".concat(r,"[1]"),t[1],"object expected, ".concat(n," found")))}return a}function zi(e,t){var r=e.key,n=e.style,i=e.styleSpec,a=e.value,o=e.objectKey,s=i["".concat(t,"_").concat(e.layerType)];if(!s)return[];var l=o.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Wi({key:r,value:a,valueSpec:i.transition,style:n,styleSpec:i});var c,u=e.valueSpec||s[o];if(!u)return[new ui(r,a,'unknown property "'.concat(o,'"'))];if("string"===Xn(a)&&Wn(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(a)))return[new ui(r,a,'"'.concat(o,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(c[1])," }`."))];var h=[];return"symbol"===e.layerType&&("text-field"===o&&n&&!n.glyphs&&h.push(new ui(r,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Yn(dt(a))&&"identity"===ht(a.type)&&h.push(new ui(r,a,'"text-font" does not support identity functions'))),h.concat(Wi({key:e.key,value:a,valueSpec:u,style:n,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:o}))}function Li(e){return zi(e,"paint")}function Di(e){return zi(e,"layout")}function Oi(e){var t=[],r=e.value,n=e.key,i=e.style,a=e.styleSpec;r.type||r.ref||t.push(new ui(n,r,'either "type" or "ref" is required'));var o,s=ht(r.type),l=ht(r.ref);if(r.id)for(var c=ht(r.id),u=0;u<e.arrayIndex;u++){var h=i.layers[u];ht(h.id)===c&&t.push(new ui(n,r.id,'duplicate layer id "'.concat(r.id,'", previously used at line ').concat(h.id.__line__)))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach((function(e){e in r&&t.push(new ui(n,r[e],'"'.concat(e,'" is prohibited for ref layers')))})),i.layers.forEach((function(e){ht(e.id)===l&&(o=e)})),o?o.ref?t.push(new ui(n,r.ref,"ref cannot reference another ref layer")):s=ht(o.type):"string"==typeof l&&t.push(new ui(n,r.ref,'ref layer "'.concat(l,'" not found')));else if("background"!==s&&"sky"!==s)if(r.source){var d=i.sources&&i.sources[r.source],f=d&&ht(d.type);d?"vector"===f&&"raster"===s?t.push(new ui(n,r.source,'layer "'.concat(r.id,'" requires a raster source'))):"raster"===f&&"raster"!==s?t.push(new ui(n,r.source,'layer "'.concat(r.id,'" requires a vector source'))):"vector"!==f||r["source-layer"]?"raster-dem"===f&&"hillshade"!==s?t.push(new ui(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||"geojson"===f&&d.lineMetrics||t.push(new ui(n,r,'layer "'.concat(r.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new ui(n,r,'layer "'.concat(r.id,'" must specify a "source-layer"'))):t.push(new ui(n,r.source,'source "'.concat(r.source,'" not found')))}else t.push(new ui(n,r,'missing required property "source"'));return t=t.concat(hi({key:n,value:r,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Wi({key:"".concat(n,".type"),value:r.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"})},filter:function(e){return Pi(ut({layerType:s},e))},layout:function(e){return hi({layer:r,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Di(ut({layerType:s},e))}}})},paint:function(e){return hi({layer:r,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Li(ut({layerType:s},e))}}})}}})),t}function Fi(e){var t=e.value,r=e.key,n=Xn(t);return"string"!==n?[new ui(r,t,"string expected, ".concat(n," found"))]:[]}var ji={promoteId:function(e){var t=e.key,r=e.value;if("string"===Xn(r))return Fi({key:t,value:r});var n=[];for(var i in r)n.push.apply(n,u(Fi({key:"".concat(t,".").concat(i),value:r[i]})));return n}};function Ni(e){var t=e.value,r=e.key,n=e.styleSpec,i=e.style;if(!t.type)return[new ui(r,t,'"type" is required')];var a,o=ht(t.type);switch(o){case"vector":case"raster":case"raster-dem":return a=hi({key:r,value:t,valueSpec:n["source_".concat(o.replace("-","_"))],style:e.style,styleSpec:n,objectElementValidators:ji});case"geojson":if(a=hi({key:r,value:t,valueSpec:n.source_geojson,style:i,styleSpec:n,objectElementValidators:ji}),t.cluster)for(var s in t.clusterProperties){var l,c,d=h(t.clusterProperties[s],2),f=d[0],p=d[1],m="string"==typeof f?[f,["accumulated"],["get",s]]:f;(l=a).push.apply(l,u(mi({key:"".concat(r,".").concat(s,".map"),value:p,expressionContext:"cluster-map"}))),(c=a).push.apply(c,u(mi({key:"".concat(r,".").concat(s,".reduce"),value:m,expressionContext:"cluster-reduce"})))}return a;case"video":return hi({key:r,value:t,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return hi({key:r,value:t,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return[new ui(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return gi({key:"".concat(r,".type"),value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function Bi(e){var t=e.value,r=e.styleSpec,n=r.light,i=e.style,a=[],o=Xn(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new ui("light",t,"object expected, ".concat(o," found"))]);for(var s in t){var l=s.match(/^(.*)-transition$/);a=a.concat(l&&n[l[1]]&&n[l[1]].transition?Wi({key:s,value:t[s],valueSpec:r.transition,style:i,styleSpec:r}):n[s]?Wi({key:s,value:t[s],valueSpec:n[s],style:i,styleSpec:r}):[new ui(s,t[s],'unknown property "'.concat(s,'"'))])}return a}function Zi(e){var t=e.value,r=e.key,n=e.style,i=e.styleSpec,a=i.terrain,o=[],s=Xn(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new ui("terrain",t,"object expected, ".concat(s," found"))]);for(var l in t){var c=l.match(/^(.*)-transition$/);o=o.concat(c&&a[c[1]]&&a[c[1]].transition?Wi({key:l,value:t[l],valueSpec:i.transition,style:n,styleSpec:i}):a[l]?Wi({key:l,value:t[l],valueSpec:a[l],style:n,styleSpec:i}):[new ui(l,t[l],'unknown property "'.concat(l,'"'))])}if(t.source){var u=n.sources&&n.sources[t.source],h=u&&ht(u.type);u?"raster-dem"!==h&&o.push(new ui(r,t.source,"terrain cannot be used with a source of type ".concat(String(h),', it only be used with a "raster-dem" source type'))):o.push(new ui(r,t.source,'source "'.concat(t.source,'" not found')))}else o.push(new ui(r,t,'terrain is missing required property "source"'));return o}function Ui(e){var t=e.value,r=e.style,n=e.styleSpec,i=n.fog,a=[],o=Xn(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new ui("fog",t,"object expected, ".concat(o," found"))]);for(var s in t){var l=s.match(/^(.*)-transition$/);a=a.concat(l&&i[l[1]]&&i[l[1]].transition?Wi({key:s,value:t[s],valueSpec:n.transition,style:r,styleSpec:n}):i[s]?Wi({key:s,value:t[s],valueSpec:i[s],style:r,styleSpec:n}):[new ui(s,t[s],'unknown property "'.concat(s,'"'))])}return a}var Vi={"*":function(){return[]},array:di,boolean:function(e){var t=e.value,r=e.key,n=Xn(t);return"boolean"!==n?[new ui(r,t,"boolean expected, ".concat(n," found"))]:[]},number:fi,color:function(e){var t=e.key,r=e.value,n=Xn(r);return"string"!==n?[new ui(t,r,"color expected, ".concat(n," found"))]:null===zt(r)?[new ui(t,r,'color expected, "'.concat(r,'" found'))]:[]},enum:gi,filter:Pi,function:pi,layer:Oi,object:hi,source:Ni,light:Bi,terrain:Zi,fog:Ui,string:Fi,formatted:function(e){return 0===Fi(e).length?[]:mi(e)},resolvedImage:function(e){return 0===Fi(e).length?[]:mi(e)},projection:function(e){var t=e.value,r=e.styleSpec,n=r.projection,i=e.style,a=[],o=Xn(t);if("object"===o)for(var s in t)a=a.concat(Wi({key:s,value:t[s],valueSpec:n[s],style:i,styleSpec:r}));else"string"!==o&&(a=a.concat([new ui("projection",t,"object or string expected, ".concat(o," found"))]));return a}};function Wi(e){var t=e.value,r=e.valueSpec,n=e.styleSpec;return r.expression&&Yn(ht(t))?pi(e):r.expression&&ni(dt(t))?mi(e):r.type&&Vi[r.type]?Vi[r.type](e):hi(ut({},e,{valueSpec:r.type?n[r.type]:r}))}function Gi(e){var t=e.value,r=e.key,n=Fi(e);return n.length||(-1===t.indexOf("{fontstack}")&&n.push(new ui(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&n.push(new ui(r,t,'"glyphs" url must include a "{range}" token'))),n}function Hi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;return qi(Wi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Gi,"*":function(){return[]}}}))}var Xi=function(e){return qi(Li(e))},Yi=function(e){return qi(Di(e))};function qi(e){return e.slice().sort((function(e,t){return e.line&&t.line?e.line-t.line:0}))}function $i(e,t){var r=!1;if(t&&t.length){var n,i=d(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.fire(new st(new Error(a.message))),r=!0}}catch(o){i.e(o)}finally{i.f()}}return r}var Ki=Ji;function Ji(e,t,r){var n=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(r=i[2]);for(var a=0;a<this.d*this.d;a++){var o=i[3+a],s=i[3+a+1];n.push(o===s?null:i.subarray(o,s))}var l=i[3+n.length+1];this.keys=i.subarray(i[3+n.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*r;for(var c=0;c<this.d*this.d;c++)n.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=r,this.scale=t/e,this.uid=0;var u=r/t*e;this.min=-u,this.max=e+u}Ji.prototype.insert=function(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},Ji.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ji.prototype._insertCell=function(e,t,r,n,i,a){this.cells[i].push(a)},Ji.prototype.query=function(e,t,r,n,i){var a=this.min,o=this.max;if(e<=a&&t<=a&&o<=r&&o<=n&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,r,n,this._queryCell,s,{},i),s},Ji.prototype._queryCell=function(e,t,r,n,i,a,o,s){var l=this.cells[i];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===o[d]){var f=4*d;(s?s(u[f+0],u[f+1],u[f+2],u[f+3]):e<=u[f+2]&&t<=u[f+3]&&r>=u[f+0]&&n>=u[f+1])?(o[d]=!0,a.push(c[d])):o[d]=!1}}},Ji.prototype._forEachCell=function(e,t,r,n,i,a,o,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(r),h=this._convertToCellCoord(n),d=l;d<=u;d++)for(var f=c;f<=h;f++){var p=this.d*f+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(f),this._convertFromCellCoord(d+1),this._convertFromCellCoord(f+1)))&&i.call(this,e,t,r,n,p,a,o,s))return}},Ji.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Ji.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Ji.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(t+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=t,o=0;o<e.length;o++){var s=e[o];i[3+o]=a,i.set(s,a),a+=s.length}return i[3+e.length]=a,i.set(this.keys,a),i[3+e.length+1]=a+=this.keys.length,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var Qi={};function ea(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Qi[t]={klass:e,omit:r.omit||[]}}for(var ta in ea(Object,"Object"),Ki.serialize=function(e,t){var r=e.toArrayBuffer();return t&&t.push(r),{buffer:r}},Ki.deserialize=function(e){return new Ki(e.buffer)},Object.defineProperty(Ki,"name",{value:"Grid"}),ea(Ki,"Grid"),ea(Bt,"Color"),ea(Error,"Error"),ea(be,"AJAXError"),ea(Wt,"ResolvedImage"),ea(li,"StylePropertyFunction"),ea(ri,"StyleExpression",{omit:["_evaluator"]}),ea(oi,"ZoomDependentExpression"),ea(ai,"ZoomConstantExpression"),ea(cr,"CompoundExpression",{omit:["_evaluate"]}),Zn)Qi[Zn[ta]._classRegistryKey]||ea(Zn[ta],"Expression".concat(ta));function ra(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function na(e){return y.ImageBitmap&&e instanceof y.ImageBitmap}function ia(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(ra(e)||na(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var r=e;return t&&t.push(r.buffer),r}if(e instanceof y.ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){var n,i=[],a=d(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;i.push(ia(o,t))}}catch(h){a.e(h)}finally{a.f()}return i}if("object"==typeof e){var s=e.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class ".concat(l));var c=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var u in e)e.hasOwnProperty(u)&&(Qi[l].omit.indexOf(u)>=0||(c[u]=ia(e[u],t)));e instanceof Error&&(c.message=e.message)}if(c.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(c.$name=l),c}throw new Error("can't serialize object of type "+typeof e)}function aa(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||ra(e)||na(e)||ArrayBuffer.isView(e)||e instanceof y.ImageData)return e;if(Array.isArray(e))return e.map(aa);if("object"==typeof e){var t=e.$name||"Object",r=Qi[t].klass;if(!r)throw new Error("can't deserialize unregistered class ".concat(t));if(r.deserialize)return r.deserialize(e);for(var n=Object.create(r.prototype),i=0,a=Object.keys(e);i<a.length;i++){var o=a[i];"$name"!==o&&(n[o]=aa(e[o]))}return n}throw new Error("can't deserialize object of type "+typeof e)}var oa=function(){function e(){f(this,e),this.first=!0}return p(e,[{key:"update",value:function(e,t){var r=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=r,!0))}}]),e}(),sa=function(e){return e>=1536&&e<=1791},la=function(e){return e>=1872&&e<=1919},ca=function(e){return e>=2208&&e<=2303},ua=function(e){return e>=11904&&e<=12031},ha=function(e){return e>=12032&&e<=12255},da=function(e){return e>=12272&&e<=12287},fa=function(e){return e>=12288&&e<=12351},pa=function(e){return e>=12352&&e<=12447},ma=function(e){return e>=12448&&e<=12543},va=function(e){return e>=12544&&e<=12591},ga=function(e){return e>=12704&&e<=12735},ya=function(e){return e>=12736&&e<=12783},xa=function(e){return e>=12784&&e<=12799},ba=function(e){return e>=12800&&e<=13055},_a=function(e){return e>=13056&&e<=13311},wa=function(e){return e>=13312&&e<=19903},ka=function(e){return e>=19968&&e<=40959},Sa=function(e){return e>=40960&&e<=42127},Ca=function(e){return e>=42128&&e<=42191},Aa=function(e){return e>=44032&&e<=55215},Ta=function(e){return e>=63744&&e<=64255},Ea=function(e){return e>=64336&&e<=65023},Ma=function(e){return e>=65040&&e<=65055},Ia=function(e){return e>=65072&&e<=65103},Pa=function(e){return e>=65104&&e<=65135},Ra=function(e){return e>=65136&&e<=65279},za=function(e){return e>=65280&&e<=65519};function La(e){var t,r=d(e);try{for(r.s();!(t=r.n()).done;)if(Fa(t.value.charCodeAt(0)))return!0}catch(n){r.e(n)}finally{r.f()}return!1}function Da(e){var t,r=d(e);try{for(r.s();!(t=r.n()).done;)if(!Oa(t.value.charCodeAt(0)))return!1}catch(n){r.e(n)}finally{r.f()}return!0}function Oa(e){return!(sa(e)||la(e)||ca(e)||Ea(e)||Ra(e))}function Fa(e){return!(746!==e&&747!==e&&(e<4352||!(ga(e)||va(e)||Ia(e)&&!(e>=65097&&e<=65103)||Ta(e)||_a(e)||ua(e)||ya(e)||!(!fa(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||wa(e)||ka(e)||ba(e)||function(e){return e>=12592&&e<=12687}(e)||function(e){return e>=43360&&e<=43391}(e)||function(e){return e>=55216&&e<=55295}(e)||function(e){return e>=4352&&e<=4607}(e)||Aa(e)||pa(e)||da(e)||function(e){return e>=12688&&e<=12703}(e)||ha(e)||xa(e)||ma(e)&&12540!==e||!(!za(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Pa(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||function(e){return e>=5120&&e<=5759}(e)||function(e){return e>=6320&&e<=6399}(e)||Ma(e)||function(e){return e>=19904&&e<=19967}(e)||Sa(e)||Ca(e))))}function ja(e){return!(Fa(e)||function(e){return!!(function(e){return e>=128&&e<=255}(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||function(e){return e>=8192&&e<=8303}(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||function(e){return e>=8448&&e<=8527}(e)||function(e){return e>=8528&&e<=8591}(e)||function(e){return e>=8960&&e<=9215}(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||function(e){return e>=9216&&e<=9279}(e)&&9251!==e||function(e){return e>=9280&&e<=9311}(e)||function(e){return e>=9312&&e<=9471}(e)||function(e){return e>=9632&&e<=9727}(e)||function(e){return e>=9728&&e<=9983}(e)&&!(e>=9754&&e<=9759)||function(e){return e>=11008&&e<=11263}(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||fa(e)||ma(e)||function(e){return e>=57344&&e<=63743}(e)||Ia(e)||Pa(e)||za(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Na(e){return e>=1424&&e<=2303||Ea(e)||Ra(e)}function Ba(e,t){return!(!t&&Na(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||function(e){return e>=6016&&e<=6143}(e))}function Za(e){var t,r=d(e);try{for(r.s();!(t=r.n()).done;)if(Na(t.value.charCodeAt(0)))return!0}catch(n){r.e(n)}finally{r.f()}return!1}var Ua="deferred",Va="loading",Wa="loaded",Ga=null,Ha="unavailable",Xa=null,Ya=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Ha="error"),Ga&&Ga(e)};function qa(){$a.fire(new ot("pluginStateChange",{pluginStatus:Ha,pluginURL:Xa}))}var $a=new lt,Ka=function(){return Ha},Ja=function(){if(Ha!==Ua||!Xa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ha=Va,qa(),Xa&&ke({url:Xa},(function(e){e?Ya(e):(Ha=Wa,qa())}))},Qa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ha===Wa||null!=Qa.applyArabicShaping},isLoading:function(){return Ha===Va},setState:function(e){Ha=e.pluginStatus,Xa=e.pluginURL},isParsed:function(){return null!=Qa.applyArabicShaping&&null!=Qa.processBidirectionalText&&null!=Qa.processStyledBidirectionalText},getPluginURL:function(){return Xa}},eo=function(){function e(t,r){f(this,e),this.zoom=t,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition,this.pitch=r.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new oa,this.transition={},this.pitch=0)}return p(e,[{key:"isSupportedScript",value:function(e){return function(e,t){var r,n=d(e);try{for(n.s();!(r=n.n()).done;)if(!Ba(r.value.charCodeAt(0),t))return!1}catch(i){n.e(i)}finally{n.f()}return!0}(e,Qa.isLoaded())}},{key:"crossFadingFactor",value:function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}},{key:"getCrossfadeParameters",value:function(){var e=this.zoom,t=e-Math.floor(e),r=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*t}}}]),e}(),to=function(){function e(t,r){f(this,e),this.property=t,this.value=r,this.expression=function(e,t){if(Yn(e))return new li(e,t);if(ni(e)){var r=si(e,t);if("error"===r.result)throw new Error(r.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return r.value}var n=e;return"string"==typeof e&&"color"===t.type&&(n=Bt.parse(e)),{kind:"constant",evaluate:function(){return n}}}(void 0===r?t.specification.default:r,t.specification)}return p(e,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(e,t,r){return this.property.possiblyEvaluate(this,e,t,r)}}]),e}(),ro=function(){function e(t){f(this,e),this.property=t,this.value=new to(t,void 0)}return p(e,[{key:"transitioned",value:function(e,t){return new io(this.property,this.value,t,V({},e.transition,this.transition),e.now)}},{key:"untransitioned",value:function(){return new io(this.property,this.value,null,{},0)}}]),e}(),no=function(){function e(t){f(this,e),this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}return p(e,[{key:"getValue",value:function(e){return Q(this._values[e].value.value)}},{key:"setValue",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ro(this._values[e].property)),this._values[e].value=new to(this._values[e].property,null===t?void 0:Q(t))}},{key:"getTransition",value:function(e){return Q(this._values[e].transition)}},{key:"setTransition",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ro(this._values[e].property)),this._values[e].transition=Q(t)||void 0}},{key:"serialize",value:function(){for(var e={},t=0,r=Object.keys(this._values);t<r.length;t++){var n=r[t],i=this.getValue(n);void 0!==i&&(e[n]=i);var a=this.getTransition(n);void 0!==a&&(e["".concat(n,"-transition")]=a)}return e}},{key:"transitioned",value:function(e,t){for(var r=new ao(this._properties),n=0,i=Object.keys(this._values);n<i.length;n++){var a=i[n];r._values[a]=this._values[a].transitioned(e,t._values[a])}return r}},{key:"untransitioned",value:function(){for(var e=new ao(this._properties),t=0,r=Object.keys(this._values);t<r.length;t++){var n=r[t];e._values[n]=this._values[n].untransitioned()}return e}}]),e}(),io=function(){function e(t,r,n,i,a){f(this,e);var o=i.delay||0,s=i.duration||0;a=a||0,this.property=t,this.value=r,this.begin=a+o,this.end=this.begin+s,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}return p(e,[{key:"possiblyEvaluate",value:function(e,t,r){var n=e.now||0,i=this.value.possiblyEvaluate(e,t,r),a=this.prior;if(a){if(n>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(n<this.begin)return a.possiblyEvaluate(e,t,r);var o=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,r),i,D(o))}return i}}]),e}(),ao=function(){function e(t){f(this,e),this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}return p(e,[{key:"possiblyEvaluate",value:function(e,t,r){for(var n=new lo(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var o=a[i];n._values[o]=this._values[o].possiblyEvaluate(e,t,r)}return n}},{key:"hasTransition",value:function(){for(var e=0,t=Object.keys(this._values);e<t.length;e++){var r=t[e];if(this._values[r].prior)return!0}return!1}}]),e}(),oo=function(){function e(t){f(this,e),this._properties=t,this._values=Object.create(t.defaultPropertyValues)}return p(e,[{key:"getValue",value:function(e){return Q(this._values[e].value)}},{key:"setValue",value:function(e,t){this._values[e]=new to(this._values[e].property,null===t?void 0:Q(t))}},{key:"serialize",value:function(){for(var e={},t=0,r=Object.keys(this._values);t<r.length;t++){var n=r[t],i=this.getValue(n);void 0!==i&&(e[n]=i)}return e}},{key:"possiblyEvaluate",value:function(e,t,r){for(var n=new lo(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var o=a[i];n._values[o]=this._values[o].possiblyEvaluate(e,t,r)}return n}}]),e}(),so=function(){function e(t,r,n){f(this,e),this.property=t,this.value=r,this.parameters=n}return p(e,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(e){return"constant"===this.value.kind?this.value.value:e}},{key:"evaluate",value:function(e,t,r,n){return this.property.evaluate(this.value,this.parameters,e,t,r,n)}}]),e}(),lo=function(){function e(t){f(this,e),this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}return p(e,[{key:"get",value:function(e){return this._values[e]}}]),e}(),co=function(){function e(t){f(this,e),this.specification=t}return p(e,[{key:"possiblyEvaluate",value:function(e,t){return e.expression.evaluate(t)}},{key:"interpolate",value:function(e,t,r){var n=Zr[this.specification.type];return n?n(e,t,r):e}}]),e}(),uo=function(){function e(t,r){f(this,e),this.specification=t,this.overrides=r}return p(e,[{key:"possiblyEvaluate",value:function(e,t,r,n){return new so(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},r,n)}:e.expression,t)}},{key:"interpolate",value:function(e,t,r){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new so(this,{kind:"constant",value:void 0},e.parameters);var n=Zr[this.specification.type];return n?new so(this,{kind:"constant",value:n(e.value.value,t.value.value,r)},e.parameters):e}},{key:"evaluate",value:function(e,t,r,n,i,a){return"constant"===e.kind?e.value:e.evaluate(t,r,n,i,a)}}]),e}(),ho=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"possiblyEvaluate",value:function(e,t,r,n){if(void 0===e.value)return new so(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var i=e.expression.evaluate(t,null,{},r,n),a="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,o=this._calculate(a,a,a,t);return new so(this,{kind:"constant",value:o},t)}if("camera"===e.expression.kind){var s=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new so(this,{kind:"constant",value:s},t)}return new so(this,e.expression,t)}},{key:"evaluate",value:function(e,t,r,n,i,a){if("source"===e.kind){var o=e.evaluate(t,r,n,i,a);return this._calculate(o,o,o,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},r,n),e.evaluate({zoom:Math.floor(t.zoom)},r,n),e.evaluate({zoom:Math.floor(t.zoom)+1},r,n),t):e.value}},{key:"_calculate",value:function(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t,other:r}:{from:r,to:t,other:e}}},{key:"interpolate",value:function(e){return e}}]),r}(uo),fo=function(){function e(t){f(this,e),this.specification=t}return p(e,[{key:"possiblyEvaluate",value:function(e,t,r,n){if(void 0!==e.value){if("constant"===e.expression.kind){var i=e.expression.evaluate(t,null,{},r,n);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new eo(Math.floor(t.zoom-1),t)),e.expression.evaluate(new eo(Math.floor(t.zoom),t)),e.expression.evaluate(new eo(Math.floor(t.zoom+1),t)),t)}}},{key:"_calculate",value:function(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}}},{key:"interpolate",value:function(e){return e}}]),e}(),po=function(){function e(t){f(this,e),this.specification=t}return p(e,[{key:"possiblyEvaluate",value:function(e,t,r,n){return!!e.expression.evaluate(t,null,{},r,n)}},{key:"interpolate",value:function(){return!1}}]),e}(),mo=p((function e(t){f(this,e),this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];var r=new eo(0,{});for(var n in t){var i=t[n];i.specification.overridable&&this.overridableProperties.push(n);var a=this.defaultPropertyValues[n]=new to(i,void 0),o=this.defaultTransitionablePropertyValues[n]=new ro(i);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=a.possiblyEvaluate(r)}}));function vo(e,t){return 256*(e=j(Math.floor(e),0,255))+j(Math.floor(t),0,255)}ea(uo,"DataDrivenProperty"),ea(co,"DataConstantProperty"),ea(ho,"CrossFadedDataDrivenProperty"),ea(fo,"CrossFadedProperty"),ea(po,"ColorRampProperty");var go={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},yo=p((function e(t,r){f(this,e),this._structArray=t,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8})),xo=function(){function e(){f(this,e),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return p(e,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(e){this.reserve(e),this.length=e}},{key:"reserve",value:function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}},{key:"destroy",value:function(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}],[{key:"serialize",value:function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}},{key:"deserialize",value:function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}}]),e}();function bo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=0,n=0;return{members:e.map((function(e){var i=go[e.type].BYTES_PER_ELEMENT,a=r=_o(r,Math.max(t,i)),o=e.components||1;return n=Math.max(n,i),r+=i*o,{name:e.name,type:e.type,components:o,offset:a}})),size:_o(r,Math.max(n,t)),alignment:t}}function _o(e,t){return Math.ceil(e/t)*t}var wo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var r=this.length;return this.resize(r+1),this.emplace(r,e,t)}},{key:"emplace",value:function(e,t,r){var n=2*e;return this.int16[n+0]=t,this.int16[n+1]=r,e}}]),r}(xo);wo.prototype.bytesPerElement=4,ea(wo,"StructArrayLayout2i4");var ko=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}},{key:"emplace",value:function(e,t,r,n){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=r,this.int16[i+2]=n,e}}]),r}(xo);ko.prototype.bytesPerElement=6,ea(ko,"StructArrayLayout3i6");var So=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}},{key:"emplace",value:function(e,t,r,n,i){var a=4*e;return this.int16[a+0]=t,this.int16[a+1]=r,this.int16[a+2]=n,this.int16[a+3]=i,e}}]),r}(xo);So.prototype.bytesPerElement=8,ea(So,"StructArrayLayout4i8");var Co=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n,i,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,n,i,a,o)}},{key:"emplace",value:function(e,t,r,n,i,a,o,s){var l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.uint8[c+4]=n,this.uint8[c+5]=i,this.uint8[c+6]=a,this.uint8[c+7]=o,this.float32[u+2]=s,e}}]),r}(xo);Co.prototype.bytesPerElement=12,ea(Co,"StructArrayLayout2i4ub1f12");var Ao=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}},{key:"emplace",value:function(e,t,r,n,i){var a=4*e;return this.float32[a+0]=t,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=i,e}}]),r}(xo);Ao.prototype.bytesPerElement=16,ea(Ao,"StructArrayLayout4f16");var To=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n,i,a,o,s,l,c){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,r,n,i,a,o,s,l,c)}},{key:"emplace",value:function(e,t,r,n,i,a,o,s,l,c,u){var h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=r,this.uint16[h+2]=n,this.uint16[h+3]=i,this.uint16[h+4]=a,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}]),r}(xo);To.prototype.bytesPerElement=20,ea(To,"StructArrayLayout10ui20");var Eo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n,i,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,r,n,i,a,o,s)}},{key:"emplace",value:function(e,t,r,n,i,a,o,s,l){var c=8*e;return this.uint16[c+0]=t,this.uint16[c+1]=r,this.uint16[c+2]=n,this.uint16[c+3]=i,this.uint16[c+4]=a,this.uint16[c+5]=o,this.uint16[c+6]=s,this.uint16[c+7]=l,e}}]),r}(xo);Eo.prototype.bytesPerElement=16,ea(Eo,"StructArrayLayout8ui16");var Mo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,n,i,a)}},{key:"emplace",value:function(e,t,r,n,i,a,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,e}}]),r}(xo);Mo.prototype.bytesPerElement=12,ea(Mo,"StructArrayLayout6i12");var Io=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n,i,a,o,s,l,c,u,h){var d=this.length;return this.resize(d+1),this.emplace(d,e,t,r,n,i,a,o,s,l,c,u,h)}},{key:"emplace",value:function(e,t,r,n,i,a,o,s,l,c,u,h,d){var f=12*e;return this.int16[f+0]=t,this.int16[f+1]=r,this.int16[f+2]=n,this.int16[f+3]=i,this.uint16[f+4]=a,this.uint16[f+5]=o,this.uint16[f+6]=s,this.uint16[f+7]=l,this.int16[f+8]=c,this.int16[f+9]=u,this.int16[f+10]=h,this.int16[f+11]=d,e}}]),r}(xo);Io.prototype.bytesPerElement=24,ea(Io,"StructArrayLayout4i4ui4i24");var Po=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,n,i,a)}},{key:"emplace",value:function(e,t,r,n,i,a,o){var s=10*e,l=5*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.float32[l+2]=i,this.float32[l+3]=a,this.float32[l+4]=o,e}}]),r}(xo);Po.prototype.bytesPerElement=20,ea(Po,"StructArrayLayout3i3f20");var Ro=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint32[1*e+0]=t,e}}]),r}(xo);Ro.prototype.bytesPerElement=4,ea(Ro,"StructArrayLayout1ul4");var zo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n,i,a,o,s,l,c,u,h,d){var f=this.length;return this.resize(f+1),this.emplace(f,e,t,r,n,i,a,o,s,l,c,u,h,d)}},{key:"emplace",value:function(e,t,r,n,i,a,o,s,l,c,u,h,d,f){var p=20*e,m=10*e;return this.int16[p+0]=t,this.int16[p+1]=r,this.int16[p+2]=n,this.int16[p+3]=i,this.int16[p+4]=a,this.float32[m+3]=o,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=c,this.int16[p+14]=u,this.uint32[m+8]=h,this.uint16[p+18]=d,this.uint16[p+19]=f,e}}]),r}(xo);zo.prototype.bytesPerElement=40,ea(zo,"StructArrayLayout5i4f1i1ul2ui40");var Lo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n,i,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,n,i,a,o)}},{key:"emplace",value:function(e,t,r,n,i,a,o,s){var l=8*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+4]=i,this.int16[l+5]=a,this.int16[l+6]=o,this.int16[l+7]=s,e}}]),r}(xo);Lo.prototype.bytesPerElement=16,ea(Lo,"StructArrayLayout3i2i2i16");var Do=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i)}},{key:"emplace",value:function(e,t,r,n,i,a){var o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=r,this.float32[o+2]=n,this.int16[s+6]=i,this.int16[s+7]=a,e}}]),r}(xo);Do.prototype.bytesPerElement=16,ea(Do,"StructArrayLayout2f1f2i16");var Oo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}},{key:"emplace",value:function(e,t,r,n,i){var a=12*e,o=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=r,this.float32[o+1]=n,this.float32[o+2]=i,e}}]),r}(xo);Oo.prototype.bytesPerElement=12,ea(Oo,"StructArrayLayout2ub2f12");var Fo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}},{key:"emplace",value:function(e,t,r,n){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=r,this.float32[i+2]=n,e}}]),r}(xo);Fo.prototype.bytesPerElement=12,ea(Fo,"StructArrayLayout3f12");var jo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}},{key:"emplace",value:function(e,t,r,n){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=r,this.uint16[i+2]=n,e}}]),r}(xo);jo.prototype.bytesPerElement=6,ea(jo,"StructArrayLayout3ui6");var No=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n,i,a,o,s,l,c,u,h,d,f,p,m,v,g,y,x,b){var _=this.length;return this.resize(_+1),this.emplace(_,e,t,r,n,i,a,o,s,l,c,u,h,d,f,p,m,v,g,y,x,b)}},{key:"emplace",value:function(e,t,r,n,i,a,o,s,l,c,u,h,d,f,p,m,v,g,y,x,b,_){var w=30*e,k=15*e,S=60*e;return this.int16[w+0]=t,this.int16[w+1]=r,this.int16[w+2]=n,this.float32[k+2]=i,this.float32[k+3]=a,this.uint16[w+8]=o,this.uint16[w+9]=s,this.uint32[k+5]=l,this.uint32[k+6]=c,this.uint32[k+7]=u,this.uint16[w+16]=h,this.uint16[w+17]=d,this.uint16[w+18]=f,this.float32[k+10]=p,this.float32[k+11]=m,this.uint8[S+48]=v,this.uint8[S+49]=g,this.uint8[S+50]=y,this.uint32[k+13]=x,this.int16[w+28]=b,this.uint8[S+58]=_,e}}]),r}(xo);No.prototype.bytesPerElement=60,ea(No,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");var Bo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n,i,a,o,s,l,c,u,h,d,f,p,m,v,g,y,x,b,_,w,k,S,C,A,T,E,M){var I=this.length;return this.resize(I+1),this.emplace(I,e,t,r,n,i,a,o,s,l,c,u,h,d,f,p,m,v,g,y,x,b,_,w,k,S,C,A,T,E,M)}},{key:"emplace",value:function(e,t,r,n,i,a,o,s,l,c,u,h,d,f,p,m,v,g,y,x,b,_,w,k,S,C,A,T,E,M,I){var P=38*e,R=19*e;return this.int16[P+0]=t,this.int16[P+1]=r,this.int16[P+2]=n,this.float32[R+2]=i,this.float32[R+3]=a,this.int16[P+8]=o,this.int16[P+9]=s,this.int16[P+10]=l,this.int16[P+11]=c,this.int16[P+12]=u,this.int16[P+13]=h,this.uint16[P+14]=d,this.uint16[P+15]=f,this.uint16[P+16]=p,this.uint16[P+17]=m,this.uint16[P+18]=v,this.uint16[P+19]=g,this.uint16[P+20]=y,this.uint16[P+21]=x,this.uint16[P+22]=b,this.uint16[P+23]=_,this.uint16[P+24]=w,this.uint16[P+25]=k,this.uint16[P+26]=S,this.uint16[P+27]=C,this.uint16[P+28]=A,this.uint32[R+15]=T,this.float32[R+16]=E,this.float32[R+17]=M,this.float32[R+18]=I,e}}]),r}(xo);Bo.prototype.bytesPerElement=76,ea(Bo,"StructArrayLayout3i2f6i15ui1ul3f76");var Zo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.float32[1*e+0]=t,e}}]),r}(xo);Zo.prototype.bytesPerElement=4,ea(Zo,"StructArrayLayout1f4");var Uo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i)}},{key:"emplace",value:function(e,t,r,n,i,a){var o=5*e;return this.float32[o+0]=t,this.float32[o+1]=r,this.float32[o+2]=n,this.float32[o+3]=i,this.float32[o+4]=a,e}}]),r}(xo);Uo.prototype.bytesPerElement=20,ea(Uo,"StructArrayLayout5f20");var Vo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}},{key:"emplace",value:function(e,t,r,n,i){var a=6*e;return this.uint32[3*e+0]=t,this.uint16[a+2]=r,this.uint16[a+3]=n,this.uint16[a+4]=i,e}}]),r}(xo);Vo.prototype.bytesPerElement=12,ea(Vo,"StructArrayLayout1ul3ui12");var Wo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var r=this.length;return this.resize(r+1),this.emplace(r,e,t)}},{key:"emplace",value:function(e,t,r){var n=2*e;return this.uint16[n+0]=t,this.uint16[n+1]=r,e}}]),r}(xo);Wo.prototype.bytesPerElement=4,ea(Wo,"StructArrayLayout2ui4");var Go=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint16[1*e+0]=t,e}}]),r}(xo);Go.prototype.bytesPerElement=2,ea(Go,"StructArrayLayout1ui2");var Ho=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var r=this.length;return this.resize(r+1),this.emplace(r,e,t)}},{key:"emplace",value:function(e,t,r){var n=2*e;return this.float32[n+0]=t,this.float32[n+1]=r,e}}]),r}(xo);Ho.prototype.bytesPerElement=8,ea(Ho,"StructArrayLayout2f8");var Xo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"a_pos_30",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"a_pos_31",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"a_pos_32",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"a_pos_normal_30",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"a_pos_normal_31",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"a_pos_normal_32",get:function(){return this._structArray.int16[this._pos2+5]}}]),r}(yo);Xo.prototype.size=12;var Yo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"get",value:function(e){return new Xo(this,e)}}]),r}(Mo);ea(Yo,"FillExtrusionExtArray");var qo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"tileAnchorY",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"x1",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"y1",get:function(){return this._structArray.float32[this._pos4+4]}},{key:"x2",get:function(){return this._structArray.float32[this._pos4+5]}},{key:"y2",get:function(){return this._structArray.float32[this._pos4+6]}},{key:"padding",get:function(){return this._structArray.int16[this._pos2+14]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+8]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+19]}}]),r}(yo);qo.prototype.size=40;var $o=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"get",value:function(e){return new qo(this,e)}}]),r}(zo);ea($o,"CollisionBoxArray");var Ko=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+5]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+6]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+7]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+10]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+11]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+48]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+49]},set:function(e){this._structArray.uint8[this._pos1+49]=e}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+50]},set:function(e){this._structArray.uint8[this._pos1+50]=e}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+13]},set:function(e){this._structArray.uint32[this._pos4+13]=e}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+28]}},{key:"flipState",get:function(){return this._structArray.uint8[this._pos1+58]},set:function(e){this._structArray.uint8[this._pos1+58]=e}}]),r}(yo);Ko.prototype.size=60;var Jo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"get",value:function(e){return new Ko(this,e)}}]),r}(No);ea(Jo,"PlacedSymbolArray");var Qo=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+8]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+9]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+10]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+11]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+12]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+13]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+23]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+24]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+25]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+26]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+27]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+28]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+15]},set:function(e){this._structArray.uint32[this._pos4+15]=e}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+16]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+17]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+18]}}]),r}(yo);Qo.prototype.size=76;var es=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"get",value:function(e){return new Qo(this,e)}}]),r}(Bo);ea(es,"SymbolInstanceArray");var ts=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getoffsetX",value:function(e){return this.float32[1*e+0]}}]),r}(Zo);ea(ts,"GlyphOffsetArray");var rs=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getx",value:function(e){return this.int16[3*e+0]}},{key:"gety",value:function(e){return this.int16[3*e+1]}},{key:"gettileUnitDistanceFromAnchor",value:function(e){return this.int16[3*e+2]}}]),r}(ko);ea(rs,"SymbolLineVertexArray");var ns=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"layoutVertexArrayOffset",get:function(){return this._structArray.uint16[this._pos2+4]}}]),r}(yo);ns.prototype.size=12;var is=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"get",value:function(e){return new ns(this,e)}}]),r}(Vo);ea(is,"FeatureIndexArray");var as=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"a_centroid_pos0",get:function(){return this._structArray.uint16[this._pos2+0]}},{key:"a_centroid_pos1",get:function(){return this._structArray.uint16[this._pos2+1]}}]),r}(yo);as.prototype.size=4;var os=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"get",value:function(e){return new as(this,e)}}]),r}(Wo);ea(os,"FillExtrusionCentroidArray");var ss=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"a_pos_30",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"a_pos_31",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"a_pos_32",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"a_pos_normal_30",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"a_pos_normal_31",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"a_pos_normal_32",get:function(){return this._structArray.int16[this._pos2+5]}}]),r}(yo);ss.prototype.size=12;var ls=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"get",value:function(e){return new ss(this,e)}}]),r}(Mo);ea(ls,"CircleGlobeExtArray");var cs=bo([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),us=bo([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]),hs={exports:{}},ds={exports:{}};ds.exports=function(e,t){var r,n,i,a,o,s,l,c;for(n=e.length-(r=3&e.length),i=t,o=3432918353,s=461845907,c=0;c<n;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(a=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var fs={exports:{}};fs.exports=function(e,t){for(var r,n=e.length,i=t^n,a=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++a;switch(n){case 3:i^=(255&e.charCodeAt(a+2))<<16;case 2:i^=(255&e.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var ps=ds.exports,ms=fs.exports;hs.exports=ps,hs.exports.murmur3=ps,hs.exports.murmur2=ms;var vs=function(){function e(){f(this,e),this.ids=[],this.positions=[],this.indexed=!1}return p(e,[{key:"add",value:function(e,t,r,n){this.ids.push(gs(e)),this.positions.push(t,r,n)}},{key:"getPositions",value:function(e){for(var t=gs(e),r=0,n=this.ids.length-1;r<n;){var i=r+n>>1;this.ids[i]>=t?n=i:r=i+1}for(var a=[];this.ids[r]===t;)a.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return a}}],[{key:"serialize",value:function(e,t){var r=new Float64Array(e.ids),n=new Uint32Array(e.positions);return ys(r,n,0,r.length-1),t&&t.push(r.buffer,n.buffer),{ids:r,positions:n}}},{key:"deserialize",value:function(t){var r=new e;return r.ids=t.ids,r.positions=t.positions,r.indexed=!0,r}}]),e}();function gs(e){var t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:hs.exports(String(e))}function ys(e,t,r,n){for(;r<n;){for(var i=e[r+n>>1],a=r-1,o=n+1;;){do{a++}while(e[a]<i);do{o--}while(e[o]>i);if(a>=o)break;xs(e,a,o),xs(t,3*a,3*o),xs(t,3*a+1,3*o+1),xs(t,3*a+2,3*o+2)}o-r<n-o?(ys(e,t,r,o),r=o+1):(ys(e,t,o+1,n),n=o)}}function xs(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}ea(vs,"FeaturePositionMap");var bs=function(){function e(t){f(this,e),this.gl=t.gl,this.initialized=!1}return p(e,[{key:"fetchUniformLocation",value:function(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}]),e}(),_s=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).current=0,n}return p(r,[{key:"set",value:function(e,t,r){this.fetchUniformLocation(e,t)&&this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}]),r}(bs),ws=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).current=[0,0,0,0],n}return p(r,[{key:"set",value:function(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3])))}}]),r}(bs),ks=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).current=Bt.transparent,n}return p(r,[{key:"set",value:function(e,t,r){this.fetchUniformLocation(e,t)&&(r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a)))}}]),r}(bs),Ss=new Float32Array(16),Cs=new Float32Array(9),As=new Float32Array(4);function Ts(e){return[vo(255*e.r,255*e.g),vo(255*e.b,255*e.a)]}var Es=function(){function e(t,r,n){f(this,e),this.value=t,this.uniformNames=r.map((function(e){return"u_".concat(e)})),this.type=n}return p(e,[{key:"setUniform",value:function(e,t,r,n,i){t.set(e,i,n.constantOr(this.value))}},{key:"getBinding",value:function(e,t){return"color"===this.type?new ks(e):new _s(e)}}]),e}(),Ms=function(){function e(t,r){f(this,e),this.uniformNames=r.map((function(e){return"u_".concat(e)})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}return p(e,[{key:"setConstantPatternPositions",value:function(e,t){this.pixelRatioFrom=t.pixelRatio||1,this.pixelRatioTo=e.pixelRatio||1,this.patternFrom=t.tl.concat(t.br),this.patternTo=e.tl.concat(e.br)}},{key:"setUniform",value:function(e,t,r,n,i){var a="u_pattern_to"===i||"u_dash_to"===i?this.patternTo:"u_pattern_from"===i||"u_dash_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;a&&t.set(e,i,a)}},{key:"getBinding",value:function(e,t){return"u_pattern_from"===t||"u_pattern_to"===t||"u_dash_from"===t||"u_dash_to"===t?new ws(e):new _s(e)}}]),e}(),Is=function(){function e(t,r,n,i){f(this,e),this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=r.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===n?2:1,offset:0}})),this.paintVertexArray=new i}return p(e,[{key:"populatePaintArray",value:function(e,t,r,n,i,a){var o=this.paintVertexArray.length,s=this.expression.evaluate(new eo(0),t,{},i,n,a);this.paintVertexArray.resize(e),this._setPaintValue(o,e,s)}},{key:"updatePaintArray",value:function(e,t,r,n,i){var a=this.expression.evaluate({zoom:0},r,n,void 0,i);this._setPaintValue(e,t,a)}},{key:"_setPaintValue",value:function(e,t,r){if("color"===this.type)for(var n=Ts(r),i=e;i<t;i++)this.paintVertexArray.emplace(i,n[0],n[1]);else{for(var a=e;a<t;a++)this.paintVertexArray.emplace(a,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),Ps=function(){function e(t,r,n,i,a,o){f(this,e),this.expression=t,this.uniformNames=r.map((function(e){return"u_".concat(e,"_t")})),this.type=n,this.useIntegerZoom=i,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=r.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===n?4:2,offset:0}})),this.paintVertexArray=new o}return p(e,[{key:"populatePaintArray",value:function(e,t,r,n,i,a){var o=this.expression.evaluate(new eo(this.zoom),t,{},i,n,a),s=this.expression.evaluate(new eo(this.zoom+1),t,{},i,n,a),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,o,s)}},{key:"updatePaintArray",value:function(e,t,r,n,i){var a=this.expression.evaluate({zoom:this.zoom},r,n,void 0,i),o=this.expression.evaluate({zoom:this.zoom+1},r,n,void 0,i);this._setPaintValue(e,t,a,o)}},{key:"_setPaintValue",value:function(e,t,r,n){if("color"===this.type)for(var i=Ts(r),a=Ts(n),o=e;o<t;o++)this.paintVertexArray.emplace(o,i[0],i[1],a[0],a[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(e,t,r,n,i){var a=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,o=j(this.expression.interpolationFactor(a,this.zoom,this.zoom+1),0,1);t.set(e,i,o)}},{key:"getBinding",value:function(e,t){return new _s(e)}}]),e}(),Rs=function(){function e(t,r,n,i,a,o,s){f(this,e),this.expression=t,this.type=n,this.useIntegerZoom=i,this.zoom=a,this.layerId=s,this.paintVertexAttributes=("array"===n?us:cs).members;for(var l=0;l<r.length;++l);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}return p(e,[{key:"populatePaintArray",value:function(e,t,r){var n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(n,e,t.patterns&&t.patterns[this.layerId],r)}},{key:"updatePaintArray",value:function(e,t,r,n,i,a){this._setPaintValues(e,t,r.patterns&&r.patterns[this.layerId],a)}},{key:"_setPaintValues",value:function(e,t,r,n){if(n&&r){var i=r.min,a=r.mid,o=r.max,s=n[i],l=n[a],c=n[o];if(s&&l&&c)for(var u=e;u<t;u++)this._setPaintValue(this.zoomInPaintVertexArray,u,l,s),this._setPaintValue(this.zoomOutPaintVertexArray,u,l,c)}}},{key:"_setPaintValue",value:function(e,t,r,n){e.emplace(t,r.tl[0],r.tl[1],r.br[0],r.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],r.pixelRatio,n.pixelRatio)}},{key:"upload",value:function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}]),e}(),zs=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};f(this,e),this.binders={},this._buffers=[];var i=[];for(var a in t.paint._values)if(n(a)){var o=t.paint.get(a);if(o instanceof so&&Wn(o.property.specification)){var s=Os(a,t.type),l=o.value,c=o.property.specification.type,u=o.property.useIntegerZoom,h=o.property.specification["property-type"],d="cross-faded"===h||"cross-faded-data-driven"===h,p="line-dasharray"===String(a)&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==l.kind||p)if("source"===l.kind||p||d){var m=Ns(a,c,"source");this.binders[a]=d?new Rs(l,s,c,u,r,m,t.id):new Is(l,s,c,m),i.push("/a_".concat(a))}else{var v=Ns(a,c,"composite");this.binders[a]=new Ps(l,s,c,u,r,v),i.push("/z_".concat(a))}else this.binders[a]=d?new Ms(l.value,s):new Es(l.value,s,c),i.push("/u_".concat(a))}}this.cacheKey=i.sort().join("")}return p(e,[{key:"getMaxValue",value:function(e){var t=this.binders[e];return t instanceof Is||t instanceof Ps?t.maxValue:0}},{key:"populatePaintArrays",value:function(e,t,r,n,i,a){for(var o in this.binders){var s=this.binders[o];(s instanceof Is||s instanceof Ps||s instanceof Rs)&&s.populatePaintArray(e,t,r,n,i,a)}}},{key:"setConstantPatternPositions",value:function(e,t){for(var r in this.binders){var n=this.binders[r];n instanceof Ms&&n.setConstantPatternPositions(e,t)}}},{key:"updatePaintArrays",value:function(e,t,r,n,i,a){var o=!1;for(var s in e){var l,c=t.getPositions(s),u=d(c);try{for(u.s();!(l=u.n()).done;){var h=l.value,f=r.feature(h.index);for(var p in this.binders){var m=this.binders[p];if((m instanceof Is||m instanceof Ps||m instanceof Rs)&&!0===m.expression.isStateDependent){var v=n.paint.get(p);m.expression=v.value,m.updatePaintArray(h.start,h.end,f,e[s],i,a),o=!0}}}}catch(g){u.e(g)}finally{u.f()}}return o}},{key:"defines",value:function(){var e=[];for(var t in this.binders){var r=this.binders[t];(r instanceof Es||r instanceof Ms)&&e.push.apply(e,u(r.uniformNames.map((function(e){return"#define HAS_UNIFORM_".concat(e)}))))}return e}},{key:"getBinderAttributes",value:function(){var e=[];for(var t in this.binders){var r=this.binders[t];if(r instanceof Is||r instanceof Ps||r instanceof Rs)for(var n=0;n<r.paintVertexAttributes.length;n++)e.push(r.paintVertexAttributes[n].name)}return e}},{key:"getBinderUniforms",value:function(){var e=[];for(var t in this.binders){var r=this.binders[t];if(r instanceof Es||r instanceof Ms||r instanceof Ps){var n,i=d(r.uniformNames);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.push(a)}}catch(o){i.e(o)}finally{i.f()}}}return e}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(e){var t=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof Es||n instanceof Ms||n instanceof Ps){var i,a=d(n.uniformNames);try{for(a.s();!(i=a.n()).done;){var o=i.value;t.push({name:o,property:r,binding:n.getBinding(e,o)})}}catch(s){a.e(s)}finally{a.f()}}}return t}},{key:"setUniforms",value:function(e,t,r,n,i){var a,o=d(r);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=s.name,c=s.property,u=s.binding;this.binders[c].setUniform(e,u,i,n.get(c),l)}}catch(h){o.e(h)}finally{o.f()}}},{key:"updatePaintBuffers",value:function(e){for(var t in this._buffers=[],this.binders){var r=this.binders[t];if(e&&r instanceof Rs){var n=2===e.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;n&&this._buffers.push(n)}else(r instanceof Is||r instanceof Ps)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}},{key:"upload",value:function(e){for(var t in this.binders){var r=this.binders[t];(r instanceof Is||r instanceof Ps||r instanceof Rs)&&r.upload(e)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Is||t instanceof Ps||t instanceof Rs)&&t.destroy()}}}]),e}(),Ls=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};f(this,e),this.programConfigurations={};var i,a=d(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.programConfigurations[o.id]=new zs(o,r,n)}}catch(s){a.e(s)}finally{a.f()}this.needsUpload=!1,this._featureMap=new vs,this._bufferOffset=0}return p(e,[{key:"populatePaintArrays",value:function(e,t,r,n,i,a,o){for(var s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,n,i,a,o);void 0!==t.id&&this._featureMap.add(t.id,r,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(e,t,r,n,i){var a,o=d(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(e,this._featureMap,t,s,n,i)||this.needsUpload}}catch(l){o.e(l)}finally{o.f()}}},{key:"get",value:function(e){return this.programConfigurations[e]}},{key:"upload",value:function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()}}]),e}(),Ds={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Os(e,t){return Ds[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}var Fs={"line-pattern":{source:To,composite:To},"fill-pattern":{source:To,composite:To},"fill-extrusion-pattern":{source:To,composite:To},"line-dasharray":{source:Eo,composite:Eo}},js={color:{source:Ho,composite:Ao},number:{source:Zo,composite:Ho}};function Ns(e,t,r){var n=Fs[e];return n&&n[r]||js[t][r]}ea(Es,"ConstantBinder"),ea(Ms,"CrossFadedConstantBinder"),ea(Is,"SourceExpressionBinder"),ea(Rs,"CrossFadedCompositeBinder"),ea(Ps,"CompositeExpressionBinder"),ea(zs,"ProgramConfiguration",{omit:["_buffers"]}),ea(Ls,"ProgramConfigurationSet");var Bs="-transition",Zs=function(e){m(r,e);var t=v(r);function r(e,n){var i;if(f(this,r),(i=t.call(this)).id=e.id,i.type=e.type,i._featureFilter={filter:function(){return!0},needGeometry:!1,needFeature:!1},i._filterCompiled=!1,"custom"!==e.type&&(i.metadata=e.metadata,i.minzoom=e.minzoom,i.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(i.source=e.source,i.sourceLayer=e["source-layer"],i.filter=e.filter),n.layout&&(i._unevaluatedLayout=new oo(n.layout)),n.paint)){for(var a in i._transitionablePaint=new no(n.paint),e.paint)i.setPaintProperty(a,e.paint[a],{validate:!1});for(var o in e.layout)i.setLayoutProperty(o,e.layout[o],{validate:!1});i._transitioningPaint=i._transitionablePaint.untransitioned(),i.paint=new lo(n.paint)}return l(i)}return p(r,[{key:"getCrossfadeParameters",value:function(){return this._crossfadeParameters}},{key:"getLayoutProperty",value:function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}},{key:"setLayoutProperty",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(Yi,"layers.".concat(this.id,".layout.").concat(e),e,t,r)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}},{key:"getPaintProperty",value:function(e){return $(e,Bs)?this._transitionablePaint.getTransition(e.slice(0,-Bs.length)):this._transitionablePaint.getValue(e)}},{key:"setPaintProperty",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(Xi,"layers.".concat(this.id,".paint.").concat(e),e,t,r))return!1;if($(e,Bs))return this._transitionablePaint.setTransition(e.slice(0,-Bs.length),t||void 0),!1;var n=this._transitionablePaint._values[e],i="cross-faded-data-driven"===n.property.specification["property-type"],a=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var s=this._transitionablePaint._values[e].value;return s.isDataDriven()||a||i||this._handleOverridablePaintPropertyUpdate(e,o,s)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){}},{key:"getProgramIds",value:function(){return null}},{key:"getProgramConfiguration",value:function(e){return null}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,r){return!1}},{key:"isHidden",value:function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}},{key:"serialize",value:function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),J(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))}},{key:"_validate",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&$i(this,e.call(Hi,{key:t,layerType:this.type,objectKey:r,value:n,styleSpec:ct,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof so&&Wn(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}},{key:"compileFilter",value:function(){this._filterCompiled||(this._featureFilter=xi(this.filter),this._filterCompiled=!0)}},{key:"invalidateCompiledFilter",value:function(){this._filterCompiled=!1}},{key:"dynamicFilter",value:function(){return this._featureFilter.dynamicFilter}},{key:"dynamicFilterNeedsFeature",value:function(){return this._featureFilter.needFeature}}]),r}(lt),Us=bo([{name:"a_pos",components:2,type:"Int16"}],4),Vs=bo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),Ws=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,e),this.segments=t}return p(e,[{key:"prepareSegment",value:function(t,r,n,i){var a=this.segments[this.segments.length-1];return t>e.MAX_VERTEX_ARRAY_LENGTH&&te("Max vertices per segment is ".concat(e.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!a||a.vertexLength+t>e.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==i)&&(a={vertexOffset:r.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(a.sortKey=i),this.segments.push(a)),a}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var e,t=d(this.segments);try{for(t.s();!(e=t.n()).done;){var r=e.value;for(var n in r.vaos)r.vaos[n].destroy()}}catch(i){t.e(i)}finally{t.f()}}}],[{key:"simpleSegment",value:function(t,r,n,i){return new e([{vertexOffset:t,primitiveOffset:r,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}}]),e}();Ws.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ea(Ws,"SegmentVector");var Gs=8192,Hs=function(){function e(t,r){f(this,e),t&&(r?this.setSouthWest(t).setNorthEast(r):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}return p(e,[{key:"setNorthEast",value:function(e){return this._ne=e instanceof Ys?new Ys(e.lng,e.lat):Ys.convert(e),this}},{key:"setSouthWest",value:function(e){return this._sw=e instanceof Ys?new Ys(e.lng,e.lat):Ys.convert(e),this}},{key:"extend",value:function(t){var r,n,i=this._sw,a=this._ne;if(t instanceof Ys)r=t,n=t;else{if(!(t instanceof e))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(e.convert(t)):this.extend(Ys.convert(t)):"object"==typeof t&&null!==t&&t.hasOwnProperty("lat")&&t.hasOwnProperty("lon")?this.extend(Ys.convert(t)):this;if(r=t._sw,n=t._ne,!r||!n)return this}return i||a?(i.lng=Math.min(r.lng,i.lng),i.lat=Math.min(r.lat,i.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new Ys(r.lng,r.lat),this._ne=new Ys(n.lng,n.lat)),this}},{key:"getCenter",value:function(){return new Ys((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new Ys(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new Ys(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(e){var t=Ys.convert(e),r=t.lng,n=t.lat,i=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&i}}],[{key:"convert",value:function(t){return!t||t instanceof e?t:new e(t)}}]),e}(),Xs=6371008.8,Ys=function(){function e(t,r){if(f(this,e),isNaN(t)||isNaN(r))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(r,")"));if(this.lng=+t,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return p(e,[{key:"wrap",value:function(){return new e(B(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(e){var t=Math.PI/180,r=this.lat*t,n=e.lat*t,i=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((e.lng-this.lng)*t);return Xs*Math.acos(Math.min(i,1))}},{key:"toBounds",value:function(){var t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,r=t/Math.cos(Math.PI/180*this.lat);return new Hs(new e(this.lng-r,this.lat-t),new e(this.lng+r,this.lat+t))}}],[{key:"convert",value:function(t){if(t instanceof e)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new e(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new e(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),qs=2*Math.PI*Xs;function $s(e){return qs*Math.cos(e*Math.PI/180)}function Ks(e){return(180+e)/360}function Js(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Qs(e,t){return e/$s(t)}function el(e){return 360*e-180}function tl(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function rl(e,t){return e*$s(tl(t))}var nl=85.051129;function il(e){return 1/Math.cos(e*Math.PI/180)}var al=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;f(this,e),this.x=+t,this.y=+r,this.z=+n}return p(e,[{key:"toLngLat",value:function(){return new Ys(el(this.x),tl(this.y))}},{key:"toAltitude",value:function(){return rl(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/qs*il(tl(this.y))}}],[{key:"fromLngLat",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ys.convert(t);return new e(Ks(n.lng),Js(n.lat),Qs(r,n.lat))}}]),e}();function ol(e,t,r,n,i,a,o,s,l){var c=(t+n)/2,u=(r+i)/2,h=new E(c,u);s(h),function(e,t,r,n,i,a){var o=r-i,s=n-a;return Math.abs((n-t)*o-(r-e)*s)/Math.hypot(o,s)}(h.x,h.y,a.x,a.y,o.x,o.y)>=l?(ol(e,t,r,c,u,a,h,s,l),ol(e,c,u,n,i,h,o,s,l)):e.push(o)}function sl(e,t,r){var n=e[0],i=n.x,a=n.y;t(n);for(var o=[n],s=1;s<e.length;s++){var l=e[s],c=l.x,u=l.y;t(l),ol(o,i,a,c,u,n,l,t,r),i=c,a=u,n=l}return o}function ll(e,t,r,n){if(n(t,r)){var i=t.add(r)._mult(.5);ll(e,t,i,n),ll(e,i,r,n)}else e.push(r)}function cl(e,t){for(var r=e[0],n=[r],i=1;i<e.length;i++){var a=e[i];ll(n,r,a,t),r=a}return n}var ul=Math.pow(2,14)-1,hl=-ul-1;function dl(e,t){var r=Math.round(e.x*t),n=Math.round(e.y*t);return e.x=j(r,hl,ul),e.y=j(n,hl,ul),(r<e.x||r>e.x+1||n<e.y||n>e.y+1)&&te("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function fl(e,t,r){var n=e.loadGeometry(),i=e.extent,a=Gs/i;if(t&&r&&r.projection.isReprojectedInTileSpace)for(var o=1<<t.z,s=r.scale,l=r.x,c=r.y,u=r.projection,h=function(e){var r=el((t.x+e.x/i)/o),n=tl((t.y+e.y/i)/o),a=u.project(r,n);e.x=(a.x*s-l)*i,e.y=(a.y*s-c)*i},f=0;f<n.length;f++)if(1!==e.type)n[f]=sl(n[f],h,1);else{var p,m=[],v=d(n[f]);try{for(v.s();!(p=v.n()).done;){var g=p.value;g.x<0||g.x>=i||g.y<0||g.y>=i||(h(g),m.push(g))}}catch(k){v.e(k)}finally{v.f()}n[f]=m}var y,x=d(n);try{for(x.s();!(y=x.n()).done;){var b,_=y.value,w=d(_);try{for(w.s();!(b=w.n()).done;)dl(b.value,a)}catch(k){w.e(k)}finally{w.f()}}}catch(k){x.e(k)}finally{x.f()}return n}function pl(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?fl(e):[]}}function ml(e,t,r,n,i){e.emplaceBack(2*t+(n+1)/2,2*r+(i+1)/2)}function vl(e,t,r){var n=16384;e.emplaceBack(t.x,t.y,t.z,r[0]*n,r[1]*n,r[2]*n)}var gl=function(){function e(t){f(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new wo,this.indexArray=new jo,this.segments=new Ws,this.programConfigurations=new Ls(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return p(e,[{key:"populate",value:function(e,t,r,n){var i=this.layers[0],a=[],o=null;"circle"===i.type&&(o=i.layout.get("circle-sort-key"));var s,l=d(e);try{for(l.s();!(s=l.n()).done;){var c=s.value,u=c.feature,h=c.id,f=c.index,p=c.sourceLayerIndex,m=this.layers[0]._featureFilter.needGeometry,v=pl(u,m);if(this.layers[0]._featureFilter.filter(new eo(this.zoom),v,r)){var g=o?o.evaluate(v,{},r):void 0,y={id:h,properties:u.properties,type:u.type,sourceLayerIndex:p,index:f,geometry:m?v.geometry:fl(u,r,n),patterns:{},sortKey:g};a.push(y)}}}catch(T){l.e(T)}finally{l.f()}o&&a.sort((function(e,t){return e.sortKey-t.sortKey}));var x=null;"globe"===n.projection.name&&(this.globeExtVertexArray=new ls,x=n.projection);for(var b=0,_=a;b<_.length;b++){var w=_[b],k=w.geometry,S=w.index,C=w.sourceLayerIndex,A=e[S].feature;this.addFeature(w,k,S,t.availableImages,r,x),t.featureIndex.insert(A,k,S,C,this.index)}}},{key:"update",value:function(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Us.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Vs.members))),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}},{key:"addFeature",value:function(e,t,r,n,i,a){var o,s=d(t);try{for(s.s();!(o=s.n()).done;){var l,c=o.value,u=d(c);try{for(u.s();!(l=u.n()).done;){var h=l.value,f=h.x,p=h.y;if(!(f<0||f>=Gs||p<0||p>=Gs)){if(a){var m=a.projectTilePoint(f,p,i),v=a.upVector(i,f,p),g=this.globeExtVertexArray;vl(g,m,v),vl(g,m,v),vl(g,m,v),vl(g,m,v)}var y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),x=y.vertexLength;ml(this.layoutVertexArray,f,p,-1,-1),ml(this.layoutVertexArray,f,p,1,-1),ml(this.layoutVertexArray,f,p,1,1),ml(this.layoutVertexArray,f,p,-1,1),this.indexArray.emplaceBack(x,x+1,x+2),this.indexArray.emplaceBack(x,x+2,x+3),y.vertexLength+=4,y.primitiveLength+=2}}}catch(b){u.e(b)}finally{u.f()}}}catch(b){s.e(b)}finally{s.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{},n,i)}}]),e}();function yl(e,t){for(var r=0;r<e.length;r++)if(Tl(t,e[r]))return!0;for(var n=0;n<t.length;n++)if(Tl(e,t[n]))return!0;return!!wl(e,t)}function xl(e,t,r){return!!Tl(e,t)||!!Sl(t,e,r)}function bl(e,t){if(1===e.length)return Al(t,e[0]);for(var r=0;r<t.length;r++)for(var n=t[r],i=0;i<n.length;i++)if(Tl(e,n[i]))return!0;for(var a=0;a<e.length;a++)if(Al(t,e[a]))return!0;for(var o=0;o<t.length;o++)if(wl(e,t[o]))return!0;return!1}function _l(e,t,r){if(e.length>1){if(wl(e,t))return!0;for(var n=0;n<t.length;n++)if(Sl(t[n],e,r))return!0}for(var i=0;i<e.length;i++)if(Sl(e[i],t,r))return!0;return!1}function wl(e,t){if(0===e.length||0===t.length)return!1;for(var r=0;r<e.length-1;r++)for(var n=e[r],i=e[r+1],a=0;a<t.length-1;a++)if(kl(n,i,t[a],t[a+1]))return!0;return!1}function kl(e,t,r,n){return re(e,r,n)!==re(t,r,n)&&re(e,t,r)!==re(e,t,n)}function Sl(e,t,r){var n=r*r;if(1===t.length)return e.distSqr(t[0])<n;for(var i=1;i<t.length;i++)if(Cl(e,t[i-1],t[i])<n)return!0;return!1}function Cl(e,t,r){var n=t.distSqr(r);if(0===n)return e.distSqr(t);var i=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/n;return e.distSqr(i<0?t:i>1?r:r.sub(t)._mult(i)._add(t))}function Al(e,t){for(var r,n,i,a=!1,o=0;o<e.length;o++)for(var s=0,l=(r=e[o]).length-1;s<r.length;l=s++)n=r[s],i=r[l],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(a=!a);return a}function Tl(e,t){for(var r=!1,n=0,i=e.length-1;n<e.length;i=n++){var a=e[n],o=e[i];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(r=!r)}return r}function El(e,t,r,n,i){var a,o=d(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t<=s.x&&r<=s.y&&n>=s.x&&i>=s.y)return!0}}catch(f){o.e(f)}finally{o.f()}var l=[new E(t,r),new E(t,i),new E(n,i),new E(n,r)];if(e.length>2){var c,u=d(l);try{for(u.s();!(c=u.n()).done;)if(Tl(e,c.value))return!0}catch(f){u.e(f)}finally{u.f()}}for(var h=0;h<e.length-1;h++)if(Ml(e[h],e[h+1],l))return!0;return!1}function Ml(e,t,r){var n=r[0],i=r[2];if(e.x<n.x&&t.x<n.x||e.x>i.x&&t.x>i.x||e.y<n.y&&t.y<n.y||e.y>i.y&&t.y>i.y)return!1;var a=re(e,t,r[0]);return a!==re(e,t,r[1])||a!==re(e,t,r[2])||a!==re(e,t,r[3])}function Il(e,t,r){var n=t.paint.get(e).value;return"constant"===n.kind?n.value:r.programConfigurations.get(t.id).getMaxValue(e)}function Pl(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Rl(e,t,r,n,i){if(!t[0]&&!t[1])return e;var a=E.convert(t)._mult(i);"viewport"===r&&a._rotate(-n);for(var o=[],s=0;s<e.length;s++)o.push(e[s].sub(a));return o}function zl(e,t,r,n){var i=E.convert(e)._mult(n);return"viewport"===t&&i._rotate(-r),i}ea(gl,"CircleBucket",{omit:["layers"]});var Ll=new mo({"circle-sort-key":new uo(ct.layout_circle["circle-sort-key"])}),Dl={paint:new mo({"circle-radius":new uo(ct.paint_circle["circle-radius"]),"circle-color":new uo(ct.paint_circle["circle-color"]),"circle-blur":new uo(ct.paint_circle["circle-blur"]),"circle-opacity":new uo(ct.paint_circle["circle-opacity"]),"circle-translate":new co(ct.paint_circle["circle-translate"]),"circle-translate-anchor":new co(ct.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new co(ct.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new co(ct.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new uo(ct.paint_circle["circle-stroke-width"]),"circle-stroke-color":new uo(ct.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new uo(ct.paint_circle["circle-stroke-opacity"])}),layout:Ll},Ol=1e-6,Fl="undefined"!=typeof Float32Array?Float32Array:Array;function jl(){var e=new Fl(9);return Fl!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Nl(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=r[0],f=r[1],p=r[2],m=r[3],v=r[4],g=r[5],y=r[6],x=r[7],b=r[8];return e[0]=d*n+f*o+p*c,e[1]=d*i+f*s+p*u,e[2]=d*a+f*l+p*h,e[3]=m*n+v*o+g*c,e[4]=m*i+v*s+g*u,e[5]=m*a+v*l+g*h,e[6]=y*n+x*o+b*c,e[7]=y*i+x*s+b*u,e[8]=y*a+x*l+b*h,e}function Bl(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Zl(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],v=t[14],g=t[15],y=r*s-n*o,x=r*l-i*o,b=r*c-a*o,_=n*l-i*s,w=n*c-a*s,k=i*c-a*l,S=u*m-h*p,C=u*v-d*p,A=u*g-f*p,T=h*v-d*m,E=h*g-f*m,M=d*g-f*v,I=y*M-x*E+b*T+_*A-w*C+k*S;return I?(e[0]=(s*M-l*E+c*T)*(I=1/I),e[1]=(i*E-n*M-a*T)*I,e[2]=(m*k-v*w+g*_)*I,e[3]=(d*w-h*k-f*_)*I,e[4]=(l*A-o*M-c*C)*I,e[5]=(r*M-i*A+a*C)*I,e[6]=(v*b-p*k-g*x)*I,e[7]=(u*k-d*b+f*x)*I,e[8]=(o*E-s*A+c*S)*I,e[9]=(n*A-r*E-a*S)*I,e[10]=(p*w-m*b+g*y)*I,e[11]=(h*b-u*w-f*y)*I,e[12]=(s*C-o*T-l*S)*I,e[13]=(r*T-n*C+i*S)*I,e[14]=(m*x-p*_-v*y)*I,e[15]=(u*_-h*x+d*y)*I,e):null}function Ul(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],m=t[12],v=t[13],g=t[14],y=t[15],x=r[0],b=r[1],_=r[2],w=r[3];return e[0]=x*n+b*s+_*h+w*m,e[1]=x*i+b*l+_*d+w*v,e[2]=x*a+b*c+_*f+w*g,e[3]=x*o+b*u+_*p+w*y,e[4]=(x=r[4])*n+(b=r[5])*s+(_=r[6])*h+(w=r[7])*m,e[5]=x*i+b*l+_*d+w*v,e[6]=x*a+b*c+_*f+w*g,e[7]=x*o+b*u+_*p+w*y,e[8]=(x=r[8])*n+(b=r[9])*s+(_=r[10])*h+(w=r[11])*m,e[9]=x*i+b*l+_*d+w*v,e[10]=x*a+b*c+_*f+w*g,e[11]=x*o+b*u+_*p+w*y,e[12]=(x=r[12])*n+(b=r[13])*s+(_=r[14])*h+(w=r[15])*m,e[13]=x*i+b*l+_*d+w*v,e[14]=x*a+b*c+_*f+w*g,e[15]=x*o+b*u+_*p+w*y,e}function Vl(e,t,r){var n,i,a,o,s,l,c,u,h,d,f,p,m=r[0],v=r[1],g=r[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*g+t[12],e[13]=t[1]*m+t[5]*v+t[9]*g+t[13],e[14]=t[2]*m+t[6]*v+t[10]*g+t[14],e[15]=t[3]*m+t[7]*v+t[11]*g+t[15]):(i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=n=t[0],e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=n*m+s*v+h*g+t[12],e[13]=i*m+l*v+d*g+t[13],e[14]=a*m+c*v+f*g+t[14],e[15]=o*m+u*v+p*g+t[15]),e}function Wl(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Gl(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*n,e[5]=o*i+u*n,e[6]=s*i+h*n,e[7]=l*i+d*n,e[8]=c*i-a*n,e[9]=u*i-o*n,e[10]=h*i-s*n,e[11]=d*i-l*n,e}function Hl(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*n,e[1]=o*i-u*n,e[2]=s*i-h*n,e[3]=l*i-d*n,e[8]=a*n+c*i,e[9]=o*n+u*i,e[10]=s*n+h*i,e[11]=l*n+d*i,e}function Xl(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Yl(e,t,r){var n,i,a,o=r[0],s=r[1],l=r[2],c=Math.hypot(o,s,l);return c<Ol?null:(o*=c=1/c,s*=c,l*=c,n=Math.sin(t),i=Math.cos(t),e[0]=o*o*(a=1-i)+i,e[1]=s*o*a+l*n,e[2]=l*o*a-s*n,e[3]=0,e[4]=o*s*a-l*n,e[5]=s*s*a+i,e[6]=l*s*a+o*n,e[7]=0,e[8]=o*l*a+s*n,e[9]=s*l*a-o*n,e[10]=l*l*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ql=Ul;function $l(){var e=new Fl(3);return Fl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Kl(e){var t=new Fl(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Jl(e){return Math.hypot(e[0],e[1],e[2])}function Ql(e,t,r){var n=new Fl(3);return n[0]=e,n[1]=t,n[2]=r,n}function ec(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function tc(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function rc(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function nc(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function ic(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function ac(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function oc(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function sc(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function lc(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cc(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],l=r[2];return e[0]=i*l-a*s,e[1]=a*o-n*l,e[2]=n*s-i*o,e}function uc(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return e[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/(o=o||1),e[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,e[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,e}function hc(e,t,r){var n=r[0],i=r[1],a=r[2],o=t[0],s=t[1],l=t[2],c=i*l-a*s,u=a*o-n*l,h=n*s-i*o,d=i*h-a*u,f=a*c-n*h,p=n*u-i*c,m=2*r[3];return u*=m,h*=m,f*=2,p*=2,e[0]=o+(c*=m)+(d*=2),e[1]=s+u+f,e[2]=l+h+p,e}var dc,fc=tc,pc=rc,mc=Jl;function vc(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function gc(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=r*o,e[1]=n*o,e[2]=i*o,e[3]=a*o,e}function yc(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,e}function xc(){var e=new Fl(4);return Fl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function bc(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function _c(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+o*s,e[1]=i*l+a*s,e[2]=a*l-i*s,e[3]=o*l-n*s,e}function wc(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l-a*s,e[1]=i*l+o*s,e[2]=a*l+n*s,e[3]=o*l-i*s,e}$l(),dc=new Fl(4),Fl!=Float32Array&&(dc[0]=0,dc[1]=0,dc[2]=0,dc[3]=0);var kc=gc;$l(),Ql(1,0,0),Ql(0,1,0),xc(),xc(),jl();var Sc=function(){function e(t,r){f(this,e),this.pos=t,this.dir=r}return p(e,[{key:"intersectsPlane",value:function(e,t,r){var n=lc(t,this.dir);if(Math.abs(n)<1e-6)return!1;var i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/n;return r[0]=this.pos[0]+this.dir[0]*i,r[1]=this.pos[1]+this.dir[1]*i,r[2]=this.pos[2]+this.dir[2]*i,!0}},{key:"closestPointOnSphere",value:function(e,t,r){if(function(e,t){var r=e[0],n=e[1],i=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(r-a)<=Ol*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=Ol*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=Ol*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,e)||0===t)return r[0]=r[1]=r[2]=0,!1;var n=h(this.dir,3),i=n[0],a=n[1],o=n[2],s=this.pos[0]-e[0],l=this.pos[1]-e[1],c=this.pos[2]-e[2],u=i*i+a*a+o*o,d=2*(s*i+l*a+c*o),f=d*d-4*u*(s*s+l*l+c*c-t*t);if(f<0){var p=Math.max(-d/2,0),m=s+i*p,v=l+a*p,g=c+o*p,y=Math.hypot(m,v,g);return r[0]=m*t/y,r[1]=v*t/y,r[2]=g*t/y,!1}var x=(-d-Math.sqrt(f))/(2*u);if(x<0){var b=Math.hypot(s,l,c);return r[0]=s*t/b,r[1]=l*t/b,r[2]=c*t/b,!1}return r[0]=s+i*x,r[1]=l+a*x,r[2]=c+o*x,!0}}]),e}(),Cc=function(){function e(t,r,n,i,a){f(this,e),this.TL=t,this.TR=r,this.BR=n,this.BL=i,this.horizon=a}return p(e,null,[{key:"fromInvProjectionMatrix",value:function(t,r,n){var i=[-1,1,1],a=[1,1,1],o=[1,-1,1],s=[-1,-1,1];return new e(uc(i,i,t),uc(a,a,t),uc(o,o,t),uc(s,s,t),r/n)}}]),e}(),Ac=function(){function e(t,r){f(this,e),this.points=t,this.planes=r}return p(e,null,[{key:"fromInvProjectionMatrix",value:function(t,r,n,i){var a=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){var n=yc([],e,t),o=1/n[3]/r*a;return function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}(n,n,[o,o,i?1/n[3]:o,o])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var t=sc([],cc([],fc([],o[e[0]],o[e[1]]),fc([],o[e[2]],o[e[1]]))),r=-lc(t,o[e[1]]);return t.concat(r)}));return new e(o,s)}}]),e}(),Tc=function(){function e(t,r){f(this,e),this.min=t,this.max=r,this.center=ac([],ec([],this.min,this.max),.5)}return p(e,[{key:"quadrant",value:function(t){for(var r=[t%2==0,t<2],n=Kl(this.min),i=Kl(this.max),a=0;a<r.length;a++)n[a]=r[a]?this.min[a]:this.center[a],i[a]=r[a]?this.center[a]:this.max[a];return i[2]=this.max[2],new e(n,i)}},{key:"distanceX",value:function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}},{key:"distanceY",value:function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}},{key:"distanceZ",value:function(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}},{key:"getCorners",value:function(){var e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}},{key:"intersects",value:function(e){for(var t=this.getCorners(),r=!0,n=0;n<e.planes.length;n++){for(var i=e.planes[n],a=0,o=0;o<t.length;o++)a+=lc(i,t[o])+i[3]>=0;if(0===a)return 0;a!==t.length&&(r=!1)}if(r)return 2;for(var s=0;s<3;s++){for(var l=Number.MAX_VALUE,c=-Number.MAX_VALUE,u=0;u<e.points.length;u++){var h=e.points[u][s]-this.min[s];l=Math.min(l,h),c=Math.max(c,h)}if(c<0||l>this.max[s]-this.min[s])return 0}return 1}}],[{key:"fromPoints",value:function(t){var r,n=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0],a=d(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;nc(n,n,o),ic(i,i,o)}}catch(s){a.e(s)}finally{a.f()}return new e(n,i)}},{key:"applyTransform",value:function(t,r){for(var n=t.getCorners(),i=0;i<n.length;++i)uc(n[i],n[i],r);return e.fromPoints(n)}}]),e}();function Ec(e,t,r,n,i,a,o,s,l){if(a&&e.queryGeometry.isAboveHorizon)return!1;a&&(l*=e.pixelToTileUnitsFactor);var c,u=e.tileID.canonical,h=r.projection.upVectorScale(u,r.center.lat,r.worldSize).metersToTile,f=d(t);try{for(f.s();!(c=f.n()).done;){var p,m=c.value,v=d(m);try{var g=function(){var t=p.value,c=t.add(s),d=i&&r.elevation?r.elevation.exaggeration()*i.getElevationAt(c.x,c.y,!0):0,f=r.projection.projectTilePoint(c.x,c.y,u);if(d>0){var m=r.projection.upVector(u,c.x,c.y);f.x+=m[0]*h*d,f.y+=m[1]*h*d,f.z+=m[2]*h*d}var v=a?c:Mc(f.x,f.y,f.z,n),g=a?e.tilespaceRays.map((function(e){return Rc(e,d)})):e.queryGeometry.screenGeometry,y=yc([],[f.x,f.y,f.z,1],n);if(!o&&a?l*=y[3]/r.cameraToCenterDistance:o&&!a&&(l*=r.cameraToCenterDistance/y[3]),a){var x=tl((t.y/Gs+u.y)/(1<<u.z));l/=r.projection.pixelsPerMeter(x,1)/Qs(1,x)}if(xl(g,v,l))return{v:!0}};for(v.s();!(p=v.n()).done;){var y=g();if("object"===typeof y)return y.v}}catch(x){v.e(x)}finally{v.f()}}}catch(x){f.e(x)}finally{f.f()}return!1}function Mc(e,t,r,n){var i=yc([],[e,t,r,1],n);return new E(i[0]/i[3],i[1]/i[3])}var Ic=Ql(0,0,0),Pc=Ql(0,0,1);function Rc(e,t){var r=$l();return Ic[2]=t,e.intersectsPlane(Ic,Pc,r),new E(r[0],r[1])}var zc=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r)}(gl);function Lc(e,t,r,n){var i=t.width,a=t.height;if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==i*a*r)throw new RangeError("mismatched image size")}else n=new Uint8Array(i*a*r);return e.width=i,e.height=a,e.data=n,e}function Dc(e,t,r){var n=t.width,i=t.height;n===e.width&&i===e.height||(Oc(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,n),height:Math.min(e.height,i)},r),e.width=n,e.height=i,e.data=t.data)}function Oc(e,t,r,n,i,a){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,l=0;l<i.height;l++)for(var c=((r.y+l)*e.width+r.x)*a,u=((n.y+l)*t.width+n.x)*a,h=0;h<i.width*a;h++)s[u+h]=o[c+h];return t}ea(zc,"HeatmapBucket",{omit:["layers"]});var Fc=function(){function e(t,r){f(this,e),Lc(this,t,1,r)}return p(e,[{key:"resize",value:function(t){Dc(this,new e(t),1)}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,r,n,i){Oc(e,t,r,n,i,1)}}]),e}(),jc=function(){function e(t,r){f(this,e),Lc(this,t,4,r)}return p(e,[{key:"resize",value:function(t){Dc(this,new e(t),4)}},{key:"replace",value:function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,r,n,i){Oc(e,t,r,n,i,4)}}]),e}();ea(Fc,"AlphaImage"),ea(jc,"RGBAImage");var Nc={paint:new mo({"heatmap-radius":new uo(ct.paint_heatmap["heatmap-radius"]),"heatmap-weight":new uo(ct.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new co(ct.paint_heatmap["heatmap-intensity"]),"heatmap-color":new po(ct.paint_heatmap["heatmap-color"]),"heatmap-opacity":new co(ct.paint_heatmap["heatmap-opacity"])})};function Bc(e){var t={},r=e.resolution||256,n=e.clips?e.clips.length:1,i=e.image||new jc({width:r,height:n}),a=function(r,n,a){t[e.evaluationKey]=a;var o=e.expression.evaluate(t);i.data[r+n+0]=Math.floor(255*o.r/o.a),i.data[r+n+1]=Math.floor(255*o.g/o.a),i.data[r+n+2]=Math.floor(255*o.b/o.a),i.data[r+n+3]=Math.floor(255*o.a)};if(e.clips)for(var o=0,s=0;o<n;++o,s+=4*r)for(var l=0,c=0;l<r;l++,c+=4){var u=l/(r-1),h=e.clips[o];a(s,c,h.start*(1-u)+h.end*u)}else for(var d=0,f=0;d<r;d++,f+=4)a(0,f,d/(r-1));return i}var Zc={paint:new mo({"hillshade-illumination-direction":new co(ct.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new co(ct.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new co(ct.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new co(ct.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new co(ct.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new co(ct.paint_hillshade["hillshade-accent-color"])})},Uc=bo([{name:"a_pos",components:2,type:"Int16"}],4).members,Vc={exports:{}};function Wc(e,t,r){r=r||2;var n,i,a,o,s,l,c,u=t&&t.length,h=u?t[0]*r:e.length,d=Gc(e,0,h,r,!0),f=[];if(!d||d.next===d.prev)return f;if(u&&(d=function(e,t,r,n){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=Gc(e,t[i]*n,i<a-1?t[i+1]*n:e.length,n,!1))===o.next&&(o.steiner=!0),s.push(ru(o));for(s.sort(Jc),i=0;i<s.length;i++)r=Qc(s[i],r);return r}(e,t,d,r)),e.length>80*r){n=a=e[0],i=o=e[1];for(var p=r;p<h;p+=r)(s=e[p])<n&&(n=s),(l=e[p+1])<i&&(i=l),s>a&&(a=s),l>o&&(o=l);c=0!==(c=Math.max(a-n,o-i))?32767/c:0}return Xc(d,f,r,n,i,c,0),f}function Gc(e,t,r,n,i){var a,o;if(i===mu(e,t,r,n)>0)for(a=t;a<r;a+=n)o=du(a,e[a],e[a+1],o);else for(a=r-n;a>=t;a-=n)o=du(a,e[a],e[a+1],o);return o&&ou(o,o.next)&&(fu(o),o=o.next),o}function Hc(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!ou(n,n.next)&&0!==au(n.prev,n,n.next))n=n.next;else{if(fu(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function Xc(e,t,r,n,i,a,o){if(e){!o&&a&&function(e,t,r,n){var i=e;do{0===i.z&&(i.z=tu(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,a,o,s,l,c=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,n=r,s=0,t=0;t<c&&(s++,n=n.nextZ);t++);for(l=c;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,c*=2}while(o>1)}(i)}(e,n,i,a);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?qc(e,n,i,a):Yc(e))t.push(s.i/r|0),t.push(e.i/r|0),t.push(l.i/r|0),fu(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?Xc(e=$c(Hc(e),t,r),t,r,n,i,a,2):2===o&&Kc(e,t,r,n,i,a):Xc(Hc(e),t,r,n,i,a,1);break}}}function Yc(e){var t=e.prev,r=e,n=e.next;if(au(t,r,n)>=0)return!1;for(var i=t.x,a=r.x,o=n.x,s=t.y,l=r.y,c=n.y,u=i<a?i<o?i:o:a<o?a:o,h=s<l?s<c?s:c:l<c?l:c,d=i>a?i>o?i:o:a>o?a:o,f=s>l?s>c?s:c:l>c?l:c,p=n.next;p!==t;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&nu(i,s,a,l,o,c,p.x,p.y)&&au(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function qc(e,t,r,n){var i=e.prev,a=e,o=e.next;if(au(i,a,o)>=0)return!1;for(var s=i.x,l=a.x,c=o.x,u=i.y,h=a.y,d=o.y,f=s<l?s<c?s:c:l<c?l:c,p=u<h?u<d?u:d:h<d?h:d,m=s>l?s>c?s:c:l>c?l:c,v=u>h?u>d?u:d:h>d?h:d,g=tu(f,p,t,r,n),y=tu(m,v,t,r,n),x=e.prevZ,b=e.nextZ;x&&x.z>=g&&b&&b.z<=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=v&&x!==i&&x!==o&&nu(s,u,l,h,c,d,x.x,x.y)&&au(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=v&&b!==i&&b!==o&&nu(s,u,l,h,c,d,b.x,b.y)&&au(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=g;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=v&&x!==i&&x!==o&&nu(s,u,l,h,c,d,x.x,x.y)&&au(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=v&&b!==i&&b!==o&&nu(s,u,l,h,c,d,b.x,b.y)&&au(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function $c(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;!ou(i,a)&&su(i,n,n.next,a)&&uu(i,a)&&uu(a,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(a.i/r|0),fu(n),fu(n.next),n=e=a),n=n.next}while(n!==e);return Hc(n)}function Kc(e,t,r,n,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&iu(o,s)){var l=hu(o,s);return o=Hc(o,o.next),l=Hc(l,l.next),Xc(o,t,r,n,i,a,0),void Xc(l,t,r,n,i,a,0)}s=s.next}o=o.next}while(o!==e)}function Jc(e,t){return e.x-t.x}function Qc(e,t){var r=function(e,t){var r,n=t,i=e.x,a=e.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o&&(o=s,r=n.x<n.next.x?n:n.next,s===i))return r}n=n.next}while(n!==t);if(!r)return null;var l,c=r,u=r.x,h=r.y,d=1/0;n=r;do{i>=n.x&&n.x>=u&&i!==n.x&&nu(a<h?i:o,a,u,h,a<h?o:i,a,n.x,n.y)&&(l=Math.abs(a-n.y)/(i-n.x),uu(n,e)&&(l<d||l===d&&(n.x>r.x||n.x===r.x&&eu(r,n)))&&(r=n,d=l)),n=n.next}while(n!==c);return r}(e,t);if(!r)return t;var n=hu(r,e);return Hc(n,n.next),Hc(r,r.next)}function eu(e,t){return au(e.prev,e,t.prev)<0&&au(t.next,e,e.next)<0}function tu(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ru(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function nu(e,t,r,n,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(n-s)>=(r-o)*(t-s)&&(r-o)*(a-s)>=(i-o)*(n-s)}function iu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&su(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(uu(e,t)&&uu(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(au(e.prev,e,t.prev)||au(e,t.prev,t))||ou(e,t)&&au(e.prev,e,e.next)>0&&au(t.prev,t,t.next)>0)}function au(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function ou(e,t){return e.x===t.x&&e.y===t.y}function su(e,t,r,n){var i=cu(au(e,t,r)),a=cu(au(e,t,n)),o=cu(au(r,n,e)),s=cu(au(r,n,t));return i!==a&&o!==s||!(0!==i||!lu(e,r,t))||!(0!==a||!lu(e,n,t))||!(0!==o||!lu(r,e,n))||!(0!==s||!lu(r,t,n))}function lu(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function cu(e){return e>0?1:e<0?-1:0}function uu(e,t){return au(e.prev,e,e.next)<0?au(e,t,e.next)>=0&&au(e,e.prev,t)>=0:au(e,t,e.prev)<0||au(e,e.next,t)<0}function hu(e,t){var r=new pu(e.i,e.x,e.y),n=new pu(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function du(e,t,r,n){var i=new pu(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function fu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function pu(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function mu(e,t,r,n){for(var i=0,a=t,o=r-n;a<r;a+=n)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}function vu(e,t,r,n,i){gu(e,t,r||0,n||e.length-1,i||xu)}function gu(e,t,r,n,i){for(;n>r;){if(n-r>600){var a=n-r+1,o=t-r+1,s=Math.log(a),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1);gu(e,t,Math.max(r,Math.floor(t-o*l/a+c)),Math.min(n,Math.floor(t+(a-o)*l/a+c)),i)}var u=e[t],h=r,d=n;for(yu(e,r,t),i(e[n],u)>0&&yu(e,r,n);h<d;){for(yu(e,h,d),h++,d--;i(e[h],u)<0;)h++;for(;i(e[d],u)>0;)d--}0===i(e[r],u)?yu(e,r,d):yu(e,++d,n),d<=t&&(r=d+1),t<=d&&(n=d-1)}}function yu(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function xu(e,t){return e<t?-1:e>t?1:0}function bu(e,t){var r=e.length;if(r<=1)return[e];for(var n,i,a=[],o=0;o<r;o++){var s=ne(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(n&&a.push(n),n=[e[o]]):n.push(e[o]))}if(n&&a.push(n),t>1)for(var l=0;l<a.length;l++)a[l].length<=t||(vu(a[l],t,1,a[l].length-1,_u),a[l]=a[l].slice(0,t));return a}function _u(e,t){return t.area-e.area}function wu(e,t,r){var n,i=r.patternDependencies,a=!1,o=d(t);try{for(o.s();!(n=o.n()).done;){var s=n.value.paint.get("".concat(e,"-pattern"));s.isConstant()||(a=!0);var l=s.constantOr(null);l&&(a=!0,i[l.to]=!0,i[l.from]=!0)}}catch(c){o.e(c)}finally{o.f()}return a}function ku(e,t,r,n,i){var a,o=i.patternDependencies,s=d(t);try{for(s.s();!(a=s.n()).done;){var l=a.value,c=l.paint.get("".concat(e,"-pattern")).value;if("constant"!==c.kind){var u=c.evaluate({zoom:n-1},r,{},i.availableImages),h=c.evaluate({zoom:n},r,{},i.availableImages),f=c.evaluate({zoom:n+1},r,{},i.availableImages);u=u&&u.name?u.name:u,h=h&&h.name?h.name:h,f=f&&f.name?f.name:f,o[u]=!0,o[h]=!0,o[f]=!0,r.patterns[l.id]={min:u,mid:h,max:f}}}}catch(p){s.e(p)}finally{s.f()}return r}Vc.exports=Wc,Vc.exports.default=Wc,Wc.deviation=function(e,t,r,n){var i=t&&t.length,a=Math.abs(mu(e,0,i?t[0]*r:e.length,r));if(i)for(var o=0,s=t.length;o<s;o++)a-=Math.abs(mu(e,t[o]*r,o<s-1?t[o+1]*r:e.length,r));var l=0;for(o=0;o<n.length;o+=3){var c=n[o]*r,u=n[o+1]*r,h=n[o+2]*r;l+=Math.abs((e[c]-e[h])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[h+1]-e[c+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},Wc.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)r.vertices.push(e[i][a][o]);i>0&&r.holes.push(n+=e[i-1].length)}return r};var Su=function(){function e(t){f(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new wo,this.indexArray=new jo,this.indexArray2=new Wo,this.programConfigurations=new Ls(t.layers,t.zoom),this.segments=new Ws,this.segments2=new Ws,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.projection=t.projection}return p(e,[{key:"populate",value:function(e,t,r,n){this.hasPattern=wu("fill",this.layers,t);var i,a=this.layers[0].layout.get("fill-sort-key"),o=[],s=d(e);try{for(s.s();!(i=s.n()).done;){var l=i.value,c=l.feature,u=l.id,h=l.index,f=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,m=pl(c,p);if(this.layers[0]._featureFilter.filter(new eo(this.zoom),m,r)){var v=a?a.evaluate(m,{},r,t.availableImages):void 0,g={id:u,properties:c.properties,type:c.type,sourceLayerIndex:f,index:h,geometry:p?m.geometry:fl(c,r,n),patterns:{},sortKey:v};o.push(g)}}}catch(C){s.e(C)}finally{s.f()}a&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=0,x=o;y<x.length;y++){var b=x[y],_=b.geometry,w=b.index,k=b.sourceLayerIndex;if(this.hasPattern){var S=ku("fill",this.layers,b,this.zoom,t);this.patternFeatures.push(S)}else this.addFeature(b,_,w,r,{},t.availableImages);t.featureIndex.insert(e[w].feature,_,w,k,this.index)}}},{key:"update",value:function(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}},{key:"addFeatures",value:function(e,t,r,n,i){var a,o=d(this.patternFeatures);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.addFeature(s,s.geometry,s.index,t,r,n)}}catch(l){o.e(l)}finally{o.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Uc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(e,t,r,n,i){var a,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=d(bu(t,500));try{for(s.s();!(a=s.n()).done;){var l,c=a.value,u=0,h=d(c);try{for(h.s();!(l=h.n()).done;)u+=l.value.length}catch(C){h.e(C)}finally{h.f()}var f,p=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),m=p.vertexLength,v=[],g=[],y=d(c);try{for(y.s();!(f=y.n()).done;){var x=f.value;if(0!==x.length){x!==c[0]&&g.push(v.length/2);var b=this.segments2.prepareSegment(x.length,this.layoutVertexArray,this.indexArray2),_=b.vertexLength;this.layoutVertexArray.emplaceBack(x[0].x,x[0].y),this.indexArray2.emplaceBack(_+x.length-1,_),v.push(x[0].x),v.push(x[0].y);for(var w=1;w<x.length;w++)this.layoutVertexArray.emplaceBack(x[w].x,x[w].y),this.indexArray2.emplaceBack(_+w-1,_+w),v.push(x[w].x),v.push(x[w].y);b.vertexLength+=x.length,b.primitiveLength+=x.length}}}catch(C){y.e(C)}finally{y.f()}for(var k=Vc.exports(v,g),S=0;S<k.length;S+=3)this.indexArray.emplaceBack(m+k[S],m+k[S+1],m+k[S+2]);p.vertexLength+=u,p.primitiveLength+=k.length/3}}catch(C){s.e(C)}finally{s.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,o,n)}}]),e}();ea(Su,"FillBucket",{omit:["layers","patternFeatures"]});var Cu=new mo({"fill-sort-key":new uo(ct.layout_fill["fill-sort-key"])}),Au={paint:new mo({"fill-antialias":new co(ct.paint_fill["fill-antialias"]),"fill-opacity":new uo(ct.paint_fill["fill-opacity"]),"fill-color":new uo(ct.paint_fill["fill-color"]),"fill-outline-color":new uo(ct.paint_fill["fill-outline-color"]),"fill-translate":new co(ct.paint_fill["fill-translate"]),"fill-translate-anchor":new co(ct.paint_fill["fill-translate-anchor"]),"fill-pattern":new ho(ct.paint_fill["fill-pattern"])}),layout:Cu},Tu=bo([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Eu=bo([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Mu=bo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),Iu=Tu.members,Pu={},Ru=E,zu=Lu;function Lu(e,t,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=i,e.readFields(Du,this,t)}function Du(e,t,r){1==e?t.id=r.readVarint():2==e?function(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[n]=i}}(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function Ou(e){for(var t,r,n=0,i=0,a=e.length,o=a-1;i<a;o=i++)n+=((r=e[o]).x-(t=e[i]).x)*(t.y+r.y);return n}Lu.types=["Unknown","Point","LineString","Polygon"],Lu.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,n=1,i=0,a=0,o=0,s=[];e.pos<r;){if(i<=0){var l=e.readVarint();n=7&l,i=l>>3}if(i--,1===n||2===n)a+=e.readSVarint(),o+=e.readSVarint(),1===n&&(t&&s.push(t),t=[]),t.push(new Ru(a,o));else{if(7!==n)throw new Error("unknown command "+n);t&&t.push(t[0].clone())}}return t&&s.push(t),s},Lu.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,i=0,a=0,o=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(n<=0){var u=e.readVarint();r=7&u,n=u>>3}if(n--,1===r||2===r)(i+=e.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=e.readSVarint())<l&&(l=a),a>c&&(c=a);else if(7!==r)throw new Error("unknown command "+r)}return[o,l,s,c]},Lu.prototype.toGeoJSON=function(e,t,r){var n,i,a=this.extent*Math.pow(2,r),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=Lu.types[this.type];function u(e){for(var t=0;t<e.length;t++){var r=e[t];e[t]=[360*(r.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(n=0;n<l.length;n++)h[n]=l[n][0];u(l=h);break;case 2:for(n=0;n<l.length;n++)u(l[n]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var r,n,i=[],a=0;a<t;a++){var o=Ou(e[a]);0!==o&&(void 0===n&&(n=o<0),n===o<0?(r&&i.push(r),r=[e[a]]):r.push(e[a]))}return r&&i.push(r),i}(l),n=0;n<l.length;n++)for(i=0;i<l[n].length;i++)u(l[n][i])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Fu=zu,ju=Nu;function Nu(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Bu,this,t),this.length=this._features.length}function Bu(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}(r))}Nu.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Fu(this._pbf,t,this.extent,this._keys,this._values)};var Zu=ju;function Uu(e,t,r){if(3===e){var n=new Zu(r,r.readVarint()+r.pos);n.length&&(t[n.name]=n)}}var Vu=Pu.VectorTile=function(e,t){this.layers=e.readFields(Uu,{},t)},Wu=Pu.VectorTileFeature=zu;function Gu(e,t,r,n){var i,a=[],o=0===n?function(e,t,r,n,i,a){e.push(new E(a,r+(a-t)/(n-t)*(i-r)))}:function(e,t,r,n,i,a){e.push(new E(t+(a-r)/(i-r)*(n-t),a))},s=d(e);try{for(s.s();!(i=s.n()).done;){var l,c=i.value,u=[],h=d(c);try{for(h.s();!(l=h.n()).done;){var f=l.value;if(!(f.length<=2)){for(var p=[],m=0;m<f.length-1;m++){var v=f[m].x,g=f[m].y,y=f[m+1].x,x=f[m+1].y,b=0===n?v:g,_=0===n?y:x;b<t?_>t&&o(p,v,g,y,x,t):b>r?_<r&&o(p,v,g,y,x,r):p.push(f[m]),_<t&&b>=t&&o(p,v,g,y,x,t),_>r&&b<=r&&o(p,v,g,y,x,r)}var w=f[f.length-1],k=0===n?w.x:w.y;k>=t&&k<=r&&p.push(w),p.length&&(w=p[p.length-1],p[0].x===w.x&&p[0].y===w.y||p.push(p[0]),u.push(p))}}}catch(S){h.e(S)}finally{h.f()}u.length&&a.push(u)}}catch(S){s.e(S)}finally{s.f()}return a}Pu.VectorTileLayer=ju;var Hu=Wu.types,Xu=Math.pow(2,13);function Yu(e,t,r,n,i,a,o,s){e.emplaceBack((t<<1)+o,(r<<1)+a,(Math.floor(n*Xu)<<1)+i,Math.round(s))}function qu(e,t,r){var n=16384;e.emplaceBack(t.x,t.y,t.z,r[0]*n,r[1]*n,r[2]*n)}var $u=function(){function e(){f(this,e),this.acc=new E(0,0),this.polyCount=[]}return p(e,[{key:"startRing",value:function(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new E(e.x,e.y),this.max=new E(e.x,e.y))}},{key:"append",value:function(e,t){this.currentPolyCount.edges++,this.acc._add(e);var r=this.min,n=this.max;e.x<r.x?r.x=e.x:e.x>n.x&&(n.x=e.x),e.y<r.y?r.y=e.y:e.y>n.y&&(n.y=e.y),((0===e.x||e.x===Gs)&&e.x===t.x)!=((0===e.y||e.y===Gs)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,Br(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Gs!=e.x>Gs&&this.addBorderIntersection(1,Br(t.y,e.y,(Gs-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Br(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Gs!=e.y>Gs&&this.addBorderIntersection(3,Br(t.x,e.x,(Gs-t.y)/(e.y-t.y)))}},{key:"addBorderIntersection",value:function(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);var r=this.borders[e];t<r[0]&&(r[0]=t),t>r[1]&&(r[1]=t)}},{key:"processBorderOverlap",value:function(e,t){if(e.x===t.x){if(e.y===t.y)return;var r=0===e.x?0:1;this.addBorderIntersection(r,t.y),this.addBorderIntersection(r,e.y)}else{var n=0===e.y?2:3;this.addBorderIntersection(n,t.x),this.addBorderIntersection(n,e.x)}}},{key:"centroid",value:function(){var e=this.polyCount.reduce((function(e,t){return e+t.edges}),0);return 0!==e?this.acc.div(e)._round():new E(0,0)}},{key:"span",value:function(){return new E(this.max.x-this.min.x,this.max.y-this.min.y)}},{key:"intersectsCount",value:function(){return this.borders.reduce((function(e,t){return e+ +(t[0]!==Number.MAX_VALUE)}),0)}}]),e}(),Ku=function(){function e(t){f(this,e),this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new So,this.centroidVertexArray=new os,this.indexArray=new jo,this.programConfigurations=new Ls(t.layers,t.zoom),this.segments=new Ws,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.enableTerrain=t.enableTerrain}return p(e,[{key:"populate",value:function(e,t,r,n){this.features=[],this.hasPattern=wu("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){var t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/Gs/(1<<e.z)}(r),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;var i,a=d(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.feature,l=o.id,c=o.index,u=o.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f=pl(s,h);if(this.layers[0]._featureFilter.filter(new eo(this.zoom),f,r)){var p={id:l,sourceLayerIndex:u,index:c,geometry:h?f.geometry:fl(s,r,n),properties:s.properties,type:s.type,patterns:{}},m=this.layoutVertexArray.length;this.hasPattern?this.features.push(ku("fill-extrusion",this.layers,p,this.zoom,t)):this.addFeature(p,p.geometry,c,r,{},t.availableImages,n),t.featureIndex.insert(s,p.geometry,c,u,this.index,m)}}}catch(v){a.e(v)}finally{a.f()}this.sortBorders()}},{key:"addFeatures",value:function(e,t,r,n,i){var a,o=d(this.features);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=s.geometry;this.addFeature(s,l,s.index,t,r,n,i)}}catch(c){o.e(c)}finally{o.f()}this.sortBorders()}},{key:"update",value:function(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Iu),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Mu.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"uploadCentroid",value:function(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Eu.members,!0),this.needsCentroidUpdate=!1)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,r,n,i,a,o){var s=[new E(0,0),new E(Gs,Gs)],l=o.projection,c="globe"===l.name,u=this.enableTerrain&&!c?new $u:null,h="Polygon"===Hu[e.type];c&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Yo);for(var f,p,m=bu(t,500),v=m.length-1;v>=0;v--){var g=m[v];(0===g.length||(f=g[0]).every((function(e){return e.x<=0}))||f.every((function(e){return e.x>=Gs}))||f.every((function(e){return e.y<=0}))||f.every((function(e){return e.y>=Gs})))&&m.splice(v,1)}if(c)p=ah(m,s,n);else{p=[];var y,x=d(m);try{for(x.s();!(y=x.n()).done;){var b=y.value;p.push({polygon:b,bounds:s})}}catch(Ie){x.e(Ie)}finally{x.f()}}var _,w=h?this.edgeRadius:0,k=d(p);try{for(k.s();!(_=k.n()).done;){var S,C=_.value,A=C.polygon,T=C.bounds,M=0,I=0,P=d(A);try{for(P.s();!(S=P.n()).done;){var R=S.value;h&&!R[0].equals(R[R.length-1])&&R.push(R[0]),I+=h?R.length-1:R.length}}catch(Ie){P.e(Ie)}finally{P.f()}var z=this.segments.prepareSegment((h?5:4)*I,this.layoutVertexArray,this.indexArray);if(h){var L=[],D=[];M=z.vertexLength;var O,F=d(A);try{for(F.s();!(O=F.n()).done;){var j=O.value,N=void 0,B=void 0;j.length&&j!==A[0]&&D.push(L.length/2),N=j[1].sub(j[0])._perp()._unit();for(var Z=1;Z<j.length;Z++){var U=j[Z],V=j[Z===j.length-1?1:Z+1],W=U.x,G=U.y;if(w){B=V.sub(U)._perp()._unit();var H=N.add(B)._unit(),X=w*Math.min(4,1/(N.x*H.x+N.y*H.y));W+=X*H.x,G+=X*H.y,N=B}Yu(this.layoutVertexArray,W,G,0,0,1,1,0),z.vertexLength++,L.push(U.x,U.y),c&&qu(this.layoutVertexExtArray,l.projectTilePoint(W,G,n),l.upVector(n,W,G))}}}catch(Ie){F.e(Ie)}finally{F.f()}for(var Y=Vc.exports(L,D),q=0;q<Y.length;q+=3)this.indexArray.emplaceBack(M+Y[q],M+Y[q+2],M+Y[q+1]),z.primitiveLength++}var $,K=d(A);try{for(K.s();!($=K.n()).done;){var J=$.value;u&&J.length&&u.startRing(J[0]);var Q=void 0,ee=void 0,te=void 0,re=J.length>4&&rh(J[J.length-2],J[0],J[1]),ne=w?Qu(J[J.length-2],J[0],J[1],w):0;ee=J[1].sub(J[0])._perp()._unit();for(var ie=!0,ae=1,oe=0;ae<J.length;ae++){var se=J[ae-1],le=J[ae],ce=J[ae===J.length-1?1:ae+1];if(u&&h&&u.currentPolyCount.top++,th(le,se,T))w&&(ee=ce.sub(le)._perp()._unit(),ie=!ie);else{u&&u.append(le,se);var ue=le.sub(se)._perp(),he=ue.x/(Math.abs(ue.x)+Math.abs(ue.y)),de=ue.y>0?1:0,fe=se.dist(le);if(oe+fe>32768&&(oe=0),w){te=ce.sub(le)._perp()._unit();var pe=eh(se,le,ce,Ju(ee,te),w);isNaN(pe)&&(pe=0);var me=le.sub(se)._unit();se=se.add(me.mult(ne))._round(),le=le.add(me.mult(-pe))._round(),ne=pe,ee=te}var ve=z.vertexLength,ge=J.length>4&&rh(se,le,ce),ye=nh(oe,re,ie);if(Yu(this.layoutVertexArray,se.x,se.y,he,de,0,0,ye),Yu(this.layoutVertexArray,se.x,se.y,he,de,0,1,ye),ye=nh(oe+=fe,ge,!ie),re=ge,Yu(this.layoutVertexArray,le.x,le.y,he,de,0,0,ye),Yu(this.layoutVertexArray,le.x,le.y,he,de,0,1,ye),z.vertexLength+=4,this.indexArray.emplaceBack(ve+0,ve+1,ve+2),this.indexArray.emplaceBack(ve+1,ve+3,ve+2),z.primitiveLength+=2,w){var xe=M+(1===ae?J.length-2:ae-2),be=1===ae?M:xe+1;if(this.indexArray.emplaceBack(ve+1,xe,ve+3),this.indexArray.emplaceBack(xe,be,ve+3),z.primitiveLength+=2,void 0===Q&&(Q=ve),!th(ce,J[ae],T)){var _e=ae===J.length-1?Q:z.vertexLength;this.indexArray.emplaceBack(ve+2,ve+3,_e),this.indexArray.emplaceBack(ve+3,_e+1,_e),this.indexArray.emplaceBack(ve+3,be,_e+1),z.primitiveLength+=3}ie=!ie}if(c){var we=this.layoutVertexExtArray,ke=l.projectTilePoint(se.x,se.y,n),Se=l.projectTilePoint(le.x,le.y,n),Ce=l.upVector(n,se.x,se.y),Ae=l.upVector(n,le.x,le.y);qu(we,ke,Ce),qu(we,ke,Ce),qu(we,Se,Ae),qu(we,Se,Ae)}}}h&&(M+=J.length-1)}}catch(Ie){K.e(Ie)}finally{K.f()}}}catch(Ie){k.e(Ie)}finally{k.f()}if(u&&u.polyCount.length>0){if(u.borders){u.vertexArrayOffset=this.centroidVertexArray.length;for(var Te=u.borders,Ee=this.featuresOnBorder.push(u)-1,Me=0;Me<4;Me++)Te[Me][0]!==Number.MAX_VALUE&&this.borders[Me].push(Ee)}this.encodeCentroid(u.borders?void 0:u.centroid(),u)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,a,n)}},{key:"sortBorders",value:function(){for(var e=this,t=function(t){e.borders[t].sort((function(r,n){return e.featuresOnBorder[r].borders[t][0]-e.featuresOnBorder[n].borders[t][0]}))},r=0;r<4;r++)t(r)}},{key:"encodeCentroid",value:function(e,t){var r,n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if(0!==e.y){var a=t.span()._mult(this.tileToMeter);r=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(a.x/10)),n=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(a.y/10))}else r=Math.ceil(7*(e.x+450)),n=0;else r=0,n=+i;var o,s=i?this.centroidVertexArray.length:t.vertexArrayOffset,l=d(t.polyCount);try{for(l.s();!(o=l.n()).done;){var c=o.value;i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*c.edges+c.top);for(var u=0;u<c.top;u++)this.centroidVertexArray.emplace(s++,r,n);for(var h=0;h<2*c.edges;h++)this.centroidVertexArray.emplace(s++,0,n),this.centroidVertexArray.emplace(s++,r,n)}}catch(f){l.e(f)}finally{l.f()}}}]),e}();function Ju(e,t){var r=e.add(t)._unit();return e.x*r.x+e.y*r.y}function Qu(e,t,r,n){var i=t.sub(e)._perp()._unit(),a=r.sub(t)._perp()._unit();return eh(e,t,r,Ju(i,a),n)}function eh(e,t,r,n,i){var a=Math.sqrt(1-n*n);return Math.min(e.dist(t)/3,t.dist(r)/3,i*a/n)}function th(e,t,r){return e.x<r[0].x&&t.x<r[0].x||e.x>r[1].x&&t.x>r[1].x||e.y<r[0].y&&t.y<r[0].y||e.y>r[1].y&&t.y>r[1].y}function rh(e,t,r){if(e.x<0||e.x>=Gs||t.x<0||t.x>=Gs||r.x<0||r.x>=Gs)return!1;var n=r.sub(t),i=n.perp(),a=e.sub(t);return(n.x*a.x+n.y*a.y)/Math.sqrt((n.x*n.x+n.y*n.y)*(a.x*a.x+a.y*a.y))>-.866&&i.x*a.x+i.y*a.y<0}function nh(e,t,r){var n=t?2|e:-3&e;return r?1|n:-2&n}function ih(){var e=Math.PI/32,t=Math.tan(e),r=Xs;return r*Math.sqrt(1+2*t*t)-r}function ah(e,t,r){var n=1<<r.z,i=el(r.x/n),a=el((r.x+1)/n),o=tl(r.y/n),s=tl((r.y+1)/n);return function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,o=[];if(!e.length||!r||!n)return o;for(var s=function(e,t){var r,n=d(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;o.push({polygon:i,bounds:t})}}catch(a){n.e(a)}finally{n.f()}},l=Math.ceil(Math.log2(r)),c=Math.ceil(Math.log2(n)),u=l-c,h=[],f=0;f<Math.abs(u);f++)h.push(u>0?0:1);for(var p=0;p<Math.min(l,c);p++)h.push(0),h.push(1);var m=e;if(m=Gu(m,t[0].y-i,t[1].y+i,1),!(m=Gu(m,t[0].x-i,t[1].x+i,0)).length)return o;var v=[];for(h.length?v.push({polygons:m,bounds:t,depth:0}):s(m,t);v.length;){var g=v.pop(),y=g.depth,x=h[y],b=g.bounds[0],_=g.bounds[1],w=0===x?b.x:b.y,k=0===x?_.x:_.y,S=a?a(x,w,k):.5*(w+k),C=Gu(g.polygons,w-i,S+i,x),A=Gu(g.polygons,S-i,k+i,x);if(C.length){var T=[b,new E(0===x?S:_.x,1===x?S:_.y)];h.length>y+1?v.push({polygons:C,bounds:T,depth:y+1}):s(C,T)}if(A.length){var M=[new E(0===x?S:b.x,1===x?S:b.y),_];h.length>y+1?v.push({polygons:A,bounds:M,depth:y+1}):s(A,M)}}return o}(e,t,Math.ceil((a-i)/11.25),Math.ceil((o-s)/11.25),1,(function(e,t,i){if(0===e)return.5*(t+i);var a=tl((r.y+t/Gs)/n);return(Js(.5*(tl((r.y+i/Gs)/n)+a))*n-r.y)*Gs}))}ea(Ku,"FillExtrusionBucket",{omit:["layers","features"]}),ea($u,"PartMetadata");var oh=new mo({"fill-extrusion-edge-radius":new co(ct["layout_fill-extrusion"]["fill-extrusion-edge-radius"])}),sh={paint:new mo({"fill-extrusion-opacity":new co(ct["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new uo(ct["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new co(ct["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new co(ct["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ho(ct["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new uo(ct["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new uo(ct["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new co(ct["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new co(ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new co(ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:oh};function lh(e,t,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[e*n-2*Math.PI*6378137/2,t*n-2*Math.PI*6378137/2]}var ch=function(){function e(t,r,n){f(this,e),this.z=t,this.x=r,this.y=n,this.key=dh(0,t,t,r,n)}return p(e,[{key:"equals",value:function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}},{key:"url",value:function(e,t){var r=function(e,t,r){var n=lh(256*e,256*(t=Math.pow(2,r)-t-1),r),i=lh(256*(e+1),256*(t+1),r);return n[0]+","+n[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),n=function(e,t,r){for(var n,i="",a=e;a>0;a--)i+=(t&(n=1<<a-1)?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",n).replace("{bbox-epsg-3857}",r)}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}]),e}(),uh=p((function e(t,r){f(this,e),this.wrap=t,this.canonical=r,this.key=dh(t,r.z,r.z,r.x,r.y)})),hh=function(){function e(t,r,n,i,a){f(this,e),this.overscaledZ=t,this.wrap=r,this.canonical=new ch(n,+i,+a),this.key=0===r&&t===n?this.canonical.key:dh(r,t,n,i,a)}return p(e,[{key:"equals",value:function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}},{key:"scaledTo",value:function(t){var r=this.canonical.z-t;return t>this.canonical.z?new e(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new e(t,this.wrap,t,this.canonical.x>>r,this.canonical.y>>r)}},{key:"calculateScaledKey",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return dh(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);var r=this.canonical.z-e;return dh(this.wrap*+t,e,e,this.canonical.x>>r,this.canonical.y>>r)}},{key:"isChildOf",value:function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}},{key:"children",value:function(t){if(this.overscaledZ>=t)return[new e(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var r=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new e(r,this.wrap,r,n,i),new e(r,this.wrap,r,n+1,i),new e(r,this.wrap,r,n,i+1),new e(r,this.wrap,r,n+1,i+1)]}},{key:"isLessThan",value:function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}},{key:"wrapped",value:function(){return new e(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(t){return new e(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new uh(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}]),e}();function dh(e,t,r,n,i){var a=1<<Math.min(r,22),o=a*(i%a)+n%a;return e&&r<22&&(o+=a*a*((e<0?-2*e-1:2*e)%(1<<2*(22-r)))),16*(32*o+r)+(t-r)}ea(ch,"CanonicalTileID"),ea(hh,"OverscaledTileID",{omit:["projMatrix"]});var fh=function(e){m(r,e);var t=v(r);function r(e,n,i){var a;return f(this,r),(a=t.call(this,e,n)).z=i,a}return p(r)}(E);function ph(e,t){return e.x*t.x+e.y*t.y}function mh(e,t){if(1===e.length){for(var r,n=0,i=t[n++];!r||i.equals(r);)if(!(r=t[n++]))return 1/0;for(;n<t.length;n++){var a=t[n],o=e[0],s=r.sub(i),l=a.sub(i),c=o.sub(i),u=ph(s,s),h=ph(s,l),f=ph(l,l),p=ph(c,s),m=ph(c,l),v=u*f-h*h,g=(f*p-h*m)/v,y=(u*m-h*p)/v,x=i.z*(1-g-y)+r.z*g+a.z*y;if(isFinite(x))return x}return 1/0}var b,_=1/0,w=d(t);try{for(w.s();!(b=w.n()).done;){var k=b.value;_=Math.min(_,k.z)}}catch(S){w.e(S)}finally{w.f()}return _}function vh(e,t,r,n,i,a,o,s){var l=o*i.getElevationAt(e,t,!0,!0),c=0!==a[0],u=c?0===a[1]?o*(a[0]/7-450):o*function(e,t,r){var n=Math.floor(t[0]/8),i=Math.floor(t[1]/8),a=10*(t[0]-8*n),o=10*(t[1]-8*i),s=e.getElevationAt(n,i,!0,!0),l=e.getMeterToDEM(r),c=Math.floor(.5*(a*l-1)),u=Math.floor(.5*(o*l-1)),h=e.tileCoordToPixel(n,i),d=2*c+1,f=2*u+1,p=function(e,t,r,n,i){return[e.getElevationAtPixel(t,r,!0),e.getElevationAtPixel(t+i,r,!0),e.getElevationAtPixel(t,r+i,!0),e.getElevationAtPixel(t+n,r+i,!0)]}(e,h.x-c,h.y-u,d,f),m=Math.abs(p[0]-p[1]),v=Math.abs(p[2]-p[3]),g=Math.abs(p[0]-p[2])+Math.abs(p[1]-p[3]),y=Math.min(.25,.5*l*(m+v)/d),x=Math.min(.25,.5*l*g/f);return s+Math.max(y*a,x*o)}(i,a,s):l;return{base:l+(0===r)?-1:r,top:c?Math.max(u+n,l+r+2):l+n}}var gh=bo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4).members,yh=bo([{name:"a_packed",components:4,type:"Float32"}]).members,xh=Wu.types,bh=Math.cos(Math.PI/180*37.5),_h=function(){function e(t){var r=this;f(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){r.gradients[e.id]={}})),this.layoutVertexArray=new Co,this.layoutVertexArray2=new Ao,this.indexArray=new jo,this.programConfigurations=new Ls(t.layers,t.zoom),this.segments=new Ws,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return p(e,[{key:"populate",value:function(e,t,r,n){this.hasPattern=wu("line",this.layers,t);var i,a=this.layers[0].layout.get("line-sort-key"),o=[],s=d(e);try{for(s.s();!(i=s.n()).done;){var l=i.value,c=l.feature,u=l.id,h=l.index,f=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,m=pl(c,p);if(this.layers[0]._featureFilter.filter(new eo(this.zoom),m,r)){var v=a?a.evaluate(m,{},r):void 0,g={id:u,properties:c.properties,type:c.type,sourceLayerIndex:f,index:h,geometry:p?m.geometry:fl(c,r,n),patterns:{},sortKey:v};o.push(g)}}}catch(E){s.e(E)}finally{s.f()}a&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=t.lineAtlas,x=t.featureIndex,b=this.addConstantDashes(y),_=0,w=o;_<w.length;_++){var k=w[_],S=k.geometry,C=k.index,A=k.sourceLayerIndex;if(b&&this.addFeatureDashes(k,y),this.hasPattern){var T=ku("line",this.layers,k,this.zoom,t);this.patternFeatures.push(T)}else this.addFeature(k,S,C,r,y.positions,t.availableImages);x.insert(e[C].feature,S,C,A,this.index)}}},{key:"addConstantDashes",value:function(e){var t,r=!1,n=d(this.layers);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=i.paint.get("line-dasharray").value,o=i.layout.get("line-cap").value;if("constant"!==a.kind||"constant"!==o.kind)r=!0;else{var s=o.value,l=a.value;if(!l)continue;e.addDash(l.from,s),e.addDash(l.to,s),l.other&&e.addDash(l.other,s)}}}catch(c){n.e(c)}finally{n.f()}return r}},{key:"addFeatureDashes",value:function(e,t){var r,n=this.zoom,i=d(this.layers);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.paint.get("line-dasharray").value,s=a.layout.get("line-cap").value;if("constant"!==o.kind||"constant"!==s.kind){var l=void 0,c=void 0,u=void 0,h=void 0,f=void 0,p=void 0;if("constant"===o.kind){var m=o.value;if(!m)continue;l=m.other||m.to,c=m.to,u=m.from}else l=o.evaluate({zoom:n-1},e),c=o.evaluate({zoom:n},e),u=o.evaluate({zoom:n+1},e);"constant"===s.kind?h=f=p=s.value:(h=s.evaluate({zoom:n-1},e),f=s.evaluate({zoom:n},e),p=s.evaluate({zoom:n+1},e)),t.addDash(l,h),t.addDash(c,f),t.addDash(u,p);var v=t.getKey(l,h),g=t.getKey(c,f),y=t.getKey(u,p);e.patterns[a.id]={min:v,mid:g,max:y}}}}catch(x){i.e(x)}finally{i.f()}}},{key:"update",value:function(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}},{key:"addFeatures",value:function(e,t,r,n,i){var a,o=d(this.patternFeatures);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.addFeature(s,s.geometry,s.index,t,r,n)}}catch(l){o.e(l)}finally{o.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,yh)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,gh),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}},{key:"addFeature",value:function(e,t,r,n,i,a){var o=this.layers[0].layout,s=o.get("line-join").evaluate(e,{}),l=o.get("line-cap").evaluate(e,{}),c=o.get("line-miter-limit"),u=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);var h,f=d(t);try{for(f.s();!(h=f.n()).done;){var p=h.value;this.addLine(p,e,s,l,c,u)}}catch(m){f.e(m)}finally{f.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,a,n)}},{key:"addLine",value:function(e,t,r,n,i,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var o=0;o<e.length-1;o++)this.totalDistance+=e[o].dist(e[o+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===xh[t.type],l=e.length;l>=2&&e[l-1].equals(e[l-2]);)l--;for(var c=0;c<l-1&&e[c].equals(e[c+1]);)c++;if(!(l<(s?3:2))){"bevel"===r&&(i=1.05);var u,h,d,f,p,m=this.overscaling<=16?122880/(512*this.overscaling):0,v=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,s&&(u=e[l-2],p=e[c].sub(u)._unit()._perp());for(var g=c;g<l;g++)if(!(d=g===l-1?s?e[c+1]:void 0:e[g+1])||!e[g].equals(d)){p&&(f=p),u&&(h=u),u=e[g],p=d?d.sub(u)._unit()._perp():f;var y=(f=f||p).add(p);0===y.x&&0===y.y||y._unit();var x=f.x*p.x+f.y*p.y,b=y.x*p.x+y.y*p.y,_=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),k=b<bh&&h&&d,S=f.x*p.y-f.y*p.x>0;if(k&&g>c){var C=u.dist(h);if(C>2*m){var A=u.sub(u.sub(h)._mult(m/C)._round());this.updateDistance(h,A),this.addCurrentVertex(A,f,0,0,v),h=A}}var T=h&&d,E=T?r:s?"butt":n;if(T&&"round"===E&&(_<a?E="miter":_<=2&&(E="fakeround")),"miter"===E&&_>i&&(E="bevel"),"bevel"===E&&(_>2&&(E="flipbevel"),_<i&&(E="miter")),h&&this.updateDistance(h,u),"miter"===E)y._mult(_),this.addCurrentVertex(u,y,0,0,v);else if("flipbevel"===E){if(_>100)y=p.mult(-1);else{var M=_*f.add(p).mag()/f.sub(p).mag();y._perp()._mult(M*(S?-1:1))}this.addCurrentVertex(u,y,0,0,v),this.addCurrentVertex(u,y.mult(-1),0,0,v)}else if("bevel"===E||"fakeround"===E){var I=-Math.sqrt(_*_-1),P=S?I:0,R=S?0:I;if(h&&this.addCurrentVertex(u,f,P,R,v),"fakeround"===E)for(var z=Math.round(180*w/Math.PI/20),L=1;L<z;L++){var D=L/z;if(.5!==D){var O=D-.5;D+=D*O*(D-1)*((1.0904+x*(x*(3.55645-1.43519*x)-3.2452))*O*O+(.848013+x*(.215638*x-1.06021)))}var F=p.sub(f)._mult(D)._add(f)._unit()._mult(S?-1:1);this.addHalfVertex(u,F.x,F.y,!1,S,0,v)}d&&this.addCurrentVertex(u,p,-P,-R,v)}else if("butt"===E)this.addCurrentVertex(u,y,0,0,v);else if("square"===E){var j=h?1:-1;h||this.addCurrentVertex(u,y,j,j,v),this.addCurrentVertex(u,y,0,0,v),h&&this.addCurrentVertex(u,y,j,j,v)}else"round"===E&&(h&&(this.addCurrentVertex(u,f,0,0,v),this.addCurrentVertex(u,f,1,1,v,!0)),d&&(this.addCurrentVertex(u,p,-1,-1,v,!0),this.addCurrentVertex(u,p,0,0,v)));if(k&&g<l-1){var N=u.dist(d);if(N>2*m){var B=u.add(d.sub(u)._mult(m/N)._round());this.updateDistance(u,B),this.addCurrentVertex(B,p,0,0,v),u=B}}}}}},{key:"addCurrentVertex",value:function(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=t.y*n-t.x,s=-t.y-t.x*n;this.addHalfVertex(e,t.x+t.y*r,t.y-t.x*r,a,!1,r,i),this.addHalfVertex(e,o,s,a,!0,-n,i)}},{key:"addHalfVertex",value:function(e,t,r,n,i,a,o){var s=e.x,l=e.y;this.layoutVertexArray.emplaceBack((s<<1)+(n?1:0),(l<<1)+(i?1:0),Math.round(63*t)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);var c=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),o.primitiveLength++),i?this.e2=c:this.e1=c}},{key:"updateScaledDistance",value:function(){if(this.lineClips){var e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}},{key:"updateDistance",value:function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}]),e}();ea(_h,"LineBucket",{omit:["layers","patternFeatures"]});var wh=new mo({"line-cap":new uo(ct.layout_line["line-cap"]),"line-join":new uo(ct.layout_line["line-join"]),"line-miter-limit":new co(ct.layout_line["line-miter-limit"]),"line-round-limit":new co(ct.layout_line["line-round-limit"]),"line-sort-key":new uo(ct.layout_line["line-sort-key"])}),kh={paint:new mo({"line-opacity":new uo(ct.paint_line["line-opacity"]),"line-color":new uo(ct.paint_line["line-color"]),"line-translate":new co(ct.paint_line["line-translate"]),"line-translate-anchor":new co(ct.paint_line["line-translate-anchor"]),"line-width":new uo(ct.paint_line["line-width"]),"line-gap-width":new uo(ct.paint_line["line-gap-width"]),"line-offset":new uo(ct.paint_line["line-offset"]),"line-blur":new uo(ct.paint_line["line-blur"]),"line-dasharray":new ho(ct.paint_line["line-dasharray"]),"line-pattern":new ho(ct.paint_line["line-pattern"]),"line-gradient":new po(ct.paint_line["line-gradient"]),"line-trim-offset":new co(ct.paint_line["line-trim-offset"])}),layout:wh},Sh=new(function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"possiblyEvaluate",value:function(e,t){return t=new eo(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),o(s(r.prototype),"possiblyEvaluate",this).call(this,e,t)}},{key:"evaluate",value:function(e,t,n,i){return t=V({},t,{zoom:Math.floor(t.zoom)}),o(s(r.prototype),"evaluate",this).call(this,e,t,n,i)}}]),r}(uo))(kh.paint.properties["line-width"].specification);function Ch(e,t){return t>0?t+2*e:e}Sh.useIntegerZoom=!0;var Ah=bo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Th=bo([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Eh=bo([{name:"a_projected_pos",components:4,type:"Float32"}],4);bo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var Mh=bo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Ih=bo([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);bo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Ph=bo([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Rh=bo([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);bo([{name:"triangle",components:3,type:"Uint16"}]),bo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),bo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),bo([{type:"Float32",name:"offsetX"}]),bo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var zh=24,Lh=128;function Dh(e,t){var r=t.expression;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new eo(e+1))};if("source"===r.kind)return{kind:"source"};for(var n=r.zoomStops,i=r.interpolationType,a=0;a<n.length&&n[a]<=e;)a++;for(var o=a=Math.max(0,a-1);o<n.length&&n[o]<e+1;)o++;o=Math.min(n.length-1,o);var s=n[a],l=n[o];return"composite"===r.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:l,minSize:r.evaluate(new eo(s)),maxSize:r.evaluate(new eo(l)),interpolationType:i}}function Oh(e,t,r){var n=t.uSize,i=t.uSizeT,a=r.lowerSize,o=r.upperSize;return"source"===e.kind?a/Lh:"composite"===e.kind?Br(a/Lh,o/Lh,i):n}function Fh(e,t){var r=0,n=0;if("constant"===e.kind)n=e.layoutSize;else if("source"!==e.kind){var i=e.interpolationType,a=e.minZoom,o=e.maxZoom,s=i?j(ln.interpolationFactor(i,t,a,o),0,1):0;"camera"===e.kind?n=Br(e.minSize,e.maxSize,s):r=s}return{uSizeT:r,uSize:n}}var jh=Object.freeze({__proto__:null,getSizeData:Dh,evaluateSizeForFeature:Oh,evaluateSizeForZoom:Fh,SIZE_PACK_FACTOR:Lh});function Nh(e,t,r){return e.sections.forEach((function(e){e.text=function(e,t,r){var n=t.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?e=e.toLocaleUpperCase():"lowercase"===n&&(e=e.toLocaleLowerCase()),Qa.applyArabicShaping&&(e=Qa.applyArabicShaping(e)),e}(e.text,t,r)})),e}var Bh={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function Zh(e){return"\ufe36"===e||"\ufe48"===e||"\ufe38"===e||"\ufe44"===e||"\ufe42"===e||"\ufe3e"===e||"\ufe3c"===e||"\ufe3a"===e||"\ufe18"===e||"\ufe40"===e||"\ufe10"===e||"\ufe13"===e||"\ufe14"===e||"\uff40"===e||"\uffe3"===e||"\ufe11"===e||"\ufe12"===e}function Uh(e){return"\ufe35"===e||"\ufe47"===e||"\ufe37"===e||"\ufe43"===e||"\ufe41"===e||"\ufe3d"===e||"\ufe3b"===e||"\ufe39"===e||"\ufe17"===e||"\ufe3f"===e}var Vh=Hh,Wh=function(e,t,r,n,i){var a,o,s=8*i-n-1,l=(1<<s)-1,c=l>>1,u=-7,h=r?i-1:0,d=r?-1:1,f=e[t+h];for(h+=d,a=f&(1<<-u)-1,f>>=-u,u+=s;u>0;a=256*a+e[t+h],h+=d,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=n;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),a-=c}return(f?-1:1)*o*Math.pow(2,a-n)},Gh=function(e,t,r,n,i,a){var o,s,l,c=8*a-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:a-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=u?(s=0,o=u):o+h>=1?(s=(t*l-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+f]=255&s,f+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[r+f]=255&o,f+=p,o/=256,c-=8);e[r+f-p]|=128*m};function Hh(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Hh.Varint=0,Hh.Fixed64=1,Hh.Bytes=2,Hh.Fixed32=5;var Xh=4294967296,Yh=1/Xh,qh="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function $h(e){return e.type===Hh.Bytes?e.readVarint()+e.pos:e.pos+1}function Kh(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Jh(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=e;i--)r.buf[i+n]=r.buf[i]}function Qh(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function ed(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function td(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function rd(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function nd(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function id(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function ad(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function od(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function sd(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function ld(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function cd(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function ud(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function hd(e,t,r){t.glyphs=[],1===e&&r.readMessage(dd,t)}function dd(e,t,r){if(3===e){var n=r.readMessage(fd,{}),i=n.id,a=n.bitmap,o=n.width,s=n.height,l=n.left,c=n.top,u=n.advance;t.glyphs.push({id:i,bitmap:new Fc({width:o+6,height:s+6},a),metrics:{width:o,height:s,left:l,top:c,advance:u}})}else 4===e?t.ascender=r.readSVarint():5===e&&(t.descender=r.readSVarint())}function fd(e,t,r){1===e?t.id=r.readVarint():2===e?t.bitmap=r.readBytes():3===e?t.width=r.readVarint():4===e?t.height=r.readVarint():5===e?t.left=r.readSVarint():6===e?t.top=r.readSVarint():7===e&&(t.advance=r.readVarint())}function pd(e){var t,r=0,n=0,i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r+=a.w*a.h,n=Math.max(n,a.w)}}catch(v){i.e(v)}finally{i.f()}e.sort((function(e,t){return t.h-e.h}));var o,s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),n),h:1/0}],l=0,c=0,u=d(e);try{for(u.s();!(o=u.n()).done;)for(var h=o.value,f=s.length-1;f>=0;f--){var p=s[f];if(!(h.w>p.w||h.h>p.h)){if(h.x=p.x,h.y=p.y,c=Math.max(c,h.y+h.h),l=Math.max(l,h.x+h.w),h.w===p.w&&h.h===p.h){var m=s.pop();f<s.length&&(s[f]=m)}else h.h===p.h?(p.x+=h.w,p.w-=h.w):h.w===p.w?(p.y+=h.h,p.h-=h.h):(s.push({x:p.x+h.w,y:p.y,w:p.w-h.w,h:h.h}),p.y+=h.h,p.h-=h.h);break}}}catch(v){u.e(v)}finally{u.f()}return{w:l,h:c,fill:r/(l*c)||0}}Hh.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,a=this.pos;this.type=7&n,e(i,t,this),this.pos===a&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=ld(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=ud(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=ld(this.buf,this.pos)+ld(this.buf,this.pos+4)*Xh;return this.pos+=8,e},readSFixed64:function(){var e=ld(this.buf,this.pos)+ud(this.buf,this.pos+4)*Xh;return this.pos+=8,e},readFloat:function(){var e=Wh(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Wh(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,n=this.buf;return t=127&(r=n[this.pos++]),r<128?t:(t|=(127&(r=n[this.pos++]))<<7,r<128?t:(t|=(127&(r=n[this.pos++]))<<14,r<128?t:(t|=(127&(r=n[this.pos++]))<<21,r<128?t:function(e,t,r){var n,i,a=r.buf;if(n=(112&(i=a[r.pos++]))>>4,i<128)return Kh(e,n,t);if(n|=(127&(i=a[r.pos++]))<<3,i<128)return Kh(e,n,t);if(n|=(127&(i=a[r.pos++]))<<10,i<128)return Kh(e,n,t);if(n|=(127&(i=a[r.pos++]))<<17,i<128)return Kh(e,n,t);if(n|=(127&(i=a[r.pos++]))<<24,i<128)return Kh(e,n,t);if(n|=(1&(i=a[r.pos++]))<<31,i<128)return Kh(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&qh?function(e,t,r){return qh.decode(e.subarray(t,r))}(this.buf,t,e):function(e,t,r){for(var n="",i=t;i<r;){var a,o,s,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>r)break;1===u?l<128&&(c=l):2===u?128==(192&(a=e[i+1]))&&(c=(31&l)<<6|63&a)<=127&&(c=null):3===u?(o=e[i+2],128==(192&(a=e[i+1]))&&128==(192&o)&&((c=(15&l)<<12|(63&a)<<6|63&o)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(o=e[i+2],s=e[i+3],128==(192&(a=e[i+1]))&&128==(192&o)&&128==(192&s)&&((c=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),i+=u}return n}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Hh.Bytes)return e.push(this.readVarint(t));var r=$h(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Hh.Bytes)return e.push(this.readSVarint());var t=$h(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Hh.Bytes)return e.push(this.readBoolean());var t=$h(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Hh.Bytes)return e.push(this.readFloat());var t=$h(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Hh.Bytes)return e.push(this.readDouble());var t=$h(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Hh.Bytes)return e.push(this.readFixed32());var t=$h(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Hh.Bytes)return e.push(this.readSFixed32());var t=$h(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Hh.Bytes)return e.push(this.readFixed64());var t=$h(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Hh.Bytes)return e.push(this.readSFixed64());var t=$h(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Hh.Varint)for(;this.buf[this.pos++]>127;);else if(t===Hh.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Hh.Fixed32)this.pos+=4;else{if(t!==Hh.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),cd(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),cd(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),cd(this.buf,-1&e,this.pos),cd(this.buf,Math.floor(e*Yh),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),cd(this.buf,-1&e,this.pos),cd(this.buf,Math.floor(e*Yh),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,n;if(e>=0?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,n=n+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,r.buf[r.pos]=127&(e>>>=7)}(r,0,t),function(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var n,i,a=0;a<t.length;a++){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){n>56319||a+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):i=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(e[r++]=239,e[r++]=191,e[r++]=189,i=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&Jh(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),Gh(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Gh(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;n>=128&&Jh(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,Hh.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Qh,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,ed,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,nd,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,td,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,rd,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,id,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,ad,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,od,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,sd,t)},writeBytesField:function(e,t){this.writeTag(e,Hh.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Hh.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Hh.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Hh.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Hh.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Hh.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Hh.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Hh.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Hh.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Hh.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var md=function(){function e(t,r){var n=r.pixelRatio,i=r.version,a=r.stretchX,o=r.stretchY,s=r.content;f(this,e),this.paddedRect=t,this.pixelRatio=n,this.stretchX=a,this.stretchY=o,this.content=s,this.version=i}return p(e,[{key:"tl",get:function(){return[this.paddedRect.x+1,this.paddedRect.y+1]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}]),e}(),vd=function(){function e(t,r){f(this,e);var n={},i={};this.haveRenderCallbacks=[];var a=[];this.addImages(t,n,a),this.addImages(r,i,a);var o=pd(a),s=o.w,l=o.h,c=new jc({width:s||1,height:l||1});for(var u in t){var h=t[u],d=n[u].paddedRect;jc.copy(h.data,c,{x:0,y:0},{x:d.x+1,y:d.y+1},h.data)}for(var p in r){var m=r[p],v=i[p].paddedRect,g=v.x+1,y=v.y+1,x=m.data.width,b=m.data.height;jc.copy(m.data,c,{x:0,y:0},{x:g,y:y},m.data),jc.copy(m.data,c,{x:0,y:b-1},{x:g,y:y-1},{width:x,height:1}),jc.copy(m.data,c,{x:0,y:0},{x:g,y:y+b},{width:x,height:1}),jc.copy(m.data,c,{x:x-1,y:0},{x:g-1,y:y},{width:1,height:b}),jc.copy(m.data,c,{x:0,y:0},{x:g+x,y:y},{width:1,height:b})}this.image=c,this.iconPositions=n,this.patternPositions=i}return p(e,[{key:"addImages",value:function(e,t,r){for(var n in e){var i=e[n],a={x:0,y:0,w:i.data.width+2,h:i.data.height+2};r.push(a),t[n]=new md(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}},{key:"patchUpdatedImages",value:function(e,t){for(var r in this.haveRenderCallbacks=this.haveRenderCallbacks.filter((function(t){return e.hasImage(t)})),e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[r],e.getImage(r),t),this.patchUpdatedImage(this.patternPositions[r],e.getImage(r),t)}},{key:"patchUpdatedImage",value:function(e,t,r){if(e&&t&&e.version!==t.version){e.version=t.version;var n=h(e.tl,2),i=n[0],a=n[1];r.update(t.data,void 0,{x:i,y:a})}}}]),e}();ea(md,"ImagePosition"),ea(vd,"ImageAtlas");var gd={horizontal:1,vertical:2,horizontalOnly:3},yd=function(){function e(){f(this,e),this.scale=1,this.fontStack="",this.imageName=null}return p(e,null,[{key:"forText",value:function(t,r){var n=new e;return n.scale=t||1,n.fontStack=r,n}},{key:"forImage",value:function(t){var r=new e;return r.imageName=t,r}}]),e}(),xd=function(){function e(){f(this,e),this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}return p(e,[{key:"length",value:function(){return this.text.length}},{key:"getSection",value:function(e){return this.sections[this.sectionIndex[e]]}},{key:"getSections",value:function(){return this.sections}},{key:"getSectionIndex",value:function(e){return this.sectionIndex[e]}},{key:"getCharCode",value:function(e){return this.text.charCodeAt(e)}},{key:"verticalizePunctuation",value:function(e){this.text=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e.charCodeAt(n+1)||null,a=e.charCodeAt(n-1)||null;r+=!t&&(i&&ja(i)&&!Bh[e[n+1]]||a&&ja(a)&&!Bh[e[n-1]])||!Bh[e[n]]?e[n]:Bh[e[n]]}return r}(this.text,e)}},{key:"trim",value:function(){for(var e=0,t=0;t<this.text.length&&_d[this.text.charCodeAt(t)];t++)e++;for(var r=this.text.length,n=this.text.length-1;n>=0&&n>=e&&_d[this.text.charCodeAt(n)];n--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)}},{key:"substring",value:function(t,r){var n=new e;return n.text=this.text.substring(t,r),n.sectionIndex=this.sectionIndex.slice(t,r),n.sections=this.sections,n}},{key:"toString",value:function(){return this.text}},{key:"getMaxScale",value:function(){var e=this;return this.sectionIndex.reduce((function(t,r){return Math.max(t,e.sections[r].scale)}),0)}},{key:"addTextSection",value:function(e,t){this.text+=e.text,this.sections.push(yd.forText(e.scale,e.fontStack||t));for(var r=this.sections.length-1,n=0;n<e.text.length;++n)this.sectionIndex.push(r)}},{key:"addImageSection",value:function(e){var t=e.image?e.image.name:"";if(0!==t.length){var r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(yd.forImage(t)),this.sectionIndex.push(this.sections.length-1)):te("Reached maximum number of images 6401")}else te("Can't add FormattedSection with an empty image.")}},{key:"getNextImageSectionCharCode",value:function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}],[{key:"fromFeature",value:function(t,r){for(var n=new e,i=0;i<t.sections.length;i++){var a=t.sections[i];a.image?n.addImageSection(a):n.addTextSection(a,r)}return n}}]),e}();function bd(e,t,r,n,i,a,o,s,l,c,u,h,f,p,m,v){var g,y=xd.fromFeature(e,i);h===gd.vertical&&y.verticalizePunctuation(f);var x=Qa.processBidirectionalText,b=Qa.processStyledBidirectionalText;if(x&&1===y.sections.length){g=[];var _,w=x(y.toString(),Ed(y,c,a,t,n,p,m)),k=d(w);try{for(k.s();!(_=k.n()).done;){var S=_.value,C=new xd;C.text=S,C.sections=y.sections;for(var A=0;A<S.length;A++)C.sectionIndex.push(0);g.push(C)}}catch(L){k.e(L)}finally{k.f()}}else if(b){g=[];var T,E=b(y.text,y.sectionIndex,Ed(y,c,a,t,n,p,m)),M=d(E);try{for(M.s();!(T=M.n()).done;){var I=T.value,P=new xd;P.text=I[0],P.sectionIndex=I[1],P.sections=y.sections,g.push(P)}}catch(L){M.e(L)}finally{M.f()}}else g=function(e,t){var r,n=[],i=e.text,a=0,o=d(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;n.push(e.substring(a,s)),a=s}}catch(L){o.e(L)}finally{o.f()}return a<i.length&&n.push(e.substring(a,i.length)),n}(y,Ed(y,c,a,t,n,p,m));var R=[],z={positionedLines:R,text:y.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,r,n,i,a,o,s,l,c,u,h){var f,p=0,m=0,v=0,g="right"===s?1:"left"===s?0:.5,y=!1,x=d(i);try{for(x.s();!(f=x.n()).done;){var b,_=f.value.getSections(),w=d(_);try{for(w.s();!(b=w.n()).done;){var k=b.value;if(!k.imageName){var S=t[k.fontStack];if(S&&!(y=void 0!==S.ascender&&void 0!==S.descender))break}}}catch(L){w.e(L)}finally{w.f()}if(!y)break}}catch(L){x.e(L)}finally{x.f()}var C,A,T=0,E=d(i);try{for(E.s();!(C=E.n()).done;){var M=C.value;M.trim();var I=M.getMaxScale(),P=(I-1)*zh,R={positionedGlyphs:[],lineOffset:0};e.positionedLines[T]=R;var z=R.positionedGlyphs,D=0;if(M.length()){for(var O=0,F=0,j=0;j<M.length();j++){var N=M.getSection(j),B=M.getSectionIndex(j),Z=M.getCharCode(j),U=N.scale,V=null,W=null,G=null,H=zh,X=0,Y=!(l===gd.horizontal||!u&&!Fa(Z)||u&&(_d[Z]||(A=Z,sa(A)||la(A)||ca(A)||Ea(A)||Ra(A))));if(N.imageName){var q=n[N.imageName];if(!q)continue;G=N.imageName,e.iconsInText=e.iconsInText||!0,W=q.paddedRect;var $=q.displaySize;U=U*zh/h,V={width:$[0],height:$[1],left:1,top:-3,advance:Y?$[1]:$[0],localGlyph:!1},X=y?-V.height*U:I*zh-17-$[1]*U,H=V.advance;var K=(Y?$[0]:$[1])*U-zh*I;K>0&&K>D&&(D=K)}else{var J=r[N.fontStack];if(!J)continue;J[Z]&&(W=J[Z]);var Q=t[N.fontStack];if(!Q)continue;var ee=Q.glyphs[Z];if(!ee)continue;if(V=ee.metrics,H=8203!==Z?zh:0,y){var te=void 0!==Q.ascender?Math.abs(Q.ascender):0,re=void 0!==Q.descender?Math.abs(Q.descender):0,ne=(te+re)*U;O<ne&&(O=ne,F=(te-re)/2*U),X=-te*U}else X=(I-U)*zh-17}Y?(e.verticalizable=!0,z.push({glyph:Z,imageName:G,x:p,y:m+X,vertical:Y,scale:U,localGlyph:V.localGlyph,fontStack:N.fontStack,sectionIndex:B,metrics:V,rect:W}),p+=H*U+c):(z.push({glyph:Z,imageName:G,x:p,y:m+X,vertical:Y,scale:U,localGlyph:V.localGlyph,fontStack:N.fontStack,sectionIndex:B,metrics:V,rect:W}),p+=V.advance*U+c)}0!==z.length&&(v=Math.max(p-c,v),y?Id(z,g,D,F,a*I/2):Id(z,g,D,0,a/2)),p=0;var ie=a*I+D;R.lineOffset=Math.max(D,P),m+=ie,++T}else m+=a,++T}}catch(L){E.e(L)}finally{E.f()}var ae=m,oe=Md(o),se=oe.horizontalAlign,le=oe.verticalAlign;(function(e,t,r,n,i,a){var o,s=(t-r)*i,l=-a*n,c=d(e);try{for(c.s();!(o=c.n()).done;){var u,h=o.value,f=d(h.positionedGlyphs);try{for(f.s();!(u=f.n()).done;){var p=u.value;p.x+=s,p.y+=l}}catch(L){f.e(L)}finally{f.f()}}}catch(L){c.e(L)}finally{c.f()}})(e.positionedLines,g,se,le,v,ae),e.top+=-le*ae,e.bottom=e.top+ae,e.left+=-se*v,e.right=e.left+v,e.hasBaseline=y}(z,t,r,n,g,o,s,l,h,c,f,v),!function(e){var t,r=d(e);try{for(r.s();!(t=r.n()).done;)if(0!==t.value.positionedGlyphs.length)return!1}catch(L){r.e(L)}finally{r.f()}return!0}(R)&&z}var _d={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},wd={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function kd(e,t,r,n,i,a){if(t.imageName){var o=n[t.imageName];return o?o.displaySize[0]*t.scale*zh/a+i:0}var s=r[t.fontStack],l=s&&s.glyphs[e];return l?l.metrics.advance*t.scale+i:0}function Sd(e,t,r,n){var i=Math.pow(e-t,2);return n?e<t?i/2:2*i:i+Math.abs(r)*r}function Cd(e,t,r){var n=0;return 10===e&&(n-=1e4),r&&(n+=150),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function Ad(e,t,r,n,i,a){var o,s=null,l=Sd(t,r,i,a),c=d(n);try{for(c.s();!(o=c.n()).done;){var u=o.value,h=Sd(t-u.x,r,i,a)+u.badness;h<=l&&(s=u,l=h)}}catch(f){c.e(f)}finally{c.f()}return{index:e,x:t,priorBreak:s,badness:l}}function Td(e){return e?Td(e.priorBreak).concat(e.index):[]}function Ed(e,t,r,n,i,a,o){if("point"!==a)return[];if(!e)return[];for(var s,l=[],c=function(e,t,r,n,i,a){for(var o=0,s=0;s<e.length();s++){var l=e.getSection(s);o+=kd(e.getCharCode(s),l,n,i,t,a)}return o/Math.max(1,Math.ceil(o/r))}(e,t,r,n,i,o),u=e.text.indexOf("\u200b")>=0,h=0,d=0;d<e.length();d++){var f=e.getSection(d),p=e.getCharCode(d);if(_d[p]||(h+=kd(p,f,n,i,t,o)),d<e.length()-1){var m=!((s=p)<11904||!(ga(s)||va(s)||Ia(s)||Ta(s)||_a(s)||ua(s)||ya(s)||fa(s)||wa(s)||ka(s)||ba(s)||za(s)||pa(s)||da(s)||ha(s)||xa(s)||ma(s)||Ma(s)||Ca(s)||Sa(s)));(wd[p]||m||f.imageName)&&l.push(Ad(d+1,h,c,l,Cd(p,e.getCharCode(d+1),m&&u),!1))}}return Td(Ad(e.length(),h,c,l,0,!0))}function Md(e){var t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function Id(e,t,r,n,i){if(t||r||n||i)for(var a=e.length-1,o=e[a],s=(o.x+o.metrics.advance*o.scale)*t,l=0;l<=a;l++)e[l].x-=s,e[l].y+=r+n+i}function Pd(e,t,r){var n=Md(r),i=n.horizontalAlign,a=n.verticalAlign,o=t[0]-e.displaySize[0]*i,s=t[1]-e.displaySize[1]*a;return{image:e,top:s,bottom:s+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function Rd(e,t,r,n,i,a){var o,s=e.image;if(s.content){var l=s.content,c=s.pixelRatio||1;o=[l[0]/c,l[1]/c,s.displaySize[0]-l[2]/c,s.displaySize[1]-l[3]/c]}var u,h,d,f,p=t.left*a,m=t.right*a;"width"===r||"both"===r?(f=i[0]+p-n[3],h=i[0]+m+n[1]):h=(f=i[0]+(p+m-s.displaySize[0])/2)+s.displaySize[0];var v=t.top*a,g=t.bottom*a;return"height"===r||"both"===r?(u=i[1]+v-n[0],d=i[1]+g+n[2]):d=(u=i[1]+(v+g-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:u,right:h,bottom:d,left:f,collisionPadding:o}}var zd=function(e){m(r,e);var t=v(r);function r(e,n,i,a,o){var s;return f(this,r),(s=t.call(this,e,n)).angle=a,s.z=i,void 0!==o&&(s.segment=o),s}return p(r,[{key:"clone",value:function(){return new r(this.x,this.y,this.z,this.angle,this.segment)}}]),r}(E);function Ld(e,t,r,n,i){if(void 0===t.segment)return!0;for(var a=t,o=t.segment+1,s=0;s>-r/2;){if(--o<0)return!1;s-=e[o].dist(a),a=e[o]}s+=e[o].dist(e[o+1]),o++;for(var l=[],c=0;s<r/2;){var u=e[o],h=e[o+1];if(!h)return!1;var d=e[o-1].angleTo(u)-u.angleTo(h);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:d}),c+=d;s-l[0].distance>n;)c-=l.shift().angleDelta;if(c>i)return!1;o++,s+=u.dist(h)}return!0}function Dd(e){for(var t=0,r=0;r<e.length-1;r++)t+=e[r].dist(e[r+1]);return t}function Od(e,t,r){return e?.6*t*r:0}function Fd(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function jd(e,t,r,n,i,a){for(var o=Od(r,i,a),s=Fd(r,n)*a,l=0,c=Dd(e)/2,u=0;u<e.length-1;u++){var h=e[u],d=e[u+1],f=h.dist(d);if(l+f>c){var p=(c-l)/f,m=Br(h.x,d.x,p),v=Br(h.y,d.y,p),g=new zd(m,v,0,d.angleTo(h),u);return!o||Ld(e,g,s,o,t)?g:void 0}l+=f}}function Nd(e,t,r,n,i,a,o,s,l){var c=Od(n,a,o),u=Fd(n,i),h=u*o,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),Bd(e,d?t/2*s%t:(u/2+2*a)*o*s%t,t,c,r,h,d,!1,l)}function Bd(e,t,r,n,i,a,o,s,l){for(var c=a/2,u=Dd(e),h=0,d=t-r,f=[],p=0;p<e.length-1;p++){for(var m=e[p],v=e[p+1],g=m.dist(v),y=v.angleTo(m);d+r<h+g;){var x=((d+=r)-h)/g,b=Br(m.x,v.x,x),_=Br(m.y,v.y,x);if(b>=0&&b<l&&_>=0&&_<l&&d-c>=0&&d+c<=u){var w=new zd(b,_,0,y,p);w._round(),n&&!Ld(e,w,a,n,i)||f.push(w)}}h+=g}return s||f.length||o||(f=Bd(e,h/2,r,n,i,a,o,!0,l)),f}function Zd(e,t,r,n,i){for(var a=[],o=0;o<e.length;o++)for(var s=e[o],l=void 0,c=0;c<s.length-1;c++){var u=s[c],h=s[c+1];u.x<t&&h.x<t||(u.x<t?u=new E(t,u.y+(t-u.x)/(h.x-u.x)*(h.y-u.y))._round():h.x<t&&(h=new E(t,u.y+(t-u.x)/(h.x-u.x)*(h.y-u.y))._round()),u.y<r&&h.y<r||(u.y<r?u=new E(u.x+(r-u.y)/(h.y-u.y)*(h.x-u.x),r)._round():h.y<r&&(h=new E(u.x+(r-u.y)/(h.y-u.y)*(h.x-u.x),r)._round()),u.x>=n&&h.x>=n||(u.x>=n?u=new E(n,u.y+(n-u.x)/(h.x-u.x)*(h.y-u.y))._round():h.x>=n&&(h=new E(n,u.y+(n-u.x)/(h.x-u.x)*(h.y-u.y))._round()),u.y>=i&&h.y>=i||(u.y>=i?u=new E(u.x+(i-u.y)/(h.y-u.y)*(h.x-u.x),i)._round():h.y>=i&&(h=new E(u.x+(i-u.y)/(h.y-u.y)*(h.x-u.x),i)._round()),l&&u.equals(l[l.length-1])||(l=[u],a.push(l)),l.push(h)))))}return a}ea(zd,"Anchor");var Ud=1e20;function Vd(e,t,r,n,i,a,o,s,l){for(var c=t;c<t+n;c++)Wd(e,r*a+c,a,i,o,s,l);for(var u=r;u<r+i;u++)Wd(e,u*a+t,1,n,o,s,l)}function Wd(e,t,r,n,i,a,o){a[0]=0,o[0]=-Ud,o[1]=Ud,i[0]=e[t];for(var s=1,l=0,c=0;s<n;s++){i[s]=e[t+s*r];var u=s*s;do{var h=a[l];c=(i[s]-i[h]+u-h*h)/(s-h)/2}while(c<=o[l]&&--l>-1);a[++l]=s,o[l]=c,o[l+1]=Ud}for(var d=0,f=0;d<n;d++){for(;o[f+1]<d;)f++;var p=a[f],m=d-p;e[t+d*r]=i[p]+m*m}}var Gd={none:0,ideographs:1,all:2},Hd=function(){function e(t,r,n){f(this,e),this.requestManager=t,this.localGlyphMode=r,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}return p(e,[{key:"setURL",value:function(e){this.url=e}},{key:"getGlyphs",value:function(t,r){var n=this,i=[];for(var a in t){var o,s=d(t[a]);try{for(s.s();!(o=s.n()).done;){var l=o.value;i.push({stack:a,id:l})}}catch(c){s.e(c)}finally{s.f()}}Z(i,(function(t,r){var i=t.stack,a=t.id,o=n.entries[i];o||(o=n.entries[i]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});var s=o.glyphs[a];if(void 0===s){if(s=n._tinySDF(o,i,a))return o.glyphs[a]=s,void r(null,{stack:i,id:a,glyph:s});var l=Math.floor(a/256);if(256*l>65535)r(new Error("glyphs > 65535 not supported"));else if(o.ranges[l])r(null,{stack:i,id:a,glyph:s});else{var u=o.requests[l];u||(u=o.requests[l]=[],e.loadGlyphRange(i,l,n.url,n.requestManager,(function(e,t){if(t){for(var r in o.ascender=t.ascender,o.descender=t.descender,t.glyphs)n._doesCharSupportLocalGlyph(+r)||(o.glyphs[+r]=t.glyphs[+r]);o.ranges[l]=!0}var i,a=d(u);try{for(a.s();!(i=a.n()).done;)(0,i.value)(e,t)}catch(c){a.e(c)}finally{a.f()}delete o.requests[l]}))),u.push((function(e,t){e?r(e):t&&r(null,{stack:i,id:a,glyph:t.glyphs[a]||null})}))}}else r(null,{stack:i,id:a,glyph:s})}),(function(e,t){if(e)r(e);else if(t){var i,a={},o=d(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=s.stack,u=s.id,h=s.glyph;void 0===a[l]&&(a[l]={}),void 0===a[l].glyphs&&(a[l].glyphs={}),a[l].glyphs[u]=h&&{id:h.id,bitmap:h.bitmap.clone(),metrics:h.metrics},a[l].ascender=n.entries[l].ascender,a[l].descender=n.entries[l].descender}}catch(c){o.e(c)}finally{o.f()}r(null,a)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(e){return this.localGlyphMode!==Gd.none&&(this.localGlyphMode===Gd.all?!!this.localFontFamily:!!this.localFontFamily&&(ka(e)||Aa(e)||pa(e)||ma(e)||fa(e)))}},{key:"_tinySDF",value:function(t,r,n){var i=this.localFontFamily;if(i&&this._doesCharSupportLocalGlyph(n)){var a=t.tinySDF;if(!a){var o="400";/bold/i.test(r)?o="900":/medium/i.test(r)?o="500":/light/i.test(r)&&(o="200"),(a=t.tinySDF=new e.TinySDF({fontFamily:i,fontWeight:o,fontSize:48,buffer:6,radius:16})).fontWeight=o}if(this.localGlyphs[a.fontWeight][n])return this.localGlyphs[a.fontWeight][n];var s=String.fromCharCode(n),l=a.draw(s),c=l.data,u=l.width,h=l.height,d=l.glyphWidth,f=l.glyphHeight,p=l.glyphLeft,m=l.glyphTop,v=l.glyphAdvance;return this.localGlyphs[a.fontWeight][n]={id:n,bitmap:new Fc({width:u,height:h},c),metrics:{width:d/2,height:f/2,left:p/2,top:m/2-27,advance:v/2,localGlyph:!0}}}}}]),e}();function Xd(e,t,r,n){var i=[],a=e.image,o=a.pixelRatio,s=a.paddedRect.w-2,l=a.paddedRect.h-2,c=e.right-e.left,u=e.bottom-e.top,h=a.stretchX||[[0,s]],d=a.stretchY||[[0,l]],f=function(e,t){return e+t[1]-t[0]},p=h.reduce(f,0),m=d.reduce(f,0),v=s-p,g=l-m,y=0,x=p,b=0,_=m,w=0,k=v,S=0,C=g;if(a.content&&n){var A=a.content;y=Yd(h,0,A[0]),b=Yd(d,0,A[1]),x=Yd(h,A[0],A[2]),_=Yd(d,A[1],A[3]),w=A[0]-y,S=A[1]-b,k=A[2]-A[0]-x,C=A[3]-A[1]-_}var T=function(n,i,s,l){var h=$d(n.stretch-y,x,c,e.left),d=Kd(n.fixed-w,k,n.stretch,p),f=$d(i.stretch-b,_,u,e.top),v=Kd(i.fixed-S,C,i.stretch,m),g=$d(s.stretch-y,x,c,e.left),A=Kd(s.fixed-w,k,s.stretch,p),T=$d(l.stretch-b,_,u,e.top),M=Kd(l.fixed-S,C,l.stretch,m),I=new E(h,f),P=new E(g,f),R=new E(g,T),z=new E(h,T),L=new E(d/o,v/o),D=new E(A/o,M/o),O=t*Math.PI/180;if(O){var F=Math.sin(O),j=Math.cos(O),N=[j,-F,F,j];I._matMult(N),P._matMult(N),z._matMult(N),R._matMult(N)}var B=n.stretch+n.fixed,Z=i.stretch+i.fixed;return{tl:I,tr:P,bl:z,br:R,tex:{x:a.paddedRect.x+1+B,y:a.paddedRect.y+1+Z,w:s.stretch+s.fixed-B,h:l.stretch+l.fixed-Z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:L,pixelOffsetBR:D,minFontScaleX:k/o/c,minFontScaleY:C/o/u,isSDF:r}};if(n&&(a.stretchX||a.stretchY))for(var M=qd(h,v,p),I=qd(d,g,m),P=0;P<M.length-1;P++)for(var R=M[P],z=M[P+1],L=0;L<I.length-1;L++)i.push(T(R,I[L],z,I[L+1]));else i.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function Yd(e,t,r){var n,i=0,a=d(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;i+=Math.max(t,Math.min(r,o[1]))-Math.max(t,Math.min(r,o[0]))}}catch(s){a.e(s)}finally{a.f()}return i}function qd(e,t,r){var n,i=[{fixed:-1,stretch:0}],a=d(e);try{for(a.s();!(n=a.n()).done;){var o=h(n.value,2),s=o[0],l=o[1],c=i[i.length-1];i.push({fixed:s-c.stretch,stretch:c.stretch}),i.push({fixed:s-c.stretch,stretch:c.stretch+(l-s)})}}catch(u){a.e(u)}finally{a.f()}return i.push({fixed:t+1,stretch:r}),i}function $d(e,t,r,n){return e/t*r+n}function Kd(e,t,r,n){return e-t*r/n}function Jd(e,t,r,n){var i=t+e.positionedLines[n].lineOffset;return 0===n?r+i/2:r+(i+(t+e.positionedLines[n-1].lineOffset))/2}Hd.loadGlyphRange=function(e,t,r,n,i){var a=256*t,o=a+255,s=n.transformRequest(n.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}","".concat(a,"-").concat(o)),xe.Glyphs);ke(s,(function(e,t){if(e)i(e);else if(t){var r,n={},a=function(e){return new Vh(e).readFields(hd,{})}(t),o=d(a.glyphs);try{for(o.s();!(r=o.n()).done;){var s=r.value;n[s.id]=s}}catch(l){o.e(l)}finally{o.f()}i(null,{glyphs:n,ascender:a.ascender,descender:a.descender})}}))},Hd.TinySDF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.fontSize,n=void 0===r?24:r,i=t.buffer,a=void 0===i?3:i,o=t.radius,s=void 0===o?8:o,l=t.cutoff,c=void 0===l?.25:l,u=t.fontFamily,h=void 0===u?"sans-serif":u,d=t.fontWeight,p=void 0===d?"normal":d,m=t.fontStyle,v=void 0===m?"normal":m;f(this,e),this.buffer=a,this.cutoff=c,this.radius=s;var g=this.size=n+4*a,y=this._createCanvas(g),x=this.ctx=y.getContext("2d",{willReadFrequently:!0});x.font="".concat(v," ").concat(p," ").concat(n,"px ").concat(h),x.textBaseline="alphabetic",x.textAlign="left",x.fillStyle="black",this.gridOuter=new Float64Array(g*g),this.gridInner=new Float64Array(g*g),this.f=new Float64Array(g),this.z=new Float64Array(g+1),this.v=new Uint16Array(g)}return p(e,[{key:"_createCanvas",value:function(e){var t=document.createElement("canvas");return t.width=t.height=e,t}},{key:"draw",value:function(e){var t=this.ctx.measureText(e),r=t.width,n=t.actualBoundingBoxAscent,i=t.actualBoundingBoxDescent,a=t.actualBoundingBoxLeft,o=t.actualBoundingBoxRight,s=Math.ceil(n),l=Math.min(this.size-this.buffer,Math.ceil(o-a)),c=Math.min(this.size-this.buffer,s+Math.ceil(i)),u=l+2*this.buffer,h=c+2*this.buffer,d=Math.max(u*h,0),f=new Uint8ClampedArray(d),p={data:f,width:u,height:h,glyphWidth:l,glyphHeight:c,glyphTop:s,glyphLeft:0,glyphAdvance:r};if(0===l||0===c)return p;var m=this.ctx,v=this.buffer,g=this.gridInner,y=this.gridOuter;m.clearRect(v,v,l,c),m.fillText(e,v,v+s);var x=m.getImageData(v,v,l,c);y.fill(Ud,0,d),g.fill(0,0,d);for(var b=0;b<c;b++)for(var _=0;_<l;_++){var w=x.data[4*(b*l+_)+3]/255;if(0!==w){var k=(b+v)*u+_+v;if(1===w)y[k]=0,g[k]=Ud;else{var S=.5-w;y[k]=S>0?S*S:0,g[k]=S<0?S*S:0}}}Vd(y,0,0,u,h,u,this.f,this.v,this.z),Vd(g,v,v,l,c,u,this.f,this.v,this.z);for(var C=0;C<d;C++){var A=Math.sqrt(y[C])-Math.sqrt(g[C]);f[C]=Math.round(255-255*(A/this.radius+this.cutoff))}return p}}]),e}();var Qd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ef;if(f(this,e),this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}return p(e,[{key:"push",value:function(e){this.data.push(e),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,r=this.compare,n=t[e];e>0;){var i=e-1>>1,a=t[i];if(r(n,a)>=0)break;t[e]=a,e=i}t[e]=n}},{key:"_down",value:function(e){for(var t=this.data,r=this.compare,n=this.length>>1,i=t[e];e<n;){var a=1+(e<<1),o=t[a],s=a+1;if(s<this.length&&r(t[s],o)<0&&(a=s,o=t[s]),r(o,i)>=0)break;t[e]=o,e=a}t[e]=i}}]),e}();function ef(e,t){return e<t?-1:e>t?1:0}function tf(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=1/0,i=1/0,a=-1/0,o=-1/0,s=e[0],l=0;l<s.length;l++){var c=s[l];(!l||c.x<n)&&(n=c.x),(!l||c.y<i)&&(i=c.y),(!l||c.x>a)&&(a=c.x),(!l||c.y>o)&&(o=c.y)}var u=Math.min(a-n,o-i),h=u/2,d=new Qd([],rf);if(0===u)return new E(n,i);for(var f=n;f<a;f+=u)for(var p=i;p<o;p+=u)d.push(new nf(f+h,p+h,h,e));for(var m=function(e){for(var t=0,r=0,n=0,i=e[0],a=0,o=i.length,s=o-1;a<o;s=a++){var l=i[a],c=i[s],u=l.x*c.y-c.x*l.y;r+=(l.x+c.x)*u,n+=(l.y+c.y)*u,t+=3*u}return new nf(r/t,n/t,0,e)}(e),v=d.length;d.length;){var g=d.pop();(g.d>m.d||!m.d)&&(m=g,r&&console.log("found best %d after %d probes",Math.round(1e4*g.d)/1e4,v)),g.max-m.d<=t||(h=g.h/2,d.push(new nf(g.p.x-h,g.p.y-h,h,e)),d.push(new nf(g.p.x+h,g.p.y-h,h,e)),d.push(new nf(g.p.x-h,g.p.y+h,h,e)),d.push(new nf(g.p.x+h,g.p.y+h,h,e)),v+=4)}return r&&(console.log("num probes: ".concat(v)),console.log("best distance: ".concat(m.d))),m.p}function rf(e,t){return t.max-e.max}function nf(e,t,r,n){this.p=new E(e,t),this.h=r,this.d=function(e,t){for(var r=!1,n=1/0,i=0;i<t.length;i++)for(var a=t[i],o=0,s=a.length,l=s-1;o<s;l=o++){var c=a[o],u=a[l];c.y>e.y!=u.y>e.y&&e.x<(u.x-c.x)*(e.y-c.y)/(u.y-c.y)+c.x&&(r=!r),n=Math.min(n,Cl(e,c,u))}return(r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}var af=Number.POSITIVE_INFINITY,of=Math.sqrt(2);function sf(e,t){return t[1]!==af?function(e,t,r){var n=0,i=0;switch(t=Math.abs(t),r=Math.abs(r),e){case"top-right":case"top-left":case"top":i=r-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-r}switch(e){case"top-right":case"bottom-right":case"right":n=-t;break;case"top-left":case"bottom-left":case"left":n=t}return[n,i]}(e,t[0],t[1]):function(e,t){var r=0,n=0;t<0&&(t=0);var i=t/of;switch(e){case"top-right":case"top-left":n=i-7;break;case"bottom-right":case"bottom-left":n=7-i;break;case"bottom":n=7-t;break;case"top":n=t-7}switch(e){case"top-right":case"bottom-right":r=-i;break;case"top-left":case"bottom-left":r=i;break;case"left":r=t;break;case"right":r=-t}return[r,n]}(e,t[0])}function lf(e,t,r,n,i,a,o,s,l,c){e.createArrays(),e.tilePixelRatio=Gs/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var u=e.layers[0].layout,h=e.layers[0]._unevaluatedLayout._values,f={};if("composite"===e.textSizeData.kind){var p=e.textSizeData,m=p.minZoom,v=p.maxZoom;f.compositeTextSizes=[h["text-size"].possiblyEvaluate(new eo(m),s),h["text-size"].possiblyEvaluate(new eo(v),s)]}if("composite"===e.iconSizeData.kind){var g=e.iconSizeData,y=g.minZoom,x=g.maxZoom;f.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new eo(y),s),h["icon-size"].possiblyEvaluate(new eo(x),s)]}f.layoutTextSize=h["text-size"].possiblyEvaluate(new eo(l+1),s),f.layoutIconSize=h["icon-size"].possiblyEvaluate(new eo(l+1),s),f.textMaxSize=h["text-size"].possiblyEvaluate(new eo(18),s);var b,_="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),w=u.get("text-size"),k=d(e.features);try{var S=function(){var a=b.value,l=u.get("text-font").evaluate(a,{},s).join(","),h=w.evaluate(a,{},s),d=f.layoutTextSize.evaluate(a,{},s),p=(f.layoutIconSize.evaluate(a,{},s),{horizontal:{},vertical:void 0}),m=a.text,v=void 0,g=[0,0];if(m){var y=m.toString(),x=u.get("text-letter-spacing").evaluate(a,{},s)*zh,k=u.get("text-line-height").evaluate(a,{},s)*zh,S=Da(y)?x:0,C=u.get("text-anchor").evaluate(a,{},s),A=u.get("text-variable-anchor");if(!A){var T=u.get("text-radial-offset").evaluate(a,{},s);g=T?sf(C,[T*zh,af]):u.get("text-offset").evaluate(a,{},s).map((function(e){return e*zh}))}var E=_?"center":u.get("text-justify").evaluate(a,{},s),M=u.get("symbol-placement"),I="point"===M,P="point"===M?u.get("text-max-width").evaluate(a,{},s)*zh:0,R=function(n){e.allowVerticalPlacement&&La(y)&&(p.vertical=bd(m,t,r,i,l,P,k,C,n,S,g,gd.vertical,!0,M,d,h))};if(!_&&A){for(var z="auto"===E?A.map((function(e){return cf(e)})):[E],L=!1,D=0;D<z.length;D++){var O=z[D];if(!p.horizontal[O])if(L)p.horizontal[O]=p.horizontal[0];else{var F=bd(m,t,r,i,l,P,k,"center",O,S,g,gd.horizontal,!1,M,d,h);F&&(p.horizontal[O]=F,L=1===F.positionedLines.length)}}R("left")}else{if("auto"===E&&(E=cf(C)),I||u.get("text-writing-mode").indexOf("horizontal")>=0||!La(y)){var j=bd(m,t,r,i,l,P,k,C,E,S,g,gd.horizontal,!1,M,d,h);j&&(p.horizontal[E]=j)}R("point"===M?"left":E)}}var N=!1;if(a.icon&&a.icon.name){var B=n[a.icon.name];B&&(v=Pd(i[a.icon.name],u.get("icon-offset").evaluate(a,{},s),u.get("icon-anchor").evaluate(a,{},s)),N=B.sdf,void 0===e.sdfIcons?e.sdfIcons=B.sdf:e.sdfIcons!==B.sdf&&te("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(B.pixelRatio!==e.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var Z=ff(p.horizontal)||p.vertical;e.iconsInText||(e.iconsInText=!!Z&&Z.iconsInText),(Z||v)&&uf(e,a,p,v,n,f,d,0,g,N,o,s,c)};for(k.s();!(b=k.n()).done;)S()}catch(C){k.e(C)}finally{k.f()}a&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function cf(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function uf(e,t,r,n,i,a,o,s,l,c,u,f,p){var m=a.textMaxSize.evaluate(t,{},f);void 0===m&&(m=o);var v,g,y=e.layers[0].layout,x=y.get("icon-offset").evaluate(t,{},f),b=ff(r.horizontal)||r.vertical,_="globe"===p.name,w=o/24,k=e.tilePixelRatio*m/24,S=(v=e.overscaling,e.zoom>18&&v>2&&(v>>=1),Math.max(Gs/(512*v),1)*y.get("symbol-spacing")),C=y.get("text-padding")*e.tilePixelRatio,A=y.get("icon-padding")*e.tilePixelRatio,T=R(y.get("text-max-angle")),E="map"===y.get("text-rotation-alignment")&&"point"!==y.get("symbol-placement"),M="map"===y.get("icon-rotation-alignment")&&"point"!==y.get("symbol-placement"),I=y.get("symbol-placement"),P=S/2,z=y.get("icon-text-fit");n&&"none"!==z&&(e.allowVerticalPlacement&&r.vertical&&(g=Rd(n,r.vertical,z,y.get("icon-text-fit-padding"),x,w)),b&&(n=Rd(n,b,z,y.get("icon-text-fit-padding"),x,w)));var L=function(o,s,d){if(!(s.x<0||s.x>=Gs||s.y<0||s.y>=Gs)){var m=null;if(_){var v=p.projectTilePoint(s.x,s.y,d),y=v.x,b=v.y,w=v.z;m={anchor:new zd(y,b,w,0,void 0),up:p.upVector(d,s.x,s.y)}}!function(e,t,r,n,i,a,o,s,l,c,u,d,f,p,m,v,g,y,x,b,_,w,k,S,C){var A,T,E,M,I,P,R,z,L,D=e.addToLineVertexArray(t,n),O=0,F=0,j=0,N=0,B=-1,Z=-1,U={},V=hs.exports(""),W=r?r.anchor:t,G=0,H=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?(A=l.layout.get("text-offset").evaluate(_,{},C).map((function(e){return e*zh})),G=(T=h(A,2))[0],H=T[1]):(G=l.layout.get("text-radial-offset").evaluate(_,{},C)*zh,H=af),e.allowVerticalPlacement&&i.vertical){var X=i.vertical;if(m)z=mf(X),s&&(L=mf(s));else{var Y=l.layout.get("text-rotate").evaluate(_,{},C)+90;I=pf(c,W,t,u,d,f,X,p,Y,v),s&&(P=pf(c,W,t,u,d,f,s,y,Y))}}if(a){var q=l.layout.get("icon-rotate").evaluate(_,{},C),$="none"!==l.layout.get("icon-text-fit"),K=Xd(a,q,k,$),J=s?Xd(s,q,k,$):void 0;M=pf(c,W,t,u,d,f,a,y,q),O=4*K.length;var Q=e.iconSizeData,ee=null;"source"===Q.kind?(ee=[Lh*l.layout.get("icon-size").evaluate(_,{},C)])[0]>hf&&te("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')):"composite"===Q.kind&&((ee=[Lh*w.compositeIconSizes[0].evaluate(_,{},C),Lh*w.compositeIconSizes[1].evaluate(_,{},C)])[0]>hf||ee[1]>hf)&&te("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')),e.addSymbols(e.icon,K,ee,b,x,_,!1,r,t,D.lineStartIndex,D.lineLength,-1,S,C),B=e.icon.placedSymbolArray.length-1,J&&(F=4*J.length,e.addSymbols(e.icon,J,ee,b,x,_,gd.vertical,r,t,D.lineStartIndex,D.lineLength,-1,S,C),Z=e.icon.placedSymbolArray.length-1)}for(var re in i.horizontal){var ne=i.horizontal[re];E||(V=hs.exports(ne.text),m?R=mf(ne):E=pf(c,W,t,u,d,f,ne,p,l.layout.get("text-rotate").evaluate(_,{},C),v));var ie=1===ne.positionedLines.length;if(j+=df(e,r,t,ne,o,l,m,_,v,D,i.vertical?gd.horizontal:gd.horizontalOnly,ie?Object.keys(i.horizontal):[re],U,B,w,S,C),ie)break}i.vertical&&(N+=df(e,r,t,i.vertical,o,l,m,_,v,D,gd.vertical,["vertical"],U,Z,w,S,C));var ae=-1,oe=function(e,t){return e?Math.max(e,t):t};ae=oe(R,ae),ae=oe(z,ae);var se=(ae=oe(L,ae))>-1?1:0;e.glyphOffsetArray.length>=Tp.MAX_GLYPHS&&te("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,_.sortKey),e.symbolInstances.emplaceBack(W.x,W.y,W.z,t.x,t.y,U.right>=0?U.right:-1,U.center>=0?U.center:-1,U.left>=0?U.left:-1,U.vertical>=0?U.vertical:-1,B,Z,V,void 0!==E?E:e.collisionBoxArray.length,void 0!==E?E+1:e.collisionBoxArray.length,void 0!==I?I:e.collisionBoxArray.length,void 0!==I?I+1:e.collisionBoxArray.length,void 0!==M?M:e.collisionBoxArray.length,void 0!==M?M+1:e.collisionBoxArray.length,P||e.collisionBoxArray.length,P?P+1:e.collisionBoxArray.length,u,j,N,O,F,se,0,G,H,ae)}(e,s,m,o,r,n,i,g,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,C,E,l,0,A,M,x,t,a,c,u,f)}};if("line"===I){var D,O=d(Zd(t.geometry,0,0,Gs,Gs));try{for(O.s();!(D=O.n()).done;){var F,j=D.value,N=Nd(j,S,T,r.vertical||b,n,24,k,e.overscaling,Gs),B=d(N);try{for(B.s();!(F=B.n()).done;){var Z=F.value;b&&vf(e,b.text,P,Z)||L(j,Z,f)}}catch(oe){B.e(oe)}finally{B.f()}}}catch(oe){O.e(oe)}finally{O.f()}}else if("line-center"===I){var U,V=d(t.geometry);try{for(V.s();!(U=V.n()).done;){var W=U.value;if(W.length>1){var G=jd(W,T,r.vertical||b,n,24,k);G&&L(W,G,f)}}}catch(oe){V.e(oe)}finally{V.f()}}else if("Polygon"===t.type){var H,X=d(bu(t.geometry,0));try{for(X.s();!(H=X.n()).done;){var Y=H.value,q=tf(Y,16);L(Y[0],new zd(q.x,q.y,0,0,void 0),f)}}catch(oe){X.e(oe)}finally{X.f()}}else if("LineString"===t.type){var $,K=d(t.geometry);try{for(K.s();!($=K.n()).done;){var J=$.value;L(J,new zd(J[0].x,J[0].y,0,0,void 0),f)}}catch(oe){K.e(oe)}finally{K.f()}}else if("Point"===t.type){var Q,ee=d(t.geometry);try{for(ee.s();!(Q=ee.n()).done;){var re,ne=Q.value,ie=d(ne);try{for(ie.s();!(re=ie.n()).done;){var ae=re.value;L([ae],new zd(ae.x,ae.y,0,0,void 0),f)}}catch(oe){ie.e(oe)}finally{ie.f()}}}catch(oe){ee.e(oe)}finally{ee.f()}}}var hf=32640;function df(e,t,r,n,i,o,s,l,c,h,f,p,m,v,g,y,x){var b=function(e,t,r,n,i,o,s,l){var c=[];if(0===t.positionedLines.length)return c;var h,f=n.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,p=function(e){var t=e[0],r=e[1],n=t*r;return n>0?[t,-r]:n<0?[-t,r]:0===t?[r,t]:[r,-t]}(r),m=Math.abs(t.top-t.bottom),v=d(t.positionedLines);try{for(v.s();!(h=v.n()).done;)m-=h.value.lineOffset}catch(oe){v.e(oe)}finally{v.f()}for(var g=t.positionedLines.length,y=m/g,x=t.top-r[1],b=0;b<g;++b){var _=t.positionedLines[b];x=Jd(t,y,x,b);var w,k=d(_.positionedGlyphs);try{for(k.s();!(w=k.n()).done;){var S=w.value;if(S.rect){var C=S.rect||{},A=4,T=!0,M=1,I=0;if(S.imageName){var P=s[S.imageName];if(!P)continue;if(P.sdf){te("SDF images are not supported in formatted text and will be ignored.");continue}T=!1,A=1/(M=P.pixelRatio)}var R=(i||l)&&S.vertical,z=S.metrics.advance*S.scale/2,L=S.metrics,D=S.rect;if(null!==D){l&&t.verticalizable&&(I=S.imageName?z-S.metrics.width*S.scale/2:0);var O=i?[S.x+z,S.y]:[0,0],F=[0,0],j=[0,0],N=!1;i||(R?(j=[S.x+z+p[0],S.y+p[1]-I],N=!0):F=[S.x+z+r[0],S.y+r[1]-I]);var B=D.w*S.scale/(M*(S.localGlyph?2:1)),Z=D.h*S.scale/(M*(S.localGlyph?2:1)),U=void 0,V=void 0,W=void 0,G=void 0;if(R){var H=S.y-x,X=new E(-z,z-H),Y=-Math.PI/2,q=a(E,u(j));(U=new E(-z+F[0],F[1]))._rotateAround(Y,X)._add(q),U.x+=-H+z,U.y-=(L.left-A)*S.scale;var $=S.imageName?L.advance*S.scale:zh*S.scale,K=String.fromCharCode(S.glyph);Zh(K)?U.x+=(1-A)*S.scale:Uh(K)?U.x+=$-L.height*S.scale+(-A-1)*S.scale:U.x+=S.imageName||L.width+2*A===D.w&&L.height+2*A===D.h?($-Z)/2:($-(L.height+2*A)*S.scale)/2,V=new E(U.x,U.y-B),W=new E(U.x+Z,U.y),G=new E(U.x+Z,U.y-B)}else{var J=(L.left-A)*S.scale-z+F[0],Q=(-L.top-A)*S.scale+F[1],ee=J+B,re=Q+Z;U=new E(J,Q),V=new E(ee,Q),W=new E(J,re),G=new E(ee,re)}if(f){var ne=void 0;ne=i?new E(0,0):N?new E(p[0],p[1]):new E(r[0],r[1]),U._rotateAround(f,ne),V._rotateAround(f,ne),W._rotateAround(f,ne),G._rotateAround(f,ne)}var ie=new E(0,0),ae=new E(0,0);c.push({tl:U,tr:V,bl:W,br:G,tex:C,writingMode:t.writingMode,glyphOffset:O,sectionIndex:S.sectionIndex,isSDF:T,pixelOffsetTL:ie,pixelOffsetBR:ae,minFontScaleX:0,minFontScaleY:0})}}}}catch(oe){k.e(oe)}finally{k.f()}}return c}(0,n,c,o,s,l,i,e.allowVerticalPlacement),_=e.textSizeData,w=null;"source"===_.kind?(w=[Lh*o.layout.get("text-size").evaluate(l,{},x)])[0]>hf&&te("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')):"composite"===_.kind&&((w=[Lh*g.compositeTextSizes[0].evaluate(l,{},x),Lh*g.compositeTextSizes[1].evaluate(l,{},x)])[0]>hf||w[1]>hf)&&te("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')),e.addSymbols(e.text,b,w,c,s,l,f,t,r,h.lineStartIndex,h.lineLength,v,y,x);var k,S=d(p);try{for(S.s();!(k=S.n()).done;)m[k.value]=e.text.placedSymbolArray.length-1}catch(C){S.e(C)}finally{S.f()}return 4*b.length}function ff(e){for(var t in e)return e[t];return null}function pf(e,t,r,n,i,a,o,s,l,c){var u=o.top,h=o.bottom,d=o.left,f=o.right,p=o.collisionPadding;if(p&&(d-=p[0],u-=p[1],f+=p[2],h+=p[3]),l){var m=new E(d,u),v=new E(f,u),g=new E(d,h),y=new E(f,h),x=R(l),b=new E(0,0);c&&(b=new E(c[0],c[1])),m._rotateAround(x,b),v._rotateAround(x,b),g._rotateAround(x,b),y._rotateAround(x,b),d=Math.min(m.x,v.x,g.x,y.x),f=Math.max(m.x,v.x,g.x,y.x),u=Math.min(m.y,v.y,g.y,y.y),h=Math.max(m.y,v.y,g.y,y.y)}return e.emplaceBack(t.x,t.y,t.z,r.x,r.y,d,u,f,h,s,n,i,a),e.length-1}function mf(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);var t=e.bottom-e.top;return t>0?Math.max(10,t):null}function vf(e,t,r,n){var i=e.compareText;if(t in i){for(var a=i[t],o=a.length-1;o>=0;o--)if(n.dist(a[o])<r)return!0}else i[t]=[];return i[t].push(n),!1}var gf=bo([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]).members,yf=bo([{name:"a_pos_3",components:3,type:"Int16"}]),xf=bo([{name:"a_pos",type:"Int16",components:2}]),bf=Gs/Math.PI/2,_f=2*Qs(1,0)*bf*Math.PI,wf=64,kf=[wf,32,16],Sf=-bf,Cf=bf,Af=[new Tc([Sf,Sf,Sf],[Cf,Cf,Cf]),new Tc([Sf,Sf,Sf],[0,0,Cf]),new Tc([0,Sf,Sf],[Cf,0,Cf]),new Tc([Sf,0,Sf],[0,Cf,Cf]),new Tc([0,0,Sf],[Cf,Cf,Cf])];function Tf(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=ac([],e._camera.position,e.worldSize),a=[t,r,1,1];yc(a,a,e.pixelMatrixInverse),vc(a,a,1/a[3]);var o=sc([],fc([],a,i)),s=e.globeMatrix,l=[s[12],s[13],s[14]],c=fc([],l,i),u=Jl(c),h=sc([],c),d=e.worldSize/(2*Math.PI),f=lc(h,o),p=Math.asin(d/u);if(p<Math.acos(f)){if(!n)return null;var m=[],v=[];ac(m,o,u/f),sc(v,fc(v,m,c)),sc(o,ec(o,c,ac(o,v,Math.tan(p)*u)))}var g=[];new Sc(i,o).closestPointOnSphere(l,d,g);var y=sc([],ce(s,0)),x=sc([],ce(s,1)),b=sc([],ce(s,2)),_=lc(y,g),w=lc(x,g),k=lc(b,g),S=z(Math.asin(-w/d)),C=z(Math.atan2(_,k));C=e.center.lng+function(e,t){var r=(t-e+180)%360-180;return r<-180?r+360:r}(e.center.lng,C);var A=Ks(C),T=j(Js(S),0,1);return new al(A,T)}var Ef=p((function e(t,r,n){f(this,e),this.a=fc([],t,n),this.b=fc([],r,n),this.center=n;var i=sc([],this.a),a=sc([],this.b);this.angle=Math.acos(lc(i,a))}));function Mf(e,t){return 0===e.angle||(r=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)))<0||r>1?null:function(e,t,r,n){var i=Math.sin(r);return e*(Math.sin((1-n)*r)/i)+t*(Math.sin(n*r)/i)}(e.a[t],e.b[t],e.angle,j(r,0,1))+e.center[t];var r}function If(e){if(e.z<=1)return Af[e.z+2*e.y+e.x];var t=Of(Df(e));return Tc.fromPoints(t)}function Pf(e,t,r){return ac(e,e,1-r),oc(e,e,t,r)}function Rf(e,t){var r=Gf(t.zoom);if(0===r)return If(e);var n=Df(e),i=Of(n),a=Ks(n.getWest())*t.worldSize,o=Ks(n.getEast())*t.worldSize,s=Js(n.getNorth())*t.worldSize,l=Js(n.getSouth())*t.worldSize,c=[a,s,0],u=[o,s,0],h=[a,l,0],d=[o,l,0],f=Zl([],t.globeMatrix);return uc(c,c,f),uc(u,u,f),uc(h,h,f),uc(d,d,f),i[0]=Pf(i[0],h,r),i[1]=Pf(i[1],d,r),i[2]=Pf(i[2],u,r),i[3]=Pf(i[3],c,r),Tc.fromPoints(i)}function zf(e,t,r){var n,i=d(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;uc(a,a,t),ac(a,a,r)}}catch(o){i.e(o)}finally{i.f()}}function Lf(e,t,r){var n=t/e.worldSize,i=e.globeMatrix;if(r.z<=1){var a=If(r).getCorners();return zf(a,i,n),Tc.fromPoints(a)}var o=Df(r),s=Of(o);zf(s,i,n);var l=Number.MAX_VALUE,c=[-l,-l,-l],u=[l,l,l];if(o.contains(e.center)){var h,f=d(s);try{for(f.s();!(h=f.n()).done;){var p=h.value;nc(u,u,p),ic(c,c,p)}}catch(N){f.e(N)}finally{f.f()}c[2]=0;var m=e.point,v=[m.x*n,m.y*n,0];return nc(u,u,v),ic(c,c,v),new Tc(u,c)}var g=[i[12]*n,i[13]*n,i[14]*n],y=o.getCenter(),x=j(e.center.lat,-85.051129,nl),b=j(y.lat,-85.051129,nl),_=Ks(e.center.lng),w=Js(x),k=_-Ks(y.lng),S=w-Js(b);k>.5?k-=1:k<-.5&&(k+=1);var C=0;Math.abs(k)>Math.abs(S)?C=k>=0?1:3:(C=S>=0?0:2,oc(g,g,[i[4]*n,i[5]*n,i[6]*n],-Math.sin(R(S>=0?o.getSouth():o.getNorth()))*bf));var A=s[C],T=s[(C+1)%4],E=new Ef(A,T,g),M=[Mf(E,0)||A[0],Mf(E,1)||A[1],Mf(E,2)||A[2]],I=Gf(e.zoom);if(I>0){for(var P=function(e,t,r,n,i){var a=e.x,o=e.y,s=1/(1<<e.z),l=a*s,c=l+s,u=o*s,h=u+s,d=0,f=(l+c)/2-n;return f>.5?d=-1:f<-.5&&(d=1),u=(u*t-(i*=t))*r+i,[[l=((l+d)*t-(n*=t))*r+n,h=(h*t-i)*r+i,0],[c=((c+d)*t-n)*r+n,h,0],[c,u,0],[l,u,0]]}(r,t,e._pixelsPerMercatorPixel,_,w),z=0;z<s.length;z++)Pf(s[z],P[z],I);var L=ec([],P[C],P[(C+1)%4]);ac(L,L,.5),Pf(M,L,I)}var D,O=d(s);try{for(O.s();!(D=O.n()).done;){var F=D.value;nc(u,u,F),ic(c,c,F)}}catch(N){O.e(N)}finally{O.f()}return u[2]=Math.min(A[2],T[2]),nc(u,u,M),ic(c,c,M),new Tc(u,c)}function Df(e){var t=e.x,r=e.y,n=1/(1<<e.z),i=new Ys(el(t*n),tl((r+1)*n)),a=new Ys(el((t+1)*n),tl(r*n));return new Hs(i,a)}function Of(e){var t=R(e.getNorth()),r=R(e.getSouth()),n=Math.cos(t),i=Math.cos(r),a=Math.sin(t),o=Math.sin(r),s=e.getWest(),l=e.getEast();return[Ff(i,o,s),Ff(i,o,l),Ff(n,a,l),Ff(n,a,s)]}function Ff(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bf;return r=R(r),[e*Math.sin(r)*n,-t*n,e*Math.cos(r)*n]}function jf(e,t,r){return Ff(Math.cos(R(e)),Math.sin(R(e)),t,r)}function Nf(e,t,r,n){var i=1<<r.z,a=(e/Gs+r.x)/i;return jf(tl((t/Gs+r.y)/i),el(a),n)}function Bf(e){var t=e.min,r=e.max;return 16383/Math.max(r[0]-t[0],r[1]-t[1],r[2]-t[2])}var Zf=new Float64Array(16);function Uf(e){var t,r,n=Bf(e),i=Xl(Zf,[n,n,n]);return Vl(i,i,((t=[])[0]=-(r=e.min)[0],t[1]=-r[1],t[2]=-r[2],t))}function Vf(e){var t,r,n=(r=e.min,(t=Zf)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t),i=1/Bf(e);return Wl(n,n,[i,i,i])}function Wf(e,t,r,n,i){var a=function(e){var t=Gs/(2*Math.PI);return e/(2*Math.PI)/t}(r),o=[e,t,-r/(2*Math.PI)],s=Bl(new Float64Array(16));return Vl(s,s,o),Wl(s,s,[a,a,a]),Gl(s,s,R(-i)),Hl(s,s,R(-n)),s}function Gf(e){return N(5,6,e)}function Hf(e,t){var r,n,i,a,o,s,l,c,u,h,d=jf(t.lat,t.lng),f=function(e){var t=jf(e._center.lat,e._center.lng),r=cc([],Ql(0,1,0),t),n=Yl([],-e.angle,t);r=uc(r,r,n),Yl(n,-e._pitch,r);var i=sc([],t);return ac(i,i,e.cameraToCenterDistance/e.pixelsPerMeter*_f),uc(i,i,n),ec([],t,i)}(e);return i=(r=tc([],f,d))[0],a=r[1],o=r[2],s=(n=d)[0],l=n[1],c=n[2],h=(u=Math.sqrt(i*i+a*a+o*o)*Math.sqrt(s*s+l*l+c*c))&&lc(r,n)/u,Math.acos(Math.min(Math.max(h,-1),1))}var Xf=R(85),Yf=Math.cos(Xf),qf=Math.sin(Xf);function $f(e,t){var r=e.fovAboveCenter,n=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-n)/Math.cos(e._pitch),a=Math.sin(r)*i/Math.sin(Math.max(Math.PI/2-e._pitch-r,.01)),o=Math.sin(e._pitch)*a+i;return Math.min(1.01*o,i*(1/e._horizonShift))}function Kf(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};var r=Math.pow(2,-e.z),n=e.x*r,i=(e.x+1)*r,a=e.y*r,o=(e.y+1)*r,s=el(n),l=el(i),c=tl(a),u=tl(o),h=t.project(s,c),d=t.project(l,c),f=t.project(l,u),p=t.project(s,u),m=Math.min(h.x,d.x,f.x,p.x),v=Math.min(h.y,d.y,f.y,p.y),g=Math.max(h.x,d.x,f.x,p.x),y=Math.max(h.y,d.y,f.y,p.y),x=r/16;function b(e,r,n,i,a,o){var s=(n+a)/2,l=(i+o)/2,c=t.project(el(s),tl(l)),u=Math.max(0,m-c.x,v-c.y,c.x-g,c.y-y);m=Math.min(m,c.x),g=Math.max(g,c.x),v=Math.min(v,c.y),y=Math.max(y,c.y),u>x&&(b(e,c,n,i,s,l),b(c,r,s,l,a,o))}b(h,d,n,a,i,a),b(d,f,i,a,i,o),b(f,p,i,o,n,o),b(p,h,n,o,n,a),m-=x,v-=x,g+=x,y+=x;var _=1/Math.max(g-m,y-v);return{scale:_,x:m*_,y:v*_,x2:g*_,y2:y*_,projection:t}}var Jf=Bl(new Float32Array(16)),Qf=function(){function e(t){f(this,e),this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}return p(e,[{key:"project",value:function(e,t){return{x:0,y:0,z:0}}},{key:"unproject",value:function(e,t){return new Ys(0,0)}},{key:"projectTilePoint",value:function(e,t,r){return{x:e,y:t,z:0}}},{key:"locationPoint",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e._coordinatePoint(e.locationCoordinate(t),r)}},{key:"pixelsPerMeter",value:function(e,t){return Qs(1,e)*t}},{key:"pixelSpaceConversion",value:function(e,t,r){return 1}},{key:"farthestPixelDistance",value:function(e){return $f(e,e.pixelsPerMeter)}},{key:"pointCoordinate",value:function(e,t,r,n){var i=e.horizonLineFromTop(!1),a=new E(t,Math.max(i,r));return e.rayIntersectionCoordinate(e.pointRayIntersection(a,n))}},{key:"pointCoordinate3D",value:function(e,t,r){var n=new E(t,r);if(e.elevation)return e.elevation.pointCoordinate(n);var i=this.pointCoordinate(e,n.x,n.y,0);return[i.x,i.y,i.z]}},{key:"isPointAboveHorizon",value:function(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);var r=e.horizonLineFromTop();return t.y<r}},{key:"createInversionMatrix",value:function(e,t){return Jf}},{key:"createTileMatrix",value:function(e,t,r){var n,i,a,o=r.canonical,s=Bl(new Float64Array(16));if(this.isReprojectedInTileSpace){var l=Kf(o,this);n=1,i=l.x+r.wrap*l.scale,a=l.y,Wl(s,s,[n/l.scale,n/l.scale,e.pixelsPerMeter/t])}else n=t/e.zoomScale(o.z),i=(o.x+Math.pow(2,o.z)*r.wrap)*n,a=o.y*n;return Vl(s,s,[i,a,0]),Wl(s,s,[n/Gs,n/Gs,1]),s}},{key:"upVector",value:function(e,t,r){return[0,0,1]}},{key:"upVectorScale",value:function(e,t,r){return{metersToTile:1}}}]),e}(),ep=function(e){m(r,e);var t=v(r);function r(e){var n;f(this,r),(n=t.call(this,e)).range=[4,7],n.center=e.center||[-96,37.5];var i=n.parallels=e.parallels||[29.5,45.5],a=h(i,2),o=a[0],s=a[1],l=Math.sin(R(o));return n.n=(l+Math.sin(R(s)))/2,n.c=1+l*(2*n.n-l),n.r0=Math.sqrt(n.c)/n.n,n}return p(r,[{key:"project",value:function(e,t){var r=this.n,n=this.c,i=this.r0,a=R(e-this.center[0]),o=R(t),s=Math.sqrt(n-2*r*Math.sin(o))/r;return{x:s*Math.sin(a*r),y:s*Math.cos(a*r)-i,z:0}}},{key:"unproject",value:function(e,t){var r=this.n,n=this.c,i=this.r0+t,a=Math.atan2(e,Math.abs(i))*Math.sign(i);i*r<0&&(a-=Math.PI*Math.sign(e)*Math.sign(i));var o=R(this.center[0])*r,s=j(z((a=B(a,-Math.PI-o,Math.PI-o))/r)+this.center[0],-180,180),l=Math.asin(j((n-(e*e+i*i)*r*r)/(2*r),-1,1)),c=j(z(l),-85.051129,nl);return new Ys(s,c)}}]),r}(Qf),tp=1.340264,rp=-.081106,np=893e-6,ip=.003796,ap=Math.sqrt(3)/2,op=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"project",value:function(e,t){t=t/180*Math.PI,e=e/180*Math.PI;var r=Math.asin(ap*Math.sin(t)),n=r*r,i=n*n*n;return{x:.5*(e*Math.cos(r)/(ap*(tp+3*rp*n+i*(7*np+9*ip*n)))/Math.PI+.5),y:1-.5*(r*(tp+rp*n+i*(np+ip*n))/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI;for(var r,n=t=(2*(1-t)-1)*Math.PI,i=n*n,a=i*i*i,o=0;o<12&&(a=(i=(n=j(n-(r=(n*(tp+rp*i+a*(np+ip*i))-t)/(tp+3*rp*i+a*(7*np+9*ip*i))),-Math.PI/3,Math.PI/3))*n)*i*i,!(Math.abs(r)<1e-12));++o);var s=ap*e*(tp+3*rp*i+a*(7*np+9*ip*i))/Math.cos(n),l=Math.asin(Math.sin(n)/ap),c=j(180*s/Math.PI,-180,180),u=j(180*l/Math.PI,-85.051129,nl);return new Ys(c,u)}}]),r}(Qf),sp=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).wrap=!0,n.supportsWorldCopies=!0,n}return p(r,[{key:"project",value:function(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}},{key:"unproject",value:function(e,t){var r=360*(e-.5),n=j(360*(.5-t),-85.051129,nl);return new Ys(r,n)}}]),r}(Qf),lp=Math.PI/2;function cp(e){return Math.tan((lp+e)/2)}var up=function(e){m(r,e);var t=v(r);function r(e){var n;f(this,r),(n=t.call(this,e)).center=e.center||[0,30];var i=n.parallels=e.parallels||[30,30],a=h(i,2),o=a[0],s=a[1],l=R(o),c=R(s);n.southernCenter=l+c<0,n.southernCenter&&(l=-l,c=-c);var u=Math.cos(l),d=cp(l);return n.n=l===c?Math.sin(l):Math.log(u/Math.cos(c))/Math.log(cp(c)/d),n.f=u*Math.pow(cp(l),n.n)/n.n,n}return p(r,[{key:"project",value:function(e,t){t=R(t),this.southernCenter&&(t=-t),e=R(e-this.center[0]);var r=1e-6,n=this.n,i=this.f;i>0?t<-lp+r&&(t=-lp+r):t>lp-r&&(t=lp-r);var a=i/Math.pow(cp(t),n),o=a*Math.sin(n*e),s=i-a*Math.cos(n*e);return o=.5*(o/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:o,y:this.southernCenter?s:1-s,z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;var r=this.n,n=this.f,i=n-t,a=Math.sign(i),o=Math.sign(r)*Math.sqrt(e*e+i*i),s=Math.atan2(e,Math.abs(i))*a;i*r<0&&(s-=Math.PI*Math.sign(e)*a);var l=j(z(s/r)+this.center[0],-180,180),c=j(z(2*Math.atan(Math.pow(n/o,1/r))-lp),-85.051129,nl);return new Ys(l,this.southernCenter?-c:c)}}]),r}(Qf),hp=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).wrap=!0,n.supportsWorldCopies=!0,n.supportsTerrain=!0,n.supportsFog=!0,n.supportsFreeCamera=!0,n.isReprojectedInTileSpace=!1,n.unsupportedLayers=[],n.range=null,n}return p(r,[{key:"project",value:function(e,t){return{x:Ks(e),y:Js(t),z:0}}},{key:"unproject",value:function(e,t){var r=el(e),n=tl(t);return new Ys(r,n)}}]),r}(Qf),dp=R(nl),fp=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"project",value:function(e,t){var r=(t=R(t))*t,n=r*r;return{x:.5*((e=R(e))*(.8707-.131979*r+n*(n*(.003971*r-.001529*n)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI;var r=t=(2*(1-t)-1)*Math.PI,n=25,i=0,a=r*r;do{var o=(a=r*r)*a;r=j(r-(i=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-t)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))),-dp,dp)}while(Math.abs(i)>1e-6&&--n>0);var s=j(z(e/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979))),-180,180),l=z(r);return new Ys(s,l)}}]),r}(Qf),pp=R(nl),mp=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"project",value:function(e,t){t=R(t),e=R(e);var r=Math.cos(t),n=2/Math.PI,i=Math.acos(r*Math.cos(e/2)),a=Math.sin(i)/i,o=.5*(e*n+2*r*Math.sin(e/2)/a)||0,s=.5*(t+Math.sin(t)/a)||0;return{x:.5*(o/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){var r=e=(2*e-.5)*Math.PI,n=t=(2*(1-t)-1)*Math.PI,i=25,a=1e-6,o=0,s=0;do{var l=Math.cos(n),c=Math.sin(n),u=2*c*l,h=c*c,d=l*l,f=Math.cos(r/2),p=Math.sin(r/2),m=2*f*p,v=p*p,g=1-d*f*f,y=g?1/g:0,x=g?Math.acos(l*f)*Math.sqrt(1/g):0,b=.5*(2*x*l*p+2*r/Math.PI)-e,_=.5*(x*c+n)-t,w=.5*y*(d*v+x*l*f*h)+1/Math.PI,k=y*(m*u/4-x*c*p),S=.125*y*(u*p-x*c*d*m),C=.5*y*(h*f+x*v*l)+.5,A=k*S-C*w;s=(b*S-_*w)/A,r=j(r-(o=(_*k-b*C)/A),-Math.PI,Math.PI),n=j(n-s,-pp,pp)}while((Math.abs(o)>a||Math.abs(s)>a)&&--i>0);return new Ys(z(r),z(n))}}]),r}(Qf),vp=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).center=e.center||[0,0],n.parallels=e.parallels||[0,0],n.cosPhi=Math.max(.01,Math.cos(R(n.parallels[0]))),n.scale=1/(2*Math.max(Math.PI*n.cosPhi,1/n.cosPhi)),n.wrap=!0,n.supportsWorldCopies=!0,n}return p(r,[{key:"project",value:function(e,t){var r=this.scale,n=this.cosPhi;return{x:R(e)*n*r+.5,y:-Math.sin(R(t))/n*r+.5,z:0}}},{key:"unproject",value:function(e,t){var r=this.scale,n=this.cosPhi,i=-(t-.5)/r,a=j(z((e-.5)/r)/n,-180,180),o=Math.asin(j(i*n,-1,1)),s=j(z(o),-85.051129,nl);return new Ys(a,s)}}]),r}(Qf),gp=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).requiresDraping=!0,n.supportsWorldCopies=!1,n.supportsFog=!0,n.zAxisUnit="pixels",n.unsupportedLayers=["debug","custom"],n.range=[3,5],n}return p(r,[{key:"projectTilePoint",value:function(e,t,r){var n=Nf(e,t,r);return uc(n,n,Uf(If(r))),{x:n[0],y:n[1],z:n[2]}}},{key:"locationPoint",value:function(e,t){var r=jf(t.lat,t.lng),n=sc([],r),i=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;oc(r,r,n,Qs(1,0)*Gs*i);var a=Bl(new Float64Array(16));return Ul(a,e.pixelMatrix,e.globeMatrix),uc(r,r,a),new E(r[0],r[1])}},{key:"pixelsPerMeter",value:function(e,t){return Qs(1,0)*t}},{key:"pixelSpaceConversion",value:function(e,t,r){var n=Qs(1,e)*t,i=Br(Qs(1,45)*t,n,r);return this.pixelsPerMeter(e,t)/i}},{key:"createTileMatrix",value:function(e,t,r){var n=Vf(If(r.canonical));return Ul(new Float64Array(16),e.globeMatrix,n)}},{key:"createInversionMatrix",value:function(e,t){var r=e.center,n=Uf(If(t));return Hl(n,n,R(r.lng)),Gl(n,n,R(r.lat)),Wl(n,n,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(n)}},{key:"pointCoordinate",value:function(e,t,r,n){return Tf(e,t,r,!0)||new al(0,0)}},{key:"pointCoordinate3D",value:function(e,t,r){var n=this.pointCoordinate(e,t,r,0);return[n.x,n.y,n.z]}},{key:"isPointAboveHorizon",value:function(e,t){return!Tf(e,t.x,t.y,!1)}},{key:"farthestPixelDistance",value:function(e){var t=function(e,t){var r,n=e.cameraToCenterDistance,i=e._centerAltitude*t,a=e._camera,o=e._camera.forward(),s=ec([],ac([],o,-n),[0,0,i]),l=e.worldSize/(2*Math.PI),c=[0,0,-l],u=e.width/e.height,h=Math.tan(e.fovAboveCenter),d=ac([],a.up(),h),f=ac([],a.right(),h*u),p=sc([],ec([],ec([],o,d),f)),m=[];if(new Sc(s,p).closestPointOnSphere(c,l,m)){var v=ec([],m,c),g=fc([],v,s);r=Math.cos(e.fovAboveCenter)*Jl(g)}else{var y=fc([],s,c),x=fc([],c,s);sc(x,x);var b=Jl(y)-l;r=Math.sqrt(b*(b+2*l));var _=Math.acos(r/(l+b))-Math.acos(lc(o,x));r*=Math.cos(_)}return 1.01*r}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),r=Gf(e.zoom);if(r>0){var n=$f(e,Qs(1,e.center.lat)*e.worldSize),i=e.worldSize/(2*Math.PI),a=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Br(t,n+i*(1-Math.cos(a)),Math.pow(r,10))}return t}},{key:"upVector",value:function(e,t,r){return Nf(t,r,e,1)}},{key:"upVectorScale",value:function(e){return{metersToTile:_f*Bf(If(e))}}}]),r}(hp);function yp(e){var t=e.parallels,r=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new hp(e);case"equirectangular":return new sp(e);case"naturalEarth":return new fp(e);case"equalEarth":return new op(e);case"winkelTripel":return new mp(e);case"albers":return r?new vp(e):new ep(e);case"lambertConformalConic":return r?new vp(e):new up(e);case"globe":return new gp(e)}throw new Error("Invalid projection name: ".concat(e.name))}var xp=Wu.types,bp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function _p(e,t,r,n,i,a,o,s,l,c,u,h,d){var f=s?Math.min(hf,Math.round(s[0])):0,p=s?Math.min(hf,Math.round(s[1])):0;e.emplaceBack(t,r,Math.round(32*n),Math.round(32*i),a,o,(f<<1)+(l?1:0),p,16*c,16*u,256*h,256*d)}function wp(e,t,r,n,i,a,o){e.emplaceBack(t,r,n,i,a,o)}function kp(e,t,r,n,i){e.emplaceBack(t,r,n,i),e.emplaceBack(t,r,n,i),e.emplaceBack(t,r,n,i),e.emplaceBack(t,r,n,i)}function Sp(e){var t,r=d(e.sections);try{for(r.s();!(t=r.n()).done;)if(Za(t.value.text))return!0}catch(n){r.e(n)}finally{r.f()}return!1}var Cp=function(){function e(t){f(this,e),this.layoutVertexArray=new Io,this.indexArray=new jo,this.programConfigurations=t,this.segments=new Ws,this.dynamicLayoutVertexArray=new Ao,this.opacityVertexArray=new Ro,this.placedSymbolArray=new Jo,this.globeExtVertexArray=new Po}return p(e,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(e,t,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ah.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Eh.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,bp,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Th.members,!0)),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(e))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}]),e}();ea(Cp,"SymbolBuffers");var Ap=function(){function e(t,r,n){f(this,e),this.layoutVertexArray=new t,this.layoutAttributes=r,this.indexArray=new n,this.segments=new Ws,this.collisionVertexArray=new Oo,this.collisionVertexArrayExt=new Fo}return p(e,[{key:"upload",value:function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Mh.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Ih.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}]),e}();ea(Ap,"CollisionBuffers");var Tp=function(){function e(t){f(this,e),this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Bl([]),this.placementViewportMatrix=Bl([]);var r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Dh(this.zoom,r["text-size"]),this.iconSizeData=Dh(this.zoom,r["icon-size"]);var n=this.layers[0].layout,i=n.get("symbol-sort-key"),a=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((function(e){return gd[e]})),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=t.sourceID,this.projection=t.projection}return p(e,[{key:"createArrays",value:function(){this.text=new Cp(new Ls(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new Cp(new Ls(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new ts,this.lineVertexArray=new rs,this.symbolInstances=new es}},{key:"calculateGlyphDependencies",value:function(e,t,r,n,i){for(var a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,n&&i){var o=Bh[e.charAt(a)];o&&(t[o.charCodeAt(0)]=!0)}}},{key:"populate",value:function(e,t,r,n){var i=this.layers[0],a=i.layout,o="globe"===this.projection.name,s=a.get("text-font"),l=a.get("text-field"),c=a.get("icon-image"),u=("constant"!==l.value.kind||l.value.value instanceof Vt&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),h="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,f=a.get("symbol-sort-key");if(this.features=[],u||h){var p,m=t.iconDependencies,v=t.glyphDependencies,g=t.availableImages,y=new eo(this.zoom),x=d(e);try{for(x.s();!(p=x.n()).done;){var b=p.value,_=b.feature,w=b.id,k=b.index,S=b.sourceLayerIndex,C=i._featureFilter.needGeometry,A=pl(_,C);if(i._featureFilter.filter(y,A,r)){C||(A.geometry=fl(_,r,n)),o&&1!==_.type&&r.z<=5&&function(){for(var e=A.geometry,t=.98078528056,n=function(e,n){return lc(Nf(e.x,e.y,r,1),Nf(n.x,n.y,r,1))<t},i=0;i<e.length;i++)e[i]=cl(e[i],n)}();var T=void 0,E=void 0;if(u){var M=i.getValueAndResolveTokens("text-field",A,r,g),I=Vt.factory(M);Sp(I)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ka()||this.hasRTLText&&Qa.isParsed())&&(T=Nh(I,i,A))}if(h){var P=i.getValueAndResolveTokens("icon-image",A,r,g);E=P instanceof Wt?P:Wt.fromString(P)}if(T||E){var R=this.sortFeaturesByKey?f.evaluate(A,{},r):void 0;if(this.features.push({id:w,text:T,icon:E,index:k,sourceLayerIndex:S,geometry:A.geometry,properties:_.properties,type:xp[_.type],sortKey:R}),E&&(m[E.name]=!0),T){var z=s.evaluate(A,{},r).join(","),L="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(gd.vertical)>=0;var D,O=d(T.sections);try{for(O.s();!(D=O.n()).done;){var F=D.value;if(F.image)m[F.image.name]=!0;else{var j=La(T.toString()),N=F.fontStack||z,B=v[N]=v[N]||{};this.calculateGlyphDependencies(F.text,B,L,this.allowVerticalPlacement,j)}}}catch(Z){O.e(Z)}finally{O.f()}}}}}}catch(Z){x.e(Z)}finally{x.f()}"line"===a.get("symbol-placement")&&(this.features=function(e){var t={},r={},n=[],i=0;function a(t){n.push(e[t]),i++}function o(e,t,i){var a=r[e];return delete r[e],r[t]=a,n[a].geometry[0].pop(),n[a].geometry[0]=n[a].geometry[0].concat(i[0]),a}function s(e,r,i){var a=t[r];return delete t[r],t[e]=a,n[a].geometry[0].shift(),n[a].geometry[0]=i[0].concat(n[a].geometry[0]),a}function l(e,t,r){var n=r?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(n.x,":").concat(n.y)}for(var c=0;c<e.length;c++){var u=e[c],h=u.geometry,d=u.text?u.text.toString():null;if(d){var f=l(d,h),p=l(d,h,!0);if(f in r&&p in t&&r[f]!==t[p]){var m=s(f,p,h),v=o(f,p,n[m].geometry);delete t[f],delete r[p],r[l(d,n[v].geometry,!0)]=v,n[m].geometry=null}else f in r?o(f,p,h):p in t?s(f,p,h):(a(c),t[f]=i-1,r[p]=i-1)}else a(c)}return n.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}}},{key:"update",value:function(e,t,r,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,r,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,r,n))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"getProjection",value:function(){return this.projectionInstance||(this.projectionInstance=yp(this.projection)),this.projectionInstance}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(e,t){var r=this.lineVertexArray.length,n=e.segment;if(void 0!==n){for(var i=e.dist(t[n+1]),a=e.dist(t[n]),o={},s=n+1;s<t.length;s++)o[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s<t.length-1&&(i+=t[s+1].dist(t[s]));for(var l=n||0;l>=0;l--)o[l]={x:t[l].x,y:t[l].y,tileUnitDistanceFromAnchor:a},l>0&&(a+=t[l-1].dist(t[l]));for(var c=0;c<t.length;c++){var u=o[c];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}},{key:"addSymbols",value:function(e,t,r,n,i,a,o,s,l,c,u,h,d,f){for(var p=e.indexArray,m=e.layoutVertexArray,v=e.globeExtVertexArray,g=e.segments.prepareSegment(4*t.length,m,p,this.canOverlap?a.sortKey:void 0),y=this.glyphOffsetArray.length,x=g.vertexLength,b=this.allowVerticalPlacement&&o===gd.vertical?Math.PI/2:0,_=a.text&&a.text.sections,w=0;w<t.length;w++){var k=t[w],S=k.tl,C=k.tr,A=k.bl,T=k.br,E=k.tex,M=k.pixelOffsetTL,I=k.pixelOffsetBR,P=k.minFontScaleX,R=k.minFontScaleY,z=k.glyphOffset,L=k.isSDF,D=k.sectionIndex,O=g.vertexLength,F=z[1];if(_p(m,l.x,l.y,S.x,F+S.y,E.x,E.y,r,L,M.x,M.y,P,R),_p(m,l.x,l.y,C.x,F+C.y,E.x+E.w,E.y,r,L,I.x,M.y,P,R),_p(m,l.x,l.y,A.x,F+A.y,E.x,E.y+E.h,r,L,M.x,I.y,P,R),_p(m,l.x,l.y,T.x,F+T.y,E.x+E.w,E.y+E.h,r,L,I.x,I.y,P,R),s){var j=s.anchor,N=s.up;wp(v,j.x,j.y,j.z,N[0],N[1],N[2]),wp(v,j.x,j.y,j.z,N[0],N[1],N[2]),wp(v,j.x,j.y,j.z,N[0],N[1],N[2]),wp(v,j.x,j.y,j.z,N[0],N[1],N[2]),kp(e.dynamicLayoutVertexArray,j.x,j.y,j.z,b)}else kp(e.dynamicLayoutVertexArray,l.x,l.y,l.z,b);p.emplaceBack(O,O+1,O+2),p.emplaceBack(O+1,O+2,O+3),g.vertexLength+=4,g.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(z[0]),w!==t.length-1&&D===t[w+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,a,a.index,{},d,f,_&&_[D])}var B=s?s.anchor:l;e.placedSymbolArray.emplaceBack(B.x,B.y,B.z,l.x,l.y,y,this.glyphOffsetArray.length-y,x,c,u,l.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],o,0,!1,0,h,0)}},{key:"_commitLayoutVertex",value:function(e,t,r,n,i,a,o){e.emplaceBack(t,r,n,i,a,Math.round(o.x),Math.round(o.y))}},{key:"_addCollisionDebugVertices",value:function(e,t,r,n,i,a,o){for(var s=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),l=s.vertexLength,c=o.tileAnchorX,u=o.tileAnchorY,h=0;h<4;h++)r.collisionVertexArray.emplaceBack(0,0,0,0);r.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),r.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),r.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),r.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(r.layoutVertexArray,n,i,a,c,u,new E(e.x1,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,i,a,c,u,new E(e.x2,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,i,a,c,u,new E(e.x2,e.y2)),this._commitLayoutVertex(r.layoutVertexArray,n,i,a,c,u,new E(e.x1,e.y2)),s.vertexLength+=4;var d=r.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),s.primitiveLength+=4}},{key:"_addTextDebugCollisionBoxes",value:function(e,t,r,n,i,a){for(var o=n;o<i;o++){var s=r.get(o),l=this.getSymbolInstanceTextSize(e,a,t,o);this._addCollisionDebugVertices(s,l,this.textCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,a)}}},{key:"_addIconDebugCollisionBoxes",value:function(e,t,r,n,i,a){for(var o=n;o<i;o++){var s=r.get(o),l=this.getSymbolInstanceIconSize(e,t,a.placedIconSymbolIndex);this._addCollisionDebugVertices(s,l,this.iconCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,a)}}},{key:"generateCollisionDebugBuffers",value:function(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ap(Lo,Ph.members,Wo),this.iconCollisionBox=new Ap(Lo,Ph.members,Wo);for(var r=Fh(this.iconSizeData,e),n=Fh(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var a=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(n,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._addTextDebugCollisionBoxes(n,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._addIconDebugCollisionBoxes(r,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a),this._addIconDebugCollisionBoxes(r,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a)}}},{key:"getSymbolInstanceTextSize",value:function(e,t,r,n){var i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:n),a=Oh(this.textSizeData,e,i)/zh;return this.tilePixelRatio*a}},{key:"getSymbolInstanceIconSize",value:function(e,t,r){var n=this.icon.placedSymbolArray.get(r),i=Oh(this.iconSizeData,e,n);return this.tilePixelRatio*i}},{key:"_commitDebugCollisionVertexUpdate",value:function(e,t,r){e.emplaceBack(t,-r,-r),e.emplaceBack(t,r,-r),e.emplaceBack(t,r,r),e.emplaceBack(t,-r,r)}},{key:"_updateTextDebugCollisionBoxes",value:function(e,t,r,n,i,a){for(var o=n;o<i;o++){var s=r.get(o),l=this.getSymbolInstanceTextSize(e,a,t,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,l,s.padding)}}},{key:"_updateIconDebugCollisionBoxes",value:function(e,t,r,n,i,a){for(var o=n;o<i;o++){var s=r.get(o),l=this.getSymbolInstanceIconSize(e,t,a);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,l,s.padding)}}},{key:"updateCollisionDebugBuffers",value:function(e,t){if(this.hasDebugData()){this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();for(var r=Fh(this.iconSizeData,e),n=Fh(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var a=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(n,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._updateTextDebugCollisionBoxes(n,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._updateIconDebugCollisionBoxes(r,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(r,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(e,t,r,n,i,a,o,s,l){for(var c={},u=t;u<r;u++){var h=e.get(u);c.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,padding:h.padding,projectedAnchorX:h.projectedAnchorX,projectedAnchorY:h.projectedAnchorY,projectedAnchorZ:h.projectedAnchorZ,tileAnchorX:h.tileAnchorX,tileAnchorY:h.tileAnchorY},c.textFeatureIndex=h.featureIndex;break}for(var d=n;d<i;d++){var f=e.get(d);c.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,padding:f.padding,projectedAnchorX:f.projectedAnchorX,projectedAnchorY:f.projectedAnchorY,projectedAnchorZ:f.projectedAnchorZ,tileAnchorX:f.tileAnchorX,tileAnchorY:f.tileAnchorY},c.verticalTextFeatureIndex=f.featureIndex;break}for(var p=a;p<o;p++){var m=e.get(p);c.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,padding:m.padding,projectedAnchorX:m.projectedAnchorX,projectedAnchorY:m.projectedAnchorY,projectedAnchorZ:m.projectedAnchorZ,tileAnchorX:m.tileAnchorX,tileAnchorY:m.tileAnchorY},c.iconFeatureIndex=m.featureIndex;break}for(var v=s;v<l;v++){var g=e.get(v);c.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,padding:g.padding,projectedAnchorX:g.projectedAnchorX,projectedAnchorY:g.projectedAnchorY,projectedAnchorZ:g.projectedAnchorZ,tileAnchorX:g.tileAnchorX,tileAnchorY:g.tileAnchorY},c.verticalIconFeatureIndex=g.featureIndex;break}return c}},{key:"deserializeCollisionBoxes",value:function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var r=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(e,t){for(var r=e.placedSymbolArray.get(t),n=r.vertexStartIndex+4*r.numGlyphs,i=r.vertexStartIndex;i<n;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}},{key:"getSortedSymbolIndexes",value:function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),r=Math.cos(e),n=[],i=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);n.push(0|Math.round(t*s.tileAnchorX+r*s.tileAnchorY)),i.push(s.featureIndex)}return a.sort((function(e,t){return n[e]-n[t]||i[t]-i[e]})),a}},{key:"addToSortKeyRanges",value:function(e,t){var r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===t?r.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}},{key:"sortFeatures",value:function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var r,n=d(this.symbolInstanceIndexes);try{for(n.s();!(r=n.n()).done;){var i=r.value,a=this.symbolInstances.get(i);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e,r,n){e>=0&&n.indexOf(e)===r&&t.addIndicesForPlacedSymbol(t.text,e)})),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.verticalPlacedIconSymbolIndex)}}catch(o){n.e(o)}finally{n.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}]),e}();ea(Tp,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Tp.MAX_GLYPHS=65535,Tp.addDynamicAttributes=kp;var Ep=new mo({"symbol-placement":new co(ct.layout_symbol["symbol-placement"]),"symbol-spacing":new co(ct.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new co(ct.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new uo(ct.layout_symbol["symbol-sort-key"]),"symbol-z-order":new co(ct.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new co(ct.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new co(ct.layout_symbol["icon-ignore-placement"]),"icon-optional":new co(ct.layout_symbol["icon-optional"]),"icon-rotation-alignment":new co(ct.layout_symbol["icon-rotation-alignment"]),"icon-size":new uo(ct.layout_symbol["icon-size"]),"icon-text-fit":new co(ct.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new co(ct.layout_symbol["icon-text-fit-padding"]),"icon-image":new uo(ct.layout_symbol["icon-image"]),"icon-rotate":new uo(ct.layout_symbol["icon-rotate"]),"icon-padding":new co(ct.layout_symbol["icon-padding"]),"icon-keep-upright":new co(ct.layout_symbol["icon-keep-upright"]),"icon-offset":new uo(ct.layout_symbol["icon-offset"]),"icon-anchor":new uo(ct.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new co(ct.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new co(ct.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new co(ct.layout_symbol["text-rotation-alignment"]),"text-field":new uo(ct.layout_symbol["text-field"]),"text-font":new uo(ct.layout_symbol["text-font"]),"text-size":new uo(ct.layout_symbol["text-size"]),"text-max-width":new uo(ct.layout_symbol["text-max-width"]),"text-line-height":new uo(ct.layout_symbol["text-line-height"]),"text-letter-spacing":new uo(ct.layout_symbol["text-letter-spacing"]),"text-justify":new uo(ct.layout_symbol["text-justify"]),"text-radial-offset":new uo(ct.layout_symbol["text-radial-offset"]),"text-variable-anchor":new co(ct.layout_symbol["text-variable-anchor"]),"text-anchor":new uo(ct.layout_symbol["text-anchor"]),"text-max-angle":new co(ct.layout_symbol["text-max-angle"]),"text-writing-mode":new co(ct.layout_symbol["text-writing-mode"]),"text-rotate":new uo(ct.layout_symbol["text-rotate"]),"text-padding":new co(ct.layout_symbol["text-padding"]),"text-keep-upright":new co(ct.layout_symbol["text-keep-upright"]),"text-transform":new uo(ct.layout_symbol["text-transform"]),"text-offset":new uo(ct.layout_symbol["text-offset"]),"text-allow-overlap":new co(ct.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new co(ct.layout_symbol["text-ignore-placement"]),"text-optional":new co(ct.layout_symbol["text-optional"])}),Mp={paint:new mo({"icon-opacity":new uo(ct.paint_symbol["icon-opacity"]),"icon-color":new uo(ct.paint_symbol["icon-color"]),"icon-halo-color":new uo(ct.paint_symbol["icon-halo-color"]),"icon-halo-width":new uo(ct.paint_symbol["icon-halo-width"]),"icon-halo-blur":new uo(ct.paint_symbol["icon-halo-blur"]),"icon-translate":new co(ct.paint_symbol["icon-translate"]),"icon-translate-anchor":new co(ct.paint_symbol["icon-translate-anchor"]),"text-opacity":new uo(ct.paint_symbol["text-opacity"]),"text-color":new uo(ct.paint_symbol["text-color"],{runtimeType:_t,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new uo(ct.paint_symbol["text-halo-color"]),"text-halo-width":new uo(ct.paint_symbol["text-halo-width"]),"text-halo-blur":new uo(ct.paint_symbol["text-halo-blur"]),"text-translate":new co(ct.paint_symbol["text-translate"]),"text-translate-anchor":new co(ct.paint_symbol["text-translate-anchor"])}),layout:Ep},Ip=function(){function e(t){f(this,e),this.type=t.property.overrides?t.property.overrides.runtimeType:gt,this.defaultValue=t}return p(e,[{key:"evaluate",value:function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}]),e}();ea(Ip,"FormatSectionOverride",{omit:["defaultValue"]});var Pp=function(e){m(r,e);var t=v(r);function r(e){return f(this,r),t.call(this,e,Mp)}return p(r,[{key:"recalculate",value:function(e,t){o(s(r.prototype),"recalculate",this).call(this,e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));var n=this.layout.get("text-writing-mode");if(n){var i,a=[],l=d(n);try{for(l.s();!(i=l.n()).done;){var c=i.value;a.indexOf(c)<0&&a.push(c)}}catch(u){l.e(u)}finally{l.f()}this.layout._values["text-writing-mode"]=a}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(e,t,r,n){var i=this.layout.get(e).evaluate(t,{},r,n),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||ni(a.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,r){return r in e?String(e[r]):""}))}(t.properties,i)}},{key:"createBucket",value:function(e){return new Tp(e)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"_setPaintOverrides",value:function(){var e,t=d(Mp.paint.overridableProperties);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(r.hasPaintOverride(this.layout,n)){var i=this.paint.get(n),a=new Ip(i),o=new ri(a,i.property.specification),s=null;s="constant"===i.value.kind||"source"===i.value.kind?new ai("source",o):new oi("composite",o,i.value.zoomStops,i.value._interpolationType),this.paint._values[n]=new so(i.property,s,i.parameters)}}}catch(l){t.e(l)}finally{t.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&r.hasPaintOverride(this.layout,e)}},{key:"getProgramConfiguration",value:function(e){return new zs(this,e)}}],[{key:"hasPaintOverride",value:function(e,t){var r=e.get("text-field"),n=Mp.paint.properties[t],i=!1,a=function(e){var t,r=d(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(n.overrides&&n.overrides.hasOverride(a))return void(i=!0)}}catch(o){r.e(o)}finally{r.f()}};if("constant"===r.value.kind&&r.value.value instanceof Vt)a(r.value.value.sections);else if("source"===r.value.kind){var o=function e(t){i||(t instanceof $t&&Xt(t.value)===Ct?a(t.value.sections):t instanceof tr?a(t.sections):t.eachChild(e))},s=r.value;s._styleExpression&&o(s._styleExpression.expression)}return i}}]),r}(Zs),Rp={paint:new mo({"background-color":new co(ct.paint_background["background-color"]),"background-pattern":new fo(ct.paint_background["background-pattern"]),"background-opacity":new co(ct.paint_background["background-opacity"])})},zp={paint:new mo({"raster-opacity":new co(ct.paint_raster["raster-opacity"]),"raster-hue-rotate":new co(ct.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new co(ct.paint_raster["raster-brightness-min"]),"raster-brightness-max":new co(ct.paint_raster["raster-brightness-max"]),"raster-saturation":new co(ct.paint_raster["raster-saturation"]),"raster-contrast":new co(ct.paint_raster["raster-contrast"]),"raster-resampling":new co(ct.paint_raster["raster-resampling"]),"raster-fade-duration":new co(ct.paint_raster["raster-fade-duration"])})},Lp=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e,{})).implementation=e,n}return p(r,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){return!1}},{key:"serialize",value:function(){}},{key:"onAdd",value:function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}},{key:"onRemove",value:function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}]),r}(Zs),Dp={paint:new mo({"sky-type":new co(ct.paint_sky["sky-type"]),"sky-atmosphere-sun":new co(ct.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new co(ct.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new co(ct.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new co(ct.paint_sky["sky-gradient-radius"]),"sky-gradient":new po(ct.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new co(ct.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new co(ct.paint_sky["sky-atmosphere-color"]),"sky-opacity":new co(ct.paint_sky["sky-opacity"])})};function Op(e,t,r){var n=[0,0,1],i=bc([]);return wc(i,i,r?-R(e)+Math.PI:R(e)),_c(i,i,-R(t)),hc(n,n,i),sc(n,n)}for(var Fp={circle:function(e){m(r,e);var t=v(r);function r(e){return f(this,r),t.call(this,e,Dl)}return p(r,[{key:"createBucket",value:function(e){return new gl(e)}},{key:"queryRadius",value:function(e){var t=e;return Il("circle-radius",this,t)+Il("circle-stroke-width",this,t)+Pl(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,r,n,i,a,o,s){var l=zl(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,r)+this.paint.get("circle-stroke-width").evaluate(t,r);return Ec(e,n,a,o,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}},{key:"getProgramIds",value:function(){return["circle"]}},{key:"getProgramConfiguration",value:function(e){return new zs(this,e)}}]),r}(Zs),heatmap:function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e,Nc))._updateColorRamp(),n}return p(r,[{key:"createBucket",value:function(e){return new zc(e)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"heatmap-color"===e&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=Bc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(e){return Il("heatmap-radius",this,e)}},{key:"queryIntersectsFeature",value:function(e,t,r,n,i,a,o,s){var l=this.paint.get("heatmap-radius").evaluate(t,r);return Ec(e,n,a,o,s,!0,!0,new E(0,0),l)}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["heatmap","heatmapTexture"]}},{key:"getProgramConfiguration",value:function(e){return new zs(this,e)}}]),r}(Zs),hillshade:function(e){m(r,e);var t=v(r);function r(e){return f(this,r),t.call(this,e,Zc)}return p(r,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["hillshade","hillshadePrepare"]}}]),r}(Zs),fill:function(e){m(r,e);var t=v(r);function r(e){return f(this,r),t.call(this,e,Au)}return p(r,[{key:"getProgramIds",value:function(){var e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),r=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}},{key:"getProgramConfiguration",value:function(e){return new zs(this,e)}},{key:"recalculate",value:function(e,t){o(s(r.prototype),"recalculate",this).call(this,e,t);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(e){return new Su(e)}},{key:"queryRadius",value:function(){return Pl(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,r,n,i,a){return!e.queryGeometry.isAboveHorizon&&bl(Rl(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),n)}},{key:"isTileClipped",value:function(){return!0}}]),r}(Zs),"fill-extrusion":function(e){m(r,e);var t=v(r);function r(e){return f(this,r),t.call(this,e,sh)}return p(r,[{key:"createBucket",value:function(e){return new Ku(e)}},{key:"queryRadius",value:function(){return Pl(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"getProgramIds",value:function(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}},{key:"getProgramConfiguration",value:function(e){return new zs(this,e)}},{key:"queryIntersectsFeature",value:function(e,t,r,n,i,a,o,s,l){var c=zl(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(t,r),f=this.paint.get("fill-extrusion-base").evaluate(t,r),p=[0,0],m=s&&a.elevation,v=a.elevation?a.elevation.exaggeration():1,g=e.tile.getBucket(this);if(m&&g instanceof Ku){var y=g.centroidVertexArray,x=l+1;if(x<y.length){var b=y.get(x);p[0]=b.a_centroid_pos0,p[1]=b.a_centroid_pos1}}if(0===p[0]&&1===p[1])return!1;"globe"===a.projection.name&&(n=ah([n],[new E(0,0),new E(Gs,Gs)],e.tileID.canonical).map((function(e){return e.polygon})).flat());var _=function(e,t,r,n,i,a,o,s,l,c,u){return"globe"===e.projection.name?function(e,t,r,n,i,a,o,s,l,c,u){var h=[],f=[],p=e.projection.upVectorScale(u,e.center.lat,e.worldSize).metersToTile,m=[0,0,0,1],v=[0,0,0,1],g=function(e,t,r,n){e[0]=t,e[1]=r,e[2]=n,e[3]=1},y=ih();r>0&&(r+=y),n+=y;var x,b=d(t);try{for(b.s();!(x=b.n()).done;){var _,w=x.value,k=[],S=[],C=d(w);try{for(C.s();!(_=C.n()).done;){var A=_.value,T=A.x+i.x,E=A.y+i.y,M=e.projection.projectTilePoint(T,E,u),I=e.projection.upVector(u,A.x,A.y),P=r,R=n;if(o){var z=vh(T,E,r,n,o,s,l,c);P+=z.base,R+=z.top}0!==r?g(m,M.x+I[0]*p*P,M.y+I[1]*p*P,M.z+I[2]*p*P):g(m,M.x,M.y,M.z),g(v,M.x+I[0]*p*R,M.y+I[1]*p*R,M.z+I[2]*p*R),uc(m,m,a),uc(v,v,a),k.push(new fh(m[0],m[1],m[2])),S.push(new fh(v[0],v[1],v[2]))}}catch(L){C.e(L)}finally{C.f()}h.push(k),f.push(S)}}catch(L){b.e(L)}finally{b.f()}return[h,f]}(e,t,r,n,i,a,o,s,l,c,u):o?function(e,t,r,n,i,a,o,s,l){var c,u=[],h=[],f=[0,0,0,1],p=d(e);try{for(p.s();!(c=p.n()).done;){var m,v=c.value,g=[],y=[],x=d(v);try{for(x.s();!(m=x.n()).done;){var b=m.value,_=b.x+n.x,w=b.y+n.y,k=vh(_,w,t,r,a,o,s,l);f[0]=_,f[1]=w,f[2]=k.base,f[3]=1,yc(f,f,i),f[3]=Math.max(f[3],1e-5);var S=new fh(f[0]/f[3],f[1]/f[3],f[2]/f[3]);f[0]=_,f[1]=w,f[2]=k.top,f[3]=1,yc(f,f,i),f[3]=Math.max(f[3],1e-5);var C=new fh(f[0]/f[3],f[1]/f[3],f[2]/f[3]);g.push(S),y.push(C)}}catch(A){x.e(A)}finally{x.f()}u.push(g),h.push(y)}}catch(A){p.e(A)}finally{p.f()}return[u,h]}(t,r,n,i,a,o,s,l,c):function(e,t,r,n,i){var a,o=[],s=[],l=i[8]*t,c=i[9]*t,u=i[10]*t,h=i[11]*t,f=i[8]*r,p=i[9]*r,m=i[10]*r,v=i[11]*r,g=d(e);try{for(g.s();!(a=g.n()).done;){var y,x=a.value,b=[],_=[],w=d(x);try{for(w.s();!(y=w.n()).done;){var k=y.value,S=k.x+n.x,C=k.y+n.y,A=i[0]*S+i[4]*C+i[12],T=i[1]*S+i[5]*C+i[13],E=i[2]*S+i[6]*C+i[14],M=i[3]*S+i[7]*C+i[15],I=A+l,P=T+c,R=E+u,z=Math.max(M+h,1e-5),L=A+f,D=T+p,O=E+m,F=Math.max(M+v,1e-5);b.push(new fh(I/z,P/z,R/z)),_.push(new fh(L/F,D/F,O/F))}}catch(j){w.e(j)}finally{w.f()}o.push(b),s.push(_)}}catch(j){g.e(j)}finally{g.f()}return[o,s]}(t,r,n,i,a)}(a,n,f,u,c,o,m?s:null,p,v,a.center.lat,e.tileID.canonical),w=h(_,2),k=w[0],S=w[1],C=e.queryGeometry;return function(e,t,r){var n=1/0;bl(r,t)&&(n=mh(r,t[0]));for(var i=0;i<t.length;i++)for(var a=t[i],o=e[i],s=0;s<a.length-1;s++){var l=a[s],c=[l,a[s+1],o[s+1],o[s],l];yl(r,c)&&(n=Math.min(n,mh(r,c)))}return n!==1/0&&n}(k,S,C.isPointQuery()?C.screenBounds:C.screenGeometry)}}]),r}(Zs),line:function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e,kh)).gradientVersion=0,n}return p(r,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){if("line-gradient"===e){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof Nr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"recalculate",value:function(e,t){o(s(r.prototype),"recalculate",this).call(this,e,t),this.paint._values["line-floorwidth"]=Sh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}},{key:"createBucket",value:function(e){return new _h(e)}},{key:"getProgramIds",value:function(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}},{key:"getProgramConfiguration",value:function(e){return new zs(this,e)}},{key:"queryRadius",value:function(e){var t=e,r=Ch(Il("line-width",this,t),Il("line-gap-width",this,t)),n=Il("line-offset",this,t);return r/2+Math.abs(n)+Pl(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,r,n,i,a){if(e.queryGeometry.isAboveHorizon)return!1;var o=Rl(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*Ch(this.paint.get("line-width").evaluate(t,r),this.paint.get("line-gap-width").evaluate(t,r)),l=this.paint.get("line-offset").evaluate(t,r);return l&&(n=function(e,t){for(var r=[],n=new E(0,0),i=0;i<e.length;i++){for(var a=e[i],o=[],s=0;s<a.length;s++){var l=a[s-1],c=a[s],u=a[s+1],h=0===s?n:c.sub(l)._unit()._perp(),d=s===a.length-1?n:u.sub(c)._unit()._perp(),f=h._add(d)._unit();f._mult(1/(f.x*d.x+f.y*d.y)),o.push(f._mult(t)._add(c))}r.push(o)}return r}(n,l*e.pixelToTileUnitsFactor)),function(e,t,r){for(var n=0;n<t.length;n++){var i=t[n];if(e.length>=3)for(var a=0;a<i.length;a++)if(Tl(e,i[a]))return!0;if(_l(e,i,r))return!0}return!1}(o,n,s)}},{key:"isTileClipped",value:function(){return!0}}]),r}(Zs),symbol:Pp,background:function(e){m(r,e);var t=v(r);function r(e){return f(this,r),t.call(this,e,Rp)}return p(r,[{key:"getProgramIds",value:function(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}}]),r}(Zs),raster:function(e){m(r,e);var t=v(r);function r(e){return f(this,r),t.call(this,e,zp)}return p(r,[{key:"getProgramIds",value:function(){return["raster"]}}]),r}(Zs),sky:function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e,Dp))._updateColorRamp(),n}return p(r,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}},{key:"_updateColorRamp",value:function(){this.colorRamp=Bc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}},{key:"needsSkyboxCapture",value:function(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){var t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}},{key:"getCenter",value:function(e,t){if("atmosphere"===this.paint.get("sky-type")){var r=this.paint.get("sky-atmosphere-sun"),n=!r,i=e.style.light,a=i.properties.get("position");return n&&"viewport"===i.properties.get("anchor")&&te("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),n?Op(a.azimuthal,90-a.polar,t):Op(r[0],90-r[1],t)}var o=this.paint.get("sky-gradient-center");return Op(o[0],90-o[1],t)}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!0}},{key:"markSkyboxValid",value:function(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}},{key:"hasOffscreenPass",value:function(){return!0}},{key:"getProgramIds",value:function(){var e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}]),r}(Zs)},jp=function(){function e(t,r,n,i){f(this,e),this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(r,i)}return p(e,[{key:"update",value:function(e,t,r){var n=e.width,i=e.height,a=this.context,o=a.gl,s=y.HTMLImageElement,l=y.HTMLCanvasElement,c=y.HTMLVideoElement,u=y.ImageData,h=y.ImageBitmap;if(o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!t||!1!==t.premultiply)),r||this.size&&this.size[0]===n&&this.size[1]===i){var d=r||{x:0,y:0},f=d.x,p=d.y;e instanceof s||e instanceof l||e instanceof c||e instanceof u||h&&e instanceof h?o.texSubImage2D(o.TEXTURE_2D,0,f,p,o.RGBA,o.UNSIGNED_BYTE,e):o.texSubImage2D(o.TEXTURE_2D,0,f,p,n,i,o.RGBA,o.UNSIGNED_BYTE,e.data)}else this.size=[n,i],e instanceof s||e instanceof l||e instanceof c||e instanceof u||h&&e instanceof h?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,e):o.texImage2D(o.TEXTURE_2D,0,this.format,n,i,0,this.format,o.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(t&&t.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&o.generateMipmap(o.TEXTURE_2D)}},{key:"bind",value:function(e,t){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.useMipmap?e===r.NEAREST?r.NEAREST_MIPMAP_NEAREST:r.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}]),e}(),Np=function(){function e(t){var r=this;f(this,e),this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){r._triggered=!1,r._callback()})}return p(e,[{key:"trigger",value:function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))}},{key:"remove",value:function(){this._channel=void 0,this._callback=function(){}}}]),e}(),Bp=function(){function e(){f(this,e),this.tasks={},this.taskQueue=[],q(["process"],this),this.invoker=new Np(this.process),this.nextId=0}return p(e,[{key:"add",value:function(e,t){var r=this,n=this.nextId++,i=function(e){var t=e.type,r=e.isSymbolTile,n=e.zoom;return n=n||0,"message"===t?0:"maybePrepare"!==t||r?"parseTile"!==t||r?"parseTile"===t&&r?300-n:"maybePrepare"===t&&r?400-n:500:200-n:100-n}(t);if(0===i){ie();try{e()}finally{}return{cancel:function(){}}}return this.tasks[n]={fn:e,metadata:t,priority:i,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:function(){delete r.tasks[n]}}}},{key:"process",value:function(){var e=this;ie();try{if(this.taskQueue=this.taskQueue.filter((function(t){return!!e.tasks[t]})),!this.taskQueue.length)return;var t=this.pick();if(null===t)return;var r=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!r)return;r.fn()}finally{}}},{key:"pick",value:function(){for(var e=null,t=1/0,r=0;r<this.taskQueue.length;r++){var n=this.tasks[this.taskQueue[r]];n.priority<t&&(t=n.priority,e=r)}if(null===e)return null;var i=this.taskQueue[e];return this.taskQueue.splice(e,1),i}},{key:"remove",value:function(){this.invoker.remove()}}]),e}(),Zp=function(){function e(t){f(this,e),this._stringToNumber={},this._numberToString=[];for(var r=0;r<t.length;r++){var n=t[r];this._stringToNumber[n]=r,this._numberToString[r]=n}}return p(e,[{key:"encode",value:function(e){return this._stringToNumber[e]}},{key:"decode",value:function(e){return this._numberToString[e]}}]),e}(),Up=["tile","layer","source","sourceLayer","state"],Vp=function(){function e(t,r,n,i,a){f(this,e),this.type="Feature",this._vectorTileFeature=t,this._z=r,this._x=n,this._y=i,this.properties=t.properties,this.id=a}return p(e,[{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry},set:function(e){this._geometry=e}},{key:"toJSON",value:function(){var e={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);var t,r=d(Up);try{for(r.s();!(t=r.n()).done;){var n=t.value;void 0!==this[n]&&(e[n]=this[n])}}catch(i){r.e(i)}finally{r.f()}return e}}]),e}(),Wp=32,Gp=33,Hp=new Uint16Array(8184),Xp=0;Xp<2046;Xp++){var Yp=Xp+2,qp=0,$p=0,Kp=0,Jp=0,Qp=0,em=0;for(1&Yp?Kp=Jp=Qp=Wp:qp=$p=em=Wp;(Yp>>=1)>1;){var tm=qp+Kp>>1,rm=$p+Jp>>1;1&Yp?(Kp=qp,Jp=$p,qp=Qp,$p=em):(qp=Kp,$p=Jp,Kp=Qp,Jp=em),Qp=tm,em=rm}var nm=4*Xp;Hp[nm+0]=qp,Hp[nm+1]=$p,Hp[nm+2]=Kp,Hp[nm+3]=Jp}var im=new Uint16Array(2178),am=new Uint8Array(1089),om=new Uint16Array(1089);function sm(e){return 0===e?-.03125:32===e?.03125:0}var lm=bo([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),cm={type:2,extent:Gs,loadGeometry:function(){return[[new E(0,0),new E(8193,0),new E(8193,8193),new E(0,8193),new E(0,0)]]}},um=function(){function e(t,r,n,i,a){f(this,e),this.tileID=t,this.uid=G(),this.uses=0,this.tileSize=r,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=a,this.expiredRequestCount=0,this.state="loading",i&&i.transform&&(this.projection=i.transform.projection)}return p(e,[{key:"registerFadeDuration",value:function(e){var t=e+this.timeAdded;t<nt.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"tileTransform",get:function(){return this._tileTransform||(this._tileTransform=Kf(this.tileID.canonical,this.projection)),this._tileTransform}},{key:"loadVectorData",value:function(e,t,r){if(this.unloadVectorData(),this.state="loaded",e){for(var n in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var r={};if(!t)return r;var n,i=d(e);try{var a=function(){var e=n.value,i=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==i.length){e.layers=i,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return i.filter((function(t){return t.id===e}))[0]})));var a,o=d(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;r[s.id]=e}}catch(l){o.e(l)}finally{o.f()}}};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[n];if(i instanceof Tp){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a in this.buckets){var o=this.buckets[a];if(o instanceof Tp&&o.hasRTLText){this.hasRTLText=!0,Qa.isLoading()||Qa.isLoaded()||"deferred"!==Ka()||Ja();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(s).queryRadius(l))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new $o}},{key:"unloadVectorData",value:function(){if(this.hasData()){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}},{key:"getBucket",value:function(e){return this.buckets[e.id]}},{key:"upload",value:function(e){for(var t in this.buckets){var r=this.buckets[t];r.uploadPending()&&r.upload(e)}var n=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new jp(e,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new jp(e,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new jp(e,this.lineAtlas.image,n.ALPHA),this.lineAtlas.uploaded=!0)}},{key:"prepare",value:function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(e,t,r,n,i,a,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:n,pixelPosMatrix:o,transform:a,params:i,tileTransform:this.tileTransform},e,t,r):{}}},{key:"querySourceFeatures",value:function(e,t){var r=this.latestFeatureIndex;if(r&&r.rawTileData){var n=r.loadVTLayers(),i=t?t.sourceLayer:"",a=n._geojsonTileLayer||n[i];if(a)for(var o=xi(t&&t.filter),s=this.tileID.canonical,l=s.z,c=s.x,u=s.y,h={z:l,x:c,y:u},d=0;d<a.length;d++){var f=a.feature(d);if(o.needGeometry){var p=pl(f,!0);if(!o.filter(new eo(this.tileID.overscaledZ),p,this.tileID.canonical))continue}else if(!o.filter(new eo(this.tileID.overscaledZ),f))continue;var m=r.getId(f,i),v=new Vp(f,l,c,u,m);v.tile=h,e.push(v)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(e){var t=this.expirationTime;if(e.cacheControl){var r=ae(e.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var n=Date.now(),i=!1;if(this.expirationTime>n)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var a=this.expirationTime-t;a?this.expirationTime=n+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length&&t){var r=this.latestFeatureIndex.loadVTLayers(),n=t.style.listImages();for(var i in this.buckets)if(t.style.hasLayer(i)){var a=this.buckets[i],o=a.layers[0].sourceLayer||"_geojsonTileLayer",s=r[o],l=e[o];if(s&&l&&0!==Object.keys(l).length){if(a.update(l,s,n,this.imageAtlas&&this.imageAtlas.patternPositions||{}),a instanceof _h||a instanceof Su){var c=t.style._getSourceCache(a.layers[0].source);t._terrain&&t._terrain.enabled&&c&&a.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(c.id,this.tileID)}var u=t&&t.style&&t.style.getLayer(i);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(a)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<nt.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(e){this.symbolFadeHoldUntil=nt.now()+e}},{key:"setTexture",value:function(e,t){var r=t.context,n=r.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new jp(r,e,n.RGBA,{useMipmap:!0}),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),r.extTextureFilterAnisotropic&&n.texParameterf(n.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax))}},{key:"setDependencies",value:function(e,t){var r,n={},i=d(t);try{for(i.s();!(r=i.n()).done;)n[r.value]=!0}catch(a){i.e(a)}finally{i.f()}this.dependencies[e]=n}},{key:"hasDependency",value:function(e,t){var r,n=d(e);try{for(n.s();!(r=n.n()).done;){var i=r.value,a=this.dependencies[i];if(a){var o,s=d(t);try{for(s.s();!(o=s.n()).done;)if(a[o.value])return!0}catch(l){s.e(l)}finally{s.f()}}}}catch(l){n.e(l)}finally{n.f()}return!1}},{key:"clearQueryDebugViz",value:function(){}},{key:"_makeDebugTileBoundsBuffers",value:function(e,t){if(t&&"mercator"!==t.name&&!this._tileDebugBuffer){for(var r=fl(cm,this.tileID.canonical,this.tileTransform)[0],n=new wo,i=new Go,a=0;a<r.length;a++){var o=r[a],s=o.x,l=o.y;n.emplaceBack(s,l),i.emplaceBack(a)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(n,xf.members),this._tileDebugSegments=Ws.simpleSegment(0,0,n.length,i.length)}}},{key:"_makeTileBoundsBuffers",value:function(e,t){if(!this._tileBoundsBuffer&&t&&"mercator"!==t.name){var r,n,i=fl(cm,this.tileID.canonical,this.tileTransform)[0];if(this.isRaster){var a=function(e,t){for(var r=Kf(e,t),n=Math.pow(2,e.z),i=0;i<Gp;i++)for(var a=0;a<Gp;a++){var o=el((e.x+(a+sm(a))/Wp)/n),s=tl((e.y+(i+sm(i))/Wp)/n),l=t.project(o,s),c=i*Gp+a;im[2*c+0]=Math.round((l.x*r.scale-r.x)*Gs),im[2*c+1]=Math.round((l.y*r.scale-r.y)*Gs)}am.fill(0),om.fill(0);for(var u=2045;u>=0;u--){var h=4*u,d=Hp[h+0],f=Hp[h+1],p=Hp[h+2],m=Hp[h+3],v=d+p>>1,g=f+m>>1,y=v+g-f,x=g+d-v,b=f*Gp+d,_=m*Gp+p,w=g*Gp+v,k=Math.hypot((im[2*b+0]+im[2*_+0])/2-im[2*w+0],(im[2*b+1]+im[2*_+1])/2-im[2*w+1])>=16;if(am[w]=am[w]||(k?1:0),u<1022){var S=(f+x>>1)*Gp+(d+y>>1),C=(m+x>>1)*Gp+(p+y>>1);am[w]=am[w]||am[S]||am[C]}}var A=new So,T=new jo,E=0;function M(e,t){var r=t*Gp+e;return 0===om[r]&&(A.emplaceBack(im[2*r+0],im[2*r+1],e*Gs/Wp,t*Gs/Wp),om[r]=++E),om[r]-1}function I(e,t,r,n,i,a){var o=e+r>>1,s=t+n>>1;if(Math.abs(e-i)+Math.abs(t-a)>1&&am[s*Gp+o])I(i,a,e,t,o,s),I(r,n,i,a,o,s);else{var l=M(e,t),c=M(r,n),u=M(i,a);T.emplaceBack(l,c,u)}}return I(0,0,Wp,Wp,Wp,0),I(Wp,Wp,0,0,0,Wp),{vertices:A,indices:T}}(this.tileID.canonical,t);r=a.vertices,n=a.indices}else{r=new So,n=new jo;var o,s=d(i);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=l.x,u=l.y;r.emplaceBack(c,u,0,0)}}catch(p){s.e(p)}finally{s.f()}for(var h=Vc.exports(r.int16,void 0,4),f=0;f<h.length;f+=3)n.emplaceBack(h[f],h[f+1],h[f+2])}this._tileBoundsBuffer=e.createVertexBuffer(r,lm.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(n),this._tileBoundsSegments=Ws.simpleSegment(0,0,r.length,n.length)}}},{key:"_makeGlobeTileDebugBuffers",value:function(e,t){var r=t.projection;if(r&&"globe"===r.name&&!t.freezeTileCoverage){var n,i=this.tileID.canonical,a=Uf(Rf(i,t)),o=Gf(t.zoom);o>0&&(n=Zl(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,i,t,a,n,o),this._makeGlobeTileDebugTextBuffer(e,i,t,a,n,o)}}},{key:"_globePoint",value:function(e,t,r,n,i,a,o){var s=Nf(e,t,r);if(a){var l=1<<r.z,c=Ks(n.center.lng),u=Js(n.center.lat),h=(r.x+.5)/l-c,d=0;h>.5?d=-1:h<-.5&&(d=1);var f=(e/Gs+r.x)/l+d,p=(t/Gs+r.y)/l;f=(f-c)*n._pixelsPerMercatorPixel+c,p=(p-u)*n._pixelsPerMercatorPixel+u;var m=[f*n.worldSize,p*n.worldSize,0];uc(m,m,a),s=Pf(s,m,o)}return uc(s,s,i)}},{key:"_makeGlobeTileDebugBorderBuffer",value:function(e,t,r,n,i,a){var o=this,s=new wo,l=new Go,c=new ko,u=function(e,u,h,d,f){for(var p=(h-e)/(f-1),m=(d-u)/(f-1),v=s.length,g=0;g<f;g++){var y=e+g*p,x=u+g*m;s.emplaceBack(y,x);var b=o._globePoint(y,x,t,r,n,i,a);c.emplaceBack(b[0],b[1],b[2]),l.emplaceBack(v+g)}},h=Gs;u(0,0,h,0,16),u(h,0,h,h,16),u(h,h,0,h,16),u(0,h,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(l),this._tileDebugBuffer=e.createVertexBuffer(s,xf.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(c,yf.members),this._tileDebugSegments=Ws.simpleSegment(0,0,s.length,l.length)}},{key:"_makeGlobeTileDebugTextBuffer",value:function(e,t,r,n,i,a){var o=new wo,s=new jo,l=new ko,c=25;s.reserve(32),o.reserve(c),l.reserve(c);for(var u=function(e,t){return c*e+t},h=0;h<c;h++)for(var d=2048*h,f=0;f<c;f++){var p=2048*f;o.emplaceBack(p,d);var m=this._globePoint(p,d,t,r,n,i,a);l.emplaceBack(m[0],m[1],m[2])}for(var v=0;v<4;v++)for(var g=0;g<4;g++){var y=u(v,g),x=u(v,g+1),b=u(v+1,g),_=u(v+1,g+1);s.emplaceBack(y,x,b),s.emplaceBack(b,x,_)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(s),this._tileDebugTextBuffer=e.createVertexBuffer(o,xf.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(l,yf.members),this._tileDebugTextSegments=Ws.simpleSegment(0,0,c,32)}}]),e}(),hm=function(){function e(){f(this,e),this.state={},this.stateChanges={},this.deletedStates={}}return p(e,[{key:"updateState",value:function(e,t,r){var n=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][n]=this.stateChanges[e][n]||{},V(this.stateChanges[e][n],r),null===this.deletedStates[e])for(var i in this.deletedStates[e]={},this.state[e])i!==n&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][n])for(var a in this.deletedStates[e][n]={},this.state[e][n])r[a]||(this.deletedStates[e][n][a]=null);else for(var o in r)this.deletedStates[e]&&this.deletedStates[e][n]&&null===this.deletedStates[e][n][o]&&delete this.deletedStates[e][n][o]}},{key:"removeFeatureState",value:function(e,t,r){if(null!==this.deletedStates[e]){var n=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},r&&void 0!==t)null!==this.deletedStates[e][n]&&(this.deletedStates[e][n]=this.deletedStates[e][n]||{},this.deletedStates[e][n][r]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][n])for(r in this.deletedStates[e][n]={},this.stateChanges[e][n])this.deletedStates[e][n][r]=null;else this.deletedStates[e][n]=null;else this.deletedStates[e]=null}}},{key:"getState",value:function(e,t){var r=String(t),n=V({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var i=this.deletedStates[e][t];if(null===i)return{};for(var a in i)delete n[a]}return n}},{key:"initializeTileState",value:function(e,t){e.setFeatureState(this.state,t)}},{key:"coalesceChanges",value:function(e,t){var r={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var i={};for(var a in this.stateChanges[n])this.state[n][a]||(this.state[n][a]={}),V(this.state[n][a],this.stateChanges[n][a]),i[a]=this.state[n][a];r[n]=i}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var l in this.state[o])s[l]={},this.state[o][l]={};else for(var c in this.deletedStates[o]){if(null===this.deletedStates[o][c])this.state[o][c]={};else for(var u=0,h=Object.keys(this.deletedStates[o][c]);u<h.length;u++){var d=h[u];delete this.state[o][c][d]}s[c]=this.state[o][c]}r[o]=r[o]||{},V(r[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var f in e)e[f].setFeatureState(r,t)}}]),e}(),dm=function(){function e(t){f(this,e),this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}return p(e,[{key:"getElevation",value:function(e,t){var r=this.toIdx(e,t);return{min:this.minimums[r],max:this.maximums[r]}}},{key:"isLeaf",value:function(e,t){return this.leaves[this.toIdx(e,t)]}},{key:"toIdx",value:function(e,t){return t*this.size+e}}]),e}();function fm(e,t,r,n){for(var i=0,a=Number.MAX_VALUE,o=0;o<3;o++)if(Math.abs(n[o])<1e-15){if(r[o]<e[o]||r[o]>t[o])return null}else{var s=1/n[o],l=(e[o]-r[o])*s,c=(t[o]-r[o])*s;if(l>c){var u=l;l=c,c=u}if(l>i&&(i=l),c<a&&(a=c),i>a)return null}return i}function pm(e,t,r,n,i,a,o,s,l,c,u){var h=n-e,d=i-t,f=a-r,p=o-e,m=s-t,v=l-r,g=u[1]*v-u[2]*m,y=u[2]*p-u[0]*v,x=u[0]*m-u[1]*p,b=h*g+d*y+f*x;if(Math.abs(b)<1e-15)return null;var _=1/b,w=c[0]-e,k=c[1]-t,S=c[2]-r,C=(w*g+k*y+S*x)*_;if(C<0||C>1)return null;var A=k*f-S*d,T=S*h-w*f,E=w*d-k*h,M=(u[0]*A+u[1]*T+u[2]*E)*_;return M<0||C+M>1?null:(p*A+m*T+v*E)*_}function mm(e,t,r){return(e-t)/(r-t)}function vm(e,t,r,n,i,a,o,s,l){var c=1<<r,u=a-n,h=o-i,d=(e+1)/c*u+n,f=(t+0)/c*h+i,p=(t+1)/c*h+i;s[0]=(e+0)/c*u+n,s[1]=f,l[0]=d,l[1]=p}var gm=function(){function e(t){if(f(this,e),this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],this.dem){var r=function(e){for(var t=Math.ceil(Math.log2(e.dim/8)),r=[],n=Math.ceil(Math.pow(2,t)),i=1/n,a=function(e,t,r,n,i){var a=n?1:0,o=(e+1)*r-a,s=t*r,l=(t+1)*r-a;i[0]=e*r,i[1]=s,i[2]=o,i[3]=l},o=new dm(n),s=[],l=0;l<n*n;l++){a(l%n,Math.floor(l/n),i,!1,s);var c=xm(s[0],s[1],e),u=xm(s[2],s[1],e),h=xm(s[2],s[3],e),d=xm(s[0],s[3],e);o.minimums.push(Math.min(c,u,h,d)),o.maximums.push(Math.max(c,u,h,d)),o.leaves.push(1)}for(r.push(o),n/=2;n>=1;n/=2){var f=r[r.length-1];o=new dm(n);for(var p=0;p<n*n;p++){a(p%n,Math.floor(p/n),2,!0,s);var m=f.getElevation(s[0],s[1]),v=f.getElevation(s[2],s[1]),g=f.getElevation(s[2],s[3]),y=f.getElevation(s[0],s[3]),x=f.isLeaf(s[0],s[1]),b=f.isLeaf(s[2],s[1]),_=f.isLeaf(s[2],s[3]),w=f.isLeaf(s[0],s[3]),k=Math.min(m.min,v.min,g.min,y.min),S=Math.max(m.max,v.max,g.max,y.max),C=x&&b&&_&&w;o.maximums.push(S),o.minimums.push(k),o.leaves.push(S-k<=5&&C?1:0)}r.push(o)}return r}(this.dem),n=r.length-1,i=r[n];this._addNode(i.minimums[0],i.maximums[0],i.leaves[0]),this._construct(r,0,0,n,0)}}return p(e,[{key:"raycastRoot",value:function(e,t,r,n,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return fm([e,t,-100],[r,n,this.maximums[0]*o],i,a)}},{key:"raycast",value:function(e,t,r,n,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;var s=this.raycastRoot(e,t,r,n,i,a,o);if(null==s)return null;for(var l=[],c=[],u=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];d.length>0;){var f=d.pop(),p=f.idx,m=f.t,v=f.nodex,g=f.nodey,y=f.depth;if(this.leaves[p]){vm(v,g,y,e,t,r,n,u,h);var x=1<<y,b=(v+0)/x,_=(v+1)/x,w=(g+0)/x,k=(g+1)/x,S=xm(b,w,this.dem)*o,C=xm(_,w,this.dem)*o,A=xm(_,k,this.dem)*o,T=xm(b,k,this.dem)*o,E=pm(u[0],u[1],S,h[0],u[1],C,h[0],h[1],A,i,a),M=pm(h[0],h[1],A,u[0],h[1],T,u[0],u[1],S,i,a),I=Math.min(null!==E?E:Number.MAX_VALUE,null!==M?M:Number.MAX_VALUE);if(I!==Number.MAX_VALUE)return I;var P=oc([],i,a,m);if(ym(S,C,T,A,mm(P[0],u[0],h[0]),mm(P[1],u[1],h[1]))>=P[2])return m}else{for(var R=0,z=0;z<this._siblingOffset.length;z++){vm((v<<1)+this._siblingOffset[z][0],(g<<1)+this._siblingOffset[z][1],y+1,e,t,r,n,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[p]+z]*o;var L=fm(u,h,i,a);if(null!=L){var D=L;l[z]=D;for(var O=!1,F=0;F<R&&!O;F++)D>=l[c[F]]&&(c.splice(F,0,z),O=!0);O||(c[R]=z),R++}}for(var j=0;j<R;j++){var N=c[j];d.push({idx:this.childOffsets[p]+N,t:l[N],nodex:(v<<1)+this._siblingOffset[N][0],nodey:(g<<1)+this._siblingOffset[N][1],depth:y+1})}}}return null}},{key:"_addNode",value:function(e,t,r){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(r),this.childOffsets.push(0),this.nodeCount++}},{key:"_construct",value:function(e,t,r,n,i){if(1!==e[n].isLeaf(t,r)){this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);for(var a=n-1,o=e[a],s=0,l=0,c=0;c<this._siblingOffset.length;c++){var u=2*t+this._siblingOffset[c][0],h=2*r+this._siblingOffset[c][1],d=o.getElevation(u,h),f=o.isLeaf(u,h),p=this._addNode(d.min,d.max,f);f&&(s|=1<<c),l||(l=p)}for(var m=0;m<this._siblingOffset.length;m++)s&1<<m||this._construct(e,2*t+this._siblingOffset[m][0],2*r+this._siblingOffset[m][1],a,l+m)}}}]),e}();function ym(e,t,r,n,i,a){return Br(Br(e,r,a),Br(t,n,a),i)}function xm(e,t,r){var n=r.dim,i=j(e*n-.5,0,n-1),a=j(t*n-.5,0,n-1),o=Math.floor(i),s=Math.floor(a),l=Math.min(o+1,n-1),c=Math.min(s+1,n-1);return ym(r.get(o,s),r.get(l,s),r.get(o,c),r.get(l,c),i-o,a-s)}var bm={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]},_m=function(){function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(f(this,e),this.uid=t,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return te('"'.concat(n,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=r.height;var o=this.dim=r.height-2,s=new Uint32Array(r.data.buffer);if(this.pixels=new Uint8Array(r.data.buffer),this.encoding=n||"mapbox",this.borderReady=i,!i){for(var l=0;l<o;l++)s[this._idx(-1,l)]=s[this._idx(0,l)],s[this._idx(o,l)]=s[this._idx(o-1,l)],s[this._idx(l,-1)]=s[this._idx(l,0)],s[this._idx(l,o)]=s[this._idx(l,o-1)];s[this._idx(-1,-1)]=s[this._idx(0,0)],s[this._idx(o,-1)]=s[this._idx(o-1,0)],s[this._idx(-1,o)]=s[this._idx(0,o-1)],s[this._idx(o,o)]=s[this._idx(o-1,o-1)],a&&this._buildQuadTree()}}return p(e,[{key:"tree",get:function(){return this._tree||this._buildQuadTree(),this._tree}},{key:"_buildQuadTree",value:function(){this._tree=new gm(this)}},{key:"get",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(e=j(e,-1,this.dim),t=j(t,-1,this.dim));var r=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[r],this.pixels[r+1],this.pixels[r+2])}},{key:"unpackVector",get:function(){return bm[this.encoding]}},{key:"_idx",value:function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}},{key:"_unpackMapbox",value:function(e,t,r){return(256*e*256+256*t+r)/10-1e4}},{key:"_unpackTerrarium",value:function(e,t,r){return 256*e+t+r/256-32768}},{key:"getPixels",value:function(){return new jc({width:this.stride,height:this.stride},this.pixels)}},{key:"backfillBorder",value:function(e,t,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var n=t*this.dim,i=t*this.dim+this.dim,a=r*this.dim,o=r*this.dim+this.dim;switch(t){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:a=o-1;break;case 1:o=a+1}for(var s=-t*this.dim,l=-r*this.dim,c=a;c<o;c++)for(var u=n;u<i;u++){var h=4*this._idx(u,c),d=4*this._idx(u+s,c+l);this.pixels[h+0]=e.pixels[d+0],this.pixels[h+1]=e.pixels[d+1],this.pixels[h+2]=e.pixels[d+2],this.pixels[h+3]=e.pixels[d+3]}}},{key:"onDeserialize",value:function(){this._tree&&(this._tree.dem=this)}}],[{key:"getUnpackVector",value:function(e){return bm[e]}},{key:"pack",value:function(t,r){var n=[0,0,0,0],i=e.getUnpackVector(r),a=Math.floor((t+i[3])/i[2]);return n[2]=a%256,a=Math.floor(a/256),n[1]=a%256,a=Math.floor(a/256),n[0]=a,n}}]),e}();ea(_m,"DEMData"),ea(gm,"DemMinMaxQuadTree",{omit:["dem"]});var wm=function(){function e(t,r){f(this,e),this.max=t,this.onRemove=r,this.reset()}return p(e,[{key:"reset",value:function(){for(var e in this.data){var t,r=d(this.data[e]);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value)}}catch(i){r.e(i)}finally{r.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(e,t,r){var n=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var a={value:t,timeout:void 0};if(void 0!==r&&(a.timeout=setTimeout((function(){n.remove(e,a)}),r)),this.data[i].push(a),this.order.push(i),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}},{key:"has",value:function(e){return e.wrapped().key in this.data}},{key:"getAndRemove",value:function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}},{key:"getByKey",value:function(e){var t=this.data[e];return t?t[0].value:null}},{key:"get",value:function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}},{key:"remove",value:function(e,t){if(!this.has(e))return this;var r=e.wrapped().key,n=void 0===t?0:this.data[r].indexOf(t),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this}},{key:"setMaxSize",value:function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}},{key:"filter",value:function(e){var t=[];for(var r in this.data){var n,i=d(this.data[r]);try{for(i.s();!(n=i.n()).done;){var a=n.value;e(a.value)||t.push(a)}}catch(c){i.e(c)}finally{i.f()}}for(var o=0,s=t;o<s.length;o++){var l=s[o];this.remove(l.value.tileID,l)}}}]),e}(),km=p((function e(t,r,n){f(this,e),this.func=t,this.mask=r,this.range=n}));km.ReadOnly=!1,km.ReadWrite=!0,km.disabled=new km(519,km.ReadOnly,[0,1]);var Sm=7680,Cm=p((function e(t,r,n,i,a,o){f(this,e),this.test=t,this.ref=r,this.mask=n,this.fail=i,this.depthFail=a,this.pass=o}));Cm.disabled=new Cm({func:519,mask:0},0,0,Sm,Sm,Sm);var Am=p((function e(t,r,n){f(this,e),this.blendFunction=t,this.blendColor=r,this.mask=n}));Am.Replace=[1,0],Am.disabled=new Am(Am.Replace,Bt.transparent,[!1,!1,!1,!1]),Am.unblended=new Am(Am.Replace,Bt.transparent,[!0,!0,!0,!0]),Am.alphaBlended=new Am([1,771],Bt.transparent,[!0,!0,!0,!0]);var Tm=1029,Em=2305,Mm=p((function e(t,r,n){f(this,e),this.enable=t,this.mode=r,this.frontFace=n}));Mm.disabled=new Mm(!1,Tm,Em),Mm.backCCW=new Mm(!0,Tm,Em),Mm.backCW=new Mm(!0,Tm,2304),Mm.frontCW=new Mm(!0,1028,2304),Mm.frontCCW=new Mm(!0,1028,Em);var Im=function(e){m(r,e);var t=v(r);function r(e,n,a){var o;return f(this,r),(o=t.call(this)).id=e,o._onlySymbols=a,n.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),n.on("error",(function(){o._sourceErrored=!0})),o._source=n,o._tiles={},o._cache=new wm(0,o._unloadTile.bind(i(o))),o._timers={},o._cacheTimers={},o._minTileCacheSize=n.minTileCacheSize,o._maxTileCacheSize=n.maxTileCacheSize,o._loadedParentTiles={},o._coveredTiles={},o._state=new hm,o._isRaster="raster"===o._source.type||"raster-dem"===o._source.type||"custom"===o._source.type&&"raster"===o._source._dataType,o}return p(r,[{key:"onAdd",value:function(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}}},{key:"_loadTile",value:function(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}},{key:"_unloadTile",value:function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))}},{key:"_abortTile",value:function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var r=this._tiles[t];r.upload(e),r.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return U(this._tiles).map((function(e){return e.tileID})).sort(Pm).map((function(e){return e.key}))}},{key:"getRenderableIds",value:function(e){var t=this,r=[];for(var n in this._tiles)this._isIdRenderable(+n,e)&&r.push(this._tiles[n]);return e?r.sort((function(e,r){var n=e.tileID,i=r.tileID,a=new E(n.canonical.x,n.canonical.y)._rotate(t.transform.angle),o=new E(i.canonical.x,i.canonical.y)._rotate(t.transform.angle);return n.overscaledZ-i.overscaledZ||o.y-a.y||o.x-a.x})).map((function(e){return e.tileID.key})):r.map((function(e){return e.tileID})).sort(Pm).map((function(e){return e.key}))}},{key:"hasRenderableParent",value:function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}},{key:"_isIdRenderable",value:function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}},{key:"_reloadTile",value:function(e,t){var r=this._tiles[e];r&&("loading"!==r.state&&(r.state=t),this._loadTile(r,this._tileLoaded.bind(this,r,e,t)))}},{key:"_tileLoaded",value:function(e,t,r,n){if(n)if(e.state="errored",404!==n.status)this._source.fire(new st(n,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){var i=this.map.painter.terrain;this.update(this.transform,i.getScaledDemTileSize(),!0),i.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=nt.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new ot("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}},{key:"_backfillDEM",value:function(e){for(var t=this.getRenderableIds(),r=0;r<t.length;r++){var n=t[r];if(e.neighboringTiles&&e.neighboringTiles[n]){var i=this.getTileByID(n);a(e,i),a(i,e)}}function a(e,t){if(e.dem&&!e.dem.borderReady){e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;var r=t.tileID.canonical.x-e.tileID.canonical.x,n=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,r,n),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}}},{key:"getTile",value:function(e){return this.getTileByID(e.key)}},{key:"getTileByID",value:function(e){return this._tiles[e]}},{key:"_retainLoadedChildren",value:function(e,t,r,n){for(var i in this._tiles){var a=this._tiles[i];if(!(n[i]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>r)){for(var o=a.tileID;a&&a.tileID.overscaledZ>t+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var l=o;l.overscaledZ>t;)if(e[(l=l.scaledTo(l.overscaledZ-1)).key]){n[o.key]=o;break}}}}},{key:"findLoadedParent",value:function(e,t){if(e.key in this._loadedParentTiles){var r=this._loadedParentTiles[e.key];return r&&r.tileID.overscaledZ>=t?r:null}for(var n=e.overscaledZ-1;n>=t;n--){var i=e.scaledTo(n),a=this._getLoadedTile(i);if(a)return a}}},{key:"_getLoadedTile",value:function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}},{key:"updateCacheSize",value:function(e,t){t=t||this._source.tileSize;var r=Math.ceil(e.width/t)+1,n=Math.ceil(e.height/t)+1,i=Math.floor(r*n*5),a="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,a):a;this._cache.setMaxSize(o)}},{key:"handleWrapJump",value:function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var r={};for(var n in this._tiles){var i=this._tiles[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),r[i.tileID.key]=i}for(var a in this._tiles=r,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var o in this._tiles)this._setTileReloadTimer(+o,this._tiles[o])}}},{key:"update",value:function(e,t,n){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused&&!this.transform.freezeTileCoverage&&(!this.usedForTerrain||n)){var a;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new hh(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(a=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(a=a.filter((function(e){return i._source.hasTile(e)})))):a=[];var o=this._updateRetainedTiles(a);if(Rm(this._source.type)&&0!==a.length){for(var s={},l={},c=0,u=Object.keys(o);c<u.length;c++){var h=u[c],f=o[h],p=this._tiles[h];if(p&&!(p.fadeEndTime&&p.fadeEndTime<=nt.now())){var m=this.findLoadedParent(f,Math.max(f.overscaledZ-r.maxOverzooming,this._source.minzoom));m&&(this._addTile(m.tileID),s[m.tileID.key]=m.tileID),l[h]=f}}var v=a[a.length-1].overscaledZ;for(var g in this._tiles){var y=this._tiles[g];if(!o[g]&&y.hasData())for(var x=y.tileID;x.overscaledZ>v;){x=x.scaledTo(x.overscaledZ-1);var b=this._tiles[x.key];if(b&&b.hasData()&&l[x.key]){o[g]=y.tileID;break}}}for(var _ in s)o[_]||(this._coveredTiles[_]=!0,o[_]=s[_])}for(var w in o)this._tiles[w].clearFadeHold();var k,S=function(e,t){var r=[];for(var n in e)n in t||r.push(n);return r}(this._tiles,o),C=d(S);try{for(C.s();!(k=C.n()).done;){var A=k.value,T=this._tiles[A];T.hasSymbolBuckets&&!T.holdingForFade()?T.setHoldDuration(this.map._fadeDuration):T.hasSymbolBuckets&&!T.symbolFadeFinished()||this._removeTile(+A)}}catch(E){C.e(E)}finally{C.f()}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}},{key:"_updateRetainedTiles",value:function(e){var t={};if(0===e.length)return t;var n,i={},a=e.reduce((function(e,t){return Math.min(e,t.overscaledZ)}),1/0),o=e[0].overscaledZ,s=Math.max(o-r.maxOverzooming,this._source.minzoom),l=Math.max(o+r.maxUnderzooming,this._source.minzoom),c={},u=d(e);try{for(u.s();!(n=u.n()).done;){var h=n.value,f=this._addTile(h);t[h.key]=h,f.hasData()||a<this._source.maxzoom&&(c[h.key]=h)}}catch(S){u.e(S)}finally{u.f()}this._retainLoadedChildren(c,a,l,t);var p,m=d(e);try{for(m.s();!(p=m.n()).done;){var v=p.value,g=this._tiles[v.key];if(!g.hasData()){if(v.canonical.z>=this._source.maxzoom){var y=v.children(this._source.maxzoom)[0],x=this.getTile(y);if(x&&x.hasData()){t[y.key]=y;continue}}else{var b=v.children(this._source.maxzoom);if(t[b[0].key]&&t[b[1].key]&&t[b[2].key]&&t[b[3].key])continue}for(var _=g.wasRequested(),w=v.overscaledZ-1;w>=s;--w){var k=v.scaledTo(w);if(i[k.key])break;if(i[k.key]=!0,!(g=this.getTile(k))&&_&&(g=this._addTile(k)),g&&(t[k.key]=k,_=g.wasRequested(),g.hasData()))break}}}}catch(S){m.e(S)}finally{m.f()}return t}},{key:"_updateLoadedParentTileCache",value:function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],r=void 0,n=this._tiles[e].tileID;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){r=this._loadedParentTiles[n.key];break}t.push(n.key);var i=n.scaledTo(n.overscaledZ-1);if(r=this._getLoadedTile(i))break;n=i}for(var a=0,o=t;a<o.length;a++){var s=o[a];this._loadedParentTiles[s]=r}}}},{key:"_addTile",value:function(e){var t=this._tiles[e.key];if(t)return t;(t=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));var r=Boolean(t);if(!r){var n=this.map?this.map.painter:null;t=new um(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,n,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,r||this._source.fire(new ot("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}},{key:"_setTileReloadTimer",value:function(e,t){var r=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout((function(){r._reloadTile(e,"expired"),delete r._timers[e]}),n))}},{key:"_removeTile",value:function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}},{key:"clearTiles",value:function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}},{key:"tilesIn",value:function(e,t,r){var n=[],i=this.transform;if(!i)return n;var a="globe"===i.projection.name,o=Ks(i.center.lng);for(var s in this._tiles){var l=this._tiles[s];if(r&&l.clearQueryDebugViz(),!l.holdingForFade()){var c=void 0;if(a){var h=l.tileID.canonical;if(0===h.z){var f=[Math.abs(j.apply(void 0,[o].concat(u(zm(h,-1))))-o),Math.abs(j.apply(void 0,[o].concat(u(zm(h,1))))-o)];c=[0,2*f.indexOf(Math.min.apply(Math,f))-1]}else{var p=[Math.abs(j.apply(void 0,[o].concat(u(zm(h,-1))))-o),Math.abs(j.apply(void 0,[o].concat(u(zm(h,0))))-o),Math.abs(j.apply(void 0,[o].concat(u(zm(h,1))))-o)];c=[p.indexOf(Math.min.apply(Math,p))-1]}}else c=[0];var m,v=d(c);try{for(v.s();!(m=v.n()).done;){var g=m.value,y=e.containsTile(l,i,t,g);y&&n.push(y)}}catch(x){v.e(x)}finally{v.f()}}}return n}},{key:"getVisibleCoordinates",value:function(e){var t,r=this,n=this.getRenderableIds(e).map((function(e){return r._tiles[e].tileID})),i=d(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.projMatrix=this.transform.calculateProjMatrix(a.toUnwrapped())}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(Rm(this._source.type))for(var e in this._tiles){var t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=nt.now())return!0}return!1}},{key:"setFeatureState",value:function(e,t,r){this._state.updateState(e=e||"_geojsonTileLayer",t,r)}},{key:"removeFeatureState",value:function(e,t,r){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,r)}},{key:"getFeatureState",value:function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}},{key:"setDependencies",value:function(e,t,r){var n=this._tiles[e];n&&n.setDependencies(t,r)}},{key:"reloadTilesForDependencies",value:function(e,t){for(var r in this._tiles)this._tiles[r].hasDependency(e,t)&&this._reloadTile(+r,"reloading");this._cache.filter((function(r){return!r.hasDependency(e,t)}))}},{key:"_preloadTiles",value:function(e,t){var r,n=this,i=new Map,a=Array.isArray(e)?e:[e],o=this.map.painter.terrain,s=this.usedForTerrain&&o?o.getScaledDemTileSize():this._source.tileSize,l=d(a);try{for(l.s();!(r=l.n()).done;){var c,u=r.value,h=u.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),f=d(h);try{for(f.s();!(c=f.n()).done;){var p=c.value;i.set(p.key,p)}}catch(m){f.e(m)}finally{f.f()}this.usedForTerrain&&u.updateElevation(!1)}}catch(m){l.e(m)}finally{l.f()}Z(Array.from(i.values()),(function(e,t){var r=new um(e,n._source.tileSize*e.overscaleFactor(),n.transform.tileZoom,n.map.painter,n._isRaster);n._loadTile(r,(function(e){"raster-dem"===n._source.type&&r.dem&&n._backfillDEM(r),t(e,r)}))}),t)}}]),r}(lt);function Pm(e,t){var r=Math.abs(2*e.wrap)-+(e.wrap<0),n=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||n-r||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Rm(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function zm(e,t){var r=1<<e.z;return[e.x/r+t,(e.x+1)/r+t]}Im.maxOverzooming=10,Im.maxUnderzooming=3;var Lm=function(){function e(t,r,n){f(this,e),this._demTile=t,this._dem=this._demTile.dem,this._scale=r,this._offset=n}return p(e,[{key:"tileCoordToPixel",value:function(e,t){var r=t*this._scale+this._offset[1],n=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(r);return new E(n,i)}},{key:"getElevationAt",value:function(e,t,r,n){var i=e*this._scale+this._offset[0],a=t*this._scale+this._offset[1],o=Math.floor(i),s=Math.floor(a),l=this._dem;return n=!!n,r?Br(Br(l.get(o,s,n),l.get(o,s+1,n),a-s),Br(l.get(o+1,s,n),l.get(o+1,s+1,n),a-s),i-o):l.get(o,s,n)}},{key:"getElevationAtPixel",value:function(e,t,r){return this._dem.get(e,t,!!r)}},{key:"getMeterToDEM",value:function(e){return(1<<this._demTile.tileID.canonical.z)*Qs(1,e)*this._dem.stride}}],[{key:"create",value:function(t,r,n){var i=n||t.findDEMTileFor(r);if(i&&i.dem){var a=i.dem,o=i.tileID,s=1<<r.canonical.z-o.canonical.z;return new e(i,i.tileSize/Gs/s,[(r.canonical.x/s-o.canonical.x)*a.dim,(r.canonical.y/s-o.canonical.y)*a.dim])}}}]),e}(),Dm=function(){function e(t,r){f(this,e),this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Ki(Gs,16,0),this.featureIndexArray=new is,this.promoteId=r}return p(e,[{key:"insert",value:function(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i,a);for(var s=this.grid,l=0;l<t.length;l++){for(var c=t[l],u=[1/0,1/0,-1/0,-1/0],h=0;h<c.length;h++){var d=c[h];u[0]=Math.min(u[0],d.x),u[1]=Math.min(u[1],d.y),u[2]=Math.max(u[2],d.x),u[3]=Math.max(u[3],d.y)}u[0]<Gs&&u[1]<Gs&&u[2]>=0&&u[3]>=0&&s.insert(o,u[0],u[1],u[2],u[3])}}},{key:"loadVTLayers",value:function(){if(!this.vtLayers)for(var e in this.vtLayers=new Vu(new Vh(this.rawTileData)).layers,this.sourceLayerCoder=new Zp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={},this.vtLayers)this.vtFeatures[e]=[];return this.vtLayers}},{key:"query",value:function(e,t,r,n){var i=this;this.loadVTLayers();var a=e.params||{},o=xi(a.filter),s=e.tileResult,l=e.transform,c=s.bufferedTilespaceBounds,u=this.grid.query(c.min.x,c.min.y,c.max.x,c.max.y,(function(e,t,r,n){return El(s.bufferedTilespaceGeometry,e,t,r,n)}));u.sort(Fm);var h=null;l.elevation&&u.length>0&&(h=Lm.create(l.elevation,this.tileID));for(var d,f={},p=function(l){var c=u[l];if(c===d)return"continue";d=c;var p=i.featureIndexArray.get(c),m=null;i.loadMatchingFeature(f,p,o,a.layers,a.availableImages,t,r,n,(function(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return m||(m=fl(t,i.tileID.canonical,e.tileTransform)),r.queryIntersectsFeature(s,t,n,m,i.z,e.transform,e.pixelPosMatrix,h,a)}))},m=0;m<u.length;m++)p(m);return f}},{key:"loadMatchingFeature",value:function(e,t,r,n,i,a,o,s,l){var c=t.featureIndex,u=t.bucketIndex,h=t.sourceLayerIndex,d=t.layoutVertexArrayOffset,f=this.bucketLayerIDs[u];if(!n||function(e,t){for(var r=0;r<e.length;r++)if(t.indexOf(e[r])>=0)return!0;return!1}(n,f)){var p=this.sourceLayerCoder.decode(h),m=this.vtLayers[p].feature(c);if(r.needGeometry){var v=pl(m,!0);if(!r.filter(new eo(this.tileID.overscaledZ),v,this.tileID.canonical))return}else if(!r.filter(new eo(this.tileID.overscaledZ),m))return;for(var g=this.getId(m,p),y=0;y<f.length;y++){var x=f[y];if(!(n&&n.indexOf(x)<0)){var b=a[x];if(b){var _={};void 0!==g&&s&&(_=s.getState(b.sourceLayer||"_geojsonTileLayer",g));var w=V({},o[x]);w.paint=Om(w.paint,b.paint,m,_,i),w.layout=Om(w.layout,b.layout,m,_,i);var k=!l||l(m,b,_,d);if(k){var S=new Vp(m,this.z,this.x,this.y,g);S.layer=w;var C=e[x];void 0===C&&(C=e[x]=[]),C.push({featureIndex:c,feature:S,intersectionZ:k})}}}}}}},{key:"lookupSymbolFeatures",value:function(e,t,r,n,i,a,o,s){var l={};this.loadVTLayers();var c,u=xi(i),h=d(e);try{for(h.s();!(c=h.n()).done;){var f=c.value;this.loadMatchingFeature(l,{bucketIndex:r,sourceLayerIndex:n,featureIndex:f,layoutVertexArrayOffset:0},u,a,o,s,t)}}catch(p){h.e(p)}finally{h.f()}return l}},{key:"loadFeature",value:function(e){var t=e.featureIndex,r=e.sourceLayerIndex;this.loadVTLayers();var n=this.sourceLayerCoder.decode(r),i=this.vtFeatures[n];if(i[t])return i[t];var a=this.vtLayers[n].feature(t);return i[t]=a,a}},{key:"hasLayer",value:function(e){var t,r=d(this.bucketLayerIDs);try{for(r.s();!(t=r.n()).done;){var n,i=t.value,a=d(i);try{for(a.s();!(n=a.n()).done;)if(e===n.value)return!0}catch(o){a.e(o)}finally{a.f()}}}catch(o){r.e(o)}finally{r.f()}return!1}},{key:"getId",value:function(e,t){var r=e.id;if(this.promoteId){var n="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=n&&(r=e.properties[n]),"boolean"==typeof r&&(r=Number(r))}return r}}]),e}();function Om(e,t,r,n,i){return K(e,(function(e,a){var o=t instanceof lo?t.get(a):null;return o&&o.evaluate?o.evaluate(r,n,i):o}))}function Fm(e,t){return t-e}ea(Dm,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});var jm=function(){function e(t,r){f(this,e),this.width=t,this.height=r,this.nextRow=0,this.image=new Fc({width:t,height:r}),this.positions={},this.uploaded=!1}return p(e,[{key:"getDash",value:function(e,t){var r=this.getKey(e,t);return this.positions[r]}},{key:"trim",value:function(){var e=this.width,t=this.height=X(this.nextRow);this.image.resize({width:e,height:t})}},{key:"getKey",value:function(e,t){return e.join(",")+t}},{key:"getDashRanges",value:function(e,t,r){var n=[],i=e.length%2==1?-e[e.length-1]*r:0,a=e[0]*r,o=!0;n.push({left:i,right:a,isDash:o,zeroLength:0===e[0]});for(var s=e[0],l=1;l<e.length;l++){o=!o;var c=e[l];i=s*r,a=(s+=c)*r,n.push({left:i,right:a,isDash:o,zeroLength:0===c})}return n}},{key:"addRoundDash",value:function(e,t,r){for(var n=t/2,i=-r;i<=r;i++)for(var a=this.width*(this.nextRow+r+i),o=0,s=e[o],l=0;l<this.width;l++){l/s.right>1&&(s=e[++o]);var c=Math.abs(l-s.left),u=Math.abs(l-s.right),h=Math.min(c,u),d=void 0,f=i/r*(n+1);if(s.isDash){var p=n-Math.abs(f);d=Math.sqrt(h*h+p*p)}else d=n-Math.sqrt(h*h+f*f);this.image.data[a+l]=Math.max(0,Math.min(255,d+128))}}},{key:"addRegularDash",value:function(e,t){for(var r=e.length-1;r>=0;--r){var n=e[r],i=e[r+1];n.zeroLength?e.splice(r,1):i&&i.isDash===n.isDash&&(i.left=n.left,e.splice(r,1))}var a=e[0],o=e[e.length-1];a.isDash===o.isDash&&(a.left=o.left-this.width,o.right=a.right+this.width);for(var s=this.width*this.nextRow,l=0,c=e[l],u=0;u<this.width;u++){u/c.right>1&&(c=e[++l]);var h=Math.abs(u-c.left),d=Math.abs(u-c.right),f=Math.min(h,d);this.image.data[s+u]=Math.max(0,Math.min(255,(c.isDash?f:-f)+t+128))}}},{key:"addDash",value:function(e,t){var r=this.getKey(e,t);if(this.positions[r])return this.positions[r];var n="round"===t,i=n?7:0,a=2*i+1;if(this.nextRow+a>this.height)return te("LineAtlas out of space"),null;0===e.length&&e.push(1);for(var o=0,s=0;s<e.length;s++)e[s]<0&&(te("Negative value is found in line dasharray, replacing values with 0"),e[s]=0),o+=e[s];if(0!==o){var l=this.width/o,c=this.getDashRanges(e,this.width,l);n?this.addRoundDash(c,l,i):this.addRegularDash(c,"square"===t?.5*l:0)}var u=this.nextRow+i;this.nextRow+=a;var h={tl:[u,i],br:[o,0]};return this.positions[r]=h,h}}]),e}();ea(jm,"LineAtlas");var Nm=p((function e(t){f(this,e);var r={},n=[];for(var i in t){var a=t[i],o=r[i]={};for(var s in a.glyphs){var l=a.glyphs[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var c=l.metrics.localGlyph?2:1,u={x:0,y:0,w:l.bitmap.width+2*c,h:l.bitmap.height+2*c};n.push(u),o[s]=u}}}var h=pd(n),d=h.w,p=h.h,m=new Fc({width:d||1,height:p||1});for(var v in t){var g=t[v];for(var y in g.glyphs){var x=g.glyphs[+y];if(x&&0!==x.bitmap.width&&0!==x.bitmap.height){var b=r[v][y],_=x.metrics.localGlyph?2:1;Fc.copy(x.bitmap,m,{x:0,y:0},{x:b.x+_,y:b.y+_},x.bitmap)}}}this.image=m,this.positions=r}));ea(Nm,"GlyphAtlas");var Bm=function(){function e(t){f(this,e),this.tileID=new hh(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Kf(t.tileID.canonical,t.projection),this.projection=t.projection}return p(e,[{key:"parse",value:function(e,t,r,n,i){var a=this;this.status="parsing",this.data=e,this.collisionBoxArray=new $o;var o=new Zp(Object.keys(e.layers).sort()),s=new Dm(this.tileID,this.promoteId);s.bucketLayerIDs=[];var l,c,u,h,f={},p=new jm(256,256),m={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:p,availableImages:r},v=t.familiesBySource[this.source];for(var g in v){var y=e.layers[g];if(y){var x,b=!1,_=!1,w=d(v[g]);try{for(w.s();!(x=w.n()).done;)"symbol"===x.value[0].type?b=!0:_=!0}catch(F){w.e(F)}finally{w.f()}if((!0!==this.isSymbolTile||b)&&(!1!==this.isSymbolTile||_)){1===y.version&&te('Vector tile source "'.concat(this.source,'" layer "').concat(g,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));for(var k=o.encode(g),S=[],C=0;C<y.length;C++){var A=y.feature(C),T=s.getId(A,g);S.push({feature:A,id:T,index:C,sourceLayerIndex:k})}var E,M=d(v[g]);try{for(M.s();!(E=M.n()).done;){var I=E.value,P=I[0];void 0!==this.isSymbolTile&&"symbol"===P.type!==this.isSymbolTile||P.minzoom&&this.zoom<Math.floor(P.minzoom)||P.maxzoom&&this.zoom>=P.maxzoom||"none"!==P.visibility&&(Zm(I,this.zoom,r),(f[P.id]=P.createBucket({index:s.bucketLayerIDs.length,layers:I,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:k,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:r})).populate(S,m,this.tileID.canonical,this.tileTransform),s.bucketLayerIDs.push(I.map((function(e){return e.id}))))}}catch(F){M.e(F)}finally{M.f()}}}}p.trim();var R={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},z=K(m.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(z).length?n.send("getGlyphs",{uid:this.uid,stacks:z},(function(e,t){l||(l=e,c=t,O.call(a))}),void 0,!1,R):c={};var L=Object.keys(m.iconDependencies);L.length?n.send("getImages",{icons:L,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){l||(l=e,u=t,O.call(a))}),void 0,!1,R):u={};var D=Object.keys(m.patternDependencies);function O(){if(l)return i(l);if(c&&u&&h){var e=new Nm(c),t=new vd(u,h);for(var n in f){var a=f[n];a instanceof Tp?(Zm(a.layers,this.zoom,r),lf(a,c,e.positions,u,t.iconPositions,this.showCollisionBoxes,r,this.tileID.canonical,this.tileZoom,this.projection)):a.hasPattern&&(a instanceof _h||a instanceof Su||a instanceof Ku)&&(Zm(a.layers,this.zoom,r),a.addFeatures(m,this.tileID.canonical,t.patternPositions,r,this.tileTransform))}this.status="done",i(null,{buckets:U(f).filter((function(e){return!e.isEmpty()})),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:p,imageAtlas:t,glyphMap:this.returnDependencies?c:null,iconMap:this.returnDependencies?u:null,glyphPositions:this.returnDependencies?e.positions:null})}}D.length?n.send("getImages",{icons:D,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){l||(l=e,h=t,O.call(a))}),void 0,!1,R):h={},O.call(this)}}]),e}();function Zm(e,t,r){var n,i=new eo(t),a=d(e);try{for(a.s();!(n=a.n()).done;)n.value.recalculate(i,r)}catch(o){a.e(o)}finally{a.f()}}var Um=function(){function e(t){f(this,e),this.entries={},this.scheduler=t}return p(e,[{key:"request",value:function(e,t,r,n){var i=this,a=this.entries[e]=this.entries[e]||{callbacks:[]};if(a.result){var o=h(a.result,2),s=o[0],l=o[1];return this.scheduler?this.scheduler.add((function(){n(s,l)}),t):n(s,l),function(){}}return a.callbacks.push(n),a.cancel||(a.cancel=r((function(r,n){a.result=[r,n];var o,s=d(a.callbacks);try{var l=function(){var e=o.value;i.scheduler?i.scheduler.add((function(){e(r,n)}),t):e(r,n)};for(s.s();!(o=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}setTimeout((function(){return delete i.entries[e]}),3e3)}))),function(){a.result||(a.callbacks=a.callbacks.filter((function(e){return e!==n})),a.callbacks.length||(a.cancel(),delete i.entries[e]))}}}]),e}();function Vm(e,t,r){var n=JSON.stringify(e.request);return e.data&&(this.deduped.entries[n]={result:[null,e.data]}),this.deduped.request(n,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(function(t){var n=ke(e.request,(function(e,n,i,a){e?t(e):n&&t(null,{vectorTile:r?void 0:new Vu(new Vh(n)),rawData:n,cacheControl:i,expires:a})}));return function(){n.cancel(),t()}}),t)}e.ARRAY_TYPE=Fl,e.AUTH_ERR_MSG=Me,e.Aabb=Tc,e.Actor=function(){function e(t,r,n){f(this,e),this.target=t,this.parent=r,this.mapId=n,this.callbacks={},this.cancelCallbacks={},q(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=ie()?t:y,this.scheduler=new Bp}return p(e,[{key:"send",value:function(e,t,r,n){var i=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=o,this.callbacks[s]=r);var l=se(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:e,hasCallback:!!r,targetMapId:n,mustQueue:a,sourceMapId:this.mapId,data:ia(t,l)},l),{cancel:function(){r&&delete i.callbacks[s],i.target.postMessage({id:s,type:"<cancel>",targetMapId:n,sourceMapId:i.mapId})}}}},{key:"receive",value:function(e){var t=this,r=e.data,n=r.id;if(n&&(!r.targetMapId||this.mapId===r.targetMapId))if("<cancel>"===r.type){var i=this.cancelCallbacks[n];delete this.cancelCallbacks[n],i&&i.cancel()}else if(r.mustQueue||ie()){var a=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((function(){return t.processTask(n,r)}),a&&a.metadata||{type:"message"})}else this.processTask(n,r)}},{key:"processTask",value:function(e,t){var r=this;if("<response>"===t.type){var n=this.callbacks[e];delete this.callbacks[e],n&&(t.error?n(aa(t.error)):n(null,aa(t.data)))}else{var i=se(this.globalScope)?void 0:[],a=t.hasCallback?function(t,n){delete r.cancelCallbacks[e],r.target.postMessage({id:e,type:"<response>",sourceMapId:r.mapId,error:t?ia(t):null,data:ia(n,i)},i)}:function(e){},o=aa(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,o,a);else if(this.parent.getWorkerSource){var s=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,s[0],o.source)[s[1]](o,a)}else a(new Error("Could not find function ".concat(t.type)))}}},{key:"remove",value:function(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}]),e}(),e.CanonicalTileID=ch,e.Color=Bt,e.ColorMode=Am,e.CullFaceMode=Mm,e.DEMData=_m,e.DataConstantProperty=co,e.DedupedRequest=Um,e.DepthMode=km,e.EXTENT=Gs,e.Elevation=function(){function e(){f(this,e)}return p(e,[{key:"isDataAvailableAtPoint",value:function(e){var t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;var r=t.getSource().maxzoom,n=1<<r,i=Math.floor(e.x),a=Math.floor((e.x-i)*n),o=Math.floor(e.y*n),s=this.findDEMTileFor(new hh(r,i,r,a,o));return!(!s||!s.dem)}},{key:"getAtPointOrZero",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(e,t)||0}},{key:"getAtPoint",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isUsingMockSource())return null;null==t&&(t=null);var n=this._source();if(!n)return t;if(e.y<0||e.y>1)return t;var i=n.getSource().maxzoom,a=1<<i,o=Math.floor(e.x),s=e.x-o,l=new hh(i,o,i,Math.floor(s*a),Math.floor(e.y*a)),c=this.findDEMTileFor(l);if(!c||!c.dem)return t;var u=c.dem,h=1<<c.tileID.canonical.z,d=(s*h-c.tileID.canonical.x)*u.dim,f=(e.y*h-c.tileID.canonical.y)*u.dim,p=Math.floor(d),m=Math.floor(f);return(r?this.exaggeration():1)*Br(Br(u.get(p,m),u.get(p,m+1),f-m),Br(u.get(p+1,m),u.get(p+1,m+1),f-m),d-p)}},{key:"getAtTileOffset",value:function(e,t,r){var n=1<<e.canonical.z;return this.getAtPointOrZero(new al(e.wrap+(e.canonical.x+t/Gs)/n,(e.canonical.y+r/Gs)/n))}},{key:"getAtTileOffsetFunc",value:function(e,t,r,n){var i=this;return function(a){var o=i.getAtTileOffset(e,a.x,a.y),s=n.upVector(e.canonical,a.x,a.y);return ac(s,s,o*n.upVectorScale(e.canonical,t,r).metersToTile),s}}},{key:"getForTilePoints",value:function(e,t,r,n){var i=this;if(this.isUsingMockSource())return!1;var a=Lm.create(this,e,n);return!!a&&(t.forEach((function(e){e[2]=i.exaggeration()*a.getElevationAt(e[0],e[1],r)})),!0)}},{key:"getMinMaxForTile",value:function(e){if(this.isUsingMockSource())return null;var t=this.findDEMTileFor(e);if(!t||!t.dem)return null;for(var r=t.dem.tree,n=t.tileID,i=1<<e.canonical.z-n.canonical.z,a=e.canonical.x/i-n.canonical.x,o=e.canonical.y/i-n.canonical.y,s=0,l=0;l<e.canonical.z-n.canonical.z&&!r.leaves[s];l++){a*=2,o*=2;var c=2*Math.floor(o)+Math.floor(a);s=r.childOffsets[s]+c,a%=1,o%=1}return{min:this.exaggeration()*r.minimums[s],max:this.exaggeration()*r.maximums[s]}}},{key:"getMinElevationBelowMSL",value:function(){throw new Error("Pure virtual method called.")}},{key:"raycast",value:function(e,t,r){throw new Error("Pure virtual method called.")}},{key:"pointCoordinate",value:function(e){throw new Error("Pure virtual method called.")}},{key:"_source",value:function(){throw new Error("Pure virtual method called.")}},{key:"isUsingMockSource",value:function(){throw new Error("Pure virtual method called.")}},{key:"exaggeration",value:function(){throw new Error("Pure virtual method called.")}},{key:"findDEMTileFor",value:function(e){throw new Error("Pure virtual method called.")}},{key:"visibleDemTiles",get:function(){throw new Error("Getter must be implemented in subclass.")}}]),e}(),e.ErrorEvent=st,e.EvaluationParameters=eo,e.Event=ot,e.Evented=lt,e.FillExtrusionBucket=Ku,e.Frustum=Ac,e.FrustumCorners=Cc,e.GLOBE_METERS_TO_ECEF=_f,e.GLOBE_RADIUS=bf,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=6,e.GLOBE_ZOOM_THRESHOLD_MIN=5,e.GlobeSharedBuffers=function(){function e(t){f(this,e),this._createGrid(t),this._createPoles(t)}return p(e,[{key:"destroy",value:function(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();var e,t=d(this._poleSegments);try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(o){t.e(o)}finally{t.f()}var r,n=d(this._gridSegments);try{for(n.s();!(r=n.n()).done;)r.value.destroy()}catch(o){n.e(o)}finally{n.f()}if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();var i,a=d(this._wireframeSegments);try{for(a.s();!(i=a.n()).done;)i.value.destroy()}catch(o){a.e(o)}finally{a.f()}}}},{key:"_createGrid",value:function(e){for(var t=new wo,r=new jo,n=65,i=0;i<n;i++)for(var a=0;a<n;a++)t.emplaceBack(a,i);this._gridSegments=[];for(var o=0,s=0;o<kf.length;o++){for(var l=kf[o],c=0;c<l;c++)for(var u=0;u<64;u++){var h=c*n+u;r.emplaceBack(h+1,h,h+n),r.emplaceBack(h+n,h+n+1,h+1)}var d=64*l*2;this._gridSegments.push(Ws.simpleSegment(0,s,(l+1)*n,d)),s+=d}this._gridBuffer=e.createVertexBuffer(t,xf.members),this._gridIndexBuffer=e.createIndexBuffer(r,!0)}},{key:"_createPoles",value:function(e){for(var t=new jo,r=0;r<=wf;r++)t.emplaceBack(0,r+1,r+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);var n=new Uo,i=new Uo;this._poleSegments=[];for(var a=0,o=0;a<5;a++){var s=360/(1<<a);n.emplaceBack(0,-bf,0,.5,0),i.emplaceBack(0,-bf,0,.5,1);for(var l=0;l<=wf;l++){var c=l/wf,u=Br(0,s,c),d=Ff(Yf,qf,u,bf),f=h(d,3),p=f[0],m=f[1],v=f[2];n.emplaceBack(p,m,v,c,0),i.emplaceBack(p,m,v,c,1)}this._poleSegments.push(Ws.simpleSegment(o,0,66,64)),o+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(n,gf,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(i,gf,!1)}},{key:"getGridBuffers",value:function(e){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[e]]}},{key:"getPoleBuffers",value:function(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}},{key:"getWirefameBuffers",value:function(e,t){if(!this._wireframeSegments){var r=new Wo,n=wf,i=n+1;this._wireframeSegments=[];for(var a=0,o=0;a<kf.length;a++){for(var s=kf[a],l=0;l<s;l++)for(var c=0;c<n;c++){var u=l*i+c;r.emplaceBack(u,u+1),r.emplaceBack(u,u+i),r.emplaceBack(u,u+i+1)}var h=s*n*3;this._wireframeSegments.push(Ws.simpleSegment(0,o,(s+1)*i,h)),o+=h}this._wireframeIndexBuffer=e.createIndexBuffer(r)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}}]),e}(),e.GlyphManager=Hd,e.ImagePosition=md,e.LivePerformanceUtils=qe,e.LngLat=Ys,e.LngLatBounds=Hs,e.LocalGlyphMode=Gd,e.MAX_MERCATOR_LATITUDE=nl,e.MercatorCoordinate=al,e.ONE_EM=zh,e.OverscaledTileID=hh,e.PerformanceMarkers=Ye,e.Properties=mo,e.RGBAImage=jc,e.Ray=Sc,e.RequestManager=function(){function e(t,r,n){f(this,e),this._transformRequestFn=t,this._customAccessToken=r,this._silenceAuthErrors=!!n,this._createSkuToken()}return p(e,[{key:"_createSkuToken",value:function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",C,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}},{key:"_isSkuTokenExpired",value:function(){return Date.now()>this._skuTokenExpiresAt}},{key:"transformRequest",value:function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}},{key:"normalizeStyleURL",value:function(e,t){if(!Ie(e))return e;var r=De(e);return r.path="/styles/v1".concat(r.path),this._makeAPIURL(r,this._customAccessToken||t)}},{key:"normalizeGlyphsURL",value:function(e,t){if(!Ie(e))return e;var r=De(e);return r.path="/fonts/v1".concat(r.path),this._makeAPIURL(r,this._customAccessToken||t)}},{key:"normalizeSourceURL",value:function(e,t,r,n){if(!Ie(e))return e;var i=De(e);return i.path="/v4/".concat(i.authority,".json"),i.params.push("secure"),r&&i.params.push("language=".concat(r)),n&&i.params.push("worldview=".concat(n)),this._makeAPIURL(i,this._customAccessToken||t)}},{key:"normalizeSpriteURL",value:function(e,t,r,n){var i=De(e);return Ie(e)?(i.path="/styles/v1".concat(i.path,"/sprite").concat(t).concat(r),this._makeAPIURL(i,this._customAccessToken||n)):(i.path+="".concat(t).concat(r),Oe(i))}},{key:"normalizeTileURL",value:function(e,t,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Ie(e))return e;var n=De(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(t||r&&"raster"!==n.authority&&512===r?"@2x":"").concat(_.supported?".webp":"$1")),"raster"===n.authority?n.path="/".concat(b.RASTER_URL_PREFIX).concat(n.path):(n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/".concat(b.TILE_URL_VERSION).concat(n.path));var i=this._customAccessToken||function(e){var t,r=d(e);try{for(r.s();!(t=r.n()).done;){var n=t.value.match(/^access_token=(.*)$/);if(n)return n[1]}}catch(i){r.e(i)}finally{r.f()}return null}(n.params)||b.ACCESS_TOKEN;return b.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&n.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(n,i)}},{key:"canonicalizeTileURL",value:function(e,t){var r=De(e);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return e;var n="mapbox://";r.path.match(/^\/raster\/v1\//)?n+="raster/".concat(r.path.replace("/".concat(b.RASTER_URL_PREFIX,"/"),"")):n+="tiles/".concat(r.path.replace("/".concat(b.TILE_URL_VERSION,"/"),""));var i=r.params;return t&&(i=i.filter((function(e){return!e.match(/^access_token=/)}))),i.length&&(n+="?".concat(i.join("&"))),n}},{key:"canonicalizeTileset",value:function(e,t){var r,n=!!t&&Ie(t),i=[],a=d(e.tiles||[]);try{for(a.s();!(r=a.n()).done;){var o=r.value;Pe(o)?i.push(this.canonicalizeTileURL(o,n)):i.push(o)}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"_makeAPIURL",value:function(e,t){var r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=De(b.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"http"===e.protocol){var i=e.params.indexOf("secure");i>=0&&e.params.splice(i,1)}if("/"!==n.path&&(e.path="".concat(n.path).concat(e.path)),!b.REQUIRE_ACCESS_TOKEN)return Oe(e);if(t=t||b.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error("An API access token is required to use Mapbox GL. ".concat(r));if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(r))}return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token=".concat(t||"")),Oe(e)}}]),e}(),e.ResourceType=xe,e.SegmentVector=Ws,e.SourceCache=Im,e.StencilMode=Cm,e.StructArrayLayout1ui2=Go,e.StructArrayLayout2f1f2i16=Do,e.StructArrayLayout2i4=wo,e.StructArrayLayout2ui4=Wo,e.StructArrayLayout3f12=Fo,e.StructArrayLayout3ui6=jo,e.StructArrayLayout4i8=So,e.StructArrayLayout5f20=Uo,e.Texture=jp,e.Tile=um,e.Transitionable=no,e.Uniform1f=_s,e.Uniform1i=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).current=0,n}return p(r,[{key:"set",value:function(e,t,r){this.fetchUniformLocation(e,t)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}}]),r}(bs),e.Uniform2f=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).current=[0,0],n}return p(r,[{key:"set",value:function(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])))}}]),r}(bs),e.Uniform3f=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).current=[0,0,0],n}return p(r,[{key:"set",value:function(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])))}}]),r}(bs),e.Uniform4f=ws,e.UniformColor=ks,e.UniformMatrix2f=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).current=As,n}return p(r,[{key:"set",value:function(e,t,r){if(this.fetchUniformLocation(e,t))for(var n=0;n<4;n++)if(r[n]!==this.current[n]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}}]),r}(bs),e.UniformMatrix3f=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).current=Cs,n}return p(r,[{key:"set",value:function(e,t,r){if(this.fetchUniformLocation(e,t))for(var n=0;n<9;n++)if(r[n]!==this.current[n]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}}]),r}(bs),e.UniformMatrix4f=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).current=Ss,n}return p(r,[{key:"set",value:function(e,t,r){if(this.fetchUniformLocation(e,t)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(var n=1;n<16;n++)if(r[n]!==this.current[n]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}}]),r}(bs),e.UnwrappedTileID=uh,e.ValidationError=ui,e.VectorTileFeature=Wu,e.VectorTileWorkerSource=function(e){m(r,e);var t=v(r);function r(e,n,i,a,o){var s;return f(this,r),(s=t.call(this)).actor=e,s.layerIndex=n,s.availableImages=i,s.loadVectorData=o||Vm,s.loading={},s.loaded={},s.deduped=new Um(e.scheduler),s.isSpriteLoaded=a,s.scheduler=e.scheduler,s}return p(r,[{key:"loadTile",value:function(e,t){var r=this,n=e.uid,i=e&&e.request,a=i&&i.collectResourceTiming,o=this.loading[n]=new Bm(e);o.abort=this.loadVectorData(e,(function(s,l){var c=!r.loading[n];if(delete r.loading[n],c||s||!l)return o.status="done",c||(r.loaded[n]=o),t(s);var u=l.rawData,h={};l.expires&&(h.expires=l.expires),l.cacheControl&&(h.cacheControl=l.cacheControl),o.vectorTile=l.vectorTile||new Vu(new Vh(u));var d=function(){o.parse(o.vectorTile,r.layerIndex,r.availableImages,r.actor,(function(e,r){if(e||!r)return t(e);var n={};if(a){var o=rt(i);o.length>0&&(n.resourceTiming=JSON.parse(JSON.stringify(o)))}t(null,V({rawTileData:u.slice(0)},r,h,n))}))};r.isSpriteLoaded?d():r.once("isSpriteLoaded",(function(){r.scheduler?r.scheduler.add(d,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):d()})),r.loaded=r.loaded||{},r.loaded[n]=o}))}},{key:"reloadTile",value:function(e,t){var r=this,n=this.loaded,i=e.uid,a=this;if(n&&n[i]){var o=n[i];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection,o.tileTransform=Kf(e.tileID.canonical,e.projection);var s=function(e,n){var i=o.reloadCallback;i&&(delete o.reloadCallback,o.parse(o.vectorTile,a.layerIndex,r.availableImages,a.actor,i)),t(e,n)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}},{key:"abortTile",value:function(e,t){var r=e.uid,n=this.loading[r];n&&(n.abort&&n.abort(),delete this.loading[r]),t()}},{key:"removeTile",value:function(e,t){var r=this.loaded,n=e.uid;r&&r[n]&&delete r[n],t()}}]),r}(lt),e.WritingMode=gd,e.ZoomHistory=oa,e.add=ec,e.addDynamicAttributes=kp,e.adjoint=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=o*u-s*c,e[1]=i*c-n*u,e[2]=n*s-i*o,e[3]=s*l-a*u,e[4]=r*u-i*l,e[5]=i*a-r*s,e[6]=a*c-o*l,e[7]=n*l-r*c,e[8]=r*o-n*a,e},e.asyncAll=Z,e.bezier=O,e.bindAll=q,e.boundsAttributes=lm,e.bufferConvexPolygon=function(e,t){for(var r=[],n=0;n<e.length;n++){var i=B(n-1,-1,e.length-1),a=B(n+1,-1,e.length-1),o=e[n],s=e[a],l=e[i].sub(o).unit(),c=s.sub(o).unit(),u=c.angleWithSep(l.x,l.y),h=l.add(c).unit().mult(-1*t/Math.sin(u/2));r.push(o.add(h))}return r},e.cacheEntryPossiblyAdded=function(e){++ye>pe&&(e.getActor().send("enforceCacheSizeLimit",fe),ye=0)},e.calculateGlobeLabelMatrix=function(e,t){var r=e.point,n=Wf(r.x,r.y,e.worldSize/e._pixelsPerMercatorPixel,0,0);return Ul(n,n,Vf(If(t)))},e.calculateGlobeMatrix=function(e){var t=e.point,r=t.x,n=t.y,i=e._center,a=i.lng,o=i.lat;return Wf(r,n,e.worldSize,a,o)},e.calculateGlobeMercatorMatrix=function(e){var t=e.pixelsPerMeter,r=t/Qs(1,e.center.lat),n=Bl(new Float64Array(16));return Vl(n,n,[e.point.x,e.point.y,0]),Wl(n,n,[r,r,t]),Float32Array.from(n)},e.circumferenceAtLatitude=$s,e.clamp=j,e.clearTileCache=function(e){if(me()){var t=y.caches.delete(de);e&&t.catch(e).then((function(){return e()}))}},e.clipLine=Zd,e.clone=function(e){var t=new Fl(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=Q,e.collisionCircleLayout=Rh,e.config=b,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new Fl(16);return Fl!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=jl,e.createExpression=ii,e.createLayout=bo,e.createStyleLayer=function(e){return"custom"===e.type?new Lp(e):new Fp[e.type](e)},e.cross=cc,e.degToRad=R,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},e.dot=lc,e.earthRadius=Xs,e.ease=F,e.easeCubicInOut=D,e.ecefToLatLng=function(e){var t=h(e,3),r=t[0],n=t[1],i=t[2],a=Math.hypot(r,n,i),o=Math.atan2(r,i),s=.5*Math.PI-Math.acos(-n/a);return new Ys(z(o),z(s))},e.emitValidationErrors=$i,e.endsWith=$,e.enforceCacheSizeLimit=function(e){ve(),ue&&ue.then((function(t){t.keys().then((function(r){for(var n=0;n<r.length-e;n++)t.delete(r[n])}))}))},e.evaluateSizeForFeature=Oh,e.evaluateSizeForZoom=Fh,e.evaluateVariableOffset=sf,e.evented=$a,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=nt,e.exported$1=_,e.extend=V,e.extend$1=ut,e.fillExtrusionHeightLift=ih,e.filterObject=J,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,l=i+i,c=r*o,u=n*o,h=n*s,d=i*o,f=i*s,p=i*l,m=a*o,v=a*s,g=a*l;return e[0]=1-h-p,e[1]=u+g,e[2]=d-v,e[3]=0,e[4]=u-g,e[5]=1-c-p,e[6]=f+m,e[7]=0,e[8]=d+v,e[9]=f-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=Xl,e.furthestTileCorner=function(e){var t=Math.round((e+45+360)%360/90)%4;return L[t]},e.getAABBPointSquareDist=function(e,t,r){for(var n=0,i=0;i<2;++i){var a=r?r[i]:0;e[i]>a&&(n+=(e[i]-a)*(e[i]-a)),t[i]<a&&(n+=(a-t[i])*(a-t[i]))}return n},e.getAnchorAlignment=Md,e.getAnchorJustification=cf,e.getBounds=function(e){var t,r=1/0,n=1/0,i=-1/0,a=-1/0,o=d(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;r=Math.min(r,s.x),n=Math.min(n,s.y),i=Math.max(i,s.x),a=Math.max(a,s.y)}}catch(l){o.e(l)}finally{o.f()}return{min:new E(r,n),max:new E(i,a)}},e.getColumn=ce,e.getGridMatrix=function(e,t,r,n){var i=t.getNorth(),a=t.getSouth(),o=t.getWest(),s=t.getEast(),l=1<<e.z,c=s-o,u=i-a,h=c/wf,d=-u/kf[r],f=[0,h,0,d,0,0,i,o,0];if(e.z>0){var p=180/n;Nl(f,f,[p/c+1,0,0,0,p/u+1,0,-.5*p/h,.5*p/d,1])}return f[2]=l,f[5]=e.x,f[8]=e.y,f},e.getImage=Ee,e.getJSON=function(e,t){return we(V(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){var t=80.051129;e=j(e,-80.051129,t)/t*90;var r=Math.pow(Math.abs(Math.sin(R(e))),3);return Math.round(r*(kf.length-1))},e.getMapSessionAPI=He,e.getPerformanceMeasurement=rt,e.getProjection=yp,e.getRTLTextPluginStatus=Ka,e.getReferrer=_e,e.getTilePoint=function(e,t){var r=t.x,n=t.y;return new E(((r-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*e.scale-e.x)*Gs,(n*e.scale-e.y)*Gs)},e.getTileVec3=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ql(((t.x-r)*e.scale-e.x)*Gs,(t.y*e.scale-e.y)*Gs,rl(t.z,t.y))},e.getVideo=function(e,t){var r=y.document.createElement("video");r.muted=!0,r.onloadstart=function(){t(null,r)};for(var n=0;n<e.length;n++){var i=y.document.createElement("source");Se(e[n])||(r.crossOrigin="Anonymous"),i.src=e[n],r.appendChild(i)}return{cancel:function(){}}},e.globeCenterToScreenPoint=function(e){var t=[0,0,0],r=Bl(new Float64Array(16));return Ul(r,e.pixelMatrix,e.globeMatrix),uc(t,t,r),new E(t[0],t[1])},e.globeDenormalizeECEF=Vf,e.globeECEFOrigin=function(e,t){var r=[0,0,0];return uc(r,r,Uf(If(t.canonical))),uc(r,r,e),r},e.globeNormalizeECEF=Uf,e.globePixelsToTileUnits=function(e,t){return Gs/(512*Math.pow(2,e))*Bf(If(t))},e.globePoleMatrixForTile=function(e,t,r){var n=Bl(new Float64Array(16)),i=(t/(1<<e)-.5)*Math.PI*2;return Hl(n,r.globeMatrix,i),Float32Array.from(n)},e.globeTileBounds=If,e.globeTiltAtLngLat=Hf,e.globeToMercatorTransition=Gf,e.globeUseCustomAntiAliasing=function(e,t,r){var n=Gf(r.zoom),i=e.style.map._antialias,a=!!t.extStandardDerivatives,o=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===n&&!i&&!o&&a},e.identity=Bl,e.identity$1=bc,e.invert=Zl,e.isFullscreen=function(){return!!y.document.fullscreenElement||!!y.document.webkitFullscreenElement},e.isLngLatBehindGlobe=function(e,t){return Hf(e,t)>Math.PI/2*1.01},e.isMapAuthenticated=function(e){return Xe.has(e)},e.isMapboxURL=Ie,e.isSafariWithAntialiasingBug=function(e){var t=e.navigator?e.navigator.userAgent:null;return!!se(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=tl,e.latLngToECEF=jf,e.len=mc,e.length=Jl,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=el,e.loadVectorTile=Vm,e.makeRequest=we,e.mapValue=function(e,t,r,n,i){return j((e-t)/(r-t)*(i-n)+n,n,i)},e.mercatorScale=il,e.mercatorXfromLng=Ks,e.mercatorYfromLat=Js,e.mercatorZfromAltitude=Qs,e.mul=ql,e.mul$1=pc,e.multiply=Ul,e.multiply$1=Nl,e.multiply$2=rc,e.nextPowerOfTwo=X,e.normalize=sc,e.normalize$1=kc,e.normalize$2=gc,e.number=Br,e.ortho=function(e,t,r,n,i,a,o){var s=1/(t-r),l=1/(n-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(o+a)*c,e[15]=1,e},e.pbf=Vh,e.perspective=function(e,t,r,n,i){var a,o=1/Math.tan(t/2);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+n)*(a=1/(n-i)),e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e},e.pick=function(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n];i in e&&(r[i]=e[i])}return r},e.plugin=Qa,e.pointGeometry=E,e.polygonContainsPoint=Tl,e.polygonIntersectsBox=El,e.polygonIntersectsPolygon=yl,e.polygonizeBounds=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=new E(r,r),a=e.sub(i),o=t.add(i),s=[a,new E(o.x,a.y),o,new E(a.x,o.y)];return n&&s.push(a.clone()),s},e.posAttributes=xf,e.postMapLoadEvent=Ue,e.postPerformanceEvent=We,e.postTurnstileEvent=Be,e.potpack=pd,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=z,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Ha,pluginURL:Xa}),$a.on("pluginStateChange",e),e},e.removeAuthState=function(e){Xe.delete(e)},e.renderColorRamp=Bc,e.resample=sl,e.rotateX=Gl,e.rotateX$1=_c,e.rotateY=Hl,e.rotateY$1=wc,e.rotateZ=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*n,e[1]=o*i+u*n,e[2]=s*i+h*n,e[3]=l*i+d*n,e[4]=c*i-a*n,e[5]=u*i-o*n,e[6]=h*i-s*n,e[7]=d*i-l*n,e},e.rotateZ$1=function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*s,e[1]=i*l-n*s,e[2]=a*l+o*s,e[3]=o*l-a*s,e},e.scale=Wl,e.scale$1=vc,e.scale$2=ac,e.scaleAndAdd=oc,e.set=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},e.setCacheLimits=function(e,t){fe=e,pe=t},e.setColumn=function(e,t,r){e[4*t+0]=r[0],e[4*t+1]=r[1],e[4*t+2]=r[2],e[4*t+3]=r[3]},e.setRTLTextPlugin=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ha===Ua||Ha===Va||Ha===Wa)throw new Error("setRTLTextPlugin cannot be called multiple times.");Xa=nt.resolveURL(e),Ha=Ua,Ga=t,qa(),r||Ja()},e.smoothstep=N,e.spec=ct,e.squaredLength=function(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n},e.storeAuthState=function(e,t){t?Xe.add(e):Xe.delete(e)},e.sub=fc,e.subtract=tc,e.symbolSize=jh,e.tileAABB=function(e,t,r,n,i,a,o,s,l){if("globe"===l.name)return Lf(e,t,new ch(r,n,i));var c=Kf({z:r,x:n,y:i},l);return new Tc([(a+c.x/c.scale)*t,t*(c.y/c.scale),o],[(a+c.x2/c.scale)*t,t*(c.y2/c.scale),s])},e.tileCornersToBounds=Df,e.tileTransform=Kf,e.transformMat3=function(e,t,r){var n=t[0],i=t[1],a=t[2];return e[0]=n*r[0]+i*r[3]+a*r[6],e[1]=n*r[1]+i*r[4]+a*r[7],e[2]=n*r[2]+i*r[5]+a*r[8],e},e.transformMat4=uc,e.transformMat4$1=yc,e.transformQuat=hc,e.transitionTileAABBinECEF=Rf,e.translate=Vl,e.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=Ya,e.uniqueId=G,e.updateGlobeVertexNormal=function(e,t,r,n,i){var a=5*t+2;e.float32[a+0]=r,e.float32[a+1]=n,e.float32[a+2]=i},e.validateCustomStyleLayer=function(e){var t=[],r=e.id;return void 0===r&&t.push({message:"layers.".concat(r,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(r,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(r,': property "renderingMode" must be either "2d" or "3d"')}),t},e.validateFilter=function(e){return qi(Pi(e))},e.validateFog=function(e){return qi(Ui(e))},e.validateLayer=function(e){return qi(Oi(e))},e.validateLight=function(e){return qi(Bi(e))},e.validateSource=function(e){return qi(Ni(e))},e.validateStyle=Hi,e.validateTerrain=function(e){return qi(Zi(e))},e.values=U,e.vectorTile=Pu,e.version=x,e.warnOnce=te,e.window=y,e.wrap=B})),y(["./shared"],(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){var r,n="[",i=d(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;n+="".concat(t(a),",")}}catch(u){i.e(u)}finally{i.f()}return"".concat(n,"]")}var o,s="{",l=d(Object.keys(e).sort());try{for(l.s();!(o=l.n()).done;){var c=o.value;s+="".concat(c,":").concat(t(e[c]),",")}}catch(u){l.e(u)}finally{l.f()}return"".concat(s,"}")}function r(r){var n,i="",a=d(e.refProperties);try{for(a.s();!(n=a.n()).done;){var o=n.value;i+="/".concat(t(r[o]))}}catch(s){a.e(s)}finally{a.f()}return i}var n=function(){function t(e){f(this,t),this.keyCache={},e&&this.replace(e)}return p(t,[{key:"replace",value:function(e){this._layerConfigs={},this._layers={},this.update(e,[])}},{key:"update",value:function(t,n){var i,a=this,o=d(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;this._layerConfigs[s.id]=s,(this._layers[s.id]=e.createStyleLayer(s)).compileFilter(),this.keyCache[s.id]&&delete this.keyCache[s.id]}}catch(_){o.e(_)}finally{o.f()}var l,c=d(n);try{for(c.s();!(l=c.n()).done;){var u=l.value;delete this.keyCache[u],delete this._layerConfigs[u],delete this._layers[u]}}catch(_){c.e(_)}finally{c.f()}this.familiesBySource={};var h,f=function(e,t){for(var n={},i=0;i<e.length;i++){var a=t&&t[e[i].id]||r(e[i]);t&&(t[e[i].id]=a);var o=n[a];o||(o=n[a]=[]),o.push(e[i])}var s=[];for(var l in n)s.push(n[l]);return s}(e.values(this._layerConfigs),this.keyCache),p=d(f);try{for(p.s();!(h=p.n()).done;){var m=h.value.map((function(e){return a._layers[e.id]})),v=m[0];if("none"!==v.visibility){var g=v.source||"",y=this.familiesBySource[g];y||(y=this.familiesBySource[g]={});var x=v.sourceLayer||"_geojsonTileLayer",b=y[x];b||(b=y[x]=[]),b.push(m)}}}catch(_){p.e(_)}finally{p.f()}}}]),t}(),i=function(){function t(){f(this,t)}return p(t,[{key:"loadTile",value:function(t,r){var n=t.uid,i=t.encoding,a=t.rawImageData,o=t.padding,s=t.buildQuadTree,l=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap?this.getImageData(a,o):a;r(null,new e.DEMData(n,l,i,o<1,s))}},{key:"getImageData",value:function(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var r=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),r}}]),t}(),a=function e(t,r){var n,i=t&&t.type;if("FeatureCollection"===i)for(n=0;n<t.features.length;n++)e(t.features[n],r);else if("GeometryCollection"===i)for(n=0;n<t.geometries.length;n++)e(t.geometries[n],r);else if("Feature"===i)e(t.geometry,r);else if("Polygon"===i)l(t.coordinates,r);else if("MultiPolygon"===i)for(n=0;n<t.coordinates.length;n++)l(t.coordinates[n],r);return t};function l(e,t){if(0!==e.length){c(e[0],t);for(var r=1;r<e.length;r++)c(e[r],!t)}}function c(e,t){for(var r=0,n=0,i=0,a=e.length,o=a-1;i<a;o=i++){var s=(e[i][0]-e[o][0])*(e[o][1]+e[i][1]),l=r+s;n+=Math.abs(r)>=Math.abs(s)?r-l+s:s-l+r,r=l}r+n>=0!=!!t&&e.reverse()}var u=e.VectorTileFeature.prototype.toGeoJSON,g=function(){function t(r){f(this,t),this._feature=r,this.extent=e.EXTENT,this.type=r.type,this.properties=r.tags,"id"in r&&!isNaN(r.id)&&(this.id=parseInt(r.id,10))}return p(t,[{key:"loadGeometry",value:function(){if(1===this._feature.type){var t,r=[],n=d(this._feature.geometry);try{for(n.s();!(t=n.n()).done;){var i=t.value;r.push([new e.pointGeometry(i[0],i[1])])}}catch(p){n.e(p)}finally{n.f()}return r}var a,o=[],s=d(this._feature.geometry);try{for(s.s();!(a=s.n()).done;){var l,c=a.value,u=[],h=d(c);try{for(h.s();!(l=h.n()).done;){var f=l.value;u.push(new e.pointGeometry(f[0],f[1]))}}catch(p){h.e(p)}finally{h.f()}o.push(u)}}catch(p){s.e(p)}finally{s.f()}return o}},{key:"toGeoJSON",value:function(e,t,r){return u.call(this,e,t,r)}}]),t}(),y=function(){function t(r){f(this,t),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=r.length,this._features=r}return p(t,[{key:"feature",value:function(e){return new g(this._features[e])}}]),t}(),x={exports:{}},b=e.pointGeometry,_=e.vectorTile.VectorTileFeature,w=k;function k(e,t){this.options=t||{},this.features=e,this.length=e.length}function S(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}k.prototype.feature=function(e){return new S(this.features[e],this.options.extent)},S.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var r=e[t],n=[],i=0;i<r.length;i++)n.push(new b(r[i][0],r[i][1]));this.geometry.push(n)}return this.geometry},S.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,n=1/0,i=-1/0,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),i=Math.max(i,l.y)}return[t,n,r,i]},S.prototype.toGeoJSON=_.prototype.toGeoJSON;var C=e.pbf,A=w;function T(e){var t=new C;return function(e,t){for(var r in e.layers)t.writeMessage(3,E,e.layers[r])}(e,t),t.finish()}function E(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)n.feature=e.feature(r),t.writeMessage(2,M,n);var i=n.keys;for(r=0;r<i.length;r++)t.writeStringField(3,i[r]);var a=n.values;for(r=0;r<a.length;r++)t.writeMessage(4,L,a[r])}function M(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,I,e),t.writeVarintField(3,r.type),t.writeMessage(4,z,r)}function I(e,t){var r=e.feature,n=e.keys,i=e.values,a=e.keycache,o=e.valuecache;for(var s in r.properties){var l=r.properties[s],c=a[s];if(null!==l){void 0===c&&(n.push(s),a[s]=c=n.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=o[h];void 0===d&&(i.push(l),o[h]=d=i.length-1),t.writeVarint(d)}}}function P(e,t){return(t<<3)+(7&e)}function R(e){return e<<1^e>>31}function z(e,t){for(var r=e.loadGeometry(),n=e.type,i=0,a=0,o=r.length,s=0;s<o;s++){var l=r[s],c=1;1===n&&(c=l.length),t.writeVarint(P(1,c));for(var u=3===n?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==n&&t.writeVarint(P(2,u-1));var d=l[h].x-i,f=l[h].y-a;t.writeVarint(R(d)),t.writeVarint(R(f)),i+=d,a+=f}3===n&&t.writeVarint(P(7,1))}}function L(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function D(e,t,r,n,i,a){if(!(i-n<=r)){var o=n+i>>1;O(e,t,o,n,i,a%2),D(e,t,r,n,o-1,a+1),D(e,t,r,o+1,i,a+1)}}function O(e,t,r,n,i,a){for(;i>n;){if(i-n>600){var o=i-n+1,s=r-n+1,l=Math.log(o),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(o-c)/o)*(s-o/2<0?-1:1);O(e,t,r,Math.max(n,Math.floor(r-s*c/o+u)),Math.min(i,Math.floor(r+(o-s)*c/o+u)),a)}var h=t[2*r+a],d=n,f=i;for(F(e,t,n,r),t[2*i+a]>h&&F(e,t,n,i);d<f;){for(F(e,t,d,f),d++,f--;t[2*d+a]<h;)d++;for(;t[2*f+a]>h;)f--}t[2*n+a]===h?F(e,t,n,f):F(e,t,++f,i),f<=r&&(n=f+1),r<=f&&(i=f-1)}}function F(e,t,r,n){j(e,r,n),j(t,2*r,2*n),j(t,2*r+1,2*n+1)}function j(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function N(e,t,r,n){var i=e-r,a=t-n;return i*i+a*a}x.exports=T,x.exports.fromVectorTileJs=T,x.exports.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var n in e)r[n]=new A(e[n].features,t),r[n].name=n,r[n].version=t.version,r[n].extent=t.extent;return T({layers:r})},x.exports.GeoJSONWrapper=A;var B,Z=function(e){return e[0]},U=function(e){return e[1]},V=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;f(this,e),this.nodeSize=i,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new o(t.length),l=this.coords=new a(2*t.length),c=0;c<t.length;c++)s[c]=c,l[2*c]=r(t[c]),l[2*c+1]=n(t[c]);D(s,l,i,0,s.length-1,0)}return p(e,[{key:"range",value:function(e,t,r,n){return function(e,t,r,n,i,a,o){for(var s,l,c=[0,e.length-1,0],u=[];c.length;){var h=c.pop(),d=c.pop(),f=c.pop();if(d-f<=o)for(var p=f;p<=d;p++)s=t[2*p],l=t[2*p+1],s>=r&&s<=i&&l>=n&&l<=a&&u.push(e[p]);else{var m=Math.floor((f+d)/2);s=t[2*m],l=t[2*m+1],s>=r&&s<=i&&l>=n&&l<=a&&u.push(e[m]);var v=(h+1)%2;(0===h?r<=s:n<=l)&&(c.push(f),c.push(m-1),c.push(v)),(0===h?i>=s:a>=l)&&(c.push(m+1),c.push(d),c.push(v))}}return u}(this.ids,this.coords,e,t,r,n,this.nodeSize)}},{key:"within",value:function(e,t,r){return function(e,t,r,n,i,a){for(var o=[0,e.length-1,0],s=[],l=i*i;o.length;){var c=o.pop(),u=o.pop(),h=o.pop();if(u-h<=a)for(var d=h;d<=u;d++)N(t[2*d],t[2*d+1],r,n)<=l&&s.push(e[d]);else{var f=Math.floor((h+u)/2),p=t[2*f],m=t[2*f+1];N(p,m,r,n)<=l&&s.push(e[f]);var v=(c+1)%2;(0===c?r-i<=p:n-i<=m)&&(o.push(h),o.push(f-1),o.push(v)),(0===c?r+i>=p:n+i>=m)&&(o.push(f+1),o.push(u),o.push(v))}}return s}(this.ids,this.coords,e,t,r,this.nodeSize)}}]),e}(),W={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},G=Math.fround||(B=new Float32Array(1),function(e){return B[0]=+e,B[0]}),H=function(){function e(t){f(this,e),this.options=ee(Object.create(W),t),this.trees=new Array(this.options.maxZoom+1)}return p(e,[{key:"load",value:function(e){var t=this.options,r=t.log,n=t.minZoom,i=t.maxZoom,a=t.nodeSize;r&&console.time("total time");var o="prepare ".concat(e.length," points");r&&console.time(o),this.points=e;for(var s=[],l=0;l<e.length;l++)e[l].geometry&&s.push(Y(e[l],l));this.trees[i+1]=new V(s,te,re,a,Float32Array),r&&console.timeEnd(o);for(var c=i;c>=n;c--){var u=+Date.now();s=this._cluster(s,c),this.trees[c]=new V(s,te,re,a,Float32Array),r&&console.log("z%d: %d clusters in %dms",c,s.length,+Date.now()-u)}return r&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var r=((e[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){var o=this.getClusters([r,n,180,a],t),s=this.getClusters([-180,n,i,a],t);return o.concat(s)}var l,c=this.trees[this._limitZoom(t)],u=c.range(K(r),J(a),K(i),J(n)),h=[],f=d(u);try{for(f.s();!(l=f.n()).done;){var p=l.value,m=c.points[p];h.push(m.numPoints?q(m):this.points[m.index])}}catch(v){f.e(v)}finally{f.f()}return h}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),r=this._getOriginZoom(e),n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);var a=i.points[t];if(!a)throw new Error(n);var o,s=this.options.radius/(this.options.extent*Math.pow(2,r-1)),l=i.within(a.x,a.y,s),c=[],u=d(l);try{for(u.s();!(o=u.n()).done;){var h=o.value,f=i.points[h];f.parentId===e&&c.push(f.numPoints?q(f):this.points[f.index])}}catch(p){u.e(p)}finally{u.f()}if(0===c.length)throw new Error(n);return c}},{key:"getLeaves",value:function(e,t,r){var n=[];return this._appendLeaves(n,e,t=t||10,r=r||0,0),n}},{key:"getTile",value:function(e,t,r){var n=this.trees[this._limitZoom(e)],i=Math.pow(2,e),a=this.options,o=a.extent,s=a.radius/o,l=(r-s)/i,c=(r+1+s)/i,u={features:[]};return this._addTileFeatures(n.range((t-s)/i,l,(t+1+s)/i,c),n.points,t,r,i,u),0===t&&this._addTileFeatures(n.range(1-s/i,l,1,c),n.points,i,r,i,u),t===i-1&&this._addTileFeatures(n.range(0,l,s/i,c),n.points,-1,r,i,u),u.features.length?u:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,r,n,i){var a,o=this.getChildren(t),s=d(o);try{for(s.s();!(a=s.n()).done;){var l=a.value,c=l.properties;if(c&&c.cluster?i+c.point_count<=n?i+=c.point_count:i=this._appendLeaves(e,c.cluster_id,r,n,i):i<n?i++:e.push(l),e.length===r)break}}catch(u){s.e(u)}finally{s.f()}return i}},{key:"_addTileFeatures",value:function(e,t,r,n,i,a){var o,s=d(e);try{for(s.s();!(o=s.n()).done;){var l=t[o.value],c=l.numPoints,u=void 0,h=void 0,f=void 0;if(c)u=$(l),h=l.x,f=l.y;else{var p=this.points[l.index];u=p.properties,h=K(p.geometry.coordinates[0]),f=J(p.geometry.coordinates[1])}var m={type:1,geometry:[[Math.round(this.options.extent*(h*i-r)),Math.round(this.options.extent*(f*i-n))]],tags:u},v=void 0;c?v=l.id:this.options.generateId?v=l.index:this.points[l.index].id&&(v=this.points[l.index].id),void 0!==v&&(m.id=v),a.features.push(m)}}catch(g){s.e(g)}finally{s.f()}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var r=[],n=this.options,i=n.radius,a=n.extent,o=n.reduce,s=n.minPoints,l=i/(a*Math.pow(2,t)),c=0;c<e.length;c++){var u=e[c];if(!(u.zoom<=t)){u.zoom=t;var h,f=this.trees[t+1],p=f.within(u.x,u.y,l),m=u.numPoints||1,v=m,g=d(p);try{for(g.s();!(h=g.n()).done;){var y=h.value,x=f.points[y];x.zoom>t&&(v+=x.numPoints||1)}}catch(z){g.e(z)}finally{g.f()}if(v>m&&v>=s){var b,_=u.x*m,w=u.y*m,k=o&&m>1?this._map(u,!0):null,S=(c<<5)+(t+1)+this.points.length,C=d(p);try{for(C.s();!(b=C.n()).done;){var A=b.value,T=f.points[A];if(!(T.zoom<=t)){T.zoom=t;var E=T.numPoints||1;_+=T.x*E,w+=T.y*E,T.parentId=S,o&&(k||(k=this._map(u,!0)),o(k,this._map(T)))}}}catch(z){C.e(z)}finally{C.f()}u.parentId=S,r.push(X(_/v,w/v,S,v,k))}else if(r.push(u),v>1){var M,I=d(p);try{for(I.s();!(M=I.n()).done;){var P=M.value,R=f.points[P];R.zoom<=t||(R.zoom=t,r.push(R))}}catch(z){I.e(z)}finally{I.f()}}}}return r}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t){if(e.numPoints)return t?ee({},e.properties):e.properties;var r=this.points[e.index].properties,n=this.options.map(r);return t&&n===r?ee({},n):n}}]),e}();function X(e,t,r,n,i){return{x:G(e),y:G(t),zoom:1/0,id:r,parentId:-1,numPoints:n,properties:i}}function Y(e,t){var r=h(e.geometry.coordinates,2),n=r[0],i=r[1];return{x:G(K(n)),y:G(J(i)),zoom:1/0,index:t,parentId:-1}}function q(e){return{type:"Feature",id:e.id,properties:$(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),Q(e.y)]}};var t}function $(e){var t=e.numPoints,r=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?Math.round(t/100)/10+"k":t;return ee(ee({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function K(e){return e/360+.5}function J(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Q(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function ee(e,t){for(var r in t)e[r]=t[r];return e}function te(e){return e.x}function re(e){return e.y}function ne(e,t,r,n){for(var i,a=n,o=r-t>>1,s=r-t,l=e[t],c=e[t+1],u=e[r],h=e[r+1],d=t+3;d<r;d+=3){var f=ie(e[d],e[d+1],l,c,u,h);if(f>a)i=d,a=f;else if(f===a){var p=Math.abs(d-o);p<s&&(i=d,s=p)}}a>n&&(i-t>3&&ne(e,t,i,n),e[i+2]=a,r-i>3&&ne(e,i,r,n))}function ie(e,t,r,n,i,a){var o=i-r,s=a-n;if(0!==o||0!==s){var l=((e-r)*o+(t-n)*s)/(o*o+s*s);l>1?(r=i,n=a):l>0&&(r+=o*l,n+=s*l)}return(o=e-r)*o+(s=t-n)*s}function ae(e,t,r,n){var i={id:void 0===e?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)oe(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<t.length;n++)oe(e,t[n]);else if("MultiPolygon"===r)for(n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)oe(e,t[n][i])}(i),i}function oe(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function se(e,t,r,n){if(t.geometry){var i=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===a)le(i,s);else if("MultiPoint"===a)for(var c=0;c<i.length;c++)le(i[c],s);else if("LineString"===a)ce(i,s,o,!1);else if("MultiLineString"===a){if(r.lineMetrics){for(c=0;c<i.length;c++)ce(i[c],s=[],o,!1),e.push(ae(l,"LineString",s,t.properties));return}ue(i,s,o,!1)}else if("Polygon"===a)ue(i,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(c=0;c<t.geometry.geometries.length;c++)se(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},r,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];ue(i[c],u,o,!0),s.push(u)}}e.push(ae(l,a,s,t.properties))}}function le(e,t){t.push(he(e[0])),t.push(de(e[1])),t.push(0)}function ce(e,t,r,n){for(var i,a,o=0,s=0;s<e.length;s++){var l=he(e[s][0]),c=de(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(o+=n?(i*c-l*a)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-a,2))),i=l,a=c}var u=t.length-3;t[2]=1,ne(t,0,u,r),t[u+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function ue(e,t,r,n){for(var i=0;i<e.length;i++){var a=[];ce(e[i],a,r,n),t.push(a)}}function he(e){return e/360+.5}function de(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function fe(e,t,r,n,i,a,o,s){if(n/=t,a>=(r/=t)&&o<n)return e;if(o<r||a>=n)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],h=u.geometry,d=u.type,f=0===i?u.minX:u.minY,p=0===i?u.maxX:u.maxY;if(f>=r&&p<n)l.push(u);else if(!(p<r||f>=n)){var m=[];if("Point"===d||"MultiPoint"===d)pe(h,m,r,n,i);else if("LineString"===d)me(h,m,r,n,i,!1,s.lineMetrics);else if("MultiLineString"===d)ge(h,m,r,n,i,!1);else if("Polygon"===d)ge(h,m,r,n,i,!0);else if("MultiPolygon"===d)for(var v=0;v<h.length;v++){var g=[];ge(h[v],g,r,n,i,!0),g.length&&m.push(g)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(v=0;v<m.length;v++)l.push(ae(u.id,d,m[v],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(ae(u.id,d,m,u.tags))}}}return l.length?l:null}function pe(e,t,r,n,i){for(var a=0;a<e.length;a+=3){var o=e[a+i];o>=r&&o<=n&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function me(e,t,r,n,i,a,o){for(var s,l,c=ve(e),u=0===i?xe:be,h=e.start,d=0;d<e.length-3;d+=3){var f=e[d],p=e[d+1],m=e[d+2],v=e[d+3],g=e[d+4],y=0===i?f:p,x=0===i?v:g,b=!1;o&&(s=Math.sqrt(Math.pow(f-v,2)+Math.pow(p-g,2))),y<r?x>r&&(l=u(c,f,p,v,g,r),o&&(c.start=h+s*l)):y>n?x<n&&(l=u(c,f,p,v,g,n),o&&(c.start=h+s*l)):ye(c,f,p,m),x<r&&y>=r&&(l=u(c,f,p,v,g,r),b=!0),x>n&&y<=n&&(l=u(c,f,p,v,g,n),b=!0),!a&&b&&(o&&(c.end=h+s*l),t.push(c),c=ve(e)),o&&(h+=s)}var _=e.length-3;f=e[_],p=e[_+1],m=e[_+2],(y=0===i?f:p)>=r&&y<=n&&ye(c,f,p,m),_=c.length-3,a&&_>=3&&(c[_]!==c[0]||c[_+1]!==c[1])&&ye(c,c[0],c[1],c[2]),c.length&&t.push(c)}function ve(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ge(e,t,r,n,i,a){for(var o=0;o<e.length;o++)me(e[o],t,r,n,i,a,!1)}function ye(e,t,r,n){e.push(t),e.push(r),e.push(n)}function xe(e,t,r,n,i,a){var o=(a-t)/(n-t);return e.push(a),e.push(r+(i-r)*o),e.push(1),o}function be(e,t,r,n,i,a){var o=(a-r)/(i-r);return e.push(t+(n-t)*o),e.push(a),e.push(1),o}function _e(e,t){for(var r=[],n=0;n<e.length;n++){var i,a=e[n],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)i=we(a.geometry,t);else if("MultiLineString"===o||"Polygon"===o){i=[];for(var s=0;s<a.geometry.length;s++)i.push(we(a.geometry[s],t))}else if("MultiPolygon"===o)for(i=[],s=0;s<a.geometry.length;s++){for(var l=[],c=0;c<a.geometry[s].length;c++)l.push(we(a.geometry[s][c],t));i.push(l)}r.push(ae(a.id,o,i,a.tags))}return r}function we(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function ke(e,t){if(e.transformed)return e;var r,n,i,a=1<<e.z,o=e.x,s=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(n=0;n<c.length;n+=2)l.geometry.push(Se(c[n],c[n+1],t,a,o,s));else for(n=0;n<c.length;n++){var h=[];for(i=0;i<c[n].length;i+=2)h.push(Se(c[n][i],c[n][i+1],t,a,o,s));l.geometry.push(h)}}return e.transformed=!0,e}function Se(e,t,r,n,i,a){return[Math.round(r*(e*n-i)),Math.round(r*(t*n-a))]}function Ce(e,t,r,n,i){for(var a=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,Ae(o,e[s],a,i);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,h=e[s].maxY;l<o.minX&&(o.minX=l),c<o.minY&&(o.minY=c),u>o.maxX&&(o.maxX=u),h>o.maxY&&(o.maxY=h)}return o}function Ae(e,t,r,n){var i=t.geometry,a=t.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<i.length;s+=3)o.push(i[s]),o.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)Te(o,i,e,r,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<i.length;s++)Te(o,i[s],e,r,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)Te(o,c[s],e,r,!0,0===s)}if(o.length){var u=t.tags||null;if("LineString"===a&&n.lineMetrics){for(var h in u={},t.tags)u[h]=t.tags[h];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var d={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:u};null!==t.id&&(d.id=t.id),e.features.push(d)}}function Te(e,t,r,n,i,a){var o=n*n;if(n>0&&t.size<(i?o:n))r.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>o)&&(r.numSimplified++,s.push(t[l]),s.push(t[l+1])),r.numPoints++;i&&function(e,t){for(var r=0,n=0,i=e.length,a=i-2;n<i;a=n,n+=2)r+=(e[n]-e[a])*(e[n+1]+e[a+1]);if(r>0===t)for(n=0,i=e.length;n<i/2;n+=2){var o=e[n],s=e[n+1];e[n]=e[i-2-n],e[n+1]=e[i-1-n],e[i-2-n]=o,e[i-1-n]=s}}(s,a),e.push(s)}}function Ee(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)se(r,e.features[n],t,n);else se(r,"Feature"===e.type?e:{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=function(e,t){var r=t.buffer/t.extent,n=e,i=fe(e,1,-1-r,r,0,-1,2,t),a=fe(e,1,1-r,2+r,0,-1,2,t);return(i||a)&&(n=fe(e,1,-r,1+r,0,-1,2,t)||[],i&&(n=_e(i,1).concat(n)),a&&(n=n.concat(_e(a,-1)))),n}(n,t),n.length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Me(e,t,r){return 32*((1<<e)*r+t)+e}function Ie(e,t){var r=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var n=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!n)return t(null,null);var i=new y(n.features),a=x.exports(i);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),t(null,{vectorTile:i,rawData:a.buffer})}Ee.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ee.prototype.splitTile=function(e,t,r,n,i,a,o){for(var s=[e,t,r,n],l=this.options,c=l.debug;s.length;){n=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,h=Me(t,r,n),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=Ce(e,t,r,n,l),this.tileCoords.push({z:t,x:r,y:n}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(d.source=e,i){if(t===l.maxZoom||t===i)continue;var p=1<<i-t;if(r!==Math.floor(a/p)||n!==Math.floor(o/p))continue}else if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==e.length){c>1&&console.time("clipping");var m,v,g,y,x,b,_=.5*l.buffer/l.extent,w=.5-_,k=.5+_,S=1+_;m=v=g=y=null,x=fe(e,u,r-_,r+k,0,d.minX,d.maxX,l),b=fe(e,u,r+w,r+S,0,d.minX,d.maxX,l),e=null,x&&(m=fe(x,u,n-_,n+k,1,d.minY,d.maxY,l),v=fe(x,u,n+w,n+S,1,d.minY,d.maxY,l),x=null),b&&(g=fe(b,u,n-_,n+k,1,d.minY,d.maxY,l),y=fe(b,u,n+w,n+S,1,d.minY,d.maxY,l),b=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*r,2*n),s.push(v||[],t+1,2*r,2*n+1),s.push(g||[],t+1,2*r+1,2*n),s.push(y||[],t+1,2*r+1,2*n+1)}}},Ee.prototype.getTile=function(e,t,r){var n=this.options,i=n.extent,a=n.debug;if(e<0||e>24)return null;var o=1<<e,s=Me(e,t=(t%o+o)%o,r);if(this.tiles[s])return ke(this.tiles[s],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,c=e,u=t,h=r;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[Me(c,u,h)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",c,u,h),a>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,e,t,r),a>1&&console.timeEnd("drilling down"),this.tiles[s]?ke(this.tiles[s],i):null):null};var Pe=function(t){m(n,t);var r=v(n);function n(e,t,i,a,o){var s;return f(this,n),s=r.call(this,e,t,i,a,Ie),o&&(s.loadGeoJSON=o),s}return p(n,[{key:"loadData",value:function(t,r){var n=this,i=t&&t.request,o=i&&i.collectResourceTiming;this.loadGeoJSON(t,(function(s,l){if(s||!l)return r(s);if("object"!=typeof l)return r(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));a(l,!0);try{if(t.filter){var c=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===c.result)throw new Error(c.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));var u=l.features.filter((function(e){return c.value.evaluate({zoom:0},e)}));l={type:"FeatureCollection",features:u}}n._geoJSONIndex=t.cluster?new H(function(t){var r=t.superclusterOptions,n=t.clusterProperties;if(!n||!r)return r;for(var i={},a={},o={accumulated:null,zoom:0},s={properties:null},l=Object.keys(n),c=0,u=l;c<u.length;c++){var f=u[c],p=h(n[f],2),m=p[0],v=p[1],g=e.createExpression(v),y=e.createExpression("string"==typeof m?[m,["accumulated"],["get",f]]:m);i[f]=g.value,a[f]=y.value}return r.map=function(e){s.properties=e;var t,r={},n=d(l);try{for(n.s();!(t=n.n()).done;){var a=t.value;r[a]=i[a].evaluate(o,s)}}catch(c){n.e(c)}finally{n.f()}return r},r.reduce=function(e,t){s.properties=t;var r,n=d(l);try{for(n.s();!(r=n.n()).done;){var i=r.value;o.accumulated=e[i],e[i]=a[i].evaluate(o,s)}}catch(c){n.e(c)}finally{n.f()}},r}(t)).load(l.features):function(e,t){return new Ee(e,t)}(l,t.geojsonVtOptions)}catch(s){return r(s)}n.loaded={};var f={};if(o){var p=e.getPerformanceMeasurement(i);p&&(f.resourceTiming={},f.resourceTiming[t.source]=JSON.parse(JSON.stringify(p)))}r(null,f)}))}},{key:"reloadTile",value:function(e,t){var r=this.loaded;return r&&r[e.uid]?o(s(n.prototype),"reloadTile",this).call(this,e,t):this.loadTile(e,t)}},{key:"loadGeoJSON",value:function(t,r){if(t.request)e.getJSON(t.request,r);else{if("string"!=typeof t.data)return r(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));try{return r(null,JSON.parse(t.data))}catch(e){return r(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")))}}}},{key:"getClusterExpansionZoom",value:function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}},{key:"getClusterChildren",value:function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}},{key:"getClusterLeaves",value:function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}]),n}(e.VectorTileWorkerSource),Re=function(){function t(r){var n=this;f(this,t),this.self=r,this.actor=new e.Actor(r,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:Pe},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(n.workerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));n.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}return p(t,[{key:"clearCaches",value:function(e,t,r){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],r()}},{key:"checkIfReady",value:function(e,t,r){r()}},{key:"setReferrer",value:function(e,t){this.referrer=t}},{key:"spriteLoaded",value:function(t,r){for(var n in this.isSpriteLoaded[t]=r,this.workerSources[t]){var i=this.workerSources[t][n];for(var a in i)i[a]instanceof e.VectorTileWorkerSource&&(i[a].isSpriteLoaded=r,i[a].fire(new e.Event("isSpriteLoaded")))}}},{key:"setImages",value:function(e,t,r){for(var n in this.availableImages[e]=t,this.workerSources[e]){var i=this.workerSources[e][n];for(var a in i)i[a].availableImages=t}r()}},{key:"enableTerrain",value:function(e,t,r){this.terrain=t,r()}},{key:"setProjection",value:function(t,r){this.projections[t]=e.getProjection(r)}},{key:"setLayers",value:function(e,t,r){this.getLayerIndex(e).replace(t),r()}},{key:"updateLayers",value:function(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r()}},{key:"loadTile",value:function(t,r,n){var i=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).loadTile(i,n)}},{key:"loadDEMTile",value:function(t,r,n){var i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},r):r;this.getDEMWorkerSource(t,r.source).loadTile(i,n)}},{key:"reloadTile",value:function(t,r,n){var i=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).reloadTile(i,n)}},{key:"abortTile",value:function(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r)}},{key:"removeTile",value:function(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r)}},{key:"removeSource",value:function(e,t,r){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var n=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==n.removeSource?n.removeSource(t,r):r()}}},{key:"loadWorkerSource",value:function(e,t,r){try{this.self.importScripts(t.url),r()}catch(e){r(e.toString())}}},{key:"syncRTLPluginState",value:function(t,r,n){try{e.plugin.setState(r);var i=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=i){this.self.importScripts(i);var a=e.plugin.isParsed();n(a?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(i)),a)}}catch(e){n(e.toString())}}},{key:"getAvailableImages",value:function(e){var t=this.availableImages[e];return t||(t=[]),t}},{key:"getLayerIndex",value:function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new n),t}},{key:"getWorkerSource",value:function(e,t,r){var n=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){var i={send:function(t,r,i,a,o,s){n.actor.send(t,r,i,e,o,s)},scheduler:this.actor.scheduler};this.workerSources[e][t][r]=new this.workerSourceTypes[t](i,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][r]}},{key:"getDEMWorkerSource",value:function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}},{key:"enforceCacheSizeLimit",value:function(t,r){e.enforceCacheSizeLimit(r)}},{key:"getWorkerPerformanceMetrics",value:function(e,t,r){r(void 0,void 0)}}]),t}();return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Re(self)),Re})),y(["./shared"],(function(e){function t(e,r){if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(var n=0;n<e.length;n++)if(!t(e[n],r[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==r){if("object"!=typeof r)return!1;if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var i in e)if(!t(e[i],r[i]))return!1;return!0}return e===r}var r=c;function c(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,r=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(r);try{t=new Worker(n),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(n),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var r=t.getImageData(0,0,1,1);return r&&r.width===e.width}()?(void 0===g[t=e&&e.failIfMajorPerformanceCaveat]&&(g[t]=function(e){var t,r=function(e){var t=document.createElement("canvas"),r=Object.create(c.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,t.getContext("webgl",r)||t.getContext("experimental-webgl",r)}(e);if(!r)return!1;try{t=r.createShader(r.VERTEX_SHADER)}catch(e){return!1}return!(!t||r.isContextLost())&&(r.shaderSource(t,"void main() {}"),r.compileShader(t),!0===r.getShaderParameter(t,r.COMPILE_STATUS))}(t)),g[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var g={};function y(t,r,n){var i=e.window.document.createElement(t);return void 0!==r&&(i.className=r),n&&n.appendChild(i),i}function x(t,r,n){for(var i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t),a=0,o=Object.keys(r);a<o.length;a++){var s=o[a];i.setAttributeNS(null,s,r[s])}return n&&n.appendChild(i),i}c.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var b,_=e.window.document&&e.window.document.documentElement.style,w=_&&void 0!==_.userSelect?"userSelect":"WebkitUserSelect";function k(){_&&w&&(b=_[w],_[w]="none")}function S(){_&&w&&(_[w]=b)}function C(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",C,!0)}function A(){e.window.addEventListener("click",C,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",C,!0)}),0)}function T(e,t){var r=e.getBoundingClientRect();return I(e,r,t)}function E(e,t){for(var r=e.getBoundingClientRect(),n=[],i=0;i<t.length;i++)n.push(I(e,r,t[i]));return n}function M(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function I(t,r,n){var i=t.offsetWidth===r.width?1:t.offsetWidth/r.width;return new e.pointGeometry((n.clientX-r.left)*i,(n.clientY-r.top)*i)}function P(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*a-i*n;return o?(e[0]=a*(o=1/o),e[1]=-n*o,e[2]=-i*o,e[3]=r*o,e):null}function R(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}var z=function(t){m(n,t);var r=v(n);function n(){var t;return f(this,n),(t=r.call(this)).images={},t.updatedImages={},t.callbackDispatchedThisFrame={},t.loaded=!1,t.requestors=[],t.patterns={},t.atlasImage=new e.RGBAImage({width:1,height:1}),t.dirty=!0,t}return p(n,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(e){if(this.loaded!==e&&(this.loaded=e,e)){var t,r=d(this.requestors);try{for(r.s();!(t=r.n()).done;){var n=t.value,i=n.ids,a=n.callback;this._notify(i,a)}}catch(o){r.e(o)}finally{r.f()}this.requestors=[]}}},{key:"hasImage",value:function(e){return!!this.getImage(e)}},{key:"getImage",value:function(e){return this.images[e]}},{key:"addImage",value:function(e,t){this._validate(e,t)&&(this.images[e]=t)}},{key:"_validate",value:function(t,r){var n=!0;return this._validateStretch(r.stretchX,r.data&&r.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchX" value')))),n=!1),this._validateStretch(r.stretchY,r.data&&r.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchY" value')))),n=!1),this._validateContent(r.content,r)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "content" value')))),n=!1),n}},{key:"_validateStretch",value:function(e,t){if(!e)return!0;var r,n=0,i=d(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a[0]<n||a[1]<a[0]||t<a[1])return!1;n=a[1]}}catch(o){i.e(o)}finally{i.f()}return!0}},{key:"_validateContent",value:function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}},{key:"updateImage",value:function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}},{key:"removeImage",value:function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(e,t){var r=!0;if(!this.isLoaded()){var n,i=d(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.images[a]||(r=!1)}}catch(o){i.e(o)}finally{i.f()}}this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})}},{key:"_notify",value:function(t,r){var n,i={},a=d(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;this.images[o]||this.fire(new e.Event("styleimagemissing",{id:o}));var s=this.images[o];s?i[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'.concat(o,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(l){a.e(l)}finally{a.f()}r(null,i)}},{key:"getPixelSize",value:function(){var e=this.atlasImage;return{width:e.width,height:e.height}}},{key:"getPattern",value:function(t){var r=this.patterns[t],n=this.getImage(t);if(!n)return null;if(r&&r.position.version===n.version)return r.position;if(r)r.position.version=n.version;else{var i={w:n.data.width+2,h:n.data.height+2,x:0,y:0},a=new e.ImagePosition(i,n);this.patterns[t]={bin:i,position:a}}return this._updatePatternAtlas(),this.patterns[t].position}},{key:"bind",value:function(t){var r=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var t=[];for(var r in this.patterns)t.push(this.patterns[r].bin);var n=e.potpack(t),i=n.w,a=n.h,o=this.atlasImage;for(var s in o.resize({width:i||1,height:a||1}),this.patterns){var l=this.patterns[s].bin,c=l.x+1,u=l.y+1,h=this.images[s].data,d=h.width,f=h.height;e.RGBAImage.copy(h,o,{x:0,y:0},{x:c,y:u},{width:d,height:f}),e.RGBAImage.copy(h,o,{x:0,y:f-1},{x:c,y:u-1},{width:d,height:1}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:c,y:u+f},{width:d,height:1}),e.RGBAImage.copy(h,o,{x:d-1,y:0},{x:c-1,y:u},{width:1,height:f}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:c+d,y:u},{width:1,height:f})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(e){var t,r=d(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(!this.callbackDispatchedThisFrame[n]){this.callbackDispatchedThisFrame[n]=!0;var i=this.images[n];R(i)&&this.updateImage(n,i)}}}catch(a){r.e(a)}finally{r.f()}}}]),n}(e.Evented),L=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new(function(){function t(){f(this,t),this.specification=e.spec.light.position}return p(t,[{key:"possiblyEvaluate",value:function(t,r){return function(t){var r=h(t,3),n=r[0],i=r[1],a=r[2],o=e.degToRad(i+90),s=e.degToRad(a);return{x:n*Math.cos(o)*Math.sin(s),y:n*Math.sin(o)*Math.sin(s),z:n*Math.cos(s),azimuthal:i,polar:a}}(t.expression.evaluate(r))}},{key:"interpolate",value:function(t,r,n){return{x:e.number(t.x,r.x,n),y:e.number(t.y,r.y,n),z:e.number(t.z,r.z,n),azimuthal:e.number(t.azimuthal,r.azimuthal,n),polar:e.number(t.polar,r.polar,n)}}}]),t}()),color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),D="-transition",O=function(t){m(n,t);var r=v(n);function n(t){var i;return f(this,n),(i=r.call(this))._transitionable=new e.Transitionable(L),i.setLight(t),i._transitioning=i._transitionable.untransitioned(),i}return p(n,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateLight,t,r))for(var n in t){var i=t[n];e.endsWith(n,D)?this._transitionable.setTransition(n.slice(0,-D.length),i):this._transitionable.setValue(n,i)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,r,n){return(!n||!1!==n.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),n}(e.Evented),F=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),j="-transition",N=function(t){m(n,t);var r=v(n);function n(t,i){var a;return f(this,n),(a=r.call(this))._transitionable=new e.Transitionable(F),a.set(t),a._transitioning=a._transitionable.untransitioned(),a.drapeRenderMode=i,a}return p(n,[{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){for(var r in t){var n=t[r];e.endsWith(r,j)?this._transitionable.setTransition(r.slice(0,-j.length),n):this._transitionable.setValue(r,n)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}}]),n}(e.Evented);function B(t,r,n,i){var a=e.smoothstep(45,65,n),o=Z(t,i),s=h(o,2),l=s[0],c=s[1],u=e.length(r),d=1-Math.min(1,Math.exp((u-l)/(c-l)*-6));return d*=d*d,(d=Math.min(1,1.00747*d))*a*t.alpha}function Z(e,t){var r=.5/Math.tan(.5*t);return[e.range[0]+r,e.range[1]+r]}var U=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])}),V="-transition",W=function(t){m(n,t);var r=v(n);function n(t,i){var a;return f(this,n),(a=r.call(this))._transitionable=new e.Transitionable(U),a.set(t),a._transitioning=a._transitionable.untransitioned(),a._transform=i,a}return p(n,[{key:"state",get:function(){var t=this._transform,r="globe"===t.projection.name,n=e.globeToMercatorTransition(t.zoom),i=this.properties.get("range"),a=[.5,3];return{range:r?[e.number(a[0],i[0],n),e.number(a[1],i[1],n)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}},{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateFog,t,r)){for(var n=0,i=Object.keys(e.spec.fog);n<i.length;n++){var a=i[n];t&&void 0===t[a]&&(t[a]=e.spec.fog[a].default)}for(var o in t){var s=t[o];e.endsWith(o,V)?this._transitionable.setTransition(o.slice(0,-V.length),s):this._transitionable.setValue(o,s)}}}},{key:"getOpacity",value:function(t){if(!this._transform.projection.supportsFog)return 0;var r=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*r.a}},{key:"getOpacityAtLatLng",value:function(t,r){return this._transform.projection.supportsFog?function(t,r,n){var i=e.MercatorCoordinate.fromLngLat(r),a=n.elevation?n.elevation.getAtPointOrZero(i):0,o=[i.x,i.y,a];return e.transformMat4(o,o,n.mercatorFogMatrix),B(t,o,n.pitch,n._fov)}(this.state,t,r):0}},{key:"getFovAdjustedRange",value:function(e){return this._transform.projection.supportsFog?Z(this.state,e):[0,1]}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,r,n){return(!n||!1!==n.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),n}(e.Evented),G=function(){function t(r,n){var i=this;f(this,t),this.workerPool=r,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var a=this.workerPool.acquire(this.id),o=0;o<a.length;o++){var s=new t.Actor(a[o],n,this.id);s.name="Worker ".concat(o),this.actors.push(s)}this.ready=!1,this.broadcast("checkIfReady",null,(function(){i.ready=!0}))}return p(t,[{key:"broadcast",value:function(t,r,n){e.asyncAll(this.actors,(function(e,n){e.send(t,r,n)}),n=n||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)}}]),t}();function H(t,r,n){return r*(e.EXTENT/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}G.Actor=e.Actor;var X=function(){function t(e,r,n,i){f(this,t),this.screenBounds=e,this.cameraPoint=r,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,i)}return p(t,[{key:"isPointQuery",value:function(){return 1===this.screenBounds.length}},{key:"bufferedScreenGeometry",value:function(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}},{key:"bufferedCameraGeometry",value:function(t){var r=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(r,n,0,!1);return this.cameraPoint.y>n.y&&(this.cameraPoint.x>r.x&&this.cameraPoint.x<n.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=n.x?i[2]=this.cameraPoint:this.cameraPoint.x<=r.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}},{key:"bufferedCameraGeometryGlobe",value:function(t){var r=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(r,n,t),a=this.cameraPoint.clone();switch(3*((a.y>r.y)+(a.y>n.y))+((a.x>r.x)+(a.x>n.x))){case 0:i[0]=a,i[4]=a.clone();break;case 1:i.splice(1,0,a);break;case 2:i[1]=a;break;case 3:i.splice(4,0,a);break;case 5:i.splice(2,0,a);break;case 6:i[3]=a;break;case 7:i.splice(3,0,a);break;case 8:i[2]=a}return i}},{key:"containsTile",value:function(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.queryPadding/r._pixelsPerMercatorPixel+1,o=n?this._bufferedCameraMercator(a,r):this._bufferedScreenMercator(a,r),s=t.tileID.wrap+(o.unwrapped?i:0),l=o.polygon.map((function(r){return e.getTilePoint(t.tileTransform,r,s)}));if(e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT)){s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);var c,u=this.screenGeometryMercator.polygon.map((function(r){return e.getTileVec3(t.tileTransform,r,s)})),h=u.map((function(t){return new e.pointGeometry(t[0],t[1])})),d=r.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),f=e.getTileVec3(t.tileTransform,d,s),p=u.map((function(t){var r=e.sub(t,t,f);return e.normalize(r,r),new e.Ray(f,r)})),m=H(t,1,r.zoom)*r._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:h,tilespaceRays:p,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(c=e.getBounds(l),c.min.x=e.clamp(c.min.x,0,e.EXTENT),c.min.y=e.clamp(c.min.y,0,e.EXTENT),c.max.x=e.clamp(c.max.x,0,e.EXTENT),c.max.y=e.clamp(c.max.y,0,e.EXTENT),c),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:m}}}},{key:"_bufferedScreenMercator",value:function(e,t){var r,n=$(e);return this._screenRaycastCache[n]?this._screenRaycastCache[n]:(r="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((function(e){return t.pointCoordinate3D(e)})),unwrapped:!0},this._screenRaycastCache[n]=r,r)}},{key:"_bufferedCameraMercator",value:function(e,t){var r,n=$(e);return this._cameraRaycastCache[n]?this._cameraRaycastCache[n]:(r="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((function(e){return t.pointCoordinate3D(e)})),unwrapped:!0},this._cameraRaycastCache[n]=r,r)}},{key:"_projectAndResample",value:function(t,r){var n=function(t,r){var n=e.multiply([],r.pixelMatrix,r.globeMatrix),i=[0,-e.GLOBE_RADIUS,0,1],a=[0,e.GLOBE_RADIUS,0,1],o=[0,0,0,1];e.transformMat4$1(i,i,n),e.transformMat4$1(a,a,n),e.transformMat4$1(o,o,n);var s=new e.pointGeometry(i[0]/i[3],i[1]/i[3]),l=new e.pointGeometry(a[0]/a[3],a[1]/a[3]),c=e.polygonContainsPoint(t,s)&&i[3]<o[3],h=e.polygonContainsPoint(t,l)&&a[3]<o[3];if(!c&&!h)return null;var d=function(e,t,r){for(var n=1;n<e.length;n++){var i=q(t.pointCoordinate3D(e[n-1]).x),a=q(t.pointCoordinate3D(e[n]).x);if(r<0){if(i<a)return{idx:n,t:-i/(a-1-i)}}else if(a<i)return{idx:n,t:(1-i)/(a+1-i)}}return null}(t,r,c?-1:1);if(!d)return null;var f=d.idx,p=d.t,m=f>1?Y(t.slice(0,f),r):[],v=f<t.length?Y(t.slice(f),r):[];m=m.map((function(t){return new e.pointGeometry(q(t.x),t.y)})),v=v.map((function(t){return new e.pointGeometry(q(t.x),t.y)}));var g=u(m);0===g.length&&g.push(v[v.length-1]);var y,x=e.number(g[g.length-1].y,(0===v.length?m[0]:v[0]).y,p);return y=c?[new e.pointGeometry(0,x),new e.pointGeometry(0,0),new e.pointGeometry(1,0),new e.pointGeometry(1,x)]:[new e.pointGeometry(1,x),new e.pointGeometry(1,1),new e.pointGeometry(0,1),new e.pointGeometry(0,x)],g.push.apply(g,u(y)),0===v.length?g.push(m[0]):g.push.apply(g,u(v)),{polygon:g.map((function(t){return new e.MercatorCoordinate(t.x,t.y)})),unwrapped:!1}}(t,r);if(n)return n;var i=function(t,r){for(var n=!1,i=-1/0,a=0,o=0;o<t.length-1;o++)t[o].x>i&&(i=t[o].x,a=o);for(var s=0;s<t.length-1;s++){var l=(a+s)%(t.length-1),c=t[l],u=t[l+1];Math.abs(c.x-u.x)>.5&&(c.x<u.x?(c.x+=1,0===l&&(t[t.length-1].x+=1)):(u.x+=1,l+1===t.length-1&&(t[0].x+=1)),n=!0)}var h=e.mercatorXfromLng(r.center.lng);return n&&h<Math.abs(h-1)&&t.forEach((function(e){e.x-=1})),{polygon:t,unwrapped:n}}(Y(t,r).map((function(t){return new e.pointGeometry(q(t.x),t.y)})),r);return{polygon:i.polygon.map((function(t){return new e.MercatorCoordinate(t.x,t.y)})),unwrapped:i.unwrapped}}}],[{key:"createFromScreenPoints",value:function(r,n){var i,a;if(r instanceof e.pointGeometry||"number"==typeof r[0]){var o=e.pointGeometry.convert(r);i=[o],a=n.isPointAboveHorizon(o)}else{var s=e.pointGeometry.convert(r[0]),l=e.pointGeometry.convert(r[1]);i=[s,l],a=e.polygonizeBounds(s,l).every((function(e){return n.isPointAboveHorizon(e)}))}return new t(i,n.getCameraPoint(),a,n)}}]),t}();function Y(t,r){return e.resample(t,(function(e){var t=r.pointCoordinate3D(e);e.x=t.x,e.y=t.y}),1/256)}function q(e){return e<0?1+e%1:e%1}function $(e){return 100*e|0}function K(t,r,n,i,a){var o=function(n,i){if(n)return a(n);if(i){t.url&&i.tiles&&t.tiles&&delete t.tiles;var o=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(e){return e.id}))),o.tiles=r.canonicalizeTileset(o,t.url),a(null,o)}};return t.url?e.getJSON(r.transformRequest(r.normalizeSourceURL(t.url,null,n,i),e.ResourceType.Source),o):e.exported.frame((function(){return o(null,t)}))}var J,Q=function(){function t(r,n,i){f(this,t),this.bounds=e.LngLatBounds.convert(this.validateBounds(r)),this.minzoom=n||0,this.maxzoom=i||24}return p(t,[{key:"validateBounds",value:function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}},{key:"contains",value:function(t){var r=Math.pow(2,t.z),n=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*r),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*r),a=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*r),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*r);return t.x>=n&&t.x<a&&t.y>=i&&t.y<o}}]),t}(),ee=function(){function e(t,r,n){f(this,e),this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||r.destroy()}return p(e,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),te={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},re=function(){function e(t,r,n,i){f(this,e),this.length=r.length,this.attributes=n,this.itemSize=r.bytesPerElement,this.dynamicDraw=i,this.context=t;var a=t.gl;this.buffer=a.createBuffer(),t.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||r.destroy()}return p(e,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"enableAttributes",value:function(e,t){for(var r=0;r<this.attributes.length;r++){var n=t.attributes[this.attributes[r].name];void 0!==n&&e.enableVertexAttribArray(n)}}},{key:"setVertexAttribPointers",value:function(e,t,r){for(var n=0;n<this.attributes.length;n++){var i=this.attributes[n],a=t.attributes[i.name];void 0!==a&&e.vertexAttribPointer(a,i.components,e[te[i.type]],!1,this.itemSize,i.offset+this.itemSize*(r||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),ne=function(){function e(t){f(this,e),this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return p(e,[{key:"get",value:function(){return this.current}},{key:"set",value:function(e){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}]),e}(),ie=function(t){m(n,t);var r=v(n);function n(){return f(this,n),r.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),n}(ne),ae=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}]),r}(ne),oe=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}]),r}(ne),se=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),r}(ne),le=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}]),r}(ne),ce=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}]),r}(ne),ue=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}]),r}(ne),he=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}]),r}(ne),de=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}}]),r}(ne),fe=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}]),r}(ne),pe=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}}]),r}(ne),me=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}]),r}(ne),ve=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}}]),r}(ne),ge=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){var e=this.gl;return[e.ONE,e.ZERO]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}]),r}(ne),ye=function(t){m(n,t);var r=v(n);function n(){return f(this,n),r.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),n}(ne),xe=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}]),r}(ne),be=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}}]),r}(ne),_e=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}]),r}(ne),we=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}]),r}(ne),ke=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}]),r}(ne),Se=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}]),r}(ne),Ce=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),r}(ne),Ae=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}}]),r}(ne),Te=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),r}(ne),Ee=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}}]),r}(ne),Me=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}}]),r}(ne),Ie=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}]),r}(ne),Pe=function(e){m(r,e);var t=v(r);function r(e){var n;return f(this,r),(n=t.call(this,e)).vao=e.extVertexArrayObject,n}return p(r,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}]),r}(ne),Re=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}}]),r}(ne),ze=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}}]),r}(ne),Le=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}}]),r}(ne),De=function(e){m(r,e);var t=v(r);function r(e,n){var i;return f(this,r),(i=t.call(this,e)).context=e,i.parent=n,i}return p(r,[{key:"getDefault",value:function(){return null}}]),r}(ne),Oe=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}}]),r}(De),Fe=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"attachment",value:function(){return this.gl.DEPTH_ATTACHMENT}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),r}(De),je=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"attachment",value:function(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}]),r}(Fe),Ne=function(){function e(t,r,n,i){f(this,e),this.context=t,this.width=r,this.height=n;var a=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new Oe(t,a),i&&(this.depthAttachment=new Fe(t,a))}return p(e,[{key:"destroy",value:function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var r=this.depthAttachment.get();r&&e.deleteRenderbuffer(r)}e.deleteFramebuffer(this.framebuffer)}}]),e}(),Be=function(){function r(e){f(this,r),this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ie(this),this.clearDepth=new ae(this),this.clearStencil=new oe(this),this.colorMask=new se(this),this.depthMask=new le(this),this.stencilMask=new ce(this),this.stencilFunc=new ue(this),this.stencilOp=new he(this),this.stencilTest=new de(this),this.depthRange=new fe(this),this.depthTest=new pe(this),this.depthFunc=new me(this),this.blend=new ve(this),this.blendFunc=new ge(this),this.blendColor=new ye(this),this.blendEquation=new xe(this),this.cullFace=new be(this),this.cullFaceSide=new _e(this),this.frontFace=new we(this),this.program=new ke(this),this.activeTexture=new Se(this),this.viewport=new Ce(this),this.bindFramebuffer=new Ae(this),this.bindRenderbuffer=new Te(this),this.bindTexture=new Ee(this),this.bindVertexBuffer=new Me(this),this.bindElementBuffer=new Ie(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Pe(this),this.pixelStoreUnpack=new Re(this),this.pixelStoreUnpackPremultiplyAlpha=new ze(this),this.pixelStoreUnpackFlipY=new Le(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}return p(r,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(e,t){return new ee(this,e,t)}},{key:"createVertexBuffer",value:function(e,t,r){return new re(this,e,t,r)}},{key:"createRenderbuffer",value:function(e,t,r){var n=this.gl,i=n.createRenderbuffer();return this.bindRenderbuffer.set(i),n.renderbufferStorage(n.RENDERBUFFER,e,t,r),this.bindRenderbuffer.set(null),i}},{key:"createFramebuffer",value:function(e,t,r){return new Ne(this,e,t,r)}},{key:"clear",value:function(e){var t=e.color,r=e.depth,n=e.stencil,i=this.gl,a=0;t&&(a|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==r&&(a|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),void 0!==n&&(a|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),i.clear(a)}},{key:"setCullFace",value:function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}},{key:"setDepthMode",value:function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(r){t(r.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}},{key:"unbindVAO",value:function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}]),r}(),Ze=function(t){m(n,t);var r=v(n);function n(t,a,o,s){var l;return f(this,n),(l=r.call(this)).id=t,l.dispatcher=o,l.setEventedParent(s),l.type="raster",l.minzoom=0,l.maxzoom=22,l.roundZoom=!0,l.scheme="xyz",l.tileSize=512,l._loaded=!1,l._options=e.extend({type:"raster"},a),e.extend(i(l),e.pick(a,["url","scheme","tileSize"])),l}return p(n,[{key:"load",value:function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=K(this._options,this.map._requestManager,null,null,(function(r,n){t._tileJSONRequest=null,t._loaded=!0,r?t.fire(new e.ErrorEvent(r)):n&&(e.extend(t,n),n.bounds&&(t.tileBounds=new Q(n.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(n.tiles),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,r){var n=this,i=e.exported.devicePixelRatio>=2,a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),(function(i,a,o,s){return delete t.request,t.aborted?(t.state="unloaded",r(null)):i?(t.state="errored",r(i)):a?(n.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s}),t.setTexture(a,n.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(n.dispatcher),void r(null)):r(null)}))}},{key:"abortTile",value:function(e,t){e.request&&(e.request.cancel(),delete e.request),t()}},{key:"unloadTile",value:function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}},{key:"hasTransition",value:function(){return!1}}],[{key:"loadTileData",value:function(e,t,r){e.setTexture(t,r)}},{key:"unloadTileData",value:function(e,t){e.texture&&t.saveTileTexture(e.texture)}}]),n}(e.Evented);function Ue(t,r,n,i,a,o,s,l){var c=[t,n,a,r,i,o,1,1,1],u=[s,l,1],d=e.adjoint([],c),f=e.transformMat3(u,u,e.transpose(d,d)),p=h(f,3),m=p[0],v=p[1],g=p[2];return e.multiply$1(c,[m,0,0,0,v,0,0,0,g],c)}var Ve=function(t){m(n,t);var r=v(n);function n(e,t,i,a){var o;return f(this,n),(o=r.call(this)).id=e,o.dispatcher=i,o.coordinates=t.coordinates,o.type="image",o.minzoom=0,o.maxzoom=22,o.tileSize=512,o.tiles={},o._loaded=!1,o.setEventedParent(a),o.options=t,o._dirty=!1,o}return p(n,[{key:"load",value:function(t,r){var n=this;this._loaded=r||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(r,i){if(n._imageRequest=null,n._loaded=!0,r)n.fire(new e.ErrorEvent(r));else if(i){var a=e.window.HTMLImageElement;n.image=i instanceof a?e.exported.getImageData(i):i,n._dirty=!0,n.width=n.image.width,n.height=n.image.height,t&&(n.coordinates=t),n._finishLoading()}}))}},{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}},{key:"setCoordinates",value:function(t){this.coordinates=t,this._boundsArray=void 0;var r=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){var r,n=1/0,i=1/0,a=-1/0,o=-1/0,s=d(t);try{for(s.s();!(r=s.n()).done;){var l=r.value;n=Math.min(n,l.x),i=Math.min(i,l.y),a=Math.max(a,l.x),o=Math.max(o,l.y)}}catch(f){s.e(f)}finally{s.f()}var c=Math.max(a-n,o-i),u=Math.max(0,Math.floor(-Math.log(c)/Math.LN2)),h=Math.pow(2,u);return new e.CanonicalTileID(u,Math.floor((n+a)/2*h),Math.floor((i+o)/2*h))}(r),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"_clear",value:function(){this._boundsArray=void 0}},{key:"_prepareData",value:function(t){for(var r in this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}if(!this._boundsArray){var i=e.tileTransform(this.tileID,this.map.transform.projection),a=this.coordinates.map((function(t){var r=i.projection.project(t[0],t[1]);return e.getTilePoint(i,r)._round()})),o=h(a,4),s=o[0],l=o[1],c=o[2],u=o[3];this.perspectiveTransform=function(t,r,n,i,a,o,s,l,c,u){var h=Ue(0,0,t,0,0,r,t,r),d=Ue(n,i,a,o,s,l,c,u);return e.multiply$1(d,e.adjoint(h,h),d),[d[6]/d[8]*t/e.EXTENT,d[7]/d[8]*r/e.EXTENT]}(this.width,this.height,s.x,s.y,l.x,l.y,u.x,u.y,c.x,c.y);var d=this._boundsArray=new e.StructArrayLayout4i8;d.emplaceBack(s.x,s.y,0,0),d.emplaceBack(l.x,l.y,e.EXTENT,0),d.emplaceBack(u.x,u.y,0,e.EXTENT),d.emplaceBack(c.x,c.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(d,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}}},{key:"prepare",value:function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,r=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}}},{key:"loadTile",value:function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}},{key:"serialize",value:function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return!1}}]),n}(e.Evented),We={vector:function(t){m(n,t);var r=v(n);function n(t,a,o,s){var c;if(f(this,n),(c=r.call(this)).id=t,c.dispatcher=o,c.type="vector",c.minzoom=0,c.maxzoom=22,c.scheme="xyz",c.tileSize=512,c.reparseOverscaled=!0,c.isTileClipped=!0,c._loaded=!1,e.extend(i(c),e.pick(a,["url","scheme","tileSize","promoteId"])),c._options=e.extend({type:"vector"},a),c._collectResourceTiming=a.collectResourceTiming,512!==c.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return c.setEventedParent(s),c._tileWorkers={},c._deduped=new e.DedupedRequest,l(c)}return p(n,[{key:"load",value:function(t){var r=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));var n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,i=this.map._worldview;this._tileJSONRequest=K(this._options,this.map._requestManager,n,i,(function(a,o){r._tileJSONRequest=null,r._loaded=!0,a?(n&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ".concat(n)),i&&2!==i.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: ".concat(i)),r.fire(new e.ErrorEvent(a))):o&&(e.extend(r,o),o.bounds&&(r.tileBounds=new Q(o.bounds,r.minzoom,r.maxzoom)),e.postTurnstileEvent(o.tiles,r.map._requestManager._customAccessToken),r.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),r.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(a)}))}},{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"reload",value:function(){var e=this;this.cancelTileJSONRequest(),this.load((function(){var t,r=e.map.style._getSourceCaches(e.id),n=d(r);try{for(n.s();!(t=n.n()).done;)t.value.clearTiles()}catch(i){n.e(i)}finally{n.f()}}))}},{key:"setSourceProperty",value:function(e){e(),this.reload()}},{key:"setTiles",value:function(e){return this._options.tiles=e,this.reload(),this}},{key:"setUrl",value:function(e){return this.url=e,this._options.url=e,this.reload(),this}},{key:"onRemove",value:function(){this.cancelTileJSONRequest()}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"loadTile",value:function(t,r){var n=this,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(i,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(a.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=r:t.request=t.actor.send("reloadTile",a,s.bind(this));else if(t.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",a,s.bind(this),void 0,!0);else{var o=e.loadVectorTile.call({deduped:this._deduped},a,(function(e,r){e||!r?s.call(n,e):(a.data={cacheControl:r.cacheControl,expires:r.expires,rawData:r.rawData.slice(0)},t.actor&&t.actor.send("loadTile",a,s.bind(n),void 0,!0))}),!0);t.request={cancel:o}}function s(n,i){return delete t.request,t.aborted?r(null):n&&404!==n.status?r(n):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),r(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"unloadTile",value:function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"hasTransition",value:function(){return!1}},{key:"afterUpdate",value:function(){this._tileWorkers={}}},{key:"cancelTileJSONRequest",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}]),n}(e.Evented),raster:Ze,"raster-dem":function(t){m(n,t);var r=v(n);function n(t,i,a,o){var s;return f(this,n),(s=r.call(this,t,i,a,o)).type="raster-dem",s.maxzoom=22,s._options=e.extend({type:"raster-dem"},i),s.encoding=i.encoding||"mapbox",s}return p(n,[{key:"loadTile",value:function(t,r){var n=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,n){e&&(t.state="errored",r(e)),n&&(t.dem=n,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",r(null))}t.request=e.getImage(this.map._requestManager.transformRequest(n,e.ResourceType.Tile),function(n,a,o,s){if(delete t.request,t.aborted)t.state="unloaded",r(null);else if(n)t.state="errored",r(n);else if(a){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s});var l=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap&&(null==J&&(J=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),J),c=1-(a.width-e.prevPowerOfTwo(a.width))/2;c<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));var u=l?a:e.exported.getImageData(a,c),h={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:u,encoding:this.encoding,padding:c};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",h,i.bind(this),void 0,!0))}}.bind(this))}},{key:"_getNeighboringTiles",value:function(t){var r=t.canonical,n=Math.pow(2,r.z),i=(r.x-1+n)%n,a=0===r.x?t.wrap-1:t.wrap,o=(r.x+1+n)%n,s=r.x+1===n?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,a,r.z,i,r.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,o,r.y).key]={backfilled:!1},r.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,a,r.z,i,r.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,o,r.y-1).key]={backfilled:!1}),r.y+1<n&&(l[new e.OverscaledTileID(t.overscaledZ,a,r.z,i,r.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,o,r.y+1).key]={backfilled:!1}),l}},{key:"unloadTile",value:function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}}]),n}(Ze),geojson:function(t){m(n,t);var r=v(n);function n(t,i,a,o){var s;f(this,n),(s=r.call(this)).id=t,s.type="geojson",s.minzoom=0,s.maxzoom=18,s.tileSize=512,s.isTileClipped=!0,s.reparseOverscaled=!0,s._loaded=!1,s.actor=a.getActor(),s.setEventedParent(o),s._data=i.data,s._options=e.extend({},i),s._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(s.maxzoom=i.maxzoom),i.type&&(s.type=i.type),i.attribution&&(s.attribution=i.attribution),s.promoteId=i.promoteId;var l=e.EXTENT/s.tileSize;return s.workerOptions=e.extend({source:s.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*l,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*l,extent:e.EXTENT,maxZoom:s.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:s.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*l,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions),s}return p(n,[{key:"onAdd",value:function(e){this.map=e,this.setData(this._data)}},{key:"setData",value:function(e){return this._data=e,this._updateWorkerData(),this}},{key:"getClusterExpansionZoom",value:function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}},{key:"getClusterChildren",value:function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}},{key:"getClusterLeaves",value:function(e,t,r,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:r},n),this}},{key:"_updateWorkerData",value:function(){var t=this;if(this._pendingLoad)this._coalesce=!0;else{this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;var r=e.extend({},this.workerOptions),n=this._data;"string"==typeof n?(r.request=this.map._requestManager.transformRequest(e.exported.resolveURL(n),e.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(n),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),r,(function(r,n){if(t._loaded=!0,t._pendingLoad=null,r)t.fire(new e.ErrorEvent(r));else{var i={dataType:"source",sourceDataType:t._metadataFired?"content":"metadata"};t._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[t.id]&&(i.resourceTiming=n.resourceTiming[t.id]),t.fire(new e.Event("data",i)),t._metadataFired=!0}t._coalesce&&(t._updateWorkerData(),t._coalesce=!1)}))}}},{key:"loaded",value:function(){return this._loaded}},{key:"loadTile",value:function(t,r){var n=this,i=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(i,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(e,a){return delete t.request,t.unloadVectorData(),t.aborted?r(null):e?r(e):(t.loadVectorData(a,n.map.painter,"reloadTile"===i),r(null))}),void 0,"loadTile"===i)}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}},{key:"unloadTile",value:function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._pendingLoad&&this._pendingLoad.cancel()}},{key:"serialize",value:function(){return e.extend({},this._options,{type:this.type,data:this._data})}},{key:"hasTransition",value:function(){return!1}}]),n}(e.Evented),video:function(t){m(n,t);var r=v(n);function n(e,t,i,a){var o;return f(this,n),(o=r.call(this,e,t,i,a)).roundZoom=!0,o.type="video",o.options=t,o}return p(n,[{key:"load",value:function(){var t=this;this._loaded=!1;var r=this.options;this.urls=[];var n,i=d(r.urls);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.urls.push(this.map._requestManager.transformRequest(a,e.ResourceType.Source).url)}}catch(o){i.e(o)}finally{i.f()}e.getVideo(this.urls,(function(r,n){t._loaded=!0,r?t.fire(new e.ErrorEvent(r)):n&&(t.video=n,t.video.loop=!0,t.video.setAttribute("playsinline",""),t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(t){if(this.video){var r=this.video.seekable;t<r.start(0)||t>r.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(r.start(0)," and ").concat(r.end(0),"-second mark.")))):this.video.currentTime=t}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"prepare",value:function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,r=t.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}}},{key:"serialize",value:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}]),n}(Ve),image:Ve,canvas:function(t){m(n,t);var r=v(n);function n(t,i,a,o){var s;return f(this,n),s=r.call(this,t,i,a,o),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof e.window.HTMLCanvasElement||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "canvas"'))),s.options=i,s.animate=void 0===i.animate||i.animate,s}return p(n,[{key:"load",value:function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"prepare",value:function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var r=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(r,this.canvas,r.gl.RGBA,{premultiply:!0}),this._prepareData(r)}}},{key:"serialize",value:function(){return{type:"canvas",coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e++){var r=t[e];if(isNaN(r)||r<=0)return!0}return!1}}]),n}(Ve),custom:function(t){m(n,t);var r=v(n);function n(t,a,o,s){var l;return f(this,n),(l=r.call(this)).id=t,l.type="custom",l._dataType="raster",l._dispatcher=o,l._implementation=a,l.setEventedParent(s),l.scheme="xyz",l.minzoom=0,l.maxzoom=22,l.tileSize=512,l._loaded=!1,l.roundZoom=!0,l._implementation||l.fire(new e.ErrorEvent(new Error("Missing implementation for ".concat(l.id," custom source")))),l._implementation.loadTile||l.fire(new e.ErrorEvent(new Error("Missing loadTile implementation for ".concat(l.id," custom source")))),l._implementation.bounds&&(l.tileBounds=new Q(l._implementation.bounds,l.minzoom,l.maxzoom)),a.update=l._update.bind(i(l)),a.clearTiles=l._clearTiles.bind(i(l)),a.coveringTiles=l._coveringTiles.bind(i(l)),e.extend(i(l),e.pick(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"])),l}return p(n,[{key:"serialize",value:function(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}},{key:"load",value:function(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}},{key:"onRemove",value:function(e){this._implementation.onRemove&&this._implementation.onRemove(e)}},{key:"hasTile",value:function(e){if(this._implementation.hasTile){var t=e.canonical,r=t.x,n=t.y,i=t.z;return this._implementation.hasTile({x:r,y:n,z:i})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,r){var n=t.tileID.canonical,i=n.x,a=n.y,o=n.z,s=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:i,y:a,z:o},{signal:s.signal})).then(function(n){return delete t.request,t.aborted?(t.state="unloaded",r(null)):void 0===n?(t.state="errored",r(null)):null===n?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",r(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(n)?(this.loadTileData(t,n),t.state="loaded",void r(null)):(t.state="errored",r(new Error("Can't infer data type for ".concat(this.id,", only raster data supported at the moment"))))}.bind(this)).catch((function(e){20!==e.code&&(t.state="errored",r(e))})),t.request.cancel=function(){return s.abort()}}},{key:"loadTileData",value:function(e,t){Ze.loadTileData(e,t,this._map.painter)}},{key:"unloadTileData",value:function(e){Ze.unloadTileData(e,this._map.painter)}},{key:"unloadTile",value:function(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){var r=e.tileID.canonical,n=r.x,i=r.y,a=r.z;this._implementation.unloadTile({x:n,y:i,z:a})}t()}},{key:"abortTile",value:function(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}},{key:"hasTransition",value:function(){return!1}},{key:"_coveringTiles",value:function(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((function(e){return{x:e.canonical.x,y:e.canonical.y,z:e.canonical.z}}))}},{key:"_clearTiles",value:function(){this._map.style._clearSource(this.id)}},{key:"_update",value:function(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}]),n}(e.Evented)},Ge=function(t,r,n,i){var a=new We[r.type](t,r,n,i);if(a.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(a.id));return e.bindAll(["load","abort","unload","serialize","prepare"],a),a};function He(t,r){var n=e.identity([]);return e.scale(n,n,[.5*t.width,.5*-t.height,1]),e.translate(n,n,[1,-1,0]),e.multiply(n,n,t.calculateProjMatrix(r.toUnwrapped())),Float32Array.from(n)}function Xe(e,t,r,n,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=e.tilesIn(n,o,s);l.sort(qe);var c,u=[],h=d(l);try{for(h.s();!(c=h.n()).done;){var f=c.value;u.push({wrappedTileID:f.tile.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(t,r,e._state,f,i,a,He(e.transform,f.tile.tileID),s)})}}catch(v){h.e(v)}finally{h.f()}var p=function(e){var t,r={},n={},i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=a.queryResults,s=a.wrappedTileID,l=n[s]=n[s]||{};for(var c in o){var u,h=o[c],f=l[c]=l[c]||{},p=r[c]=r[c]||[],m=d(h);try{for(m.s();!(u=m.n()).done;){var g=u.value;f[g.featureIndex]||(f[g.featureIndex]=!0,p.push(g))}}catch(v){m.e(v)}finally{m.f()}}}}catch(v){i.e(v)}finally{i.f()}return r}(u);for(var m in p)p[m].forEach((function(t){var r=t.feature,n=r.layer;n&&"background"!==n.type&&"sky"!==n.type&&(r.source=n.source,n["source-layer"]&&(r.sourceLayer=n["source-layer"]),r.state=void 0!==r.id?e.getFeatureState(n["source-layer"],r.id):{})}));return p}function Ye(e,t){for(var r=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),n=[],i={},a=0;a<r.length;a++){var o=r[a],s=o.tileID.canonical.key;i[s]||(i[s]=!0,o.querySourceFeatures(n,t))}return n}function qe(e,t){var r=e.tileID,n=t.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}function $e(){return null!=Ea.workerClass?new Ea.workerClass:new e.window.Worker(Ea.workerUrl)}var Ke,Je="mapboxgl_preloaded_worker_pool",Qe=function(){function e(){f(this,e),this.active={}}return p(e,[{key:"acquire",value:function(t){if(!this.workers)for(this.workers=[];this.workers.length<e.workerCount;)this.workers.push(new $e);return this.active[t]=!0,this.workers.slice()}},{key:"release",value:function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[Je]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}]),e}();function et(){return Ke||(Ke=new Qe),Ke}function tt(t,r){var n={};for(var i in t)"ref"!==i&&(n[i]=t[i]);return e.refProperties.forEach((function(e){e in r&&(n[e]=r[e])})),n}function rt(e){e=e.slice();for(var t=Object.create(null),r=0;r<e.length;r++)t[e[r].id]=e[r];for(var n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=tt(e[n],t[e[n].ref]));return e}Qe.workerCount=2;var nt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function it(e,t,r){r.push({command:nt.addSource,args:[e,t[e]]})}function at(e,t,r){t.push({command:nt.removeSource,args:[e]}),r[e]=!0}function ot(e,t,r,n){at(e,r,n),it(e,t,r)}function st(e,r,n){var i;for(i in e[n])if(e[n].hasOwnProperty(i)&&"data"!==i&&!t(e[n][i],r[n][i]))return!1;for(i in r[n])if(r[n].hasOwnProperty(i)&&"data"!==i&&!t(e[n][i],r[n][i]))return!1;return!0}function lt(e,r,n,i,a,o){var s;for(s in r=r||{},e=e||{})e.hasOwnProperty(s)&&(t(e[s],r[s])||n.push({command:o,args:[i,s,r[s],a]}));for(s in r)r.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t(e[s],r[s])||n.push({command:o,args:[i,s,r[s],a]}))}function ct(e){return e.id}function ut(e,t){return e[t.id]=t,e}var ht=function(){function t(e,r){f(this,t),this.reset(e,r)}return p(t,[{key:"reset",value:function(e,t){this.points=e||[],this._distances=[0];for(var r=1;r<this.points.length;r++)this._distances[r]=this._distances[r-1]+this.points[r].dist(this.points[r-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var r=1,n=this._distances[r],i=t*this.paddedLength+this.padding;n<i&&r<this._distances.length;)n=this._distances[++r];var a=r-1,o=this._distances[a],s=n-o,l=s>0?(i-o)/s:0;return this.points[a].mult(1-l).add(this.points[r].mult(l))}}]),t}(),dt=function(){function e(t,r,n){f(this,e);var i=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(r/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=r,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/r,this.boxUid=0,this.circleUid=0}return p(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)}},{key:"insertCircle",value:function(e,t,r,n){this._forEachCell(t-n,r-n,t+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(r),this.circles.push(n)}},{key:"_insertBoxCell",value:function(e,t,r,n,i,a){this.boxCells[i].push(a)}},{key:"_insertCircleCell",value:function(e,t,r,n,i,a){this.circleCells[i].push(a)}},{key:"_query",value:function(e,t,r,n,i,a){if(r<0||e>this.width||n<0||t>this.height)return!i&&[];var o=[];if(e<=0&&t<=0&&this.width<=r&&this.height<=n){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var c=this.circles[3*l],u=this.circles[3*l+1],h=this.circles[3*l+2];o.push({key:this.circleKeys[l],x1:c-h,y1:u-h,x2:c+h,y2:u+h})}return a?o.filter(a):o}return this._forEachCell(e,t,r,n,this._queryCell,o,{hitTest:i,seenUids:{box:{},circle:{}}},a),i?o.length>0:o}},{key:"_queryCircle",value:function(e,t,r,n,i){var a=e-r,o=e+r,s=t-r,l=t+r;if(o<0||a>this.width||l<0||s>this.height)return!n&&[];var c=[];return this._forEachCell(a,s,o,l,this._queryCellCircle,c,{hitTest:n,circle:{x:e,y:t,radius:r},seenUids:{box:{},circle:{}}},i),n?c.length>0:c}},{key:"query",value:function(e,t,r,n,i){return this._query(e,t,r,n,!1,i)}},{key:"hitTest",value:function(e,t,r,n,i){return this._query(e,t,r,n,!0,i)}},{key:"hitTestCircle",value:function(e,t,r,n){return this._queryCircle(e,t,r,!0,n)}},{key:"_queryCell",value:function(e,t,r,n,i,a,o,s){var l=o.seenUids,c=this.boxCells[i];if(null!==c){var u,h=this.bboxes,f=d(c);try{for(f.s();!(u=f.n()).done;){var p=u.value;if(!l.box[p]){l.box[p]=!0;var m=4*p;if(e<=h[m+2]&&t<=h[m+3]&&r>=h[m+0]&&n>=h[m+1]&&(!s||s(this.boxKeys[p]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[p],x1:h[m],y1:h[m+1],x2:h[m+2],y2:h[m+3]})}}}}catch(C){f.e(C)}finally{f.f()}}var v=this.circleCells[i];if(null!==v){var g,y=this.circles,x=d(v);try{for(x.s();!(g=x.n()).done;){var b=g.value;if(!l.circle[b]){l.circle[b]=!0;var _=3*b;if(this._circleAndRectCollide(y[_],y[_+1],y[_+2],e,t,r,n)&&(!s||s(this.circleKeys[b]))){if(o.hitTest)return a.push(!0),!0;var w=y[_],k=y[_+1],S=y[_+2];a.push({key:this.circleKeys[b],x1:w-S,y1:k-S,x2:w+S,y2:k+S})}}}}catch(C){x.e(C)}finally{x.f()}}}},{key:"_queryCellCircle",value:function(e,t,r,n,i,a,o,s){var l=o.circle,c=o.seenUids,u=this.boxCells[i];if(null!==u){var h,f=this.bboxes,p=d(u);try{for(p.s();!(h=p.n()).done;){var m=h.value;if(!c.box[m]){c.box[m]=!0;var v=4*m;if(this._circleAndRectCollide(l.x,l.y,l.radius,f[v+0],f[v+1],f[v+2],f[v+3])&&(!s||s(this.boxKeys[m])))return a.push(!0),!0}}}catch(k){p.e(k)}finally{p.f()}}var g=this.circleCells[i];if(null!==g){var y,x=this.circles,b=d(g);try{for(b.s();!(y=b.n()).done;){var _=y.value;if(!c.circle[_]){c.circle[_]=!0;var w=3*_;if(this._circlesCollide(x[w],x[w+1],x[w+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[_])))return a.push(!0),!0}}}catch(k){b.e(k)}finally{b.f()}}}},{key:"_forEachCell",value:function(e,t,r,n,i,a,o,s){for(var l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(r),h=this._convertToYCellCoord(n),d=l;d<=u;d++)for(var f=c;f<=h;f++)if(i.call(this,e,t,r,n,this.xCellCount*f+d,a,o,s))return}},{key:"_convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"_convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}},{key:"_circlesCollide",value:function(e,t,r,n,i,a){var o=n-e,s=i-t,l=r+a;return l*l>o*o+s*s}},{key:"_circleAndRectCollide",value:function(e,t,r,n,i,a,o){var s=(a-n)/2,l=Math.abs(e-(n+s));if(l>s+r)return!1;var c=(o-i)/2,u=Math.abs(t-(i+c));if(u>c+r)return!1;if(l<=s||u<=c)return!0;var h=l-s,d=u-c;return h*h+d*d<=r*r}}]),e}(),ft=Math.tan(85*Math.PI/180);function pt(t,r,n,i,a,o,s){var l=e.create();if(n)if("globe"===o.name){var c=e.calculateGlobeLabelMatrix(a,r);e.multiply(l,l,c)}else{var u=P([],s);l[0]=u[0],l[1]=u[1],l[4]=u[2],l[5]=u[3],i||e.rotateZ(l,l,a.angle)}else e.multiply(l,a.labelPlaneMatrix,t);return l}function mt(e,t,r,n,i,a,o){var s=pt(e,t,r,n,i,a,o);return"globe"===a.name&&r||(s[2]=s[6]=s[10]=s[14]=0),s}function vt(t,r,n,i,a,o,s){if(n){if("globe"===o.name){var l=pt(t,r,n,i,a,o,s);return e.invert(l,l),e.multiply(l,t,l),l}var c=e.clone(t),u=e.identity([]);return u[0]=s[0],u[1]=s[1],u[4]=s[2],u[5]=s[3],e.multiply(c,c,u),i||e.rotateZ(c,c,-a.angle),c}return a.glCoordMatrix}function gt(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[t.x,t.y,n,1];n?e.transformMat4$1(i,i,r):It(i,i,r);var a=i[3];return{point:[i[0]/a,i[1]/a,i[2]/a],signedDistanceFromCamera:a}}function yt(t,r){var n=[t[0],t[1],t[2],1];e.transformMat4$1(n,n,r);var i=n[3];return{point:[n[0]/i,n[1]/i,n[2]/i],signedDistanceFromCamera:i}}function xt(e,t){return Math.min(.5+e/t*.5,1.5)}function bt(e,t){var r=e[0]/e[3],n=e[1]/e[3];return r>=-t[0]&&r<=t[0]&&n>=-t[1]&&n<=t[1]}function _t(t,r,n,i,a,o,s,l,c,u){var h=n.transform,d=i?t.textSizeData:t.iconSizeData,f=e.evaluateSizeForZoom(d,n.transform.zoom),p="globe"===h.projection.name,m=[256/n.width*2+1,256/n.height*2+1],v=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;v.clear();var g=null;p&&(g=i?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);for(var y=t.lineVertexArray,x=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,b=n.transform.width/n.transform.height,_=!1,w=0;w<x.length;w++){var k=x.get(w);if(k.writingMode!==e.WritingMode.vertical||_||0!==w&&x.get(w-1).writingMode===e.WritingMode.horizontal||(_=!0),!k.hidden&&k.writingMode!==e.WritingMode.vertical||_){_=!1;var S=new e.pointGeometry(k.tileAnchorX,k.tileAnchorY),C=c?c(S):[0,0,0],A=h.projection.projectTilePoint(S.x,S.y,u.canonical),T=[A.x+C[0],A.y+C[1],A.z+C[2]],E=[].concat(T,[1]);if(e.transformMat4$1(E,E,r),bt(E,m)){var M=xt(n.transform.cameraToCenterDistance,E[3]),I=e.evaluateSizeForFeature(d,f,k),P=s?I/M:I*M,R=gt(new e.pointGeometry(T[0],T[1]),a,T[2]);if(R.signedDistanceFromCamera<=0)Mt(k.numGlyphs,v);else{var z={},L=s?null:c,D=St(k,P,!1,l,r,a,o,t.glyphOffsetArray,y,v,g,R.point,S,z,b,L,h.projection,u,s);_=D.useVertical,L&&D.needsFlipping&&(z={}),(D.notEnoughRoom||_||D.needsFlipping&&St(k,P,!0,l,r,a,o,t.glyphOffsetArray,y,v,g,R.point,S,z,b,L,h.projection,u,s).notEnoughRoom)&&Mt(k.numGlyphs,v)}}else Mt(k.numGlyphs,v)}else Mt(k.numGlyphs,v)}i?(t.text.dynamicLayoutVertexBuffer.updateData(v),g&&t.text.globeExtVertexBuffer.updateData(g)):(t.icon.dynamicLayoutVertexBuffer.updateData(v),g&&t.icon.globeExtVertexBuffer.updateData(g))}function wt(e,t,r,n,i,a,o,s,l,c,u,h,d,f,p,m){var v=s.glyphStartIndex+s.numGlyphs,g=s.lineStartIndex,y=s.lineStartIndex+s.lineLength,x=t.getoffsetX(s.glyphStartIndex),b=t.getoffsetX(v-1),_=Tt(e*x,r,n,i,a,o,s.segment,g,y,l,c,u,h,d,!0,f,p,m);if(!_)return null;var w=Tt(e*b,r,n,i,a,o,s.segment,g,y,l,c,u,h,d,!0,f,p,m);return w?{first:_,last:w}:null}function kt(t,r,n,i){return t.writingMode===e.WritingMode.horizontal&&Math.abs(n.y-r.y)>Math.abs(n.x-r.x)*i?{useVertical:!0}:t.writingMode===e.WritingMode.vertical?r.y<n.y?{needsFlipping:!0}:null:0!==t.flipState&&function(e,t,r){var n=(t.x-e.x)*r;return 0===n||Math.abs((t.y-e.y)/n)>ft}(r,n,i)?1===t.flipState?{needsFlipping:!0}:null:r.x>n.x?{needsFlipping:!0}:null}function St(t,r,n,i,a,o,s,l,c,u,h,f,p,m,v,g,y,x,b){var _=r/24,w=t.lineOffsetX*_,k=t.lineOffsetY*_,S=[];if(t.numGlyphs>1){var C=t.glyphStartIndex+t.numGlyphs,A=t.lineStartIndex,T=t.lineStartIndex+t.lineLength,E=wt(_,l,w,k,n,f,p,t,c,o,m,g,!1,y,x,b);if(!E)return{notEnoughRoom:!0};var M=yt(E.first.point,s).point,I=yt(E.last.point,s).point,P=new e.pointGeometry(M[0],M[1]),R=new e.pointGeometry(I[0],I[1]);if(i&&!n){var z=kt(t,P,R,v);if(t.flipState=z&&z.needsFlipping?1:2,z)return z}S=[E.first];for(var L=t.glyphStartIndex+1;L<C-1;L++){var D=Tt(_*l.getoffsetX(L),w,k,n,f,p,t.segment,A,T,c,o,m,g,!1,!1,y,x,b);if(!D)return{notEnoughRoom:!0};S.push(D)}S.push(E.last)}else{if(i&&!n){var O=gt(p,a).point,F=t.lineStartIndex+t.segment+1,j=new e.pointGeometry(c.getx(F),c.gety(F)),N=gt(j,a),B=N.signedDistanceFromCamera>0?N.point:At(p,j,O,1,a,void 0,y,x.canonical),Z=kt(t,new e.pointGeometry(O[0],O[1]),new e.pointGeometry(B[0],B[1]),v);if(t.flipState=Z&&Z.needsFlipping?1:2,Z)return Z}var U=Tt(_*l.getoffsetX(t.glyphStartIndex),w,k,n,f,p,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,c,o,m,g,!1,!1,y,x,b);if(!U)return{notEnoughRoom:!0};S=[U]}if(h){var V,W=d(S);try{for(W.s();!(V=W.n()).done;){var G=V.value;e.updateGlobeVertexNormal(h,u.length+0,G.up[0],G.up[1],G.up[2]),e.updateGlobeVertexNormal(h,u.length+1,G.up[0],G.up[1],G.up[2]),e.updateGlobeVertexNormal(h,u.length+2,G.up[0],G.up[1],G.up[2]),e.updateGlobeVertexNormal(h,u.length+3,G.up[0],G.up[1],G.up[2]),e.addDynamicAttributes(u,G.point[0],G.point[1],G.point[2],G.angle)}}catch(q){W.e(q)}finally{W.f()}}else{var H,X=d(S);try{for(X.s();!(H=X.n()).done;){var Y=H.value;e.addDynamicAttributes(u,Y.point[0],Y.point[1],Y.point[2],Y.angle)}}catch(q){X.e(q)}finally{X.f()}}return{}}function Ct(t,r,n,i,a){var o=i.projectTilePoint(t.x,t.y,r);if(!a)return gt(o,n,o.z);var s=a(t);return gt(new e.pointGeometry(o.x+s[0],o.y+s[1]),n,o.z+s[2])}function At(t,r,n,i,a,o,s,l){var c=Ct(t.add(t.sub(r)._unit()),l,a,s,o).point,u=e.sub([],n,c);return e.scaleAndAdd([],n,u,i/e.length(u))}function Tt(t,r,n,i,a,o,s,l,c,u,h,d,f,p,m,v,g,y){var x=i?t-r:t+r,b=x>0?1:-1,_=0;i&&(b*=-1,_=Math.PI),b<0&&(_+=Math.PI);for(var w=b>0?l+s:l+s+1,k=a,S=a,C=0,A=0,T=Math.abs(x),E=[],M=[],I=o,P=function(){var t=w-b;return 0===C?o:new e.pointGeometry(u.getx(t),u.gety(t))},R=function(){var e=P();return At(e,I||e,S,T-C+1,h,f,v,g.canonical)};C+A<=T;){if((w+=b)<l||w>=c)return null;if(S=k,E.push(k),p&&M.push(I||P()),void 0===(k=d[w])){var z=Ct(I=new e.pointGeometry(u.getx(w),u.gety(w)),g.canonical,h,v,f);k=z.signedDistanceFromCamera>0?d[w]=z.point:R()}else I=null;C+=A,A=e.distance(S,k)}I=I||new e.pointGeometry(u.getx(w),u.gety(w));var L=P();m&&f&&(d[w]=k=void 0===d[w]?k:R(),A=e.distance(S,k));var D=(T-C)/A,O=I.sub(L).mult(D)._add(L),F=e.sub([],k,S),j=e.scaleAndAdd([],S,F,D),N=[0,0,1],B=F[0],Z=F[1];if(y&&(0!==(N=v.upVector(g.canonical,O.x,O.y))[0]||0!==N[1]||1!==N[2])){var U=[1,0,0],V=[0,1,0];U[0]=N[2],U[1]=0,U[2]=-N[0],e.cross(V,N,U),e.normalize(U,U),e.normalize(V,V),B=e.dot(F,U),Z=e.dot(F,V)}if(n){var W=e.cross([],N,F);e.normalize(W,W),e.scaleAndAdd(j,j,W,n*b)}var G=_+Math.atan2(Z,B);return E.push(j),p&&M.push(O),{point:j,angle:G,path:E,tilePath:M,up:N}}var Et=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Mt(e,t){for(var r=0;r<e;r++){var n=t.length;t.resize(n+4),t.float32.set(Et,4*n)}}function It(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e[3]=r[3]*n+r[7]*i+r[15],e}var Pt=100,Rt=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new dt(e.width+200,e.height+200,25),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new dt(e.width+200,e.height+200,25);f(this,t),this.transform=e,this.grid=n,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Pt,this.screenBottomBoundary=e.height+Pt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=r}return p(t,[{key:"placeCollisionBox",value:function(e,t,r,n,i,a,o,s){var l=r.projectedAnchorX,c=r.projectedAnchorY,u=r.projectedAnchorZ,h=r.elevation,d=r.tileID;if(h&&d){var f=e.getProjection().upVector(d.canonical,r.tileAnchorX,r.tileAnchorY),p=e.getProjection().upVectorScale(d.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=f[0]*h*p,c+=f[1]*h*p,u+=f[2]*h*p}var m=this.projectAndGetPerspectiveRatio(o,[l,c,u],r.tileID,"globe"===e.projection.name||!!h||this.transform.pitch>0,e.getProjection()),v=a*m.perspectiveRatio,g=(r.x1*t+n.x-r.padding)*v+m.point.x,y=(r.y1*t+n.y-r.padding)*v+m.point.y,x=(r.x2*t+n.x+r.padding)*v+m.point.x,b=(r.y2*t+n.y+r.padding)*v+m.point.y,_=m.perspectiveRatio<=.55||m.occluded;return!this.isInsideGrid(g,y,x,b)||!i&&this.grid.hitTest(g,y,x,b,s)||_?{box:[],offscreen:!1,occluded:m.occluded}:{box:[g,y,x,b],offscreen:this.isOffscreen(g,y,x,b),occluded:!1}}},{key:"placeCollisionCircles",value:function(t,r,n,i,a,o,s,l,c,u,h,f,p,m,v){var g=[],y=this.transform.elevation,x=y?y.getAtTileOffsetFunc(v,this.transform.center.lat,this.transform.worldSize,t.getProjection()):function(e){return[0,0,0]},b=new e.pointGeometry(n.tileAnchorX,n.tileAnchorY),_=t.getProjection().projectTilePoint(n.tileAnchorX,n.tileAnchorY,v.canonical),w=x(b),k=[_.x+w[0],_.y+w[1],_.z+w[2]],S="globe"===t.projection.name,C=this.projectAndGetPerspectiveRatio(s,[k[0],k[1],k[2]],v,S||!!y||this.transform.pitch>0,t.getProjection()),A=C.perspectiveRatio,T=(h?o/A:o*A)/e.ONE_EM,E=gt(new e.pointGeometry(k[0],k[1]),l,k[2]).point,M=C.signedDistanceFromCamera>0?wt(T,a,n.lineOffsetX*T,n.lineOffsetY*T,!1,E,b,n,i,l,{},y&&!h?x:null,h&&!!y,t.getProjection(),v,h):null,I=!1,P=!1,R=!0;if(M&&!C.occluded){for(var z=.5*p*A+m,L=new e.pointGeometry(-100,-100),D=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),O=new ht,F=M.first,j=M.last,N=[],B=F.path.length-1;B>=1;B--)N.push(F.path[B]);for(var Z=1;Z<j.path.length;Z++)N.push(j.path[Z]);var U=2.5*z;if(c){var V=N.map(y&&!S?function(e,t){var r=x(t<F.path.length-1?F.tilePath[F.path.length-1-t]:j.tilePath[t-F.path.length+2]);return e[2]=r[2],yt(e,c)}:function(e){return yt(e,c)});N=V.some((function(e){return e.signedDistanceFromCamera<=0}))?[]:V.map((function(e){return e.point}))}var W=[];if(N.length>0){for(var G=N.map((function(t){return new e.pointGeometry(t[0],t[1])})),H=1/0,X=-1/0,Y=1/0,q=-1/0,$=0;$<G.length;$++)H=Math.min(H,G[$].x),Y=Math.min(Y,G[$].y),X=Math.max(X,G[$].x),q=Math.max(q,G[$].y);W=H>=L.x&&X<=D.x&&Y>=L.y&&q<=D.y?[G]:X<L.x||H>D.x||q<L.y||Y>D.y?[]:e.clipLine([G],L.x,L.y,D.x,D.y)}var K,J=d(W);try{for(J.s();!(K=J.n()).done;){var Q=K.value;O.reset(Q,.25*z);var ee=0;ee=O.length<=.5*z?1:Math.ceil(O.paddedLength/U)+1;for(var te=0;te<ee;te++){var re=te/Math.max(ee-1,1),ne=O.lerp(re),ie=ne.x+Pt,ae=ne.y+Pt;g.push(ie,ae,z,0);var oe=ie-z,se=ae-z,le=ie+z,ce=ae+z;if(R=R&&this.isOffscreen(oe,se,le,ce),P=P||this.isInsideGrid(oe,se,le,ce),!r&&this.grid.hitTestCircle(ie,ae,z,f)&&(I=!0,!u))return{circles:[],offscreen:!1,collisionDetected:I,occluded:!1}}}}catch(ue){J.e(ue)}finally{J.f()}}return{circles:!u&&I||!P?[]:g,offscreen:R,collisionDetected:I,occluded:C.occluded}}},{key:"queryRenderedSymbols",value:function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var r,n=[],i=1/0,a=1/0,o=-1/0,s=-1/0,l=d(t);try{for(l.s();!(r=l.n()).done;){var c=r.value,u=new e.pointGeometry(c.x+Pt,c.y+Pt);i=Math.min(i,u.x),a=Math.min(a,u.y),o=Math.max(o,u.x),s=Math.max(s,u.y),n.push(u)}}catch(b){l.e(b)}finally{l.f()}var h,f=this.grid.query(i,a,o,s).concat(this.ignoredGrid.query(i,a,o,s)),p={},m={},v=d(f);try{for(v.s();!(h=v.n()).done;){var g=h.value,y=g.key;if(void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]={}),!p[y.bucketInstanceId][y.featureIndex]){var x=[new e.pointGeometry(g.x1,g.y1),new e.pointGeometry(g.x2,g.y1),new e.pointGeometry(g.x2,g.y2),new e.pointGeometry(g.x1,g.y2)];e.polygonIntersectsPolygon(n,x)&&(p[y.bucketInstanceId][y.featureIndex]=!0,void 0===m[y.bucketInstanceId]&&(m[y.bucketInstanceId]=[]),m[y.bucketInstanceId].push(y.featureIndex))}}}catch(b){v.e(b)}finally{v.f()}return m}},{key:"insertCollisionBox",value:function(e,t,r,n,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:n,collisionGroupID:i},e[0],e[1],e[2],e[3])}},{key:"insertCollisionCircles",value:function(e,t,r,n,i){for(var a=t?this.ignoredGrid:this.grid,o={bucketInstanceId:r,featureIndex:n,collisionGroupID:i},s=0;s<e.length;s+=4)a.insertCircle(o,e[s],e[s+1],e[s+2])}},{key:"projectAndGetPerspectiveRatio",value:function(t,r,n,i,a){var o=[r[0],r[1],r[2],1],s=!1;if(r[2]||this.transform.pitch>0){e.transformMat4$1(o,o,t);var l="globe"===a.name;this.fogState&&n&&!l&&(s=function(t,r,n,i,a,o){var s=o.calculateFogTileMatrix(a),l=[r,n,i];return e.transformMat4(l,l,s),B(t,l,o.pitch,o._fov)}(this.fogState,r[0],r[1],r[2],n.toUnwrapped(),this.transform)>.9)}else It(o,o,t);return{point:new e.pointGeometry((o[0]/o[3]+1)/2*this.transform.width+Pt,(-o[1]/o[3]+1)/2*this.transform.height+Pt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(a)/o[3]*.5,1.5),signedDistanceFromCamera:o[3],occluded:i&&o[2]>o[3]||s}}},{key:"isOffscreen",value:function(e,t,r,n){return r<Pt||e>=this.screenRightBoundary||n<Pt||t>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(e,t,r,n){return r>=0&&e<this.gridRightBoundary&&n>=0&&t<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}]),t}();function zt(t,r,n){var i=r.createTileMatrix(t,t.worldSize,n.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,i)}function Lt(e,t,r){if(t.projection.name===r.projection.name)return e.projMatrix;var n=r.clone();return n.setProjection(t.projection),zt(n,t.getProjection(),e)}function Dt(e,t,r){return t.name===r.projection.name?e.projMatrix:zt(r,t,e)}var Ot=function(){function e(t,r,n,i){f(this,e),this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?r:-r))):i&&n?1:0,this.placed=n}return p(e,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}]),e}(),Ft=function(){function e(t,r,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];f(this,e),this.text=new Ot(t?t.text:null,r,n,a),this.icon=new Ot(t?t.icon:null,r,i,a),this.clipped=o}return p(e,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}]),e}(),jt=p((function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];f(this,e),this.text=t,this.icon=r,this.skipFade=n,this.clipped=i})),Nt=p((function t(){f(this,t),this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]})),Bt=p((function e(t,r,n,i,a){f(this,e),this.bucketInstanceId=t,this.featureIndex=r,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=a})),Zt=function(){function e(t){f(this,e),this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}return p(e,[{key:"get",value:function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]}}]),e}();function Ut(t,r,n,i,a){var o=e.getAnchorAlignment(t),s=-(o.horizontalAlign-.5)*r,l=-(o.verticalAlign-.5)*n,c=e.evaluateVariableOffset(t,i);return new e.pointGeometry(s+c[0]*a,l+c[1]*a)}function Vt(t,r,n,i,a){var o=new e.pointGeometry(t,r);return n&&o._rotate(i?a:-a),o}var Wt=function(){function t(e,r,n,i,a){f(this,t),this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new Rt(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=r,this.retainedQueryData={},this.collisionGroups=new Zt(n),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}return p(t,[{key:"getBucketParts",value:function(t,r,n,i){var a=n.getBucket(r),o=n.latestFeatureIndex;if(a&&o&&r.id===a.layerIds[0]){var s=a.layers[0].layout,l=n.collisionBoxArray,c=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),u=n.tileSize/e.EXTENT,h=n.tileID.toUnwrapped();this.transform.setProjection(a.projection);var f,p,m,v=(f=n.tileID,p=a.getProjection(),m=this.transform,p.name===this.projection?m.calculateProjMatrix(f.toUnwrapped()):zt(m,p,f)),g="map"===s.get("text-pitch-alignment"),y="map"===s.get("text-rotation-alignment");r.compileFilter();var x=r.dynamicFilter(),b=r.dynamicFilterNeedsFeature(),_=this.transform.calculatePixelsToTileUnitsMatrix(n),w=mt(v,n.tileID.canonical,g,y,this.transform,a.getProjection(),_),k=null;if(g){var S=vt(v,n.tileID.canonical,g,y,this.transform,a.getProjection(),_);k=e.multiply([],this.transform.labelPlaneMatrix,S)}var C=null;x&&n.latestFeatureIndex&&(C={unwrappedTileID:h,dynamicFilter:x,dynamicFilterNeedsFeature:b,featureIndex:n.latestFeatureIndex}),this.retainedQueryData[a.bucketInstanceId]=new Bt(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,n.tileID);var A={bucket:a,layout:s,posMatrix:v,textLabelPlaneMatrix:w,labelToScreenMatrix:k,clippingData:C,scale:c,textPixelRatio:u,holdingForFade:n.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(a.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(i){var T,E=d(a.sortKeyRanges);try{for(E.s();!(T=E.n()).done;){var M=T.value,I=M.sortKey,P=M.symbolInstanceStart,R=M.symbolInstanceEnd;t.push({sortKey:I,symbolInstanceStart:P,symbolInstanceEnd:R,parameters:A})}}catch(z){E.e(z)}finally{E.f()}}else t.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:A})}}},{key:"attemptAnchorPlacement",value:function(e,t,r,n,i,a,o,s,l,c,u,h,d,f,p,m,v,g){var y,x=[h.textOffset0,h.textOffset1],b=Ut(e,r,n,x,i),_=this.collisionIndex.placeCollisionBox(f,i,t,Vt(b.x,b.y,a,o,this.transform.angle),u,s,l,c.predicate);if(m){var w=f.getSymbolInstanceIconSize(g,this.transform.zoom,h.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(f,w,m,Vt(b.x,b.y,a,o,this.transform.angle),u,s,l,c.predicate).box.length)return}if(_.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(y=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:x,width:r,height:n,anchor:e,textScale:i,prevAnchor:y},this.markUsedJustification(f,e,h,p),f.allowVerticalPlacement&&(this.markUsedOrientation(f,p,h),this.placedOrientations[h.crossTileID]=p),{shift:b,placedGlyphBoxes:_}}},{key:"placeLayerBucketPart",value:function(t,r,n,i){var a=this,o=t.parameters,s=o.bucket,l=o.layout,c=o.posMatrix,u=o.textLabelPlaneMatrix,h=o.labelToScreenMatrix,f=o.clippingData,p=o.textPixelRatio,m=o.holdingForFade,v=o.collisionBoxArray,g=o.partiallyEvaluatedTextSize,y=o.partiallyEvaluatedIconSize,x=o.collisionGroup,b=l.get("text-optional"),_=l.get("icon-optional"),w=l.get("text-allow-overlap"),k=l.get("icon-allow-overlap"),S="map"===l.get("text-rotation-alignment"),C="map"===l.get("text-pitch-alignment"),A="none"!==l.get("icon-text-fit"),T="viewport-y"===l.get("symbol-z-order");this.transform.setProjection(s.projection);var E=w&&(k||!s.hasIconData()||_),M=k&&(w||!s.hasTextData()||b);!s.collisionArrays&&v&&s.deserializeCollisionBoxes(v),n&&i&&s.updateCollisionDebugBuffers(this.transform.zoom,v);var I=function(t,i,o){if(f){var v={zoom:a.transform.zoom,pitch:a.transform.pitch},T=null;if(f.dynamicFilterNeedsFeature){var I=a.retainedQueryData[s.bucketInstanceId];T=f.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:I.bucketIndex,sourceLayerIndex:I.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,f.dynamicFilter)(v,T,a.retainedQueryData[s.bucketInstanceId].tileID.canonical,new e.pointGeometry(t.tileAnchorX,t.tileAnchorY),a.transform.calculateDistanceTileData(f.unwrappedTileID)))return a.placements[t.crossTileID]=new jt(!1,!1,!1,!0),void(r[t.crossTileID]=!0)}if(!r[t.crossTileID])if(m)a.placements[t.crossTileID]=new jt(!1,!1,!1);else{var P=!1,R=!1,z=!0,L=!1,D=!1,O=null,F={box:null,offscreen:null,occluded:null},j={box:null,offscreen:null,occluded:null},N=null,B=null,Z=null,U=0,V=0,W=0;o.textFeatureIndex?U=o.textFeatureIndex:t.useRuntimeCollisionCircles&&(U=t.featureIndex),o.verticalTextFeatureIndex&&(V=o.verticalTextFeatureIndex);var G=function(e){e.tileID=a.retainedQueryData[s.bucketInstanceId].tileID,(a.transform.elevation||e.elevation)&&(e.elevation=a.transform.elevation?a.transform.elevation.getAtTileOffset(a.retainedQueryData[s.bucketInstanceId].tileID,e.tileAnchorX,e.tileAnchorY):0)},H=o.textBox;if(H){G(H);var X=function(r){var n=e.WritingMode.horizontal;if(s.allowVerticalPlacement&&!r&&a.prevPlacement){var i=a.prevPlacement.placedOrientations[t.crossTileID];i&&(a.placedOrientations[t.crossTileID]=i,n=i,a.markUsedOrientation(s,n,t))}return n},Y=function(r,n){if(s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&o.verticalTextBox){var i,a=d(s.writingModes);try{for(a.s();!(i=a.n()).done&&(i.value===e.WritingMode.vertical?(F=n(),j=F):F=r(),!(F&&F.box&&F.box.length)););}catch(l){a.e(l)}finally{a.f()}}else F=r()};if(l.get("text-variable-anchor")){var q=l.get("text-variable-anchor");if(a.prevPlacement&&a.prevPlacement.variableOffsets[t.crossTileID]){var $=a.prevPlacement.variableOffsets[t.crossTileID];q.indexOf($.anchor)>0&&(q=q.filter((function(e){return e!==$.anchor})),q.unshift($.anchor))}var K=function(e,r,n){var o=s.getSymbolInstanceTextSize(g,t,a.transform.zoom,i),l=(e.x2-e.x1)*o+2*e.padding,u=(e.y2-e.y1)*o+2*e.padding,h=A&&!k?r:null;h&&G(h);for(var d={box:[],offscreen:!1,occluded:!1},f=w?2*q.length:q.length,m=0;m<f;++m){var v=a.attemptAnchorPlacement(q[m%q.length],e,l,u,o,S,C,p,c,x,m>=q.length,t,i,s,n,h,g,y);if(v&&(d=v.placedGlyphBoxes)&&d.box&&d.box.length){P=!0,O=v.shift;break}}return d};Y((function(){return K(H,o.iconBox,e.WritingMode.horizontal)}),(function(){var r=o.verticalTextBox;return r&&G(r),s.allowVerticalPlacement&&!(F&&F.box&&F.box.length)&&t.numVerticalGlyphVertices>0&&r?K(r,o.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),F&&(P=F.box,z=F.offscreen,L=F.occluded);var J=X(F&&F.box);if(!P&&a.prevPlacement){var Q=a.prevPlacement.variableOffsets[t.crossTileID];Q&&(a.variableOffsets[t.crossTileID]=Q,a.markUsedJustification(s,Q.anchor,t,J))}}else{var ee=function(r,n){var o=s.getSymbolInstanceTextSize(g,t,a.transform.zoom,i),l=a.collisionIndex.placeCollisionBox(s,o,r,new e.pointGeometry(0,0),w,p,c,x.predicate);return l&&l.box&&l.box.length&&(a.markUsedOrientation(s,n,t),a.placedOrientations[t.crossTileID]=n),l};Y((function(){return ee(H,e.WritingMode.horizontal)}),(function(){var r=o.verticalTextBox;return s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&r?(G(r),ee(r,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),X(F&&F.box&&F.box.length)}}if(P=(N=F)&&N.box&&N.box.length>0,z=N&&N.offscreen,L=N&&N.occluded,t.useRuntimeCollisionCircles){var te=s.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),re=e.evaluateSizeForFeature(s.textSizeData,g,te),ne=l.get("text-padding");B=a.collisionIndex.placeCollisionCircles(s,w,te,s.lineVertexArray,s.glyphOffsetArray,re,c,u,h,n,C,x.predicate,t.collisionCircleDiameter*re/e.ONE_EM,ne,a.retainedQueryData[s.bucketInstanceId].tileID),P=w||B.circles.length>0&&!B.collisionDetected,z=z&&B.offscreen,L=B.occluded}if(o.iconFeatureIndex&&(W=o.iconFeatureIndex),o.iconBox){var ie=function(r){G(r);var n=A&&O?Vt(O.x,O.y,S,C,a.transform.angle):new e.pointGeometry(0,0),i=s.getSymbolInstanceIconSize(y,a.transform.zoom,t.placedIconSymbolIndex);return a.collisionIndex.placeCollisionBox(s,i,r,n,k,p,c,x.predicate)};R=j&&j.box&&j.box.length&&o.verticalIconBox?(Z=ie(o.verticalIconBox)).box.length>0:(Z=ie(o.iconBox)).box.length>0,z=z&&Z.offscreen,D=Z.occluded}var ae=b||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,oe=_||0===t.numIconVertices;if(ae||oe?oe?ae||(R=R&&P):P=R&&P:R=P=R&&P,P&&N&&N.box&&a.collisionIndex.insertCollisionBox(N.box,l.get("text-ignore-placement"),s.bucketInstanceId,j&&j.box&&V?V:U,x.ID),R&&Z&&a.collisionIndex.insertCollisionBox(Z.box,l.get("icon-ignore-placement"),s.bucketInstanceId,W,x.ID),B&&(P&&a.collisionIndex.insertCollisionCircles(B.circles,l.get("text-ignore-placement"),s.bucketInstanceId,U,x.ID),n)){var se=s.bucketInstanceId,le=a.collisionCircleArrays[se];void 0===le&&(le=a.collisionCircleArrays[se]=new Nt);for(var ce=0;ce<B.circles.length;ce+=4)le.circles.push(B.circles[ce+0]),le.circles.push(B.circles[ce+1]),le.circles.push(B.circles[ce+2]),le.circles.push(B.collisionDetected?1:0)}var ue="globe"!==s.projection.name;E=E&&(ue||!L),M=M&&(ue||!D),a.placements[t.crossTileID]=new jt(P||E,R||M,z||s.justReloaded),r[t.crossTileID]=!0}};if(T)for(var P=s.getSortedSymbolIndexes(this.transform.angle),R=P.length-1;R>=0;--R){var z=P[R];I(s.symbolInstances.get(z),z,s.collisionArrays[z])}else for(var L=t.symbolInstanceStart;L<t.symbolInstanceEnd;L++)I(s.symbolInstances.get(L),L,s.collisionArrays[L]);if(n&&s.bucketInstanceId in this.collisionCircleArrays){var D=this.collisionCircleArrays[s.bucketInstanceId];e.invert(D.invProjMatrix,c),D.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}},{key:"markUsedJustification",value:function(t,r,n,i){var a;a=i===e.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(r)];for(var o=0,s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];o<s.length;o++){var l=s[o];l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=a>=0&&l!==a?0:n.crossTileID)}}},{key:"markUsedOrientation",value:function(t,r,n){var i,a=r===e.WritingMode.horizontal||r===e.WritingMode.horizontalOnly?r:0,o=r===e.WritingMode.vertical?r:0,s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex].filter((function(e){return-1!==e})),l=d(s);try{for(l.s();!(i=l.n()).done;){var c=i.value;t.text.placedSymbolArray.get(c).placedOrientation=a}}catch(u){l.e(u)}finally{l.f()}-1!==n.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=o)}},{key:"commit",value:function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,r=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var n=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},a=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],c=i[s];c?(this.opacities[s]=new Ft(c,n,l.text,l.icon,null,l.clipped),r=r||l.text!==c.text.placed||l.icon!==c.icon.placed):(this.opacities[s]=new Ft(null,n,l.text,l.icon,l.skipFade,l.clipped),r=r||l.text||l.icon)}for(var u in i){var h=i[u];if(!this.opacities[u]){var d=new Ft(h,n,!1,!1);d.isHidden()||(this.opacities[u]=d,r=r||h.text.placed||h.icon.placed)}}for(var f in a)this.variableOffsets[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.variableOffsets[f]=a[f]);for(var p in o)this.placedOrientations[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.placedOrientations[p]=o[p]);r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}},{key:"updateLayerOpacities",value:function(e,t){var r,n={},i=d(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.getBucket(e);o&&a.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,n,a.collisionBoxArray)}}catch(s){i.e(s)}finally{i.f()}}},{key:"updateBucketOpacities",value:function(t,r,n){var i=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var a=t.layers[0].layout,o=!!t.layers[0].dynamicFilter(),s=new Ft(null,0,!1,!1,!0),l=a.get("text-allow-overlap"),c=a.get("icon-allow-overlap"),u=a.get("text-variable-anchor"),h="map"===a.get("text-rotation-alignment"),d="map"===a.get("text-pitch-alignment"),f="none"!==a.get("icon-text-fit"),p=new Ft(null,0,l&&(c||!t.hasIconData()||a.get("icon-optional")),c&&(l||!t.hasTextData()||a.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(n);for(var m=function(e,t,r){for(var n=0;n<t/4;n++)e.opacityVertexArray.emplaceBack(r)},v=0,g=function(n){var a=t.symbolInstances.get(n),l=a.numHorizontalGlyphVertices,c=a.numVerticalGlyphVertices,g=a.crossTileID,y=i.opacities[g];r[g]?y=s:y||(y=p,i.opacities[g]=y),r[g]=!0;var x=l>0||c>0,b=a.numIconVertices>0,_=i.placedOrientations[a.crossTileID],w=_===e.WritingMode.vertical,k=_===e.WritingMode.horizontal||_===e.WritingMode.horizontalOnly;if(!x&&!b||y.isHidden()||v++,x){var S=Qt(y.text);m(t.text,l,w?er:S),m(t.text,c,k?er:S);var C=y.text.isHidden();[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=C||w?1:0)})),a.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden=C||k?1:0);var A=i.variableOffsets[a.crossTileID];A&&i.markUsedJustification(t,A.anchor,a,_);var T=i.placedOrientations[a.crossTileID];T&&(i.markUsedJustification(t,"left",a,T),i.markUsedOrientation(t,T,a))}if(b){var E=Qt(y.icon);a.placedIconSymbolIndex>=0&&(m(t.icon,a.numIconVertices,w?er:E),t.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden=y.icon.isHidden()),a.verticalPlacedIconSymbolIndex>=0&&(m(t.icon,a.numVerticalIconVertices,k?er:E),t.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var M=t.collisionArrays[n];if(M){var I=new e.pointGeometry(0,0),P=!0;if(M.textBox||M.verticalTextBox){if(u){var R=i.variableOffsets[g];R?(I=Ut(R.anchor,R.width,R.height,R.textOffset,R.textScale),h&&I._rotate(d?i.transform.angle:-i.transform.angle)):P=!1}o&&(P=!y.clipped),M.textBox&&Gt(t.textCollisionBox.collisionVertexArray,y.text.placed,!P||w,I.x,I.y),M.verticalTextBox&&Gt(t.textCollisionBox.collisionVertexArray,y.text.placed,!P||k,I.x,I.y)}var z=P&&Boolean(!k&&M.verticalIconBox);M.iconBox&&Gt(t.iconCollisionBox.collisionVertexArray,y.icon.placed,z,f?I.x:0,f?I.y:0),M.verticalIconBox&&Gt(t.iconCollisionBox.collisionVertexArray,y.icon.placed,!z,f?I.x:0,f?I.y:0)}}},y=0;y<t.symbolInstances.length;y++)g(y);if(t.fullyClipped=0===v,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var x=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=x.invProjMatrix,t.placementViewportMatrix=x.viewportMatrix,t.collisionCircleArray=x.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(e){return Math.max(0,(this.transform.zoom-e)/1.5)}},{key:"hasTransitions",value:function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(e,t){var r=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*r>e}},{key:"setStale",value:function(){this.stale=!0}}]),t}();function Gt(e,t,r,n,i){e.emplaceBack(t?1:0,r?1:0,n||0,i||0),e.emplaceBack(t?1:0,r?1:0,n||0,i||0),e.emplaceBack(t?1:0,r?1:0,n||0,i||0),e.emplaceBack(t?1:0,r?1:0,n||0,i||0)}var Ht=Math.pow(2,25),Xt=Math.pow(2,24),Yt=Math.pow(2,17),qt=Math.pow(2,16),$t=Math.pow(2,9),Kt=Math.pow(2,8),Jt=Math.pow(2,1);function Qt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,r=Math.floor(127*e.opacity);return r*Ht+t*Xt+r*Yt+t*qt+r*$t+t*Kt+r*Jt+t}var er=0,tr=function(){function e(t){f(this,e),this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}return p(e,[{key:"continuePlacement",value:function(e,t,r,n,i){for(var a=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(a,n,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<a.length;){var o=a[this._currentPartIndex];if(t.placeLayerBucketPart(o,this._seenCrossTileIDs,r,0===o.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}]),e}(),rr=function(){function t(e,r,n,i,a,o,s,l){f(this,t),this.placement=new Wt(e,a,o,s,l),this._currentPlacementIndex=r.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1}return p(t,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(t,r,n){for(var i=this,a=e.exported.now(),o=function(){var t=e.exported.now()-a;return!i._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=r[t[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new tr(s)),this._inProgressLayer.continuePlacement(n[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(e){return this.placement.commit(e),this.placement}}]),t}(),nr=512/e.EXTENT/2,ir=function(){function t(e,r,n){f(this,t),this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var i=0;i<r.length;i++){var a=r.get(i),o=a.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:a.crossTileID,coord:this.getScaledCoordinates(a,e)})}}return p(t,[{key:"getScaledCoordinates",value:function(t,r){var n=nr/Math.pow(2,r.canonical.z-this.tileID.canonical.z);return{x:Math.floor((r.canonical.x*e.EXTENT+t.tileAnchorX)*n),y:Math.floor((r.canonical.y*e.EXTENT+t.tileAnchorY)*n)}}},{key:"findMatches",value:function(e,t,r){for(var n=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var a=e.get(i);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o){var s,l=this.getScaledCoordinates(a,t),c=d(o);try{for(c.s();!(s=c.n()).done;){var u=s.value;if(Math.abs(u.coord.x-l.x)<=n&&Math.abs(u.coord.y-l.y)<=n&&!r[u.crossTileID]){r[u.crossTileID]=!0,a.crossTileID=u.crossTileID;break}}}catch(h){c.e(h)}finally{c.f()}}}}}}]),t}(),ar=function(){function e(){f(this,e),this.maxCrossTileID=0}return p(e,[{key:"generate",value:function(){return++this.maxCrossTileID}}]),e}(),or=function(){function e(){f(this,e),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return p(e,[{key:"handleWrapJump",value:function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var r in this.indexes){var n=this.indexes[r],i={};for(var a in n){var o=n[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),i[o.tileID.key]=o}this.indexes[r]=i}this.lng=e}},{key:"addBucket",value:function(e,t,r){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var n=0;n<t.symbolInstances.length;n++)t.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>e.overscaledZ)for(var s in o){var l=o[s];l.tileID.isChildOf(e)&&l.findMatches(t.symbolInstances,e,i)}else{var c=o[e.scaledTo(Number(a)).key];c&&c.findMatches(t.symbolInstances,e,i)}}for(var u=0;u<t.symbolInstances.length;u++){var h=t.symbolInstances.get(u);h.crossTileID||(h.crossTileID=r.generate(),i[h.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new ir(e,t.symbolInstances,t.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(e,t){for(var r in t.indexedSymbolInstances){var n,i=d(t.indexedSymbolInstances[r]);try{for(i.s();!(n=i.n()).done;){var a=n.value;delete this.usedCrossTileIDs[e][a.crossTileID]}}catch(o){i.e(o)}finally{i.f()}}}},{key:"removeStaleBuckets",value:function(e){var t=!1;for(var r in this.indexes){var n=this.indexes[r];for(var i in n)e[n[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[i]),delete n[i],t=!0)}return t}}]),e}(),sr=function(){function e(){f(this,e),this.layerIndexes={},this.crossTileIDs=new ar,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return p(e,[{key:"addLayer",value:function(e,t,r,n){var i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new or);var a=!1,o={};"globe"!==n.name&&i.handleWrapJump(r);var s,l=d(t);try{for(l.s();!(s=l.n()).done;){var c=s.value,u=c.getBucket(e);u&&e.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(c.tileID,u,this.crossTileIDs)&&(a=!0),o[u.bucketInstanceId]=!0)}}catch(h){l.e(h)}finally{l.f()}return i.removeStaleBuckets(o)&&(a=!0),a}},{key:"pruneUnusedLayers",value:function(e){var t={};for(var r in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[r]||delete this.layerIndexes[r]}}]),e}(),lr=function(t,r){return e.emitValidationErrors(t,r&&r.filter((function(e){return"source.canvas"!==e.identifier})))},cr=e.pick(nt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),ur=e.pick(nt,["setCenter","setZoom","setBearing","setPitch"]),hr={version:8,layers:[],sources:{}},dr={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0},fr=function(r){m(a,r);var n=v(a);function a(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,a),(r=n.call(this)).map=t,r.dispatcher=new G(et(),i(r)),r.imageManager=new z,r.imageManager.setEventedParent(i(r)),r.glyphManager=new e.GlyphManager(t._requestManager,o.localFontFamily?e.LocalGlyphMode.all:o.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,o.localFontFamily||o.localIdeographFontFamily),r.crossTileSymbolIndex=new sr,r._layers={},r._num3DLayers=0,r._numSymbolLayers=0,r._numCircleLayers=0,r._serializedLayers={},r._sourceCaches={},r._otherSourceCaches={},r._symbolSourceCaches={},r.zoomHistory=new e.ZoomHistory,r._loaded=!1,r._availableImages=[],r._order=[],r._drapedFirstOrder=[],r._markersNeedUpdate=!1,r._resetUpdates(),r.dispatcher.broadcast("setReferrer",e.getReferrer());var s=i(r);return r._rtlTextPluginCallback=a.registerForPluginStateChange((function(t){s.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,r){if(e.triggerPluginCompletionEvent(t),r&&r.every((function(e){return e})))for(var n in s._sourceCaches){var i=s._sourceCaches[n],a=i.getSource().type;"vector"!==a&&"geojson"!==a||i.reload()}}))})),r.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=r.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(var n in r._layers){var i=r._layers[n];i.source===t.id&&r._validateLayer(i)}}})),r}return p(a,[{key:"loadURL",value:function(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,n.accessToken);var a=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(a,(function(t,n){r._request=null,t?r.fire(new e.ErrorEvent(t)):n&&r._load(n,i)}))}},{key:"loadJSON",value:function(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((function(){r._request=null,r._load(t,!1!==n.validate)}))}},{key:"loadEmpty",value:function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(hr,!1)}},{key:"_updateLayerCount",value:function(e,t){var r=t?1:-1;e.is3D()&&(this._num3DLayers+=r),"circle"===e.type&&(this._numCircleLayers+=r),"symbol"===e.type&&(this._numSymbolLayers+=r)}},{key:"_load",value:function(t,r){if(!r||!lr(this,e.validateStyle(t))){for(var n in this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection(),t.sources)this.addSource(n,t.sources[n],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);var i=rt(this.stylesheet.layers);this._order=i.map((function(e){return e.id})),this._layers={},this._serializedLayers={};var a,o=d(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;(s=e.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize(),this._updateLayerCount(s,!0)}}catch(l){o.e(l)}finally{o.f()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new O(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}}},{key:"terrainSetForDrapingOnly",value:function(){return!!this.terrain&&0===this.terrain.drapeRenderMode}},{key:"setProjection",value:function(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}},{key:"applyProjectionUpdate",value:function(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}},{key:"_updateMapProjection",value:function(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}},{key:"_loadSprite",value:function(t){var r=this;this._spriteRequest=function(t,r,n){var i,a,o,s=e.exported.devicePixelRatio>1?"@2x":"",l=e.getJSON(r.transformRequest(r.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(function(e,t){l=null,o||(o=e,i=t,u())})),c=e.getImage(r.transformRequest(r.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(function(e,t){c=null,o||(o=e,a=t,u())}));function u(){if(o)n(o);else if(i&&a){var t=e.exported.getImageData(a),r={};for(var s in i){var l=i[s],c=l.width,u=l.height,h=l.x,d=l.y,f=l.sdf,p=l.pixelRatio,m=l.stretchX,v=l.stretchY,g=l.content,y=new e.RGBAImage({width:c,height:u});e.RGBAImage.copy(t,y,{x:h,y:d},{x:0,y:0},{width:c,height:u}),r[s]={data:y,pixelRatio:p,sdf:f,stretchX:m,stretchY:v,content:g}}n(null,r)}}return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,(function(t,n){if(r._spriteRequest=null,t)r.fire(new e.ErrorEvent(t));else if(n)for(var i in n)r.imageManager.addImage(i,n[i]);r.imageManager.setLoaded(!0),r._availableImages=r.imageManager.listImages(),r.dispatcher.broadcast("setImages",r._availableImages),r.dispatcher.broadcast("spriteLoaded",!0),r.fire(new e.Event("data",{dataType:"style"}))}))}},{key:"_validateLayer",value:function(t){var r=this.getSource(t.source);if(r){var n=t.sourceLayer;n&&("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire(new e.ErrorEvent(new Error('Source layer "'.concat(n,'" does not exist on source "').concat(r.id,'" as specified by style layer "').concat(t.id,'"'))))}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeLayers",value:function(e){var t,r=[],n=d(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=this._layers[i];"custom"!==a.type&&r.push(a.serialize())}}catch(o){n.e(o)}finally{n.f()}return r}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(var e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}},{key:"order",get:function(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}},{key:"isLayerDraped",value:function(e){return!!this.terrain&&dr[e.type]}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading")}},{key:"update",value:function(t){if(this._loaded){var r=this._changed;if(this._changed){var n=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var a in(n.length||i.length)&&this._updateWorkerLayers(n,i),this._updatedSources){var o=this._updatedSources[a];"reload"===o?this._reloadSource(a):"clear"===o&&this._clearSource(a)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}var l={};for(var c in this._sourceCaches){var u=this._sourceCaches[c];l[c]=u.used,u.used=!1}var h,f=d(this._order);try{for(f.s();!(h=f.n()).done;){var p=h.value,m=this._layers[p];if(m.recalculate(t,this._availableImages),!m.isHidden(t.zoom)){var v=this._getLayerSourceCache(m);v&&(v.used=!0)}var g=this.map.painter;if(g){var y=m.getProgramIds();if(!y)continue;var x,b=m.getProgramConfiguration(t.zoom),_=d(y);try{for(_.s();!(x=_.n()).done;){var w=x.value;g.useProgram(w,b)}}catch(C){_.e(C)}finally{_.f()}}}}catch(C){f.e(C)}finally{f.f()}for(var k in l){var S=this._sourceCaches[k];l[k]!==S.used&&S.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:S.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),r&&this.fire(new e.Event("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}},{key:"_updateWorkerLayers",value:function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}},{key:"setState",value:function(r){var n=this;if(this._checkLoaded(),lr(this,e.validateStyle(r)))return!1;(r=e.clone$1(r)).layers=rt(r.layers);var i=function(e,r){if(!e)return[{command:nt.setStyle,args:[r]}];var n=[];try{if(!t(e.version,r.version))return[{command:nt.setStyle,args:[r]}];t(e.center,r.center)||n.push({command:nt.setCenter,args:[r.center]}),t(e.zoom,r.zoom)||n.push({command:nt.setZoom,args:[r.zoom]}),t(e.bearing,r.bearing)||n.push({command:nt.setBearing,args:[r.bearing]}),t(e.pitch,r.pitch)||n.push({command:nt.setPitch,args:[r.pitch]}),t(e.sprite,r.sprite)||n.push({command:nt.setSprite,args:[r.sprite]}),t(e.glyphs,r.glyphs)||n.push({command:nt.setGlyphs,args:[r.glyphs]}),t(e.transition,r.transition)||n.push({command:nt.setTransition,args:[r.transition]}),t(e.light,r.light)||n.push({command:nt.setLight,args:[r.light]}),t(e.fog,r.fog)||n.push({command:nt.setFog,args:[r.fog]}),t(e.projection,r.projection)||n.push({command:nt.setProjection,args:[r.projection]});var i={},a=[];!function(e,r,n,i){var a;for(a in r=r||{},e=e||{})e.hasOwnProperty(a)&&(r.hasOwnProperty(a)||at(a,n,i));for(a in r)r.hasOwnProperty(a)&&(e.hasOwnProperty(a)?t(e[a],r[a])||("geojson"===e[a].type&&"geojson"===r[a].type&&st(e,r,a)?n.push({command:nt.setGeoJSONSourceData,args:[a,r[a].data]}):ot(a,r,n,i)):it(a,r,n))}(e.sources,r.sources,a,i);var o=[];e.layers&&e.layers.forEach((function(e){e.source&&i[e.source]?n.push({command:nt.removeLayer,args:[e.id]}):o.push(e)}));var s=e.terrain;s&&i[s.source]&&(n.push({command:nt.setTerrain,args:[void 0]}),s=void 0),n=n.concat(a),t(s,r.terrain)||n.push({command:nt.setTerrain,args:[r.terrain]}),function(e,r,n){r=r||[];var i,a,o,s,l,c,u,h=(e=e||[]).map(ct),d=r.map(ct),f=e.reduce(ut,{}),p=r.reduce(ut,{}),m=h.slice(),v=Object.create(null);for(i=0,a=0;i<h.length;i++)o=h[i],p.hasOwnProperty(o)?a++:(n.push({command:nt.removeLayer,args:[o]}),m.splice(m.indexOf(o,a),1));for(i=0,a=0;i<d.length;i++)o=d[d.length-1-i],m[m.length-1-i]!==o&&(f.hasOwnProperty(o)?(n.push({command:nt.removeLayer,args:[o]}),m.splice(m.lastIndexOf(o,m.length-a),1)):a++,c=m[m.length-i],n.push({command:nt.addLayer,args:[p[o],c]}),m.splice(m.length-i,0,o),v[o]=!0);for(i=0;i<d.length;i++)if(s=f[o=d[i]],l=p[o],!v[o]&&!t(s,l))if(t(s.source,l.source)&&t(s["source-layer"],l["source-layer"])&&t(s.type,l.type)){for(u in lt(s.layout,l.layout,n,o,null,nt.setLayoutProperty),lt(s.paint,l.paint,n,o,null,nt.setPaintProperty),t(s.filter,l.filter)||n.push({command:nt.setFilter,args:[o,l.filter]}),t(s.minzoom,l.minzoom)&&t(s.maxzoom,l.maxzoom)||n.push({command:nt.setLayerZoomRange,args:[o,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?lt(s[u],l[u],n,o,u.slice(6),nt.setPaintProperty):t(s[u],l[u])||n.push({command:nt.setLayerProperty,args:[o,u,l[u]]}));for(u in l)l.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?lt(s[u],l[u],n,o,u.slice(6),nt.setPaintProperty):t(s[u],l[u])||n.push({command:nt.setLayerProperty,args:[o,u,l[u]]}))}else n.push({command:nt.removeLayer,args:[o]}),c=m[m.lastIndexOf(o)+1],n.push({command:nt.addLayer,args:[l,c]})}(o,r.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:nt.setStyle,args:[r]}]}return n}(this.serialize(),r).filter((function(e){return!(e.command in ur)}));if(0===i.length)return!1;var a=i.filter((function(e){return!(e.command in cr)}));if(a.length>0)throw new Error("Unimplemented: ".concat(a.map((function(e){return e.command})).join(", "),"."));return i.forEach((function(e){"setTransition"!==e.command&&"setProjection"!==e.command&&n[e.command].apply(n,e.args)})),this.stylesheet=r,this._updateMapProjection(),!0}},{key:"addImage",value:function(t,r){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,r),this._afterImageUpdated(t),this)}},{key:"updateImage",value:function(e,t){this.imageManager.updateImage(e,t)}},{key:"getImage",value:function(e){return this.imageManager.getImage(e)}},{key:"removeImage",value:function(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}},{key:"_afterImageUpdated",value:function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this._availableImages.slice()}},{key:"addSource",value:function(t,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!r.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(r).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(e.validateSource,"sources.".concat(t),r,null,i))){this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);var a=Ge(t,r,this.dispatcher,this);a.setEventedParent(this,(function(){return{isSourceLoaded:n._isSourceCacheLoaded(t),source:a.serialize(),sourceId:t}}));var o=function(r){var i=(r?"symbol:":"other:")+t,o=n._sourceCaches[i]=new e.SourceCache(i,a,r);(r?n._symbolSourceCaches:n._otherSourceCaches)[t]=o,o.style=n,o.onAdd(n.map)};o(!1),"vector"!==r.type&&"geojson"!==r.type||o(!0),a.onAdd&&a.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(t){this._checkLoaded();var r=this.getSource(t);if(!r)throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while layer "').concat(n,'" is using it.'))));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while terrain is using it.'))));var i,a=this._getSourceCaches(t),o=d(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;delete this._sourceCaches[s.id],delete this._updatedSources[s.id],s.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:s.getSource().id})),s.setEventedParent(null),s.clearTiles()}}catch(l){o.e(l)}finally{o.f()}return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],r.setEventedParent(null),r.onRemove&&r.onRemove(this.map),this._changed=!0,this}},{key:"setGeoJSONSourceData",value:function(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}},{key:"getSource",value:function(e){var t=this._getSourceCache(e);return t&&t.getSource()}},{key:"_getSources",value:function(){var e=[];for(var t in this._otherSourceCaches){var r=this._getSourceCache(t);r&&e.push(r.getSource())}return e}},{key:"addLayer",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=t.id;if(this.getLayer(i))this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(i,'" already exists on this map'))));else{var a;if("custom"===t.type){if(lr(this,e.validateCustomStyleLayer(t)))return;a=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateLayer,"layers.".concat(i),t,{arrayIndex:-1},n))return;a=e.createStyleLayer(t),this._validateLayer(a),a.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[a.id]=a.serialize(),this._updateLayerCount(a,!0)}var o=r?this._order.indexOf(r):this._order.length;if(r&&-1===o)this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(r,'" does not exist on this map.'))));else{this._order.splice(o,0,i),this._layerOrderChanged=!0,this._layers[i]=a;var s=this._getLayerSourceCache(a);if(this._removedLayers[i]&&a.source&&s&&"custom"!==a.type){var l=this._removedLayers[i];delete this._removedLayers[i],l.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",s.pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map),this._updateDrapeFirstLayers()}}}},{key:"moveLayer",value:function(t,r){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==r){var n=this._order.indexOf(t);this._order.splice(n,1);var i=r?this._order.indexOf(r):this._order.length;r&&-1===i?this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(r,'" does not exist on this map.')))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(t){this._checkLoaded();var r=this._layers[t];if(r){r.setEventedParent(null),this._updateLayerCount(r,!1);var n=this._order.indexOf(t);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=r,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],r.onRemove&&r.onRemove(this.map),this._updateDrapeFirstLayers()}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be removed."))))}},{key:"getLayer",value:function(e){return this._layers[e]}},{key:"hasLayer",value:function(e){return e in this._layers}},{key:"hasLayerType",value:function(e){for(var t in this._layers)if(this._layers[t].type===e)return!0;return!1}},{key:"setLayerZoomRange",value:function(t,r,n){this._checkLoaded();var i=this.getLayer(t);i?i.minzoom===r&&i.maxzoom===n||(null!=r&&(i.minzoom=r),null!=n&&(i.maxzoom=n),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot have zoom extent."))))}},{key:"setFilter",value:function(r,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var a=this.getLayer(r);if(a){if(!t(a.filter,n))return null==n?(a.filter=void 0,void this._updateLayer(a)):void(this._validate(e.validateFilter,"layers.".concat(a.id,".filter"),n,{layerType:a.type},i)||(a.filter=e.clone$1(n),this._updateLayer(a)))}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(r,"' does not exist in the map's style and cannot be filtered."))))}},{key:"getFilter",value:function(t){var r=this.getLayer(t);return r&&e.clone$1(r.filter)}},{key:"setLayoutProperty",value:function(r,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var o=this.getLayer(r);o?t(o.getLayoutProperty(n),i)||(o.setLayoutProperty(n,i,a),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(r,"' does not exist in the map's style and cannot be styled."))))}},{key:"getLayoutProperty",value:function(t,r){var n=this.getLayer(t);if(n)return n.getLayoutProperty(r);this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style."))))}},{key:"setPaintProperty",value:function(r,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var o=this.getLayer(r);o?t(o.getPaintProperty(n),i)||(o.setPaintProperty(n,i,a)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new e.ErrorEvent(new Error("The layer '".concat(r,"' does not exist in the map's style and cannot be styled."))))}},{key:"getPaintProperty",value:function(e,t){var r=this.getLayer(e);return r&&r.getPaintProperty(t)}},{key:"setFeatureState",value:function(t,r){this._checkLoaded();var n=t.source,i=t.sourceLayer,a=this.getSource(n);if(a){var o=a.type;if("geojson"===o&&i)this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));else if("vector"!==o||i){void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));var s,l=this._getSourceCaches(n),c=d(l);try{for(c.s();!(s=c.n()).done;)s.value.setFeatureState(i,t.id,r)}catch(u){c.e(u)}finally{c.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(t,r){this._checkLoaded();var n=t.source,i=this.getSource(n);if(i){var a=i.type,o="vector"===a?t.sourceLayer:void 0;if("vector"!==a||o)if(r&&"string"!=typeof t.id&&"number"!=typeof t.id)this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));else{var s,l=this._getSourceCaches(n),c=d(l);try{for(c.s();!(s=c.n()).done;)s.value.removeFeatureState(o,t.id,r)}catch(u){c.e(u)}finally{c.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(t){this._checkLoaded();var r=t.source,n=t.sourceLayer,i=this.getSource(r);if(i){if("vector"!==i.type||n)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(r)[0].getFeatureState(n,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){var t={};for(var r in this._sourceCaches){var n=this._sourceCaches[r].getSource();t[n.id]||(t[n.id]=n.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))}},{key:"_updateLayer",value:function(e){this._updatedLayers[e.id]=!0;var t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}},{key:"_flattenAndSortRenderedFeatures",value:function(e){for(var t=this,r=function(e){return"fill-extrusion"===t._layers[e].type},n={},i=[],a=this._order.length-1;a>=0;a--){var o=this._order[a];if(r(o)){n[o]=a;var s,l=d(e);try{for(l.s();!(s=l.n()).done;){var c=s.value[o];if(c){var u,h=d(c);try{for(h.s();!(u=h.n()).done;){var f=u.value;i.push(f)}}catch(C){h.e(C)}finally{h.f()}}}}catch(C){l.e(C)}finally{l.f()}}}i.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var p=[],m=this._order.length-1;m>=0;m--){var v=this._order[m];if(r(v))for(var g=i.length-1;g>=0;g--){var y=i[g].feature;if(n[y.layer.id]<m)break;p.push(y),i.pop()}else{var x,b=d(e);try{for(b.s();!(x=b.n()).done;){var _=x.value[v];if(_){var w,k=d(_);try{for(k.s();!(w=k.n()).done;){var S=w.value;p.push(S.feature)}}catch(C){k.e(C)}finally{k.f()}}}}catch(C){b.e(C)}finally{b.f()}}}return p}},{key:"queryRenderedFeatures",value:function(t,r,n){var i=this;r&&r.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",r.filter,null,r);var a={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];var o,s=d(r.layers);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=this._layers[l];if(!c)return this.fire(new e.ErrorEvent(new Error("The layer '".concat(l,"' does not exist in the map's style and cannot be queried for features.")))),[];a[c.source]=!0}}catch(v){s.e(v)}finally{s.f()}}var u=[];r.availableImages=this._availableImages;var h=r&&r.layers?r.layers.some((function(e){var t=i.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),f=X.createFromScreenPoints(t,n);for(var p in this._sourceCaches){var m=this._sourceCaches[p].getSource().id;r.layers&&!a[m]||u.push(Xe(this._sourceCaches[p],this._layers,this._serializedLayers,f,r,n,h,!!this.map._showQueryGeometry))}return this.placement&&u.push(function(e,t,r,n,i,a,o){var s,l={},c=a.queryRenderedSymbols(n),u=[],h=d(Object.keys(c).map(Number));try{for(h.s();!(s=h.n()).done;){var f=s.value;u.push(o[f])}}catch(v){h.e(v)}finally{h.f()}u.sort(qe);for(var p=function(){var r=g[m],n=r.featureIndex.lookupSymbolFeatures(c[r.bucketInstanceId],t,r.bucketIndex,r.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(var a in n){var o=l[a]=l[a]||[],s=n[a];s.sort((function(e,t){var n=r.featureSortOrder;if(n){var i=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));var u,h=d(s);try{for(h.s();!(u=h.n()).done;){var f=u.value;o.push(f)}}catch(v){h.e(v)}finally{h.f()}}},m=0,g=u;m<g.length;m++)p();var y=function(t){l[t].forEach((function(n){var i=n.feature,a=r(e[t]).getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a}))};for(var x in l)y(x);return l}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),f.screenGeometry,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)}},{key:"querySourceFeatures",value:function(t,r){r&&r.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",r.filter,null,r);var n,i=this._getSourceCaches(t),a=[],o=d(i);try{for(o.s();!(n=o.n()).done;){var s=n.value;a=a.concat(Ye(s,r))}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"addSourceType",value:function(e,t,r){return a.getSourceType(e)?r(new Error('A source type called "'.concat(e,'" already exists.'))):(a.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var n=this.light.getLight(),i=!1;for(var a in e)if(!t(e[a],n[a])){i=!0;break}if(i){var o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,r),this.light.updateTransitions(o)}}},{key:"getTerrain",value:function(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}},{key:"setTerrainForDraping",value:function(){this.setTerrain({source:"",exaggeration:0},0)}},{key:"setTerrain",value:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!r)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===n){if("object"==typeof r.source){var i="terrain-dem-src";this.addSource(i,r.source),r=e.clone$1(r),r=e.extend(r,{source:i})}if(this._validate(e.validateTerrain,"terrain",r))return}if(!this.terrain||this.terrain&&n!==this.terrain.drapeRenderMode)this._createTerrain(r,n);else{for(var a=this.terrain,o=a.get(),s=0,l=Object.keys(e.spec.terrain);s<l.length;s++){var c=l[s];!r.hasOwnProperty(c)&&e.spec.terrain[c].default&&(r[c]=e.spec.terrain[c].default)}for(var u in r)if(!t(r[u],o[u])){a.set(r),this.stylesheet.terrain=r;var h=this._setTransitionParameters({duration:0});a.updateTransitions(h);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}},{key:"_createFog",value:function(e){var t=this.fog=new W(e,this.map.transform);this.stylesheet.fog=e;var r=this._setTransitionParameters({duration:0});t.updateTransitions(r)}},{key:"_updateMarkersOpacity",value:function(){var e=this;0!==this.map._markers.length&&this.map._requestDomTask((function(){var t,r=d(e.map._markers);try{for(r.s();!(t=r.n()).done;)t.value._evaluateOpacity()}catch(n){r.e(n)}finally{r.f()}}))}},{key:"getFog",value:function(){return this.fog?this.fog.get():null}},{key:"setFog",value:function(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){var r=this.fog,n=r.get();for(var i in 0===Object.keys(e).length&&r.set(e),e)if(!t(e[i],n[i])){r.set(e),this.stylesheet.fog=e;var a=this._setTransitionParameters({duration:0});r.updateTransitions(a);break}}else this._createFog(e);this._markersNeedUpdate=!0}},{key:"_setTransitionParameters",value:function(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}},{key:"_updateDrapeFirstLayers",value:function(){var e,t,r=this;if(this.map._optimizeForTerrain&&this.terrain){var n=this._order.filter((function(e){return r.isLayerDraped(r._layers[e])})),i=this._order.filter((function(e){return!r.isLayerDraped(r._layers[e])}));this._drapedFirstOrder=[],(e=this._drapedFirstOrder).push.apply(e,u(n)),(t=this._drapedFirstOrder).push.apply(t,u(i))}}},{key:"_createTerrain",value:function(e,t){var r=this.terrain=new N(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();var n=this._setTransitionParameters({duration:0});r.updateTransitions(n)}},{key:"_force3DLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}},{key:"_forceSymbolLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}},{key:"_validate",value:function(t,r,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!a||!1!==a.validate)&&lr(this,t.call(e.validateStyle,e.extend({key:r,style:this.serialize(),value:n,styleSpec:e.spec},i)))}},{key:"_remove",value:function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var r in this._sourceCaches)this._sourceCaches[r].clearTiles(),this._sourceCaches[r].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}},{key:"_clearSource",value:function(e){var t,r=this._getSourceCaches(e),n=d(r);try{for(n.s();!(t=n.n()).done;)t.value.clearTiles()}catch(i){n.e(i)}finally{n.f()}}},{key:"_reloadSource",value:function(e){var t,r=this._getSourceCaches(e),n=d(r);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.resume(),i.reload()}}catch(a){n.e(a)}finally{n.f()}}},{key:"_reloadSources",value:function(){var e,t=d(this._getSources());try{for(t.s();!(e=t.n()).done;){var r=e.value;r.reload&&r.reload()}}catch(n){t.e(n)}finally{t.f()}}},{key:"_updateSources",value:function(e){for(var t in this._sourceCaches)this._sourceCaches[t].update(e)}},{key:"_generateCollisionBoxes",value:function(){for(var e in this._sourceCaches){var t=this._sourceCaches[e];t.resume(),t.reload()}}},{key:"_updatePlacement",value:function(t,r,n,i){var a,o=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=!1,c=!1,u={},h=d(this._order);try{for(h.s();!(a=h.n()).done;){var f=a.value,p=this._layers[f];if("symbol"===p.type){if(!u[p.source]){var m=function(){var e=o._getLayerSourceCache(p);if(!e)return"continue";u[p.source]=e.getRenderableIds(!0).map((function(t){return e.getTileByID(t)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}();if("continue"===m)continue}var v=this.crossTileSymbolIndex.addLayer(p,u[p.source],t.center.lng,t.projection);l=l||v}}}catch(_){h.e(_)}finally{h.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),s=s||this._layerOrderChanged||0===n,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new rr(t,this._order,s,r,n,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),c=!0),l&&this.pauseablePlacement.placement.setStale()),c||l){var g,y=d(this._order);try{for(y.s();!(g=y.n()).done;){var x=g.value,b=this._layers[x];"symbol"===b.type&&this.placement.updateLayerOpacities(b,u[b.source])}}catch(_){y.e(_)}finally{y.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}},{key:"getImages",value:function(e,t,r){this.imageManager.getImages(t.icons,r),this._updateTilesForChangedImages();var n=function(e){e&&e.setDependencies(t.tileID.key,t.type,t.icons)};n(this._otherSourceCaches[t.source]),n(this._symbolSourceCaches[t.source])}},{key:"getGlyphs",value:function(e,t,r){this.glyphManager.getGlyphs(t.stacks,r)}},{key:"getResource",value:function(t,r,n){return e.makeRequest(r,n)}},{key:"_getSourceCache",value:function(e){return this._otherSourceCaches[e]}},{key:"_getLayerSourceCache",value:function(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}},{key:"_getSourceCaches",value:function(e){var t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}},{key:"_isSourceCacheLoaded",value:function(t){var r=this._getSourceCaches(t);return 0===r.length?(this.fire(new e.ErrorEvent(new Error("There is no source with ID '".concat(t,"'")))),!1):r.every((function(e){return e.loaded()}))}},{key:"has3DLayers",value:function(){return this._num3DLayers>0}},{key:"hasSymbolLayers",value:function(){return this._numSymbolLayers>0}},{key:"hasCircleLayers",value:function(){return this._numCircleLayers>0}},{key:"_clearWorkerCaches",value:function(){this.dispatcher.broadcast("clearCaches")}},{key:"destroy",value:function(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}]),a}(e.Evented);fr.getSourceType=function(e){return We[e]},fr.setSourceType=function(e,t){We[e]=t},fr.registerForPluginStateChange=e.registerForPluginStateChange;var pr="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",mr="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",vr="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",gr="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",yr="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif",xr={},br={},_r=[];Ar(pr,_r),Ar(vr,_r),Ar(gr,_r),Ar(yr,_r),xr=Tr("",vr),br=Tr(yr,gr);var wr=Tr("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),kr=pr,Sr="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Cr={background:Tr("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Tr("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Tr("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Tr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Tr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Tr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Tr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Tr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Tr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Tr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Tr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Tr("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Tr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Tr("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\nv_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);float roof_radiance=clamp(u_lightpos.z,0.0,1.0);roof_radiance=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roof_radiance);v_roof_color.rgb+=clamp(color.rgb*roof_radiance*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Tr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\nv_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Tr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Tr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Tr("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nhighp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nvec4 out_color=color;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Tr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Tr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Tr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Tr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Tr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Tr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Tr("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Tr("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",mr),skyboxGradient:Tr("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",mr),skyboxCapture:Tr("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Tr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;\n#ifdef GLOBE_POLES\nvec3 up_vector=normalize(globe_pos)*u_tile_up_scale;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Tr("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function Ar(e,t){var r,n=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n"),i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;if("#"===(a=a.trim())[0]&&a.includes("if")&&!a.includes("endif")){var o,s=(a=a.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim()).split(" "),l=d(s);try{for(l.s();!(o=l.n()).done;){var c=o.value;t.includes(c)||t.push(c)}}catch(u){l.e(u)}finally{l.f()}}}}catch(u){i.e(u)}finally{i.f()}}function Tr(e,t){var r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},a=[].concat(_r);return Ar(e,a),Ar(t,a),{fragmentSource:e=e.replace(r,(function(e,t,r,n,a){return i[a]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nvarying ").concat(r," ").concat(n," ").concat(a,";\n#else\nuniform ").concat(r," ").concat(n," u_").concat(a,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(a,"\n    ").concat(r," ").concat(n," ").concat(a," = u_").concat(a,";\n#endif\n")})),vertexSource:t=t.replace(r,(function(e,t,r,n,a){var o="float"===n?"vec2":"vec4",s=a.match(/color/)?"color":o;return i[a]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nuniform lowp float u_").concat(a,"_t;\nattribute ").concat(r," ").concat(o," a_").concat(a,";\nvarying ").concat(r," ").concat(n," ").concat(a,";\n#else\nuniform ").concat(r," ").concat(n," u_").concat(a,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(a," = a_").concat(a,";\n#else\n    ").concat(r," ").concat(n," ").concat(a," = u_").concat(a,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(a," = unpack_mix_").concat(s,"(a_").concat(a,", u_").concat(a,"_t);\n#else\n    ").concat(r," ").concat(n," ").concat(a," = u_").concat(a,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nuniform lowp float u_").concat(a,"_t;\nattribute ").concat(r," ").concat(o," a_").concat(a,";\n#else\nuniform ").concat(r," ").concat(n," u_").concat(a,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(r," ").concat(n," ").concat(a," = a_").concat(a,";\n#else\n    ").concat(r," ").concat(n," ").concat(a," = u_").concat(a,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(r," ").concat(n," ").concat(a," = unpack_mix_").concat(s,"(a_").concat(a,", u_").concat(a,"_t);\n#else\n    ").concat(r," ").concat(n," ").concat(a," = u_").concat(a,";\n#endif\n")})),staticAttributes:n,usedDefines:a}}var Er=function(){function e(){f(this,e),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}return p(e,[{key:"bind",value:function(e,t,r,n,i,a,o){this.context=e;for(var s=this.boundPaintVertexBuffers.length!==n.length,l=0;!s&&l<n.length;l++)this.boundPaintVertexBuffers[l]!==n[l]&&(s=!0);for(var c=this.boundDynamicVertexBuffers.length!==o.length,u=0;!c&&u<o.length;u++)this.boundDynamicVertexBuffers[u]!==o[u]&&(c=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==r||s||c||this.boundIndexBuffer!==i||this.boundVertexOffset!==a)this.freshBind(t,r,n,i,a,o);else{e.bindVertexArrayOES.set(this.vao);var h,f=d(o);try{for(f.s();!(h=f.n()).done;){var p=h.value;p&&p.bind()}}catch(m){f.e(m)}finally{f.f()}i&&i.dynamicDraw&&i.bind()}}},{key:"freshBind",value:function(e,t,r,n,i,a){var o,s=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),o=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=n,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=a;else{o=l.currentNumAttributes||0;for(var u=s;u<o;u++)c.disableVertexAttribArray(u)}t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);var h,f=d(r);try{for(f.s();!(h=f.n()).done;){var p=h.value;p.enableAttributes(c,e),p.bind(),p.setVertexAttribPointers(c,e,i)}}catch(y){f.e(y)}finally{f.f()}var m,v=d(a);try{for(v.s();!(m=v.n()).done;){var g=m.value;g&&(g.enableAttributes(c,e),g.bind(),g.setVertexAttribPointers(c,e,i))}}catch(y){v.e(y)}finally{v.f()}n&&n.bind(),l.currentNumAttributes=s}},{key:"destroy",value:function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}]),e}();function Mr(t,r){var n=Math.pow(2,r.canonical.z),i=r.canonical.y;return[new e.MercatorCoordinate(0,i/n).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/n).toLngLat().lat]}function Ir(t,r,n,i,a,o,s){var l=t.context,c=l.gl,u=n.fbo;if(u){t.prepareDrawTile();var h=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());var d=function(e,t,r,n){var i=r.paint.get("hillshade-shadow-color"),a=r.paint.get("hillshade-highlight-color"),o=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var l=!e.options.moving;return{u_matrix:n||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:Mr(0,t.tileID),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:a,u_accent:o}}(t,n,i,t.terrain?r.projMatrix:null);t.prepareDrawProgram(l,h,r.toUnwrapped());var f=t.getTileBoundsBuffers(n),p=f.tileBoundsBuffer,m=f.tileBoundsIndexBuffer,v=f.tileBoundsSegments;h.draw(l,c.TRIANGLES,a,o,s,e.CullFaceMode.disabled,d,i.id,p,m,v)}}function Pr(t,r,n){if(r.needsDEMTextureUpload){var i=t.context,a=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||t.getTileTexture(n.stride);var o=n.getPixels();r.demTexture?r.demTexture.update(o,{premultiply:!1}):r.demTexture=new e.Texture(i,o,a.RGBA,{premultiply:!1}),r.needsDEMTextureUpload=!1}}function Rr(t,r,n,i,a,o){var s=t.context,l=s.gl;if(r.dem){var c=r.dem;if(s.activeTexture.set(l.TEXTURE1),Pr(t,r,c),r.demTexture){r.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);var u=c.dim;s.activeTexture.set(l.TEXTURE0);var h=r.fbo;if(!h){var d=new e.Texture(s,{width:u,height:u,data:null},l.RGBA);d.bind(l.LINEAR,l.CLAMP_TO_EDGE),(h=r.fbo=s.createFramebuffer(u,u,!0)).colorAttachment.set(d.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,u,u]);var f=t.getMercatorTileBoundsBuffers(),p=f.tileBoundsBuffer,m=f.tileBoundsIndexBuffer,v=f.tileBoundsSegments;t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,a,o,e.CullFaceMode.disabled,function(t,r){var n=r.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[n,n],u_zoom:t.overscaledZ,u_unpack:r.unpackVector}}(r.tileID,c),n.id,p,m,v),r.needsHillshadePrepare=!1}}}var zr=function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}},Lr=function(e,t){return{u_matrix:e,u_image0:0,u_skirt_height:t}},Dr=function(e,t,r,n,i,a,o,s,l,c,u,h,d,f){return{u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(n),u_merc_matrix:r,u_zoom_transition:i,u_merc_center:a,u_image0:0,u_frustum_tl:o,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:u,u_globe_radius:h,u_viewport:d,u_grid_matrix:f?Float32Array.from(f):new Float32Array(9)}};function Or(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}var Fr=new(function(){function e(){f(this,e),this.operations={}}return p(e,[{key:"newMorphing",value:function(e,t,r,n,i){if(e in this.operations){var a=this.operations[e];a.to.tileID.key!==r.tileID.key&&(a.queued=r)}else this.operations[e]={startTime:n,phase:0,duration:i,from:t,to:r,queued:null}}},{key:"getMorphValuesForProxy",value:function(e){if(!(e in this.operations))return null;var t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}},{key:"update",value:function(e){for(var t in this.operations){var r=this.operations[t];for(r.phase=(e-r.startTime)/r.duration;r.phase>=1||!this._validOp(r);)if(!this._nextOp(r,e)){delete this.operations[t];break}}}},{key:"_nextOp",value:function(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}},{key:"_validOp",value:function(e){return e.from.hasData()&&e.to.hasData()}}]),e}()),jr={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Nr(e,t){var r=1<<e.z;return!t&&(0===e.x||e.x===r-1)||0===e.y||e.y===r-1}var Br=function(e){return{u_matrix:e}};function Zr(t,r,n,i,a){if(a>0){var o=e.exported.now(),s=(o-t.timeAdded)/a,l=r?(o-r.timeAdded)/a:-1,c=n.getSource(),u=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!r||Math.abs(r.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),d=h&&t.refreshedUponExpiration?1:e.clamp(h?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),r?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var Ur=function(e){m(r,e);var t=v(r);function r(e){var n;f(this,r);var a={type:"raster-dem",maxzoom:e.transform.maxZoom},o=new G(et(),null),s=Ge("mock-dem",a,o,e.style);return n=t.call(this,"mock-dem",s,!1),s.setEventedParent(i(n)),n._sourceLoaded=!0,n}return p(r,[{key:"_loadTile",value:function(e,t){e.state="loaded",t(null)}}]),r}(e.SourceCache),Vr=function(t){m(n,t);var r=v(n);function n(e){var t;f(this,n);var a=Ge("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new G(et(),null),e.style);return t=r.call(this,"proxy",a,!1),a.setEventedParent(i(t)),t.map=t.getSource().map=e,t.used=t._sourceLoaded=!0,t.renderCache=[],t.renderCachePool=[],t.proxyCachedFBO={},t}return p(n,[{key:"update",value:function(t,r,n){var i=this;if(!t.freezeTileCoverage){this.transform=t;var a=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((function(r,n){if(r[n.key]="",!i._tiles[n.key]){var a=new e.Tile(n,i._source.tileSize*n.overscaleFactor(),t.tileZoom);a.state="loaded",i._tiles[n.key]=a}return r}),{});for(var o in this._tiles)o in a||(this.freeFBO(o),this._tiles[o].unloadVectorData(),delete this._tiles[o])}}},{key:"freeFBO",value:function(e){var t=this.proxyCachedFBO[e];if(void 0!==t){var r,n=Object.values(t);(r=this.renderCachePool).push.apply(r,n),delete this.proxyCachedFBO[e]}}},{key:"deallocRenderCache",value:function(){this.renderCache.forEach((function(e){return e.fb.destroy()})),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}]),n}(e.SourceCache),Wr=function(e){m(r,e);var t=v(r);function r(e,n,i){var a;return f(this,r),(a=t.call(this,e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)).proxyTileKey=n,a.projMatrix=i,a}return p(r)}(e.OverscaledTileID),Gr=function(t){m(n,t);var r=v(n);function n(t,i){var a;f(this,n),(a=r.call(this)).painter=t,a.terrainTileForTile={},a.prevTerrainTileForTile={};var o=function(t){var r=new e.StructArrayLayout4i8,n=new e.StructArrayLayout3ui6,i=131;r.reserve(17161),n.reserve(33800);for(var a=e.EXTENT/128,o=e.EXTENT+a/2,s=o+a,l=-a;l<s;l+=a)for(var c=-a;c<s;c+=a){var u=c<0||c>o||l<0||l>o?24575:0,h=e.clamp(Math.round(c),0,e.EXTENT),d=e.clamp(Math.round(l),0,e.EXTENT);r.emplaceBack(h+u,d,h,d)}for(var f=function(e,t){var r=t*i+e;n.emplaceBack(r+1,r,r+i),n.emplaceBack(r+i,r+i+1,r+1)},p=1;p<129;p++)for(var m=1;m<129;m++)f(m,p);return[0,129].forEach((function(e){for(var t=0;t<130;t++)f(t,e),f(e,t)})),[r,n,32768]}(),s=h(o,3),l=s[0],c=s[1],u=s[2],d=t.context;a.gridBuffer=d.createVertexBuffer(l,e.boundsAttributes.members),a.gridIndexBuffer=d.createIndexBuffer(c),a.gridSegments=e.SegmentVector.simpleSegment(0,0,l.length,c.length),a.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,l.length,u),a.proxyCoords=[],a.proxiedCoords={},a._visibleDemTiles=[],a._drapedRenderBatches=[],a._sourceTilesOverlap={},a.proxySourceCache=new Vr(i.map),a.orthoMatrix=e.create(),e.ortho(a.orthoMatrix,"globe"===a.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);var p=d.gl;return a._overlapStencilMode=new e.StencilMode({func:p.GEQUAL,mask:255},0,255,p.KEEP,p.KEEP,p.REPLACE),a._previousZoom=t.transform.zoom,a.pool=[],a._findCoveringTileCache={},a._tilesDirty={},a.style=i,a._useVertexMorphing=!0,a._exaggeration=1,a._mockSourceCache=new Ur(i.map),a}return p(n,[{key:"style",set:function(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency()}},{key:"update",value:function(t,r,n){var i=this;if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;var a=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(a.get("source")),this._exaggeration=a.get("exaggeration");var o=function(){i.sourceCache.used&&e.warnOnce("Raster DEM source '".concat(i.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));var t=i.getScaledDemTileSize();i.sourceCache.update(r,t,!0),i.resetTileLookupCache(i.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),r.updateElevation(!n),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(r),this._emptyDEMTextureDirty=!0}else this._disable()}},{key:"resetTileLookupCache",value:function(e){this._findCoveringTileCache[e]={}}},{key:"getScaledDemTileSize",value:function(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}},{key:"_checkRenderCacheEfficiency",value:function(){var t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce("Terrain render cache efficiency is not optimal (".concat(t.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(t.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}},{key:"_onStyleDataEvent",value:function(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}},{key:"_disable",value:function(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(var e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}},{key:"destroy",value:function(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((function(e){return e.fb.destroy()})),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}},{key:"_source",value:function(){return this.enabled?this.sourceCache:null}},{key:"isUsingMockSource",value:function(){return this.sourceCache===this._mockSourceCache}},{key:"exaggeration",value:function(){return this._exaggeration}},{key:"visibleDemTiles",get:function(){return this._visibleDemTiles}},{key:"drapeBufferSize",get:function(){var e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}},{key:"useVertexMorphing",set:function(e){this._useVertexMorphing=e}},{key:"updateTileBinding",value:function(t){var r=this;if(this.enabled){this.prevTerrainTileForTile=this.terrainTileForTile;var n=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);var a=this.proxyCoords=n.getIds().map((function(e){var t=n.getTileByID(e).tileID;return t.projMatrix=i.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,r){var n=r.transform.pointCoordinate(r.transform.getCameraPoint()),i=new e.pointGeometry(n.x,n.y);t.sort((function(t,r){if(r.overscaledZ-t.overscaledZ)return r.overscaledZ-t.overscaledZ;var n=new e.pointGeometry(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),a=new e.pointGeometry(r.canonical.x+(1<<r.canonical.z)*r.wrap,r.canonical.y),o=i.mult(1<<t.canonical.z);return o.x-=.5,o.y-=.5,o.distSqr(n)-o.distSqr(a)}))}(a,this.painter),this._previousZoom=i.zoom;var o=this.proxyToSource||{};this.proxyToSource={},a.forEach((function(e){r.proxyToSource[e.key]={}})),this.terrainTileForTile={};var s=this._style._sourceCaches;for(var l in s){var c=s[l];if(c.used&&(c!==this.sourceCache&&this.resetTileLookupCache(c.id),this._setupProxiedCoordsForOrtho(c,t[l],o),!c.usedForTerrain)){var u=t[l];c.getSource().reparseOverscaled&&this._assignTerrainTiles(u)}}this.proxiedCoords[n.id]=a.map((function(e){return new Wr(e,e.key,r.orthoMatrix)})),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();var h={};this._visibleDemTiles=[];var f,p=d(this.proxyCoords);try{for(p.s();!(f=p.n()).done;){var m=f.value,v=this.terrainTileForTile[m.key];if(v){var g=v.tileID.key;g in h||(this._visibleDemTiles.push(v),h[g]=g)}}}catch(y){p.e(y)}finally{p.f()}}}},{key:"_assignTerrainTiles",value:function(e){var t=this;this._initializing||e.forEach((function(e){if(!t.terrainTileForTile[e.key]){var r=t._findTileCoveringTileID(e,t.sourceCache);r&&(t.terrainTileForTile[e.key]=r)}}))}},{key:"_prepareDEMTextures",value:function(){var e=this.painter.context,t=e.gl;for(var r in this.terrainTileForTile){var n=this.terrainTileForTile[r],i=n.dem;!i||n.demTexture&&!n.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),Pr(this.painter,n,i))}}},{key:"_prepareDemTileUniforms",value:function(e,t,r,n){if(!t||null==t.demTexture)return!1;var i=e.tileID.canonical,a=Math.pow(2,t.tileID.canonical.z-i.z),o=n||"";return r["u_dem_tl".concat(o)]=[i.x*a%1,i.y*a%1],r["u_dem_scale".concat(o)]=a,!0}},{key:"emptyDEMTexture",get:function(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}},{key:"emptyDepthBufferTexture",get:function(){var t=this.painter.context,r=t.gl;if(!this._emptyDepthBufferTexture){var n=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,n,r.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}},{key:"_getLoadedAreaMinimum",value:function(){var e=0,t=this._visibleDemTiles.reduce((function(t,r){if(!r.dem)return t;var n=r.dem.tree.minimums[0];return n>0&&e++,t+n}),0);return e?t/e:0}},{key:"_updateEmptyDEMTexture",value:function(){var t=this.painter.context,r=t.gl;t.activeTexture.set(r.TEXTURE2);var n=this._getLoadedAreaMinimum(),i=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(n,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;var a=this._emptyDEMTexture;return a?a.update(i,{premultiply:!1}):a=this._emptyDEMTexture=new e.Texture(t,i,r.RGBA,{premultiply:!1}),a}},{key:"setupElevationDraw",value:function(t,r,n){var i,a=this.painter.context,o=a.gl,s=(i=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(i),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});s.u_dem_size=this.sourceCache.getSource().tileSize,s.u_exaggeration=this.exaggeration();var l=null,c=null,u=1;if(n&&n.morphing&&this._useVertexMorphing){var h=n.morphing.srcDemTile,d=n.morphing.dstDemTile;u=n.morphing.phase,h&&d&&(this._prepareDemTileUniforms(t,h,s,"_prev")&&(c=h),this._prepareDemTileUniforms(t,d,s)&&(l=d))}if(c&&l?(a.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.activeTexture.set(o.TEXTURE4),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),s.u_dem_lerp=u):(l=this.terrainTileForTile[t.tileID.key],a.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,l,s)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),a.activeTexture.set(o.TEXTURE3),n&&n.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(s.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.u_depth_size_inv=[1,1]),n&&n.useMeterToDem&&l){var f=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;s.u_meter_to_dem=f}if(n&&n.labelPlaneMatrixInv&&(s.u_label_plane_matrix_inv=n.labelPlaneMatrixInv),r.setTerrainUniformValues(a,s),"globe"===this.painter.transform.projection.name){var p=this.globeUniformValues(this.painter.transform,t.tileID.canonical,n&&n.useDenormalizedUpVectorScale);r.setGlobeUniformValues(a,p)}}},{key:"globeUniformValues",value:function(t,r,n){var i=t.projection;return{u_tile_tl_up:i.upVector(r,0,0),u_tile_tr_up:i.upVector(r,e.EXTENT,0),u_tile_br_up:i.upVector(r,e.EXTENT,e.EXTENT),u_tile_bl_up:i.upVector(r,0,e.EXTENT),u_tile_up_scale:n?e.GLOBE_METERS_TO_ECEF:i.upVectorScale(r,t.center.lat,t.worldSize).metersToTile}}},{key:"renderToBackBuffer",value:function(t){var r=this.painter,n=this.painter.context;0!==t.length&&(n.bindFramebuffer.set(null),n.viewport.set([0,0,r.width,r.height]),r.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,r,n,i,a){if("globe"===t.transform.projection.name)!function(t,r,n,i,a){var o,s,l=t.context,c=l.gl,u=t.options.showTerrainWireframe?2:0,f=t.transform,p=e.globeUseCustomAntiAliasing(t,l,f),m=function(e,r){if(s!==e){var n=[jr[e],"PROJECTION_GLOBE_VIEW"];p&&n.push("CUSTOM_ANTIALIASING"),r&&n.push(jr[u]),o=t.useProgram("globeRaster",null,n),s=e}},v=t.colorModeForRenderPass(),g=new e.DepthMode(c.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Fr.update(a);var y=e.calculateGlobeMercatorMatrix(f),x=[e.mercatorXfromLng(f.center.lng),e.mercatorYfromLat(f.center.lat)],b=u?[!1,!0]:[!1],_=t.globeSharedBuffers,w=[f.width*e.exported.devicePixelRatio,f.height*e.exported.devicePixelRatio],k=Float32Array.from(f.globeMatrix),S={useDenormalizedUpVectorScale:!0};if(b.forEach((function(u){s=-1;var p,b=u?c.LINES:c.TRIANGLES,C=d(i);try{for(C.s();!(p=C.n()).done;){var A=p.value,T=n.getTile(A),E=e.StencilMode.disabled,M=r.prevTerrainTileForTile[A.key],I=r.terrainTileForTile[A.key];Or(M,I)&&Fr.newMorphing(A.key,M,I,a,250),l.activeTexture.set(c.TEXTURE0),T.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE);var P=Fr.getMorphValuesForProxy(A.key),R=P?1:0;P&&e.extend$1(S,{morphing:{srcDemTile:P.from,dstDemTile:P.to,phase:e.easeCubicInOut(P.phase)}});var z=e.tileCornersToBounds(A.canonical),L=e.getLatitudinalLod(z.getCenter().lat),D=e.getGridMatrix(A.canonical,z,L,f.worldSize/f._pixelsPerMercatorPixel),O=e.globeNormalizeECEF(e.globeTileBounds(A.canonical)),F=Dr(f.projMatrix,k,y,O,e.globeToMercatorTransition(f.zoom),x,f.frustumCorners.TL,f.frustumCorners.TR,f.frustumCorners.BR,f.frustumCorners.BL,f.globeCenterInViewSpace,f.globeRadius,w,D);if(m(R,u),r.setupElevationDraw(T,o,S),t.prepareDrawProgram(l,o,A.toUnwrapped()),_){var j=u?_.getWirefameBuffers(t.context,L):_.getGridBuffers(L),N=h(j,3),B=N[0],Z=N[1],U=N[2];o.draw(l,b,g,E,v,e.CullFaceMode.backCCW,F,"globe_raster",B,Z,U)}}}catch(V){C.e(V)}finally{C.f()}})),_){var C=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];p&&C.push("CUSTOM_ANTIALIASING"),o=t.useProgram("globeRaster",null,C);var A,T=d(i);try{var E=function(){var i=A.value,a=i.canonical,s=a.x,u=a.y,d=a.z,p=0===u,m=u===(1<<d)-1,y=_.getPoleBuffers(d),b=h(y,4),k=b[0],C=b[1],T=b[2],E=b[3];if(E&&(p||m)){var M=n.getTile(i);l.activeTexture.set(c.TEXTURE0),M.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE);var I=e.globePoleMatrixForTile(d,s,f),P=e.globeNormalizeECEF(e.globeTileBounds(i.canonical)),R=function(t,r){return t.draw(l,c.TRIANGLES,g,e.StencilMode.disabled,v,e.CullFaceMode.disabled,Dr(f.projMatrix,I,I,P,0,x,f.frustumCorners.TL,f.frustumCorners.TR,f.frustumCorners.BR,f.frustumCorners.BL,f.globeCenterInViewSpace,f.globeRadius,w),"globe_pole_raster",r,T,E)};r.setupElevationDraw(M,o,S),t.prepareDrawProgram(l,o,i.toUnwrapped()),p&&R(o,k),m&&(I=e.scale(e.create(),I,[1,-1,1]),R(o,C))}};for(T.s();!(A=T.n()).done;)E()}catch(M){T.e(M)}finally{T.f()}}}(t,r,n,i,a);else{var o,s,l=t.context,c=l.gl,u=t.options.showTerrainWireframe?2:0,f=function(e,r){if(s!==e){var n=[jr[e]];r&&n.push(jr[u]),o=t.useProgram("terrainRaster",null,n),s=e}},p=t.colorModeForRenderPass(),m=new e.DepthMode(c.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Fr.update(a);var v=t.transform,g=6*Math.pow(1.5,22-v.zoom)*r.exaggeration();(u?[!1,!0]:[!1]).forEach((function(u){s=-1;var y,x=u?c.LINES:c.TRIANGLES,b=u?r.getWirefameBuffer():[r.gridIndexBuffer,r.gridSegments],_=h(b,2),w=_[0],k=_[1],S=d(i);try{for(S.s();!(y=S.n()).done;){var C=y.value,A=n.getTile(C),T=e.StencilMode.disabled,E=r.prevTerrainTileForTile[C.key],M=r.terrainTileForTile[C.key];Or(E,M)&&Fr.newMorphing(C.key,E,M,a,250),l.activeTexture.set(c.TEXTURE0),A.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE,c.LINEAR_MIPMAP_NEAREST);var I=Fr.getMorphValuesForProxy(C.key),P=I?1:0,R=void 0;I&&(R={morphing:{srcDemTile:I.from,dstDemTile:I.to,phase:e.easeCubicInOut(I.phase)}});var z=Lr(C.projMatrix,Nr(C.canonical,v.renderWorldCopies)?g/10:g);f(P,u),r.setupElevationDraw(A,o,R),t.prepareDrawProgram(l,o,C.toUnwrapped()),o.draw(l,x,m,T,p,e.CullFaceMode.backCCW,z,"terrain_raster",r.gridBuffer,w,k)}}catch(L){S.e(L)}finally{S.f()}}))}}(r,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,r.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}},{key:"renderBatch",value:function(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;var r,n=this.painter,i=this.painter.context,a=this.proxySourceCache,o=this.proxiedCoords[a.id],s=this._drapedRenderBatches.shift(),l=[],c=n.style.order,u=0,h=d(o);try{for(h.s();!(r=h.n()).done;){var f=r.value,p=a.getTileByID(f.proxyTileKey),m=a.proxyCachedFBO[f.key]?a.proxyCachedFBO[f.key][t]:void 0,v=void 0!==m?a.renderCache[m]:this.pool[u++],g=void 0!==m;if(p.texture=v.tex,!g||v.dirty){var y=void 0;i.bindFramebuffer.set(v.fb.framebuffer),this.renderedToTile=!1,v.dirty&&(i.clear({color:e.Color.transparent,stencil:0}),v.dirty=!1);for(var x=s.start;x<=s.end;++x){var b=n.style._layers[c[x]];if(!b.isHidden(n.transform.zoom)){var _=n.style._getLayerSourceCache(b),w=_?this.proxyToSource[f.key][_.id]:[f];if(w){var k=w;i.viewport.set([0,0,v.fb.width,v.fb.height]),y!==(_?_.id:null)&&(this._setupStencil(v,w,b,_),y=_?_.id:null),n.renderLayer(n,_,b,k)}}}this.renderedToTile?(v.dirty=!0,l.push(p.tileID)):g||--u,5===u&&(u=0,this.renderToBackBuffer(l))}else l.push(p.tileID)}}catch(S){h.e(S)}finally{h.f()}return this.renderToBackBuffer(l),this.renderingToTexture=!1,i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),s.end+1}},{key:"postRender",value:function(){}},{key:"renderCacheEfficiency",value:function(e){var t=e.order.length;if(0===t)return{efficiency:100};for(var r,n=0,i=0,a=!1,o=0;o<t;++o){var s=e._layers[e.order[o]];this._style.isLayerDraped(s)?(a&&++n,++i):a||(a=!0,r=s.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-n/i),firstUndrapedLayer:r}}},{key:"getMinElevationBelowMSL",value:function(){var e=0;return this._visibleDemTiles.filter((function(e){return e.dem})).forEach((function(t){e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}},{key:"raycast",value:function(e,t,r){if(!this._visibleDemTiles)return null;var n=this._visibleDemTiles.filter((function(e){return e.dem})).map((function(n){var i=n.tileID,a=1<<i.overscaledZ,o=i.canonical,s=o.x,l=o.y,c=s/a,u=(s+1)/a,h=l/a,d=(l+1)/a;return{minx:c,miny:h,maxx:u,maxy:d,t:n.dem.tree.raycastRoot(c,h,u,d,e,t,r),tile:n}}));n.sort((function(e,t){return(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)}));var i,a=d(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(null==o.t)return null;var s=o.tile.dem.tree.raycast(o.minx,o.miny,o.maxx,o.maxy,e,t,r);if(null!=s)return s}}catch(l){a.e(l)}finally{a.f()}return null}},{key:"_createFBO",value:function(){var t=this.painter.context,r=t.gl,n=this.drapeBufferSize;t.activeTexture.set(r.TEXTURE0);var i=new e.Texture(t,{width:n[0],height:n[1],data:null},r.RGBA);i.bind(r.LINEAR,r.CLAMP_TO_EDGE);var a=t.createFramebuffer(n[0],n[1],!1);return a.colorAttachment.set(i.texture),a.depthAttachment=new je(t,a.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,n[0],n[1]),this._stencilRef=0,a.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):a.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&r.texParameterf(r.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:a,tex:i,dirty:!1}}},{key:"_initFBOPool",value:function(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}},{key:"_shouldDisableRenderCache",value:function(){var e=this;if(this._style.light&&this._style.light.hasTransition())return!0;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((function(t){var r=e._style._layers[t],n=r.isHidden(e.painter.transform.zoom),i=r.getCrossfadeParameters(),a=!!i&&1!==i.t,o=r.hasTransition();return"custom"!==r.type&&!n&&(a||o)}))}},{key:"_clearRasterFadeFromRenderCache",value:function(){var e=!1;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Ze){e=!0;break}if(e)for(var r=0;r<this._style.order.length;++r){var n=this._style._layers[this._style.order[r]],i=n.isHidden(this.painter.transform.zoom),a=this._style._getLayerSourceCache(n);if("raster"===n.type&&!i&&a){var o,s=n.paint.get("raster-fade-duration"),l=d(this.proxyCoords);try{for(l.s();!(o=l.n()).done;){var c=o.value,u=this.proxyToSource[c.key][a.id];if(u){var h,f=d(u);try{for(f.s();!(h=f.n()).done;){var p=h.value,m=Zr(a.getTile(p),a.findLoadedParent(p,0),a,this.painter.transform,s);(1!==m.opacity||0!==m.mix)&&this._clearRenderCacheForTile(a.id,p)}}catch(v){f.e(v)}finally{f.f()}}}}catch(v){l.e(v)}finally{l.f()}}}}},{key:"_setupDrapedRenderBatches",value:function(){var e=this._style.order,t=e.length;if(0!==t){for(var r,n=[],i=0,a=this._style._layers[e[i]];!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++i<t;)a=this._style._layers[e[i]];for(;i<t;++i){var o=this._style._layers[e[i]];o.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(o)?void 0===r&&(r=i):void 0!==r&&(n.push({start:r,end:i-1}),r=void 0))}void 0!==r&&n.push({start:r,end:i-1}),this._drapedRenderBatches=n}}},{key:"_setupRenderCache",value:function(e){var t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){var r=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(var n=0;n<r.length;++n){var i,a=Object.values(r[n]);(i=t.renderCachePool).push.apply(i,a)}}}else{this._clearRasterFadeFromRenderCache();for(var o=this.proxyCoords,s=this._tilesDirty,l=o.length-1;l>=0;l--){var c=o[l];if(t.getTileByID(c.key),void 0!==t.proxyCachedFBO[c.key]){var h=e[c.key],f=this.proxyToSource[c.key],p=0,m=function(e){var t=f[e],r=h[e];if(!r||r.length!==t.length||t.some((function(t,n){return t!==r[n]||s[e]&&s[e].hasOwnProperty(t.key)})))return p=-1,"break";++p};for(var v in f)if("break"===m(v))break;for(var g in t.proxyCachedFBO[c.key])t.renderCache[t.proxyCachedFBO[c.key][g]].dirty=p<0||p!==Object.values(h).length}}var y=u(this._drapedRenderBatches);y.sort((function(e,t){return t.end-t.start-(e.end-e.start)}));var x,b=d(y);try{for(b.s();!(x=b.n()).done;){var _,w=x.value,k=d(o);try{for(k.s();!(_=k.n()).done;){var S=_.value;if(!t.proxyCachedFBO[S.key]){var C=t.renderCachePool.pop();void 0===C&&t.renderCache.length<50&&(C=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==C&&(t.proxyCachedFBO[S.key]={},t.proxyCachedFBO[S.key][w.start]=C,t.renderCache[C].dirty=!0)}}}catch(A){k.e(A)}finally{k.f()}}}catch(A){b.e(A)}finally{b.f()}this._tilesDirty={}}}},{key:"_setupStencil",value:function(e,t,r,n){if(n&&this._sourceTilesOverlap[n.id]){var i=this.painter.context,a=i.gl;if(t.length<=1)this._overlapStencilType=!1;else{var o;if(r.isTileClipped())o=t.length,this._overlapStencilMode.test={func:a.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);o=1,this._overlapStencilMode.test={func:a.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+o>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=o,this._overlapStencilMode.ref=this._stencilRef,r.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}}else this._overlapStencilType&&(this._overlapStencilType=!1)}},{key:"clipOrMaskOverlapStencilType",value:function(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}},{key:"stencilModeForRTTOverlap",value:function(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}},{key:"_renderTileClippingMasks",value:function(t,r){var n=this.painter,i=this.painter.context,a=i.gl;n._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);var o,s=n.useProgram("clippingMask"),l=d(t);try{for(l.s();!(o=l.n()).done;){var c=o.value,u=n._tileClippingMaskIDs[c.key]=--r;s.draw(i,a.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:a.ALWAYS,mask:0},u,255,a.KEEP,a.KEEP,a.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Br(c.projMatrix),"$clipping",n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}catch(h){l.e(h)}finally{l.f()}}},{key:"pointCoordinate",value:function(t){var r=this.painter.transform;if(t.x<0||t.x>r.width||t.y<0||t.y>r.height)return null;var n=[t.x,t.y,1,1];e.transformMat4$1(n,n,r.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),n[0]/=r.worldSize,n[1]/=r.worldSize;var i=r._camera.position,a=e.mercatorZfromAltitude(1,r.center.lat),o=[i[0],i[1],i[2]/a,0],s=e.subtract([],n.slice(0,3),o);e.normalize(s,s);var l=this.raycast(o,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(o,o,s,l),o[3]=o[2],o[2]*=a,o):null}},{key:"drawDepth",value:function(){var t=this.painter,r=t.context,n=this.proxySourceCache,i=Math.ceil(t.width),a=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===a||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){var o=r.gl,s=r.createFramebuffer(i,a,!0);r.activeTexture.set(o.TEXTURE0);var l=new e.Texture(r,{width:i,height:a,data:null},o.RGBA);l.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.colorAttachment.set(l.texture);var c=r.createRenderbuffer(r.gl.DEPTH_COMPONENT16,i,a);s.depthAttachment.set(c),this._depthFBO=s,this._depthTexture=l}r.bindFramebuffer.set(this._depthFBO.framebuffer),r.viewport.set([0,0,i,a]),function(t,r,n,i){if("globe"!==t.transform.projection.name){var a=t.context,o=a.gl;a.clear({depth:1});var s,l=t.useProgram("terrainDepth"),c=new e.DepthMode(o.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D),u=d(i);try{for(u.s();!(s=u.n()).done;){var h=s.value,f=n.getTile(h),p=Lr(h.projMatrix,0);r.setupElevationDraw(f,l),l.draw(a,o.TRIANGLES,c,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,p,"terrain_depth",r.gridBuffer,r.gridIndexBuffer,r.gridNoSkirtSegments)}}catch(m){u.e(m)}finally{u.f()}}}(t,this,n,this.proxyCoords)}},{key:"_setupProxiedCoordsForOrtho",value:function(e,t,r){if(e.getSource()instanceof Ve)return this._setupProxiedCoordsForImageSource(e,t,r);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};for(var n=this.proxiedCoords[e.id]=[],i=this.proxyCoords,a=0;a<i.length;a++){var o=i[a],s=this._findTileCoveringTileID(o,e);if(s){var l=this._createProxiedId(o,s,r[o.key]&&r[o.key][e.id]);n.push(l),this.proxyToSource[o.key][e.id]=[l]}}for(var c=!1,u=0;u<t.length;u++){var h=e.getTile(t[u]);if(h&&h.hasData()){var d=this._findTileCoveringTileID(h.tileID,this.proxySourceCache);if(d&&d.tileID.canonical.z!==h.tileID.canonical.z){var f=this.proxyToSource[d.tileID.key][e.id],p=this._createProxiedId(d.tileID,h,r[d.tileID.key]&&r[d.tileID.key][e.id]);f?f.splice(f.length-1,0,p):this.proxyToSource[d.tileID.key][e.id]=[p],n.push(p),c=!0}}}this._sourceTilesOverlap[e.id]=c}},{key:"_setupProxiedCoordsForImageSource",value:function(t,r,n){if(t.getSource().loaded())for(var i=this.proxiedCoords[t.id]=[],a=this.proxyCoords,o=t.getSource(),s=new e.pointGeometry(o.tileID.x,o.tileID.y)._div(1<<o.tileID.z),l=o.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce((function(e,t){return e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e}),{min:new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=function(t,r){var n=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),a=e.EXTENT/(1<<t.canonical.z),o=r.wrap+r.canonical.x/(1<<r.canonical.z),s=r.canonical.y/(1<<r.canonical.z);return n+a<o+l.min.x||n>o+l.max.x||i+a<s+l.min.y||i>s+l.max.y},u=0;u<a.length;u++)for(var h=a[u],d=0;d<r.length;d++){var f=t.getTile(r[d]);if(f&&f.hasData()&&!c(h,f.tileID)){var p=this._createProxiedId(h,f,n[h.key]&&n[h.key][t.id]),m=this.proxyToSource[h.key][t.id];m?m.push(p):this.proxyToSource[h.key][t.id]=[p],i.push(p)}}}},{key:"_createProxiedId",value:function(t,r,n){var i=this.orthoMatrix;if(n){var a=n.find((function(e){return e.key===r.tileID.key}));if(a)return a}if(r.tileID.key!==t.key){var o,s,l,c=t.canonical.z-r.tileID.canonical.z;i=e.create();var u=r.tileID.wrap-t.wrap<<t.overscaledZ;c>0?(s=(o=e.EXTENT>>c)*((r.tileID.canonical.x<<c)-t.canonical.x+u),l=o*((r.tileID.canonical.y<<c)-t.canonical.y)):(o=e.EXTENT<<-c,s=e.EXTENT*(r.tileID.canonical.x-(t.canonical.x+u<<-c)),l=e.EXTENT*(r.tileID.canonical.y-(t.canonical.y<<-c))),e.ortho(i,0,o,0,o,0,1),e.translate(i,i,[s,l,0])}return new Wr(r.tileID,t.key,i)}},{key:"_findTileCoveringTileID",value:function(t,r){var n=r.getTile(t);if(n&&n.hasData())return n;var i=this._findCoveringTileCache[r.id],a=i[t.key];if((n=a?r.getTileByID(a):null)&&n.hasData()||null===a)return n;var o=n?n.tileID:t,s=o.overscaledZ,l=r.getSource().minzoom,c=[];if(!a){var u=r.getSource().maxzoom;if(t.canonical.z>=u){var h=t.canonical.z-u;r.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,r.transform.tileZoom),o=new e.OverscaledTileID(s,t.wrap,u,t.canonical.x>>h,t.canonical.y>>h)):0!==h&&(s=u,o=new e.OverscaledTileID(s,t.wrap,u,t.canonical.x>>h,t.canonical.y>>h))}o.key!==t.key&&(c.push(o.key),n=r.getTile(o))}var d=function(e){c.forEach((function(t){i[t]=e})),c.length=0};for(s-=1;s>=l&&(!n||!n.hasData());s--){n&&d(n.tileID.key);var f=o.calculateScaledKey(s);if((n=r.getTileByID(f))&&n.hasData())break;var p=i[f];if(null===p)break;void 0===p?c.push(f):n=r.getTileByID(p)}return d(n?n.tileID.key:null),n&&n.hasData()?n:null}},{key:"findDEMTileFor",value:function(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}},{key:"prepareDrawTile",value:function(){this.renderedToTile=!0}},{key:"_clearRenderCacheForTile",value:function(e,t){var r=this._tilesDirty[e];r||(r=this._tilesDirty[e]={}),r[t.key]=!0}},{key:"getWirefameBuffer",value:function(){if(!this.wireframeSegments){var t=function(t){for(var r=0,n=new e.StructArrayLayout2ui4,i=131,a=1;a<129;a++){for(var o=1;o<129;o++)r=a*i+o,n.emplaceBack(r,r+1),n.emplaceBack(r,r+i),n.emplaceBack(r+1,r+i),128===a&&n.emplaceBack(r+i,r+i+1);n.emplaceBack(r+1,r+1+i)}return n}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}]),n}(e.Elevation),Hr=function(){function t(r,n,i,a,o,s){f(this,t);var l=r.gl;this.program=l.createProgram();var c=function(e){for(var t=[],r=0;r<e.length;r++)if(null!==e[r]){var n=e[r].split(" ");t.push(n.pop())}return t}(i.staticAttributes),u=a?a.getBinderAttributes():[],h=c.concat(u),d=a?a.defines():[];d=d.concat(s.map((function(e){return"#define ".concat(e)})));var p=d.concat(r.extStandardDerivatives?"#extension GL_OES_standard_derivatives : enable\n".concat(Sr):Sr,Sr,kr,wr.fragmentSource,br.fragmentSource,i.fragmentSource).join("\n"),m=d.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",kr,wr.vertexSource,br.vertexSource,xr.vertexSource,i.vertexSource).join("\n"),v=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(v,p),l.compileShader(v),l.attachShader(this.program,v);var g=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(g,m),l.compileShader(g),l.attachShader(this.program,g),this.attributes={},this.numAttributes=h.length;for(var y=0;y<this.numAttributes;y++)h[y]&&(l.bindAttribLocation(this.program,y,h[y]),this.attributes[h[y]]=y);l.linkProgram(this.program),l.deleteShader(g),l.deleteShader(v),this.fixedUniforms=o(r),this.binderUniforms=a?a.getUniforms(r):[],s.includes("TERRAIN")&&(this.terrainUniforms=function(t){return{u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}}(r)),s.includes("GLOBE")&&(this.globeUniforms=function(t){return{u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}}(r)),s.includes("FOG")&&(this.fogUniforms=function(t){return{u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}}(r))}}}return p(t,[{key:"setTerrainUniformValues",value:function(e,t){if(this.terrainUniforms){var r=this.terrainUniforms;if(!this.failedToCreate)for(var n in e.program.set(this.program),t)r[n]&&r[n].set(this.program,n,t[n])}}},{key:"setGlobeUniformValues",value:function(e,t){if(this.globeUniforms){var r=this.globeUniforms;if(!this.failedToCreate)for(var n in e.program.set(this.program),t)r[n]&&r[n].set(this.program,n,t[n])}}},{key:"setFogUniformValues",value:function(e,t){if(this.fogUniforms){var r=this.fogUniforms;if(!this.failedToCreate)for(var n in e.program.set(this.program),t)r[n].set(this.program,n,t[n])}}},{key:"draw",value:function(e,t,r,i,a,o,s,l,c,u,h,f,p,m,v){var g,y=e.gl;if(!this.failedToCreate){e.program.set(this.program),e.setDepthMode(r),e.setStencilMode(i),e.setColorMode(a),e.setCullFace(o);for(var x=0,b=Object.keys(this.fixedUniforms);x<b.length;x++){var _=b[x];this.fixedUniforms[_].set(this.program,_,s[_])}m&&m.setUniforms(this.program,e,this.binderUniforms,f,{zoom:p});var w,k=(g={},n(g,y.LINES,2),n(g,y.TRIANGLES,3),n(g,y.LINE_STRIP,1),g)[t],S=d(h.get());try{for(S.s();!(w=S.n()).done;){var C=w.value,A=C.vaos||(C.vaos={});(A[l]||(A[l]=new Er)).bind(e,this,c,m?m.getPaintVertexBuffers():[],u,C.vertexOffset,v||[]),y.drawElements(t,C.primitiveLength*k,y.UNSIGNED_SHORT,C.primitiveOffset*k*2)}}catch(T){S.e(T)}finally{S.f()}}}}],[{key:"cacheKey",value:function(e,t,r,n){var i,a="".concat(t).concat(n?n.cacheKey:""),o=d(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;e.usedDefines.includes(s)&&(a+="/".concat(s))}}catch(l){o.e(l)}finally{o.f()}return a}}]),t}();function Xr(e,t,r){var n=1/H(r,1,t.transform.tileZoom),i=Math.pow(2,r.tileID.overscaledZ),a=r.tileSize*Math.pow(2,t.transform.tileZoom)/i,o=a*(r.tileID.canonical.x+r.tileID.wrap*i),s=a*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[n,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}var Yr=e.create(),qr=function(t,r,n,i,a,o,s,l,c,u,h){var d=r.style.light,f=d.properties.get("position"),p=[f.x,f.y,f.z],m=e.create$1();"viewport"===d.properties.get("anchor")&&(e.fromRotation(m,-r.transform.angle),e.transformMat3(p,p,m));var v=d.properties.get("color"),g=r.transform,y={u_matrix:t,u_lightpos:p,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[v.r,v.g,v.b],u_vertical_gradient:+n,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Yr,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:a,u_edge_radius:o};return"globe"===g.projection.name&&(y.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],y.u_zoom_transition=c,y.u_inv_rot_matrix=h,y.u_merc_center=u,y.u_up_dir=g.projection.upVector(new e.CanonicalTileID(0,0,0),u[0]*e.EXTENT,u[1]*e.EXTENT),y.u_height_lift=l),y},$r=function(t,r,n,i,a,o,s,l,c,u,h,d,f){var p=qr(t,r,n,i,a,o,s,u,h,d,f),m={u_height_factor:-Math.pow(2,s.overscaledZ)/c.tileSize/8};return e.extend(p,Xr(l,r,c),m)},Kr=function(e){return{u_matrix:e}},Jr=function(t,r,n,i){return e.extend(Kr(t),Xr(n,r,i))},Qr=function(e,t){return{u_matrix:e,u_world:t}},en=function(t,r,n,i,a){return e.extend(Jr(t,r,n,i),{u_world:a})},tn=e.create(),rn=function(t,r,n,i,a,o){var s,l=t.transform,c="globe"===l.projection.name;if("map"===o.paint.get("circle-pitch-alignment"))if(c){var u=e.globePixelsToTileUnits(l.zoom,r.canonical)*l._pixelsPerMercatorPixel;s=Float32Array.from([u,0,0,u])}else s=l.calculatePixelsToTileUnitsMatrix(n);else s=new Float32Array([l.pixelsToGLUnits[0],0,0,l.pixelsToGLUnits[1]]);var h={u_camera_to_center_distance:l.cameraToCenterDistance,u_matrix:t.translatePosMatrix(r.projMatrix,n,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:s,u_inv_rot_matrix:tn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){h.u_inv_rot_matrix=i,h.u_merc_center=a,h.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(l.zoom);var d=a[0]*e.EXTENT,f=a[1]*e.EXTENT;h.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),d,f)}return h},nn=function(e){var t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},an=function(t,r,n,i){var a=e.EXTENT/n.tileSize;return{u_matrix:t,u_camera_to_center_distance:r.getCameraToCenterDistance(i),u_extrude_scale:[r.pixelsToGLUnits[0]/a,r.pixelsToGLUnits[1]/a]}},on=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},sn=e.create(),ln=function(t,r,n,i,a,o,s){var l=t.transform,c="globe"===l.projection.name,u=c?e.globePixelsToTileUnits(l.zoom,r.canonical)*l._pixelsPerMercatorPixel:H(n,1,o),h={u_matrix:r.projMatrix,u_extrude_scale:u,u_intensity:s,u_inv_rot_matrix:sn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){h.u_inv_rot_matrix=i,h.u_merc_center=a,h.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(l.zoom);var d=a[0]*e.EXTENT,f=a[1]*e.EXTENT;h.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),d,f)}return h},cn=function(e,t,r,n,i,a,o,s){var l=e.transform,c=l.calculatePixelsToTileUnitsMatrix(t),u={u_matrix:dn(e,t,r,i),u_pixels_to_tile_units:c,u_device_pixel_ratio:o,u_units_to_pixels:[1/l.pixelsToGLUnits[0],1/l.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:a,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:s};if(fn(r)){var h=hn(t,e.transform);u.u_texsize=t.lineAtlasTexture.size,u.u_scale=[h,n.fromScale,n.toScale],u.u_mix=n.t}return u},un=function(e,t,r,n,i,a){var o=e.transform,s=hn(t,o);return{u_matrix:dn(e,t,r,i),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:o.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:a,u_image:0,u_scale:[s,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function hn(e,t){return 1/H(e,1,t.tileZoom)}function dn(e,t,r,n){return e.translatePosMatrix(n||t.tileID.projMatrix,t,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}function fn(e){var t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}var pn=function(e,t,r,n,i,a){return{u_matrix:e,u_tl_parent:t,u_scale_parent:r,u_fade_t:n.mix,u_opacity:n.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:mn(i.paint.get("raster-hue-rotate")),u_perspective_transform:a};var o,s};function mn(e){e*=Math.PI/180;var t=Math.sin(e),r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]}var vn,gn=e.create(),yn=function(t,r,n,i,a,o,s,l,c,u,h,d,f,p,m,v){var g=a.transform,y={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:g.cameraToCenterDistance,u_rotate_symbol:+n,u_aspect_ratio:g.width/g.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+i,u_texsize:u,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:gn,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:gn,u_up_vector:[0,-1,0]};return"globe"===v.name&&(y.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],y.u_zoom_transition=d,y.u_inv_rot_matrix=p,y.u_merc_center=f,y.u_camera_forward=g._camera.forward(),y.u_ecef_origin=e.globeECEFOrigin(g.globeMatrix,h.toUnwrapped()),y.u_tile_matrix=Float32Array.from(g.globeMatrix),y.u_up_vector=m),y},xn=function(t,r,n,i,a,o,s,l,c,u,h,d,f,p,m,v,g){return e.extend(yn(t,r,n,i,a,o,s,l,c,u,d,f,p,m,v,g),{u_gamma_scale:i?a.transform.cameraToCenterDistance*Math.cos(a.terrain?0:a.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+h})},bn=function(t,r,n,i,a,o,s,l,c,u,h,d,f,p,m,v){return e.extend(xn(t,r,n,i,a,o,s,l,!0,c,!0,h,d,f,p,m,v),{u_texsize_icon:u,u_texture_icon:1})},_n=function(e,t,r){return{u_matrix:e,u_opacity:t,u_color:r}},wn=function(t,r,n,i,a,o){return e.extend(function(e,t,r,n){var i=r.imageManager.getPattern(e.from.toString()),a=r.imageManager.getPattern(e.to.toString()),o=r.imageManager.getPixelSize(),s=o.width,l=o.height,c=Math.pow(2,n.tileID.overscaledZ),u=n.tileSize*Math.pow(2,r.transform.tileZoom)/c,h=u*(n.tileID.canonical.x+n.tileID.wrap*c),d=u*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/H(n,1,r.transform.tileZoom),u_pixel_coord_upper:[h>>16,d>>16],u_pixel_coord_lower:[65535&h,65535&d]}}(i,o,n,a),{u_matrix:t,u_opacity:r})},kn={fillExtrusion:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}},fillExtrusionPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_fade:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}},fill:function(t){return{u_matrix:new e.UniformMatrix4f(t)}},fillPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_fade:new e.Uniform1f(t)}},fillOutline:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}},fillOutlinePattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_fade:new e.Uniform1f(t)}},circle:function(t){return{u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}},collisionBox:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}},collisionCircle:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}},debug:function(t){return{u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}},clippingMask:function(t){return{u_matrix:new e.UniformMatrix4f(t)}},heatmap:function(t){return{u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}},heatmapTexture:function(t){return{u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}},hillshade:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}},hillshadePrepare:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}},line:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_mix:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}},linePattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_fade:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}},raster:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}},symbolIcon:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}},symbolSDF:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}},symbolTextAndIcon:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}},background:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}},backgroundPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl_a:new e.Uniform2f(t),u_pattern_br_a:new e.Uniform2f(t),u_pattern_tl_b:new e.Uniform2f(t),u_pattern_br_b:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_mix:new e.Uniform1f(t),u_pattern_size_a:new e.Uniform2f(t),u_pattern_size_b:new e.Uniform2f(t),u_scale_a:new e.Uniform1f(t),u_scale_b:new e.Uniform1f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}},terrainRaster:zr,terrainDepth:zr,skybox:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}},skyboxGradient:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}},skyboxCapture:function(t){return{u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}},globeRaster:function(t){return{u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}},globeAtmosphere:function(t){return{u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)}}};function Sn(t,r,n,i,a,o,s){for(var l=t.context,c=l.gl,u=t.transform,h=t.useProgram("collisionBox"),d=[],f=0,p=0,m=0;m<i.length;m++){var v=i[m],g=r.getTile(v),y=g.getBucket(n);if(y){var x=Lt(v,y,u),b=x;0===a[0]&&0===a[1]||(b=t.translatePosMatrix(x,g,a,o));var _=s?y.textCollisionBox:y.iconCollisionBox,w=y.collisionCircleArray;if(w.length>0){var k=e.create(),S=b;e.mul(k,y.placementInvProjMatrix,u.glCoordMatrix),e.mul(k,k,y.placementViewportMatrix),d.push({circleArray:w,circleOffset:p,transform:S,invTransform:k,projection:y.getProjection()}),p=f+=w.length/4}_&&(t.terrain&&t.terrain.setupElevationDraw(g,h),h.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,an(b,u,g,y.getProjection()),n.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,u.zoom,null,[_.collisionVertexBuffer,_.collisionVertexBufferExt]))}}if(s&&d.length){var C=t.useProgram("collisionCircle"),A=new e.StructArrayLayout2f1f2i16;A.resize(4*f),A._trim();for(var T=0,E=0,M=d;E<M.length;E++)for(var I=M[E],P=0;P<I.circleArray.length/4;P++){var R=4*P,z=I.circleArray[R+0],L=I.circleArray[R+1],D=I.circleArray[R+2],O=I.circleArray[R+3];A.emplace(T++,z,L,D,O,0),A.emplace(T++,z,L,D,O,1),A.emplace(T++,z,L,D,O,2),A.emplace(T++,z,L,D,O,3)}(!vn||vn.length<2*f)&&(vn=function(t){var r=2*t,n=new e.StructArrayLayout3ui6;n.resize(r),n._trim();for(var i=0;i<r;i++){var a=6*i;n.uint16[a+0]=4*i+0,n.uint16[a+1]=4*i+1,n.uint16[a+2]=4*i+2,n.uint16[a+3]=4*i+2,n.uint16[a+4]=4*i+3,n.uint16[a+5]=4*i+0}return n}(f));for(var F,j=l.createIndexBuffer(vn,!0),N=l.createVertexBuffer(A,e.collisionCircleLayout.members,!0),B=0,Z=d;B<Z.length;B++){var U=Z[B],V={u_matrix:U.transform,u_inv_matrix:U.invTransform,u_camera_to_center_distance:(F=u).getCameraToCenterDistance(U.projection),u_viewport_size:[F.width,F.height]};C.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,V,n.id,N,j,e.SegmentVector.simpleSegment(0,2*U.circleOffset,U.circleArray.length,U.circleArray.length/2),null,u.zoom)}N.destroy(),j.destroy()}}var Cn=e.create();function An(t,r,n,i,a,o){var s=e.getAnchorAlignment(t),l=-(s.horizontalAlign-.5)*r,c=-(s.verticalAlign-.5)*n,u=e.evaluateVariableOffset(t,i);return new e.pointGeometry((l/a+u[0])*o,(c/a+u[1])*o)}function Tn(t,r,n,i,a,o,s,l,c,u,h){var d=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,p=t.icon.dynamicLayoutVertexArray,m={},v=Dt(l,t.getProjection(),o),g=o.elevation,y=t.getProjection().upVectorScale(l.canonical,o.center.lat,o.worldSize);f.clear();for(var x=0;x<d.length;x++){var b=d.get(x),_=t.allowVerticalPlacement&&!b.placedOrientation,w=b.hidden||!b.crossTileID||_?null:i[b.crossTileID];if(w){var k=new e.pointGeometry(b.tileAnchorX,b.tileAnchorY),S=t.getProjection().upVector(l.canonical,k.x,k.y),C=g?g.getAtTileOffset(l,k.x,k.y):0,A=yt([b.projectedAnchorX+C*S[0]*y.metersToTile,b.projectedAnchorY+C*S[1]*y.metersToTile,b.projectedAnchorZ+C*S[2]*y.metersToTile],n?v:s),T=xt(o.getCameraToCenterDistance(t.getProjection()),A.signedDistanceFromCamera),E=a.evaluateSizeForFeature(t.textSizeData,u,b)*T/e.ONE_EM;n&&(E*=t.tilePixelRatio/c);var M=w.width,I=w.height,P=An(w.anchor,M,I,w.textOffset,w.textScale,E),R=void 0;if(n){var z=k.add(P),L=t.getProjection().projectTilePoint(z.x,z.y,l.canonical),D=L.x,O=L.y,F=L.z;R=yt([D+C*S[0]*y.metersToTile,O+C*S[1]*y.metersToTile,F+C*S[2]*y.metersToTile],s).point}else{var j=r?P.rotate(-o.angle):P;R=[A.point[0]+j.x,A.point[1]+j.y,0]}for(var N=t.allowVerticalPlacement&&b.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,B=0;B<b.numGlyphs;B++)e.addDynamicAttributes(f,R[0],R[1],R[2],N);h&&b.associatedIconIndex>=0&&(m[b.associatedIconIndex]={shiftedAnchor:R,angle:N})}else Mt(b.numGlyphs,f)}if(h){p.clear();for(var Z=t.icon.placedSymbolArray,U=0;U<Z.length;U++){var V=Z.get(U);if(V.hidden)Mt(V.numGlyphs,p);else{var W=m[U];if(W)for(var G=0;G<V.numGlyphs;G++)e.addDynamicAttributes(p,W.shiftedAnchor[0],W.shiftedAnchor[1],W.shiftedAnchor[2],W.angle);else Mt(V.numGlyphs,p)}}t.icon.dynamicLayoutVertexBuffer.updateData(p)}t.text.dynamicLayoutVertexBuffer.updateData(f)}function En(e,t,r){return r.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Mn(t,r,n,i,a,o,s,l,c,u,h,f){var p=t.context,m=p.gl,v=t.transform,g="map"===l,y="map"===c,x=g&&"point"!==n.layout.get("symbol-placement"),b=g&&!y&&!x,_=void 0!==n.layout.get("symbol-sort-key").constantOr(1),w=!1,k=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),S=[e.mercatorXfromLng(v.center.lng),e.mercatorYfromLat(v.center.lat)],C=n.layout.get("text-variable-anchor"),A="globe"===v.projection.name,T=[],E=[0,-1,0],M=E;!A&&!v.mercatorFromTransition||g||(M=function(t){var r=t._camera.getWorldToCamera(t.worldSize,1),n=e.multiply([],r,t.globeMatrix);e.invert(n,n);var i=[0,0,0],a=[0,1,0,0];return e.transformMat4$1(a,a,n),i[0]=a[0],i[1]=a[1],i[2]=a[2],e.normalize(i,i),i}(v));var I,P=d(i);try{for(P.s();!(I=P.n()).done;){var R=I.value,z=r.getTile(R),L=z.getBucket(n);if(L&&("mercator"!==L.projection.name||!A)){var D=a?L.text:L.icon;if(D&&!L.fullyClipped&&D.segments.get().length){var O=D.programConfigurations.get(n.id),F=a||L.sdfIcons,j=a?L.textSizeData:L.iconSizeData,N=y||0!==v.pitch,B=e.evaluateSizeForZoom(j,v.zoom),Z=void 0,U=void 0,V=void 0,W=void 0,G=[0,0],H=null;if(a){if(U=z.glyphAtlasTexture,V=m.LINEAR,Z=z.glyphAtlasTexture.size,L.iconsInText){G=z.imageAtlasTexture.size,H=z.imageAtlasTexture;var X="composite"===j.kind||"camera"===j.kind;W=N||t.options.rotating||t.options.zooming||X?m.LINEAR:m.NEAREST}}else{var Y=1!==n.layout.get("icon-size").constantOr(0)||L.iconsNeedLinear;U=z.imageAtlasTexture,V=F||t.options.rotating||t.options.zooming||Y||N?m.LINEAR:m.NEAREST,Z=z.imageAtlasTexture.size}var q="globe"===L.projection.name,$=q?M:E,K=q?e.globeToMercatorTransition(v.zoom):0,J=Dt(R,L.getProjection(),v),Q=v.calculatePixelsToTileUnitsMatrix(z),ee=pt(J,z.tileID.canonical,y,g,v,L.getProjection(),Q),te=t.terrain&&y&&x?e.invert(e.create(),ee):Cn,re=vt(J,z.tileID.canonical,y,g,v,L.getProjection(),Q),ne=C&&L.hasTextData(),ie="none"!==n.layout.get("icon-text-fit")&&ne&&L.hasIconData();if(x){var ae=v.elevation,oe=ae?ae.getAtTileOffsetFunc(R,v.center.lat,v.worldSize,L.getProjection()):function(e){return[0,0,0]},se=mt(J,z.tileID.canonical,y,g,v,L.getProjection(),Q);_t(L,J,t,a,se,re,y,u,oe,R)}var le=x||a&&C||ie,ce=t.translatePosMatrix(J,z,o,s),ue=le?Cn:ee,he=t.translatePosMatrix(re,z,o,s,!0),de=L.getProjection().createInversionMatrix(v,R.canonical),fe=[];t.terrainRenderModeElevated()&&y&&fe.push("PITCH_WITH_MAP_TERRAIN"),q&&fe.push("PROJECTION_GLOBE_VIEW"),le&&fe.push("PROJECTED_POS_ON_VIEWPORT");var pe=F&&0!==n.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),me=void 0;me=F?L.iconsInText?bn(j.kind,B,b,y,t,ce,ue,he,Z,G,R,K,S,de,$,L.getProjection()):xn(j.kind,B,b,y,t,ce,ue,he,a,Z,!0,R,K,S,de,$,L.getProjection()):yn(j.kind,B,b,y,t,ce,ue,he,a,Z,R,K,S,de,$,L.getProjection());var ve={program:t.useProgram(En(F,a,L),O,fe),buffers:D,uniformValues:me,atlasTexture:U,atlasTextureIcon:H,atlasInterpolation:V,atlasInterpolationIcon:W,isSDF:F,hasHalo:pe,tile:z,labelPlaneMatrixInv:te};if(_&&L.canOverlap){w=!0;var ge,ye=D.segments.get(),xe=d(ye);try{for(xe.s();!(ge=xe.n()).done;){var be=ge.value;T.push({segments:new e.SegmentVector([be]),sortKey:be.sortKey,state:ve})}}catch(Ae){xe.e(Ae)}finally{xe.f()}}else T.push({segments:D.segments,sortKey:0,state:ve})}}}}catch(Ae){P.e(Ae)}finally{P.f()}w&&T.sort((function(e,t){return e.sortKey-t.sortKey}));for(var _e=0,we=T;_e<we.length;_e++){var ke=we[_e],Se=ke.state;if(t.terrain&&t.terrain.setupElevationDraw(Se.tile,Se.program,{useDepthForOcclusion:!A,labelPlaneMatrixInv:Se.labelPlaneMatrixInv}),p.activeTexture.set(m.TEXTURE0),Se.atlasTexture.bind(Se.atlasInterpolation,m.CLAMP_TO_EDGE),Se.atlasTextureIcon&&(p.activeTexture.set(m.TEXTURE1),Se.atlasTextureIcon&&Se.atlasTextureIcon.bind(Se.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),Se.isSDF){var Ce=Se.uniformValues;Se.hasHalo&&(Ce.u_is_halo=1,In(Se.buffers,ke.segments,n,t,Se.program,k,h,f,Ce)),Ce.u_is_halo=0}In(Se.buffers,ke.segments,n,t,Se.program,k,h,f,Se.uniformValues)}}function In(t,r,n,i,a,o,s,l,c){var u=i.context,h=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];a.draw(u,u.gl.TRIANGLES,o,s,l,e.CullFaceMode.disabled,c,n.id,t.layoutVertexBuffer,t.indexBuffer,r,n.paint,i.transform.zoom,t.programConfigurations.get(n.id),h)}function Pn(t,r,n,i,a,o,s){var l,c,u,h,f,p=t.context.gl,m=n.paint.get("fill-pattern"),v=m&&m.constantOr(1),g=n.getCrossfadeParameters();s?(c=v&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",l=p.LINES):(c=v?"fillPattern":"fill",l=p.TRIANGLES);var y,x=d(i);try{for(x.s();!(y=x.n()).done;){var b=y.value,_=r.getTile(b);if(!v||_.patternsLoaded()){var w=_.getBucket(n);if(w){t.prepareDrawTile();var k=w.programConfigurations.get(n.id),S=t.useProgram(c,k);v&&(t.context.activeTexture.set(p.TEXTURE0),_.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),k.updatePaintBuffers(g));var C=m.constantOr(null);if(C&&_.imageAtlas){var A=_.imageAtlas,T=A.patternPositions[C.to.toString()],E=A.patternPositions[C.from.toString()];T&&E&&k.setConstantPatternPositions(T,E)}var M=t.translatePosMatrix(b.projMatrix,_,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(s){h=w.indexBuffer2,f=w.segments2;var I=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[p.drawingBufferWidth,p.drawingBufferHeight];u="fillOutlinePattern"===c&&v?en(M,t,g,_,I):Qr(M,I)}else h=w.indexBuffer,f=w.segments,u=v?Jr(M,t,g,_):Kr(M);t.prepareDrawProgram(t.context,S,b.toUnwrapped()),S.draw(t.context,l,a,t.stencilModeForClipping(b),o,e.CullFaceMode.disabled,u,n.id,w.layoutVertexBuffer,h,f,n.paint,t.transform.zoom,k)}}}}catch(P){x.e(P)}finally{x.f()}}function Rn(t,r,n,i,a,o,s){var l=t.context,c=l.gl,u=t.transform,h=n.paint.get("fill-extrusion-pattern"),f=h.constantOr(1),p=n.getCrossfadeParameters(),m=n.paint.get("fill-extrusion-opacity"),v=[n.paint.get("fill-extrusion-ambient-occlusion-intensity"),n.paint.get("fill-extrusion-ambient-occlusion-radius")],g=n.layout.get("fill-extrusion-edge-radius"),y="globe"===u.projection.name?e.fillExtrusionHeightLift():0,x="globe"===u.projection.name,b=x?e.globeToMercatorTransition(u.zoom):0,_=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],w=[];x&&(w.push("PROJECTION_GLOBE_VIEW"),t.style.terrainSetForDrapingOnly()&&w.push("TERRAIN")),v[0]>0&&w.push("FAUX_AO");var k,S=d(i);try{for(S.s();!(k=S.n()).done;){var C=k.value,A=r.getTile(C),T=A.getBucket(n);if(T&&T.projection.name===u.projection.name){var E=T.programConfigurations.get(n.id),M=t.useProgram(f?"fillExtrusionPattern":"fillExtrusion",E,w);if(t.terrain){var I=t.terrain;if(t.style.terrainSetForDrapingOnly())I.setupElevationDraw(A,M,{useMeterToDem:!0});else{if(!T.enableTerrain)continue;if(I.setupElevationDraw(A,M,{useMeterToDem:!0}),zn(l,r,C,T,n,I),!T.centroidVertexBuffer){var P=M.attributes.a_centroid_pos;void 0!==P&&c.vertexAttrib2f(P,0,0)}}}f&&(t.context.activeTexture.set(c.TEXTURE0),A.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),E.updatePaintBuffers(p));var R=h.constantOr(null);if(R&&A.imageAtlas){var z=A.imageAtlas,L=z.patternPositions[R.to.toString()],D=z.patternPositions[R.from.toString()];L&&D&&E.setConstantPatternPositions(L,D)}var O=t.translatePosMatrix(C.projMatrix,A,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),F=u.projection.createInversionMatrix(u,C.canonical),j=n.paint.get("fill-extrusion-vertical-gradient"),N=f?$r(O,t,j,m,v,g,C,p,A,y,b,_,F):qr(O,t,j,m,v,g,C,y,b,_,F);t.prepareDrawProgram(l,M,C.toUnwrapped());var B=[];t.terrain&&B.push(T.centroidVertexBuffer),x&&B.push(T.layoutVertexExtBuffer),M.draw(l,l.gl.TRIANGLES,a,o,s,e.CullFaceMode.backCCW,N,n.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,n.paint,t.transform.zoom,E,B)}}}catch(Z){S.e(Z)}finally{S.f()}}function zn(t,r,n,i,a,o){for(var s,l,c,u=[function(t){var r=t.canonical.x-1,n=t.wrap;return r<0&&(r=(1<<t.canonical.z)-1,n--),new e.OverscaledTileID(t.overscaledZ,n,t.canonical.z,r,t.canonical.y)},function(t){var r=t.canonical.x+1,n=t.wrap;return r===1<<t.canonical.z&&(r=0,n++),new e.OverscaledTileID(t.overscaledZ,n,t.canonical.z,r,t.canonical.y)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)}],h=function(e){for(var t=r.getSource().minzoom,n=function(e){var t=r.getTileByID(e);if(t&&t.hasData())return t.getBucket(a)},i=0,o=[0,-1,1];i<o.length;i++){var s=o[i];if(!(e.overscaledZ+s<t)){var l=n(e.calculateScaledKey(e.overscaledZ+s));if(l)return l}}},f=[0,0,0],p=function(t,r){return f[0]=Math.min(t.min.y,r.min.y),f[1]=Math.max(t.max.y,r.max.y),f[2]=e.EXTENT-r.min.x>t.max.x?r.min.x-e.EXTENT:t.max.x,f},m=function(t,r){return f[0]=Math.min(t.min.x,r.min.x),f[1]=Math.max(t.max.x,r.max.x),f[2]=e.EXTENT-r.min.y>t.max.y?r.min.y-e.EXTENT:t.max.y,f},v=[function(e,t){return p(e,t)},function(e,t){return p(t,e)},function(e,t){return m(e,t)},function(e,t){return m(t,e)}],g=new e.pointGeometry(0,0),y=function(t,r,i,a,u){var h=[[a?i:t,a?t:i,0],[a?i:r,a?r:i,0]],d=u<0?e.EXTENT+u:u,f=[a?d:(t+r)/2,a?(t+r)/2:d,0];return 0===i&&u<0||0!==i&&u>0?o.getForTilePoints(c,[f],!0,l):h.push(f),o.getForTilePoints(n,h,!0,s),Math.max(h[0][2],h[1][2],f[2])/o.exaggeration()},x=0;x<4;x++){var b=(x<2?1:5)-x,_=i.borders[x];if(0!==_.length){var w=c=u[x](n),k=h(w);if(k&&k instanceof e.FillExtrusionBucket&&k.enableTerrain&&(i.borderDoneWithNeighborZ[x]!==k.canonical.z||k.borderDoneWithNeighborZ[b]!==i.canonical.z)&&(l=o.findDEMTileFor(w))&&l.dem){if(!s){var S=o.findDEMTileFor(n);if(!S||!S.dem)return;s=S}var C=k.borders[b],A=0,T=k.borderDoneWithNeighborZ[b]!==i.canonical.z;if(i.canonical.z===k.canonical.z){for(var E=0;E<_.length;E++){for(var M=i.featuresOnBorder[_[E]],I=M.borders[x],P=void 0;A<C.length&&!((P=k.featuresOnBorder[C[A]]).borders[b][1]>I[0]+3);)T&&k.encodeCentroid(void 0,P,!1),A++;if(P&&A<C.length){for(var R=A,z=0;!(P.borders[b][0]>I[1]-3)&&(z++,++A!==C.length);)P=k.featuresOnBorder[C[A]];if(P=k.featuresOnBorder[C[R]],M.intersectsCount()>1||P.intersectsCount()>1||1!==z){1!==z&&(A=R),i.encodeCentroid(void 0,M,!1),T&&k.encodeCentroid(void 0,P,!1);continue}var L=v[x](M,P),D=x%2?e.EXTENT-1:0;g.x=y(L[0],Math.min(e.EXTENT-1,L[1]),D,x<2,L[2]),g.y=0,i.encodeCentroid(g,M,!1),T&&k.encodeCentroid(g,P,!1)}else i.encodeCentroid(void 0,M,!1)}i.borderDoneWithNeighborZ[x]=k.canonical.z,i.needsCentroidUpdate=!0,T&&(k.borderDoneWithNeighborZ[b]=i.canonical.z,k.needsCentroidUpdate=!0)}else{var O,F=d(_);try{for(F.s();!(O=F.n()).done;){var j=O.value;i.encodeCentroid(void 0,i.featuresOnBorder[j],!1)}}catch(U){F.e(U)}finally{F.f()}if(T){var N,B=d(C);try{for(B.s();!(N=B.n()).done;){var Z=N.value;k.encodeCentroid(void 0,k.featuresOnBorder[Z],!1)}}catch(U){B.e(U)}finally{B.f()}k.borderDoneWithNeighborZ[b]=i.canonical.z,k.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[x]=k.canonical.z,i.needsCentroidUpdate=!0}}}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}var Ln=new e.Color(1,0,0,1),Dn=new e.Color(0,1,0,1),On=new e.Color(0,0,1,1),Fn=new e.Color(1,0,1,1),jn=new e.Color(0,1,1,1);function Nn(t,r,n){var i=t.context,a=t.transform,o=i.gl,s="globe"===a.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null,c=n.projMatrix;if(s&&e.globeToMercatorTransition(a.zoom)>0){var u=e.transitionTileAABBinECEF(n.canonical,a),h=e.globeDenormalizeECEF(u);c=e.multiply(new Float32Array(16),a.globeMatrix,h),e.multiply(c,a.projMatrix,c)}var d=t.useProgram("debug",null,l),f=r.getTileByID(n.key);t.terrain&&t.terrain.setupElevationDraw(f,d);var p=e.DepthMode.disabled,m=e.StencilMode.disabled,v=t.colorModeForRenderPass(),g="$debug";i.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s?f._makeGlobeTileDebugBuffers(t.context,a):f._makeDebugTileBoundsBuffers(t.context,a.projection);var y=f._tileDebugBuffer||t.debugBuffer,x=f._tileDebugIndexBuffer||t.debugIndexBuffer,b=f._tileDebugSegments||t.debugSegments;d.draw(i,o.LINE_STRIP,p,m,v,e.CullFaceMode.disabled,on(c,e.Color.red),g,y,x,b,null,null,null,[f._globeTileDebugBorderBuffer]);var _=f.latestRawTileData,w=Math.floor((_&&_.byteLength||0)/1024),k=r.getTile(n).tileSize,S=512/Math.min(k,512)*(n.overscaledZ/a.zoom)*.5,C=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(C+=" => ".concat(n.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();var r=e.debugOverlayCanvas,n=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,r.width,r.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(r),e.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(t,C+=" ".concat(w,"kb"));var A=f._tileDebugTextBuffer||t.debugBuffer,T=f._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,E=f._tileDebugTextSegments||t.debugSegments;d.draw(i,o.TRIANGLES,p,m,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,on(c,e.Color.transparent,S),g,A,T,E,null,null,null,[f._globeTileDebugTextBuffer])}function Bn(e,t,r,n){Un(e,0,t+r/2,e.transform.width,r,n)}function Zn(e,t,r,n){Un(e,t-r/2,0,r,e.transform.height,n)}function Un(t,r,n,i,a,o){var s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(r*e.exported.devicePixelRatio,n*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,a*e.exported.devicePixelRatio),s.clear({color:o}),l.disable(l.SCISSOR_TEST)}var Vn=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]).members;function Wn(e,t,r,n){e.emplaceBack(t,r,n)}var Gn=p((function t(r){f(this,t),this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Wn(this.vertexArray,-1,-1,1),Wn(this.vertexArray,1,-1,1),Wn(this.vertexArray,-1,1,1),Wn(this.vertexArray,1,1,1),Wn(this.vertexArray,-1,-1,-1),Wn(this.vertexArray,1,-1,-1),Wn(this.vertexArray,-1,1,-1),Wn(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=r.createVertexBuffer(this.vertexArray,Vn),this.indexBuffer=r.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}));function Hn(t,r,n,i,a,o){var s=t.gl,l=r.paint.get("sky-atmosphere-color"),c=r.paint.get("sky-atmosphere-halo-color"),u=r.paint.get("sky-atmosphere-sun-intensity"),h=function(e,t,r,n,i){return{u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:r,u_color_tint_r:[n.r,n.g,n.b,n.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}}(e.fromMat4(e.create$1(),i),a,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+o,r.skyboxTexture,0),n.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,h,"skyboxCapture",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}var Xn=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),Yn=function(){function t(r){f(this,t);var n=new e.StructArrayLayout5f20;n.emplaceBack(-1,1,1,0,0),n.emplaceBack(1,1,1,1,0),n.emplaceBack(1,-1,1,1,1),n.emplaceBack(-1,-1,1,0,1);var i=new e.StructArrayLayout3ui6;i.emplaceBack(0,1,2),i.emplaceBack(2,3,0),this.vertexBuffer=r.createVertexBuffer(n,Xn.members),this.indexBuffer=r.createIndexBuffer(i),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}return p(t,[{key:"destroy",value:function(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}]),t}(),qn={symbol:function(t,r,n,i,a){if("translucent"===t.renderPass){var o=e.StencilMode.disabled,s=t.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(t,r,n,i,a,o,s){var l,c=r.transform,u="map"===a,h="map"===o,f=d(t);try{for(f.s();!(l=f.n()).done;){var p=l.value,m=i.getTile(p),v=m.getBucket(n);if(v&&v.text&&v.text.segments.get().length){var g=e.evaluateSizeForZoom(v.textSizeData,c.zoom),y=Dt(p,v.getProjection(),c),x=c.calculatePixelsToTileUnitsMatrix(m),b=pt(y,m.tileID.canonical,h,u,c,v.getProjection(),x),_="none"!==n.layout.get("icon-text-fit")&&v.hasIconData();if(g){var w=Math.pow(2,c.zoom-m.tileID.overscaledZ);Tn(v,u,h,s,e.symbolSize,c,b,p,w,g,_)}}}}catch(k){f.e(k)}finally{f.f()}}(i,t,n,r,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),a),0!==n.paint.get("icon-opacity").constantOr(1)&&Mn(t,r,n,i,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),o,s),0!==n.paint.get("text-opacity").constantOr(1)&&Mn(t,r,n,i,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),o,s),r.map.showCollisionBoxes&&(Sn(t,r,n,i,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),Sn(t,r,n,i,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))}},circle:function(t,r,n,i){if("translucent"===t.renderPass){var a=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),s=n.paint.get("circle-stroke-opacity"),l=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0!==a.constantOr(1)||0!==o.constantOr(1)&&0!==s.constantOr(1)){for(var c=t.context,u=c.gl,h=t.transform,f=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),p=e.StencilMode.disabled,m=t.colorModeForRenderPass(),v="globe"===h.projection.name,g=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],y=[],x=0;x<i.length;x++){var b=i[x],_=r.getTile(b),w=_.getBucket(n);if(w&&w.projection.name===h.projection.name){var k=w.programConfigurations.get(n.id),S=nn(n);v&&S.push("PROJECTION_GLOBE_VIEW");var C=t.useProgram("circle",k,S),A=w.layoutVertexBuffer,T=w.globeExtVertexBuffer,E=w.indexBuffer,M=h.projection.createInversionMatrix(h,b.canonical),I={programConfiguration:k,program:C,layoutVertexBuffer:A,globeExtVertexBuffer:T,indexBuffer:E,uniformValues:rn(t,b,_,M,g,n),tile:_};if(l){var P,R=w.segments.get(),z=d(R);try{for(z.s();!(P=z.n()).done;){var L=P.value;y.push({segments:new e.SegmentVector([L]),sortKey:L.sortKey,state:I})}}catch(Y){z.e(Y)}finally{z.f()}}else y.push({segments:w.segments,sortKey:0,state:I})}}l&&y.sort((function(e,t){return e.sortKey-t.sortKey}));for(var D={useDepthForOcclusion:!v},O=0,F=y;O<F.length;O++){var j=F[O],N=j.state,B=N.programConfiguration,Z=N.program,U=N.layoutVertexBuffer,V=N.globeExtVertexBuffer,W=N.indexBuffer,G=N.uniformValues,H=N.tile,X=j.segments;t.terrain&&t.terrain.setupElevationDraw(H,Z,D),t.prepareDrawProgram(c,Z,H.tileID.toUnwrapped()),Z.draw(c,u.TRIANGLES,f,p,m,e.CullFaceMode.disabled,G,n.id,U,W,X,n.paint,h.zoom,B,[V])}}}},heatmap:function(t,r,n,i){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var a=t.context,o=a.gl,s=e.StencilMode.disabled,l=new e.ColorMode([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,r,n){var i=e.gl,a=t.width*n,o=t.height*n;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,a,o]);var s=r.heatmapFbo;if(!s||s&&(s.width!==a||s.height!==o)){s&&s.destroy();var l=i.createTexture();i.bindTexture(i.TEXTURE_2D,l),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),s=r.heatmapFbo=e.createFramebuffer(a,o,!1),function(e,t,r,n,i,a){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,i,a,0,o.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),n.colorAttachment.set(r)}(e,0,l,s,a,o)}else i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(a,t,n,"globe"===t.transform.projection.name?.5:.25),a.clear({color:e.Color.transparent});for(var c=t.transform,u="globe"===c.projection.name,h=u?["PROJECTION_GLOBE_VIEW"]:null,d=u?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,f=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)],p=0;p<i.length;p++){var m=i[p];if(!r.hasRenderableParent(m)){var v=r.getTile(m),g=v.getBucket(n);if(g&&g.projection.name===c.projection.name){var y=g.programConfigurations.get(n.id),x=t.useProgram("heatmap",y,h),b=t.transform.zoom;t.terrain&&t.terrain.setupElevationDraw(v,x),t.prepareDrawProgram(a,x,m.toUnwrapped());var _=c.projection.createInversionMatrix(c,m.canonical);x.draw(a,o.TRIANGLES,e.DepthMode.disabled,s,l,d,ln(t,m,v,_,f,b,n.paint.get("heatmap-intensity")),n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,n.paint,t.transform.zoom,y,u?[g.globeExtVertexBuffer]:null)}}}a.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,r){var n=t.context,i=n.gl,a=r.heatmapFbo;if(a){n.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),n.activeTexture.set(i.TEXTURE1);var o=r.colorRampTexture;o||(o=r.colorRampTexture=new e.Texture(n,r.colorRamp,i.RGBA)),o.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(n,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,function(e,t,r,n){return{u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}}(0,r),r.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,r.paint,t.transform.zoom)}}(t,n))},line:function(t,r,n,i){if("translucent"===t.renderPass){var a=n.paint.get("line-opacity"),o=n.paint.get("line-width");if(0!==a.constantOr(1)&&0!==o.constantOr(1)){var s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,u=n.paint.get("line-dasharray"),f=u.constantOr(1),p=n.layout.get("line-cap"),m=n.paint.get("line-pattern"),v=m.constantOr(1),g=n.paint.get("line-gradient"),y=n.getCrossfadeParameters(),x=v?"linePattern":"line",b=t.context,_=b.gl,w=function(e){var t=[];fn(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");var r=e.paint.get("line-trim-offset");0===r[0]&&0===r[1]||t.push("RENDER_LINE_TRIM_OFFSET");var n=e.paint.get("line-pattern").constantOr(1),i=1!==e.paint.get("line-opacity").constantOr(1);return!n&&i&&t.push("RENDER_LINE_ALPHA_DISCARD"),t}(n),k=w.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(k=!1);var S,C=d(i);try{var A=function(){var i=S.value,a=r.getTile(i);if(v&&!a.patternsLoaded())return"continue";var o=a.getBucket(n);if(!o)return"continue";t.prepareDrawTile();var d=o.programConfigurations.get(n.id),C=t.useProgram(x,d,w),A=m.constantOr(null);if(A&&a.imageAtlas){var T=a.imageAtlas,E=T.patternPositions[A.to.toString()],M=T.patternPositions[A.from.toString()];E&&M&&d.setConstantPatternPositions(E,M)}var I=u.constantOr(null),P=p.constantOr(null);if(!v&&I&&P&&a.lineAtlas){var R=a.lineAtlas,z=R.getDash(I.to,P),L=R.getDash(I.from,P);z&&L&&d.setConstantPatternPositions(z,L)}var D=n.paint.get("line-trim-offset"),O=h(D,2),F=O[0],j=O[1];if("round"===P||"square"===P){var N=1;F!==j&&(0===F&&(F-=N),1===j&&(j+=N))}var B=t.terrain?i.projMatrix:null,Z=v?un(t,a,n,y,B,c):cn(t,a,n,y,B,o.lineClipsArray.length,c,[F,j]);if(g){var U=o.gradients[n.id],V=U.texture;if(n.gradientVersion!==U.version){var W=256;if(n.stepInterpolant){var G=r.getSource().maxzoom,H=i.canonical.z===G?Math.ceil(1<<t.transform.maxZoom-i.canonical.z):1;W=e.clamp(e.nextPowerOfTwo(o.maxLineLength/e.EXTENT*1024*H),256,b.maxTextureSize)}U.gradient=e.renderColorRamp({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:W,image:U.gradient||void 0,clips:o.lineClipsArray}),U.texture?U.texture.update(U.gradient):U.texture=new e.Texture(b,U.gradient,_.RGBA),U.version=n.gradientVersion,V=U.texture}b.activeTexture.set(_.TEXTURE1),V.bind(n.stepInterpolant?_.NEAREST:_.LINEAR,_.CLAMP_TO_EDGE)}f&&(b.activeTexture.set(_.TEXTURE0),a.lineAtlasTexture.bind(_.LINEAR,_.REPEAT),d.updatePaintBuffers(y)),v&&(b.activeTexture.set(_.TEXTURE0),a.imageAtlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),d.updatePaintBuffers(y)),t.prepareDrawProgram(b,C,i.toUnwrapped());var X=function(r){C.draw(b,_.TRIANGLES,s,r,l,e.CullFaceMode.disabled,Z,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,n.paint,t.transform.zoom,d,[o.layoutVertexBuffer2])};if(k){var Y=t.stencilModeForClipping(i).ref;0===Y&&t.terrain&&b.clear({stencil:0});var q={func:_.EQUAL,mask:255};Z.u_alpha_discard_threshold=.8,X(new e.StencilMode(q,Y,255,_.KEEP,_.KEEP,_.INVERT)),Z.u_alpha_discard_threshold=0,X(new e.StencilMode(q,Y,255,_.KEEP,_.KEEP,_.KEEP))}else X(t.stencilModeForClipping(i))};for(C.s();!(S=C.n()).done;)A()}catch(T){C.e(T)}finally{C.f()}k&&(t.resetStencilClippingMasks(),t.terrain&&b.clear({stencil:0}))}}},fill:function(t,r,n,i){var a=n.paint.get("fill-color"),o=n.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=t.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){var u=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);Pn(t,r,n,i,u,s,!1)}if("translucent"===t.renderPass&&n.paint.get("fill-antialias")){var h=t.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);Pn(t,r,n,i,h,s,!0)}}},"fill-extrusion":function(t,r,n,i){var a=n.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===t.renderPass){var o=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==a||n.paint.get("fill-extrusion-pattern").constantOr(1))Rn(t,r,n,i,o,e.StencilMode.disabled,e.ColorMode.disabled),Rn(t,r,n,i,o,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{var s=t.colorModeForRenderPass();Rn(t,r,n,i,o,e.StencilMode.disabled,s)}}},hillshade:function(t,r,n,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var a,o=t.context,s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture,u="translucent"!==t.renderPass||c?[{},i]:t.stencilConfigForOverlap(i),f=h(u,2),p=f[0],m=f[1],v=d(m);try{for(v.s();!(a=v.n()).done;){var g=a.value,y=r.getTile(g);if(y.needsHillshadePrepare&&"offscreen"===t.renderPass)Rr(t,y,n,s,e.StencilMode.disabled,l);else if("translucent"===t.renderPass){var x=c&&t.terrain?t.terrain.stencilModeForRTTOverlap(g):p[g.overscaledZ];Ir(t,g,y,n,s,x,l)}}}catch(b){v.e(b)}finally{v.f()}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()}},raster:function(t,r,n,i,a,o){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&i.length){var s,l=t.context,c=l.gl,u=r.getSource(),f=t.useProgram("raster"),p=t.colorModeForRenderPass(),m=t.terrain&&t.terrain.renderingToTexture,v=u instanceof Ve||m?[{},i]:t.stencilConfigForOverlap(i),g=h(v,2),y=g[0],x=g[1],b=x[x.length-1].overscaledZ,_=!t.options.moving,w=d(x);try{for(w.s();!(s=w.n()).done;){var k=s.value,S=m?e.DepthMode.disabled:t.depthModeForSublayer(k.overscaledZ-b,1===n.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,c.LESS),C=k.toUnwrapped(),A=r.getTile(k);if(!m||A&&A.hasData()){var T=m?k.projMatrix:t.transform.calculateProjMatrix(C,_),E=t.terrain&&m?t.terrain.stencilModeForRTTOverlap(k):y[k.overscaledZ],M=o?0:n.paint.get("raster-fade-duration");A.registerFadeDuration(M);var I=r.findLoadedParent(k,0),P=Zr(A,I,r,t.transform,M),R=void 0,z=void 0;t.terrain&&t.terrain.prepareDrawTile();var L="nearest"===n.paint.get("raster-resampling")?c.NEAREST:c.LINEAR;l.activeTexture.set(c.TEXTURE0),A.texture.bind(L,c.CLAMP_TO_EDGE),l.activeTexture.set(c.TEXTURE1),I?(I.texture.bind(L,c.CLAMP_TO_EDGE),R=Math.pow(2,I.tileID.overscaledZ-A.tileID.overscaledZ),z=[A.tileID.canonical.x*R%1,A.tileID.canonical.y*R%1]):A.texture.bind(L,c.CLAMP_TO_EDGE);var D=pn(T,z||[0,0],R||1,P,n,u instanceof Ve?u.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(l,f,C),u instanceof Ve)u.boundsBuffer&&u.boundsSegments&&f.draw(l,c.TRIANGLES,S,e.StencilMode.disabled,p,e.CullFaceMode.disabled,D,n.id,u.boundsBuffer,t.quadTriangleIndexBuffer,u.boundsSegments);else{var O=t.getTileBoundsBuffers(A),F=O.tileBoundsBuffer,j=O.tileBoundsIndexBuffer,N=O.tileBoundsSegments;f.draw(l,c.TRIANGLES,S,E,p,e.CullFaceMode.disabled,D,n.id,F,j,N)}}}}catch(B){w.e(B)}finally{w.f()}t.resetStencilClippingMasks()}},background:function(t,r,n,i){var a=n.paint.get("background-color"),o=n.paint.get("background-opacity");if(0!==o){var s=t.context,l=s.gl,c=t.transform,u=c.tileSize,h=n.paint.get("background-pattern");if(!t.isPatternMissing(h)){var f=!h&&1===a.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===f){var p,m=e.StencilMode.disabled,v=t.depthModeForSublayer(0,"opaque"===f?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),g=t.colorModeForRenderPass(),y=t.useProgram(h?"backgroundPattern":"background"),x=i;x||(p=t.getBackgroundTiles(),x=Object.values(p).map((function(e){return e.tileID}))),h&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));var b,_=n.getCrossfadeParameters(),w=d(x);try{for(w.s();!(b=w.n()).done;){var k=b.value,S=k.toUnwrapped(),C=i?k.projMatrix:t.transform.calculateProjMatrix(S);t.prepareDrawTile();var A=r?r.getTile(k):p?p[k.key]:new e.Tile(k,u,c.zoom,t),T=h?wn(C,o,t,h,{tileID:k,tileSize:u},_):_n(C,o,a);t.prepareDrawProgram(s,y,S);var E=t.getTileBoundsBuffers(A),M=E.tileBoundsBuffer,I=E.tileBoundsIndexBuffer,P=E.tileBoundsSegments;y.draw(s,l.TRIANGLES,v,m,g,e.CullFaceMode.disabled,T,n.id,M,I,P)}}catch(R){w.e(R)}finally{w.f()}}}}},sky:function(t,r,n){var i=t.transform,a="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),o=n.paint.get("sky-opacity")*a;if(0!==o){var s=t.context,l=n.paint.get("sky-type"),c=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),u=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?n.needsSkyboxCapture(t)&&(function(t,r,n,i){var a=t.context,o=a.gl,s=r.skyboxFbo;if(!s){s=r.skyboxFbo=a.createFramebuffer(32,32,!1),r.skyboxGeometry=new Gn(a),r.skyboxTexture=a.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,r.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(var l=0;l<6;++l)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}a.bindFramebuffer.set(s.framebuffer),a.viewport.set([0,0,32,32]);var c=r.getCenter(t,!0),u=t.useProgram("skyboxCapture"),h=new Float64Array(16);e.identity(h),e.rotateY(h,h,.5*-Math.PI),Hn(a,r,u,h,c,0),e.identity(h),e.rotateY(h,h,.5*Math.PI),Hn(a,r,u,h,c,1),e.identity(h),e.rotateX(h,h,.5*-Math.PI),Hn(a,r,u,h,c,2),e.identity(h),e.rotateX(h,h,.5*Math.PI),Hn(a,r,u,h,c,3),e.identity(h),Hn(a,r,u,h,c,4),e.identity(h),e.rotateY(h,h,Math.PI),Hn(a,r,u,h,c,5),a.viewport.set([0,0,t.width,t.height])}(t,n),n.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,r,n,i,a){var o=t.context,s=o.gl,l=t.transform,c=t.useProgram("skybox");o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,r.skyboxTexture);var u=function(e,t,r,n,i){return{u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:n,u_temporal_offset:i}}(l.skyboxMatrix,r.getCenter(t,!1),0,i,a);t.prepareDrawProgram(o,c),c.draw(o,s.TRIANGLES,n,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(t,n,c,o,u):"gradient"===l&&"sky"===t.renderPass&&function(t,r,n,i,a){var o=t.context,s=o.gl,l=t.transform,c=t.useProgram("skyboxGradient");r.skyboxGeometry||(r.skyboxGeometry=new Gn(o)),o.activeTexture.set(s.TEXTURE0);var u=r.colorRampTexture;u||(u=r.colorRampTexture=new e.Texture(o,r.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);var h=function(t,r,n,i,a){return{u_matrix:t,u_color_ramp:0,u_center_direction:r,u_radius:e.degToRad(n),u_opacity:i,u_temporal_offset:a}}(l.skyboxMatrix,r.getCenter(t,!1),r.paint.get("sky-gradient-radius"),i,a);t.prepareDrawProgram(o,c),c.draw(o,s.TRIANGLES,n,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skyboxGradient",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(t,n,c,o,u)}},debug:function(e,t,r){for(var n=0;n<r.length;n++)Nn(e,t,r[n])},custom:function(t,r,n){var i=t.context,a=n.implementation;if(t.transform.projection.unsupportedLayers&&t.transform.projection.unsupportedLayers.includes("custom"))e.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===t.renderPass){var o=a.prerender;o&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),o.call(a,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(e.StencilMode.disabled);var s="3d"===a.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);i.setDepthMode(s),a.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}},$n=function(){function t(r,n){f(this,t),this.context=new Be(r),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new sr,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}return p(t,[{key:"updateTerrain",value:function(e,t){var r=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(r||this._terrain&&this._terrain.enabled){this._terrain||(this._terrain=new Gr(this,e));var n=this._terrain;this.transform.elevation=r?n:null,n.update(e,this.transform,t)}}},{key:"_updateFog",value:function(e){var t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)this.transform.fogCullDistSq=null;else{var r=t.getFovAdjustedRange(this.transform._fov),n=h(r,2),i=n[0],a=n[1];if(i>a)this.transform.fogCullDistSq=null;else{var o=i+.78*(a-i);this.transform.fogCullDistSq=o*o}}}},{key:"terrain",get:function(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}},{key:"resize",value:function(t,r){if(this.width=t*e.exported.devicePixelRatio,this.height=r*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style){var n,i=d(this.style.order);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.style._layers[a].resize()}}catch(o){i.e(o)}finally{i.f()}}}},{key:"setup",value:function(){var t=this.context,r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.StructArrayLayout4i8;a.emplaceBack(0,0,0,0),a.emplaceBack(e.EXTENT,0,e.EXTENT,0),a.emplaceBack(0,e.EXTENT,0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(a,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(o);for(var s=new e.StructArrayLayout1ui2,l=0,c=[0,1,3,2,0];l<c.length;l++){var u=c[l];s.emplaceBack(u)}this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();var h=this.context.gl;this.stencilClearMode=new e.StencilMode({func:h.ALWAYS,mask:0},0,255,h.ZERO,h.ZERO,h.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Yn(this.context)}},{key:"getMercatorTileBoundsBuffers",value:function(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}},{key:"getTileBoundsBuffers",value:function(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}},{key:"clearStencil",value:function(){var t=this.context,r=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,r.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Br(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"resetStencilClippingMasks",value:function(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}},{key:"_renderTileClippingMasks",value:function(t,r,n){if(r&&this.currentStencilSource!==r.id&&t.isTileClipped()&&n&&0!==n.length){if(this._tileClippingMaskIDs&&!this.terrain){var i,a=!1,o=d(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(void 0===this._tileClippingMaskIDs[s.key]){a=!0;break}}}catch(_){o.e(_)}finally{o.f()}if(!a)return}this.currentStencilSource=r.id;var l=this.context,c=l.gl;this.nextStencilID+n.length>256&&this.clearStencil(),l.setColorMode(e.ColorMode.disabled),l.setDepthMode(e.DepthMode.disabled);var u=this.useProgram("clippingMask");this._tileClippingMaskIDs={};var h,f=d(n);try{for(f.s();!(h=f.n()).done;){var p=h.value,m=r.getTile(p),v=this._tileClippingMaskIDs[p.key]=this.nextStencilID++,g=this.getTileBoundsBuffers(m),y=g.tileBoundsBuffer,x=g.tileBoundsIndexBuffer,b=g.tileBoundsSegments;u.draw(l,c.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:c.ALWAYS,mask:0},v,255,c.KEEP,c.KEEP,c.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Br(p.projMatrix),"$clipping",y,x,b)}}catch(_){f.e(_)}finally{f.f()}}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,r=this.context.gl;return new e.StencilMode({func:r.NOTEQUAL,mask:255},t,255,r.KEEP,r.KEEP,r.REPLACE)}},{key:"stencilModeForClipping",value:function(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);var r=this.context.gl;return new e.StencilMode({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,r.KEEP,r.KEEP,r.REPLACE)}},{key:"stencilConfigForOverlap",value:function(t){var r=this.context.gl,i=t.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),a=i[i.length-1].overscaledZ,o=i[0].overscaledZ-a+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var s={},l=0;l<o;l++)s[l+a]=new e.StencilMode({func:r.GEQUAL,mask:255},l+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=o,[s,i]}return[n({},a,e.StencilMode.disabled),i]}},{key:"colorModeForRenderPass",value:function(){var t=this.context.gl;if(this._showOverdrawInspector){var r=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(r,r,r,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}},{key:"depthModeForSublayer",value:function(t,r,n){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(n||this.context.gl.LEQUAL,r,[i,i])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(t,r){var n=this;this.style=t,this.options=r,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();var i=this.style.order,a=this.style._sourceCaches;for(var o in a){var s=a[o];s.used&&s.prepare(this.context)}var l={},c={},u={};for(var h in a){var f=a[h];l[h]=f.getVisibleCoordinates(),c[h]=l[h].slice().reverse(),u[h]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var p=0;p<i.length;p++)if(this.style._layers[i[p]].is3D()){this.opaquePassCutoff=p;break}if(this.terrain&&(this.terrain.updateTileBinding(u),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),e.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";var m,v=d(i);try{for(v.s();!(m=v.n()).done;){var g=m.value,y=this.style._layers[g],x=t._getLayerSourceCache(y);if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var b=x?c[x.id]:void 0;("custom"===y.type||y.isSky()||b&&b.length)&&this.renderLayer(this,x,y,b)}}}catch(I){v.e(I)}finally{v.f()}if(this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:r.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=r.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var _=this.style._layers[i[this.currentLayer]],w=t._getLayerSourceCache(_);if(!_.isSky()){var k=w?c[w.id]:void 0;this._renderTileClippingMasks(_,w,k),this.renderLayer(this,w,_,k)}}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,r){var n=t.context,i=n.gl,a=t.transform,o=new e.DepthMode(i.LEQUAL,e.DepthMode.ReadOnly,[0,1]),s=t.useProgram("globeAtmosphere",null,"globe"===a.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=e.globeToMercatorTransition(a.zoom),c=r.properties.get("color").toArray01(),u=r.properties.get("high-color").toArray01(),h=r.properties.get("space-color").toArray01PremultipliedAlpha(),d=e.identity$1([]);e.rotateY$1(d,d,-e.degToRad(a._center.lng)),e.rotateX$1(d,d,e.degToRad(a._center.lat)),e.rotateZ$1(d,d,a.angle),e.rotateX$1(d,d,-a._pitch);var f=e.fromQuat(new Float32Array(16),d),p=e.mapValue(r.properties.get("star-intensity"),0,1,0,.25),m=5e-4,v=e.mapValue(r.properties.get("horizon-blend"),0,1,m,.25),g=e.globeUseCustomAntiAliasing(t,n,a)&&v===m?a.worldSize/(2*Math.PI*1.025)-1:a.globeRadius,y=t.frameCounter/1e3%1,x=e.length(a.globeCenterInViewSpace),b=Math.sqrt(Math.pow(x,2)-Math.pow(g,2)),_=Math.acos(b/x),w=function(t,r,n,i,a,o,s,l,c,u,h,d,f,p){return{u_frustum_tl:t,u_frustum_tr:r,u_frustum_br:n,u_frustum_bl:i,u_horizon:a,u_transition:o,u_fadeout_range:s,u_color:l,u_high_color:c,u_space_color:u,u_star_intensity:h,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:d,u_horizon_angle:f,u_rotation_matrix:p}}(a.frustumCorners.TL,a.frustumCorners.TR,a.frustumCorners.BR,a.frustumCorners.BL,a.frustumCorners.horizon,l,v,c,u,h,p,y,_,f);t.prepareDrawProgram(n,s);var k=t.atmosphereBuffer;k&&s.draw(n,i.TRIANGLES,o,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,w,"skybox",k.vertexBuffer,k.indexBuffer,k.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var S=this.style._layers[i[this.currentLayer]],C=t._getLayerSourceCache(S);S.isSky()&&this.renderLayer(this,C,S,C?c[C.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){var A=this.style._layers[i[this.currentLayer]],T=t._getLayerSourceCache(A);if(A.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(A)){if(A.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer)}else{var E=T?("symbol"===A.type?u:c)[T.id]:void 0;this._renderTileClippingMasks(A,T,T?l[T.id]:void 0),this.renderLayer(this,T,A,E),++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){var M=null;e.values(this.style._layers).forEach((function(e){var r=t._getLayerSourceCache(e);r&&!e.isHidden(n.transform.zoom)&&(!M||M.getSource().maxzoom<r.getSource().maxzoom)&&(M=r)})),M&&this.options.showTileBoundaries&&qn.debug(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(e){var t=e.transform.padding;Bn(e,e.transform.height-(t.top||0),3,Ln),Bn(e,t.bottom||0,3,Dn),Zn(e,t.left||0,3,On),Zn(e,e.transform.width-(t.right||0),3,Fn);var r=e.transform.centerPoint;!function(e,t,r,n){Un(e,t-1,r-10,2,20,n),Un(e,t-10,r-1,20,2,n)}(e,r.x,e.transform.height-r.y,jn)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}}},{key:"renderLayer",value:function(e,t,r,n){r.isHidden(this.transform.zoom)||("background"===r.type||"sky"===r.type||"custom"===r.type||n&&n.length)&&(this.id=r.id,this.gpuTimingStart(r),e.transform.projection.unsupportedLayers&&e.transform.projection.unsupportedLayers.includes(r.type)||qn[r.type](e,t,r,n,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}},{key:"gpuTimingStart",value:function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,r=this.gpuTimers[e.id];r||(r=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),r.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,r.query)}}},{key:"gpuTimingDeferredRenderStart",value:function(){if(this.options.gpuTimingDeferredRender){var e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}},{key:"gpuTimingDeferredRenderEnd",value:function(){if(this.options.gpuTimingDeferredRender){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"gpuTimingEnd",value:function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"collectGpuTimers",value:function(){var e=this.gpuTimers;return this.gpuTimers={},e}},{key:"collectDeferredRenderGpuQueries",value:function(){var e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}},{key:"queryGpuTimers",value:function(e){var t={};for(var r in e){var n=e[r],i=this.context.extTimerQuery,a=i.getQueryObjectEXT(n.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n.query),t[r]=a}return t}},{key:"queryGpuTimeDeferredRender",value:function(e){if(!this.options.gpuTimingDeferredRender)return 0;var t,r=this.context.extTimerQuery,n=0,i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n+=r.getQueryObjectEXT(a,r.QUERY_RESULT_EXT)/1e6,r.deleteQueryEXT(a)}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"translatePosMatrix",value:function(t,r,n,i,a){if(!n[0]&&!n[1])return t;var o=a?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(o){var s=Math.sin(o),l=Math.cos(o);n=[n[0]*l-n[1]*s,n[0]*s+n[1]*l]}var c=[a?n[0]:H(r,n[0],this.transform.zoom),a?n[1]:H(r,n[1],this.transform.zoom),0],u=new Float32Array(16);return e.translate(u,t,c),u}},{key:"saveTileTexture",value:function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}},{key:"getTileTexture",value:function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null}},{key:"isPatternMissing",value:function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString()),r=this.imageManager.getPattern(e.to.toString());return!t||!r}},{key:"terrainRenderModeElevated",value:function(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}},{key:"currentGlobalDefines",value:function(){var e=this.terrain&&this.terrain.renderingToTexture,t=this.style&&this.style.fog,r=[];return this.terrainRenderModeElevated()&&r.push("TERRAIN"),"globe"===this.transform.projection.name&&r.push("GLOBE"),t&&!e&&0!==t.getOpacity(this.transform.pitch)&&r.push("FOG"),e&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}},{key:"useProgram",value:function(e,t,r){this.cache=this.cache||{};var n=r||[],i=this.currentGlobalDefines().concat(n),a=Hr.cacheKey(Cr[e],e,i,t);return this.cache[a]||(this.cache[a]=new Hr(this.context,e,Cr[e],t,kn[e],i)),this.cache[a]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}},{key:"prepareDrawTile",value:function(){this.terrain&&this.terrain.prepareDrawTile()}},{key:"prepareDrawProgram",value:function(t,r,n){if(!this.terrain||!this.terrain.renderingToTexture){var i=this.style.fog;if(i){var a=i.getOpacity(this.transform.pitch),o=function(t,r,n,i,a,o,s,l,c,u,h){var d=t.transform,f=r.properties.get("color").toArray01();f[3]=i;var p=t.frameCounter/1e3%1;return{u_fog_matrix:n?d.calculateFogTileMatrix(n):t.identityMat,u_fog_range:r.getFovAdjustedRange(d._fov),u_fog_color:f,u_fog_horizon_blend:r.properties.get("horizon-blend"),u_fog_temporal_offset:p,u_frustum_tl:a,u_frustum_tr:o,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:u,u_viewport:h,u_globe_transition:e.globeToMercatorTransition(d.zoom),u_is_globe:+("globe"===d.projection.name)}}(this,i,n,a,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);r.setFogUniformValues(t,o)}}}},{key:"setTileLoadedFlag",value:function(e){this.tileLoaded=e}},{key:"saveCanvasCopy",value:function(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}},{key:"canvasCopy",value:function(){var e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}},{key:"getCanvasCopiesAndTimestamps",value:function(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}},{key:"averageElevationNeedsEasing",value:function(){if(!this.transform._elevation)return!1;var e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}},{key:"getBackgroundTiles",value:function(){var t,r=this._backgroundTiles,n=this._backgroundTiles={},i=this.transform.coveringTiles({tileSize:512}),a=d(i);try{for(a.s();!(t=a.n()).done;){var o=t.value;n[o.key]=r[o.key]||new e.Tile(o,512,this.transform.tileZoom,this)}}catch(s){a.e(s)}finally{a.f()}return n}},{key:"clearBackgroundTiles",value:function(){this._backgroundTiles={}}}]),t}(),Kn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(f(this,t),isNaN(e)||e<0||isNaN(r)||r<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=r,this.left=n,this.right=i}return p(t,[{key:"interpolate",value:function(t,r,n){return null!=r.top&&null!=t.top&&(this.top=e.number(t.top,r.top,n)),null!=r.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,r.bottom,n)),null!=r.left&&null!=t.left&&(this.left=e.number(t.left,r.left,n)),null!=r.right&&null!=t.right&&(this.right=e.number(t.right,r.right,n)),this}},{key:"getCenter",value:function(t,r){var n=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+r-this.bottom)/2,0,r);return new e.pointGeometry(n,i)}},{key:"equals",value:function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}},{key:"clone",value:function(){return new t(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),t}();function Jn(t,r){var n=e.getColumn(t,3);e.fromQuat(t,r),e.setColumn(t,3,n)}function Qn(t,r){var n=e.identity$1([]);return e.rotateZ$1(n,n,-r),e.rotateX$1(n,n,-t),n}function ei(t,r){var n=[t[0],t[1],0],i=[r[0],r[1],0];if(e.length(n)>=1e-15){var a=e.normalize([],n);e.scale$2(i,a,e.dot(i,a)),r[0]=i[0],r[1]=i[1]}var o=e.cross([],r,t);if(e.len(o)<1e-15)return null;var s=Math.atan2(-o[1],o[0]);return Qn(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),s)}var ti=function(){function t(e,r){f(this,t),this.position=e,this.orientation=r}return p(t,[{key:"position",get:function(){return this._position},set:function(t){if(t){var r=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(r.x=e.wrap(r.x,0,1)),this._position=r}else this._position=null}},{key:"lookAtPoint",value:function(t,r){if(this.orientation=null,this.position){var n=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,i=this.position,a=e.MercatorCoordinate.fromLngLat(t,n),o=[a.x-i.x,a.y-i.y,a.z-i.z];r||(r=[0,0,1]),r[2]=Math.abs(r[2]),this.orientation=ei(o,r)}}},{key:"setPitchBearing",value:function(t,r){this.orientation=Qn(e.degToRad(t),e.degToRad(-r))}}]),t}(),ri=function(){function t(r,n){f(this,t),this._transform=e.identity([]),this.orientation=n,this.position=r}return p(t,[{key:"mercatorPosition",get:function(){var t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}},{key:"position",get:function(){var t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]},set:function(t){var r;t&&e.setColumn(this._transform,3,[(r=t)[0],r[1],r[2],1])}},{key:"orientation",get:function(){return this._orientation},set:function(t){this._orientation=t||e.identity$1([]),t&&Jn(this._transform,this._orientation)}},{key:"getPitchBearing",value:function(){var e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}},{key:"setPitchBearing",value:function(e,t){this._orientation=Qn(e,t),Jn(this._transform,this._orientation)}},{key:"forward",value:function(){var t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}},{key:"up",value:function(){var t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}},{key:"right",value:function(){var t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}},{key:"getCameraToWorld",value:function(t,r){var n=new Float64Array(16);return e.invert(n,this.getWorldToCamera(t,r)),n}},{key:"getWorldToCameraPosition",value:function(t,r,n){var i=this.position;e.scale$2(i,i,-t);var a=new Float64Array(16);return e.fromScaling(a,[n,n,n]),e.translate(a,a,i),a[10]*=r,a}},{key:"getWorldToCamera",value:function(t,r){var n=new Float64Array(16),i=new Float64Array(4),a=this.position;return e.conjugate(i,this._orientation),e.scale$2(a,a,-t),e.fromQuat(n,i),e.translate(n,n,a),n[1]*=-1,n[5]*=-1,n[9]*=-1,n[13]*=-1,n[8]*=r,n[9]*=r,n[10]*=r,n[11]*=r,n}},{key:"getCameraToClipPerspective",value:function(t,r,n,i){var a=new Float64Array(16);return e.perspective(a,t,r,n,i),a}},{key:"getDistanceToElevation",value:function(t){var r=0===t?0:e.mercatorZfromAltitude(t,this.position[1]),n=this.forward();return(r-this.position[2])/n[2]}},{key:"clone",value:function(){return new t(u(this.position),u(this.orientation))}}]),t}();function ni(t,r){var n=ai(t.projection,t.zoom,t.width,t.height),i=function(t,r,n,i,a){var o=new e.LngLat(n.lng-180*oi,n.lat),s=new e.LngLat(n.lng+180*oi,n.lat),l=t.project(o.lng,o.lat),c=t.project(s.lng,s.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),h=e.MercatorCoordinate.fromLngLat(n);h.y=e.clamp(h.y,-.999975,.999975);var d=h.toLngLat(),f=t.project(d.lng,d.lat),p=e.MercatorCoordinate.fromLngLat(d);p.x+=oi;var m=p.toLngLat(),v=t.project(m.lng,m.lat),g=li(v.x-f.x,v.y-f.y,u),y=e.MercatorCoordinate.fromLngLat(d);y.y+=oi;var x=y.toLngLat(),b=t.project(x.lng,x.lat),_=li(b.x-f.x,b.y-f.y,u),w=Math.abs(g.x)/Math.abs(_.y),k=e.identity([]);e.rotateZ(k,k,-u*(1-(a?0:i)));var S=e.identity([]);return e.scale(S,S,[1,1-(1-w)*i,1]),S[4]=-_.x/_.y*i,e.rotateZ(S,S,u),e.multiply(S,k,S),S}(t.projection,0,t.center,n,r),a=ii(t);return e.scale(i,i,[a,a,1]),i}function ii(t){var r=t.projection,n=ai(t.projection,t.zoom,t.width,t.height),i=si(r,t.center),a=si(r,e.LngLat.convert(r.center));return Math.pow(2,i*n+(1-n)*a)}function ai(t,r,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=t.range;if(!o)return 0;var s=Math.min(a,Math.max(n,i)),l=Math.log(s/1024)/Math.LN2;return e.smoothstep(o[0]+l,o[1]+l,r)}var oi=1/4e4;function si(t,r){var n=e.clamp(r.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(r.lng-180*oi,n),a=new e.LngLat(r.lng+180*oi,n),o=t.project(i.lng,n),s=t.project(a.lng,n),l=e.MercatorCoordinate.fromLngLat(i),c=e.MercatorCoordinate.fromLngLat(a),u=s.x-o.x,h=s.y-o.y,d=c.x-l.x,f=c.y-l.y,p=Math.sqrt((d*d+f*f)/(u*u+h*h));return Math.log(p)/Math.LN2}function li(e,t,r){var n=Math.cos(r),i=Math.sin(r);return{x:e*n-t*i,y:e*i+t*n}}var ci=function(){function r(t,n,i,a,o,s,l){f(this,r),this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==a?60:a,this.setProjection(s),this.setMaxBounds(l),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Kn,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new ri,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}return p(r,[{key:"clone",value:function(){var e=new r(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}},{key:"elevation",get:function(){return this._elevation},set:function(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}},{key:"updateElevation",value:function(e){var t=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||t)&&this._updateCameraOnTerrain(),(e||t)&&this._constrainCameraAltitude(),this._calcMatrices()}},{key:"getProjection",value:function(){return e.pick(this.projection,["name","center","parallels"])}},{key:"setProjection",value:function(r){this.projectionOptions=r||{name:"mercator"};var n=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);var i=!t(n,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}},{key:"setMercatorFromTransition",value:function(){var t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});var r=t!==this.projection.name;return r&&this._calcMatrices(),r}},{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}},{key:"minPitch",get:function(){return this._minPitch},set:function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies},set:function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"cameraWorldSize",get:function(){var e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}},{key:"pixelsPerMeter",get:function(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}},{key:"cameraPixelsPerMeter",get:function(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new e.pointGeometry(this.width,this.height)}},{key:"bearing",get:function(){return e.wrap(this.rotation,-180,180)},set:function(e){this.rotation=e}},{key:"rotation",get:function(){return-this.angle/Math.PI*180},set:function(t){var r,n=-t*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);e[0]=n*l+a*s,e[1]=i*l+o*s,e[2]=n*-s+a*l,e[3]=i*-s+o*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){var r=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())}},{key:"aspect",get:function(){return this.width/this.height}},{key:"fovX",get:function(){return this._fov}},{key:"fovY",get:function(){var e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}},{key:"fov",set:function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}},{key:"averageElevation",get:function(){return this._averageElevation},set:function(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}},{key:"_setZoom",value:function(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}},{key:"_updateCameraOnTerrain",value:function(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);var e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}},{key:"_updateSeaLevelZoom",value:function(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}},{key:"sampleAverageElevation",value:function(){if(!this._elevation)return 0;for(var t=this._elevation,r=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],n=this.horizonLineFromTop(),i=0,a=0,o=0;o<r.length;o++){var s=new e.pointGeometry(r[o][0]*this.width,n+r[o][1]*(this.height-n)),l=t.pointCoordinate(s);if(l){var c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*c,a+=c}}return 0===a?NaN:i/a}},{key:"center",get:function(){return this._center},set:function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}},{key:"_updateZoomFromElevation",value:function(){if(null!=this._seaLevelZoom&&this._elevation){var e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),r=this.pixelsPerMeter/this.worldSize*t,n=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),a=Math.max(n-r,i);this._setZoom(this._zoomFromMercatorZ(a))}}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}},{key:"computeZoomRelativeTo",value:function(t){var r,n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));r=t.z<this._camera.position[2]?[n.x,n.y,n.z]:[t.x,t.y,t.z];var i=e.length(e.sub([],this._camera.position,r));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}},{key:"setFreeCameraOptions",value:function(t){if(this.height&&(t.position||t.orientation)){this._updateCameraState();var r=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(r=this._setCameraOrientation(t.orientation)),t.position){var n=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(n,this._camera.position)||(this._setCameraPosition(n),r=!0)}r&&(this._updateStateFromCamera(),this.recenterOnTerrain())}}},{key:"getFreeCameraOptions",value:function(){this._updateCameraState();var t=this._camera.position,r=new ti;return r.position=new e.MercatorCoordinate(t[0],t[1],t[2]),r.orientation=this._camera.orientation,r._elevation=this.elevation,r._renderWorldCopies=this.renderWorldCopies,r}},{key:"_setCameraOrientation",value:function(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);var r=e.transformQuat([],[0,0,-1],t),n=e.transformQuat([],[0,-1,0],t);if(n[2]<0)return!1;var i=ei(r,n);return!!i&&(this._camera.orientation=i,!0)}},{key:"_setCameraPosition",value:function(t){var r=this.zoomScale(this.minZoom)*this.tileSize,n=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/n,i/r),this._camera.position=t}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"fovAboveCenter",get:function(){return this._fov*(.5+this.centerOffset.y/this.height)}},{key:"isPaddingEqual",value:function(e){return this._edgeInsets.equals(e)}},{key:"interpolatePadding",value:function(e,t,r){this._unmodified=!1,this._edgeInsets.interpolate(e,t,r),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}},{key:"getVisibleUnwrappedCoordinates",value:function(t){var r=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies)for(var n=this.pointCoordinate(new e.pointGeometry(0,0)),i=this.pointCoordinate(new e.pointGeometry(this.width,0)),a=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),o=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(n.x,i.x,a.x,o.x)),l=Math.floor(Math.max(n.x,i.x,a.x,o.x)),c=1,u=s-c;u<=l+c;u++)0!==u&&r.push(new e.UnwrappedTileID(u,t));return r}},{key:"coveringTiles",value:function(t){var r=this,n=this.coveringZoomLevel(t),i=n,a=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);var s=this.locationCoordinate(this.center),l=this.center.lat,c=1<<n,u=[c*s.x,c*s.y,0],h="globe"===this.projection.name,d=!h,f=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,d),p=h?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),m=c*e.mercatorZfromAltitude(1,this.center.lat),v=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),g=[c*p.x,c*p.y,v*(d?1:m)],y=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),x=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,b=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,_=t.isTerrainDEM?-b:this._elevation?this._elevation.getMinElevationBelowMSL():0,w=this.projection.isReprojectedInTileSpace?ii(this):1,k=function(t){var n=1/4e4,i=new e.MercatorCoordinate(t.x+n,t.y,t.z),a=new e.MercatorCoordinate(t.x,t.y+n,t.z),o=t.toLngLat(),s=i.toLngLat(),l=a.toLngLat(),c=r.locationCoordinate(o),u=r.locationCoordinate(s),h=r.locationCoordinate(l),d=Math.hypot(u.x-c.x,u.y-c.y),f=Math.hypot(h.x-c.x,h.y-c.y);return Math.sqrt(d*f)*w/n},S=function(t){var n=b,i=_;return{aabb:e.tileAABB(r,c,0,0,0,t,i,n,r.projection),zoom:0,x:0,y:0,minZ:i,maxZ:n,wrap:t,fullyVisible:!1}},C=[],A=[],T=n,E=t.reparseOverscaled?i:n,M=function(e){return e*e},I=M((v-this._centerAltitude)*m),P=function(e){if(r._elevation&&e.tileID&&o){var t=r._elevation.getMinMaxForTile(e.tileID),n=e.aabb;t?(n.min[2]=t.min,n.max[2]=t.max,n.center[2]=(n.min[2]+n.max[2])/2):(e.shouldSplit=R(e),e.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=r._centerAltitude))}},R=function(t){if(t.zoom<x)return!0;if(t.zoom===T)return!1;if(null!=t.shouldSplit)return t.shouldSplit;var n=t.aabb.distanceX(g),o=t.aabb.distanceY(g),s=I,c=1;if(h){s=M(t.aabb.distanceZ(g));var u=Math.pow(2,t.zoom),d=e.latFromMercatorY((t.y+1)/u),f=e.latFromMercatorY(t.y/u),p=Math.min(Math.max(l,d),f),v=e.circumferenceAtLatitude(p)/e.circumferenceAtLatitude(l);if(c=p===l?1/Math.max(1,r._mercatorScaleRatio-.3):Math.min(1,v/r._mercatorScaleRatio),r.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===T-1&&v>=.9)return!0}else if(a&&(s=M(t.aabb.distanceZ(g)*m)),r.projection.isReprojectedInTileSpace&&i<=5){var b=Math.pow(2,t.zoom),_=k(new e.MercatorCoordinate((t.x+.5)/b,(t.y+.5)/b));c=_>.85?1:_}var w=n*n+o*o+s,S=M((1<<T-t.zoom)*y*c*function(e,t){if(t*M(.707)<e)return 1;var r=Math.sqrt(t/e);return r/(1.4144271570014144+(Math.pow(1.1,r-1.4144271570014144+1)-1)/(1.1-1)-1)}(Math.max(s,I),w));return w<S};if(this.renderWorldCopies)for(var z=1;z<=3;z++)C.push(S(-z)),C.push(S(z));for(C.push(S(0));C.length>0;){var L=C.pop(),D=L.x,O=L.y,F=L.fullyVisible;if(!F){var j=L.aabb.intersects(f);if(0===j)continue;F=2===j}if(L.zoom!==T&&R(L))for(var N=0;N<4;N++){var B=(D<<1)+N%2,Z=(O<<1)+(N>>1),U={aabb:o?L.aabb.quadrant(N):e.tileAABB(this,c,L.zoom+1,B,Z,L.wrap,L.minZ,L.maxZ,this.projection),zoom:L.zoom+1,x:B,y:Z,wrap:L.wrap,fullyVisible:F,tileID:void 0,shouldSplit:void 0,minZ:L.minZ,maxZ:L.maxZ};a&&!h&&(U.tileID=new e.OverscaledTileID(L.zoom+1===T?E:L.zoom+1,L.wrap,L.zoom+1,B,Z),P(U)),C.push(U)}else{var V=L.zoom===T?E:L.zoom;if(t.minzoom&&t.minzoom>V)continue;var W=u[0]-(.5+D+(L.wrap<<L.zoom))*(1<<n-L.zoom),G=u[1]-.5-O,H=L.tileID?L.tileID:new e.OverscaledTileID(V,L.wrap,L.zoom,D,O);A.push({tileID:H,distanceSq:W*W+G*G})}}if(this.fogCullDistSq){var X=this.fogCullDistSq,Y=this.horizonLineFromTop();A=A.filter((function(n){var i=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],o=r.calculateFogTileMatrix(n.tileID.toUnwrapped());e.transformMat4$1(i,i,o),e.transformMat4$1(a,a,o);var s=e.getAABBPointSquareDist(i,a);if(0===s)return!0;var l=!1,c=r._elevation;if(c&&s>X&&0!==Y){var u,h=r.calculateProjMatrix(n.tileID.toUnwrapped());t.isTerrainDEM||(u=c.getMinMaxForTile(n.tileID)),u||(u={min:_,max:b});var d=e.furthestTileCorner(r.rotation),f=[d[0]*e.EXTENT,d[1]*e.EXTENT,u.max];e.transformMat4(f,f,h),l=(1-f[1])*r.height*.5<Y}return s<X||l}))}return A.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(t){var r=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),n=this.projection.project(t.lng,r);return new e.pointGeometry(n.x*this.worldSize,n.y*this.worldSize)}},{key:"unproject",value:function(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}},{key:"point",get:function(){return this.project(this.center)}},{key:"setLocationAtPoint",value:function(t,r){var n,i,a=this.centerPoint;if("globe"===this.projection.name){var o=this.worldSize;n=(r.x-a.x)/o,i=(r.y-a.y)/o}else{var s=this.pointCoordinate(r),l=this.pointCoordinate(a);n=s.x-l.x,i=s.y-l.y}var c=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(c.x-n,c.y-i))}},{key:"setLocation",value:function(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(e){return this.projection.locationPoint(this,e)}},{key:"locationPoint3D",value:function(e){return this.projection.locationPoint(this,e,!0)}},{key:"pointLocation",value:function(e){return this.coordinateLocation(this.pointCoordinate(e))}},{key:"pointLocation3D",value:function(e){return this.coordinateLocation(this.pointCoordinate3D(e))}},{key:"locationCoordinate",value:function(t,r){var n=r?e.mercatorZfromAltitude(r,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,n)}},{key:"coordinateLocation",value:function(e){return this.projection.unproject(e.x,e.y)}},{key:"pointRayIntersection",value:function(t,r){var n=null!=r?r:this._centerAltitude,i=[t.x,t.y,0,1],a=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(a,a,this.pixelMatrixInverse);var o=a[3];e.scale$1(i,i,1/i[3]),e.scale$1(a,a,1/o);var s=i[2],l=a[2];return{p0:i,p1:a,t:s===l?0:(n-s)/(l-s)}}},{key:"screenPointToMercatorRay",value:function(t){var r=[t.x,t.y,0,1],n=[t.x,t.y,1,1];return e.transformMat4$1(r,r,this.pixelMatrixInverse),e.transformMat4$1(n,n,this.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),e.scale$1(n,n,1/n[3]),r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,e.scale$1(r,r,1/this.worldSize),e.scale$1(n,n,1/this.worldSize),new e.Ray([r[0],r[1],r[2]],e.normalize([],e.sub([],n,r)))}},{key:"rayIntersectionCoordinate",value:function(t){var r=t.p0,n=t.p1,i=t.t,a=e.mercatorZfromAltitude(r[2],this._center.lat),o=e.mercatorZfromAltitude(n[2],this._center.lat);return new e.MercatorCoordinate(e.number(r[0],n[0],i)/this.worldSize,e.number(r[1],n[1],i)/this.worldSize,e.number(a,o,i))}},{key:"pointCoordinate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,e.x,e.y,t)}},{key:"pointCoordinate3D",value:function(t){if(!this.elevation)return this.pointCoordinate(t);var r=this.projection.pointCoordinate3D(this,t.x,t.y);if(r)return new e.MercatorCoordinate(r[0],r[1],r[2]);var n=0,i=this.horizonLineFromTop();if(t.y>i)return this.pointCoordinate(t);for(var a=.02*i,o=t.clone(),s=0;s<10&&i-n>a;s++){o.y=e.number(n,i,.66);var l=this.projection.pointCoordinate3D(this,o.x,o.y);l?(i=o.y,r=l):n=o.y}return r?new e.MercatorCoordinate(r[0],r[1],r[2]):this.pointCoordinate(t)}},{key:"isPointAboveHorizon",value:function(e){return this.projection.isPointAboveHorizon(this,e)}},{key:"_coordinatePoint",value:function(t,r){var n=r&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,n+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.pointGeometry(i[0]/i[3],i[1]/i[3]):new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}},{key:"_getGlobeBounds",value:function(){var t=this,r=this._edgeInsets,n=r.top,i=r.left,a=this.height-this._edgeInsets.bottom,o=this.width-this._edgeInsets.right,s=this.pointCoordinate3D(new e.pointGeometry(i,n)),l=this.pointCoordinate3D(new e.pointGeometry(o,n)),c=this.pointCoordinate3D(new e.pointGeometry(o,a)),u=this.pointCoordinate3D(new e.pointGeometry(i,a)),h=Math.min(s.x,u.x),d=Math.max(l.x,c.x),f=Math.min(s.y,l.y),p=Math.max(u.y,c.y),m=Math.pow(2,-this.zoom)/16,v=function r(n,i,a,o){var s=(n+a)/2,l=(i+o)/2,c=new e.pointGeometry(s,l),u=t.pointCoordinate3D(c),v=Math.max(0,h-u.x,f-u.y,u.x-d,u.y-p);h=Math.min(h,u.x),d=Math.max(d,u.x),f=Math.min(f,u.y),p=Math.max(p,u.y),v>m&&(r(n,i,s,l),r(s,l,a,o))};v(i,n,o,n),v(o,n,o,a),v(o,a,i,a),v(i,a,i,n);var g=new e.LngLat(e.lngFromMercatorX(d),e.latFromMercatorY(f)),y=new e.LngLat(e.lngFromMercatorX(h),e.latFromMercatorY(p));return new e.LngLatBounds(y,g)}},{key:"_getBounds",value:function(t,r){if("globe"===this.projection.name)return this._getGlobeBounds();var n=new e.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),i=new e.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),a=new e.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),o=new e.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom),s=this.pointCoordinate(n,t),l=this.pointCoordinate(i,t),c=this.pointCoordinate(a,r),u=this.pointCoordinate(o,r),h=function(e,t){return(t.y-e.y)/(t.x-e.x)};return s.y>1&&l.y>=0?s=new e.MercatorCoordinate((1-u.y)/h(u,s)+u.x,1):s.y<0&&l.y<=1&&(s=new e.MercatorCoordinate(-u.y/h(u,s)+u.x,0)),l.y>1&&s.y>=0?l=new e.MercatorCoordinate((1-c.y)/h(c,l)+c.x,1):l.y<0&&s.y<=1&&(l=new e.MercatorCoordinate(-c.y/h(c,l)+c.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(s)).extend(this.coordinateLocation(l)).extend(this.coordinateLocation(u)).extend(this.coordinateLocation(c))}},{key:"_getBounds3D",value:function(){var e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBounds(0,0);var t=e.visibleDemTiles.reduce((function(e,t){if(t.dem){var r=t.dem.tree;e.min=Math.min(e.min,r.minimums[0]),e.max=Math.max(e.max,r.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBounds(t.min*e.exaggeration(),t.max*e.exaggeration())}},{key:"getBounds",value:function(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}},{key:"horizonLineFromTop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,r=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,r):r}},{key:"getMaxBounds",value:function(){return this.maxBounds}},{key:"setMaxBounds",value:function(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}},{key:"calculatePosMatrix",value:function(e,t){return this.projection.createTileMatrix(this,t,e)}},{key:"calculateDistanceTileData",value:function(t){var r=t.key,n=this._distanceTileDataCache;if(n[r])return n[r];var i=t.canonical,a=1/this.height,o=this.cameraWorldSize/this.zoomScale(i.z),s=(i.x+Math.pow(2,i.z)*t.wrap)*o,l=i.y*o,c=this.point,u=this.angle,h=Math.sin(-u),d=-Math.cos(-u);return n[r]={bearing:[h,d],center:[(c.x-s)*a,(c.y-l)*a],scale:o/e.EXTENT*a},n[r]}},{key:"calculateFogTileMatrix",value:function(t){var r=t.key,n=this._fogTileMatrixCache;if(n[r])return n[r];var i=this.projection.createTileMatrix(this,this.cameraWorldSize,t);return e.multiply(i,this.worldToFogMatrix,i),n[r]=new Float32Array(i),n[r]}},{key:"calculateProjMatrix",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.key,i=r?this._alignedProjMatrixCache:this._projMatrixCache;if(i[n])return i[n];var a=this.calculatePosMatrix(t,this.worldSize);return e.multiply(a,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:r?this.alignedProjMatrix:this.projMatrix,a),i[n]=new Float32Array(a),i[n]}},{key:"calculatePixelsToTileUnitsMatrix",value:function(t){var r=t.tileID.key,n=this._pixelsToTileUnitsCache;if(n[r])return n[r];var i=function(t,r){var n,i,a,o,s,l,c,u,h=t.tileTransform.scale*e.EXTENT/(t.tileSize*Math.pow(2,r.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return n=new Float32Array(4),o=(i=r.inverseAdjustmentMatrix)[1],s=i[2],l=i[3],u=(a=[h,h])[1],n[0]=i[0]*(c=a[0]),n[1]=o*c,n[2]=s*u,n[3]=l*u,n}(t,this);return n[r]=i,n[r]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"recenterOnTerrain",value:function(){if(this._elevation&&"globe"!==this.projection.name){var t=this._elevation;this._updateCameraState();var r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,n=this._computeCameraPosition(r),i=this._camera.forward(),a=e.mercatorZfromAltitude(1,this._center.lat);n[2]/=a,i[2]/=a,e.normalize(i,i);var o=t.raycast(n,i,t.exaggeration());if(o){var s=e.scaleAndAdd([],n,i,o),l=new e.MercatorCoordinate(s[0],s[1],e.mercatorZfromAltitude(s[2],e.latFromMercatorY(s[1]))),c=(l.z+e.length([l.x-n[0],l.y-n[1],l.z-n[2]*a]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(c),this._centerAltitude=l.toAltitude(),this._center=this.coordinateLocation(l),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}}},{key:"_constrainCameraAltitude",value:function(){if(this._elevation){var t=this._elevation;this._updateCameraState();var r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,n=this._computeCameraPosition(r),i=t.getAtPointOrZero(a(e.MercatorCoordinate,u(n))),o=this._minimumHeightOverTerrain()*Math.cos(e.degToRad(this._maxPitch)),s=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*i;if(s<o){var l=this.locationCoordinate(this._center,this._centerAltitude),c=[l.x-n[0],l.y-n[1],l.z-n[2]],h=e.length(c);c[2]-=(o-s)/this._pixelsPerMercatorPixel;var d=e.length(c);if(0===d)return;e.scale$2(c,c,h/d*this._pixelsPerMercatorPixel),this._camera.position=[l.x-c[0],l.y-c[1],l.z*this._pixelsPerMercatorPixel-c[2]],this._camera.orientation=ei(c,this._camera.up()),this._updateStateFromCamera()}}}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){var r=this.center;return r.lat=e.clamp(r.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(r.lng=e.clamp(r.lng,this.minLng,this.maxLng)),this.center=r,void(this._constraining=!1)}var n=this._unmodified,i=this.point,a=i.x,o=i.y,s=0,l=a,c=o,u=this.width/2,h=this.height/2,d=this.worldMinY*this.scale,f=this.worldMaxY*this.scale;if(o-h<d&&(c=d+h),o+h>f&&(c=f-h),f-d<this.height&&(s=Math.max(s,this.height/(f-d)),c=(f+d)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){var p=this.worldMinX*this.scale,m=this.worldMaxX*this.scale,v=this.worldSize/2-(p+m)/2;(l=(a+v+this.worldSize)%this.worldSize-v)-u<p&&(l=p+u),l+u>m&&(l=m-u),m-p<this.width&&(s=Math.max(s,this.width/(m-p)),l=(m+p)/2)}l===a&&c===o||(this.center=this.unproject(new e.pointGeometry(l,c))),s&&(this.zoom+=this.scaleZoom(s)),this._constrainCameraAltitude(),this._unmodified=n,this._constraining=!1}}},{key:"_minZoomForBounds",value:function(){var e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}},{key:"_maxCameraBoundsDistance",value:function(){return this._mercatorZfromZoom(this._minZoomForBounds())}},{key:"_calcMatrices",value:function(){if(this.height){var t=this.centerOffset,r=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));var n=ai(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,n),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;var i=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?r:1),a=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);a[8]=2*-t.x/this.width,a[9]=2*t.y/this.height;var o=e.mul([],a,i);if(this.projection.isReprojectedInTileSpace){var s=this.locationCoordinate(this.center),l=e.identity([]);e.translate(l,l,[s.x*this.worldSize,s.y*this.worldSize,0]),e.multiply(l,l,ni(this)),e.translate(l,l,[-s.x*this.worldSize,-s.y*this.worldSize,0]),e.multiply(o,o,l),this.inverseAdjustmentMatrix=function(e){var t=ni(e,!0);return P([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],o,[this.worldSize,this.worldSize,this.worldSize/r,1]),this.projMatrix=o,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);var c=e.invert([],a);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(c,this.horizonLineFromTop(),this.height);var u=new Float32Array(16);e.identity(u),e.scale(u,u,[1,-1,1]),e.rotateX(u,u,this._pitch),e.rotateZ(u,u,this.angle);var h=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),d=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;h[8]=2*-t.x/this.width,h[9]=2*(t.y+d)/this.height,this.skyboxMatrix=e.multiply(u,h,u);var f=this.point,p=f.x,m=f.y,v=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),x=Math.sin(this.angle),b=p-Math.round(p)+y*v+x*g,_=m-Math.round(m)+y*g+x*v,w=new Float64Array(o);if(e.translate(w,w,[b>.5?b-1:b,_>.5?_-1:_,0]),this.alignedProjMatrix=w,o=e.create(),e.scale(o,o,[this.width/2,-this.height/2,1]),e.translate(o,o,[1,-1,0]),this.labelPlaneMatrix=o,o=e.create(),e.scale(o,o,[1,-1,1]),e.translate(o,o,[-1,-1,0]),e.scale(o,o,[2/this.width,2/this.height,1]),this.glCoordMatrix=o,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},!(o=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=o,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);var k=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(k,k,i),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=o;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}}},{key:"_calcFogMatrices",value:function(){this._fogTileMatrixCache={};var t=this.cameraWorldSize,r=this.cameraPixelsPerMeter,n=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,a=[t,t,r];e.scale$2(a,a,i),e.scale$2(n,n,-1),e.multiply$2(n,n,a);var o=e.create();e.translate(o,o,n),e.scale(o,o,a),this.mercatorFogMatrix=o,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,r,i)}},{key:"_computeCameraPosition",value:function(e){var t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,r=this._camera.forward(),n=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[n.x/this.worldSize-r[0]*i,n.y/this.worldSize-r[1]*i,e/this.worldSize*this._centerAltitude-r[2]*i]}},{key:"_updateCameraState",value:function(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}},{key:"_translateCameraConstrained",value:function(t){var r=this._maxCameraBoundsDistance()*Math.cos(this._pitch),n=this._camera.position[2],i=t[2],a=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(a=Math.min((r-n)/i,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,a),this._updateStateFromCamera()}},{key:"_updateStateFromCamera",value:function(){var t=this._camera.position,r=this._camera.forward(),n=this._camera.getPitchBearing(),i=n.pitch,a=n.bearing,o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,s=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),l=Math.max((t[2]-o)/Math.cos(i),s),c=this._zoomFromMercatorZ(l);e.scaleAndAdd(t,t,r,l),this._pitch=e.clamp(i,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(a,-Math.PI,Math.PI),this._setZoom(e.clamp(c,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}},{key:"_worldSizeFromZoom",value:function(e){return Math.pow(2,e)*this.tileSize}},{key:"_mercatorZfromZoom",value:function(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}},{key:"_minimumHeightOverTerrain",value:function(){var e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}},{key:"_zoomFromMercatorZ",value:function(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}},{key:"zoomFromMercatorZAdjusted",value:function(e){for(var t,r=this,n=function(t){var n=r.getCameraToCenterDistance(r.projection,t);return r.scaleZoom(n/(e*r.tileSize))},i=n(this.zoom),a=Math.abs(i-n(i));t!==a;)i=n(i),t=a,a=Math.abs(i-n(i));return i}},{key:"_terrainEnabled",value:function(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}},{key:"anyCornerOffEdge",value:function(t,r){var n=Math.min(t.x,r.x),i=Math.max(t.x,r.x),a=Math.min(t.y,r.y),o=Math.max(t.y,r.y);if(a<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;for(var s=[new e.pointGeometry(n,a),new e.pointGeometry(i,o),new e.pointGeometry(n,o),new e.pointGeometry(i,a)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1,u=0,h=s;u<h.length;u++){var d=h[u],f=this.pointRayIntersection(d);if(f.t<0)return!0;var p=this.rayIntersectionCoordinate(f);if(p.x<l||p.y<0||p.x>c||p.y>1)return!0}return!1}},{key:"isHorizonVisible",value:function(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.pointGeometry(0,0),new e.pointGeometry(this.width,this.height))}},{key:"zoomDeltaToMovement",value:function(t,r){var n=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(n)+r;return n-this._mercatorZfromZoom(i)}},{key:"getCameraPoint",value:function(){if("globe"===this.projection.name){var t=function(t,r){var n=[t[0],t[1],t[2],1];e.transformMat4$1(n,n,r);var i=Math.max(n[3],1e-6);return[n[0]/i,n[1]/i,n[2]/i,i]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.pointGeometry(t[0],t[1])}var r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,r))}},{key:"getCameraToCenterDistance",value:function(e){var t=ai(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,this.width,this.height,1024),r=e.pixelSpaceConversion(this.center.lat,this.worldSize,t);return.5/Math.tan(.5*this._fov)*this.height*r}},{key:"getWorldToCameraMatrix",value:function(){var t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}]),r}();function ui(e,t){var r=!1,n=null,i=function i(){n=null,r&&(e(),n=setTimeout(i,t),r=!1)};return function(){return r=!0,n||i(),n}}var hi=function(){function t(r){f(this,t),this._hashName=r&&encodeURIComponent(r),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ui(this._updateHashUnthrottled.bind(this),300)}return p(t,[{key:"addTo",value:function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}},{key:"getHashString",value:function(){var t=this._map;if(!t)return"";var r=di(t);if(this._hashName){var n=this._hashName,i=!1,a=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===n?(i=!0,"".concat(t,"=").concat(r)):e})).filter((function(e){return e}));return i||a.push("".concat(n,"=").concat(r)),"#".concat(a.join("&"))}return"#".concat(r)}},{key:"_getCurrentHash",value:function(){var t,r=this,n=e.window.location.hash.replace("#","");return this._hashName?(n.split("&").map((function(e){return e.split("=")})).forEach((function(e){e[0]===r._hashName&&(t=e)})),(t&&t[1]||"").split("/")):n.split("/")}},{key:"_onHashChange",value:function(){var e=this._map;if(!e)return!1;var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(e){return isNaN(e)}))){var r=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:r,pitch:+(t[4]||0)}),!0}return!1}},{key:"_updateHashUnthrottled",value:function(){var t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}]),t}();function di(e,t){var r=e.getCenter(),n=Math.round(100*e.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,i),o=Math.round(r.lng*a)/a,s=Math.round(r.lat*a)/a,l=e.getBearing(),c=e.getPitch(),u=t?"/".concat(o,"/").concat(s,"/").concat(n):"".concat(n,"/").concat(s,"/").concat(o);return(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/".concat(Math.round(c))),u}var fi={linearity:.3,easing:e.bezier(0,0,.3,1)},pi=e.extend({deceleration:2500,maxSpeed:1400},fi),mi=e.extend({deceleration:20,maxSpeed:1400},fi),vi=e.extend({deceleration:1e3,maxSpeed:360},fi),gi=e.extend({deceleration:1e3,maxSpeed:90},fi),yi=function(){function t(e){f(this,t),this._map=e,this.clear()}return p(t,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertiaBuffer,r=e.exported.now();t.length>0&&r-t[0].time>160;)t.shift()}},{key:"_onMoveEnd",value:function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var r,n={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0},i=d(this._inertiaBuffer);try{for(i.s();!(r=i.n()).done;){var a=r.value.settings;n.zoom+=a.zoomDelta||0,n.bearing+=a.bearingDelta||0,n.pitch+=a.pitchDelta||0,a.panDelta&&n.pan._add(a.panDelta),a.around&&(n.around=a.around),a.pinchAround&&(n.pinchAround=a.pinchAround)}}catch(p){i.e(p)}finally{i.f()}var o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(n.pan.mag()){var l=bi(n.pan.mag(),o,e.extend({},pi,t||{}));s.offset=n.pan.mult(l.amount/n.pan.mag()),s.center=this._map.transform.center,xi(s,l)}if(n.zoom){var c=bi(n.zoom,o,mi);s.zoom=this._map.transform.zoom+c.amount,xi(s,c)}if(n.bearing){var u=bi(n.bearing,o,vi);s.bearing=this._map.transform.bearing+e.clamp(u.amount,-179,179),xi(s,u)}if(n.pitch){var h=bi(n.pitch,o,gi);s.pitch=this._map.transform.pitch+h.amount,xi(s,h)}if(s.zoom||s.bearing){var f=void 0===n.pinchAround?n.around:n.pinchAround;s.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),s.noMoveStart=!0,s}}}]),t}();function xi(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function bi(t,r,n){var i=n.maxSpeed,a=n.linearity,o=n.deceleration,s=e.clamp(t*a/(r/1e3),-i,i),l=Math.abs(s)/(o*a);return{easing:n.easing,duration:1e3*l,amount:s*(l/2)}}var _i=function(t){m(n,t);var r=v(n);function n(t,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};f(this,n);var l=T(i.getCanvasContainer(),a),c=i.unproject(l);return(o=r.call(this,t,e.extend({point:l,lngLat:c,originalEvent:a},s)))._defaultPrevented=!1,o.target=i,o}return p(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(e.Event),wi=function(t){m(n,t);var r=v(n);function n(t,i,a){var o;f(this,n);var s="touchend"===t?a.changedTouches:a.touches,l=E(i.getCanvasContainer(),s),c=l.map((function(e){return i.unproject(e)})),u=l.reduce((function(e,t,r,n){return e.add(t.div(n.length))}),new e.pointGeometry(0,0));return(o=r.call(this,t,{points:l,point:u,lngLats:c,lngLat:i.unproject(u),originalEvent:a}))._defaultPrevented=!1,o}return p(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(e.Event),ki=function(e){m(r,e);var t=v(r);function r(e,n,i){var a;return f(this,r),(a=t.call(this,e,{originalEvent:i}))._defaultPrevented=!1,a}return p(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),r}(e.Event),Si=function(){function t(e,r){f(this,t),this._map=e,this._clickTolerance=r.clickTolerance}return p(t,[{key:"reset",value:function(){this._mousedownPos=void 0}},{key:"wheel",value:function(e){return this._firePreventable(new ki(e.type,this._map,e))}},{key:"mousedown",value:function(e,t){return this._mousedownPos=t,this._firePreventable(new _i(e.type,this._map,e))}},{key:"mouseup",value:function(e){this._map.fire(new _i(e.type,this._map,e))}},{key:"preclick",value:function(t){var r=e.extend({},t);r.type="preclick",this._map.fire(new _i(r.type,this._map,r))}},{key:"click",value:function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new _i(e.type,this._map,e)))}},{key:"dblclick",value:function(e){return this._firePreventable(new _i(e.type,this._map,e))}},{key:"mouseover",value:function(e){this._map.fire(new _i(e.type,this._map,e))}},{key:"mouseout",value:function(e){this._map.fire(new _i(e.type,this._map,e))}},{key:"touchstart",value:function(e){return this._firePreventable(new wi(e.type,this._map,e))}},{key:"touchmove",value:function(e){this._map.fire(new wi(e.type,this._map,e))}},{key:"touchend",value:function(e){this._map.fire(new wi(e.type,this._map,e))}},{key:"touchcancel",value:function(e){this._map.fire(new wi(e.type,this._map,e))}},{key:"_firePreventable",value:function(e){if(this._map.fire(e),e.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),t}(),Ci=function(){function e(t){f(this,e),this._map=t}return p(e,[{key:"reset",value:function(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}},{key:"mousemove",value:function(e){this._map.fire(new _i(e.type,this._map,e))}},{key:"mousedown",value:function(){this._delayContextMenu=!0}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _i("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new _i(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),Ai=function(){function t(e,r){f(this,t),this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=r.clickTolerance||1}return p(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(k(),this._startPos=this._lastPos=t,this._active=!0)}},{key:"mousemoveWindow",value:function(e,t){var r=this;if(this._active){var n=t,i=this._startPos,a=this._lastPos;if(!(!i||!a||a.equals(n)||!this._box&&n.dist(i)<this._clickTolerance)){this._lastPos=n,this._box||(this._box=y("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var o=Math.min(i.x,n.x),s=Math.max(i.x,n.x),l=Math.min(i.y,n.y),c=Math.max(i.y,n.y);this._map._requestDomTask((function(){r._box&&(r._box.style.transform="translate(".concat(o,"px,").concat(l,"px)"),r._box.style.width=s-o+"px",r._box.style.height=c-l+"px")}))}}}},{key:"mouseupWindow",value:function(t,r){var n=this;if(this._active){var i=this._startPos,a=r;if(i&&0===t.button){if(this.reset(),A(),i.x!==a.x||i.y!==a.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(i,a,n._map.getBearing(),{linear:!1})}};this._fireEvent("boxzoomcancel",t)}}}},{key:"keydown",value:function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),S(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(t,r){return this._map.fire(new e.Event(t,{originalEvent:r}))}}]),t}();function Ti(e,t){for(var r={},n=0;n<e.length;n++)r[e[n].identifier]=t[n];return r}var Ei=function(){function t(e){f(this,t),this.reset(),this.numTouches=e.numTouches}return p(t,[{key:"reset",value:function(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}},{key:"touchstart",value:function(t,r,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),n.length===this.numTouches&&(this.centroid=function(t){var r,n=new e.pointGeometry(0,0),i=d(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;n._add(a)}}catch(o){i.e(o)}finally{i.f()}return n.div(t.length)}(r),this.touches=Ti(n,r)))}},{key:"touchmove",value:function(e,t,r){if(!this.aborted&&this.centroid){var n=Ti(r,t);for(var i in this.touches){var a=this.touches[i],o=n[i];(!o||o.dist(a)>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(e,t,r){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){var n=!this.aborted&&this.centroid;if(this.reset(),n)return n}}}]),t}(),Mi=function(){function e(t){f(this,e),this.singleTap=new Ei(t),this.numTaps=t.numTaps,this.reset()}return p(e,[{key:"reset",value:function(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(e,t,r){this.singleTap.touchstart(e,t,r)}},{key:"touchmove",value:function(e,t,r){this.singleTap.touchmove(e,t,r)}},{key:"touchend",value:function(e,t,r){var n=this.singleTap.touchend(e,t,r);if(n){var i=e.timeStamp-this.lastTime<500,a=!this.lastTap||this.lastTap.dist(n)<30;if(i&&a||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}]),e}(),Ii=function(){function e(){f(this,e),this._zoomIn=new Mi({numTouches:1,numTaps:2}),this._zoomOut=new Mi({numTouches:2,numTaps:1}),this.reset()}return p(e,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(e,t,r){this._zoomIn.touchstart(e,t,r),this._zoomOut.touchstart(e,t,r)}},{key:"touchmove",value:function(e,t,r){this._zoomIn.touchmove(e,t,r),this._zoomOut.touchmove(e,t,r)}},{key:"touchend",value:function(e,t,r){var n=this,i=this._zoomIn.touchend(e,t,r),a=this._zoomOut.touchend(e,t,r);return i?(this._active=!0,e.preventDefault(),setTimeout((function(){return n.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(i)},{originalEvent:e})}}):a?(this._active=!0,e.preventDefault(),setTimeout((function(){return n.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(a)},{originalEvent:e})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Pi={0:1,2:2},Ri=function(){function e(t){f(this,e),this.reset(),this._clickTolerance=t.clickTolerance||1}return p(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}},{key:"_correctButton",value:function(e,t){return!1}},{key:"_move",value:function(e,t){return{}}},{key:"mousedown",value:function(e,t){if(!this._lastPoint){var r=M(e);this._correctButton(e,r)&&(this._lastPoint=t,this._eventButton=r)}}},{key:"mousemoveWindow",value:function(e,t){var r=this._lastPoint;if(r)if(e.preventDefault(),null!=this._eventButton&&function(e,t){var r=Pi[t];return void 0===e.buttons||(e.buttons&r)!==r}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(r,t)}},{key:"mouseupWindow",value:function(e){this._lastPoint&&M(e)===this._eventButton&&(this._moved&&A(),this.reset())}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),zi=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"mousedown",value:function(e,t){o(s(r.prototype),"mousedown",this).call(this,e,t),this._lastPoint&&(this._active=!0)}},{key:"_correctButton",value:function(e,t){return 0===t&&!e.ctrlKey}},{key:"_move",value:function(e,t){return{around:t,panDelta:t.sub(e)}}}]),r}(Ri),Li=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var r=.8*(t.x-e.x);if(r)return this._active=!0,{bearingDelta:r}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),r}(Ri),Di=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var r=-.5*(t.y-e.y);if(r)return this._active=!0,{pitchDelta:r}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),r}(Ri),Oi=function(){function t(r,n){f(this,t),this._map=r,this._el=r.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}return p(t,[{key:"reset",value:function(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0)}},{key:"touchstart",value:function(e,t,r){return this._calculateTransform(e,t,r)}},{key:"touchmove",value:function(t,r,n){if(this._active&&!(n.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===n.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,r,n)}}},{key:"touchend",value:function(e,t,r){this._calculateTransform(e,t,r),this._active&&r.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(t,r,n){n.length>0&&(this._active=!0);var i=Ti(n,r),a=new e.pointGeometry(0,0),o=new e.pointGeometry(0,0),s=0;for(var l in i){var c=i[l],u=this._touches[l];u&&(a._add(c),o._add(c.sub(u)),s++,i[l]=c)}if(this._touches=i,!(s<this._minTouches)&&o.mag()){var h=o.div(s);return this._sum._add(h),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(s),panDelta:h}}}},{key:"enable",value:function(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}},{key:"disable",value:function(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"_addTouchPanBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=y("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showTouchPanBlockerAlert",value:function(){var e=this;this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),e._alertContainer.setAttribute("role","null")}),500)}}]),t}(),Fi=function(){function e(){f(this,e),this.reset()}return p(e,[{key:"reset",value:function(){this._active=!1,this._firstTwoTouches=void 0}},{key:"_start",value:function(e){}},{key:"_move",value:function(e,t,r){return{}}},{key:"touchstart",value:function(e,t,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([t[0],t[1]]))}},{key:"touchmove",value:function(e,t,r){var n=this._firstTwoTouches;if(n){e.preventDefault();var i=h(n,2),a=i[0],o=i[1],s=ji(r,t,a),l=ji(r,t,o);if(s&&l){var c=this._aroundCenter?null:s.add(l).div(2);return this._move([s,l],c,e)}}}},{key:"touchend",value:function(e,t,r){if(this._firstTwoTouches){var n=h(this._firstTwoTouches,2),i=n[0],a=n[1],o=ji(r,t,i),s=ji(r,t,a);o&&s||(this._active&&A(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}();function ji(e,t,r){for(var n=0;n<e.length;n++)if(e[n].identifier===r)return t[n]}function Ni(e,t){return Math.log(e/t)/Math.LN2}var Bi=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"reset",value:function(){o(s(r.prototype),"reset",this).call(this),this._distance=0,this._startDistance=0}},{key:"_start",value:function(e){this._startDistance=this._distance=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var r=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Ni(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ni(this._distance,r),pinchAround:t}}}]),r}(Fi);function Zi(e,t){return 180*e.angleWith(t)/Math.PI}var Ui=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r,[{key:"reset",value:function(){o(s(r.prototype),"reset",this).call(this),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}},{key:"_start",value:function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var r=this._vector;if(this._vector=e[0].sub(e[1]),r&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Zi(this._vector,r),pinchAround:t}}},{key:"_isBelowThreshold",value:function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,r=this._startVector;if(!r)return!1;var n=Zi(e,r);return Math.abs(n)<t}}]),r}(Fi);function Vi(e){return Math.abs(e.y)>Math.abs(e.x)}var Wi=function(t){m(n,t);var r=v(n);function n(e){var t;return f(this,n),(t=r.call(this))._map=e,t}return p(n,[{key:"reset",value:function(){o(s(n.prototype),"reset",this).call(this),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}},{key:"_start",value:function(e){this._lastPoints=e,Vi(e[0].sub(e[1]))&&(this._valid=!1)}},{key:"_move",value:function(t,r,n){var i=this._lastPoints;if(i){var a=t[0].sub(i[0]),o=t[1].sub(i[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&n.touches.length<3||(this._valid=this.gestureBeginsVertically(a,o,n.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(a.y+o.y)/2*-.5})}}},{key:"gestureBeginsVertically",value:function(e,t,r){if(void 0!==this._valid)return this._valid;var n=e.mag()>=2,i=t.mag()>=2;if(n||i){if(!n||!i)return null==this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;var a=e.y>0==t.y>0;return Vi(e)&&Vi(t)&&a}}}]),n}(Fi),Gi={panStep:100,bearingStep:15,pitchStep:10},Hi=function(){function e(){f(this,e);var t=Gi;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}return p(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var r=0,n=0,i=0,a=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:r=1;break;case 189:case 109:case 173:r=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,i=0),{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Xi,zoom:r?Math.round(l)+r*(e.shiftKey?2:1):l,bearing:s.getBearing()+n*t._bearingStep,pitch:s.getPitch()+i*t._pitchStep,offset:[-a*t._panStep,-o*t._panStep],center:s.getCenter()},{originalEvent:e})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),e}();function Xi(e){return e*(2-e)}var Yi=4.000244140625,qi=function(){function t(r,n){f(this,t),this._map=r,this._el=r.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}return p(t,[{key:"setZoomRate",value:function(e){this._defaultZoomRate=e}},{key:"setWheelZoomRate",value:function(e){this._wheelZoomRate=e}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}},{key:"wheel",value:function(t){if(this.isEnabled()){if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}var r=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,n=e.exported.now(),i=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==r&&r%Yi==0?this._type="wheel":0!==r&&Math.abs(r)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),t.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=t,this._delta-=r,this._active||this._start(t)),t.preventDefault()}}},{key:"_onTimeout",value:function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}},{key:"_start",value:function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var t=T(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var r=this._map.transform;"wheel"===this._type&&r.projection.wrap&&(r._center.lng>=180||r._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);var n=function(){return r._terrainEnabled()&&t._aroundCoord?r.computeZoomRelativeTo(t._aroundCoord):r.zoom};if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>Yi?this._wheelZoomRate:this._defaultZoomRate,a=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==a&&(a=1/a);var o=n(),s=Math.pow(2,o),l="number"==typeof this._targetZoom?r.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(l*a))),"wheel"===this._type&&(this._startZoom=o,this._easing=this._smoothOutEasing(200)),this._delta=0}var c,u="number"==typeof this._targetZoom?this._targetZoom:n(),h=this._startZoom,d=this._easing,f=!1;if("wheel"===this._type&&h&&d){var p=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),m=d(p);c=e.number(h,u,m),p<1?this._frameId||(this._frameId=!0):f=!0}else c=u,f=!0;return this._active=!0,f&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!f,zoomDelta:c-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(t){var r=e.ease;if(this._prevEase){var n=this._prevEase,i=(e.exported.now()-n.start)/n.duration,a=n.easing(i+.01)-n.easing(i),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-o*o);r=e.bezier(o,s,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:r},r}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"_addScrollZoomBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=y("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showBlockerAlert",value:function(){var e=this;this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),e._alertContainer.setAttribute("role","null")}),200)}}]),t}(),$i=function(){function e(t,r){f(this,e),this._clickZoom=t,this._tapZoom=r}return p(e,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),e}(),Ki=function(){function e(){f(this,e),this.reset()}return p(e,[{key:"reset",value:function(){this._active=!1}},{key:"blur",value:function(){this.reset()}},{key:"dblclick",value:function(e,t){return e.preventDefault(),{cameraAnimation:function(r){r.easeTo({duration:300,zoom:r.getZoom()+(e.shiftKey?-1:1),around:r.unproject(t)},{originalEvent:e})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Ji=function(){function e(){f(this,e),this._tap=new Mi({numTouches:1,numTaps:1}),this.reset()}return p(e,[{key:"reset",value:function(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}},{key:"touchstart",value:function(e,t,r){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?r.length>0&&(this._swipePoint=t[0],this._swipeTouch=r[0].identifier):this._tap.touchstart(e,t,r))}},{key:"touchmove",value:function(e,t,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;var n=t[0],i=n.y-this._swipePoint.y;return this._swipePoint=n,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,r)}},{key:"touchend",value:function(e,t,r){this._tapTime?this._swipePoint&&0===r.length&&this.reset():this._tap.touchend(e,t,r)&&(this._tapTime=e.timeStamp)}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Qi=function(){function e(t,r,n){f(this,e),this._el=t,this._mousePan=r,this._touchPan=n}return p(e,[{key:"enable",value:function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),e}(),ea=function(){function e(t,r,n){f(this,e),this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=r,this._mousePitch=n}return p(e,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),e}(),ta=function(){function e(t,r,n,i){f(this,e),this._el=t,this._touchZoom=r,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}return p(e,[{key:"enable",value:function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),e}(),ra=function(e){return e.zoom||e.drag||e.pitch||e.rotate},na=function(e){m(r,e);var t=v(r);function r(){return f(this,r),t.apply(this,arguments)}return p(r)}(e.Event),ia=function(){function t(){f(this,t),this.constants=[1,1,.01],this.radius=0}return p(t,[{key:"setup",value:function(t,r){var n=e.sub([],r,t);this.radius=e.length(n[2]<0?e.div([],n,this.constants):[n[0],n[1],0])}},{key:"projectRay",value:function(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);var r=e.scale$2([],t,this.radius);if(r[2]>0){var n=e.scale$2([],[0,0,1],e.dot(r,[0,0,1])),i=e.scale$2([],e.normalize([],[r[0],r[1],0]),this.radius),a=e.add([],r,e.scale$2([],e.sub([],e.add([],i,n),r),2));r[0]=a[0],r[1]=a[1]}return r}}]),t}();function aa(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var oa=function(){function t(r,n){f(this,t),this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yi(r),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new ia,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),e.bindAll(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[e.window,"blur",void 0]];var a,o=d(this._listeners);try{for(o.s();!(a=o.n()).done;){var s=h(a.value,3),l=s[0],c=s[1],u=s[2];l.addEventListener(c,l===e.window.document?this.handleWindowEvent:this.handleEvent,u)}}catch(p){o.e(p)}finally{o.f()}}return p(t,[{key:"destroy",value:function(){var t,r=d(this._listeners);try{for(r.s();!(t=r.n()).done;){var n=h(t.value,3),i=n[0],a=n[1],o=n[2];i.removeEventListener(a,i===e.window.document?this.handleWindowEvent:this.handleEvent,o)}}catch(s){r.e(s)}finally{r.f()}}},{key:"_addDefaultHandlers",value:function(e){var t=this._map,r=t.getCanvasContainer();this._add("mapEvent",new Si(t,e));var n=t.boxZoom=new Ai(t,e);this._add("boxZoom",n);var i=new Ii,a=new Ki;t.doubleClickZoom=new $i(a,i),this._add("tapZoom",i),this._add("clickZoom",a);var o=new Ji;this._add("tapDragZoom",o);var s=t.touchPitch=new Wi(t);this._add("touchPitch",s);var l=new Li(e),c=new Di(e);t.dragRotate=new ea(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);var u=new zi(e),h=new Oi(t,e);t.dragPan=new Qi(r,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);var d=new Ui,f=new Bi;t.touchZoomRotate=new ta(r,f,d,o),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Ci(t));var p=t.scrollZoom=new qi(t,this);this._add("scrollZoom",p,["mousePan"]);var m=t.keyboard=new Hi;this._add("keyboard",m);for(var v=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];v<g.length;v++){var y=g[v];e.interactive&&e[y]&&t[y].enable(e[y])}}},{key:"_add",value:function(e,t,r){this._handlers.push({handlerName:e,handler:t,allowed:r}),this._handlersById[e]=t}},{key:"stop",value:function(e){if(!this._updatingCamera){var t,r=d(this._handlers);try{for(r.s();!(t=r.n()).done;)t.value.handler.reset()}catch(n){r.e(n)}finally{r.f()}this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}},{key:"isActive",value:function(){var e,t=d(this._handlers);try{for(t.s();!(e=t.n()).done;)if(e.value.handler.isActive())return!0}catch(r){t.e(r)}finally{t.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return!!ra(this._eventsInProgress)||this.isZooming()}},{key:"_blockedByActive",value:function(e,t,r){for(var n in e)if(n!==r&&(!t||t.indexOf(n)<0))return!0;return!1}},{key:"handleWindowEvent",value:function(e){this.handleEvent(e,"".concat(e.type,"Window"))}},{key:"_getMapTouches",value:function(e){var t,r=[],n=d(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this._el.contains(i.target)&&r.push(i)}}catch(a){n.e(a)}finally{n.f()}return r}},{key:"handleEvent",value:function(e,t){this._updatingCamera=!0;var r,n="renderFrame"===e.type,i=n?void 0:e,a={needsRenderFrame:!1},o={},s={},l=e.touches?this._getMapTouches(e.touches):void 0,c=l?E(this._el,l):n?void 0:T(this._el,e),u=d(this._handlers);try{for(u.s();!(r=u.n()).done;){var h=r.value,f=h.handlerName,p=h.handler,m=h.allowed;if(p.isEnabled()){var v=void 0;this._blockedByActive(s,m,f)?p.reset():p[t||e.type]&&(v=p[t||e.type](e,c,l),this.mergeHandlerResult(a,o,v,f,i),v&&v.needsRenderFrame&&this._triggerRenderFrame()),(v||p.isActive())&&(s[f]=p)}}}catch(b){u.e(b)}finally{u.f()}var g={};for(var y in this._previousActiveHandlers)s[y]||(g[y]=i);this._previousActiveHandlers=s,(Object.keys(g).length||aa(a))&&(this._changes.push([a,o,g]),this._triggerRenderFrame()),(Object.keys(s).length||aa(a))&&this._map._stop(!0),this._updatingCamera=!1;var x=a.cameraAnimation;x&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],x(this._map))}},{key:"mergeHandlerResult",value:function(t,r,n,i,a){if(n){e.extend(t,n);var o={handlerName:i,originalEvent:n.originalEvent||a};void 0!==n.zoomDelta&&(r.zoom=o),void 0!==n.panDelta&&(r.drag=o),void 0!==n.pitchDelta&&(r.pitch=o),void 0!==n.bearingDelta&&(r.rotate=o)}}},{key:"_applyChanges",value:function(){var t,r={},n={},i={},a=d(this._changes);try{for(a.s();!(t=a.n()).done;){var o=h(t.value,3),s=o[0],l=o[1],c=o[2];s.panDelta&&(r.panDelta=(r.panDelta||new e.pointGeometry(0,0))._add(s.panDelta)),s.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(r.around=s.around),void 0!==s.aroundCoord&&(r.aroundCoord=s.aroundCoord),void 0!==s.pinchAround&&(r.pinchAround=s.pinchAround),s.noInertia&&(r.noInertia=s.noInertia),e.extend(n,l),e.extend(i,c)}}catch(u){a.e(u)}finally{a.f()}this._updateMapTransform(r,n,i),this._changes=[]}},{key:"_updateMapTransform",value:function(t,r,n){var i=this,a=this._map,o=a.transform,s=function(e){return[e.x,e.y,e.z]};if(function(e){var t=i._eventsInProgress.drag;return t&&!i._handlersById[t.handlerName].isActive()}()&&!aa(t)){var l=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",l!==o.zoom&&this._map._update(!0)}if(aa(t)){var c=t.panDelta,u=t.zoomDelta,h=t.bearingDelta,d=t.pitchDelta,f=t.around,p=t.aroundCoord,m=t.pinchAround;void 0!==m&&(f=m),r.drag&&!i._eventsInProgress.drag&&f&&(this._dragOrigin=s(o.pointCoordinate3D(f)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",a._stop(!0),f=f||a.transform.centerPoint,h&&(o.bearing+=h),d&&(o.pitch+=d),o._updateCameraState();var v=[0,0,0];if(c)if("mercator"===o.projection.name){var g=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(f).dir),y=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(f.sub(c)).dir);v[0]=y[0]-g[0],v[1]=y[1]-g[1]}else{var x=o.pointCoordinate(f);if("globe"===o.projection.name){c=c.rotate(-o.angle);var b=o._pixelsPerMercatorPixel/o.worldSize;v[0]=-c.x*e.mercatorScale(e.latFromMercatorY(x.y))*b,v[1]=-c.y*e.mercatorScale(o.center.lat)*b}else{var _=o.pointCoordinate(f.sub(c));x&&_&&(v[0]=_.x-x.x,v[1]=_.y-x.y)}}var w=o.zoom,k=[0,0,0];if(u){var S=s(p||o.pointCoordinate3D(f)),C={dir:e.normalize([],e.sub([],S,o._camera.position))};if(C.dir[2]<0){var A=o.zoomDeltaToMovement(S,u);e.scale$2(k,C.dir,A)}}var T=e.add(v,v,k);o._translateCameraConstrained(T),u&&Math.abs(o.zoom-w)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(r,n,!0)}else this._fireEvents(r,n,!0)}},{key:"_fireEvents",value:function(t,r,n){var i=this,a=ra(this._eventsInProgress),o=ra(t),s={};for(var l in t){var c=t[l].originalEvent;this._eventsInProgress[l]||(s["".concat(l,"start")]=c),this._eventsInProgress[l]=t[l]}for(var u in!a&&o&&this._fireEvent("movestart",o.originalEvent),s)this._fireEvent(u,s[u]);for(var h in o&&this._fireEvent("move",o.originalEvent),t){var d=t[h].originalEvent;this._fireEvent(h,d)}var f,p={};for(var m in this._eventsInProgress){var v=this._eventsInProgress[m],g=v.handlerName,y=v.originalEvent;this._handlersById[g].isActive()||(delete this._eventsInProgress[m],f=r[g]||y,p["".concat(m,"end")]=f)}for(var x in p)this._fireEvent(x,p[x]);var b=ra(this._eventsInProgress);if(n&&(a||o)&&!b){this._updatingCamera=!0;var _=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),w=function(e){return 0!==e&&-i._bearingSnap<e&&e<i._bearingSnap};_?(w(_.bearing||this._map.getBearing())&&(_.bearing=0),this._map.easeTo(_,{originalEvent:f})):(this._map.fire(new e.Event("moveend",{originalEvent:f})),w(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(t,r){this._map.fire(new e.Event(t,r?{originalEvent:r}:{}))}},{key:"_requestFrame",value:function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){e._frameId=void 0,e.handleEvent(new na("renderFrame",{timeStamp:t})),e._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}]),t}(),sa="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.",la=function(t){m(n,t);var r=v(n);function n(t,a){var o;return f(this,n),(o=r.call(this))._moving=!1,o._zooming=!1,o.transform=t,o._bearingSnap=a.bearingSnap,e.bindAll(["_renderFrameCallback"],i(o)),o}return p(n,[{key:"getCenter",value:function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(e,t){return this.jumpTo({center:e},t)}},{key:"panBy",value:function(t,r,n){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},r),n)}},{key:"panTo",value:function(t,r,n){return this.easeTo(e.extend({center:t},r),n)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(e,t){return this.jumpTo({zoom:e},t),this}},{key:"zoomTo",value:function(t,r,n){return this.easeTo(e.extend({zoom:t},r),n)}},{key:"zoomIn",value:function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}},{key:"zoomOut",value:function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(e,t){return this.jumpTo({bearing:e},t),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(e,t){return this.jumpTo({padding:e},t),this}},{key:"rotateTo",value:function(t,r,n){return this.easeTo(e.extend({bearing:t},r),n)}},{key:"resetNorth",value:function(t,r){return this.rotateTo(0,e.extend({duration:1e3},t),r),this}},{key:"resetNorthPitch",value:function(t,r){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),r),this}},{key:"snapToNorth",value:function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(e,t){return this.jumpTo({pitch:e},t),this}},{key:"cameraForBounds",value:function(t,r){t=e.LngLatBounds.convert(t);var n=r&&r.bearing||0,i=t.getNorthWest(),a=t.getSouthEast();return this._cameraForBounds(this.transform,i,a,n,r)}},{key:"_extendCameraOptions",value:function(t){var r={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:r,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){var n=t.padding;t.padding={top:n,bottom:n,right:n,left:n}}return t.padding=e.extend(r,t.padding),t}},{key:"_minimumAABBFrustumDistance",value:function(e,t){var r=t.max[0]-t.min[0],n=t.max[1]-t.min[1];return r/n>e.aspect?r/(2*Math.tan(.5*e.fovX)*e.aspect):n/(2*Math.tan(.5*e.fovY)*e.aspect)}},{key:"_cameraForBoundsOnGlobe",value:function(t,r,n,i,a){var o=t.clone(),s=this._extendCameraOptions(a);o.bearing=i;var l=e.LngLat.convert(r),c=e.LngLat.convert(n),u=.5*(l.lat+c.lat),h=.5*(l.lng+c.lng),d=e.latLngToECEF(u,h),f=e.normalize([],d),p=e.normalize([],e.cross([],f,[0,1,0])),m=e.cross([],p,f),v=[p[0],p[1],p[2],0,m[0],m[1],m[2],0,f[0],f[1],f[2],0,0,0,0,1],g=[d,e.latLngToECEF(l.lat,l.lng),e.latLngToECEF(c.lat,l.lng),e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(l.lat,c.lng),e.latLngToECEF(u,l.lng),e.latLngToECEF(u,c.lng),e.latLngToECEF(l.lat,h),e.latLngToECEF(c.lat,h)],y=e.Aabb.fromPoints(g.map((function(t){return[e.dot(p,t),e.dot(m,t),e.dot(f,t)]}))),x=e.transformMat4([],y.center,v);0===e.squaredLength(x)&&e.set(x,0,0,1),e.normalize(x,x),e.scale$2(x,x,e.GLOBE_RADIUS),o.center=e.ecefToLatLng(x);var b=o.getWorldToCameraMatrix(),_=e.invert(new Float64Array(16),b);y=e.Aabb.applyTransform(y,e.multiply([],b,v)),e.transformMat4(x,x,b);var w=.5*(y.max[2]-y.min[2]),k=this._minimumAABBFrustumDistance(o,y),S=e.scale$2([],[0,0,1],w),C=e.add(S,x,S),A=k+(0===o.pitch?0:e.distance(x,C)),T=o.globeCenterInViewSpace,E=e.sub([],x,[T[0],T[1],T[2]]);e.normalize(E,E),e.scale$2(E,E,A);var M=e.add([],x,E);e.transformMat4(M,M,_);var I=e.earthRadius/e.GLOBE_RADIUS,P=e.length(M),R=e.mercatorZfromAltitude(P*I-e.earthRadius,0),z=Math.min(o.zoomFromMercatorZAdjusted(R),s.maxZoom);return z>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(o.setProjection({name:"mercator"}),o.zoom=z,this._cameraForBounds(o,r,n,i,a)):{center:o.center,zoom:z,bearing:i}}},{key:"queryTerrainElevation",value:function(t,r){var n=this.transform.elevation;return n?(r=e.extend({},{exaggerated:!0},r),n.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,r.exaggerated)):null}},{key:"_cameraForBounds",value:function(t,r,n,i,a){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,r,n,i,a);var o=t.clone(),s=this._extendCameraOptions(a),l=o.padding;o.bearing=i;var c=e.LngLat.convert(r),u=e.LngLat.convert(n),h=new e.LngLat(c.lng,u.lat),d=new e.LngLat(u.lng,c.lat),f=o.project(c),p=o.project(u),m=this.queryTerrainElevation(c),v=this.queryTerrainElevation(u),g=this.queryTerrainElevation(h),y=this.queryTerrainElevation(d),x=[[f.x,f.y,Math.min(m||0,v||0,g||0,y||0)],[p.x,p.y,Math.max(m||0,v||0,g||0,y||0)]],b=e.Aabb.fromPoints(x),_=o.getWorldToCameraMatrix(),w=e.invert(new Float64Array(16),_);b=e.Aabb.applyTransform(b,_);var k=e.sub([],b.max,b.min),S=l.left||0,C=l.right||0,A=l.bottom||0,T=l.top||0,E=s.padding,M=E.left,I=E.right,P=E.top,R=E.bottom,z=.5*(S+C),L=.5*(T+A),D=Math.min(o.scaleZoom(o.scale*Math.min((o.width-(S+C+M+I))/k[0],(o.height-(A+T+R+P))/k[1])),s.maxZoom),O=o.scale/o.zoomScale(D);b=new e.Aabb([b.min[0]-(M+z)*O,b.min[1]-(R+L)*O,b.min[2]],[b.max[0]+(I+z)*O,b.max[1]+(P+L)*O,b.max[2]]);var F=.5*k[2],j=this._minimumAABBFrustumDistance(o,b),N=[0,0,1,0];e.transformMat4$1(N,N,_),e.normalize$2(N,N);var B=e.scale$2([],N,j+F),Z=e.add([],b.center,B),U=("number"==typeof s.offset.x&&"number"==typeof s.offset.y?new e.pointGeometry(s.offset.x,s.offset.y):e.pointGeometry.convert(s.offset)).rotate(-e.degToRad(i));b.center[0]-=U.x*O,b.center[1]+=U.y*O,e.transformMat4(b.center,b.center,w),e.transformMat4(Z,Z,w);var V=[b.center[0],b.center[1],Z[2]*o.pixelsPerMeter];e.scale$2(V,V,1/o.worldSize);var W=e.lngFromMercatorX(V[0]),G=e.latFromMercatorY(V[1]),H=Math.min(o._zoomFromMercatorZ(V[2]),s.maxZoom),X=new e.LngLat(W,G);return o.mercatorFromTransition&&H<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(o.setProjection({name:"globe"}),o.zoom=H,this._cameraForBounds(o,r,n,i,a)):{center:X,zoom:H,bearing:i}}},{key:"fitBounds",value:function(e,t,r){var n=this.cameraForBounds(e,t);return this._fitInternal(n,t,r)}},{key:"fitScreenCoordinates",value:function(t,r,n,i,a){var o=e.pointGeometry.convert(t),s=e.pointGeometry.convert(r),l=new e.pointGeometry(Math.min(o.x,s.x),Math.min(o.y,s.y)),c=new e.pointGeometry(Math.max(o.x,s.x),Math.max(o.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(o,s))return this;var u=this.transform.pointLocation3D(l),h=this.transform.pointLocation3D(c),d=this.transform.pointLocation3D(new e.pointGeometry(l.x,c.y)),f=this.transform.pointLocation3D(new e.pointGeometry(c.x,l.y)),p=[Math.min(u.lng,h.lng,d.lng,f.lng),Math.min(u.lat,h.lat,d.lat,f.lat)],m=[Math.max(u.lng,h.lng,d.lng,f.lng),Math.max(u.lat,h.lat,d.lat,f.lat)],v=this._cameraForBounds(this.transform,p,m,n,i);return this._fitInternal(v,i,a)}},{key:"_fitInternal",value:function(t,r,n){return t?(delete(r=e.extend(t,r)).padding,r.linear?this.easeTo(r,n):this.flyTo(r,n)):this}},{key:"jumpTo",value:function(t,r){this.stop();var n=t.preloadOnly?this.transform.clone():this.transform,i=!1,a=!1,o=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(i=!0,n.zoom=+t.zoom),void 0!==t.center&&(n.center=e.LngLat.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(a=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),null==t.padding||n.isPaddingEqual(t.padding)||(n.padding=t.padding),t.preloadOnly?(this._preloadTiles(n),this):(this.fire(new e.Event("movestart",r)).fire(new e.Event("move",r)),i&&this.fire(new e.Event("zoomstart",r)).fire(new e.Event("zoom",r)).fire(new e.Event("zoomend",r)),a&&this.fire(new e.Event("rotatestart",r)).fire(new e.Event("rotate",r)).fire(new e.Event("rotateend",r)),o&&this.fire(new e.Event("pitchstart",r)).fire(new e.Event("pitch",r)).fire(new e.Event("pitchend",r)),this.fire(new e.Event("moveend",r)))}},{key:"getFreeCameraOptions",value:function(){return this.transform.projection.supportsFreeCamera||e.warnOnce(sa),this.transform.getFreeCameraOptions()}},{key:"setFreeCameraOptions",value:function(t,r){var n=this.transform;if(!n.projection.supportsFreeCamera)return e.warnOnce(sa),this;this.stop();var i=n.zoom,a=n.pitch,o=n.bearing;n.setFreeCameraOptions(t);var s=i!==n.zoom,l=a!==n.pitch,c=o!==n.bearing;return this.fire(new e.Event("movestart",r)).fire(new e.Event("move",r)),s&&this.fire(new e.Event("zoomstart",r)).fire(new e.Event("zoom",r)).fire(new e.Event("zoomend",r)),c&&this.fire(new e.Event("rotatestart",r)).fire(new e.Event("rotate",r)).fire(new e.Event("rotateend",r)),l&&this.fire(new e.Event("pitchstart",r)).fire(new e.Event("pitch",r)).fire(new e.Event("pitchend",r)),this.fire(new e.Event("moveend",r)),this}},{key:"easeTo",value:function(t,r){var n=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);var i,a,o,s=this.transform,l=this.getZoom(),c=this.getBearing(),u=this.getPitch(),h=this.getPadding(),d="zoom"in t?+t.zoom:l,f="bearing"in t?this._normalizeBearing(t.bearing,c):c,p="pitch"in t?+t.pitch:u,m="padding"in t?t.padding:s.padding,v=e.pointGeometry.convert(t.offset);if("globe"===s.projection.name){var g=e.MercatorCoordinate.fromLngLat(s.center),y=v.rotate(-s.angle);g.x+=y.x/s.worldSize,g.y+=y.y/s.worldSize;var x=g.toLngLat(),b=e.LngLat.convert(t.center||x);this._normalizeCenter(b),i=s.centerPoint.add(y),a=new e.pointGeometry(g.x,g.y).mult(s.worldSize),o=new e.pointGeometry(e.mercatorXfromLng(b.lng),e.mercatorYfromLat(b.lat)).mult(s.worldSize).sub(a)}else{i=s.centerPoint.add(v);var _=s.pointLocation(i),w=e.LngLat.convert(t.center||_);this._normalizeCenter(w),a=s.project(_),o=s.project(w).sub(a)}var k,S,C=s.zoomScale(d-l);t.around&&(k=e.LngLat.convert(t.around),S=s.locationPoint(k));var A=this._zooming||d!==l,T=this._rotating||c!==f,E=this._pitching||p!==u,M=!s.isPaddingEqual(m),I=function(s){return function(g){if(A&&(s.zoom=e.number(l,d,g)),T&&(s.bearing=e.number(c,f,g)),E&&(s.pitch=e.number(u,p,g)),M&&(s.interpolatePadding(h,m,g),i=s.centerPoint.add(v)),k)s.setLocationAtPoint(k,S);else{var y=s.zoomScale(s.zoom-l),x=d>l?Math.min(2,C):Math.max(.5,C),b=Math.pow(x,1-g),_=s.unproject(a.add(o.mult(g*b)).mult(y));s.setLocationAtPoint(s.renderWorldCopies?_.wrap():_,i)}return t.preloadOnly||n._fireMoveEvents(r),s}};if(t.preloadOnly){var P=this._emulate(I,t.duration,s);return this._preloadTiles(P),this}var R={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=A,this._rotating=T,this._pitching=E,this._padding=M,this._easeId=t.easeId,this._prepareEase(r,t.noMoveStart,R),this._ease(I(s),(function(e){s.recenterOnTerrain(),n._afterEase(r,e)}),t),this}},{key:"_prepareEase",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",r||n.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!n.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!n.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!n.pitching&&this.fire(new e.Event("pitchstart",t))}},{key:"_fireMoveEvents",value:function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}},{key:"_afterEase",value:function(t,r){if(!this._easeId||!r||this._easeId!==r){this._easeId=void 0,this.transform.cameraElevationReference="ground";var n=this._zooming,i=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),a&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}}},{key:"flyTo",value:function(t,r){var n=this;if(!t.essential&&e.exported.prefersReducedMotion){var i=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,r)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var a=this.transform,o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),c=this.getPadding(),u="zoom"in t?e.clamp(+t.zoom,a.minZoom,a.maxZoom):o,h="bearing"in t?this._normalizeBearing(t.bearing,s):s,d="pitch"in t?+t.pitch:l,f="padding"in t?t.padding:a.padding,p=a.zoomScale(u-o),m=e.pointGeometry.convert(t.offset),v=a.centerPoint.add(m),g=a.pointLocation(v),y=e.LngLat.convert(t.center||g);this._normalizeCenter(y);var x=a.project(g),b=a.project(y).sub(x),_=t.curve,w=Math.max(a.width,a.height),k=w/p,S=b.mag();if("minZoom"in t){var C=e.clamp(Math.min(t.minZoom,o,u),a.minZoom,a.maxZoom),A=w/a.zoomScale(C-o);_=Math.sqrt(A/S*2)}var T=_*_;function E(e){var t=(k*k-w*w+(e?-1:1)*T*T*S*S)/(2*(e?k:w)*T*S);return Math.log(Math.sqrt(t*t+1)-t)}function M(e){return(Math.exp(e)-Math.exp(-e))/2}function I(e){return(Math.exp(e)+Math.exp(-e))/2}var P=E(0),R=function(e){return I(P)/I(P+_*e)},z=function(e){return w*((I(P)*(M(t=P+_*e)/I(t))-M(P))/T)/S;var t},L=(E(1)-P)/_;if(Math.abs(S)<1e-6||!isFinite(L)){if(Math.abs(w-k)<1e-6)return this.easeTo(t,r);var D=k<w?-1:1;L=Math.abs(Math.log(k/w))/_,z=function(){return 0},R=function(e){return Math.exp(D*_*e)}}t.duration="duration"in t?+t.duration:1e3*L/("screenSpeed"in t?+t.screenSpeed/_:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);var O=s!==h,F=d!==l,j=!a.isPaddingEqual(f),N=function(i){return function(a){var p=a*L,g=1/R(p);i.zoom=1===a?u:o+i.scaleZoom(g),O&&(i.bearing=e.number(s,h,a)),F&&(i.pitch=e.number(l,d,a)),j&&(i.interpolatePadding(c,f,a),v=i.centerPoint.add(m));var _=1===a?y:i.unproject(x.add(b.mult(z(p))).mult(g));return i.setLocationAtPoint(i.renderWorldCopies?_.wrap():_,v),i._updateCameraOnTerrain(),t.preloadOnly||n._fireMoveEvents(r),i}};if(t.preloadOnly){var B=this._emulate(N,t.duration,a);return this._preloadTiles(B),this}return this._zooming=!0,this._rotating=O,this._pitching=F,this._padding=j,this._prepareEase(r,!1),this._ease(N(a),(function(){return n._afterEase(r)}),t),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){var r=this._onEaseEnd;this._onEaseEnd=void 0,r.call(this,t)}if(!e){var n=this.handlers;n&&n.stop(!1)}return this}},{key:"_ease",value:function(t,r,n){!1===n.animate||0===n.duration?(t(1),r()):(this._easeStart=e.exported.now(),this._easeOptions=n,this._onEaseFrame=t,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_renderFrameCallback",value:function(){var t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),r=this._onEaseFrame;r&&r(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}},{key:"_normalizeBearing",value:function(t,r){t=e.wrap(t,-180,180);var n=Math.abs(t-r);return Math.abs(t-360-r)<n&&(t-=360),Math.abs(t+360-r)<n&&(t+=360),t}},{key:"_normalizeCenter",value:function(e){var t=this.transform;if(t.renderWorldCopies&&!t.maxBounds){var r=e.lng-t.center.lng;e.lng+=r>180?-360:r<-180?360:0}}},{key:"_emulate",value:function(e,t,r){for(var n=Math.ceil(15*t/1e3),i=[],a=e(r.clone()),o=0;o<=n;o++){var s=a(o/n);i.push(s.clone())}return i}}]),n}(e.Evented),ca=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,t),this.options=r,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}return p(t,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=y("button","mapboxgl-ctrl-attrib-button",this._container),y("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(e,t){var r=this._map._getUIString("AttributionControl.".concat(t));e.setAttribute("aria-label",r),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",r)}},{key:"_toggleAttribution",value:function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}},{key:"_updateEditLink",value:function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){var n=r.reduce((function(e,t,n){return t.value&&(e+="".concat(t.key,"=").concat(t.value).concat(n<r.length-1?"&":"")),e}),"?");t.href="".concat(e.config.FEEDBACK_URL,"/").concat(n,"#").concat(di(this._map,!0)),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}},{key:"_updateData",value:function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}},{key:"_updateAttributions",value:function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var r=this._map.style._sourceCaches;for(var n in r){var i=r[n];if(i.used){var a=i.getSource();a.attribution&&e.indexOf(a.attribution)<0&&e.push(a.attribution)}}e.sort((function(e,t){return e.length-t.length})),e=e.filter((function(t,r){for(var n=r+1;n<e.length;n++)if(e[n].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[].concat(u(this.options.customAttribution),u(e)):e.unshift(this.options.customAttribution));var o=e.join(" | ");o!==this._attribHTML&&(this._attribHTML=o,e.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}}},{key:"_updateCompact",value:function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}]),t}(),ua=function(){function t(){f(this,t),e.bindAll(["_updateLogo","_updateCompact"],this)}return p(t,[{key:"onAdd",value:function(e){this._map=e,this._container=y("div","mapboxgl-ctrl");var t=y("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}},{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_updateLogo",value:function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}},{key:"_logoRequired",value:function(){if(!this._map.style)return!0;var e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(var t in e){var r=e[t].getSource();if(r.hasOwnProperty("mapbox_logo")&&!r.mapbox_logo)return!1}return!0}},{key:"_updateCompact",value:function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}]),t}(),ha=function(){function e(){f(this,e),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return p(e,[{key:"add",value:function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}},{key:"remove",value:function(e){var t,r=this._currentlyRunning,n=r?this._queue.concat(r):this._queue,i=d(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.id===e)return void(a.cancelled=!0)}}catch(o){i.e(o)}finally{i.f()}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._currentlyRunning=this._queue;this._queue=[];var r,n=d(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(!i.cancelled&&(i.callback(e),this._cleared))break}}catch(a){n.e(a)}finally{n.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),e}();function da(t,r,n){if(t=new e.LngLat(t.lng,t.lat),r){var i=new e.LngLat(t.lng-360,t.lat),a=new e.LngLat(t.lng+360,t.lat),o=360*Math.ceil(Math.abs(t.lng-n.center.lng)/360),s=n.locationPoint(t).distSqr(r),l=r.x<0||r.y<0||r.x>n.width||r.y>n.height;n.locationPoint(i).distSqr(r)<s&&(l||Math.abs(i.lng-n.center.lng)<o)?t=i:n.locationPoint(a).distSqr(r)<s&&(l||Math.abs(a.lng-n.center.lng)<o)&&(t=a)}for(;Math.abs(t.lng-n.center.lng)>180;){var c=n.locationPoint(t);if(c.x>=0&&c.y>=0&&c.x<=n.width&&c.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}var fa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},pa=function(t){m(n,t);var r=v(n);function n(t,a){var o;if(f(this,n),o=r.call(this),(t instanceof e.window.HTMLElement||a)&&(t=e.extend({element:t},a)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],i(o)),o._anchor=t&&t.anchor||"center",o._color=t&&t.color||"#3FB1CE",o._scale=t&&t.scale||1,o._draggable=t&&t.draggable||!1,o._clickTolerance=t&&t.clickTolerance||0,o._isDragging=!1,o._state="inactive",o._rotation=t&&t.rotation||0,o._rotationAlignment=t&&t.rotationAlignment||"auto",o._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",o._updateMoving=function(){return o._update(!0)},o._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)o._element=t.element,o._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{o._defaultMarker=!0,o._element=y("div");var s=41,c=27,u=x("svg",{display:"block",height:s*o._scale+"px",width:c*o._scale+"px",viewBox:"0 0 ".concat(c," ").concat(s)},o._element),h=x("radialGradient",{id:"shadowGradient"},x("defs",{},u));x("stop",{offset:"10%","stop-opacity":.4},h),x("stop",{offset:"100%","stop-opacity":.05},h),x("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},u),x("path",{fill:o._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},u),x("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},u),x("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},u),o._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}o._element.hasAttribute("aria-label")||o._element.setAttribute("aria-label","Map marker"),o._element.classList.add("mapboxgl-marker"),o._element.addEventListener("dragstart",(function(e){e.preventDefault()})),o._element.addEventListener("mousedown",(function(e){e.preventDefault()}));var d=o._element.classList;for(var p in fa)d.remove("mapboxgl-marker-anchor-".concat(p));return d.add("mapboxgl-marker-anchor-".concat(o._anchor)),o._popup=null,l(o)}return p(n,[{key:"addTo",value:function(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}},{key:"remove",value:function(){var e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=38.1,r=13.5,n=Math.sqrt(Math.pow(r,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[n,-1*(t-r+n)],"bottom-right":[-n,-1*(t-r+n)],left:[r,-1*(t-r)],right:[-r,-1*(t-r)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}},{key:"_onKeyPress",value:function(e){var t=e.code,r=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==r&&13!==r||this.togglePopup()}},{key:"_onMapClick",value:function(e){var t=e.originalEvent.target,r=this._element;this._popup&&(t===r||r.contains(t))&&this.togglePopup()}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}},{key:"_behindTerrain",value:function(){var e=this._map,t=this._pos;if(!e||!t)return!1;var r=e.unproject(t),n=e.getFreeCameraOptions();if(!n.position)return!1;var i=n.position.toLngLat();return i.distanceTo(r)<.9*i.distanceTo(this._lngLat)}},{key:"_evaluateOpacity",value:function(){var t=this._map;if(t){var r=this._pos;if(!r||r.x<0||r.x>t.transform.width||r.y<0||r.y>t.transform.height)this._clearFadeTimer();else{var n,i=t.unproject(r);t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?n=0:(n=1-t._queryFogOpacity(i),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(n*=this._occludedOpacity)),this._element.style.opacity="".concat(n),this._element.style.pointerEvents=n>0?"auto":"none",this._popup&&this._popup._setOpacity(n),this._fadeTimer=null}}}},{key:"_clearFadeTimer",value:function(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}},{key:"_updateDOM",value:function(){var e=this._pos;if(e&&this._map){var t=this._offset.mult(this._scale);this._element.style.transform="\n            translate(".concat(e.x,"px,").concat(e.y,"px)\n            ").concat(fa[this._anchor],"\n            ").concat(this._calculateXYTransform()," ").concat(this._calculateZTransform(),"\n            translate(").concat(t.x,"px,").concat(t.y,"px)\n        ")}}},{key:"_calculateXYTransform",value:function(){var t=this._pos,r=this._map,n=this.getPitchAlignment();if(!r||!t||"map"!==n)return"";if(!r._showingGlobe()){var i=r.getPitch();return i?"rotateX(".concat(i,"deg)"):""}var a=e.radToDeg(e.globeTiltAtLngLat(r.transform,this._lngLat)),o=t.sub(e.globeCenterToScreenPoint(r.transform)),s=Math.abs(o.x)+Math.abs(o.y);if(0===s)return"";var l=a/s;return"rotateX(".concat(-o.y*l,"deg) rotateY(").concat(o.x*l,"deg)")}},{key:"_calculateZTransform",value:function(){var t=this._pos,r=this._map;if(!r||!t)return"";var n=0,i=this.getRotationAlignment();if("map"===i)if(r._showingGlobe()){var a=r.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),o=r.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(a);n=e.radToDeg(Math.atan2(o.y,o.x))-90}else n=-r.getBearing();else if("horizon"===i){var s=e.smoothstep(4,6,r.getZoom()),l=e.globeCenterToScreenPoint(r.transform);l.y+=s*r.transform.height;var c=t.sub(l),u=e.radToDeg(Math.atan2(c.y,c.x));n=(u>90?u-270:u+90)*(1-s)}return(n+=this._rotation)?"rotateZ(".concat(n,"deg)"):""}},{key:"_update",value:function(t){var r=this;e.window.cancelAnimationFrame(this._updateFrameId);var n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=da(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((function(){r._element&&r._pos&&r._anchor&&(r._pos=r._pos.round(),r._updateDOM())})):this._pos=this._pos.round(),n._requestDomTask((function(){r._map&&(r._element&&r._pos&&r._anchor&&r._updateDOM(),(n._showingGlobe()||n.getTerrain()||n.getFog())&&!r._fadeTimer&&(r._fadeTimer=setTimeout(r._evaluateOpacity.bind(r),60)))})))}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}},{key:"_onMove",value:function(t){var r=this._map;if(r){var n=this._pointerdownPos,i=this._positionDelta;if(n&&i){if(!this._isDragging){var a=this._clickTolerance||r._clickTolerance;if(t.point.dist(n)<a)return;this._isDragging=!0}this._pos=t.point.sub(i),this._lngLat=r.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}}},{key:"_onUp",value:function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;var t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}},{key:"_addDragHandler",value:function(e){var t=this._map,r=this._pos;t&&r&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(r),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}},{key:"setDraggable",value:function(e){this._draggable=!!e;var t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(e){return this._rotation=e||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(e){return this._rotationAlignment=e||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}},{key:"setPitchAlignment",value:function(e){return this._pitchAlignment=e||"auto",this._update(),this}},{key:"getPitchAlignment",value:function(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}},{key:"setOccludedOpacity",value:function(e){return this._occludedOpacity=e||.2,this._update(),this}},{key:"getOccludedOpacity",value:function(){return this._occludedOpacity}}]),n}(e.Evented),ma={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},va=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ga(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e.pointGeometry(0,0),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof t){var n=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(r){case"top":return new e.pointGeometry(0,t);case"top-left":return new e.pointGeometry(n,n);case"top-right":return new e.pointGeometry(-n,n);case"bottom":return new e.pointGeometry(0,-t);case"bottom-left":return new e.pointGeometry(n,-n);case"bottom-right":return new e.pointGeometry(-n,-n);case"left":return new e.pointGeometry(t,0);case"right":return new e.pointGeometry(-t,0)}return new e.pointGeometry(0,0)}return t instanceof e.pointGeometry||Array.isArray(t)?e.pointGeometry.convert(t):e.pointGeometry.convert(t[r]||[0,0])}var ya=function(){function t(e){f(this,t),this.jumpTo(e)}return p(t,[{key:"getValue",value:function(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;var r=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-r)+this._end*r}},{key:"isEasing",value:function(e){return e>=this._startTime&&e<=this._endTime}},{key:"jumpTo",value:function(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}},{key:"easeTo",value:function(e,t,r){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+r}}]),t}(),xa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ba={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function _a(e){e.parentNode&&e.parentNode.removeChild(e)}var wa={showCompass:!0,showZoom:!0,visualizePitch:!1},ka=function(){function t(r,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];f(this,t),this._clickTolerance=10,this.element=n,this.mouseRotate=new Li({clickTolerance:r.dragRotate._mouseRotate._clickTolerance}),this.map=r,i&&(this.mousePitch=new Di({clickTolerance:r.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}return p(t,[{key:"down",value:function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),k()}},{key:"move",value:function(e,t){var r=this.map,n=this.mouseRotate.mousemoveWindow(e,t),i=n&&n.bearingDelta;if(i&&r.setBearing(r.getBearing()+i),this.mousePitch){var a=this.mousePitch.mousemoveWindow(e,t),o=a&&a.pitchDelta;o&&r.setPitch(r.getPitch()+o)}}},{key:"off",value:function(){var e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){S(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}},{key:"mousedown",value:function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),T(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}},{key:"mousemove",value:function(e){this.move(e,T(this.element,e))}},{key:"mouseup",value:function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}},{key:"touchstart",value:function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=E(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))}},{key:"touchmove",value:function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=E(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))}},{key:"touchend",value:function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}},{key:"reset",value:function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}]),t}(),Sa={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Ca={maxWidth:100,unit:"metric"};function Aa(e,t,r){var n=this,i=Ta(t),a=i/t,o={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[r];this._map._requestDomTask((function(){n._container.style.width=e*a+"px",n._container.innerHTML="".concat(i,"&nbsp;").concat(o)}))}function Ta(e){var t=Math.pow(10,"".concat(Math.floor(e)).length-1),r=e/t;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(r),t*r}var Ea={version:e.version,supported:r,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:function(t){m(u,t);var a=v(u);function u(t){var r;if(f(this,u),e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},ba,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),(r=a.call(this,new ci(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t))._interactive=t.interactive,r._minTileCacheSize=t.minTileCacheSize,r._maxTileCacheSize=t.maxTileCacheSize,r._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,r._preserveDrawingBuffer=t.preserveDrawingBuffer,r._antialias=t.antialias,r._trackResize=t.trackResize,r._bearingSnap=t.bearingSnap,r._refreshExpiredTiles=t.refreshExpiredTiles,r._fadeDuration=t.fadeDuration,r._isInitialLoad=!0,r._crossSourceCollisions=t.crossSourceCollisions,r._crossFadingFactor=1,r._collectResourceTiming=t.collectResourceTiming,r._optimizeForTerrain=t.optimizeForTerrain,r._language=r._parseLanguage(t.language),r._worldview=t.worldview,r._renderTaskQueue=new ha,r._domRenderTaskQueue=new ha,r._controls=[],r._markers=[],r._popups=[],r._mapId=e.uniqueId(),r._locale=e.extend({},xa,t.locale),r._clickTolerance=t.clickTolerance,r._cooperativeGestures=t.cooperativeGestures,r._performanceMetricsCollection=t.performanceMetricsCollection,r._containerWidth=0,r._containerHeight=0,r._averageElevationLastSampledAt=-1/0,r._averageElevationExaggeration=0,r._averageElevation=new ya(0),r._interactionRange=[1/0,-1/0],r._useExplicitProjection=!1,r._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),r._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(r._container=e.window.document.getElementById(t.container),!r._container)throw new Error("Container '".concat(t.container,"' not found."))}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");r._container=t.container}if(r._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&r.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],i(r)),r._setupContainer(),r._setupPainter(),void 0===r.painter)throw new Error("Failed to initialize WebGL.");return r.on("move",(function(){return r._update(!1)})),r.on("moveend",(function(){return r._update(!1)})),r.on("zoom",(function(){return r._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",r._onWindowOnline,!1),e.window.addEventListener("resize",r._onWindowResize,!1),e.window.addEventListener("orientationchange",r._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",r._onWindowResize,!1)),r.handlers=new oa(i(r),t),r._localFontFamily=t.localFontFamily,r._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&r.setStyle(t.style,{localFontFamily:r._localFontFamily,localIdeographFontFamily:r._localIdeographFontFamily}),t.projection&&r.setProjection(t.projection),r._hash=t.hash&&new hi("string"==typeof t.hash&&t.hash||void 0).addTo(i(r)),r._hash&&r._hash._onHashChange()||(r.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(r.resize(),r.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),r.resize(),t.attributionControl&&r.addControl(new ca({customAttribution:t.customAttribution})),r._logoControl=new ua,r.addControl(r._logoControl,t.logoPosition),r.on("style.load",(function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)})),r.on("data",(function(t){r._update("style"===t.dataType),r.fire(new e.Event("".concat(t.dataType,"data"),t))})),r.on("dataloading",(function(t){r.fire(new e.Event("".concat(t.dataType,"dataloading"),t))})),l(r)}return p(u,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(t,r){if(void 0===r&&(r=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var n=t.onAdd(this);this._controls.push(t);var i=this._controlPositions[r];return-1!==r.indexOf("bottom")?i.insertBefore(n,i.firstChild):i.appendChild(n),this}},{key:"removeControl",value:function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var r=this._controls.indexOf(t);return r>-1&&this._controls.splice(r,1),t.onRemove(this),this}},{key:"hasControl",value:function(e){return this._controls.indexOf(e)>-1}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"resize",value:function(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));var r=!this._moving;return r&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),r&&this.fire(new e.Event("moveend",t)),this}},{key:"getBounds",value:function(){return"globe"===this.transform.projection.name&&e.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly when viewing the poles."'),this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()||null}},{key:"setMaxBounds",value:function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}},{key:"setMinZoom",value:function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}},{key:"getLanguage",value:function(){return this._language}},{key:"_parseLanguage",value:function(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((function(t){return"auto"===t?e.window.navigator.language:t})):t}},{key:"setLanguage",value:function(e){var t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();var r,n=d(this._controls);try{for(n.s();!(r=n.n()).done;){var i=r.value;i._setLanguage&&i._setLanguage(this._language)}}catch(a){n.e(a)}finally{n.f()}return this}},{key:"getWorldview",value:function(){return this._worldview}},{key:"setWorldview",value:function(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}},{key:"getProjection",value:function(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}},{key:"_showingGlobe",value:function(){return"globe"===this.transform.projection.name}},{key:"setProjection",value:function(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}},{key:"_updateProjectionTransition",value:function(){if("globe"===this.getProjection().name){var t,r=this.transform,n=r.projection.name;"globe"===n&&r.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(r.setMercatorFromTransition(),t=!0):"mercator"===n&&r.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(r.setProjection({name:"globe"}),t=!0),t&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}}},{key:"_prioritizeAndUpdateProjection",value:function(e,t){return this._updateProjection(e||t||{name:"mercator"})}},{key:"_updateProjection",value:function(t){var r;if(r="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),r){for(var n in this.painter.clearBackgroundTiles(),this.style._sourceCaches)this.style._sourceCaches[n].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}},{key:"project",value:function(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation3D(e.pointGeometry.convert(t))}},{key:"isMoving",value:function(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}},{key:"isZooming",value:function(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}},{key:"isRotating",value:function(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}},{key:"_createDelegatedListener",value:function(e,t,r){var i=this;if("mouseenter"===e||"mouseover"===e){var a=!1,o=function(n){var o=t.filter((function(e){return i.getLayer(e)})),s=o.length?i.queryRenderedFeatures(n.point,{layers:o}):[];s.length?a||(a=!0,r.call(i,new _i(e,i,n.originalEvent,{features:s}))):a=!1},s=function(){a=!1};return{layers:new Set(t),listener:r,delegates:{mousemove:o,mouseout:s}}}if("mouseleave"===e||"mouseout"===e){var l=!1,c=function(n){var a=t.filter((function(e){return i.getLayer(e)}));(a.length?i.queryRenderedFeatures(n.point,{layers:a}):[]).length?l=!0:l&&(l=!1,r.call(i,new _i(e,i,n.originalEvent)))},u=function(t){l&&(l=!1,r.call(i,new _i(e,i,t.originalEvent)))};return{layers:new Set(t),listener:r,delegates:{mousemove:c,mouseout:u}}}var h=function(e){var n=t.filter((function(e){return i.getLayer(e)})),a=n.length?i.queryRenderedFeatures(e.point,{layers:n}):[];a.length&&(e.features=a,r.call(i,e),delete e.features)};return{layers:new Set(t),listener:r,delegates:n({},e,h)}}},{key:"on",value:function(e,t,r){if(void 0===r)return o(s(u.prototype),"on",this).call(this,e,t);Array.isArray(t)||(t=[t]);var n=this._createDelegatedListener(e,t,r);for(var i in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(n),n.delegates)this.on(i,n.delegates[i]);return this}},{key:"once",value:function(e,t,r){if(void 0===r)return o(s(u.prototype),"once",this).call(this,e,t);Array.isArray(t)||(t=[t]);var n=this._createDelegatedListener(e,t,r);for(var i in n.delegates)this.once(i,n.delegates[i]);return this}},{key:"off",value:function(e,t,r){var n=this;if(void 0===r)return o(s(u.prototype),"off",this).call(this,e,t);t=new Set(Array.isArray(t)?t:[t]);var i=function(e,t){if(e.size!==t.size)return!1;var r,n=d(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(!t.has(i))return!1}}catch(a){n.e(a)}finally{n.f()}return!0},a=this._delegatedListeners?this._delegatedListeners[e]:void 0;return a&&function(e){for(var a=0;a<e.length;a++){var o=e[a];if(o.listener===r&&i(o.layers,t)){for(var s in o.delegates)n.off(s,o.delegates[s]);return e.splice(a,1),n}}}(a),this}},{key:"queryRenderedFeatures",value:function(t,r){return this.style?(void 0!==r||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(r=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],r=r||{},this.transform)):[]}},{key:"querySourceFeatures",value:function(e,t){return this.style.querySourceFeatures(e,t)}},{key:"setStyle",value:function(t,r){return!1!==(r=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&r.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._localFontFamily=r.localFontFamily,this._updateStyle(t,r))}},{key:"_getUIString",value:function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}},{key:"_updateStyle",value:function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new fr(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new fr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(t,r){var n=this;if("string"==typeof t){var i=this._requestManager.normalizeStyleURL(t),a=this._requestManager.transformRequest(i,e.ResourceType.Style);e.getJSON(a,(function(t,i){t?n.fire(new e.ErrorEvent(t)):i&&n._updateDiff(i,r)}))}else"object"==typeof t&&this._updateDiff(t,r)}},{key:"_updateDiff",value:function(t,r){try{this.style.setState(t)&&this._update(!0)}catch(c){e.warnOnce("Unable to perform style diff: ".concat(c.message||c.error||c,".  Rebuilding the style from scratch.")),this._updateStyle(t,r)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}},{key:"addSource",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}},{key:"isSourceLoaded",value:function(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}},{key:"areTilesLoaded",value:function(){var e=this.style&&this.style._sourceCaches;for(var t in e){var r=e[t]._tiles;for(var n in r){var i=r[n];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0}},{key:"addSourceType",value:function(e,t,r){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,r)}},{key:"removeSource",value:function(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}},{key:"getSource",value:function(e){return this.style.getSource(e)}},{key:"addImage",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.pixelRatio,a=void 0===i?1:i,o=n.sdf,s=void 0!==o&&o,l=n.stretchX,c=n.stretchY,u=n.content;if(this._lazyInitEmptyStyle(),r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap){var h=e.exported.getImageData(r),d=h.width,f=h.height,p=h.data;this.style.addImage(t,{data:new e.RGBAImage({width:d,height:f},p),pixelRatio:a,stretchX:l,stretchY:c,content:u,sdf:s,version:0})}else if(void 0===r.width||void 0===r.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{var m=r.width,v=r.height,g=r;this.style.addImage(t,{data:new e.RGBAImage({width:m,height:v},new Uint8Array(g.data)),pixelRatio:a,stretchX:l,stretchY:c,content:u,sdf:s,version:0,userImage:g}),g.onAdd&&g.onAdd(this,t)}}},{key:"updateImage",value:function(t,r){var n=this.style.getImage(t);if(n){var i=r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap?e.exported.getImageData(r):r,a=i.width,o=i.height;void 0!==a&&void 0!==o?a===n.data.width&&o===n.data.height?(n.data.replace(i.data,!(r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap)),this.style.updateImage(t,n)):this.fire(new e.ErrorEvent(new Error("The width and height of the updated image (".concat(a,", ").concat(o,")\n                must be that same as the previous version of the image\n                (").concat(n.data.width,", ").concat(n.data.height,")")))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}else this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")))}},{key:"hasImage",value:function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(e){this.style.removeImage(e)}},{key:"loadImage",value:function(t,r){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),(function(t,n){r(t,n instanceof e.window.HTMLImageElement?e.exported.getImageData(n):n)}))}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}},{key:"moveLayer",value:function(e,t){return this.style.moveLayer(e,t),this._update(!0)}},{key:"removeLayer",value:function(e){return this.style.removeLayer(e),this._update(!0)}},{key:"getLayer",value:function(e){return this.style.getLayer(e)}},{key:"setLayerZoomRange",value:function(e,t,r){return this.style.setLayerZoomRange(e,t,r),this._update(!0)}},{key:"setFilter",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,r),this._update(!0)}},{key:"getFilter",value:function(e){return this.style.getFilter(e)}},{key:"setPaintProperty",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,r,n),this._update(!0)}},{key:"getPaintProperty",value:function(e,t){return this.style.getPaintProperty(e,t)}},{key:"setLayoutProperty",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,r,n),this._update(!0)}},{key:"getLayoutProperty",value:function(e,t){return this.style.getLayoutProperty(e,t)}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setTerrain",value:function(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}},{key:"getTerrain",value:function(){return this.style?this.style.getTerrain():null}},{key:"setFog",value:function(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}},{key:"getFog",value:function(){return this.style?this.style.getFog():null}},{key:"_queryFogOpacity",value:function(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}},{key:"setFeatureState",value:function(e,t){return this.style.setFeatureState(e,t),this._update()}},{key:"removeFeatureState",value:function(e,t){return this.style.removeFeatureState(e,t),this._update()}},{key:"getFeatureState",value:function(e){return this.style.getFeatureState(e)}},{key:"_updateContainerDimensions",value:function(){if(this._container){for(var t,r,n,i=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300,o=this._container;o&&(!r||!n);){var s=e.window.getComputedStyle(o).transform;s&&"none"!==s&&((t=s.match(/matrix.*\((.+)\)/)[1].split(", "))[0]&&"0"!==t[0]&&"1"!==t[0]&&(r=t[0]),t[3]&&"0"!==t[3]&&"1"!==t[3]&&(n=t[3])),o=o.parentElement}this._containerWidth=r?Math.abs(i/r):i,this._containerHeight=n?Math.abs(a/n):a}}},{key:"_detectMissingCSS",value:function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}},{key:"_setupContainer",value:function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=y("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=y("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=y("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);var r=this._controlContainer=y("div","mapboxgl-control-container",e),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){n[e]=y("div","mapboxgl-ctrl-".concat(e),r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_resizeCanvas",value:function(t,r){var n=e.exported.devicePixelRatio||1;this._canvas.width=n*Math.ceil(t),this._canvas.height=n*Math.ceil(r),this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(r,"px")}},{key:"_addMarker",value:function(e){this._markers.push(e)}},{key:"_removeMarker",value:function(e){var t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}},{key:"_addPopup",value:function(e){this._popups.push(e)}},{key:"_removePopup",value:function(e){var t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}},{key:"_setupPainter",value:function(){var t=this,n=e.extend({},r.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);i?(e.storeAuthState(i,!0),this.painter=new $n(i,this.transform),this.on("data",(function(e){"source"===e.dataType&&t.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(i)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}},{key:"_contextLost",value:function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}},{key:"_contextRestored",value:function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}},{key:"_onMapScroll",value:function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(e){return this._update(),this._renderTaskQueue.add(e)}},{key:"_cancelRenderFrame",value:function(e){this._renderTaskQueue.remove(e)}},{key:"_requestDomTask",value:function(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}},{key:"_render",value:function(t){var r,n=this,i=this.painter.context.extTimerQuery,a=e.exported.now();if(this.listens("gpu-timing-frame")&&(r=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,r)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),!this._removed){this._updateProjectionTransition();var o=!1,s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;var l=this.transform.zoom,c=this.transform.pitch,u=e.exported.now();this.style.zoomHistory.update(l,u);var h=new e.EvaluationParameters(l,{now:u,fadeDuration:s,pitch:c,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),d=h.crossFadingFactor();1===d&&d===this._crossFadingFactor||(o=!0,this._crossFadingFactor=d),this.style.update(h)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);var f=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),f=this._updateAverageElevation(a),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):f=this._updateAverageElevation(a),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),r){var p=e.exported.now()-a;i.endQueryEXT(i.TIME_ELAPSED_EXT,r),setTimeout((function(){var t=i.getQueryObjectEXT(r,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r),n.fire(new e.Event("gpu-timing-frame",{cpuTime:p,gpuTime:t})),e.window.performance.mark("frame-gpu",{startTime:a,detail:{gpuTime:t}})}),50)}if(this.listens("gpu-timing-layer")){var m=this.painter.collectGpuTimers();setTimeout((function(){var t=n.painter.queryGpuTimers(m);n.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}if(this.listens("gpu-timing-deferred-render")){var v=this.painter.collectDeferredRenderGpuQueries();setTimeout((function(){var t=n.painter.queryGpuTimeDeferredRender(v);n.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:t}))}),50)}var g=this._sourcesDirty||this._styleDirty||this._placementDirty||f;if(g||this._repaint)this.triggerRepaint();else{var y=!this.isMoving()&&this.loaded();if(y&&(f=this._updateAverageElevation(a,!0)),f)this.triggerRepaint();else if(this._triggerFrame(!1),y&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){var x=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:x})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.painter.transform.projection,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}}},{key:"_forceMarkerAndPopupUpdate",value:function(e){var t,r=d(this._markers);try{for(r.s();!(t=r.n()).done;){var n=t.value;e&&!this.getRenderWorldCopies()&&(n._lngLat=n._lngLat.wrap()),n._update()}}catch(s){r.e(s)}finally{r.f()}var i,a=d(this._popups);try{for(a.s();!(i=a.n()).done;){var o=i.value;!e||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}}catch(s){a.e(s)}finally{a.f()}}},{key:"_updateAverageElevation",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){return t.transform.averageElevation=e,t._update(!1),!0};if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((r||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){var i=this.transform.averageElevation,a=this.transform.sampleAverageElevation(),o=!1;this.transform.elevation&&(o=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(a)?a=0:this._averageElevationLastSampledAt=e;var s=Math.abs(i-a);if(s>1){if(this._isInitialLoad||o)return this._averageElevation.jumpTo(a),n(a);this._averageElevation.easeTo(a,e,300)}else if(s>1e-4)return this._averageElevation.jumpTo(a),n(a)}return!!this._averageElevation.isEasing(e)&&n(this._averageElevation.getValue(e))}},{key:"_authenticate",value:function(){var t=this;e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(r){if(r&&(r.message===e.AUTH_ERR_MSG||401===r.status)){var n=t.painter.context.gl;e.storeAuthState(n,!1),t._logoControl instanceof ua&&t._logoControl._updateLogo(),n&&n.clear(n.DEPTH_BUFFER_BIT|n.COLOR_BUFFER_BIT|n.STENCIL_BUFFER_BIT),t._silenceAuthErrors||t.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(){}))}},{key:"_updateTerrain",value:function(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}},{key:"_calculateSpeedIndex",value:function(){var e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());var r=this.painter.context.gl,n=r.createFramebuffer();function i(e){r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);var t=new Uint8Array(r.drawingBufferWidth*r.drawingBufferHeight*4);return r.readPixels(0,0,r.drawingBufferWidth,r.drawingBufferHeight,r.RGBA,r.UNSIGNED_BYTE,t),t}return r.bindFramebuffer(r.FRAMEBUFFER,n),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}},{key:"_canvasPixelComparison",value:function(e,t,r){for(var n=r[1]-r[0],i=e.length/4,a=0;a<t.length;a++){for(var o=t[a],s=0,l=0;l<o.length;l+=4)o[l]===e[l]&&o[l+1]===e[l+1]&&o[l+2]===e[l+2]&&o[l+3]===e[l+3]&&(s+=1);n+=(r[a+2]-r[a+1])*(1-s/i)}return n}},{key:"remove",value:function(){this._hash&&this._hash.remove();var t,r=d(this._controls);try{for(r.s();!(t=r.n()).done;)t.value.onRemove(this)}catch(i){r.e(i)}finally{r.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),_a(this._canvasContainer),_a(this._controlContainer),_a(this._missingCSSCanary),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}},{key:"triggerRepaint",value:function(){this._triggerFrame(!0)}},{key:"_triggerFrame",value:function(t){var r=this;this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((function(e){var t=!!r._renderNextFrame;r._frame=null,r._renderNextFrame=null,t&&r._render(e)})))}},{key:"_preloadTiles",value:function(t){var r=this,n=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(n,(function(e,r){return e._preloadTiles(t,r)}),(function(){r.triggerRepaint()})),this}},{key:"_onWindowOnline",value:function(){this._update()}},{key:"_onWindowResize",value:function(e){this._trackResize&&this.resize({originalEvent:e})._update()}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}},{key:"showTerrainWireframe",get:function(){return!!this._showTerrainWireframe},set:function(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}},{key:"speedIndexTiming",get:function(){return!!this._speedIndexTiming},set:function(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(e){this._showPadding!==e&&(this._showPadding=e,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(e){this._vertices=e,this._update()}},{key:"showTileAABBs",get:function(){return!!this._showTileAABBs},set:function(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}},{key:"_setCacheLimits",value:function(t,r){e.setCacheLimits(t,r)}},{key:"version",get:function(){return e.version}}]),u}(la),NavigationControl:function(){function t(r){var n=this;f(this,t),this.options=e.extend({},wa,r),this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){n._map&&n._map.zoomIn({},{originalEvent:e})})),y("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){n._map&&n._map.zoomOut({},{originalEvent:e})})),y("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){var t=n._map;t&&(n.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=y("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}return p(t,[{key:"_updateZoomButtons",value:function(){var e=this._map;if(e){var t=e.getZoom(),r=t===e.getMaxZoom(),n=t===e.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}}},{key:"_rotateCompassArrow",value:function(){var e=this,t=this._map;if(t){var r=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(t.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(t.transform.pitch,"deg) rotateZ(").concat(t.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(t.transform.angle*(180/Math.PI),"deg)");t._requestDomTask((function(){e._compassIcon&&(e._compassIcon.style.transform=r)}))}}},{key:"onAdd",value:function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ka(e,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){var e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}},{key:"_createButton",value:function(e,t){var r=y("button",e,this._container);return r.type="button",r.addEventListener("click",t),r}},{key:"_setButtonTitle",value:function(e,t){if(this._map){var r=this._map._getUIString("NavigationControl.".concat(t));e.setAttribute("aria-label",r),e.firstElementChild&&e.firstElementChild.setAttribute("title",r)}}}]),t}(),GeolocateControl:function(t){m(n,t);var r=v(n);function n(t){var a;return f(this,n),(a=r.call(this)).options=e.extend({geolocation:e.window.navigator.geolocation},Sa,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],i(a)),a._updateMarkerRotationThrottled=ui(a._updateMarkerRotation,20),a._numberOfWatches=0,a}return p(n,[{key:"onAdd",value:function(e){return this._map=e,this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}},{key:"_checkGeolocationSupport",value:function(t){var r=this,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!r.options.geolocation;r._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){return n("denied"!==e.state)})).catch((function(){return n()})):n()}},{key:"_isOutOfMapMaxBounds",value:function(e){var t=this._map.getMaxBounds(),r=e.coords;return!!t&&(r.longitude<t.getWest()||r.longitude>t.getEast()||r.latitude<t.getSouth()||r.latitude>t.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}},{key:"_onSuccess",value:function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}},{key:"_updateCamera",value:function(t){var r=new e.LngLat(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy,i=this._map.getBearing(),a=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(n),a,{geolocateSource:!0})}},{key:"_updateMarker",value:function(t){if(t){var r=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}},{key:"_updateCircleRadius",value:function(){var t=this._map.transform,r=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,n=Math.ceil(2*this._accuracy*r);this._circleElement.style.width="".concat(n,"px"),this._circleElement.style.height="".concat(n,"px")}},{key:"_onZoom",value:function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}},{key:"_updateMarkerRotation",value:function(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}},{key:"_onError",value:function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}},{key:"_finish",value:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}},{key:"_setupUI",value:function(t){var r=this;if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=y("button","mapboxgl-ctrl-geolocate",this._container),y("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n)}else{var i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y("div","mapboxgl-user-location"),this._dotElement.appendChild(y("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(y("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new pa({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=y("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==r._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new e.Event("trackuserlocationend")))}))}},{key:"_onDeviceOrientation",value:function(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}},{key:"trigger",value:function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(t={maximumAge:6e5,timeout:0},this._noTimeout=!0):(t=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_addDeviceOrientationListener",value:function(){var t=this,r=function(){e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",t._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){"granted"===e&&r()})).catch(console.error):r()}},{key:"_clearWatch",value:function(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}]),n}(e.Evented),AttributionControl:ca,ScaleControl:function(){function t(r){f(this,t),this.options=e.extend({},Ca,r),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch(e){return!1}}()||(this._setScale=Aa.bind(this)),e.bindAll(["_update","_setScale","setUnit"],this)}return p(t,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_update",value:function(){var e=this.options.maxWidth||100,t=this._map,r=t._containerHeight/2,n=t._containerWidth/2-e/2,i=t.unproject([n,r]),a=t.unproject([n+e,r]),o=i.distanceTo(a);if("imperial"===this.options.unit){var s=3.2808*o;s>5280?this._setScale(e,s/5280,"mile"):this._setScale(e,s,"foot")}else"nautical"===this.options.unit?this._setScale(e,o/1852,"nautical-mile"):o>=1e3?this._setScale(e,o/1e3,"kilometer"):this._setScale(e,o,"meter")}},{key:"_setScale",value:function(e,t,r){var n=this,i=Ta(t),a=i/t;this._map._requestDomTask((function(){n._container.style.width=e*a+"px",n._container.innerHTML="nautical-mile"!==r?new Intl.NumberFormat(n._language,{style:"unit",unitDisplay:"narrow",unit:r}).format(i):"".concat(i,"&nbsp;nm")}))}},{key:"onAdd",value:function(e){return this._map=e,this._language=e.getLanguage(),this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}},{key:"_setLanguage",value:function(e){this._language=e,this._update()}},{key:"setUnit",value:function(e){this.options.unit=e,this._update()}}]),t}(),FullscreenControl:function(){function t(r){f(this,t),this._fullscreen=!1,r&&r.container&&(r.container instanceof e.window.HTMLElement?this._container=r.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}return p(t,[{key:"onAdd",value:function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}},{key:"onRemove",value:function(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_checkFullscreenSupport",value:function(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}},{key:"_setupUI",value:function(){var t=this._fullscreenButton=y("button","mapboxgl-ctrl-fullscreen",this._controlContainer);y("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_updateTitle",value:function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_changeIcon",value:function(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}},{key:"_onClickFullscreen",value:function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}}]),t}(),Popup:function(t){m(n,t);var r=v(n);function n(t){var a;return f(this,n),(a=r.call(this)).options=e.extend(Object.create(ma),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],i(a)),a._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[]),a}return p(n,[{key:"addTo",value:function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"remove",value:function(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);var t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();var r=this._map;return r&&(r.on("move",this._update),r.off("mousemove",this._onMouseEvent),r._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}},{key:"trackPointer",value:function(){this._trackPointer=!0,this._pos=null,this._update();var e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(t){return this.setDOMContent(e.window.document.createTextNode(t))}},{key:"setHTML",value:function(t){var r,n=e.window.document.createDocumentFragment(),i=e.window.document.createElement("body");for(i.innerHTML=t;r=i.firstChild;)n.appendChild(r);return this.setDOMContent(n)}},{key:"getMaxWidth",value:function(){return this._container&&this._container.style.maxWidth}},{key:"setMaxWidth",value:function(e){return this.options.maxWidth=e,this._update(),this}},{key:"setDOMContent",value:function(e){var t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=y("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){var r=this._closeButton=y("button","mapboxgl-popup-close-button",t);r.type="button",r.setAttribute("aria-label","Close popup"),r.setAttribute("aria-hidden","true"),r.innerHTML="&#215;",r.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(e){return this._classList.add(e),this._updateClassList(),this}},{key:"removeClassName",value:function(e){return this._classList.delete(e),this._updateClassList(),this}},{key:"setOffset",value:function(e){return this.options.offset=e,this._update(),this}},{key:"toggleClassName",value:function(e){var t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}},{key:"_onMouseEvent",value:function(e){this._update(e.point)}},{key:"_getAnchor",value:function(e){if(this.options.anchor)return this.options.anchor;var t=this._map,r=this._container,n=this._pos;if(!t||!r||!n)return"bottom";var i=r.offsetWidth,a=r.offsetHeight,o=n.x<i/2,s=n.x>t.transform.width-i/2;if(n.y+e<a)return o?"top-left":s?"top-right":"top";if(n.y>t.transform.height-a){if(o)return"bottom-left";if(s)return"bottom-right"}return o?"left":s?"right":"bottom"}},{key:"_updateClassList",value:function(){var e=this._container;if(e){var t=u(this._classList);t.push("mapboxgl-popup"),this._anchor&&t.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}}},{key:"_update",value:function(t){var r=this,n=this._map,i=this._content;if(n&&(this._lngLat||this._trackPointer)&&i){var a=this._container;if(a||(a=this._container=y("div","mapboxgl-popup",n.getContainer()),this._tip=y("div","mapboxgl-popup-tip",a),a.appendChild(i)),this.options.maxWidth&&a.style.maxWidth!==this.options.maxWidth&&(a.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=da(this._lngLat,this._pos,n.transform)),!this._trackPointer||t){var o=this._pos=this._trackPointer&&t?t:n.project(this._lngLat),s=ga(this.options.offset),l=this._anchor=this._getAnchor(s.y),c=ga(this.options.offset,l),u=o.add(c).round();n._requestDomTask((function(){r._container&&l&&(r._container.style.transform="".concat(fa[l]," translate(").concat(u.x,"px,").concat(u.y,"px)"))}))}if(!this._marker&&n._showingGlobe()){var h=e.isLngLatBehindGlobe(n.transform,this._lngLat)?0:1;this._setOpacity(h)}this._updateClassList()}}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var e=this._container.querySelector(va);e&&e.focus()}}},{key:"_onClose",value:function(){this.remove()}},{key:"_setOpacity",value:function(e){this._container&&(this._container.style.opacity="".concat(e)),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}}]),n}(e.Evented),Marker:pa,Style:fr,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:ti,Evented:e.Evented,config:e.config,prewarm:function(){et().acquire(Je)},clearPrewarmedResources:function(){var e=Ke;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Je),Ke=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return Qe.workerCount},set workerCount(e){Qe.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return Ea})),r}()},2426:function(e,t,r){(e=r.nmd(e)).exports=function(){"use strict";var t,r;function n(){return t.apply(null,arguments)}function i(e){t=e}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function c(e){return void 0===e}function u(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var r,n=[],i=e.length;for(r=0;r<i;++r)n.push(t(e[r],r));return n}function f(e,t){for(var r in t)s(t,r)&&(e[r]=t[r]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,r,n){return Xr(e,t,r,n,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(e){return null==e._pf&&(e._pf=m()),e._pf}function g(e){if(null==e._isValid){var t=v(e),n=r.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function y(e){var t=p(NaN);return null!=e?f(v(t),e):v(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){var t,r=Object(this),n=r.length>>>0;for(t=0;t<n;t++)if(t in r&&e.call(this,r[t],t,r))return!0;return!1};var x=n.momentProperties=[],b=!1;function _(e,t){var r,n,i,a=x.length;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=v(t)),c(t._locale)||(e._locale=t._locale),a>0)for(r=0;r<a;r++)c(i=t[n=x[r]])||(e[n]=i);return e}function w(e){_(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,n.updateOffset(this),b=!1)}function k(e){return e instanceof w||null!=e&&null!=e._isAMomentObject}function S(e){!1===n.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function C(e,t){var r=!0;return f((function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),r){var i,a,o,l=[],c=arguments.length;for(a=0;a<c;a++){if(i="","object"===typeof arguments[a]){for(o in i+="\n["+a+"] ",arguments[0])s(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[a];l.push(i)}S(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),r=!1}return t.apply(this,arguments)}),t)}var A,T={};function E(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),T[e]||(S(t),T[e]=!0)}function M(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function I(e){var t,r;for(r in e)s(e,r)&&(M(t=e[r])?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function P(e,t){var r,n=f({},e);for(r in t)s(t,r)&&(o(e[r])&&o(t[r])?(n[r]={},f(n[r],e[r]),f(n[r],t[r])):null!=t[r]?n[r]=t[r]:delete n[r]);for(r in e)s(e,r)&&!s(t,r)&&o(e[r])&&(n[r]=f({},n[r]));return n}function R(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,A=Object.keys?Object.keys:function(e){var t,r=[];for(t in e)s(e,t)&&r.push(t);return r};var z={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function L(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return M(n)?n.call(t,r):n}function D(e,t,r){var n=""+Math.abs(e),i=t-n.length;return(e>=0?r?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}var O=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,j={},N={};function B(e,t,r,n){var i=n;"string"===typeof n&&(i=function(){return this[n]()}),e&&(N[e]=i),t&&(N[t[0]]=function(){return D(i.apply(this,arguments),t[1],t[2])}),r&&(N[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function Z(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function U(e){var t,r,n=e.match(O);for(t=0,r=n.length;t<r;t++)N[n[t]]?n[t]=N[n[t]]:n[t]=Z(n[t]);return function(t){var i,a="";for(i=0;i<r;i++)a+=M(n[i])?n[i].call(t,e):n[i];return a}}function V(e,t){return e.isValid()?(t=W(t,e.localeData()),j[t]=j[t]||U(t),j[t](e)):e.localeData().invalidDate()}function W(e,t){var r=5;function n(e){return t.longDateFormat(e)||e}for(F.lastIndex=0;r>=0&&F.test(e);)e=e.replace(F,n),F.lastIndex=0,r-=1;return e}var G={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function H(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(O).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var X="Invalid date";function Y(){return this._invalidDate}var q="%d",$=/\d{1,2}/;function K(e){return this._ordinal.replace("%d",e)}var J={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Q(e,t,r,n){var i=this._relativeTime[r];return M(i)?i(e,t,r,n):i.replace(/%d/i,e)}function ee(e,t){var r=this._relativeTime[e>0?"future":"past"];return M(r)?r(t):r.replace(/%s/i,t)}var te={};function re(e,t){var r=e.toLowerCase();te[r]=te[r+"s"]=te[t]=e}function ne(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function ie(e){var t,r,n={};for(r in e)s(e,r)&&(t=ne(r))&&(n[t]=e[r]);return n}var ae={};function oe(e,t){ae[e]=t}function se(e){var t,r=[];for(t in e)s(e,t)&&r.push({unit:t,priority:ae[t]});return r.sort((function(e,t){return e.priority-t.priority})),r}function le(e){return e%4===0&&e%100!==0||e%400===0}function ce(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ue(e){var t=+e,r=0;return 0!==t&&isFinite(t)&&(r=ce(t)),r}function he(e,t){return function(r){return null!=r?(fe(this,e,r),n.updateOffset(this,t),this):de(this,e)}}function de(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function fe(e,t,r){e.isValid()&&!isNaN(r)&&("FullYear"===t&&le(e.year())&&1===e.month()&&29===e.date()?(r=ue(r),e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),Qe(r,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](r))}function pe(e){return M(this[e=ne(e)])?this[e]():this}function me(e,t){if("object"===typeof e){var r,n=se(e=ie(e)),i=n.length;for(r=0;r<i;r++)this[n[r].unit](e[n[r].unit])}else if(M(this[e=ne(e)]))return this[e](t);return this}var ve,ge=/\d/,ye=/\d\d/,xe=/\d{3}/,be=/\d{4}/,_e=/[+-]?\d{6}/,we=/\d\d?/,ke=/\d\d\d\d?/,Se=/\d\d\d\d\d\d?/,Ce=/\d{1,3}/,Ae=/\d{1,4}/,Te=/[+-]?\d{1,6}/,Ee=/\d+/,Me=/[+-]?\d+/,Ie=/Z|[+-]\d\d:?\d\d/gi,Pe=/Z|[+-]\d\d(?::?\d\d)?/gi,Re=/[+-]?\d+(\.\d{1,3})?/,ze=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Le(e,t,r){ve[e]=M(t)?t:function(e,n){return e&&r?r:t}}function De(e,t){return s(ve,e)?ve[e](t._strict,t._locale):new RegExp(Oe(e))}function Oe(e){return Fe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,r,n,i){return t||r||n||i})))}function Fe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}ve={};var je={};function Ne(e,t){var r,n,i=t;for("string"===typeof e&&(e=[e]),u(t)&&(i=function(e,r){r[t]=ue(e)}),n=e.length,r=0;r<n;r++)je[e[r]]=i}function Be(e,t){Ne(e,(function(e,r,n,i){n._w=n._w||{},t(e,n._w,n,i)}))}function Ze(e,t,r){null!=t&&s(je,e)&&je[e](t,r._a,r,e)}var Ue,Ve=0,We=1,Ge=2,He=3,Xe=4,Ye=5,qe=6,$e=7,Ke=8;function Je(e,t){return(e%t+t)%t}function Qe(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=Je(t,12);return e+=(t-r)/12,1===r?le(e)?29:28:31-r%7%2}Ue=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},B("M",["MM",2],"Mo",(function(){return this.month()+1})),B("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),B("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),re("month","M"),oe("month",8),Le("M",we),Le("MM",we,ye),Le("MMM",(function(e,t){return t.monthsShortRegex(e)})),Le("MMMM",(function(e,t){return t.monthsRegex(e)})),Ne(["M","MM"],(function(e,t){t[We]=ue(e)-1})),Ne(["MMM","MMMM"],(function(e,t,r,n){var i=r._locale.monthsParse(e,n,r._strict);null!=i?t[We]=i:v(r).invalidMonth=e}));var et="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),tt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,nt=ze,it=ze;function at(e,t){return e?a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||rt).test(t)?"format":"standalone"][e.month()]:a(this._months)?this._months:this._months.standalone}function ot(e,t){return e?a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[rt.test(t)?"format":"standalone"][e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function st(e,t,r){var n,i,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)a=p([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(a,"").toLocaleLowerCase();return r?"MMM"===t?-1!==(i=Ue.call(this._shortMonthsParse,o))?i:null:-1!==(i=Ue.call(this._longMonthsParse,o))?i:null:"MMM"===t?-1!==(i=Ue.call(this._shortMonthsParse,o))||-1!==(i=Ue.call(this._longMonthsParse,o))?i:null:-1!==(i=Ue.call(this._longMonthsParse,o))||-1!==(i=Ue.call(this._shortMonthsParse,o))?i:null}function lt(e,t,r){var n,i,a;if(this._monthsParseExact)return st.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=p([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),r||this._monthsParse[n]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(a.replace(".",""),"i")),r&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(r&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}}function ct(e,t){var r;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=ue(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return r=Math.min(e.date(),Qe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function ut(e){return null!=e?(ct(this,e),n.updateOffset(this,!0),this):de(this,"Month")}function ht(){return Qe(this.year(),this.month())}function dt(e){return this._monthsParseExact?(s(this,"_monthsRegex")||pt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=nt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function ft(e){return this._monthsParseExact?(s(this,"_monthsRegex")||pt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=it),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function pt(){function e(e,t){return t.length-e.length}var t,r,n=[],i=[],a=[];for(t=0;t<12;t++)r=p([2e3,t]),n.push(this.monthsShort(r,"")),i.push(this.months(r,"")),a.push(this.months(r,"")),a.push(this.monthsShort(r,""));for(n.sort(e),i.sort(e),a.sort(e),t=0;t<12;t++)n[t]=Fe(n[t]),i[t]=Fe(i[t]);for(t=0;t<24;t++)a[t]=Fe(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function mt(e){return le(e)?366:365}B("Y",0,0,(function(){var e=this.year();return e<=9999?D(e,4):"+"+e})),B(0,["YY",2],0,(function(){return this.year()%100})),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),re("year","y"),oe("year",1),Le("Y",Me),Le("YY",we,ye),Le("YYYY",Ae,be),Le("YYYYY",Te,_e),Le("YYYYYY",Te,_e),Ne(["YYYYY","YYYYYY"],Ve),Ne("YYYY",(function(e,t){t[Ve]=2===e.length?n.parseTwoDigitYear(e):ue(e)})),Ne("YY",(function(e,t){t[Ve]=n.parseTwoDigitYear(e)})),Ne("Y",(function(e,t){t[Ve]=parseInt(e,10)})),n.parseTwoDigitYear=function(e){return ue(e)+(ue(e)>68?1900:2e3)};var vt=he("FullYear",!0);function gt(){return le(this.year())}function yt(e,t,r,n,i,a,o){var s;return e<100&&e>=0?(s=new Date(e+400,t,r,n,i,a,o),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,r,n,i,a,o),s}function xt(e){var t,r;return e<100&&e>=0?((r=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function bt(e,t,r){var n=7+t-r;return-(7+xt(e,0,n).getUTCDay()-t)%7+n-1}function _t(e,t,r,n,i){var a,o,s=1+7*(t-1)+(7+r-n)%7+bt(e,n,i);return s<=0?o=mt(a=e-1)+s:s>mt(e)?(a=e+1,o=s-mt(e)):(a=e,o=s),{year:a,dayOfYear:o}}function wt(e,t,r){var n,i,a=bt(e.year(),t,r),o=Math.floor((e.dayOfYear()-a-1)/7)+1;return o<1?n=o+kt(i=e.year()-1,t,r):o>kt(e.year(),t,r)?(n=o-kt(e.year(),t,r),i=e.year()+1):(i=e.year(),n=o),{week:n,year:i}}function kt(e,t,r){var n=bt(e,t,r),i=bt(e+1,t,r);return(mt(e)-n+i)/7}function St(e){return wt(e,this._week.dow,this._week.doy).week}B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),re("week","w"),re("isoWeek","W"),oe("week",5),oe("isoWeek",5),Le("w",we),Le("ww",we,ye),Le("W",we),Le("WW",we,ye),Be(["w","ww","W","WW"],(function(e,t,r,n){t[n.substr(0,1)]=ue(e)}));var Ct={dow:0,doy:6};function At(){return this._week.dow}function Tt(){return this._week.doy}function Et(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Mt(e){var t=wt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function It(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Pt(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Rt(e,t){return e.slice(t,7).concat(e.slice(0,t))}B("d",0,"do","day"),B("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),B("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),B("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),re("day","d"),re("weekday","e"),re("isoWeekday","E"),oe("day",11),oe("weekday",11),oe("isoWeekday",11),Le("d",we),Le("e",we),Le("E",we),Le("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Le("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Le("dddd",(function(e,t){return t.weekdaysRegex(e)})),Be(["dd","ddd","dddd"],(function(e,t,r,n){var i=r._locale.weekdaysParse(e,n,r._strict);null!=i?t.d=i:v(r).invalidWeekday=e})),Be(["d","e","E"],(function(e,t,r,n){t[n]=ue(e)}));var zt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Lt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Dt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ot=ze,Ft=ze,jt=ze;function Nt(e,t){var r=a(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Rt(r,this._week.dow):e?r[e.day()]:r}function Bt(e){return!0===e?Rt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Zt(e){return!0===e?Rt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ut(e,t,r){var n,i,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)a=p([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(a,"").toLocaleLowerCase();return r?"dddd"===t?-1!==(i=Ue.call(this._weekdaysParse,o))?i:null:"ddd"===t?-1!==(i=Ue.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=Ue.call(this._minWeekdaysParse,o))?i:null:"dddd"===t?-1!==(i=Ue.call(this._weekdaysParse,o))||-1!==(i=Ue.call(this._shortWeekdaysParse,o))||-1!==(i=Ue.call(this._minWeekdaysParse,o))?i:null:"ddd"===t?-1!==(i=Ue.call(this._shortWeekdaysParse,o))||-1!==(i=Ue.call(this._weekdaysParse,o))||-1!==(i=Ue.call(this._minWeekdaysParse,o))?i:null:-1!==(i=Ue.call(this._minWeekdaysParse,o))||-1!==(i=Ue.call(this._weekdaysParse,o))||-1!==(i=Ue.call(this._shortWeekdaysParse,o))?i:null}function Vt(e,t,r){var n,i,a;if(this._weekdaysParseExact)return Ut.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=p([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(a.replace(".",""),"i")),r&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(r&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(r&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}}function Wt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=It(e,this.localeData()),this.add(e-t,"d")):t}function Gt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ht(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Pt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Xt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||$t.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Ot),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Yt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||$t.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ft),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function qt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||$t.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=jt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function $t(){function e(e,t){return t.length-e.length}var t,r,n,i,a,o=[],s=[],l=[],c=[];for(t=0;t<7;t++)r=p([2e3,1]).day(t),n=Fe(this.weekdaysMin(r,"")),i=Fe(this.weekdaysShort(r,"")),a=Fe(this.weekdays(r,"")),o.push(n),s.push(i),l.push(a),c.push(n),c.push(i),c.push(a);o.sort(e),s.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Kt(){return this.hours()%12||12}function Jt(){return this.hours()||24}function Qt(e,t){B(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function er(e,t){return t._meridiemParse}function tr(e){return"p"===(e+"").toLowerCase().charAt(0)}B("H",["HH",2],0,"hour"),B("h",["hh",2],0,Kt),B("k",["kk",2],0,Jt),B("hmm",0,0,(function(){return""+Kt.apply(this)+D(this.minutes(),2)})),B("hmmss",0,0,(function(){return""+Kt.apply(this)+D(this.minutes(),2)+D(this.seconds(),2)})),B("Hmm",0,0,(function(){return""+this.hours()+D(this.minutes(),2)})),B("Hmmss",0,0,(function(){return""+this.hours()+D(this.minutes(),2)+D(this.seconds(),2)})),Qt("a",!0),Qt("A",!1),re("hour","h"),oe("hour",13),Le("a",er),Le("A",er),Le("H",we),Le("h",we),Le("k",we),Le("HH",we,ye),Le("hh",we,ye),Le("kk",we,ye),Le("hmm",ke),Le("hmmss",Se),Le("Hmm",ke),Le("Hmmss",Se),Ne(["H","HH"],He),Ne(["k","kk"],(function(e,t,r){var n=ue(e);t[He]=24===n?0:n})),Ne(["a","A"],(function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e})),Ne(["h","hh"],(function(e,t,r){t[He]=ue(e),v(r).bigHour=!0})),Ne("hmm",(function(e,t,r){var n=e.length-2;t[He]=ue(e.substr(0,n)),t[Xe]=ue(e.substr(n)),v(r).bigHour=!0})),Ne("hmmss",(function(e,t,r){var n=e.length-4,i=e.length-2;t[He]=ue(e.substr(0,n)),t[Xe]=ue(e.substr(n,2)),t[Ye]=ue(e.substr(i)),v(r).bigHour=!0})),Ne("Hmm",(function(e,t,r){var n=e.length-2;t[He]=ue(e.substr(0,n)),t[Xe]=ue(e.substr(n))})),Ne("Hmmss",(function(e,t,r){var n=e.length-4,i=e.length-2;t[He]=ue(e.substr(0,n)),t[Xe]=ue(e.substr(n,2)),t[Ye]=ue(e.substr(i))}));var rr=/[ap]\.?m?\.?/i,nr=he("Hours",!0);function ir(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var ar,or={calendar:z,longDateFormat:G,invalidDate:X,ordinal:q,dayOfMonthOrdinalParse:$,relativeTime:J,months:et,monthsShort:tt,week:Ct,weekdays:zt,weekdaysMin:Dt,weekdaysShort:Lt,meridiemParse:rr},sr={},lr={};function cr(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r+=1)if(e[r]!==t[r])return r;return n}function ur(e){return e?e.toLowerCase().replace("_","-"):e}function hr(e){for(var t,r,n,i,a=0;a<e.length;){for(t=(i=ur(e[a]).split("-")).length,r=(r=ur(e[a+1]))?r.split("-"):null;t>0;){if(n=fr(i.slice(0,t).join("-")))return n;if(r&&r.length>=t&&cr(i,r)>=t-1)break;t--}a++}return ar}function dr(e){return null!=e.match("^[^/\\\\]*$")}function fr(t){var r=null;if(void 0===sr[t]&&e&&e.exports&&dr(t))try{r=ar._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),pr(r)}catch(n){sr[t]=null}return sr[t]}function pr(e,t){var r;return e&&((r=c(t)?gr(e):mr(e,t))?ar=r:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),ar._abbr}function mr(e,t){if(null!==t){var r,n=or;if(t.abbr=e,null!=sr[e])E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=sr[e]._config;else if(null!=t.parentLocale)if(null!=sr[t.parentLocale])n=sr[t.parentLocale]._config;else{if(null==(r=fr(t.parentLocale)))return lr[t.parentLocale]||(lr[t.parentLocale]=[]),lr[t.parentLocale].push({name:e,config:t}),null;n=r._config}return sr[e]=new R(P(n,t)),lr[e]&&lr[e].forEach((function(e){mr(e.name,e.config)})),pr(e),sr[e]}return delete sr[e],null}function vr(e,t){if(null!=t){var r,n,i=or;null!=sr[e]&&null!=sr[e].parentLocale?sr[e].set(P(sr[e]._config,t)):(null!=(n=fr(e))&&(i=n._config),t=P(i,t),null==n&&(t.abbr=e),(r=new R(t)).parentLocale=sr[e],sr[e]=r),pr(e)}else null!=sr[e]&&(null!=sr[e].parentLocale?(sr[e]=sr[e].parentLocale,e===pr()&&pr(e)):null!=sr[e]&&delete sr[e]);return sr[e]}function gr(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ar;if(!a(e)){if(t=fr(e))return t;e=[e]}return hr(e)}function yr(){return A(sr)}function xr(e){var t,r=e._a;return r&&-2===v(e).overflow&&(t=r[We]<0||r[We]>11?We:r[Ge]<1||r[Ge]>Qe(r[Ve],r[We])?Ge:r[He]<0||r[He]>24||24===r[He]&&(0!==r[Xe]||0!==r[Ye]||0!==r[qe])?He:r[Xe]<0||r[Xe]>59?Xe:r[Ye]<0||r[Ye]>59?Ye:r[qe]<0||r[qe]>999?qe:-1,v(e)._overflowDayOfYear&&(t<Ve||t>Ge)&&(t=Ge),v(e)._overflowWeeks&&-1===t&&(t=$e),v(e)._overflowWeekday&&-1===t&&(t=Ke),v(e).overflow=t),e}var br=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_r=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wr=/Z|[+-]\d\d(?::?\d\d)?/,kr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Sr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Cr=/^\/?Date\((-?\d+)/i,Ar=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Tr={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Er(e){var t,r,n,i,a,o,s=e._i,l=br.exec(s)||_r.exec(s),c=kr.length,u=Sr.length;if(l){for(v(e).iso=!0,t=0,r=c;t<r;t++)if(kr[t][1].exec(l[1])){i=kr[t][0],n=!1!==kr[t][2];break}if(null==i)return void(e._isValid=!1);if(l[3]){for(t=0,r=u;t<r;t++)if(Sr[t][1].exec(l[3])){a=(l[2]||" ")+Sr[t][0];break}if(null==a)return void(e._isValid=!1)}if(!n&&null!=a)return void(e._isValid=!1);if(l[4]){if(!wr.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=i+(a||"")+(o||""),Br(e)}else e._isValid=!1}function Mr(e,t,r,n,i,a){var o=[Ir(e),tt.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(i,10)];return a&&o.push(parseInt(a,10)),o}function Ir(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Pr(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Rr(e,t,r){return!e||Lt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(v(r).weekdayMismatch=!0,r._isValid=!1,!1)}function zr(e,t,r){if(e)return Tr[e];if(t)return 0;var n=parseInt(r,10),i=n%100;return(n-i)/100*60+i}function Lr(e){var t,r=Ar.exec(Pr(e._i));if(r){if(t=Mr(r[4],r[3],r[2],r[5],r[6],r[7]),!Rr(r[1],t,e))return;e._a=t,e._tzm=zr(r[8],r[9],r[10]),e._d=xt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function Dr(e){var t=Cr.exec(e._i);null===t?(Er(e),!1===e._isValid&&(delete e._isValid,Lr(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:n.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Or(e,t,r){return null!=e?e:null!=t?t:r}function Fr(e){var t=new Date(n.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function jr(e){var t,r,n,i,a,o=[];if(!e._d){for(n=Fr(e),e._w&&null==e._a[Ge]&&null==e._a[We]&&Nr(e),null!=e._dayOfYear&&(a=Or(e._a[Ve],n[Ve]),(e._dayOfYear>mt(a)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),r=xt(a,0,e._dayOfYear),e._a[We]=r.getUTCMonth(),e._a[Ge]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=n[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[He]&&0===e._a[Xe]&&0===e._a[Ye]&&0===e._a[qe]&&(e._nextDay=!0,e._a[He]=0),e._d=(e._useUTC?xt:yt).apply(null,o),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[He]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(v(e).weekdayMismatch=!0)}}function Nr(e){var t,r,n,i,a,o,s,l,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(a=1,o=4,r=Or(t.GG,e._a[Ve],wt(Yr(),1,4).year),n=Or(t.W,1),((i=Or(t.E,1))<1||i>7)&&(l=!0)):(a=e._locale._week.dow,o=e._locale._week.doy,c=wt(Yr(),a,o),r=Or(t.gg,e._a[Ve],c.year),n=Or(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(l=!0):null!=t.e?(i=t.e+a,(t.e<0||t.e>6)&&(l=!0)):i=a),n<1||n>kt(r,a,o)?v(e)._overflowWeeks=!0:null!=l?v(e)._overflowWeekday=!0:(s=_t(r,n,i,a,o),e._a[Ve]=s.year,e._dayOfYear=s.dayOfYear)}function Br(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],v(e).empty=!0;var t,r,i,a,o,s,l,c=""+e._i,u=c.length,h=0;for(l=(i=W(e._f,e._locale).match(O)||[]).length,t=0;t<l;t++)a=i[t],(r=(c.match(De(a,e))||[])[0])&&((o=c.substr(0,c.indexOf(r))).length>0&&v(e).unusedInput.push(o),c=c.slice(c.indexOf(r)+r.length),h+=r.length),N[a]?(r?v(e).empty=!1:v(e).unusedTokens.push(a),Ze(a,r,e)):e._strict&&!r&&v(e).unusedTokens.push(a);v(e).charsLeftOver=u-h,c.length>0&&v(e).unusedInput.push(c),e._a[He]<=12&&!0===v(e).bigHour&&e._a[He]>0&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[He]=Zr(e._locale,e._a[He],e._meridiem),null!==(s=v(e).era)&&(e._a[Ve]=e._locale.erasConvertYear(s,e._a[Ve])),jr(e),xr(e)}else Lr(e);else Er(e)}function Zr(e,t,r){var n;return null==r?t:null!=e.meridiemHour?e.meridiemHour(t,r):null!=e.isPM?((n=e.isPM(r))&&t<12&&(t+=12),n||12!==t||(t=0),t):t}function Ur(e){var t,r,n,i,a,o,s=!1,l=e._f.length;if(0===l)return v(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<l;i++)a=0,o=!1,t=_({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Br(t),g(t)&&(o=!0),a+=v(t).charsLeftOver,a+=10*v(t).unusedTokens.length,v(t).score=a,s?a<n&&(n=a,r=t):(null==n||a<n||o)&&(n=a,r=t,o&&(s=!0));f(e,r||t)}function Vr(e){if(!e._d){var t=ie(e._i),r=void 0===t.day?t.date:t.day;e._a=d([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),jr(e)}}function Wr(e){var t=new w(xr(Gr(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Gr(e){var t=e._i,r=e._f;return e._locale=e._locale||gr(e._l),null===t||void 0===r&&""===t?y({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),k(t)?new w(xr(t)):(h(t)?e._d=t:a(r)?Ur(e):r?Br(e):Hr(e),g(e)||(e._d=null),e))}function Hr(e){var t=e._i;c(t)?e._d=new Date(n.now()):h(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Dr(e):a(t)?(e._a=d(t.slice(0),(function(e){return parseInt(e,10)})),jr(e)):o(t)?Vr(e):u(t)?e._d=new Date(t):n.createFromInputFallback(e)}function Xr(e,t,r,n,i){var s={};return!0!==t&&!1!==t||(n=t,t=void 0),!0!==r&&!1!==r||(n=r,r=void 0),(o(e)&&l(e)||a(e)&&0===e.length)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=r,s._i=e,s._f=t,s._strict=n,Wr(s)}function Yr(e,t,r,n){return Xr(e,t,r,n,!1)}n.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),n.ISO_8601=function(){},n.RFC_2822=function(){};var qr=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Yr.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()})),$r=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Yr.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}));function Kr(e,t){var r,n;if(1===t.length&&a(t[0])&&(t=t[0]),!t.length)return Yr();for(r=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r}function Jr(){return Kr("isBefore",[].slice.call(arguments,0))}function Qr(){return Kr("isAfter",[].slice.call(arguments,0))}var en=function(){return Date.now?Date.now():+new Date},tn=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rn(e){var t,r,n=!1,i=tn.length;for(t in e)if(s(e,t)&&(-1===Ue.call(tn,t)||null!=e[t]&&isNaN(e[t])))return!1;for(r=0;r<i;++r)if(e[tn[r]]){if(n)return!1;parseFloat(e[tn[r]])!==ue(e[tn[r]])&&(n=!0)}return!0}function nn(){return this._isValid}function an(){return En(NaN)}function on(e){var t=ie(e),r=t.year||0,n=t.quarter||0,i=t.month||0,a=t.week||t.isoWeek||0,o=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._isValid=rn(t),this._milliseconds=+u+1e3*c+6e4*l+1e3*s*60*60,this._days=+o+7*a,this._months=+i+3*n+12*r,this._data={},this._locale=gr(),this._bubble()}function sn(e){return e instanceof on}function ln(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function cn(e,t,r){var n,i=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(n=0;n<i;n++)(r&&e[n]!==t[n]||!r&&ue(e[n])!==ue(t[n]))&&o++;return o+a}function un(e,t){B(e,0,0,(function(){var e=this.utcOffset(),r="+";return e<0&&(e=-e,r="-"),r+D(~~(e/60),2)+t+D(~~e%60,2)}))}un("Z",":"),un("ZZ",""),Le("Z",Pe),Le("ZZ",Pe),Ne(["Z","ZZ"],(function(e,t,r){r._useUTC=!0,r._tzm=dn(Pe,e)}));var hn=/([\+\-]|\d\d)/gi;function dn(e,t){var r,n,i=(t||"").match(e);return null===i?null:0===(n=60*(r=((i[i.length-1]||[])+"").match(hn)||["-",0,0])[1]+ue(r[2]))?0:"+"===r[0]?n:-n}function fn(e,t){var r,i;return t._isUTC?(r=t.clone(),i=(k(e)||h(e)?e.valueOf():Yr(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),n.updateOffset(r,!1),r):Yr(e).local()}function pn(e){return-Math.round(e._d.getTimezoneOffset())}function mn(e,t,r){var i,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=dn(Pe,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&t&&(i=pn(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==e&&(!t||this._changeInProgress?zn(this,En(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:pn(this)}function vn(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function gn(e){return this.utcOffset(0,e)}function yn(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pn(this),"m")),this}function xn(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=dn(Ie,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function bn(e){return!!this.isValid()&&(e=e?Yr(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function _n(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function wn(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return _(t,this),(t=Gr(t))._a?(e=t._isUTC?p(t._a):Yr(t._a),this._isDSTShifted=this.isValid()&&cn(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function kn(){return!!this.isValid()&&!this._isUTC}function Sn(){return!!this.isValid()&&this._isUTC}function Cn(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var An=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Tn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function En(e,t){var r,n,i,a=e,o=null;return sn(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(o=An.exec(e))?(r="-"===o[1]?-1:1,a={y:0,d:ue(o[Ge])*r,h:ue(o[He])*r,m:ue(o[Xe])*r,s:ue(o[Ye])*r,ms:ue(ln(1e3*o[qe]))*r}):(o=Tn.exec(e))?(r="-"===o[1]?-1:1,a={y:Mn(o[2],r),M:Mn(o[3],r),w:Mn(o[4],r),d:Mn(o[5],r),h:Mn(o[6],r),m:Mn(o[7],r),s:Mn(o[8],r)}):null==a?a={}:"object"===typeof a&&("from"in a||"to"in a)&&(i=Pn(Yr(a.from),Yr(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),n=new on(a),sn(e)&&s(e,"_locale")&&(n._locale=e._locale),sn(e)&&s(e,"_isValid")&&(n._isValid=e._isValid),n}function Mn(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function In(e,t){var r={};return r.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function Pn(e,t){var r;return e.isValid()&&t.isValid()?(t=fn(t,e),e.isBefore(t)?r=In(e,t):((r=In(t,e)).milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function Rn(e,t){return function(r,n){var i;return null===n||isNaN(+n)||(E(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=n,n=i),zn(this,En(r,n),e),this}}function zn(e,t,r,i){var a=t._milliseconds,o=ln(t._days),s=ln(t._months);e.isValid()&&(i=null==i||i,s&&ct(e,de(e,"Month")+s*r),o&&fe(e,"Date",de(e,"Date")+o*r),a&&e._d.setTime(e._d.valueOf()+a*r),i&&n.updateOffset(e,o||s))}En.fn=on.prototype,En.invalid=an;var Ln=Rn(1,"add"),Dn=Rn(-1,"subtract");function On(e){return"string"===typeof e||e instanceof String}function Fn(e){return k(e)||h(e)||On(e)||u(e)||Nn(e)||jn(e)||null===e||void 0===e}function jn(e){var t,r,n=o(e)&&!l(e),i=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=a.length;for(t=0;t<c;t+=1)r=a[t],i=i||s(e,r);return n&&i}function Nn(e){var t=a(e),r=!1;return t&&(r=0===e.filter((function(t){return!u(t)&&On(e)})).length),t&&r}function Bn(e){var t,r,n=o(e)&&!l(e),i=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<a.length;t+=1)r=a[t],i=i||s(e,r);return n&&i}function Zn(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function Un(e,t){1===arguments.length&&(arguments[0]?Fn(arguments[0])?(e=arguments[0],t=void 0):Bn(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||Yr(),i=fn(r,this).startOf("day"),a=n.calendarFormat(this,i)||"sameElse",o=t&&(M(t[a])?t[a].call(this,r):t[a]);return this.format(o||this.localeData().calendar(a,this,Yr(r)))}function Vn(){return new w(this)}function Wn(e,t){var r=k(e)?e:Yr(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf())}function Gn(e,t){var r=k(e)?e:Yr(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf())}function Hn(e,t,r,n){var i=k(e)?e:Yr(e),a=k(t)?t:Yr(t);return!!(this.isValid()&&i.isValid()&&a.isValid())&&("("===(n=n||"()")[0]?this.isAfter(i,r):!this.isBefore(i,r))&&(")"===n[1]?this.isBefore(a,r):!this.isAfter(a,r))}function Xn(e,t){var r,n=k(e)?e:Yr(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()))}function Yn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function qn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function $n(e,t,r){var n,i,a;if(!this.isValid())return NaN;if(!(n=fn(e,this)).isValid())return NaN;switch(i=6e4*(n.utcOffset()-this.utcOffset()),t=ne(t)){case"year":a=Kn(this,n)/12;break;case"month":a=Kn(this,n);break;case"quarter":a=Kn(this,n)/3;break;case"second":a=(this-n)/1e3;break;case"minute":a=(this-n)/6e4;break;case"hour":a=(this-n)/36e5;break;case"day":a=(this-n-i)/864e5;break;case"week":a=(this-n-i)/6048e5;break;default:a=this-n}return r?a:ce(a)}function Kn(e,t){if(e.date()<t.date())return-Kn(t,e);var r=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(r,"months");return-(r+(t-n<0?(t-n)/(n-e.clone().add(r-1,"months")):(t-n)/(e.clone().add(r+1,"months")-n)))||0}function Jn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Qn(e){if(!this.isValid())return null;var t=!0!==e,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?V(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):M(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",V(r,"Z")):V(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ei(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,r,n,i="moment",a="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",n=a+'[")]',this.format(e+t+r+n)}function ti(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=V(this,e);return this.localeData().postformat(t)}function ri(e,t){return this.isValid()&&(k(e)&&e.isValid()||Yr(e).isValid())?En({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ni(e){return this.from(Yr(),e)}function ii(e,t){return this.isValid()&&(k(e)&&e.isValid()||Yr(e).isValid())?En({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ai(e){return this.to(Yr(),e)}function oi(e){var t;return void 0===e?this._locale._abbr:(null!=(t=gr(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var si=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function li(){return this._locale}var ci=1e3,ui=60*ci,hi=60*ui,di=3506328*hi;function fi(e,t){return(e%t+t)%t}function pi(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-di:new Date(e,t,r).valueOf()}function mi(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-di:Date.UTC(e,t,r)}function vi(e){var t,r;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(r=this._isUTC?mi:pi,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fi(t+(this._isUTC?0:this.utcOffset()*ui),hi);break;case"minute":t=this._d.valueOf(),t-=fi(t,ui);break;case"second":t=this._d.valueOf(),t-=fi(t,ci)}return this._d.setTime(t),n.updateOffset(this,!0),this}function gi(e){var t,r;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(r=this._isUTC?mi:pi,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=hi-fi(t+(this._isUTC?0:this.utcOffset()*ui),hi)-1;break;case"minute":t=this._d.valueOf(),t+=ui-fi(t,ui)-1;break;case"second":t=this._d.valueOf(),t+=ci-fi(t,ci)-1}return this._d.setTime(t),n.updateOffset(this,!0),this}function yi(){return this._d.valueOf()-6e4*(this._offset||0)}function xi(){return Math.floor(this.valueOf()/1e3)}function bi(){return new Date(this.valueOf())}function _i(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wi(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function ki(){return this.isValid()?this.toISOString():null}function Si(){return g(this)}function Ci(){return f({},v(this))}function Ai(){return v(this).overflow}function Ti(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ei(e,t){var r,i,a,o=this._eras||gr("en")._eras;for(r=0,i=o.length;r<i;++r)switch("string"===typeof o[r].since&&(a=n(o[r].since).startOf("day"),o[r].since=a.valueOf()),typeof o[r].until){case"undefined":o[r].until=1/0;break;case"string":a=n(o[r].until).startOf("day").valueOf(),o[r].until=a.valueOf()}return o}function Mi(e,t,r){var n,i,a,o,s,l=this.eras();for(e=e.toUpperCase(),n=0,i=l.length;n<i;++n)if(a=l[n].name.toUpperCase(),o=l[n].abbr.toUpperCase(),s=l[n].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(o===e)return l[n];break;case"NNNN":if(a===e)return l[n];break;case"NNNNN":if(s===e)return l[n]}else if([a,o,s].indexOf(e)>=0)return l[n]}function Ii(e,t){var r=e.since<=e.until?1:-1;return void 0===t?n(e.since).year():n(e.since).year()+(t-e.offset)*r}function Pi(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until)return n[e].name;if(n[e].until<=r&&r<=n[e].since)return n[e].name}return""}function Ri(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until)return n[e].narrow;if(n[e].until<=r&&r<=n[e].since)return n[e].narrow}return""}function zi(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until)return n[e].abbr;if(n[e].until<=r&&r<=n[e].since)return n[e].abbr}return""}function Li(){var e,t,r,i,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(r=a[e].since<=a[e].until?1:-1,i=this.clone().startOf("day").valueOf(),a[e].since<=i&&i<=a[e].until||a[e].until<=i&&i<=a[e].since)return(this.year()-n(a[e].since).year())*r+a[e].offset;return this.year()}function Di(e){return s(this,"_erasNameRegex")||Ui.call(this),e?this._erasNameRegex:this._erasRegex}function Oi(e){return s(this,"_erasAbbrRegex")||Ui.call(this),e?this._erasAbbrRegex:this._erasRegex}function Fi(e){return s(this,"_erasNarrowRegex")||Ui.call(this),e?this._erasNarrowRegex:this._erasRegex}function ji(e,t){return t.erasAbbrRegex(e)}function Ni(e,t){return t.erasNameRegex(e)}function Bi(e,t){return t.erasNarrowRegex(e)}function Zi(e,t){return t._eraYearOrdinalRegex||Ee}function Ui(){var e,t,r=[],n=[],i=[],a=[],o=this.eras();for(e=0,t=o.length;e<t;++e)n.push(Fe(o[e].name)),r.push(Fe(o[e].abbr)),i.push(Fe(o[e].narrow)),a.push(Fe(o[e].name)),a.push(Fe(o[e].abbr)),a.push(Fe(o[e].narrow));this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+n.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function Vi(e,t){B(0,[e,e.length],0,t)}function Wi(e){return $i.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Gi(e){return $i.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Hi(){return kt(this.year(),1,4)}function Xi(){return kt(this.isoWeekYear(),1,4)}function Yi(){var e=this.localeData()._week;return kt(this.year(),e.dow,e.doy)}function qi(){var e=this.localeData()._week;return kt(this.weekYear(),e.dow,e.doy)}function $i(e,t,r,n,i){var a;return null==e?wt(this,n,i).year:(t>(a=kt(e,n,i))&&(t=a),Ki.call(this,e,t,r,n,i))}function Ki(e,t,r,n,i){var a=_t(e,t,r,n,i),o=xt(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Ji(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}B("N",0,0,"eraAbbr"),B("NN",0,0,"eraAbbr"),B("NNN",0,0,"eraAbbr"),B("NNNN",0,0,"eraName"),B("NNNNN",0,0,"eraNarrow"),B("y",["y",1],"yo","eraYear"),B("y",["yy",2],0,"eraYear"),B("y",["yyy",3],0,"eraYear"),B("y",["yyyy",4],0,"eraYear"),Le("N",ji),Le("NN",ji),Le("NNN",ji),Le("NNNN",Ni),Le("NNNNN",Bi),Ne(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,r,n){var i=r._locale.erasParse(e,n,r._strict);i?v(r).era=i:v(r).invalidEra=e})),Le("y",Ee),Le("yy",Ee),Le("yyy",Ee),Le("yyyy",Ee),Le("yo",Zi),Ne(["y","yy","yyy","yyyy"],Ve),Ne(["yo"],(function(e,t,r,n){var i;r._locale._eraYearOrdinalRegex&&(i=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[Ve]=r._locale.eraYearOrdinalParse(e,i):t[Ve]=parseInt(e,10)})),B(0,["gg",2],0,(function(){return this.weekYear()%100})),B(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Vi("gggg","weekYear"),Vi("ggggg","weekYear"),Vi("GGGG","isoWeekYear"),Vi("GGGGG","isoWeekYear"),re("weekYear","gg"),re("isoWeekYear","GG"),oe("weekYear",1),oe("isoWeekYear",1),Le("G",Me),Le("g",Me),Le("GG",we,ye),Le("gg",we,ye),Le("GGGG",Ae,be),Le("gggg",Ae,be),Le("GGGGG",Te,_e),Le("ggggg",Te,_e),Be(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,r,n){t[n.substr(0,2)]=ue(e)})),Be(["gg","GG"],(function(e,t,r,i){t[i]=n.parseTwoDigitYear(e)})),B("Q",0,"Qo","quarter"),re("quarter","Q"),oe("quarter",7),Le("Q",ge),Ne("Q",(function(e,t){t[We]=3*(ue(e)-1)})),B("D",["DD",2],"Do","date"),re("date","D"),oe("date",9),Le("D",we),Le("DD",we,ye),Le("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Ne(["D","DD"],Ge),Ne("Do",(function(e,t){t[Ge]=ue(e.match(we)[0])}));var Qi=he("Date",!0);function ea(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}B("DDD",["DDDD",3],"DDDo","dayOfYear"),re("dayOfYear","DDD"),oe("dayOfYear",4),Le("DDD",Ce),Le("DDDD",xe),Ne(["DDD","DDDD"],(function(e,t,r){r._dayOfYear=ue(e)})),B("m",["mm",2],0,"minute"),re("minute","m"),oe("minute",14),Le("m",we),Le("mm",we,ye),Ne(["m","mm"],Xe);var ta=he("Minutes",!1);B("s",["ss",2],0,"second"),re("second","s"),oe("second",15),Le("s",we),Le("ss",we,ye),Ne(["s","ss"],Ye);var ra,na,ia=he("Seconds",!1);for(B("S",0,0,(function(){return~~(this.millisecond()/100)})),B(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),B(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),B(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),B(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),B(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),B(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),re("millisecond","ms"),oe("millisecond",16),Le("S",Ce,ge),Le("SS",Ce,ye),Le("SSS",Ce,xe),ra="SSSS";ra.length<=9;ra+="S")Le(ra,Ee);function aa(e,t){t[qe]=ue(1e3*("0."+e))}for(ra="S";ra.length<=9;ra+="S")Ne(ra,aa);function oa(){return this._isUTC?"UTC":""}function sa(){return this._isUTC?"Coordinated Universal Time":""}na=he("Milliseconds",!1),B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var la=w.prototype;function ca(e){return Yr(1e3*e)}function ua(){return Yr.apply(null,arguments).parseZone()}function ha(e){return e}la.add=Ln,la.calendar=Un,la.clone=Vn,la.diff=$n,la.endOf=gi,la.format=ti,la.from=ri,la.fromNow=ni,la.to=ii,la.toNow=ai,la.get=pe,la.invalidAt=Ai,la.isAfter=Wn,la.isBefore=Gn,la.isBetween=Hn,la.isSame=Xn,la.isSameOrAfter=Yn,la.isSameOrBefore=qn,la.isValid=Si,la.lang=si,la.locale=oi,la.localeData=li,la.max=$r,la.min=qr,la.parsingFlags=Ci,la.set=me,la.startOf=vi,la.subtract=Dn,la.toArray=_i,la.toObject=wi,la.toDate=bi,la.toISOString=Qn,la.inspect=ei,"undefined"!==typeof Symbol&&null!=Symbol.for&&(la[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),la.toJSON=ki,la.toString=Jn,la.unix=xi,la.valueOf=yi,la.creationData=Ti,la.eraName=Pi,la.eraNarrow=Ri,la.eraAbbr=zi,la.eraYear=Li,la.year=vt,la.isLeapYear=gt,la.weekYear=Wi,la.isoWeekYear=Gi,la.quarter=la.quarters=Ji,la.month=ut,la.daysInMonth=ht,la.week=la.weeks=Et,la.isoWeek=la.isoWeeks=Mt,la.weeksInYear=Yi,la.weeksInWeekYear=qi,la.isoWeeksInYear=Hi,la.isoWeeksInISOWeekYear=Xi,la.date=Qi,la.day=la.days=Wt,la.weekday=Gt,la.isoWeekday=Ht,la.dayOfYear=ea,la.hour=la.hours=nr,la.minute=la.minutes=ta,la.second=la.seconds=ia,la.millisecond=la.milliseconds=na,la.utcOffset=mn,la.utc=gn,la.local=yn,la.parseZone=xn,la.hasAlignedHourOffset=bn,la.isDST=_n,la.isLocal=kn,la.isUtcOffset=Sn,la.isUtc=Cn,la.isUTC=Cn,la.zoneAbbr=oa,la.zoneName=sa,la.dates=C("dates accessor is deprecated. Use date instead.",Qi),la.months=C("months accessor is deprecated. Use month instead",ut),la.years=C("years accessor is deprecated. Use year instead",vt),la.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vn),la.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",wn);var da=R.prototype;function fa(e,t,r,n){var i=gr(),a=p().set(n,t);return i[r](a,e)}function pa(e,t,r){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return fa(e,t,r,"month");var n,i=[];for(n=0;n<12;n++)i[n]=fa(e,n,r,"month");return i}function ma(e,t,r,n){"boolean"===typeof e?(u(t)&&(r=t,t=void 0),t=t||""):(r=t=e,e=!1,u(t)&&(r=t,t=void 0),t=t||"");var i,a=gr(),o=e?a._week.dow:0,s=[];if(null!=r)return fa(t,(r+o)%7,n,"day");for(i=0;i<7;i++)s[i]=fa(t,(i+o)%7,n,"day");return s}function va(e,t){return pa(e,t,"months")}function ga(e,t){return pa(e,t,"monthsShort")}function ya(e,t,r){return ma(e,t,r,"weekdays")}function xa(e,t,r){return ma(e,t,r,"weekdaysShort")}function ba(e,t,r){return ma(e,t,r,"weekdaysMin")}da.calendar=L,da.longDateFormat=H,da.invalidDate=Y,da.ordinal=K,da.preparse=ha,da.postformat=ha,da.relativeTime=Q,da.pastFuture=ee,da.set=I,da.eras=Ei,da.erasParse=Mi,da.erasConvertYear=Ii,da.erasAbbrRegex=Oi,da.erasNameRegex=Di,da.erasNarrowRegex=Fi,da.months=at,da.monthsShort=ot,da.monthsParse=lt,da.monthsRegex=ft,da.monthsShortRegex=dt,da.week=St,da.firstDayOfYear=Tt,da.firstDayOfWeek=At,da.weekdays=Nt,da.weekdaysMin=Zt,da.weekdaysShort=Bt,da.weekdaysParse=Vt,da.weekdaysRegex=Xt,da.weekdaysShortRegex=Yt,da.weekdaysMinRegex=qt,da.isPM=tr,da.meridiem=ir,pr("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===ue(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.lang=C("moment.lang is deprecated. Use moment.locale instead.",pr),n.langData=C("moment.langData is deprecated. Use moment.localeData instead.",gr);var _a=Math.abs;function wa(){var e=this._data;return this._milliseconds=_a(this._milliseconds),this._days=_a(this._days),this._months=_a(this._months),e.milliseconds=_a(e.milliseconds),e.seconds=_a(e.seconds),e.minutes=_a(e.minutes),e.hours=_a(e.hours),e.months=_a(e.months),e.years=_a(e.years),this}function ka(e,t,r,n){var i=En(t,r);return e._milliseconds+=n*i._milliseconds,e._days+=n*i._days,e._months+=n*i._months,e._bubble()}function Sa(e,t){return ka(this,e,t,1)}function Ca(e,t){return ka(this,e,t,-1)}function Aa(e){return e<0?Math.floor(e):Math.ceil(e)}function Ta(){var e,t,r,n,i,a=this._milliseconds,o=this._days,s=this._months,l=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*Aa(Ma(s)+o),o=0,s=0),l.milliseconds=a%1e3,e=ce(a/1e3),l.seconds=e%60,t=ce(e/60),l.minutes=t%60,r=ce(t/60),l.hours=r%24,o+=ce(r/24),s+=i=ce(Ea(o)),o-=Aa(Ma(i)),n=ce(s/12),s%=12,l.days=o,l.months=s,l.years=n,this}function Ea(e){return 4800*e/146097}function Ma(e){return 146097*e/4800}function Ia(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if("month"===(e=ne(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,r=this._months+Ea(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(Ma(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}}function Pa(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ue(this._months/12):NaN}function Ra(e){return function(){return this.as(e)}}var za=Ra("ms"),La=Ra("s"),Da=Ra("m"),Oa=Ra("h"),Fa=Ra("d"),ja=Ra("w"),Na=Ra("M"),Ba=Ra("Q"),Za=Ra("y");function Ua(){return En(this)}function Va(e){return e=ne(e),this.isValid()?this[e+"s"]():NaN}function Wa(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ga=Wa("milliseconds"),Ha=Wa("seconds"),Xa=Wa("minutes"),Ya=Wa("hours"),qa=Wa("days"),$a=Wa("months"),Ka=Wa("years");function Ja(){return ce(this.days()/7)}var Qa=Math.round,eo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function to(e,t,r,n,i){return i.relativeTime(t||1,!!r,e,n)}function ro(e,t,r,n){var i=En(e).abs(),a=Qa(i.as("s")),o=Qa(i.as("m")),s=Qa(i.as("h")),l=Qa(i.as("d")),c=Qa(i.as("M")),u=Qa(i.as("w")),h=Qa(i.as("y")),d=a<=r.ss&&["s",a]||a<r.s&&["ss",a]||o<=1&&["m"]||o<r.m&&["mm",o]||s<=1&&["h"]||s<r.h&&["hh",s]||l<=1&&["d"]||l<r.d&&["dd",l];return null!=r.w&&(d=d||u<=1&&["w"]||u<r.w&&["ww",u]),(d=d||c<=1&&["M"]||c<r.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=t,d[3]=+e>0,d[4]=n,to.apply(null,d)}function no(e){return void 0===e?Qa:"function"===typeof e&&(Qa=e,!0)}function io(e,t){return void 0!==eo[e]&&(void 0===t?eo[e]:(eo[e]=t,"s"===e&&(eo.ss=t-1),!0))}function ao(e,t){if(!this.isValid())return this.localeData().invalidDate();var r,n,i=!1,a=eo;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(i=e),"object"===typeof t&&(a=Object.assign({},eo,t),null!=t.s&&null==t.ss&&(a.ss=t.s-1)),n=ro(this,!i,a,r=this.localeData()),i&&(n=r.pastFuture(+this,n)),r.postformat(n)}var oo=Math.abs;function so(e){return(e>0)-(e<0)||+e}function lo(){if(!this.isValid())return this.localeData().invalidDate();var e,t,r,n,i,a,o,s,l=oo(this._milliseconds)/1e3,c=oo(this._days),u=oo(this._months),h=this.asSeconds();return h?(e=ce(l/60),t=ce(e/60),l%=60,e%=60,r=ce(u/12),u%=12,n=l?l.toFixed(3).replace(/\.?0+$/,""):"",i=h<0?"-":"",a=so(this._months)!==so(h)?"-":"",o=so(this._days)!==so(h)?"-":"",s=so(this._milliseconds)!==so(h)?"-":"",i+"P"+(r?a+r+"Y":"")+(u?a+u+"M":"")+(c?o+c+"D":"")+(t||e||l?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(l?s+n+"S":"")):"P0D"}var co=on.prototype;return co.isValid=nn,co.abs=wa,co.add=Sa,co.subtract=Ca,co.as=Ia,co.asMilliseconds=za,co.asSeconds=La,co.asMinutes=Da,co.asHours=Oa,co.asDays=Fa,co.asWeeks=ja,co.asMonths=Na,co.asQuarters=Ba,co.asYears=Za,co.valueOf=Pa,co._bubble=Ta,co.clone=Ua,co.get=Va,co.milliseconds=Ga,co.seconds=Ha,co.minutes=Xa,co.hours=Ya,co.days=qa,co.weeks=Ja,co.months=$a,co.years=Ka,co.humanize=ao,co.toISOString=lo,co.toString=lo,co.toJSON=lo,co.locale=oi,co.localeData=li,co.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",lo),co.lang=si,B("X",0,0,"unix"),B("x",0,0,"valueOf"),Le("x",Me),Le("X",Re),Ne("X",(function(e,t,r){r._d=new Date(1e3*parseFloat(e))})),Ne("x",(function(e,t,r){r._d=new Date(ue(e))})),n.version="2.29.4",i(Yr),n.fn=la,n.min=Jr,n.max=Qr,n.now=en,n.utc=p,n.unix=ca,n.months=va,n.isDate=h,n.locale=pr,n.invalid=y,n.duration=En,n.isMoment=k,n.weekdays=ya,n.parseZone=ua,n.localeData=gr,n.isDuration=sn,n.monthsShort=ga,n.weekdaysMin=ba,n.defineLocale=mr,n.updateLocale=vr,n.locales=yr,n.weekdaysShort=xa,n.normalizeUnits=ne,n.relativeTimeRounding=no,n.relativeTimeThreshold=io,n.calendarFormat=Zn,n.prototype=la,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n}()},888:function(e,t,r){"use strict";var n=r(9047);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,a,o){if(o!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return r.PropTypes=r,r}},2007:function(e,t,r){e.exports=r(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3496:function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(8700)),s=r(2791),l=u(s),c=u(r(2007));function u(e){return e&&e.__esModule?e:{default:e}}window.ApexCharts=o.default;var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.default.createRef?r.chartRef=l.default.createRef():r.setRef=function(e){return r.chartRef=e},r.chart=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.Component),a(e,[{key:"render",value:function(){var e=this.props,t=(e.type,e.height,e.width,e.series,e.options,function(e,t){var r={};for(var n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["type","height","width","series","options"]));return l.default.createElement("div",i({ref:l.default.createRef?this.chartRef:this.setRef},t))}},{key:"componentDidMount",value:function(){var e=l.default.createRef?this.chartRef.current:this.chartRef;this.chart=new o.default(e,this.getConfig()),this.chart.render()}},{key:"getConfig",value:function(){var e=this.props,t=e.type,r=e.height,n=e.width,i=e.series,a=e.options,o={chart:{type:t,height:r,width:n},series:i};return this.extend(a,o)}},{key:"isObject",value:function(e){return e&&"object"===(void 0===e?"undefined":n(e))&&!Array.isArray(e)&&null!=e}},{key:"extend",value:function(e,t){var r=this;"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t});var n=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach((function(i){r.isObject(t[i])&&i in e?n[i]=r.extend(e[i],t[i]):Object.assign(n,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},i,t[i]))})),n}},{key:"componentDidUpdate",value:function(e){if(!this.chart)return null;var t=this.props,r=t.options,n=t.series,i=t.height,a=t.width,o=JSON.stringify(e.options),s=JSON.stringify(e.series),l=JSON.stringify(r),c=JSON.stringify(n);o===l&&s===c&&i===e.height&&a===e.width||(s===c?this.chart.updateOptions(this.getConfig()):o===l&&i===e.height&&a===e.width?this.chart.updateSeries(n):this.chart.updateOptions(this.getConfig()))}},{key:"componentWillUnmount",value:function(){this.chart&&"function"==typeof this.chart.destroy&&this.chart.destroy()}}]),e}();(t.Z=h).propTypes={type:c.default.string.isRequired,width:c.default.any,height:c.default.any,series:c.default.array.isRequired,options:c.default.object.isRequired},h.defaultProps={type:"line",width:"100%",height:"auto"}},4463:function(e,t,r){"use strict";var n=r(2791),i=r(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,r,n,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,r,n){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var z=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var O,F=Object.assign;function j(e){if(void 0===O)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var N=!1;function B(e,t){if(!e||N)return"";N=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=n.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{N=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?j(e):""}function Z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case C:return"Profiler";case S:return"StrictMode";case M:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return U(e(t))}catch(r){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=G(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var r=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function $(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=W(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function J(e,t){K(e,t);var r=W(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Y(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+W(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(te(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:W(r)}}function ae(e,t){var r=W(t.value),n=W(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=me(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,Se=null;function Ce(e){if(e=xi(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=_i(t),we(e.stateNode,e.type,t))}}function Ae(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Te(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ee(e,t){return e(t)}function Me(){}var Ie=!1;function Pe(e,t,r){if(Ie)return e(t,r);Ie=!0;try{return Ee(e,t,r)}finally{Ie=!1,(null!==ke||null!==Se)&&(Me(),Te())}}function Re(e,t){var r=e.stateNode;if(null===r)return null;var n=_i(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}var ze=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){ze=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){ze=!1}function De(e,t,r,n,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Oe=!1,Fe=null,je=!1,Ne=null,Be={onError:function(e){Oe=!0,Fe=e}};function Ze(e,t,r,n,i,a,o,s,l){Oe=!1,Fe=null,De.apply(Be,arguments)}function Ue(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(n=i.return)){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return We(i),e;if(o===n)return We(i),t;o=o.sibling}throw Error(a(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,n=o;break}if(l===n){s=!0,n=i,r=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===r){s=!0,r=o,n=i;break}if(l===n){s=!0,n=o,r=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(r.alternate!==n)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,qe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Ke=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,rt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&r;if(0!==o){var s=o&~i;0!==s?n=ht(s):0!==(a&=o)&&(n=ht(a))}else 0!==(o=r&~i)?n=ht(o):0!==a&&(n=ht(a));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-ot(t)),n|=e[r],t&=~i;return n}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function vt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=r}function yt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,kt,St,Ct,At=!1,Tt=[],Et=null,Mt=null,It=null,Pt=new Map,Rt=new Map,zt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ot(e,t,r,n,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&wt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var r=Ue(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ve(r)))return e.blockedOn=t,void Ct(e.priority,(function(){kt(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=xi(r))&&wt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function Nt(e,t,r){jt(e)&&r.delete(t)}function Bt(){At=!1,null!==Et&&jt(Et)&&(Et=null),null!==Mt&&jt(Mt)&&(Mt=null),null!==It&&jt(It)&&(It=null),Pt.forEach(Nt),Rt.forEach(Nt)}function Zt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Ut(e){function t(t){return Zt(t,e)}if(0<Tt.length){Zt(Tt[0],e);for(var r=1;r<Tt.length;r++){var n=Tt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Et&&Zt(Et,e),null!==Mt&&Zt(Mt,e),null!==It&&Zt(It,e),Pt.forEach(t),Rt.forEach(t),r=0;r<zt.length;r++)(n=zt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<zt.length&&null===(r=zt[0]).blockedOn;)Ft(r),null===r.blockedOn&&zt.shift()}var Vt=b.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,r,n){var i=xt,a=Vt.transition;Vt.transition=null;try{xt=1,Xt(e,t,r,n)}finally{xt=i,Vt.transition=a}}function Ht(e,t,r,n){var i=xt,a=Vt.transition;Vt.transition=null;try{xt=4,Xt(e,t,r,n)}finally{xt=i,Vt.transition=a}}function Xt(e,t,r,n){if(Wt){var i=qt(e,t,r,n);if(null===i)Wn(e,t,n,Yt,r),Dt(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return Et=Ot(Et,e,t,r,n,i),!0;case"dragenter":return Mt=Ot(Mt,e,t,r,n,i),!0;case"mouseover":return It=Ot(It,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Ot(Pt.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Ot(Rt.get(a)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Dt(e,n),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var a=xi(i);if(null!==a&&_t(a),null===(a=qt(e,t,r,n))&&Wn(e,t,n,Yt,r),a===i)break;i=a}null!==i&&n.stopPropagation()}else Wn(e,t,n,null,r)}}var Yt=null;function qt(e,t,r,n){if(Yt=null,null!==(e=yi(e=_e(n))))if(null===(t=Ue(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Qe:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Kt=null,Jt=null,Qt=null;function er(){if(Qt)return Qt;var e,t,r=Jt,n=r.length,i="value"in Kt?Kt.value:Kt.textContent,a=i.length;for(e=0;e<n&&r[e]===i[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===i[a-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ir(e){function t(t,r,n,i,a){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ar,or,sr,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ir(lr),ur=F({},lr,{view:0,detail:0}),hr=ir(ur),dr=F({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(ar=e.screenX-sr.screenX,or=e.screenY-sr.screenY):or=ar=0,sr=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:or}}),fr=ir(dr),pr=ir(F({},dr,{dataTransfer:0})),mr=ir(F({},ur,{relatedTarget:0})),vr=ir(F({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=F({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=ir(gr),xr=ir(F({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function Sr(){return kr}var Cr=F({},ur,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_r[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ar=ir(Cr),Tr=ir(F({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=ir(F({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr})),Mr=ir(F({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ir=F({},dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=ir(Ir),Rr=[9,13,27,32],zr=u&&"CompositionEvent"in window,Lr=null;u&&"documentMode"in document&&(Lr=document.documentMode);var Dr=u&&"TextEvent"in window&&!Lr,Or=u&&(!zr||Lr&&8<Lr&&11>=Lr),Fr=String.fromCharCode(32),jr=!1;function Nr(e,t){switch(e){case"keyup":return-1!==Rr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Br(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Zr=!1;var Ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ur[e.type]:"textarea"===t}function Wr(e,t,r,n){Ae(n),0<(t=Hn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Gr=null,Hr=null;function Xr(e){jn(e,0)}function Yr(e){if(X(bi(e)))return e}function qr(e,t){if("change"===e)return t}var $r=!1;if(u){var Kr;if(u){var Jr="oninput"in document;if(!Jr){var Qr=document.createElement("div");Qr.setAttribute("oninput","return;"),Jr="function"===typeof Qr.oninput}Kr=Jr}else Kr=!1;$r=Kr&&(!document.documentMode||9<document.documentMode)}function en(){Gr&&(Gr.detachEvent("onpropertychange",tn),Hr=Gr=null)}function tn(e){if("value"===e.propertyName&&Yr(Hr)){var t=[];Wr(t,Hr,e,_e(e)),Pe(Xr,t)}}function rn(e,t,r){"focusin"===e?(en(),Hr=r,(Gr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr(Hr)}function an(e,t){if("click"===e)return Yr(t)}function on(e,t){if("input"===e||"change"===e)return Yr(t)}var sn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(sn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!h.call(t,i)||!sn(e[i],t[i]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function hn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dn(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Y((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=dn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&hn(r.ownerDocument.documentElement,r)){if(null!==n&&fn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=void 0===n.end?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=un(r,a);var o=un(r,n);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mn=u&&"documentMode"in document&&11>=document.documentMode,vn=null,gn=null,yn=null,xn=!1;function bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;xn||null==vn||vn!==Y(n)||("selectionStart"in(n=vn)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&ln(yn,n)||(yn=n,0<(n=Hn(gn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=vn)))}function _n(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wn={animationend:_n("Animation","AnimationEnd"),animationiteration:_n("Animation","AnimationIteration"),animationstart:_n("Animation","AnimationStart"),transitionend:_n("Transition","TransitionEnd")},kn={},Sn={};function Cn(e){if(kn[e])return kn[e];if(!wn[e])return e;var t,r=wn[e];for(t in r)if(r.hasOwnProperty(t)&&t in Sn)return kn[e]=r[t];return e}u&&(Sn=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var An=Cn("animationend"),Tn=Cn("animationiteration"),En=Cn("animationstart"),Mn=Cn("transitionend"),In=new Map,Pn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rn(e,t){In.set(e,t),l(t,[e])}for(var zn=0;zn<Pn.length;zn++){var Ln=Pn[zn];Rn(Ln.toLowerCase(),"on"+(Ln[0].toUpperCase()+Ln.slice(1)))}Rn(An,"onAnimationEnd"),Rn(Tn,"onAnimationIteration"),Rn(En,"onAnimationStart"),Rn("dblclick","onDoubleClick"),Rn("focusin","onFocus"),Rn("focusout","onBlur"),Rn(Mn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),On=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dn));function Fn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,o,s,l,c){if(Ze.apply(this,arguments),Oe){if(!Oe)throw Error(a(198));var u=Fe;Oe=!1,Fe=null,je||(je=!0,Ne=u)}}(n,t,void 0,e),e.currentTarget=null}function jn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Fn(i,s,c),a=l}else for(o=0;o<n.length;o++){if(l=(s=n[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Fn(i,s,c),a=l}}}if(je)throw e=Ne,je=!1,Ne=null,e}function Nn(e,t){var r=t[mi];void 0===r&&(r=t[mi]=new Set);var n=e+"__bubble";r.has(n)||(Vn(t,e,2,!1),r.add(n))}function Bn(e,t,r){var n=0;t&&(n|=4),Vn(r,e,n,t)}var Zn="_reactListening"+Math.random().toString(36).slice(2);function Un(e){if(!e[Zn]){e[Zn]=!0,o.forEach((function(t){"selectionchange"!==t&&(On.has(t)||Bn(t,!1,e),Bn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zn]||(t[Zn]=!0,Bn("selectionchange",!1,t))}}function Vn(e,t,r,n){switch($t(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Xt}r=i.bind(null,t,r,e),i=void 0,!ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Wn(e,t,r,n,i){var a=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var s=n.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(l=o.tag)||6===l){n=a=o;continue e}s=s.parentNode}}n=n.return}Pe((function(){var n=a,i=_e(r),o=[];e:{var s=In.get(e);if(void 0!==s){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Ar;break;case"focusin":c="focus",l=mr;break;case"focusout":c="blur",l=mr;break;case"beforeblur":case"afterblur":l=mr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Er;break;case An:case Tn:case En:l=vr;break;case Mn:l=Mr;break;case"scroll":l=hr;break;case"wheel":l=Pr;break;case"copy":case"cut":case"paste":l=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tr}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=n;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Gn(p,m,f)))),h)break;p=p.return}0<u.length&&(s=new l(s,c,null,r,i),o.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!yi(c)&&!c[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?yi(c):null)&&(c!==(h=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=fr,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tr,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?s:bi(l),f=null==c?s:bi(c),(s=new u(m,p+"leave",l,r,i)).target=h,s.relatedTarget=f,m=null,yi(i)===n&&((u=new u(d,p+"enter",c,r,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Xn(f))p++;for(f=0,m=d;m;m=Xn(m))f++;for(;0<p-f;)u=Xn(u),p--;for(;0<f-p;)d=Xn(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Xn(u),d=Xn(d)}u=null}else u=null;null!==l&&Yn(o,s,l,u,!1),null!==c&&null!==h&&Yn(o,h,c,u,!0)}if("select"===(l=(s=n?bi(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=qr;else if(Vr(s))if($r)v=on;else{v=nn;var g=rn}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=an);switch(v&&(v=v(e,n))?Wr(o,v,r,i):(g&&g(e,s,n),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=n?bi(n):window,e){case"focusin":(Vr(g)||"true"===g.contentEditable)&&(vn=g,gn=n,yn=null);break;case"focusout":yn=gn=vn=null;break;case"mousedown":xn=!0;break;case"contextmenu":case"mouseup":case"dragend":xn=!1,bn(o,r,i);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":bn(o,r,i)}var y;if(zr)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Zr?Nr(e,r)&&(x="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(x="onCompositionStart");x&&(Or&&"ko"!==r.locale&&(Zr||"onCompositionStart"!==x?"onCompositionEnd"===x&&Zr&&(y=er()):(Jt="value"in(Kt=i)?Kt.value:Kt.textContent,Zr=!0)),0<(g=Hn(n,x)).length&&(x=new xr(x,e,null,r,i),o.push({event:x,listeners:g}),y?x.data=y:null!==(y=Br(r))&&(x.data=y))),(y=Dr?function(e,t){switch(e){case"compositionend":return Br(t);case"keypress":return 32!==t.which?null:(jr=!0,Fr);case"textInput":return(e=t.data)===Fr&&jr?null:e;default:return null}}(e,r):function(e,t){if(Zr)return"compositionend"===e||!zr&&Nr(e,t)?(e=er(),Qt=Jt=Kt=null,Zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Or&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Hn(n,"onBeforeInput")).length&&(i=new xr("onBeforeInput","beforeinput",null,r,i),o.push({event:i,listeners:n}),i.data=y))}jn(o,t)}))}function Gn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hn(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,r))&&n.unshift(Gn(e,a,i)),null!=(a=Re(e,t))&&n.push(Gn(e,a,i))),e=e.return}return n}function Xn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yn(e,t,r,n,i){for(var a=t._reactName,o=[];null!==r&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Re(r,a))&&o.unshift(Gn(r,l,s)):i||null!=(l=Re(r,a))&&o.push(Gn(r,l,s))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var qn=/\r\n?/g,$n=/\u0000|\uFFFD/g;function Kn(e){return("string"===typeof e?e:""+e).replace(qn,"\n").replace($n,"")}function Jn(e,t,r){if(t=Kn(t),Kn(e)!==t&&r)throw Error(a(425))}function Qn(){}var ei=null,ti=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ni;function si(e){setTimeout((function(){throw e}))}function li(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void Ut(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Ut(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,vi="__reactListeners$"+hi,gi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pi]||r[di]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ui(e);null!==e;){if(r=e[di])return r;e=ui(e)}return t}r=(e=r).parentNode}return null}function xi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function _i(e){return e[fi]||null}var wi=[],ki=-1;function Si(e){return{current:e}}function Ci(e){0>ki||(e.current=wi[ki],wi[ki]=null,ki--)}function Ai(e,t){ki++,wi[ki]=e.current,e.current=t}var Ti={},Ei=Si(Ti),Mi=Si(!1),Ii=Ti;function Pi(e,t){var r=e.type.contextTypes;if(!r)return Ti;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in r)a[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function zi(){Ci(Mi),Ci(Ei)}function Li(e,t,r){if(Ei.current!==Ti)throw Error(a(168));Ai(Ei,t),Ai(Mi,r)}function Di(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(a(108,V(e)||"Unknown",i));return F({},r,n)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ii=Ei.current,Ai(Ei,e),Ai(Mi,Mi.current),!0}function Fi(e,t,r){var n=e.stateNode;if(!n)throw Error(a(169));r?(e=Di(e,t,Ii),n.__reactInternalMemoizedMergedChildContext=e,Ci(Mi),Ci(Ei),Ai(Ei,e)):Ci(Mi),Ai(Mi,r)}var ji=null,Ni=!1,Bi=!1;function Zi(e){null===ji?ji=[e]:ji.push(e)}function Ui(){if(!Bi&&null!==ji){Bi=!0;var e=0,t=xt;try{var r=ji;for(xt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}ji=null,Ni=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Xe(Qe,Ui),i}finally{xt=t,Bi=!1}}return null}var Vi=[],Wi=0,Gi=null,Hi=0,Xi=[],Yi=0,qi=null,$i=1,Ki="";function Ji(e,t){Vi[Wi++]=Hi,Vi[Wi++]=Gi,Gi=e,Hi=t}function Qi(e,t,r){Xi[Yi++]=$i,Xi[Yi++]=Ki,Xi[Yi++]=qi,qi=e;var n=$i;e=Ki;var i=32-ot(n)-1;n&=~(1<<i),r+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,$i=1<<32-ot(t)+i|r<<i|n,Ki=a+e}else $i=1<<a|r<<i|n,Ki=e}function ea(e){null!==e.return&&(Ji(e,1),Qi(e,1,0))}function ta(e){for(;e===Gi;)Gi=Vi[--Wi],Vi[Wi]=null,Hi=Vi[--Wi],Vi[Wi]=null;for(;e===qi;)qi=Xi[--Yi],Xi[Yi]=null,Ki=Xi[--Yi],Xi[Yi]=null,$i=Xi[--Yi],Xi[Yi]=null}var ra=null,na=null,ia=!1,aa=null;function oa(e,t){var r=Pc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function sa(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,na=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,na=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==qi?{id:$i,overflow:Ki}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Pc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ra=e,na=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=na;if(t){var r=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ci(r.nextSibling);var n=ra;t&&sa(e,t)?oa(n,r):(e.flags=-4097&e.flags|2,ia=!1,ra=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,ra=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ha(e){if(e!==ra)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=na)){if(la(e))throw da(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){na=ci(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}na=null}}else na=ra?ci(e.stateNode.nextSibling):null;return!0}function da(){for(var e=na;e;)e=ci(e.nextSibling)}function fa(){na=ra=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var ma=b.ReactCurrentBatchConfig;function va(e,t){if(e&&e.defaultProps){for(var r in t=F({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var ga=Si(null),ya=null,xa=null,ba=null;function _a(){ba=xa=ya=null}function wa(e){var t=ga.current;Ci(ga),e._currentValue=t}function ka(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Sa(e,t){ya=e,ba=xa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ca(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===xa){if(null===ya)throw Error(a(308));xa=e,ya.dependencies={lanes:0,firstContext:e}}else xa=xa.next=e;return t}var Aa=null;function Ta(e){null===Aa?Aa=[e]:Aa.push(e)}function Ea(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,Ta(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ma(e,n)}function Ma(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ia=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function za(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function La(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&El)){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ma(e,r)}return null===(i=n.interleaved)?(t.next=t,Ta(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ma(e,r)}function Da(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}function Oa(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?i=a=o:a=a.next=o,r=r.next}while(null!==r);null===a?i=a=t:a=a.next=t}else i=a=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Fa(e,t,r,n){var i=e.updateQueue;Ia=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var h=i.baseState;for(o=0,u=c=l=null,s=a;;){var d=s.lane,f=s.eventTime;if((n&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(d=t,f=r,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ia=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ol|=o,e.lanes=o,e.memoizedState=h}}function ja(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(a(191,i));i.call(n)}}}var Na=(new n.Component).refs;function Ba(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:F({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var Za={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),i=tc(e),a=za(n,i);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=La(e,a,i))&&(rc(t,e,i,n),Da(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),i=tc(e),a=za(n,i);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=La(e,a,i))&&(rc(t,e,i,n),Da(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),i=za(r,n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=La(e,i,n))&&(rc(t,e,n,r),Da(t,e,n))}};function Ua(e,t,r,n,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(i,a))}function Va(e,t,r){var n=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ca(a):(i=Ri(t)?Ii:Ei.current,a=(n=null!==(n=t.contextTypes)&&void 0!==n)?Pi(e,i):Ti),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Za,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Za.enqueueReplaceState(t,t.state,null)}function Ga(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Na,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ca(a):(a=Ri(t)?Ii:Ei.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,r),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Za.enqueueReplaceState(i,i.state,null),Fa(e,r,i,n),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var n=r.stateNode}if(!n)throw Error(a(147,e));var i=n,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Na&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function Xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ya(e){return(0,e._init)(e._payload)}function qa(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=zc(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Fc(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function c(e,t,r,n){var a=r.type;return a===k?h(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Ya(a)===t.type)?((n=i(t,r.props)).ref=Ha(e,t,r),n.return=e,n):((n=Lc(r.type,r.key,r.props,null,e.mode,n)).ref=Ha(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=jc(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function h(e,t,r,n,a){return null===t||7!==t.tag?((t=Dc(r,e.mode,n,a)).return=e,t):((t=i(t,r)).return=e,t)}function d(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(r=Lc(t.type,t.key,t.props,null,e.mode,r)).ref=Ha(e,null,t),r.return=e,r;case w:return(t=jc(t,e.mode,r)).return=e,t;case R:return d(e,(0,t._init)(t._payload),r)}if(te(t)||D(t))return(t=Dc(t,e.mode,r,null)).return=e,t;Xa(e,t)}return null}function f(e,t,r,n){var i=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==i?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return r.key===i?c(e,t,r,n):null;case w:return r.key===i?u(e,t,r,n):null;case R:return f(e,t,(i=r._init)(r._payload),n)}if(te(r)||D(r))return null!==i?null:h(e,t,r,n,null);Xa(e,r)}return null}function p(e,t,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case w:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case R:return p(e,t,r,(0,n._init)(n._payload),i)}if(te(n)||D(n))return h(t,e=e.get(r)||null,n,i,null);Xa(t,n)}return null}function m(i,a,s,l){for(var c=null,u=null,h=a,m=a=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var g=f(i,h,s[m],l);if(null===g){null===h&&(h=v);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g,h=v}if(m===s.length)return r(i,h),ia&&Ji(i,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(a=o(h,a,m),null===u?c=h:u.sibling=h,u=h);return ia&&Ji(i,m),c}for(h=n(i,h);m<s.length;m++)null!==(v=p(h,i,m,s[m],l))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),a=o(v,a,m),null===u?c=v:u.sibling=v,u=v);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),c}function v(i,s,l,c){var u=D(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,m=s,v=s=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var x=f(i,m,y.value,c);if(null===x){null===m&&(m=g);break}e&&m&&null===x.alternate&&t(i,m),s=o(x,s,v),null===h?u=x:h.sibling=x,h=x,m=g}if(y.done)return r(i,m),ia&&Ji(i,v),u;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=d(i,y.value,c))&&(s=o(y,s,v),null===h?u=y:h.sibling=y,h=y);return ia&&Ji(i,v),u}for(m=n(i,m);!y.done;v++,y=l.next())null!==(y=p(m,i,v,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),u}return function e(n,a,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=a;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){r(n,u.sibling),(a=i(u,o.props.children)).return=n,n=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Ya(c)===u.type){r(n,u.sibling),(a=i(u,o.props)).ref=Ha(n,u,o),a.return=n,n=a;break e}r(n,u);break}t(n,u),u=u.sibling}o.type===k?((a=Dc(o.props.children,n.mode,l,o.key)).return=n,n=a):((l=Lc(o.type,o.key,o.props,null,n.mode,l)).ref=Ha(n,a,o),l.return=n,n=l)}return s(n);case w:e:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){r(n,a.sibling),(a=i(a,o.children||[])).return=n,n=a;break e}r(n,a);break}t(n,a),a=a.sibling}(a=jc(o,n.mode,l)).return=n,n=a}return s(n);case R:return e(n,a,(u=o._init)(o._payload),l)}if(te(o))return m(n,a,o,l);if(D(o))return v(n,a,o,l);Xa(n,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(r(n,a.sibling),(a=i(a,o)).return=n,n=a):(r(n,a),(a=Fc(o,n.mode,l)).return=n,n=a),s(n)):r(n,a)}}var $a=qa(!0),Ka=qa(!1),Ja={},Qa=Si(Ja),eo=Si(Ja),to=Si(Ja);function ro(e){if(e===Ja)throw Error(a(174));return e}function no(e,t){switch(Ai(to,t),Ai(eo,e),Ai(Qa,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Qa),Ai(Qa,t)}function io(){Ci(Qa),Ci(eo),Ci(to)}function ao(e){ro(to.current);var t=ro(Qa.current),r=le(t,e.type);t!==r&&(Ai(eo,e),Ai(Qa,r))}function oo(e){eo.current===e&&(Ci(Qa),Ci(eo))}var so=Si(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,vo=null,go=null,yo=!1,xo=!1,bo=0,_o=0;function wo(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function So(e,t,r,n,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=r(n,i),xo){o=0;do{if(xo=!1,bo=0,25<=o)throw Error(a(301));o+=1,go=vo=null,t.updateQueue=null,ho.current=cs,e=r(n,i)}while(xo)}if(ho.current=os,t=null!==vo&&null!==vo.next,po=0,go=vo=mo=null,yo=!1,t)throw Error(a(300));return e}function Co(){var e=0!==bo;return bo=0,e}function Ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?mo.memoizedState=go=e:go=go.next=e,go}function To(){if(null===vo){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===go?mo.memoizedState:go.next;if(null!==t)go=t,vo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===go?mo.memoizedState=go=e:go=go.next=e}return go}function Eo(e,t){return"function"===typeof t?t(e):t}function Mo(e){var t=To(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=vo,i=n.baseQueue,o=r.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(null!==i){o=i.next,n=n.baseState;var l=s=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=n):c=c.next=d,mo.lanes|=h,Ol|=h}u=u.next}while(null!==u&&u!==o);null===c?s=n:c.next=l,sn(n,t.memoizedState)||(bs=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Ol|=o,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Io(e){var t=To(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sn(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Po(){}function Ro(e,t){var r=mo,n=To(),i=t(),o=!sn(n.memoizedState,i);if(o&&(n.memoizedState=i,bs=!0),n=n.queue,Wo(Do.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(r.flags|=2048,No(9,Lo.bind(null,r,n,i,t),void 0,null),null===Ml)throw Error(a(349));0!==(30&po)||zo(r,t,i)}return i}function zo(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Lo(e,t,r,n){t.value=r,t.getSnapshot=n,Oo(t)&&Fo(e)}function Do(e,t,r){return r((function(){Oo(t)&&Fo(e)}))}function Oo(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sn(e,r)}catch(n){return!0}}function Fo(e){var t=Ma(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=Ao();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:e},t.queue=e,e=e.dispatch=rs.bind(null,mo,e),[t.memoizedState,e]}function No(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Bo(){return To().memoizedState}function Zo(e,t,r,n){var i=Ao();mo.flags|=e,i.memoizedState=No(1|t,r,void 0,void 0===n?null:n)}function Uo(e,t,r,n){var i=To();n=void 0===n?null:n;var a=void 0;if(null!==vo){var o=vo.memoizedState;if(a=o.destroy,null!==n&&ko(n,o.deps))return void(i.memoizedState=No(t,r,a,n))}mo.flags|=e,i.memoizedState=No(1|t,r,a,n)}function Vo(e,t){return Zo(8390656,8,e,t)}function Wo(e,t){return Uo(2048,8,e,t)}function Go(e,t){return Uo(4,2,e,t)}function Ho(e,t){return Uo(4,4,e,t)}function Xo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Yo(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Uo(4,4,Xo.bind(null,t,e),r)}function qo(){}function $o(e,t){var r=To();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ko(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ko(e,t){var r=To();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ko(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Jo(e,t,r){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=r):(sn(r,t)||(r=mt(),mo.lanes|=r,Ol|=r,e.baseState=!0),t)}function Qo(e,t){var r=xt;xt=0!==r&&4>r?r:4,e(!0);var n=fo.transition;fo.transition={};try{e(!1),t()}finally{xt=r,fo.transition=n}}function es(){return To().memoizedState}function ts(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ns(e))is(t,r);else if(null!==(r=Ea(e,t,r,n))){rc(r,e,n,ec()),as(r,t,n)}}function rs(e,t,r){var n=tc(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ns(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,r);if(i.hasEagerState=!0,i.eagerState=s,sn(s,o)){var l=t.interleaved;return null===l?(i.next=i,Ta(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(r=Ea(e,t,i,n))&&(rc(r,e,n,i=ec()),as(r,t,n))}}function ns(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function is(e,t){xo=yo=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function as(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}var os={readContext:Ca,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ca,useCallback:function(e,t){return Ao().memoizedState=[e,void 0===t?null:t],e},useContext:Ca,useEffect:Vo,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Zo(4194308,4,Xo.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zo(4,2,e,t)},useMemo:function(e,t){var r=Ao();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ao();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ts.bind(null,mo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Ao().memoizedState=e},useState:jo,useDebugValue:qo,useDeferredValue:function(e){return Ao().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Qo.bind(null,e[1]),Ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=mo,i=Ao();if(ia){if(void 0===r)throw Error(a(407));r=r()}else{if(r=t(),null===Ml)throw Error(a(349));0!==(30&po)||zo(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,Vo(Do.bind(null,n,o,e),[e]),n.flags|=2048,No(9,Lo.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Ao(),t=Ml.identifierPrefix;if(ia){var r=Ki;t=":"+t+"R"+(r=($i&~(1<<32-ot($i)-1)).toString(32)+r),0<(r=bo++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Ca,useCallback:$o,useContext:Ca,useEffect:Wo,useImperativeHandle:Yo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Ko,useReducer:Mo,useRef:Bo,useState:function(){return Mo(Eo)},useDebugValue:qo,useDeferredValue:function(e){return Jo(To(),vo.memoizedState,e)},useTransition:function(){return[Mo(Eo)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ca,useCallback:$o,useContext:Ca,useEffect:Wo,useImperativeHandle:Yo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Ko,useReducer:Io,useRef:Bo,useState:function(){return Io(Eo)},useDebugValue:qo,useDeferredValue:function(e){var t=To();return null===vo?t.memoizedState=e:Jo(t,vo.memoizedState,e)},useTransition:function(){return[Io(Eo)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var r="",n=t;do{r+=Z(n),n=n.return}while(n);var i=r}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,r){(r=za(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wl||(Wl=!0,Gl=n),ds(0,t)},r}function ms(e,t,r){(r=za(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){ds(0,t),"function"!==typeof n&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function vs(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new fs;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Cc.bind(null,e,t,r),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,r,n,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=za(-1,1)).tag=2,La(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var xs=b.ReactCurrentOwner,bs=!1;function _s(e,t,r,n){t.child=null===e?Ka(t,null,r,n):$a(t,e.child,r,n)}function ws(e,t,r,n,i){r=r.render;var a=t.ref;return Sa(t,i),n=So(e,t,r,n,a,i),r=Co(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,_s(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function ks(e,t,r,n,i){if(null===e){var a=r.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Lc(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,n,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(o,n)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=zc(a,n)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,r,n,i){if(null!==e){var a=e.memoizedProps;if(ln(a,n)&&e.ref===t.ref){if(bs=!1,t.pendingProps=n=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,r,n,i)}function Cs(e,t,r){var n=t.pendingProps,i=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(zl,Rl),Rl|=r;else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(zl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==a?a.baseLanes:r,Ai(zl,Rl),Rl|=n}else null!==a?(n=a.baseLanes|r,t.memoizedState=null):n=r,Ai(zl,Rl),Rl|=n;return _s(e,t,i,r),t.child}function As(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,r,n,i){var a=Ri(r)?Ii:Ei.current;return a=Pi(t,a),Sa(t,i),r=So(e,t,r,n,a,i),n=Co(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,_s(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Es(e,t,r,n,i){if(Ri(r)){var a=!0;Oi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Vs(e,t),Va(t,r,n),Ga(t,r,n,i),n=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=r.contextType;"object"===typeof c&&null!==c?c=Ca(c):c=Pi(t,c=Ri(r)?Ii:Ei.current);var u=r.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==n||l!==c)&&Wa(t,o,n,c),Ia=!1;var d=t.memoizedState;o.state=d,Fa(t,n,o,i),l=t.memoizedState,s!==n||d!==l||Mi.current||Ia?("function"===typeof u&&(Ba(t,r,u,n),l=t.memoizedState),(s=Ia||Ua(t,r,s,n,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Ra(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:va(t.type,s),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=r.contextType)&&null!==l?l=Ca(l):l=Pi(t,l=Ri(r)?Ii:Ei.current);var f=r.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&Wa(t,o,n,l),Ia=!1,d=t.memoizedState,o.state=d,Fa(t,n,o,i);var p=t.memoizedState;s!==h||d!==p||Mi.current||Ia?("function"===typeof f&&(Ba(t,r,f,n),p=t.memoizedState),(c=Ia||Ua(t,r,c,n,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(n,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=l,n=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return Ms(e,t,r,n,a,i)}function Ms(e,t,r,n,i,a){As(e,t);var o=0!==(128&t.flags);if(!n&&!o)return i&&Fi(t,r,!1),Ws(e,t,a);n=t.stateNode,xs.current=t;var s=o&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,s,a)):_s(e,t,s,a),t.memoizedState=n.state,i&&Fi(t,r,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),no(e,t.containerInfo)}function Ps(e,t,r,n,i){return fa(),pa(i),t.flags|=256,_s(e,t,r,n),t.child}var Rs,zs,Ls,Ds={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,r){var n,i=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&o)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ai(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Oc(l,i,0,null),e=Dc(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(r),t.memoizedState=Ds,e):js(t,l));if(null!==(o=e.memoizedState)&&null!==(n=o.dehydrated))return function(e,t,r,n,i,o,s){if(r)return 256&t.flags?(t.flags&=-257,Ns(e,t,s,n=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=Oc({mode:"visible",children:n.children},i,0,null),(o=Dc(o,i,s,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,0!==(1&t.mode)&&$a(t,e.child,null,s),t.child.memoizedState=Os(s),t.memoizedState=Ds,o);if(0===(1&t.mode))return Ns(e,t,s,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var l=n.dgst;return n=l,Ns(e,t,s,n=hs(o=Error(a(419)),n,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(n=Ml)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ma(e,i),rc(n,e,i,-1))}return mc(),Ns(e,t,s,n=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,na=ci(i.nextSibling),ra=t,ia=!0,aa=null,null!==e&&(Xi[Yi++]=$i,Xi[Yi++]=Ki,Xi[Yi++]=qi,$i=e.id,Ki=e.overflow,qi=t),(t=js(t,n.children)).flags|=4096,t)}(e,t,l,i,n,o,r);if(s){s=i.fallback,l=t.mode,n=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=zc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==n?s=zc(n,s):(s=Dc(s,l,r,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Os(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~r,t.memoizedState=Ds,i}return e=(s=e.child).sibling,i=zc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function js(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ns(e,t,r,n){return null!==n&&pa(n),$a(t,e.child,null,r),(e=js(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ka(e.return,t,r)}function Zs(e,t,r,n,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Us(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(_s(e,t,n.children,r),0!==(2&(n=so.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,r,t);else if(19===e.tag)Bs(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ai(so,n),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===lo(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Zs(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Zs(t,!0,r,null,a);break;case"together":Zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=zc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=zc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Gs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Xs(e,t,r){var n=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Ri(t.type)&&zi(),Hs(t),null;case 3:return n=t.stateNode,io(),Ci(Mi),Ci(Ei),uo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hs(t),null;case 5:oo(t);var i=ro(to.current);if(r=t.type,null!==e&&null!=t.stateNode)zs(e,t,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(a(166));return Hs(t),null}if(e=ro(Qa.current),ha(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[di]=t,n[fi]=o,e=0!==(1&t.mode),r){case"dialog":Nn("cancel",n),Nn("close",n);break;case"iframe":case"object":case"embed":Nn("load",n);break;case"video":case"audio":for(i=0;i<Dn.length;i++)Nn(Dn[i],n);break;case"source":Nn("error",n);break;case"img":case"image":case"link":Nn("error",n),Nn("load",n);break;case"details":Nn("toggle",n);break;case"input":$(n,o),Nn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Nn("invalid",n);break;case"textarea":ie(n,o),Nn("invalid",n)}for(var l in ye(r,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jn(n.textContent,c,e),i=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jn(n.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Nn("scroll",n)}switch(r){case"input":H(n),Q(n,o,!0);break;case"textarea":H(n),oe(n);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(n.onclick=Qn)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[di]=t,e[fi]=n,Rs(e,t),t.stateNode=e;e:{switch(l=xe(r,n),r){case"dialog":Nn("cancel",e),Nn("close",e),i=n;break;case"iframe":case"object":case"embed":Nn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Dn.length;i++)Nn(Dn[i],e);i=n;break;case"source":Nn("error",e),i=n;break;case"img":case"image":case"link":Nn("error",e),Nn("load",e),i=n;break;case"details":Nn("toggle",e),i=n;break;case"input":$(e,n),i=q(e,n),Nn("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=F({},n,{value:void 0}),Nn("invalid",e);break;case"textarea":ie(e,n),i=ne(e,n),Nn("invalid",e)}for(o in ye(r,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ve(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==r||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Nn("scroll",e):null!=u&&x(e,o,u,l))}switch(r){case"input":H(e),Q(e,n,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=n.value&&e.setAttribute("value",""+W(n.value));break;case"select":e.multiple=!!n.multiple,null!=(o=n.value)?re(e,!!n.multiple,o,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ls(0,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(a(166));if(r=ro(to.current),ro(Qa.current),ha(t)){if(n=t.stateNode,r=t.memoizedProps,n[di]=t,(o=n.nodeValue!==r)&&null!==(e=ra))switch(e.tag){case 3:Jn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jn(n.nodeValue,r,0!==(1&e.mode))}o&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[di]=t,t.stateNode=n}return Hs(t),null;case 13:if(Ci(so),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==na&&0!==(1&t.mode)&&0===(128&t.flags))da(),fa(),t.flags|=98560,o=!1;else if(o=ha(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[di]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Ll&&(Ll=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return io(),null===e&&Un(t.stateNode.containerInfo),Hs(t),null;case 10:return wa(t.type._context),Hs(t),null;case 19:if(Ci(so),null===(o=t.memoizedState))return Hs(t),null;if(n=0!==(128&t.flags),null===(l=o.rendering))if(n)Gs(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Gs(o,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(o=r).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ai(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ke()>Ul&&(t.flags|=128,n=!0,Gs(o,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=lo(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Hs(t),null}else 2*Ke()-o.renderingStartTime>Ul&&1073741824!==r&&(t.flags|=128,n=!0,Gs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ke(),t.sibling=null,r=so.current,Ai(so,n?1&r|2:1&r),t):(Hs(t),null);case 22:case 23:return hc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&zi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ci(Mi),Ci(Ei),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ci(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Rs=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},zs=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ro(Qa.current);var a,o=null;switch(r){case"input":i=q(e,i),n=q(e,n),o=[];break;case"select":i=F({},i,{value:void 0}),n=F({},n,{value:void 0}),o=[];break;case"textarea":i=ne(e,i),n=ne(e,n),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof n.onClick&&(e.onclick=Qn)}for(u in ye(r,n),r=null,i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=i?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Nn("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ls=function(e,t,r,n){r!==n&&(t.flags|=4)};var qs=!1,$s=!1,Ks="function"===typeof WeakSet?WeakSet:Set,Js=null;function Qs(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Sc(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){Sc(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,r,a)}i=i.next}while(i!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function il(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[vi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Qn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var ul=null,hl=!1;function dl(e,t,r){for(r=r.child;null!==r;)fl(e,t,r),r=r.sibling}function fl(e,t,r){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,r)}catch(s){}switch(r.tag){case 5:$s||Qs(r,t);case 6:var n=ul,i=hl;ul=null,dl(e,t,r),hl=i,null!==(ul=n)&&(hl?(e=ul,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):ul.removeChild(r.stateNode));break;case 18:null!==ul&&(hl?(e=ul,r=r.stateNode,8===e.nodeType?li(e.parentNode,r):1===e.nodeType&&li(e,r),Ut(e)):li(ul,r.stateNode));break;case 4:n=ul,i=hl,ul=r.stateNode.containerInfo,hl=!0,dl(e,t,r),ul=n,hl=i;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&el(r,t,o),i=i.next}while(i!==n)}dl(e,t,r);break;case 1:if(!$s&&(Qs(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Sc(r,t,s)}dl(e,t,r);break;case 21:dl(e,t,r);break;case 22:1&r.mode?($s=(n=$s)||null!==r.memoizedState,dl(e,t,r),$s=n):dl(e,t,r);break;default:dl(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Ks),t.forEach((function(t){var n=Ec.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function ml(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(a(160));fl(o,s,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),gl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(v){Sc(e,e.return,v)}try{rl(5,e,e.return)}catch(v){Sc(e,e.return,v)}}break;case 1:ml(t,e),gl(e),512&n&&null!==r&&Qs(r,r.return);break;case 5:if(ml(t,e),gl(e),512&n&&null!==r&&Qs(r,r.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(v){Sc(e,e.return,v)}}if(4&n&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==r?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&K(i,o),xe(l,s);var u=xe(l,o);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?ve(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):x(i,h,d,u)}switch(l){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?re(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?re(i,!!o.multiple,o.defaultValue,!0):re(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(v){Sc(e,e.return,v)}}break;case 6:if(ml(t,e),gl(e),4&n){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(v){Sc(e,e.return,v)}}break;case 3:if(ml(t,e),gl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(v){Sc(e,e.return,v)}break;case 4:default:ml(t,e),gl(e);break;case 13:ml(t,e),gl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Zl=Ke())),4&n&&pl(e);break;case 22:if(h=null!==r&&null!==r.memoizedState,1&e.mode?($s=(u=$s)||h,ml(t,e),$s=u):ml(t,e),gl(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Js=e,h=e.child;null!==h;){for(d=Js=h;null!==Js;){switch(p=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:Qs(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){n=f,r=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Sc(n,r,v)}}break;case 5:Qs(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,Js=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(v){Sc(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){Sc(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),gl(e),4&n&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ol(r)){var n=r;break e}r=r.return}throw Error(a(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(de(i,""),n.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(a(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,r){Js=e,xl(e,t,r)}function xl(e,t,r){for(var n=0!==(1&e.mode);null!==Js;){var i=Js,a=i.child;if(22===i.tag&&n){var o=null!==i.memoizedState||qs;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||$s;s=qs;var c=$s;if(qs=o,($s=l)&&!c)for(Js=i;null!==Js;)l=(o=Js).child,22===o.tag&&null!==o.memoizedState?wl(i):null!==l?(l.return=o,Js=l):wl(i);for(;null!==a;)Js=a,xl(a,t,r),a=a.sibling;Js=i,qs=s,$s=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Js=a):bl(e)}}function bl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!$s)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:va(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,n);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}ja(t,s,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(a(163))}$s||512&t.flags&&il(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Js=null;break}if(null!==(r=t.sibling)){r.return=t.return,Js=r;break}Js=t.return}}function _l(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Js=r;break}Js=t.return}}function wl(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){Sc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(l){Sc(t,i,l)}}var a=t.return;try{il(t)}catch(l){Sc(t,a,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Sc(t,o,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var kl,Sl=Math.ceil,Cl=b.ReactCurrentDispatcher,Al=b.ReactCurrentOwner,Tl=b.ReactCurrentBatchConfig,El=0,Ml=null,Il=null,Pl=0,Rl=0,zl=Si(0),Ll=0,Dl=null,Ol=0,Fl=0,jl=0,Nl=null,Bl=null,Zl=0,Ul=1/0,Vl=null,Wl=!1,Gl=null,Hl=null,Xl=!1,Yl=null,ql=0,$l=0,Kl=null,Jl=-1,Ql=0;function ec(){return 0!==(6&El)?Ke():-1!==Jl?Jl:Jl=Ke()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Pl?Pl&-Pl:null!==ma.transition?(0===Ql&&(Ql=mt()),Ql):0!==(e=xt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,r,n){if(50<$l)throw $l=0,Kl=null,Error(a(185));gt(e,r,n),0!==(2&El)&&e===Ml||(e===Ml&&(0===(2&El)&&(Fl|=r),4===Ll&&sc(e,Pl)),nc(e,n),1===r&&0===El&&0===(1&t.mode)&&(Ul=Ke()+500,Ni&&Ui()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&r)&&0===(s&n)||(i[o]=ft(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var n=dt(e,e===Ml?Pl:0);if(0===n)null!==r&&Ye(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ye(r),1===t)0===e.tag?function(e){Ni=!0,Zi(e)}(lc.bind(null,e)):Zi(lc.bind(null,e)),oi((function(){0===(6&El)&&Ui()})),r=null;else{switch(bt(n)){case 1:r=Qe;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Mc(r,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ic(e,t){if(Jl=-1,Ql=0,0!==(6&El))throw Error(a(327));var r=e.callbackNode;if(wc()&&e.callbackNode!==r)return null;var n=dt(e,e===Ml?Pl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=vc(e,n);else{t=n;var i=El;El|=2;var o=pc();for(Ml===e&&Pl===t||(Vl=null,Ul=Ke()+500,dc(e,t));;)try{yc();break}catch(l){fc(e,l)}_a(),Cl.current=o,El=i,null!==Il?t=0:(Ml=null,Pl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(n=i,t=ac(e,i))),1===t)throw r=Dl,dc(e,0),sc(e,n),nc(e,Ke()),r;if(6===t)sc(e,n);else{if(i=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!sn(a(),i))return!1}catch(s){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,n))&&(0!==(o=pt(e))&&(n=o,t=ac(e,o))),1===t))throw r=Dl,dc(e,0),sc(e,n),nc(e,Ke()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Bl,Vl);break;case 3:if(sc(e,n),(130023424&n)===n&&10<(t=Zl+500-Ke())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ni(_c.bind(null,e,Bl,Vl),t);break}_c(e,Bl,Vl);break;case 4:if(sc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-ot(n);o=1<<s,(s=t[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Ke()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sl(n/1960))-n)){e.timeoutHandle=ni(_c.bind(null,e,Bl,Vl),n);break}_c(e,Bl,Vl);break;default:throw Error(a(329))}}}return nc(e,Ke()),e.callbackNode===r?ic.bind(null,e):null}function ac(e,t){var r=Nl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Bl,Bl=r,null!==t&&oc(t)),e}function oc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function sc(e,t){for(t&=~jl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&El))throw Error(a(327));wc();var t=dt(e,0);if(0===(1&t))return nc(e,Ke()),null;var r=vc(e,t);if(0!==e.tag&&2===r){var n=pt(e);0!==n&&(t=n,r=ac(e,n))}if(1===r)throw r=Dl,dc(e,0),sc(e,t),nc(e,Ke()),r;if(6===r)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Bl,Vl),nc(e,Ke()),null}function cc(e,t){var r=El;El|=1;try{return e(t)}finally{0===(El=r)&&(Ul=Ke()+500,Ni&&Ui())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&El)&&wc();var t=El;El|=1;var r=Tl.transition,n=xt;try{if(Tl.transition=null,xt=1,e)return e()}finally{xt=n,Tl.transition=r,0===(6&(El=t))&&Ui()}}function hc(){Rl=zl.current,Ci(zl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ii(r)),null!==Il)for(r=Il.return;null!==r;){var n=r;switch(ta(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&zi();break;case 3:io(),Ci(Mi),Ci(Ei),uo();break;case 5:oo(n);break;case 4:io();break;case 13:case 19:Ci(so);break;case 10:wa(n.type._context);break;case 22:case 23:hc()}r=r.return}if(Ml=e,Il=e=zc(e.current,null),Pl=Rl=t,Ll=0,Dl=null,jl=Fl=Ol=0,Bl=Nl=null,null!==Aa){for(t=0;t<Aa.length;t++)if(null!==(n=(r=Aa[t]).interleaved)){r.interleaved=null;var i=n.next,a=r.pending;if(null!==a){var o=a.next;a.next=i,n.next=o}r.pending=n}Aa=null}return e}function fc(e,t){for(;;){var r=Il;try{if(_a(),ho.current=os,yo){for(var n=mo.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}yo=!1}if(po=0,go=vo=mo=null,xo=!1,bo=0,Al.current=null,null===r||null===r.return){Ll=1,Dl=t,Il=null;break}e:{var o=e,s=r.return,l=r,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&vs(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break e}if(0===(1&t)){vs(o,u,t),mc();break e}c=Error(a(426))}else if(ia&&1&l.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,l,0,t),pa(us(c,l));break e}}o=c=us(c,l),4!==Ll&&(Ll=2),null===Nl?Nl=[o]:Nl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Oa(o,ps(0,c,t));break e;case 1:l=c;var y=o.type,x=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Hl||!Hl.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t,Oa(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}bc(r)}catch(b){t=b,Il===r&&null!==r&&(Il=r=r.return);continue}break}}function pc(){var e=Cl.current;return Cl.current=os,null===e?os:e}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Ml||0===(268435455&Ol)&&0===(268435455&Fl)||sc(Ml,Pl)}function vc(e,t){var r=El;El|=2;var n=pc();for(Ml===e&&Pl===t||(Vl=null,dc(e,t));;)try{gc();break}catch(i){fc(e,i)}if(_a(),El=r,Cl.current=n,null!==Il)throw Error(a(261));return Ml=null,Pl=0,Ll}function gc(){for(;null!==Il;)xc(Il)}function yc(){for(;null!==Il&&!qe();)xc(Il)}function xc(e){var t=kl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Il=t,Al.current=null}function bc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Xs(r,t,Rl)))return void(Il=r)}else{if(null!==(r=Ys(r,t)))return r.flags&=32767,void(Il=r);if(null===e)return Ll=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Ll&&(Ll=5)}function _c(e,t,r){var n=xt,i=Tl.transition;try{Tl.transition=null,xt=1,function(e,t,r,n){do{wc()}while(null!==Yl);if(0!==(6&El))throw Error(a(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ot(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}(e,o),e===Ml&&(Il=Ml=null,Pl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Xl||(Xl=!0,Mc(tt,(function(){return wc(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var s=xt;xt=1;var l=El;El|=4,Al.current=null,function(e,t){if(ei=Wt,fn(e=dn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(_){r=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==r||0!==i&&3!==d.nodeType||(l=s+i),d!==o||0!==n&&3!==d.nodeType||(c=s+n),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===r&&++u===i&&(l=s),f===o&&++h===n&&(c=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ti={focusedElem:e,selectionRange:r},Wt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:va(t.type,v),g);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(_){Sc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=tl,tl=!1}(e,r),vl(r,e),pn(ti),Wt=!!ei,ti=ei=null,e.current=r,yl(r,e,i),$e(),El=l,xt=s,Tl.transition=o}else e.current=r;if(Xl&&(Xl=!1,Yl=e,ql=i),0===(o=e.pendingLanes)&&(Hl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Ke()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n((i=t[r]).value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Gl,Gl=null,e;0!==(1&ql)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Kl?$l++:($l=0,Kl=e):$l=0,Ui()}(e,t,r,n)}finally{Tl.transition=i,xt=n}return null}function wc(){if(null!==Yl){var e=bt(ql),t=Tl.transition,r=xt;try{if(Tl.transition=null,xt=16>e?16:e,null===Yl)var n=!1;else{if(e=Yl,Yl=null,ql=0,0!==(6&El))throw Error(a(331));var i=El;for(El|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Js=d;else for(;null!==Js;){var f=(h=Js).sibling,p=h.return;if(al(h),h===u){Js=null;break}if(null!==f){f.return=p,Js=f;break}Js=p}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Js=y;break e}Js=o.return}}var x=e.current;for(Js=x;null!==Js;){var b=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Js=b;else e:for(s=x;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(w){Sc(l,l.return,w)}if(l===s){Js=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Js=_;break e}Js=l.return}}if(El=i,Ui(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}n=!0}return n}finally{xt=r,Tl.transition=t}}return!1}function kc(e,t,r){e=La(e,t=ps(0,t=us(r,t),1),1),t=ec(),null!==e&&(gt(e,1,t),nc(e,t))}function Sc(e,t,r){if(3===e.tag)kc(e,e,r);else for(;null!==t;){if(3===t.tag){kc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Hl||!Hl.has(n))){t=La(t,e=ms(t,e=us(r,e),1),1),e=ec(),null!==t&&(gt(t,1,e),nc(t,e));break}}t=t.return}}function Cc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Ml===e&&(Pl&r)===r&&(4===Ll||3===Ll&&(130023424&Pl)===Pl&&500>Ke()-Zl?dc(e,0):jl|=r),nc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var r=ec();null!==(e=Ma(e,t))&&(gt(e,t,r),nc(e,r))}function Tc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Ac(e,r)}function Ec(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(a(314))}null!==n&&n.delete(t),Ac(e,r)}function Mc(e,t){return Xe(e,t)}function Ic(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,r,n){return new Ic(e,t,r,n)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zc(e,t){var r=e.alternate;return null===r?((r=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Lc(e,t,r,n,i,o){var s=2;if(n=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Dc(r.children,i,o,t);case S:s=8,i|=8;break;case C:return(e=Pc(12,r,t,2|i)).elementType=C,e.lanes=o,e;case M:return(e=Pc(13,r,t,i)).elementType=M,e.lanes=o,e;case I:return(e=Pc(19,r,t,i)).elementType=I,e.lanes=o,e;case z:return Oc(r,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case T:s=9;break e;case E:s=11;break e;case P:s=14;break e;case R:s=16,n=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(s,r,t,i)).elementType=e,t.type=n,t.lanes=o,t}function Dc(e,t,r,n){return(e=Pc(7,e,n,t)).lanes=r,e}function Oc(e,t,r,n){return(e=Pc(22,e,n,t)).elementType=z,e.lanes=r,e.stateNode={isHidden:!1},e}function Fc(e,t,r){return(e=Pc(6,e,null,t)).lanes=r,e}function jc(e,t,r){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nc(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,r,n,i,a,o,s,l){return e=new Nc(e,t,r,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Zc(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function Uc(e){if(!e)return Ti;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var r=e.type;if(Ri(r))return Di(e,r,t)}return t}function Vc(e,t,r,n,i,a,o,s,l){return(e=Bc(r,n,!0,e,0,a,0,s,l)).context=Uc(null),r=e.current,(a=za(n=ec(),i=tc(r))).callback=void 0!==t&&null!==t?t:null,La(r,a,i),e.current.lanes=i,gt(e,i,n),nc(e,n),e}function Wc(e,t,r,n){var i=t.current,a=ec(),o=tc(i);return r=Uc(r),null===t.context?t.context=r:t.pendingContext=r,(t=za(a,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=La(i,t,o))&&(rc(e,i,o,a),Da(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Xc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}kl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Mi.current)bs=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bs=!1,function(e,t,r){switch(t.tag){case 3:Is(t),fa();break;case 5:ao(t);break;case 1:Ri(t.type)&&Oi(t);break;case 4:no(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ai(ga,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ai(so,1&so.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Fs(e,t,r):(Ai(so,1&so.current),null!==(e=Ws(e,t,r))?e.sibling:null);Ai(so,1&so.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Us(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(so,so.current),n)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,r)}return Ws(e,t,r)}(e,t,r);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Qi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Vs(e,t),e=t.pendingProps;var i=Pi(t,Ei.current);Sa(t,r),i=So(null,t,n,e,i,r);var o=Co();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(n)?(o=!0,Oi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=Za,t.stateNode=i,i._reactInternals=t,Ga(t,n,e,r),t=Ms(null,t,n,!0,o,r)):(t.tag=0,ia&&o&&ea(t),_s(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===P)return 14}return 2}(n),e=va(n,e),i){case 0:t=Ts(null,t,n,e,r);break e;case 1:t=Es(null,t,n,e,r);break e;case 11:t=ws(null,t,n,e,r);break e;case 14:t=ks(null,t,n,va(n.type,e),r);break e}throw Error(a(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Ts(e,t,n,i=t.elementType===n?i:va(n,i),r);case 1:return n=t.type,i=t.pendingProps,Es(e,t,n,i=t.elementType===n?i:va(n,i),r);case 3:e:{if(Is(t),null===e)throw Error(a(387));n=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,n,null,r);var s=t.memoizedState;if(n=s.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,n,r,i=us(Error(a(423)),t));break e}if(n!==i){t=Ps(e,t,n,r,i=us(Error(a(424)),t));break e}for(na=ci(t.stateNode.containerInfo.firstChild),ra=t,ia=!0,aa=null,r=Ka(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fa(),n===i){t=Ws(e,t,r);break e}_s(e,t,n,r)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),n=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ri(n,i)?s=null:null!==o&&ri(n,o)&&(t.flags|=32),As(e,t),_s(e,t,s,r),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,r);case 4:return no(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=$a(t,null,n,r):_s(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,ws(e,t,n,i=t.elementType===n?i:va(n,i),r);case 7:return _s(e,t,t.pendingProps,r),t.child;case 8:case 12:return _s(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ai(ga,n._currentValue),n._currentValue=s,null!==o)if(sn(o.value,s)){if(o.children===i.children&&!Mi.current){t=Ws(e,t,r);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===o.tag){(c=za(-1,r&-r)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=r,null!==(c=o.alternate)&&(c.lanes|=r),ka(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),ka(s,r,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}_s(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Sa(t,r),n=n(i=Ca(i)),t.flags|=1,_s(e,t,n,r),t.child;case 14:return i=va(n=t.type,t.pendingProps),ks(e,t,n,i=va(n.type,i),r);case 15:return Ss(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:va(n,i),Vs(e,t),t.tag=1,Ri(n)?(e=!0,Oi(t)):e=!1,Sa(t,r),Va(t,n,i),Ga(t,n,i,r),Ms(null,t,n,!0,e,r);case 19:return Us(e,t,r);case 22:return Cs(e,t,r)}throw Error(a(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function eu(e,t,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Gc(o);s.call(e)}}Wc(t,o,e,i)}else o=function(e,t,r,n,i){if(i){if("function"===typeof n){var a=n;n=function(){var e=Gc(o);a.call(e)}}var o=Vc(t,n,e,0,null,!1,0,"",Qc);return e._reactRootContainer=o,e[pi]=o.current,Un(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof n){var s=n;n=function(){var e=Gc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[pi]=l.current,Un(8===e.nodeType?e.parentNode:e),uc((function(){Wc(t,l,r,n)})),l}(r,t,e,i,n);return Gc(o)}$c.prototype.render=qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},$c.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var r=0;r<zt.length&&0!==t&&t<zt[r].priority;r++);zt.splice(r,0,e),0===r&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ht(t.pendingLanes);0!==r&&(yt(t,1|r),nc(t,Ke()),0===(6&El)&&(Ul=Ke()+500,Ui()))}break;case 13:uc((function(){var t=Ma(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}})),Xc(e,1)}},wt=function(e){if(13===e.tag){var t=Ma(e,134217728);if(null!==t)rc(t,e,134217728,ec());Xc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),r=Ma(e,t);if(null!==r)rc(r,e,t,ec());Xc(e,t)}},St=function(){return xt},Ct=function(e,t){var r=xt;try{return xt=e,t()}finally{xt=r}},we=function(e,t,r){switch(t){case"input":if(J(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=_i(n);if(!i)throw Error(a(90));X(n),J(n,i)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ee=cc,Me=uc;var tu={usingClientEntryPoint:!1,Events:[xi,bi,_i,Ae,Te,cc]},ru={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(nu),at=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(a(200));return Zc(e,t,null,r)},t.createRoot=function(e,t){if(!Kc(e))throw Error(a(299));var r=!1,n="",i=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,r,0,n,i),e[pi]=t.current,Un(8===e.nodeType?e.parentNode:e),new qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,r){if(!Jc(t))throw Error(a(200));return eu(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Kc(e))throw Error(a(405));var n=null!=r&&r.hydratedSources||null,i=!1,o="",s=Yc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(o=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=Vc(t,null,e,1,null!=r?r:null,i,0,o,s),e[pi]=t.current,Un(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new $c(t)},t.render=function(e,t,r){if(!Jc(t))throw Error(a(200));return eu(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(uc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Jc(r))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return eu(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,r){"use strict";var n=r(4164);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},4164:function(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(4463)},1372:function(e,t){"use strict";var r="function"===typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,x=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case h:case a:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case v:case m:case l:return e;default:return t}}case i:return t}}}function w(e){return _(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=d,t.Fragment=a,t.Lazy=v,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||_(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===v},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===x||e.$$typeof===b||e.$$typeof===g)},t.typeOf=_},7441:function(e,t,r){"use strict";e.exports=r(1372)},8459:function(e,t){"use strict";var r,n=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case s:case o:case d:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case h:case m:case p:case l:return e;default:return t}}case i:return t}}}r=Symbol.for("react.module.reference")},6900:function(e,t,r){"use strict";r(8459)},6374:function(e,t,r){"use strict";var n=r(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,a={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,n)&&!l.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:i,type:e,key:c,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||p}function y(){}function x(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=x.prototype=new y;b.constructor=x,m(b,g.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:r,type:e,key:o,ref:s,props:a,_owner:k.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var T=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function M(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return o=o(l=e),e=""===a?"."+E(l,0):a,_(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),M(o,t,i,"",(function(e){return e}))):null!=o&&(A(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var u=a+E(s=e[c],c);l+=M(s,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=M(s=s.value,t,i,u=a+E(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,r){if(null==e)return e;var n=[],i=0;return M(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},z={transition:null},L={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:z,ReactCurrentOwner:k};t.Children={map:I,forEach:function(e,t,r){I(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=x,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:r,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=z.transition;z.transition={};try{e()}finally{z.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,r){return R.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,r){return R.current.useReducer(e,t,r)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return R.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},2791:function(e,t,r){"use strict";e.exports=r(9117)},184:function(e,t,r){"use strict";e.exports=r(6374)},6813:function(e,t){"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<a(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,o=i>>>1;n<o;){var s=2*(n+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,r))c<i&&0>a(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[s]=r,n=s);else{if(!(c<i&&0>a(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function _(e){if(v=!1,b(e),!m)if(null!==n(c))m=!0,z(w);else{var t=n(u);null!==t&&L(_,t.startTime-e)}}function w(e,r){m=!1,v&&(v=!1,y(A),A=-1),p=!0;var a=f;try{for(b(r),d=n(c);null!==d&&(!(d.expirationTime>r)||e&&!M());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=r);r=t.unstable_now(),"function"===typeof s?d.callback=s:d===n(c)&&i(c),b(r)}else i(c);d=n(c)}if(null!==d)var l=!0;else{var h=n(u);null!==h&&L(_,h.startTime-r),l=!1}return l}finally{d=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,C=null,A=-1,T=5,E=-1;function M(){return!(t.unstable_now()-E<T)}function I(){if(null!==C){var e=t.unstable_now();E=e;var r=!0;try{r=C(!0,e)}finally{r?k():(S=!1,C=null)}}else S=!1}if("function"===typeof x)k=function(){x(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=I,k=function(){R.postMessage(null)}}else k=function(){g(I,0)};function z(e){C=e,S||(S=!0,k())}function L(e,r){A=g((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,z(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,r(u,e),null===n(c)&&e===n(u)&&(v?(y(A),A=-1):v=!0,L(_,a-o))):(e.sortIndex=s,r(c,e),m||p||(m=!0,z(w))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},5296:function(e,t,r){"use strict";e.exports=r(6813)},1561:function(e,t,r){"use strict";var n=r(2791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=n.useState,o=n.useEffect,s=n.useLayoutEffect,l=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch(n){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),i=n[0].inst,u=n[1];return s((function(){i.value=r,i.getSnapshot=t,c(i)&&u({inst:i})}),[e,r,t]),o((function(){return c(i)&&u({inst:i}),e((function(){c(i)&&u({inst:i})}))}),[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},7595:function(e,t,r){"use strict";var n=r(2791),i=r(7248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,u=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var h=s(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c((function(){function e(e){if(!l){if(l=!0,o=e,e=n(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var r=n(e);return void 0!==i&&i(t,r)?t:(o=e,s=r)}var o,s,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,r,n,i]);var f=o(e,h[0],h[1]);return l((function(){d.hasValue=!0,d.value=f}),[f]),u(f),f}},7248:function(e,t,r){"use strict";e.exports=r(1561)},327:function(e,t,r){"use strict";e.exports=r(7595)},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},9889:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,r){var n=r(3897);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,r,n,i,a,o){try{var s=e[a](o),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(i,a){var o=e.apply(r,n);function s(e){t(o,i,a,s,l,"next",e)}function l(e){t(o,i,a,s,l,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,r){var n=r(6015),i=r(9617);function a(t,r,o){return i()?(e.exports=a=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,r){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return r&&n(a,r.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,r){var n=r(6116);e.exports=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,r){var n=r(3808),i=r(9617),a=r(4993);e.exports=function(e){var t=i();return function(){var r,i=n(e);if(t){var o=n(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return a(this,r)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,r){var n=r(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,r){var i=n(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,r){var n=r(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2122:function(e,t,r){var n=r(8416);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,r){var n=r(8698).default,i=r(6115);e.exports=function(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,r){var n=r(8698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function h(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(P){h=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),s=new E(n||[]);return o(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}t.wrap=d;var p={};function m(){}function v(){}function g(){}var y={};h(y,l,(function(){return this}));var x=Object.getPrototypeOf,b=x&&x(x(M([])));b&&b!==r&&a.call(b,l)&&(y=b);var _=g.prototype=m.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,o,s,l){var c=f(e[i],e,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==n(h)&&a.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,s,l)}),(function(e){r("throw",e,s,l)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return I()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=C(o,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=f(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function C(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:I}}function I(){return{value:void 0,done:!0}}return v.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=h(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,h(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},w(k.prototype),h(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new k(d(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(_),h(_,u,"Generator"),h(_,l,(function(){return this})),h(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=M,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:M(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,r){var n=r(9889),i=r(8872),a=r(6116),o=r(2218);e.exports=function(e,t){return n(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,r){var n=r(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},1589:function(e,t,r){var n=r(9889),i=r(9498),a=r(6116),o=r(2218);e.exports=function(e){return n(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,r){var n=r(3405),i=r(9498),a=r(6116),o=r(2281);e.exports=function(e){return n(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,r){var n=r(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},3578:function(e,t,r){var n=r(3808),i=r(6015),a=r(6035),o=r(3515);function s(t){var r="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return o(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{Z:function(){return n}})},4942:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:function(){return n}})},7462:function(e,t,r){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{Z:function(){return n}})},885:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(181);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return a}}(e,t)||(0,n.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(907);var i=r(181);function a(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(907);function i(e,t){if(e){if("string"===typeof e)return(0,n.Z)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.Z)(e,t):void 0}}},2793:function(e,t,r){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{Z:function(){return n}})},1048:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}r.d(t,{Z:function(){return n}})},4695:function(e,t,r){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{Z:function(){return n}})},916:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}r.d(t,{Z:function(){return n}})},1860:function(e,t,r){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{Z:function(){return n}})}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=e,r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var a=Object.create(null);r.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return n[e]}}));return o.default=function(){return n},r.d(a,o),a}}(),r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))},r.u=function(e){return"static/js/"+e+".a107eda1.chunk.js"},r.miniCssF=function(e){},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="vision-dashboard:";r.l=function(n,i,a,o){if(e[n])e[n].push(i);else{var s,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+a),s.src=n),e[n]=[i];var d=function(t,r){s.onerror=s.onload=null,clearTimeout(f);var i=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(r)})),t)return t(r)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.p="/vision-dashboard/",function(){var e={179:0};r.f.j=function(t,n){var i=r.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var a=new Promise((function(r,n){i=e[t]=[r,n]}));n.push(i[2]=a);var o=r.p+r.u(t),s=new Error;r.l(o,(function(n){if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,n){var i,a,o=n[0],s=n[1],l=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(l)l(r)}for(t&&t(n);c<o.length;c++)a=o[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunkvision_dashboard=self.webpackChunkvision_dashboard||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),function(){"use strict";var e=r(2791),t=r.t(e,2),n=r(1250),i=r(4942);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=r.p+"static/media/user-background.e6643a596282e44c7bc5.jpg",l=r(4695),c=r(916),u=r(8182),h=r(2421),d=r(104),f=r(2982),p=r(2466),m=r(7416),v=["sx"];function g(e){var t,r=e.sx,n=function(e){var t,r,n={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(r=e.theme)?void 0:r.unstable_sxConfig)?t:m.Z;return Object.keys(e).forEach((function(t){i[t]?n.systemProps[t]=e[t]:n.otherProps[t]=e[t]})),n}((0,c.Z)(e,v)),i=n.systemProps,a=n.otherProps;return t=Array.isArray(r)?[i].concat((0,f.Z)(r)):"function"===typeof r?function(){var e=r.apply(void 0,arguments);return(0,p.P)(e)?(0,l.Z)({},i,e):i}:(0,l.Z)({},i,r),(0,l.Z)({},a,{sx:t})}var y=r(3459),x=r(184),b=["className","component"];var _=r(5902),w=r(7107),k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.defaultTheme,n=t.defaultClassName,i=void 0===n?"MuiBox-root":n,a=t.generateClassName,o=(0,h.ZP)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(d.Z),s=e.forwardRef((function(e,t){var n=(0,y.Z)(r),s=g(e),h=s.className,d=s.component,f=void 0===d?"div":d,p=(0,c.Z)(s,b);return(0,x.jsx)(o,(0,l.Z)({as:f,ref:t,className:(0,u.Z)(h,a?a(i):i),theme:n},p))}));return s}({defaultTheme:(0,w.Z)(),defaultClassName:"MuiBox-root",generateClassName:_.Z.generate}),S=k,C=function(e){var t=e.children,r=e.sx,n=e.className,i=e.user_image,a=void 0===i?s:i,l=e.hasBackground,c=void 0!==l&&l;return(0,x.jsx)(S,{className:n,sx:o({backgroundColor:"",background:"linear-gradient(126.97deg, rgba(6, 11, 38, 0.89) 28.26%, rgba(26, 31, 55, 0.5) 91.2%)".concat(c?",url(".concat(a,")"):"","  "),borderRadius:"20px"},r),children:t})},A=r(8261),T=r(1048),E=r(2793),M=r(4419),I=r(7630),P=r(1046),R=r(4036),z=r(5878),L=r(1217);function D(e){return(0,L.Z)("MuiTypography",e)}(0,z.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var O=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],F=(0,I.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.variant&&t[r.variant],"inherit"!==r.align&&t["align".concat((0,R.Z)(r.align))],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({margin:0},r.variant&&t.typography[r.variant],"inherit"!==r.align&&{textAlign:r.align},r.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r.gutterBottom&&{marginBottom:"0.35em"},r.paragraph&&{marginBottom:16})})),j={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},N={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},B=e.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiTypography"}),n=function(e){return N[e]||e}(r.color),i=g((0,E.Z)({},r,{color:n})),a=i.align,o=void 0===a?"inherit":a,s=i.className,l=i.component,c=i.gutterBottom,h=void 0!==c&&c,d=i.noWrap,f=void 0!==d&&d,p=i.paragraph,m=void 0!==p&&p,v=i.variant,y=void 0===v?"body1":v,b=i.variantMapping,_=void 0===b?j:b,w=(0,T.Z)(i,O),k=(0,E.Z)({},i,{align:o,color:n,className:s,component:l,gutterBottom:h,noWrap:f,paragraph:m,variant:y,variantMapping:_}),S=l||(m?"p":_[y]||j[y])||"span",C=function(e){var t=e.align,r=e.gutterBottom,n=e.noWrap,i=e.paragraph,a=e.variant,o=e.classes,s={root:["root",a,"inherit"!==e.align&&"align".concat((0,R.Z)(t)),r&&"gutterBottom",n&&"noWrap",i&&"paragraph"]};return(0,M.Z)(s,D,o)}(k);return(0,x.jsx)(F,(0,E.Z)({as:S,ref:t,ownerState:k,className:(0,u.Z)(C.root,s)},w))})),Z=r(885),U=r(8221),V=r(2071);function W(e){return(0,L.Z)("MuiLink",e)}var G=(0,z.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),H=r(8529),X=r(2065),Y={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},q=function(e){var t=e.theme,r=e.ownerState,n=function(e){return Y[e]||e}(r.color),i=(0,H.DW)(t,"palette.".concat(n),!1)||r.color,a=(0,H.DW)(t,"palette.".concat(n,"Channel"));return"vars"in t&&a?"rgba(".concat(a," / 0.4)"):(0,X.Fq)(i,.4)},$=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],K=(0,I.ZP)(B,{name:"MuiLink",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t["underline".concat((0,R.Z)(r.underline))],"button"===r.component&&t.button]}})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({},"none"===r.underline&&{textDecoration:"none"},"hover"===r.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===r.underline&&(0,E.Z)({textDecoration:"underline"},"inherit"!==r.color&&{textDecorationColor:q({theme:t,ownerState:r})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===r.component&&(0,i.Z)({position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(G.focusVisible),{outline:"auto"}))})),J=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiLink"}),i=n.className,a=n.color,o=void 0===a?"primary":a,s=n.component,l=void 0===s?"a":s,c=n.onBlur,h=n.onFocus,d=n.TypographyClasses,p=n.underline,m=void 0===p?"always":p,v=n.variant,g=void 0===v?"inherit":v,y=n.sx,b=(0,T.Z)(n,$),_=(0,U.Z)(),w=_.isFocusVisibleRef,k=_.onBlur,S=_.onFocus,C=_.ref,A=e.useState(!1),I=(0,Z.Z)(A,2),z=I[0],L=I[1],D=(0,V.Z)(r,C),O=(0,E.Z)({},n,{color:o,component:l,focusVisible:z,underline:m,variant:g}),F=function(e){var t=e.classes,r=e.component,n=e.focusVisible,i=e.underline,a={root:["root","underline".concat((0,R.Z)(i)),"button"===r&&"button",n&&"focusVisible"]};return(0,M.Z)(a,W,t)}(O);return(0,x.jsx)(K,(0,E.Z)({color:o,className:(0,u.Z)(F.root,i),classes:d,component:l,onBlur:function(e){k(e),!1===w.current&&L(!1),c&&c(e)},onFocus:function(e){S(e),!0===w.current&&L(!0),h&&h(e)},ref:D,ownerState:O,variant:g,sx:[].concat((0,f.Z)(Object.keys(Y).includes(o)?[]:[{color:o}]),(0,f.Z)(Array.isArray(y)?y:[y]))},b))})),Q=r(7248),ee=r(327),te=r(4164);var re=function(e){e()},ne=function(){return re},ie=(0,e.createContext)(null);function ae(){return(0,e.useContext)(ie)}var oe=function(){throw new Error("uSES not initialized!")},se=oe,le=function(e,t){return e===t};function ce(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,r=t===ie?ae:function(){return(0,e.useContext)(t)};return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le;var i=r(),a=i.store,o=i.subscription,s=i.getServerState,l=se(o.addNestedSub,a.getState,s||a.getState,t,n);return(0,e.useDebugValue)(l),l}}var ue=ce();r(2110),r(6900);var he={notify:function(){},get:function(){return[]}};function de(e,t){var r,n=he;function i(){o.onStateChange&&o.onStateChange()}function a(){r||(r=t?t.addNestedSub(i):e.subscribe(i),n=function(){var e=ne(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],r=t;r;)e.push(r),r=r.next;return e},subscribe:function(e){var n=!0,i=r={callback:e,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){n&&null!==t&&(n=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),n.subscribe(e)},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(r)},trySubscribe:a,tryUnsubscribe:function(){r&&(r(),r=void 0,n.clear(),n=he)},getListeners:function(){return n}};return o}var fe=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?e.useLayoutEffect:e.useEffect;var pe=function(t){var r=t.store,n=t.context,i=t.children,a=t.serverState,o=(0,e.useMemo)((function(){var e=de(r);return{store:r,subscription:e,getServerState:a?function(){return a}:void 0}}),[r,a]),s=(0,e.useMemo)((function(){return r.getState()}),[r]);fe((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==r.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,s]);var l=n||ie;return e.createElement(l.Provider,{value:o},i)};function me(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,r=t===ie?ae:function(){return(0,e.useContext)(t)};return function(){return r().store}}var ve=me();function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=e===ie?ve:me(e);return function(){return t().dispatch}}var ye,xe,be=ge();function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ke(e,t,r){return t&&we(e.prototype,t),r&&we(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Se(e,t){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Se(e,t)}function Ce(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function Te(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e,t){if(t&&("object"===Ee(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Me(e)}function Pe(e){var t=Te();return function(){var r,n=Ae(e);if(t){var i=Ae(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ie(this,r)}}function Re(e,t,r){return Re=Te()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&Se(i,r.prototype),i},Re.apply(null,arguments)}function ze(e){var t="function"===typeof Map?new Map:void 0;return ze=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Re(e,arguments,Ae(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Se(r,e)},ze(e)}function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Le.apply(this,arguments)}!function(e){se=e}(ee.useSyncExternalStoreWithSelector),function(e){e}(Q.useSyncExternalStore),ye=te.unstable_batchedUpdates,re=ye,function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(xe||(xe={}));var De,Oe="popstate";function Fe(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function je(e){return{usr:e.state,key:e.key}}function Ne(e,t,r,n){return void 0===r&&(r=null),Le({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Ze(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function Be(e){var t=e.pathname,r=void 0===t?"/":t,n=e.search,i=void 0===n?"":n,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(r+="#"===o.charAt(0)?o:"#"+o),r}function Ze(e){var t={};if(e){var r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));var n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Ue(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:"unknown://unknown",r="string"===typeof e?e:Be(e);return new URL(r,t)}function Ve(e,t,r,n){void 0===n&&(n={});var i=n,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,l=void 0!==s&&s,c=o.history,u=xe.Pop,h=null;function d(){u=xe.Pop,h&&h({action:u,location:f.location})}var f={get action(){return u},get location(){return e(o,c)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(Oe,d),h=e,function(){o.removeEventListener(Oe,d),h=null}},createHref:function(e){return t(o,e)},encodeLocation:function(e){var t=Ue(Be(e));return Le({},e,{pathname:t.pathname,search:t.search,hash:t.hash})},push:function(e,t){u=xe.Push;var n=Ne(f.location,e,t);r&&r(n,e);var i=je(n),a=f.createHref(n);try{c.pushState(i,"",a)}catch(s){o.location.assign(a)}l&&h&&h({action:u,location:f.location})},replace:function(e,t){u=xe.Replace;var n=Ne(f.location,e,t);r&&r(n,e);var i=je(n),a=f.createHref(n);c.replaceState(i,"",a),l&&h&&h({action:u,location:f.location})},go:function(e){return c.go(e)}};return f}function We(e,t,r){void 0===r&&(r="/");var n=Je(("string"===typeof t?Ze(t):t).pathname||"/",r);if(null==n)return null;var i=Ge(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var r=e.length===t.length&&e.slice(0,-1).every((function(e,r){return e===t[r]}));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=qe(i[o],Ke(n));return a}function Ge(e,t,r,n){return void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(Qe(a.relativePath.startsWith(n),'Absolute route path "'+a.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(n.length));var o=it([n,a.relativePath]),s=r.concat(a);e.children&&e.children.length>0&&(Qe(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),Ge(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:Ye(o,e.index),routesMeta:s})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(De||(De={}));var He=/^:\w+$/,Xe=function(e){return"*"===e};function Ye(e,t){var r=e.split("/"),n=r.length;return r.some(Xe)&&(n+=-2),t&&(n+=2),r.filter((function(e){return!Xe(e)})).reduce((function(e,t){return e+(He.test(t)?3:""===t?1:10)}),n)}function qe(e,t){for(var r=e.routesMeta,n={},i="/",a=[],o=0;o<r.length;++o){var s=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=$e({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},c);if(!u)return null;Object.assign(n,u.params);var h=s.route;a.push({params:n,pathname:it([i,u.pathname]),pathnameBase:at(it([i,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(i=it([i,u.pathnameBase]))}return a}function $e(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var r=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);et("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return n.push(t),"([^\\/]+)"}));e.endsWith("*")?(n.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");return[new RegExp(i,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),n=(0,Z.Z)(r,2),i=n[0],a=n[1],o=t.match(i);if(!o)return null;var s=o[0],l=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,r){if("*"===t){var n=c[r]||"";l=s.slice(0,s.length-n.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(r){return et(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+r+")."),e}}(c[r]||"",t),e}),{}),pathname:s,pathnameBase:l,pattern:e}}function Ke(e){try{return decodeURI(e)}catch(t){return et(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Je(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function Qe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function et(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function tt(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function rt(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function nt(e,t,r,n){var i;void 0===n&&(n=!1),"string"===typeof e?i=Ze(e):(Qe(!(i=Le({},e)).pathname||!i.pathname.includes("?"),tt("?","pathname","search",i)),Qe(!i.pathname||!i.pathname.includes("#"),tt("#","pathname","hash",i)),Qe(!i.search||!i.search.includes("#"),tt("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(n||null==s)a=r;else{var l=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),l-=1;i.pathname=c.join("/")}a=l>=0?t[l]:"/"}var u=function(e,t){void 0===t&&(t="/");var r="string"===typeof e?Ze(e):e,n=r.pathname,i=r.search,a=void 0===i?"":i,o=r.hash,s=void 0===o?"":o,l=n?n.startsWith("/")?n:function(e,t){var r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(n,t):t;return{pathname:l,search:ot(a),hash:st(s)}}(i,a),h=s&&"/"!==s&&s.endsWith("/"),d=(o||"."===s)&&r.endsWith("/");return u.pathname.endsWith("/")||!h&&!d||(u.pathname+="/"),u}var it=function(e){return e.join("/").replace(/\/\/+/g,"/")},at=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ot=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},st=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},lt=function(e){Ce(r,e);var t=Pe(r);function r(){return _e(this,r),t.apply(this,arguments)}return ke(r)}(ze(Error));var ct=ke((function e(t,r,n){_e(this,e),this.status=t,this.statusText=r||"",this.data=n}));function ut(e){return e instanceof ct}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ht=new Set(["POST","PUT","PATCH","DELETE"]);new Set(["GET","HEAD"].concat((0,f.Z)(ht)));function dt(){return dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dt.apply(this,arguments)}var ft="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},pt=e.useState,mt=e.useEffect,vt=e.useLayoutEffect,gt=e.useDebugValue;function yt(e){var t=e.getSnapshot,r=e.value;try{var n=t();return!ft(r,n)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,t.useSyncExternalStore;var xt=e.createContext(null);var bt=e.createContext(null);var _t=e.createContext(null);var wt=e.createContext(null);var kt=e.createContext(null);var St=e.createContext(null);var Ct=e.createContext({outlet:null,matches:[]});var At=e.createContext(null);function Tt(){return null!=e.useContext(St)}function Et(){return Tt()||Qe(!1),e.useContext(St).location}function Mt(){Tt()||Qe(!1);var t=e.useContext(kt),r=t.basename,n=t.navigator,i=e.useContext(Ct).matches,a=Et().pathname,o=JSON.stringify(rt(i).map((function(e){return e.pathnameBase}))),s=e.useRef(!1);return e.useEffect((function(){s.current=!0})),e.useCallback((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=nt(e,JSON.parse(o),a,"path"===t.relative);"/"!==r&&(i.pathname="/"===i.pathname?r:it([r,i.pathname])),(t.replace?n.replace:n.push)(i,t.state,t)}else n.go(e)}),[r,n,o,a])}var It=e.createContext(null);function Pt(){var t=e.useContext(Ct).matches,r=t[t.length-1];return r?r.params:{}}function Rt(t,r){var n=(void 0===r?{}:r).relative,i=e.useContext(Ct).matches,a=Et().pathname,o=JSON.stringify(rt(i).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return nt(t,JSON.parse(o),a,"path"===n)}),[t,o,a,n])}function zt(){var t=function(){var t,r=e.useContext(At),n=Nt(Dt.UseRouteError),i=e.useContext(Ct),a=i.matches[i.matches.length-1];if(r)return r;return i||Qe(!1),!a.route.id&&Qe(!1),null==(t=n.errors)?void 0:t[a.route.id]}(),r=ut(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unhandled Thrown Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},r),n?e.createElement("pre",{style:a},n):null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",e.createElement("code",{style:o},"errorElement")," props on\xa0",e.createElement("code",{style:o},"<Route>")))}var Lt,Dt,Ot=function(t){Ce(n,t);var r=Pe(n);function n(e){var t;return _e(this,n),(t=r.call(this,e)).state={location:e.location,error:e.error},t}return ke(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(At.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(e.Component);function Ft(t){var r=t.routeContext,n=t.match,i=t.children,a=e.useContext(xt);return a&&n.route.errorElement&&(a._deepestRenderedBoundaryId=n.route.id),e.createElement(Ct.Provider,{value:r},i)}function jt(t,r,n){if(void 0===r&&(r=[]),null==t){if(null==n||!n.errors)return null;t=n.matches}var i=t,a=null==n?void 0:n.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||Qe(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(t,o,s){var l=o.route.id?null==a?void 0:a[o.route.id]:null,c=n?o.route.errorElement||e.createElement(zt,null):null,u=function(){return e.createElement(Ft,{match:o,routeContext:{outlet:t,matches:r.concat(i.slice(0,s+1))}},l?c:void 0!==o.route.element?o.route.element:t)};return n&&(o.route.errorElement||0===s)?e.createElement(Ot,{location:n.location,component:c,error:l,children:u()}):u()}),null)}function Nt(t){var r=e.useContext(_t);return r||Qe(!1),r}!function(e){e.UseRevalidator="useRevalidator"}(Lt||(Lt={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Dt||(Dt={}));var Bt;function Zt(t){var r=t.to,n=t.replace,i=t.state,a=t.relative;Tt()||Qe(!1);var o=e.useContext(_t),s=Mt();return e.useEffect((function(){o&&"idle"!==o.navigation.state||s(r,{replace:n,state:i,relative:a})})),null}function Ut(t){return function(t){var r=e.useContext(Ct).outlet;return r?e.createElement(It.Provider,{value:t},r):r}(t.context)}function Vt(e){Qe(!1)}function Wt(t){var r=t.basename,n=void 0===r?"/":r,i=t.children,a=void 0===i?null:i,o=t.location,s=t.navigationType,l=void 0===s?xe.Pop:s,c=t.navigator,u=t.static,h=void 0!==u&&u;Tt()&&Qe(!1);var d=n.replace(/^\/*/,"/"),f=e.useMemo((function(){return{basename:d,navigator:c,static:h}}),[d,c,h]);"string"===typeof o&&(o=Ze(o));var p=o,m=p.pathname,v=void 0===m?"/":m,g=p.search,y=void 0===g?"":g,x=p.hash,b=void 0===x?"":x,_=p.state,w=void 0===_?null:_,k=p.key,S=void 0===k?"default":k,C=e.useMemo((function(){var e=Je(v,d);return null==e?null:{pathname:e,search:y,hash:b,state:w,key:S}}),[d,v,y,b,w,S]);return null==C?null:e.createElement(kt.Provider,{value:f},e.createElement(St.Provider,{children:a,value:{location:C,navigationType:l}}))}function Gt(t){var r=t.children,n=t.location,i=e.useContext(bt);return function(t,r){Tt()||Qe(!1);var n,i=e.useContext(_t),a=e.useContext(Ct).matches,o=a[a.length-1],s=o?o.params:{},l=(o&&o.pathname,o?o.pathnameBase:"/"),c=(o&&o.route,Et());if(r){var u,h="string"===typeof r?Ze(r):r;"/"===l||(null==(u=h.pathname)?void 0:u.startsWith(l))||Qe(!1),n=h}else n=c;var d=n.pathname||"/",f=We(t,{pathname:"/"===l?d:d.slice(l.length)||"/"}),p=jt(f&&f.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:it([l,e.pathname]),pathnameBase:"/"===e.pathnameBase?l:it([l,e.pathnameBase])})})),a,i||void 0);return r&&p?e.createElement(St.Provider,{value:{location:dt({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:xe.Pop}},p):p}(i&&!r?i.router.routes:Xt(r),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Bt||(Bt={}));var Ht=new Promise((function(){}));e.Component;function Xt(t,r){void 0===r&&(r=[]);var n=[];return e.Children.forEach(t,(function(t,i){if(e.isValidElement(t))if(t.type!==e.Fragment){t.type!==Vt&&Qe(!1),t.props.index&&t.props.children&&Qe(!1);var a=[].concat((0,f.Z)(r),[i]),o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,hasErrorBoundary:null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle};t.props.children&&(o.children=Xt(t.props.children,a)),n.push(o)}else n.push.apply(n,Xt(t.props.children,r))})),n}function Yt(){return Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yt.apply(this,arguments)}function qt(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var $t=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],Kt=["aria-current","caseSensitive","className","end","style","to","children"];function Jt(t){var r,n=t.basename,i=t.children,a=t.window,o=e.useRef();null==o.current&&(o.current=(void 0===(r={window:a,v5Compat:!0})&&(r={}),Ve((function(e,t){var r=Ze(e.location.hash.substr(1)),n=r.pathname,i=void 0===n?"/":n,a=r.search,o=void 0===a?"":a,s=r.hash;return Ne("",{pathname:i,search:o,hash:void 0===s?"":s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var r=e.document.querySelector("base"),n="";if(r&&r.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");n=-1===a?i:i.slice(0,a)}return n+"#"+("string"===typeof t?t:Be(t))}),(function(e,t){Fe("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),r)));var s=o.current,l=e.useState({action:s.action,location:s.location}),c=(0,Z.Z)(l,2),u=c[0],h=c[1];return e.useLayoutEffect((function(){return s.listen(h)}),[s]),e.createElement(Wt,{basename:n,children:i,location:u.location,navigationType:u.action,navigator:s})}var Qt=e.forwardRef((function(t,r){var n=t.onClick,i=t.relative,a=t.reloadDocument,o=t.replace,s=t.state,l=t.target,c=t.to,u=t.preventScrollReset,h=qt(t,$t),d=function(t,r){var n=(void 0===r?{}:r).relative;Tt()||Qe(!1);var i=e.useContext(kt),a=i.basename,o=i.navigator,s=Rt(t,{relative:n}),l=s.hash,c=s.pathname,u=s.search,h=c;return"/"!==a&&(h="/"===c?a:it([a,c])),o.createHref({pathname:h,search:u,hash:l})}(c,{relative:i}),f=function(t,r){var n=void 0===r?{}:r,i=n.target,a=n.replace,o=n.state,s=n.preventScrollReset,l=n.relative,c=Mt(),u=Et(),h=Rt(t,{relative:l});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,i)){e.preventDefault();var r=void 0!==a?a:Be(u)===Be(h);c(t,{replace:r,state:o,preventScrollReset:s,relative:l})}}),[u,c,h,a,o,i,t,s,l])}(c,{replace:o,state:s,target:l,preventScrollReset:u,relative:i});return e.createElement("a",Yt({},h,{href:d,onClick:a?n:function(e){n&&n(e),e.defaultPrevented||f(e)},ref:r,target:l}))}));var er=e.forwardRef((function(t,r){var n=t["aria-current"],i=void 0===n?"page":n,a=t.caseSensitive,o=void 0!==a&&a,s=t.className,l=void 0===s?"":s,c=t.end,u=void 0!==c&&c,h=t.style,d=t.to,f=t.children,p=qt(t,Kt),m=Rt(d,{relative:p.relative}),v=Et(),g=e.useContext(_t),y=m.pathname,x=v.pathname,b=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;o||(x=x.toLowerCase(),b=b?b.toLowerCase():null,y=y.toLowerCase());var _,w=x===y||!u&&x.startsWith(y)&&"/"===x.charAt(y.length),k=null!=b&&(b===y||!u&&b.startsWith(y)&&"/"===b.charAt(y.length)),S=w?i:void 0;_="function"===typeof l?l({isActive:w,isPending:k}):[l,w?"active":null,k?"pending":null].filter(Boolean).join(" ");var C="function"===typeof h?h({isActive:w,isPending:k}):h;return e.createElement(Qt,Yt({},p,{"aria-current":S,className:_,ref:r,style:C,to:d}),"function"===typeof f?f({isActive:w,isPending:k}):f)}));var tr,rr;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(tr||(tr={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(rr||(rr={}));var nr=function(){var e=ue((function(e){return e.accounts.currentAccount}));return(0,x.jsxs)(C,{className:"c-smartcard u-opacity-0 u-fadein",hasBackground:!0,sx:{minHeight:"auto",width:"100%",pl:{xs:4,md:6},py:5,gap:{xs:10,md:19}},children:[(0,x.jsxs)(S,{sx:{width:"100%",maxHeight:"305px"},children:[(0,x.jsx)(B,{variant:"h6",color:"gray.light",className:"u-text-small",children:"Welcome back,"}),(0,x.jsx)(B,{variant:"h2",color:"white",textTransform:"capitalize",children:e.name||" "}),(0,x.jsxs)(B,{variant:"h6",color:"gray.light",mt:2.5,children:["Glad to see you again! ",(0,x.jsx)("br",{})," Want to view more?"]})]}),(0,x.jsx)(Qt,{to:"/user/".concat(e.itemId),className:"u-link-primary",children:(0,x.jsx)(J,{component:"div",className:"u-link-primary",underline:"none",children:(0,x.jsxs)(S,{className:"c-smartcard__more",sx:{display:"flex",alignItems:"center"},children:[(0,x.jsx)(B,{variant:"h6",color:"white",mr:2,children:"View More"}),(0,x.jsx)(A.Z,{sx:{color:"white"}})]})})})]})},ir=r(1184),ar=r(6482);function or(){return(0,y.Z)(ar.Z)}var sr=e.createContext();function lr(e){return(0,L.Z)("MuiGrid",e)}var cr=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],ur=(0,z.Z)("MuiGrid",["root","container","item","zeroMinWidth"].concat((0,f.Z)([0,1,2,3,4,5,6,7,8,9,10].map((function(e){return"spacing-xs-".concat(e)}))),(0,f.Z)(["column-reverse","column","row-reverse","row"].map((function(e){return"direction-xs-".concat(e)}))),(0,f.Z)(["nowrap","wrap-reverse","wrap"].map((function(e){return"wrap-xs-".concat(e)}))),(0,f.Z)(cr.map((function(e){return"grid-xs-".concat(e)}))),(0,f.Z)(cr.map((function(e){return"grid-sm-".concat(e)}))),(0,f.Z)(cr.map((function(e){return"grid-md-".concat(e)}))),(0,f.Z)(cr.map((function(e){return"grid-lg-".concat(e)}))),(0,f.Z)(cr.map((function(e){return"grid-xl-".concat(e)}))))),hr=ur,dr=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function fr(e){var t=parseFloat(e);return"".concat(t).concat(String(e).replace(String(t),"")||"px")}function pr(e){var t=e.breakpoints,r=e.values,n="";Object.keys(r).forEach((function(e){""===n&&0!==r[e]&&(n=e)}));var i=Object.keys(t).sort((function(e,r){return t[e]-t[r]}));return i.slice(0,i.indexOf(n))}var mr=(0,I.ZP)("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState,n=r.container,i=r.direction,a=r.item,o=r.spacing,s=r.wrap,l=r.zeroMinWidth,c=r.breakpoints,u=[];n&&(u=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[r["spacing-xs-".concat(String(e))]];var n=[];return t.forEach((function(t){var i=e[t];Number(i)>0&&n.push(r["spacing-".concat(t,"-").concat(String(i))])})),n}(o,c,t));var h=[];return c.forEach((function(e){var n=r[e];n&&h.push(t["grid-".concat(e,"-").concat(String(n))])})),[t.root,n&&t.container,a&&t.item,l&&t.zeroMinWidth].concat((0,f.Z)(u),["row"!==i&&t["direction-xs-".concat(String(i))],"wrap"!==s&&t["wrap-xs-".concat(String(s))]],h)}})((function(e){var t=e.ownerState;return(0,E.Z)({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){var t=e.theme,r=e.ownerState,n=(0,ir.P$)({values:r.direction,breakpoints:t.breakpoints.values});return(0,ir.k9)({theme:t},n,(function(e){var t={flexDirection:e};return 0===e.indexOf("column")&&(t["& > .".concat(hr.item)]={maxWidth:"none"}),t}))}),(function(e){var t=e.theme,r=e.ownerState,n=r.container,a=r.rowSpacing,o={};if(n&&0!==a){var s,l=(0,ir.P$)({values:a,breakpoints:t.breakpoints.values});"object"===typeof l&&(s=pr({breakpoints:t.breakpoints.values,values:l})),o=(0,ir.k9)({theme:t},l,(function(e,r){var n,a=t.spacing(e);return"0px"!==a?(0,i.Z)({marginTop:"-".concat(fr(a))},"& > .".concat(hr.item),{paddingTop:fr(a)}):null!=(n=s)&&n.includes(r)?{}:(0,i.Z)({marginTop:0},"& > .".concat(hr.item),{paddingTop:0})}))}return o}),(function(e){var t=e.theme,r=e.ownerState,n=r.container,a=r.columnSpacing,o={};if(n&&0!==a){var s,l=(0,ir.P$)({values:a,breakpoints:t.breakpoints.values});"object"===typeof l&&(s=pr({breakpoints:t.breakpoints.values,values:l})),o=(0,ir.k9)({theme:t},l,(function(e,r){var n,a=t.spacing(e);return"0px"!==a?(0,i.Z)({width:"calc(100% + ".concat(fr(a),")"),marginLeft:"-".concat(fr(a))},"& > .".concat(hr.item),{paddingLeft:fr(a)}):null!=(n=s)&&n.includes(r)?{}:(0,i.Z)({width:"100%",marginLeft:0},"& > .".concat(hr.item),{paddingLeft:0})}))}return o}),(function(e){var t,r=e.theme,n=e.ownerState;return r.breakpoints.keys.reduce((function(e,i){var a={};if(n[i]&&(t=n[i]),!t)return e;if(!0===t)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{var o=(0,ir.P$)({values:n.columns,breakpoints:r.breakpoints.values}),s="object"===typeof o?o[i]:o;if(void 0===s||null===s)return e;var l="".concat(Math.round(t/s*1e8)/1e6,"%"),c={};if(n.container&&n.item&&0!==n.columnSpacing){var u=r.spacing(n.columnSpacing);if("0px"!==u){var h="calc(".concat(l," + ").concat(fr(u),")");c={flexBasis:h,maxWidth:h}}}a=(0,E.Z)({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===r.breakpoints.values[i]?Object.assign(e,a):e[r.breakpoints.up(i)]=a,e}),{})}));var vr=function(e){var t=e.classes,r=e.container,n=e.direction,i=e.item,a=e.spacing,o=e.wrap,s=e.zeroMinWidth,l=e.breakpoints,c=[];r&&(c=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return["spacing-xs-".concat(String(e))];var r=[];return t.forEach((function(t){var n=e[t];if(Number(n)>0){var i="spacing-".concat(t,"-").concat(String(n));r.push(i)}})),r}(a,l));var u=[];l.forEach((function(t){var r=e[t];r&&u.push("grid-".concat(t,"-").concat(String(r)))}));var h={root:["root",r&&"container",i&&"item",s&&"zeroMinWidth"].concat((0,f.Z)(c),["row"!==n&&"direction-xs-".concat(String(n)),"wrap"!==o&&"wrap-xs-".concat(String(o))],u)};return(0,M.Z)(h,lr,t)},gr=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiGrid"}),i=or().breakpoints,a=g(n),o=a.className,s=a.columns,l=a.columnSpacing,c=a.component,h=void 0===c?"div":c,d=a.container,f=void 0!==d&&d,p=a.direction,m=void 0===p?"row":p,v=a.item,y=void 0!==v&&v,b=a.rowSpacing,_=a.spacing,w=void 0===_?0:_,k=a.wrap,S=void 0===k?"wrap":k,C=a.zeroMinWidth,A=void 0!==C&&C,M=(0,T.Z)(a,dr),I=b||w,R=l||w,z=e.useContext(sr),L=f?s||12:z,D={},O=(0,E.Z)({},M);i.keys.forEach((function(e){null!=M[e]&&(D[e]=M[e],delete O[e])}));var F=(0,E.Z)({},a,{columns:L,container:f,direction:m,item:y,rowSpacing:I,columnSpacing:R,wrap:S,zeroMinWidth:A,spacing:w},D,{breakpoints:i.keys}),j=vr(F);return(0,x.jsx)(sr.Provider,{value:L,children:(0,x.jsx)(mr,(0,E.Z)({ownerState:F,className:(0,u.Z)(j.root,o),as:h,ref:r},O))})})),yr=gr;function xr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}r(3361);var br=r(9886),_r=r(5438),wr=r(9140),kr=r(2561),Sr=(0,br.w)((function(t,r){var n=t.styles,i=(0,wr.O)([n],void 0,(0,e.useContext)(br.T)),a=(0,e.useRef)();return(0,kr.j)((function(){var e=r.key+"-global",t=new r.sheet.constructor({key:e,nonce:r.sheet.nonce,container:r.sheet.container,speedy:r.sheet.isSpeedy}),n=!1,o=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return r.sheet.tags.length&&(t.before=r.sheet.tags[0]),null!==o&&(n=!0,o.setAttribute("data-emotion",e),t.hydrate([o])),a.current=[t,n],function(){t.flush()}}),[r]),(0,kr.j)((function(){var e=a.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&(0,_r.My)(r,i.next,!0),t.tags.length){var n=t.tags[t.tags.length-1].nextElementSibling;t.before=n,t.flush()}r.insert("",i,t,!1)}}),[r,i.name]),null}));function Cr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,wr.O)(t)}var Ar=function(){var e=Cr.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Tr(e){return(0,L.Z)("MuiCircularProgress",e)}(0,z.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var Er,Mr,Ir,Pr,Rr,zr,Lr,Dr,Or=["className","color","disableShrink","size","style","thickness","value","variant"],Fr=44,jr=Ar(Rr||(Rr=Er||(Er=xr(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),Nr=Ar(zr||(zr=Mr||(Mr=xr(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),Br=(0,I.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t[r.variant],t["color".concat((0,R.Z)(r.color))]]}})((function(e){var t=e.ownerState,r=e.theme;return(0,E.Z)({display:"inline-block"},"determinate"===t.variant&&{transition:r.transitions.create("transform")},"inherit"!==t.color&&{color:(r.vars||r).palette[t.color].main})}),(function(e){return"indeterminate"===e.ownerState.variant&&Cr(Lr||(Lr=Ir||(Ir=xr(["\n      animation: "," 1.4s linear infinite;\n    "]))),jr)})),Zr=(0,I.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:function(e,t){return t.svg}})({display:"block"}),Ur=(0,I.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:function(e,t){var r=e.ownerState;return[t.circle,t["circle".concat((0,R.Z)(r.variant))],r.disableShrink&&t.circleDisableShrink]}})((function(e){var t=e.ownerState,r=e.theme;return(0,E.Z)({stroke:"currentColor"},"determinate"===t.variant&&{transition:r.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(function(e){var t=e.ownerState;return"indeterminate"===t.variant&&!t.disableShrink&&Cr(Dr||(Dr=Pr||(Pr=xr(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),Nr)})),Vr=e.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiCircularProgress"}),n=r.className,i=r.color,a=void 0===i?"primary":i,o=r.disableShrink,s=void 0!==o&&o,l=r.size,c=void 0===l?40:l,h=r.style,d=r.thickness,f=void 0===d?3.6:d,p=r.value,m=void 0===p?0:p,v=r.variant,g=void 0===v?"indeterminate":v,y=(0,T.Z)(r,Or),b=(0,E.Z)({},r,{color:a,disableShrink:s,size:c,thickness:f,value:m,variant:g}),_=function(e){var t=e.classes,r=e.variant,n=e.color,i=e.disableShrink,a={root:["root",r,"color".concat((0,R.Z)(n))],svg:["svg"],circle:["circle","circle".concat((0,R.Z)(r)),i&&"circleDisableShrink"]};return(0,M.Z)(a,Tr,t)}(b),w={},k={},S={};if("determinate"===g){var C=2*Math.PI*((Fr-f)/2);w.strokeDasharray=C.toFixed(3),S["aria-valuenow"]=Math.round(m),w.strokeDashoffset="".concat(((100-m)/100*C).toFixed(3),"px"),k.transform="rotate(-90deg)"}return(0,x.jsx)(Br,(0,E.Z)({className:(0,u.Z)(_.root,n),style:(0,E.Z)({width:c,height:c},k,h),ownerState:b,ref:t,role:"progressbar"},S,y,{children:(0,x.jsx)(Zr,{className:_.svg,ownerState:b,viewBox:"".concat(22," ").concat(22," ").concat(Fr," ").concat(Fr),children:(0,x.jsx)(Ur,{className:_.circle,style:w,ownerState:b,cx:Fr,cy:Fr,r:(Fr-f)/2,fill:"none",strokeWidth:f})})}))})),Wr=Vr,Gr=function(e){var t=e.title,r=e.boxTopTitle,n=e.boxTopValue,i=e.boxBottomTitle,a=e.boxBottomValue,o=e.progressTitle,s=e.progressPercent,l=e.progressDesc;return(0,x.jsx)(C,{hasBackground:!1,className:"c-smartcard  u-opacity-0 u-fadein",sx:{minHeight:"auto",width:"100%",px:4,py:5,gap:{xs:10,md:19}},children:(0,x.jsx)(S,{className:"c-smartcard__container",children:(0,x.jsxs)(yr,{container:!0,children:[(0,x.jsxs)(yr,{item:!0,xs:12,sm:12,md:12,xl:6,children:[(0,x.jsx)(B,{variant:"h5",color:"white",children:t}),(0,x.jsxs)(yr,{container:!0,spacing:2,pr:{xs:0,md:4},children:[(0,x.jsx)(yr,{item:!0,xs:6,md:12,children:(0,x.jsxs)(S,{className:"c-smartcard__info-card",sx:{mt:{xs:4,md:6},width:{xs:"100%",md:"auto"}},children:[(0,x.jsx)(B,{width:"100%",variant:"h6",className:"u-text-small",color:"gray.light",children:r}),(0,x.jsx)(B,{mt:.5,width:"100%",variant:"h5",color:"white",children:n})]})}),(0,x.jsx)(yr,{item:!0,xs:6,md:12,children:(0,x.jsxs)(S,{className:"c-smartcard__info-card",sx:{mt:{xs:4,md:1},width:{xs:"100%",md:"auto"}},children:[(0,x.jsx)(B,{width:"100%",variant:"h6",className:"u-text-small",color:"gray.light",children:i}),(0,x.jsx)(B,{mt:.5,width:"100%",variant:"h5",color:"white",children:a})]})})]})]}),(0,x.jsx)(yr,{item:!0,xs:12,sm:12,md:6,sx:{pr:{xl:0},display:{xs:"block",sm:"block",md:"none",lg:"none",xl:"block"}},mt:8,children:(0,x.jsxs)(S,{className:"c-smartcard__progress-container",children:[(0,x.jsx)(Wr,{size:"150px",color:"success",thickness:4,variant:"determinate",value:s,sx:{borderRadius:"10px"}}),(0,x.jsxs)(S,{className:"c-smartcard__progress-context",children:[(0,x.jsx)(B,{variant:"h6",className:"u-text-tiny",color:"gray.light",children:o}),(0,x.jsx)(B,{variant:"h4",className:"u-text-massive",color:"white",children:null===s||void 0===s?void 0:s.toFixed(0)}),(0,x.jsx)(B,{sx:{display:{xs:"block",sm:"none",md:"none",lg:"none",xl:"block"}},variant:"h6",className:"u-text-tiny",color:"gray.light",children:l})]})]})})]})})})};function Hr(e){return(0,L.Z)("MuiTableContainer",e)}(0,z.Z)("MuiTableContainer",["root"]);var Xr=["className","component"],Yr=(0,I.ZP)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:function(e,t){return t.root}})({width:"100%",overflowX:"auto"}),qr=e.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiTableContainer"}),n=r.className,i=r.component,a=void 0===i?"div":i,o=(0,T.Z)(r,Xr),s=(0,E.Z)({},r,{component:a}),l=function(e){var t=e.classes;return(0,M.Z)({root:["root"]},Hr,t)}(s);return(0,x.jsx)(Yr,(0,E.Z)({ref:t,as:a,className:(0,u.Z)(l.root,n),ownerState:s},o))})),$r=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)};function Kr(e){return(0,L.Z)("MuiPaper",e)}(0,z.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var Jr=["className","component","elevation","square","variant"],Qr=(0,I.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t[r.variant],!r.square&&t.rounded,"elevation"===r.variant&&t["elevation".concat(r.elevation)]]}})((function(e){var t,r=e.theme,n=e.ownerState;return(0,E.Z)({backgroundColor:(r.vars||r).palette.background.paper,color:(r.vars||r).palette.text.primary,transition:r.transitions.create("box-shadow")},!n.square&&{borderRadius:r.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((r.vars||r).palette.divider)},"elevation"===n.variant&&(0,E.Z)({boxShadow:(r.vars||r).shadows[n.elevation]},!r.vars&&"dark"===r.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,X.Fq)("#fff",$r(n.elevation)),", ").concat((0,X.Fq)("#fff",$r(n.elevation)),")")},r.vars&&{backgroundImage:null==(t=r.vars.overlays)?void 0:t[n.elevation]}))})),en=e.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiPaper"}),n=r.className,i=r.component,a=void 0===i?"div":i,o=r.elevation,s=void 0===o?1:o,l=r.square,c=void 0!==l&&l,h=r.variant,d=void 0===h?"elevation":h,f=(0,T.Z)(r,Jr),p=(0,E.Z)({},r,{component:a,elevation:s,square:c,variant:d}),m=function(e){var t=e.square,r=e.elevation,n=e.variant,i=e.classes,a={root:["root",n,!t&&"rounded","elevation"===n&&"elevation".concat(r)]};return(0,M.Z)(a,Kr,i)}(p);return(0,x.jsx)(Qr,(0,E.Z)({as:a,ownerState:p,className:(0,u.Z)(m.root,n),ref:t},f))}));var tn=e.createContext();function rn(e){return(0,L.Z)("MuiTable",e)}(0,z.Z)("MuiTable",["root","stickyHeader"]);var nn=["className","component","padding","size","stickyHeader"],an=(0,I.ZP)("table",{name:"MuiTable",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.stickyHeader&&t.stickyHeader]}})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,E.Z)({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},r.stickyHeader&&{borderCollapse:"separate"})})),on="table",sn=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiTable"}),i=n.className,a=n.component,o=void 0===a?on:a,s=n.padding,l=void 0===s?"normal":s,c=n.size,h=void 0===c?"medium":c,d=n.stickyHeader,f=void 0!==d&&d,p=(0,T.Z)(n,nn),m=(0,E.Z)({},n,{component:o,padding:l,size:h,stickyHeader:f}),v=function(e){var t=e.classes,r={root:["root",e.stickyHeader&&"stickyHeader"]};return(0,M.Z)(r,rn,t)}(m),g=e.useMemo((function(){return{padding:l,size:h,stickyHeader:f}}),[l,h,f]);return(0,x.jsx)(tn.Provider,{value:g,children:(0,x.jsx)(an,(0,E.Z)({as:o,role:o===on?null:"table",ref:r,className:(0,u.Z)(v.root,i),ownerState:m},p))})}));var ln=e.createContext();function cn(e){return(0,L.Z)("MuiTableHead",e)}(0,z.Z)("MuiTableHead",["root"]);var un=["className","component"],hn=(0,I.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:function(e,t){return t.root}})({display:"table-header-group"}),dn={variant:"head"},fn="thead",pn=e.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiTableHead"}),n=r.className,i=r.component,a=void 0===i?fn:i,o=(0,T.Z)(r,un),s=(0,E.Z)({},r,{component:a}),l=function(e){var t=e.classes;return(0,M.Z)({root:["root"]},cn,t)}(s);return(0,x.jsx)(ln.Provider,{value:dn,children:(0,x.jsx)(hn,(0,E.Z)({as:a,className:(0,u.Z)(l.root,n),ref:t,role:a===fn?null:"rowgroup",ownerState:s},o))})}));function mn(e){return(0,L.Z)("MuiTableRow",e)}var vn=(0,z.Z)("MuiTableRow",["root","selected","hover","head","footer"]),gn=["className","component","hover","selected"],yn=(0,I.ZP)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.head&&t.head,r.footer&&t.footer]}})((function(e){var t,r=e.theme;return t={color:"inherit",display:"table-row",verticalAlign:"middle",outline:0},(0,i.Z)(t,"&.".concat(vn.hover,":hover"),{backgroundColor:(r.vars||r).palette.action.hover}),(0,i.Z)(t,"&.".concat(vn.selected),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / ").concat(r.vars.palette.action.selectedOpacity,")"):(0,X.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity),"&:hover":{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.hoverOpacity,"))"):(0,X.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity)}}),t})),xn=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiTableRow"}),i=n.className,a=n.component,o=void 0===a?"tr":a,s=n.hover,l=void 0!==s&&s,c=n.selected,h=void 0!==c&&c,d=(0,T.Z)(n,gn),f=e.useContext(ln),p=(0,E.Z)({},n,{component:o,hover:l,selected:h,head:f&&"head"===f.variant,footer:f&&"footer"===f.variant}),m=function(e){var t=e.classes,r={root:["root",e.selected&&"selected",e.hover&&"hover",e.head&&"head",e.footer&&"footer"]};return(0,M.Z)(r,mn,t)}(p);return(0,x.jsx)(yn,(0,E.Z)({as:o,ref:r,className:(0,u.Z)(m.root,i),role:"tr"===o?null:"row",ownerState:p},d))})),bn=xn;function _n(e){return(0,L.Z)("MuiTableCell",e)}var wn=(0,z.Z)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),kn=["align","className","component","padding","scope","size","sortDirection","variant"],Sn=(0,I.ZP)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t[r.variant],t["size".concat((0,R.Z)(r.size))],"normal"!==r.padding&&t["padding".concat((0,R.Z)(r.padding))],"inherit"!==r.align&&t["align".concat((0,R.Z)(r.align))],r.stickyHeader&&t.stickyHeader]}})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?"1px solid ".concat(t.vars.palette.TableCell.border):"1px solid\n    ".concat("light"===t.palette.mode?(0,X.$n)((0,X.Fq)(t.palette.divider,1),.88):(0,X._j)((0,X.Fq)(t.palette.divider,1),.68)),textAlign:"left",padding:16},"head"===r.variant&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},"body"===r.variant&&{color:(t.vars||t).palette.text.primary},"footer"===r.variant&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},"small"===r.size&&(0,i.Z)({padding:"6px 16px"},"&.".concat(wn.paddingCheckbox),{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}),"checkbox"===r.padding&&{width:48,padding:"0 0 0 4px"},"none"===r.padding&&{padding:0},"left"===r.align&&{textAlign:"left"},"center"===r.align&&{textAlign:"center"},"right"===r.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===r.align&&{textAlign:"justify"},r.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})})),Cn=e.forwardRef((function(t,r){var n,i=(0,P.Z)({props:t,name:"MuiTableCell"}),a=i.align,o=void 0===a?"inherit":a,s=i.className,l=i.component,c=i.padding,h=i.scope,d=i.size,f=i.sortDirection,p=i.variant,m=(0,T.Z)(i,kn),v=e.useContext(tn),g=e.useContext(ln),y=g&&"head"===g.variant,b=h;"td"===(n=l||(y?"th":"td"))?b=void 0:!b&&y&&(b="col");var _=p||g&&g.variant,w=(0,E.Z)({},i,{align:o,component:n,padding:c||(v&&v.padding?v.padding:"normal"),size:d||(v&&v.size?v.size:"medium"),sortDirection:f,stickyHeader:"head"===_&&v&&v.stickyHeader,variant:_}),k=function(e){var t=e.classes,r=e.variant,n=e.align,i=e.padding,a=e.size,o={root:["root",r,e.stickyHeader&&"stickyHeader","inherit"!==n&&"align".concat((0,R.Z)(n)),"normal"!==i&&"padding".concat((0,R.Z)(i)),"size".concat((0,R.Z)(a))]};return(0,M.Z)(o,_n,t)}(w),S=null;return f&&(S="asc"===f?"ascending":"descending"),(0,x.jsx)(Sn,(0,E.Z)({as:n,ref:r,className:(0,u.Z)(k.root,s),"aria-sort":S,scope:b,ownerState:w},m))})),An=Cn;function Tn(e){return(0,L.Z)("MuiTableBody",e)}(0,z.Z)("MuiTableBody",["root"]);var En=["className","component"],Mn=(0,I.ZP)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:function(e,t){return t.root}})({display:"table-row-group"}),In={variant:"body"},Pn="tbody",Rn=e.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiTableBody"}),n=r.className,i=r.component,a=void 0===i?Pn:i,o=(0,T.Z)(r,En),s=(0,E.Z)({},r,{component:a}),l=function(e){var t=e.classes;return(0,M.Z)({root:["root"]},Tn,t)}(s);return(0,x.jsx)(ln.Provider,{value:In,children:(0,x.jsx)(Mn,(0,E.Z)({className:(0,u.Z)(l.root,n),as:a,ref:t,role:a===Pn?null:"rowgroup",ownerState:s},o))})})),zn=function(e){var t=e.tableTitle,r=e.data,n=e.sx,i=e.children;return(0,x.jsxs)(qr,{className:"c-table",component:en,sx:o({borderRadius:"20px",background:"linear-gradient(126.97deg, rgba(6, 11, 40, 0.74) 28.26%, rgba(10, 14, 35, 0.71) 91.2%)",backdropFilter:"blur(60px)",p:2,mt:3},n),children:[(0,x.jsx)(B,{ml:1,my:3,variant:"h5",color:"white",children:t}),(0,x.jsxs)(sn,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,x.jsx)(pn,{children:(0,x.jsxs)(bn,{children:[(0,x.jsx)(An,{sx:{letterSpacing:.6,color:"white"},align:"left",children:"Name"}),(0,x.jsxs)(An,{sx:{letterSpacing:.6,color:"white"},align:"left",children:["requests"===r&&"Services","tickets"===r&&"User","accounts"===r&&"Email"]}),(0,x.jsx)(An,{sx:{letterSpacing:.61,color:"white"},align:"left",children:"Status"}),(0,x.jsxs)(An,{sx:{letterSpacing:.61,color:"white"},align:"left",children:["accounts"===r&&"Registered at","requests"===r&&"Request Date"]}),(0,x.jsx)(An,{sx:{letterSpacing:.61,color:"white"},align:"left",children:"-----"})]})}),(0,x.jsx)(Rn,{children:i})]})]})};function Ln(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function Dn(e){return parseFloat(e)}function On(e){return(0,L.Z)("MuiSkeleton",e)}(0,z.Z)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);var Fn,jn,Nn,Bn,Zn,Un,Vn,Wn,Gn=["animation","className","component","height","style","variant","width"],Hn=Ar(Zn||(Zn=Fn||(Fn=xr(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.4;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"])))),Xn=Ar(Un||(Un=jn||(jn=xr(["\n  0% {\n    transform: translateX(-100%);\n  }\n\n  50% {\n    /* +0.5s of delay between each loop */\n    transform: translateX(100%);\n  }\n\n  100% {\n    transform: translateX(100%);\n  }\n"])))),Yn=(0,I.ZP)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t[r.variant],!1!==r.animation&&t[r.animation],r.hasChildren&&t.withChildren,r.hasChildren&&!r.width&&t.fitContent,r.hasChildren&&!r.height&&t.heightAuto]}})((function(e){var t=e.theme,r=e.ownerState,n=Ln(t.shape.borderRadius)||"px",i=Dn(t.shape.borderRadius);return(0,E.Z)({display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:(0,X.Fq)(t.palette.text.primary,"light"===t.palette.mode?.11:.13),height:"1.2em"},"text"===r.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:"".concat(i).concat(n,"/").concat(Math.round(i/.6*10)/10).concat(n),"&:empty:before":{content:'"\\00a0"'}},"circular"===r.variant&&{borderRadius:"50%"},"rounded"===r.variant&&{borderRadius:(t.vars||t).shape.borderRadius},r.hasChildren&&{"& > *":{visibility:"hidden"}},r.hasChildren&&!r.width&&{maxWidth:"fit-content"},r.hasChildren&&!r.height&&{height:"auto"})}),(function(e){return"pulse"===e.ownerState.animation&&Cr(Vn||(Vn=Nn||(Nn=xr(["\n      animation: "," 1.5s ease-in-out 0.5s infinite;\n    "]))),Hn)}),(function(e){var t=e.ownerState,r=e.theme;return"wave"===t.animation&&Cr(Wn||(Wn=Bn||(Bn=xr(["\n      position: relative;\n      overflow: hidden;\n\n      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */\n      -webkit-mask-image: -webkit-radial-gradient(white, black);\n\n      &::after {\n        animation: "," 1.6s linear 0.5s infinite;\n        background: linear-gradient(\n          90deg,\n          transparent,\n          ",",\n          transparent\n        );\n        content: '';\n        position: absolute;\n        transform: translateX(-100%); /* Avoid flash during server-side hydration */\n        bottom: 0;\n        left: 0;\n        right: 0;\n        top: 0;\n      }\n    "]))),Xn,(r.vars||r).palette.action.hover)})),qn=e.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiSkeleton"}),n=r.animation,i=void 0===n?"pulse":n,a=r.className,o=r.component,s=void 0===o?"span":o,l=r.height,c=r.style,h=r.variant,d=void 0===h?"text":h,f=r.width,p=(0,T.Z)(r,Gn),m=(0,E.Z)({},r,{animation:i,component:s,variant:d,hasChildren:Boolean(p.children)}),v=function(e){var t=e.classes,r=e.variant,n=e.animation,i=e.hasChildren,a=e.width,o=e.height,s={root:["root",r,n,i&&"withChildren",i&&!a&&"fitContent",i&&!o&&"heightAuto"]};return(0,M.Z)(s,On,t)}(m);return(0,x.jsx)(Yn,(0,E.Z)({as:s,ref:t,className:(0,u.Z)(v.root,a),ownerState:m},p,{style:(0,E.Z)({width:f,height:l},c)}))})),$n=qn,Kn=function(e){var t=e.sx;return(0,x.jsx)($n,{animation:"wave",variant:"rounded",width:"100%",sx:o({borderRadius:"20px"},t)})},Jn=r(3496),Qn=function(){var t=ue((function(e){return e.requests})),r=(0,e.useState)({chart:{type:"area",foreColor:"#fff"},dataLabels:{enabled:!0},stroke:{curve:"smooth"},xaxis:{type:"datetime",categories:["2018-09-19T00:00:00.000Z","2018-09-19T01:30:00.000Z","2018-09-19T02:30:00.000Z","2018-09-19T03:30:00.000Z","2018-09-19T04:30:00.000Z","2018-09-19T05:30:00.000Z"],labels:{style:{colors:"white"}}},yaxis:{labels:{style:{colors:"white"}}},tooltip:{x:{format:"dd/MM/yy HH:mm"}}}),n=(0,Z.Z)(r,2),i=n[0],a=n[1],s=(0,e.useState)({series:[{name:"Requests",data:[1,2,3,4,5,5]}]}),l=(0,Z.Z)(s,2),c=l[0],u=l[1];return(0,e.useEffect)((function(){if(!t.isLoading){var e=t.requests.map((function(e){return e.date?new Date(e.date).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0]})),r=(0,f.Z)(new Set(e)),n={},s=[];e.forEach((function(e){n[e]=(n[e]||0)+1})),Object.entries(n).forEach((function(e){var t=(0,Z.Z)(e,2),r=(t[0],t[1]);s.push(r)})),a(o(o({},i),{},{xaxis:o(o({},i.xaxis),{},{categories:r})})),u({series:[{name:"Requests",data:s}]})}}),[t]),(0,x.jsx)(Jn.Z,{options:i,series:c.series,type:"area",width:"100%",height:"335px"})},ei=r(1883),ti=r(9201),ri=(0,ti.Z)((0,x.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function ni(e){return(0,L.Z)("MuiAvatar",e)}(0,z.Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var ii=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],ai=(0,I.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===r.variant&&{borderRadius:(t.vars||t).shape.borderRadius},"square"===r.variant&&{borderRadius:0},r.colorDefault&&(0,E.Z)({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}))})),oi=(0,I.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:function(e,t){return t.img}})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),si=(0,I.ZP)(ri,{name:"MuiAvatar",slot:"Fallback",overridesResolver:function(e,t){return t.fallback}})({width:"75%",height:"75%"});var li=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiAvatar"}),i=n.alt,a=n.children,o=n.className,s=n.component,l=void 0===s?"div":s,c=n.imgProps,h=n.sizes,d=n.src,f=n.srcSet,p=n.variant,m=void 0===p?"circular":p,v=(0,T.Z)(n,ii),g=null,y=function(t){var r=t.crossOrigin,n=t.referrerPolicy,i=t.src,a=t.srcSet,o=e.useState(!1),s=(0,Z.Z)(o,2),l=s[0],c=s[1];return e.useEffect((function(){if(i||a){c(!1);var e=!0,t=new Image;return t.onload=function(){e&&c("loaded")},t.onerror=function(){e&&c("error")},t.crossOrigin=r,t.referrerPolicy=n,t.src=i,a&&(t.srcset=a),function(){e=!1}}}),[r,n,i,a]),l}((0,E.Z)({},c,{src:d,srcSet:f})),b=d||f,_=b&&"error"!==y,w=(0,E.Z)({},n,{colorDefault:!_,component:l,variant:m}),k=function(e){var t=e.classes,r={root:["root",e.variant,e.colorDefault&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,M.Z)(r,ni,t)}(w);return g=_?(0,x.jsx)(oi,(0,E.Z)({alt:i,src:d,srcSet:f,sizes:h,ownerState:w,className:k.img},c)):null!=a?a:b&&i?i[0]:(0,x.jsx)(si,{className:k.fallback}),(0,x.jsx)(ai,(0,E.Z)({as:l,ownerState:w,className:(0,u.Z)(k.root,o),ref:r},v,{children:g}))})),ci=function(e){var t=e.title,r=e.value,n=e.icon;return(0,x.jsxs)(S,{className:"c-breadcrumb u-opacity-0 u-fadein",sx:{borderRadius:"20px"},children:[(0,x.jsxs)(S,{children:[(0,x.jsx)(B,{color:"gray.light",variant:"h6",className:"u-text-tiny",children:t}),(0,x.jsx)(B,{color:"white",variant:"h5",mt:1,children:r})]}),(0,x.jsx)(li,{className:"u-avatar-secondary",variant:"rounded",children:n})]})},ui=function(){var e=ue((function(e){return e.requests})),t=ue((function(e){return e.accounts})),r=ue((function(e){return e.tickets}));return(0,x.jsxs)(yr,{item:!0,container:!0,spacing:2,children:[(0,x.jsx)(yr,{item:!0,xs:12,sm:6,md:3,children:e.isLoading?(0,x.jsx)(Kn,{sx:{height:"85px"}}):(0,x.jsx)(ci,{title:"Total Requests",value:e&&e.requests.length.toString(),icon:(0,x.jsx)(ei.Z,{sx:{fontSize:"18px"}})})}),(0,x.jsx)(yr,{item:!0,xs:12,sm:6,md:3,children:!t.isLoading&&t.accounts.length?(0,x.jsx)(ci,{title:"Total Users",value:t&&t.accounts.length.toString(),icon:(0,x.jsx)(ei.Z,{sx:{fontSize:"18px"}})}):(0,x.jsx)(Kn,{sx:{height:"85px"}})}),(0,x.jsx)(yr,{item:!0,xs:12,sm:6,md:3,children:!t.isLoading&&t.accounts.length>0?(0,x.jsx)(ci,{title:"Total Stafs",value:t.accounts.filter((function(e){return e.isAdmin})).length.toString(),icon:(0,x.jsx)(ei.Z,{sx:{fontSize:"18px"}})}):(0,x.jsx)(Kn,{sx:{height:"85px"}})}),(0,x.jsx)(yr,{item:!0,xs:12,sm:6,md:3,children:!r.isLoading&&r.tickets.length?(0,x.jsx)(ci,{title:"Total Tickets",value:r&&r.tickets.length.toString(),icon:(0,x.jsx)(ei.Z,{sx:{fontSize:"18px"}})}):(0,x.jsx)(Kn,{sx:{height:"85px"}})})]})},hi=(0,ti.Z)((0,x.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel"),di=r(9683);function fi(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var pi=r(7462);function mi(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Se(e,t)}var vi=e.createContext(null);function gi(t,r){var n=Object.create(null);return t&&e.Children.map(t,(function(e){return e})).forEach((function(t){n[t.key]=function(t){return r&&(0,e.isValidElement)(t)?r(t):t}(t)})),n}function yi(e,t,r){return null!=r[t]?r[t]:e.props[t]}function xi(t,r,n){var i=gi(t.children),a=function(e,t){function r(r){return r in t?t[r]:e[r]}e=e||{},t=t||{};var n,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var l in t){if(i[l])for(n=0;n<i[l].length;n++){var c=i[l][n];s[i[l][n]]=r(c)}s[l]=r(l)}for(n=0;n<a.length;n++)s[a[n]]=r(a[n]);return s}(r,i);return Object.keys(a).forEach((function(o){var s=a[o];if((0,e.isValidElement)(s)){var l=o in r,c=o in i,u=r[o],h=(0,e.isValidElement)(u)&&!u.props.in;!c||l&&!h?c||!l||h?c&&l&&(0,e.isValidElement)(u)&&(a[o]=(0,e.cloneElement)(s,{onExited:n.bind(null,s),in:u.props.in,exit:yi(s,"exit",t),enter:yi(s,"enter",t)})):a[o]=(0,e.cloneElement)(s,{in:!1}):a[o]=(0,e.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:yi(s,"exit",t),enter:yi(s,"enter",t)})}})),a}var bi=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},_i=function(t){function r(e,r){var n,i=(n=t.call(this,e,r)||this).handleExited.bind(Me(n));return n.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},n}mi(r,t);var n=r.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(t,r){var n,i,a=r.children,o=r.handleExited;return{children:r.firstRender?(n=t,i=o,gi(n.children,(function(t){return(0,e.cloneElement)(t,{onExited:i.bind(null,t),in:!0,appear:yi(t,"appear",n),enter:yi(t,"enter",n),exit:yi(t,"exit",n)})}))):xi(t,a,o),firstRender:!1}},n.handleExited=function(e,t){var r=gi(this.props.children);e.key in r||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var r=(0,pi.Z)({},t.children);return delete r[e.key],{children:r}})))},n.render=function(){var t=this.props,r=t.component,n=t.childFactory,i=fi(t,["component","childFactory"]),a=this.state.contextValue,o=bi(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===r?e.createElement(vi.Provider,{value:a},o):e.createElement(vi.Provider,{value:a},e.createElement(r,i,o))},r}(e.Component);_i.propTypes={},_i.defaultProps={component:"div",childFactory:function(e){return e}};var wi=_i;var ki=function(t){var r=t.className,n=t.classes,i=t.pulsate,a=void 0!==i&&i,o=t.rippleX,s=t.rippleY,l=t.rippleSize,c=t.in,h=t.onExited,d=t.timeout,f=e.useState(!1),p=(0,Z.Z)(f,2),m=p[0],v=p[1],g=(0,u.Z)(r,n.ripple,n.rippleVisible,a&&n.ripplePulsate),y={width:l,height:l,top:-l/2+s,left:-l/2+o},b=(0,u.Z)(n.child,m&&n.childLeaving,a&&n.childPulsate);return c||m||v(!0),e.useEffect((function(){if(!c&&null!=h){var e=setTimeout(h,d);return function(){clearTimeout(e)}}}),[h,c,d]),(0,x.jsx)("span",{className:g,style:y,children:(0,x.jsx)("span",{className:b})})};var Si,Ci,Ai,Ti,Ei,Mi,Ii,Pi,Ri=(0,z.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),zi=["center","classes","className"],Li=Ar(Ei||(Ei=Si||(Si=xr(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),Di=Ar(Mi||(Mi=Ci||(Ci=xr(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),Oi=Ar(Ii||(Ii=Ai||(Ai=xr(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),Fi=(0,I.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ji=(0,I.ZP)(ki,{name:"MuiTouchRipple",slot:"Ripple"})(Pi||(Pi=Ti||(Ti=xr(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Ri.rippleVisible,Li,550,(function(e){return e.theme.transitions.easing.easeInOut}),Ri.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),Ri.child,Ri.childLeaving,Di,550,(function(e){return e.theme.transitions.easing.easeInOut}),Ri.childPulsate,Oi,(function(e){return e.theme.transitions.easing.easeInOut})),Ni=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiTouchRipple"}),i=n.center,a=void 0!==i&&i,o=n.classes,s=void 0===o?{}:o,l=n.className,c=(0,T.Z)(n,zi),h=e.useState([]),d=(0,Z.Z)(h,2),p=d[0],m=d[1],v=e.useRef(0),g=e.useRef(null);e.useEffect((function(){g.current&&(g.current(),g.current=null)}),[p]);var y=e.useRef(!1),b=e.useRef(null),_=e.useRef(null),w=e.useRef(null);e.useEffect((function(){return function(){clearTimeout(b.current)}}),[]);var k=e.useCallback((function(e){var t=e.pulsate,r=e.rippleX,n=e.rippleY,i=e.rippleSize,a=e.cb;m((function(e){return[].concat((0,f.Z)(e),[(0,x.jsx)(ji,{classes:{ripple:(0,u.Z)(s.ripple,Ri.ripple),rippleVisible:(0,u.Z)(s.rippleVisible,Ri.rippleVisible),ripplePulsate:(0,u.Z)(s.ripplePulsate,Ri.ripplePulsate),child:(0,u.Z)(s.child,Ri.child),childLeaving:(0,u.Z)(s.childLeaving,Ri.childLeaving),childPulsate:(0,u.Z)(s.childPulsate,Ri.childPulsate)},timeout:550,pulsate:t,rippleX:r,rippleY:n,rippleSize:i},v.current)])})),v.current+=1,g.current=a}),[s]),S=e.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=t.pulsate,i=void 0!==n&&n,o=t.center,s=void 0===o?a||t.pulsate:o,l=t.fakeElement,c=void 0!==l&&l;if("mousedown"===(null==e?void 0:e.type)&&y.current)y.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(y.current=!0);var u,h,d,f=c?null:w.current,p=f?f.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)u=Math.round(p.width/2),h=Math.round(p.height/2);else{var m=e.touches&&e.touches.length>0?e.touches[0]:e,v=m.clientX,g=m.clientY;u=Math.round(v-p.left),h=Math.round(g-p.top)}if(s)(d=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(d+=1);else{var x=2*Math.max(Math.abs((f?f.clientWidth:0)-u),u)+2,S=2*Math.max(Math.abs((f?f.clientHeight:0)-h),h)+2;d=Math.sqrt(Math.pow(x,2)+Math.pow(S,2))}null!=e&&e.touches?null===_.current&&(_.current=function(){k({pulsate:i,rippleX:u,rippleY:h,rippleSize:d,cb:r})},b.current=setTimeout((function(){_.current&&(_.current(),_.current=null)}),80)):k({pulsate:i,rippleX:u,rippleY:h,rippleSize:d,cb:r})}}),[a,k]),C=e.useCallback((function(){S({},{pulsate:!0})}),[S]),A=e.useCallback((function(e,t){if(clearTimeout(b.current),"touchend"===(null==e?void 0:e.type)&&_.current)return _.current(),_.current=null,void(b.current=setTimeout((function(){A(e,t)})));_.current=null,m((function(e){return e.length>0?e.slice(1):e})),g.current=t}),[]);return e.useImperativeHandle(r,(function(){return{pulsate:C,start:S,stop:A}}),[C,S,A]),(0,x.jsx)(Fi,(0,E.Z)({className:(0,u.Z)(Ri.root,s.root,l),ref:w},c,{children:(0,x.jsx)(wi,{component:null,exit:!0,children:p})}))})),Bi=Ni;function Zi(e){return(0,L.Z)("MuiButtonBase",e)}var Ui,Vi=(0,z.Z)("MuiButtonBase",["root","disabled","focusVisible"]),Wi=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Gi=(0,I.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((Ui={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,i.Z)(Ui,"&.".concat(Vi.disabled),{pointerEvents:"none",cursor:"default"}),(0,i.Z)(Ui,"@media print",{colorAdjust:"exact"}),Ui)),Hi=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiButtonBase"}),i=n.action,a=n.centerRipple,o=void 0!==a&&a,s=n.children,l=n.className,c=n.component,h=void 0===c?"button":c,d=n.disabled,f=void 0!==d&&d,p=n.disableRipple,m=void 0!==p&&p,v=n.disableTouchRipple,g=void 0!==v&&v,y=n.focusRipple,b=void 0!==y&&y,_=n.LinkComponent,w=void 0===_?"a":_,k=n.onBlur,S=n.onClick,C=n.onContextMenu,A=n.onDragLeave,I=n.onFocus,R=n.onFocusVisible,z=n.onKeyDown,L=n.onKeyUp,D=n.onMouseDown,O=n.onMouseLeave,F=n.onMouseUp,j=n.onTouchEnd,N=n.onTouchMove,B=n.onTouchStart,W=n.tabIndex,G=void 0===W?0:W,H=n.TouchRippleProps,X=n.touchRippleRef,Y=n.type,q=(0,T.Z)(n,Wi),$=e.useRef(null),K=e.useRef(null),J=(0,V.Z)(K,X),Q=(0,U.Z)(),ee=Q.isFocusVisibleRef,te=Q.onFocus,re=Q.onBlur,ne=Q.ref,ie=e.useState(!1),ae=(0,Z.Z)(ie,2),oe=ae[0],se=ae[1];f&&oe&&se(!1),e.useImperativeHandle(i,(function(){return{focusVisible:function(){se(!0),$.current.focus()}}}),[]);var le=e.useState(!1),ce=(0,Z.Z)(le,2),ue=ce[0],he=ce[1];e.useEffect((function(){he(!0)}),[]);var de=ue&&!m&&!f;function fe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return(0,di.Z)((function(n){return t&&t(n),!r&&K.current&&K.current[e](n),!0}))}e.useEffect((function(){oe&&b&&!m&&ue&&K.current.pulsate()}),[m,b,oe,ue]);var pe=fe("start",D),me=fe("stop",C),ve=fe("stop",A),ge=fe("stop",F),ye=fe("stop",(function(e){oe&&e.preventDefault(),O&&O(e)})),xe=fe("start",B),be=fe("stop",j),_e=fe("stop",N),we=fe("stop",(function(e){re(e),!1===ee.current&&se(!1),k&&k(e)}),!1),ke=(0,di.Z)((function(e){$.current||($.current=e.currentTarget),te(e),!0===ee.current&&(se(!0),R&&R(e)),I&&I(e)})),Se=function(){var e=$.current;return h&&"button"!==h&&!("A"===e.tagName&&e.href)},Ce=e.useRef(!1),Ae=(0,di.Z)((function(e){b&&!Ce.current&&oe&&K.current&&" "===e.key&&(Ce.current=!0,K.current.stop(e,(function(){K.current.start(e)}))),e.target===e.currentTarget&&Se()&&" "===e.key&&e.preventDefault(),z&&z(e),e.target===e.currentTarget&&Se()&&"Enter"===e.key&&!f&&(e.preventDefault(),S&&S(e))})),Te=(0,di.Z)((function(e){b&&" "===e.key&&K.current&&oe&&!e.defaultPrevented&&(Ce.current=!1,K.current.stop(e,(function(){K.current.pulsate(e)}))),L&&L(e),S&&e.target===e.currentTarget&&Se()&&" "===e.key&&!e.defaultPrevented&&S(e)})),Ee=h;"button"===Ee&&(q.href||q.to)&&(Ee=w);var Me={};"button"===Ee?(Me.type=void 0===Y?"button":Y,Me.disabled=f):(q.href||q.to||(Me.role="button"),f&&(Me["aria-disabled"]=f));var Ie=(0,V.Z)(r,ne,$);var Pe=(0,E.Z)({},n,{centerRipple:o,component:h,disabled:f,disableRipple:m,disableTouchRipple:g,focusRipple:b,tabIndex:G,focusVisible:oe}),Re=function(e){var t=e.disabled,r=e.focusVisible,n=e.focusVisibleClassName,i=e.classes,a={root:["root",t&&"disabled",r&&"focusVisible"]},o=(0,M.Z)(a,Zi,i);return r&&n&&(o.root+=" ".concat(n)),o}(Pe);return(0,x.jsxs)(Gi,(0,E.Z)({as:Ee,className:(0,u.Z)(Re.root,l),ownerState:Pe,onBlur:we,onClick:S,onContextMenu:me,onFocus:ke,onKeyDown:Ae,onKeyUp:Te,onMouseDown:pe,onMouseLeave:ye,onMouseUp:ge,onDragLeave:ve,onTouchEnd:be,onTouchMove:_e,onTouchStart:xe,ref:Ie,tabIndex:f?-1:G,type:Y},Me,q,{children:[s,de?(0,x.jsx)(Bi,(0,E.Z)({ref:J,center:o},H)):null]}))})),Xi=Hi;function Yi(e){return(0,L.Z)("MuiChip",e)}var qi=(0,z.Z)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),$i=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],Ki=(0,I.ZP)("div",{name:"MuiChip",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState,n=r.color,a=r.iconColor,o=r.clickable,s=r.onDelete,l=r.size,c=r.variant;return[(0,i.Z)({},"& .".concat(qi.avatar),t.avatar),(0,i.Z)({},"& .".concat(qi.avatar),t["avatar".concat((0,R.Z)(l))]),(0,i.Z)({},"& .".concat(qi.avatar),t["avatarColor".concat((0,R.Z)(n))]),(0,i.Z)({},"& .".concat(qi.icon),t.icon),(0,i.Z)({},"& .".concat(qi.icon),t["icon".concat((0,R.Z)(l))]),(0,i.Z)({},"& .".concat(qi.icon),t["iconColor".concat((0,R.Z)(a))]),(0,i.Z)({},"& .".concat(qi.deleteIcon),t.deleteIcon),(0,i.Z)({},"& .".concat(qi.deleteIcon),t["deleteIcon".concat((0,R.Z)(l))]),(0,i.Z)({},"& .".concat(qi.deleteIcon),t["deleteIconColor".concat((0,R.Z)(n))]),(0,i.Z)({},"& .".concat(qi.deleteIcon),t["deleteIcon".concat((0,R.Z)(c),"Color").concat((0,R.Z)(n))]),t.root,t["size".concat((0,R.Z)(l))],t["color".concat((0,R.Z)(n))],o&&t.clickable,o&&"default"!==n&&t["clickableColor".concat((0,R.Z)(n),")")],s&&t.deletable,s&&"default"!==n&&t["deletableColor".concat((0,R.Z)(n))],t[c],t["".concat(c).concat((0,R.Z)(n))]]}})((function(e){var t,r=e.theme,n=e.ownerState,a=(0,X.Fq)(r.palette.text.primary,.26),o="light"===r.palette.mode?r.palette.grey[700]:r.palette.grey[300];return(0,E.Z)((t={maxWidth:"100%",fontFamily:r.typography.fontFamily,fontSize:r.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(r.vars||r).palette.text.primary,backgroundColor:(r.vars||r).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:r.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box"},(0,i.Z)(t,"&.".concat(qi.disabled),{opacity:(r.vars||r).palette.action.disabledOpacity,pointerEvents:"none"}),(0,i.Z)(t,"& .".concat(qi.avatar),{marginLeft:5,marginRight:-6,width:24,height:24,color:r.vars?r.vars.palette.Chip.defaultAvatarColor:o,fontSize:r.typography.pxToRem(12)}),(0,i.Z)(t,"& .".concat(qi.avatarColorPrimary),{color:(r.vars||r).palette.primary.contrastText,backgroundColor:(r.vars||r).palette.primary.dark}),(0,i.Z)(t,"& .".concat(qi.avatarColorSecondary),{color:(r.vars||r).palette.secondary.contrastText,backgroundColor:(r.vars||r).palette.secondary.dark}),(0,i.Z)(t,"& .".concat(qi.avatarSmall),{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:r.typography.pxToRem(10)}),(0,i.Z)(t,"& .".concat(qi.icon),(0,E.Z)({marginLeft:5,marginRight:-6},"small"===n.size&&{fontSize:18,marginLeft:4,marginRight:-4},n.iconColor===n.color&&(0,E.Z)({color:r.vars?r.vars.palette.Chip.defaultIconColor:o},"default"!==n.color&&{color:"inherit"}))),(0,i.Z)(t,"& .".concat(qi.deleteIcon),(0,E.Z)({WebkitTapHighlightColor:"transparent",color:r.vars?"rgba(".concat(r.vars.palette.text.primaryChannel," / 0.26)"):a,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:r.vars?"rgba(".concat(r.vars.palette.text.primaryChannel," / 0.4)"):(0,X.Fq)(a,.4)}},"small"===n.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==n.color&&{color:r.vars?"rgba(".concat(r.vars.palette[n.color].contrastTextChannel," / 0.7)"):(0,X.Fq)(r.palette[n.color].contrastText,.7),"&:hover, &:active":{color:(r.vars||r).palette[n.color].contrastText}})),t),"small"===n.size&&{height:24},"default"!==n.color&&{backgroundColor:(r.vars||r).palette[n.color].main,color:(r.vars||r).palette[n.color].contrastText},n.onDelete&&(0,i.Z)({},"&.".concat(qi.focusVisible),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.action.selectedChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.focusOpacity,"))"):(0,X.Fq)(r.palette.action.selected,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}),n.onDelete&&"default"!==n.color&&(0,i.Z)({},"&.".concat(qi.focusVisible),{backgroundColor:(r.vars||r).palette[n.color].dark}))}),(function(e){var t,r=e.theme,n=e.ownerState;return(0,E.Z)({},n.clickable&&(t={userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.action.selectedChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.hoverOpacity,"))"):(0,X.Fq)(r.palette.action.selected,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity)}},(0,i.Z)(t,"&.".concat(qi.focusVisible),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.action.selectedChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.focusOpacity,"))"):(0,X.Fq)(r.palette.action.selected,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}),(0,i.Z)(t,"&:active",{boxShadow:(r.vars||r).shadows[1]}),t),n.clickable&&"default"!==n.color&&(0,i.Z)({},"&:hover, &.".concat(qi.focusVisible),{backgroundColor:(r.vars||r).palette[n.color].dark}))}),(function(e){var t,r,n=e.theme,a=e.ownerState;return(0,E.Z)({},"outlined"===a.variant&&(t={backgroundColor:"transparent",border:n.vars?"1px solid ".concat(n.vars.palette.Chip.defaultBorder):"1px solid ".concat("light"===n.palette.mode?n.palette.grey[400]:n.palette.grey[700])},(0,i.Z)(t,"&.".concat(qi.clickable,":hover"),{backgroundColor:(n.vars||n).palette.action.hover}),(0,i.Z)(t,"&.".concat(qi.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,i.Z)(t,"& .".concat(qi.avatar),{marginLeft:4}),(0,i.Z)(t,"& .".concat(qi.avatarSmall),{marginLeft:2}),(0,i.Z)(t,"& .".concat(qi.icon),{marginLeft:4}),(0,i.Z)(t,"& .".concat(qi.iconSmall),{marginLeft:2}),(0,i.Z)(t,"& .".concat(qi.deleteIcon),{marginRight:5}),(0,i.Z)(t,"& .".concat(qi.deleteIconSmall),{marginRight:3}),t),"outlined"===a.variant&&"default"!==a.color&&(r={color:(n.vars||n).palette[a.color].main,border:"1px solid ".concat(n.vars?"rgba(".concat(n.vars.palette[a.color].mainChannel," / 0.7)"):(0,X.Fq)(n.palette[a.color].main,.7))},(0,i.Z)(r,"&.".concat(qi.clickable,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette[a.color].mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,X.Fq)(n.palette[a.color].main,n.palette.action.hoverOpacity)}),(0,i.Z)(r,"&.".concat(qi.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette[a.color].mainChannel," / ").concat(n.vars.palette.action.focusOpacity,")"):(0,X.Fq)(n.palette[a.color].main,n.palette.action.focusOpacity)}),(0,i.Z)(r,"& .".concat(qi.deleteIcon),{color:n.vars?"rgba(".concat(n.vars.palette[a.color].mainChannel," / 0.7)"):(0,X.Fq)(n.palette[a.color].main,.7),"&:hover, &:active":{color:(n.vars||n).palette[a.color].main}}),r))})),Ji=(0,I.ZP)("span",{name:"MuiChip",slot:"Label",overridesResolver:function(e,t){var r=e.ownerState.size;return[t.label,t["label".concat((0,R.Z)(r))]]}})((function(e){var t=e.ownerState;return(0,E.Z)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===t.size&&{paddingLeft:8,paddingRight:8})}));function Qi(e){return"Backspace"===e.key||"Delete"===e.key}var ea=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiChip"}),i=n.avatar,a=n.className,o=n.clickable,s=n.color,l=void 0===s?"default":s,c=n.component,h=n.deleteIcon,d=n.disabled,f=void 0!==d&&d,p=n.icon,m=n.label,v=n.onClick,g=n.onDelete,y=n.onKeyDown,b=n.onKeyUp,_=n.size,w=void 0===_?"medium":_,k=n.variant,S=void 0===k?"filled":k,C=n.tabIndex,A=n.skipFocusWhenDisabled,I=void 0!==A&&A,z=(0,T.Z)(n,$i),L=e.useRef(null),D=(0,V.Z)(L,r),O=function(e){e.stopPropagation(),g&&g(e)},F=!(!1===o||!v)||o,j=F||g?Xi:c||"div",N=(0,E.Z)({},n,{component:j,disabled:f,size:w,color:l,iconColor:e.isValidElement(p)&&p.props.color||l,onDelete:!!g,clickable:F,variant:S}),B=function(e){var t=e.classes,r=e.disabled,n=e.size,i=e.color,a=e.iconColor,o=e.onDelete,s=e.clickable,l=e.variant,c={root:["root",l,r&&"disabled","size".concat((0,R.Z)(n)),"color".concat((0,R.Z)(i)),s&&"clickable",s&&"clickableColor".concat((0,R.Z)(i)),o&&"deletable",o&&"deletableColor".concat((0,R.Z)(i)),"".concat(l).concat((0,R.Z)(i))],label:["label","label".concat((0,R.Z)(n))],avatar:["avatar","avatar".concat((0,R.Z)(n)),"avatarColor".concat((0,R.Z)(i))],icon:["icon","icon".concat((0,R.Z)(n)),"iconColor".concat((0,R.Z)(a))],deleteIcon:["deleteIcon","deleteIcon".concat((0,R.Z)(n)),"deleteIconColor".concat((0,R.Z)(i)),"deleteIcon".concat((0,R.Z)(l),"Color").concat((0,R.Z)(i))]};return(0,M.Z)(c,Yi,t)}(N),Z=j===Xi?(0,E.Z)({component:c||"div",focusVisibleClassName:B.focusVisible},g&&{disableRipple:!0}):{},U=null;g&&(U=h&&e.isValidElement(h)?e.cloneElement(h,{className:(0,u.Z)(h.props.className,B.deleteIcon),onClick:O}):(0,x.jsx)(hi,{className:(0,u.Z)(B.deleteIcon),onClick:O}));var W=null;i&&e.isValidElement(i)&&(W=e.cloneElement(i,{className:(0,u.Z)(B.avatar,i.props.className)}));var G=null;return p&&e.isValidElement(p)&&(G=e.cloneElement(p,{className:(0,u.Z)(B.icon,p.props.className)})),(0,x.jsxs)(Ki,(0,E.Z)({as:j,className:(0,u.Z)(B.root,a),disabled:!(!F||!f)||void 0,onClick:v,onKeyDown:function(e){e.currentTarget===e.target&&Qi(e)&&e.preventDefault(),y&&y(e)},onKeyUp:function(e){e.currentTarget===e.target&&(g&&Qi(e)?g(e):"Escape"===e.key&&L.current&&L.current.blur()),b&&b(e)},ref:D,tabIndex:I&&f?-1:C,ownerState:N},Z,z,{children:[W||G,(0,x.jsx)(Ji,{className:(0,u.Z)(B.label),ownerState:N,children:m}),U]}))})),ta=function(){var t=ue((function(e){return e.requests})),r=ue((function(e){return e.accounts.currentAccount})),n=(0,e.useState)(),i=(0,Z.Z)(n,2),a=i[0],o=i[1];return(0,e.useEffect)((function(){if(r.isAdmin)o(t.requests);else{var e=t.requests.filter((function(e){var t;return(null===(t=e.account)||void 0===t?void 0:t.userName)===r.userName}));o(e)}}),[r]),(0,x.jsx)(x.Fragment,{children:a&&a.length?a.map((function(e){return(0,x.jsxs)(bn,{className:"c-table__row  u-opacity-0 u-fadein ",sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,x.jsx)(An,{sx:{color:"white"},component:"th",scope:"row",children:(0,x.jsxs)(S,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,x.jsx)(li,{alt:"image",sx:{bgcolor:e.account&&e.account.color?e.account.color.hex:"gray.light"},children:e.account&&e.account.profileImage?(0,x.jsx)("img",{src:e.account&&e.account.profileImage.url}):(0,x.jsx)(B,{variant:"h4",textTransform:"capitalize",color:"white",children:e.name?e.name.charAt(0):"\ud83d\udc7b"})}),(0,x.jsxs)(S,{children:[(0,x.jsx)(B,{variant:"h6",textTransform:"capitalize",className:"u-text-small",color:"white",children:"".concat(e.name," ").concat(e.lastName)}),(0,x.jsx)(B,{variant:"h6",className:"u-text-small",color:"gray.light",children:e.mobile})]})]})}),(0,x.jsx)(An,{sx:{color:"white"},align:"left",children:(0,x.jsx)(B,{textTransform:"capitalize",variant:"h6",className:"u-text-small",color:"white",children:e.service})}),(0,x.jsx)(An,{sx:{color:"white"},align:"left",children:"solved"===e.itemStatus?(0,x.jsx)(ea,{label:"Solved",color:"success"}):(0,x.jsx)(ea,{label:"Pending",color:"primary",variant:"outlined"})}),(0,x.jsx)(An,{sx:{color:"white"},align:"left",children:e.date&&new Date(e.date).toISOString().split("T")[0]}),(0,x.jsx)(An,{children:(0,x.jsx)(Qt,{className:"u-link-primary",to:"/request/".concat(e.itemId),children:(0,x.jsx)(J,{className:"u-link-primary",component:"div",underline:"none",color:"gray.light",variant:"h6",children:"Edit"})})})]},e.itemId)})):(0,x.jsx)(bn,{className:"c-table__row u-opacity-0 u-fadein ",sx:{"&:last-child td, &:last-child th":{border:0}},children:(0,x.jsx)(An,{children:(0,x.jsx)(B,{variant:"h4",textTransform:"capitalize",color:"white",sx:{mt:2},children:"No Data Found"})})})})},ra=function(){var e=ue((function(e){return e.requests})),t=ue((function(e){return e.accounts})),r=ue((function(e){return e.tickets}));return(0,x.jsxs)(yr,{container:!0,className:"c-home",sx:{px:{xs:2,md:0}},children:[(0,x.jsx)(ui,{}),(0,x.jsxs)(yr,{item:!0,container:!0,spacing:2,xs:12,mt:2,children:[(0,x.jsx)(yr,{item:!0,xs:12,md:7,children:t.isLoading?(0,x.jsx)(Kn,{sx:{height:"386px"}}):(0,x.jsx)(nr,{})}),(0,x.jsx)(yr,{item:!0,xs:12,md:5,children:e.isLoading?(0,x.jsx)(Kn,{sx:{height:"386px"}}):(0,x.jsx)(Gr,{title:"Tickets Information",boxTopTitle:"Answered",boxTopValue:r.tickets.length.toString(),boxBottomTitle:"Not Answered",boxBottomValue:(r.tickets.length-r.totalClosedTickets).toString(),progressPercent:r.totalClosedTickets/r.tickets.length*100,progressTitle:"Total",progressDesc:"Percent"})})]}),(0,x.jsxs)(yr,{item:!0,container:!0,spacing:2,xs:12,mt:1,children:[(0,x.jsx)(yr,{item:!0,xs:12,md:7,children:e.isLoading?(0,x.jsx)(Kn,{sx:{height:"390px"}}):(0,x.jsx)(C,{className:"u-opacity-0 u-fadein",hasBackground:!1,sx:{pr:3,pl:1,pt:4,pb:1},children:(0,x.jsx)(Qn,{})})}),(0,x.jsx)(yr,{item:!0,xs:12,md:5,children:e.isLoading?(0,x.jsx)(Kn,{sx:{height:"386px"}}):(0,x.jsx)(Gr,{title:"Requests Information",boxTopTitle:"Answered",boxTopValue:e.answeredRequests.toString(),boxBottomTitle:"Not Answered",boxBottomValue:(e.requests.length-e.answeredRequests).toString(),progressPercent:e.answeredRequests/e.requests.length*100,progressTitle:"Total",progressDesc:"Percent"})})]}),(0,x.jsx)(yr,{item:!0,container:!0,xs:12,children:e.isLoading?(0,x.jsx)(Kn,{sx:{height:{xs:"450px",md:"906px"},mt:3}}):(0,x.jsx)(zn,{data:"requests",children:(0,x.jsx)(ta,{})})})]})},na=r(8326),ia=r(7541),aa=r(5246),oa=r(8243),sa=r(7898),la=[{title:"home",path:"/",icon:(0,x.jsx)(ia.Z,{})},{title:"requests",path:"/archives/requests",icon:(0,x.jsx)(aa.Z,{})},{title:"tickets",path:"/archives/tickets",icon:(0,x.jsx)(na.Z,{})},{title:"users",path:"/archives/accounts",icon:(0,x.jsx)(oa.Z,{})},{title:"Add Request",path:"/add-request",icon:(0,x.jsx)(sa.Z,{})}];function ca(){ca=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(E){l=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new C(i||[]);return n(o,"_invoke",{value:_(e,r,s)}),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(E){return{type:"throw",arg:E}}}e.wrap=c;var h={};function d(){}function f(){}function p(){}var m={};l(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(A([])));g&&g!==t&&r.call(g,a)&&(m=g);var y=p.prototype=d.prototype=Object.create(m);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(n,a,o,s){var l=u(e[n],e,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==Ee(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return T()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=w(o,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function A(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},x(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new b(c(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(y),l(y,s,"Generator"),l(y,a,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function ua(e,t,r,n,i,a,o){try{var s=e[a](o),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function ha(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){ua(a,n,i,o,s,"next",e)}function s(e){ua(a,n,i,o,s,"throw",e)}o(void 0)}))}}var da=r(2426),fa=r.n(da);function pa(e,t){return function(){return e.apply(t,arguments)}}var ma,va=Object.prototype.toString,ga=Object.getPrototypeOf,ya=(ma=Object.create(null),function(e){var t=va.call(e);return ma[t]||(ma[t]=t.slice(8,-1).toLowerCase())}),xa=function(e){return e=e.toLowerCase(),function(t){return ya(t)===e}},ba=function(e){return function(t){return typeof t===e}},_a=Array.isArray,wa=ba("undefined");var ka=xa("ArrayBuffer");var Sa=ba("string"),Ca=ba("function"),Aa=ba("number"),Ta=function(e){return null!==e&&"object"===typeof e},Ea=function(e){if("object"!==ya(e))return!1;var t=ga(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ma=xa("Date"),Ia=xa("File"),Pa=xa("Blob"),Ra=xa("FileList"),za=xa("URLSearchParams");function La(e,t){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.allOwnKeys,o=void 0!==a&&a;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),_a(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{var s,l=o?Object.getOwnPropertyNames(e):Object.keys(e),c=l.length;for(r=0;r<c;r++)s=l[r],t.call(null,e[s],s,e)}}function Da(e,t){t=t.toLowerCase();for(var r,n=Object.keys(e),i=n.length;i-- >0;)if(t===(r=n[i]).toLowerCase())return r;return null}var Oa="undefined"===typeof self?"undefined"===typeof global?void 0:global:self,Fa=function(e){return!wa(e)&&e!==Oa};var ja,Na=(ja="undefined"!==typeof Uint8Array&&ga(Uint8Array),function(e){return ja&&e instanceof ja}),Ba=xa("HTMLFormElement"),Za=function(e){var t=Object.prototype.hasOwnProperty;return function(e,r){return t.call(e,r)}}(),Ua=xa("RegExp"),Va=function(e,t){var r=Object.getOwnPropertyDescriptors(e),n={};La(r,(function(r,i){!1!==t(r,i,e)&&(n[i]=r)})),Object.defineProperties(e,n)},Wa={isArray:_a,isArrayBuffer:ka,isBuffer:function(e){return null!==e&&!wa(e)&&null!==e.constructor&&!wa(e.constructor)&&Ca(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||va.call(e)===t||Ca(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ka(e.buffer)},isString:Sa,isNumber:Aa,isBoolean:function(e){return!0===e||!1===e},isObject:Ta,isPlainObject:Ea,isUndefined:wa,isDate:Ma,isFile:Ia,isBlob:Pa,isRegExp:Ua,isFunction:Ca,isStream:function(e){return Ta(e)&&Ca(e.pipe)},isURLSearchParams:za,isTypedArray:Na,isFileList:Ra,forEach:La,merge:function e(){for(var t=Fa(this)&&this||{},r=t.caseless,n={},i=function(t,i){var a=r&&Da(n,i)||i;Ea(n[a])&&Ea(t)?n[a]=e(n[a],t):Ea(t)?n[a]=e({},t):_a(t)?n[a]=t.slice():n[a]=t},a=0,o=arguments.length;a<o;a++)arguments[a]&&La(arguments[a],i);return n},extend:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.allOwnKeys;return La(t,(function(t,n){r&&Ca(t)?e[n]=pa(t,r):e[n]=t}),{allOwnKeys:i}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,r,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:function(e,t,r,n){var i,a,o,s={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],n&&!n(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=!1!==r&&ga(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:ya,kindOfTest:xa,endsWith:function(e,t,r){e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;var n=e.indexOf(t,r);return-1!==n&&n===r},toArray:function(e){if(!e)return null;if(_a(e))return e;var t=e.length;if(!Aa(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r},forEachEntry:function(e,t){for(var r,n=(e&&e[Symbol.iterator]).call(e);(r=n.next())&&!r.done;){var i=r.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var r,n=[];null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:Ba,hasOwnProperty:Za,hasOwnProp:Za,reduceDescriptors:Va,freezeMethods:function(e){Va(e,(function(t,r){if(Ca(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;var n=e[r];Ca(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:function(e,t){var r={},n=function(e){e.forEach((function(e){r[e]=!0}))};return _a(e)?n(e):n(String(e).split(t)),r},toCamelCase:function(e){return e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:Da,global:Oa,isContextDefined:Fa,toJSONObject:function(e){var t=new Array(10);return function e(r,n){if(Ta(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[n]=r;var i=_a(r)?[]:{};return La(r,(function(t,r){var a=e(t,n+1);!wa(a)&&(i[r]=a)})),t[n]=void 0,i}}return r}(e,0)}};function Ga(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}Wa.inherits(Ga,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Wa.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Ha=Ga.prototype,Xa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){Xa[e]={value:e}})),Object.defineProperties(Ga,Xa),Object.defineProperty(Ha,"isAxiosError",{value:!0}),Ga.from=function(e,t,r,n,i,a){var o=Object.create(Ha);return Wa.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),Ga.call(o,e.message,t,r,n,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var Ya=Ga,qa=r(7472);function $a(e){return Wa.isPlainObject(e)||Wa.isArray(e)}function Ka(e){return Wa.endsWith(e,"[]")?e.slice(0,-2):e}function Ja(e,t,r){return e?e.concat(t).map((function(e,t){return e=Ka(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}var Qa=Wa.toFlatObject(Wa,{},null,(function(e){return/^is[A-Z]/.test(e)}));var eo=function(e,t,r){if(!Wa.isObject(e))throw new TypeError("target must be an object");t=t||new(qa||FormData);var n,i=(r=Wa.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Wa.isUndefined(t[e])}))).metaTokens,a=r.visitor||u,o=r.dots,s=r.indexes,l=(r.Blob||"undefined"!==typeof Blob&&Blob)&&((n=t)&&Wa.isFunction(n.append)&&"FormData"===n[Symbol.toStringTag]&&n[Symbol.iterator]);if(!Wa.isFunction(a))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Wa.isDate(e))return e.toISOString();if(!l&&Wa.isBlob(e))throw new Ya("Blob is not supported. Use a Buffer instead.");return Wa.isArrayBuffer(e)||Wa.isTypedArray(e)?l&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,r,n){var a=e;if(e&&!n&&"object"===typeof e)if(Wa.endsWith(r,"{}"))r=i?r:r.slice(0,-2),e=JSON.stringify(e);else if(Wa.isArray(e)&&function(e){return Wa.isArray(e)&&!e.some($a)}(e)||Wa.isFileList(e)||Wa.endsWith(r,"[]")&&(a=Wa.toArray(e)))return r=Ka(r),a.forEach((function(e,n){!Wa.isUndefined(e)&&null!==e&&t.append(!0===s?Ja([r],n,o):null===s?r:r+"[]",c(e))})),!1;return!!$a(e)||(t.append(Ja(n,r,o),c(e)),!1)}var h=[],d=Object.assign(Qa,{defaultVisitor:u,convertValue:c,isVisitable:$a});if(!Wa.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!Wa.isUndefined(r)){if(-1!==h.indexOf(r))throw Error("Circular reference detected in "+n.join("."));h.push(r),Wa.forEach(r,(function(r,i){!0===(!(Wa.isUndefined(r)||null===r)&&a.call(t,r,Wa.isString(i)?i.trim():i,n,d))&&e(r,n?n.concat(i):[i])})),h.pop()}}(e),t};function to(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ro(e,t){this._pairs=[],e&&eo(e,this,t)}var no=ro.prototype;no.append=function(e,t){this._pairs.push([e,t])},no.toString=function(e){var t=e?function(t){return e.call(this,t,to)}:to;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var io=ro;function ao(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function oo(e,t,r){if(!t)return e;var n,i=r&&r.encode||ao,a=r&&r.serialize;if(n=a?a(t,r):Wa.isURLSearchParams(t)?t.toString():new io(t,r).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}var so=function(){function e(){_e(this,e),this.handlers=[]}return ke(e,[{key:"use",value:function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){Wa.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),lo=so,co={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uo="undefined"!==typeof URLSearchParams?URLSearchParams:io,ho=FormData,fo=function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),po={isBrowser:!0,classes:{URLSearchParams:uo,FormData:ho,Blob:Blob},isStandardBrowserEnv:fo,protocols:["http","https","file","blob","url","data"]};var mo=function(e){function t(e,r,n,i){var a=e[i++],o=Number.isFinite(+a),s=i>=e.length;return a=!a&&Wa.isArray(n)?n.length:a,s?(Wa.hasOwnProp(n,a)?n[a]=[n[a],r]:n[a]=r,!o):(n[a]&&Wa.isObject(n[a])||(n[a]=[]),t(e,r,n[a],i)&&Wa.isArray(n[a])&&(n[a]=function(e){var t,r,n={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)n[r=i[t]]=e[r];return n}(n[a])),!o)}if(Wa.isFormData(e)&&Wa.isFunction(e.entries)){var r={};return Wa.forEachEntry(e,(function(e,n){t(function(e){return Wa.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),n,r,0)})),r}return null},vo={"Content-Type":void 0};var go={transitional:co,adapter:["xhr","http"],transformRequest:[function(e,t){var r,n=t.getContentType()||"",i=n.indexOf("application/json")>-1,a=Wa.isObject(e);if(a&&Wa.isHTMLForm(e)&&(e=new FormData(e)),Wa.isFormData(e))return i&&i?JSON.stringify(mo(e)):e;if(Wa.isArrayBuffer(e)||Wa.isBuffer(e)||Wa.isStream(e)||Wa.isFile(e)||Wa.isBlob(e))return e;if(Wa.isArrayBufferView(e))return e.buffer;if(Wa.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return eo(e,new po.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return po.isNode&&Wa.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=Wa.isFileList(e))||n.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return eo(r?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,r){if(Wa.isString(e))try{return(t||JSON.parse)(e),Wa.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||go.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(e&&Wa.isString(e)&&(r&&!this.responseType||n)){var i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw Ya.from(a,Ya.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:po.classes.FormData,Blob:po.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Wa.forEach(["delete","get","head"],(function(e){go.headers[e]={}})),Wa.forEach(["post","put","patch"],(function(e){go.headers[e]=Wa.merge(vo)}));var yo=go,xo=Wa.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bo=Symbol("internals");function _o(e){return e&&String(e).trim().toLowerCase()}function wo(e){return!1===e||null==e?e:Wa.isArray(e)?e.map(wo):String(e)}function ko(e,t,r,n){return Wa.isFunction(n)?n.call(this,t,r):Wa.isString(t)?Wa.isString(n)?-1!==t.indexOf(n):Wa.isRegExp(n)?n.test(t):void 0:void 0}var So=function(e,t){function r(e){_e(this,r),e&&this.set(e)}return ke(r,[{key:"set",value:function(e,t,r){var n=this;function i(e,t,r){var i=_o(t);if(!i)throw new Error("header name must be a non-empty string");var a=Wa.findKey(n,i);(!a||void 0===n[a]||!0===r||void 0===r&&!1!==n[a])&&(n[a||t]=wo(e))}var a=function(e,t){return Wa.forEach(e,(function(e,r){return i(e,r,t)}))};return Wa.isPlainObject(e)||e instanceof this.constructor?a(e,t):Wa.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z]+$/.test(e.trim())?a(function(e){var t,r,n,i={};return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),t=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!t||i[t]&&xo[t]||("set-cookie"===t?i[t]?i[t].push(r):i[t]=[r]:i[t]=i[t]?i[t]+", "+r:r)})),i}(e),t):null!=e&&i(t,e,r),this}},{key:"get",value:function(e,t){if(e=_o(e)){var r=Wa.findKey(this,e);if(r){var n=this[r];if(!t)return n;if(!0===t)return function(e){for(var t,r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=n.exec(e);)r[t[1]]=t[2];return r}(n);if(Wa.isFunction(t))return t.call(this,n,r);if(Wa.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=_o(e)){var r=Wa.findKey(this,e);return!(!r||t&&!ko(0,this[r],r,t))}return!1}},{key:"delete",value:function(e,t){var r=this,n=!1;function i(e){if(e=_o(e)){var i=Wa.findKey(r,e);!i||t&&!ko(0,r[i],i,t)||(delete r[i],n=!0)}}return Wa.isArray(e)?e.forEach(i):i(e),n}},{key:"clear",value:function(){return Object.keys(this).forEach(this.delete.bind(this))}},{key:"normalize",value:function(e){var t=this,r={};return Wa.forEach(this,(function(n,i){var a=Wa.findKey(r,i);if(a)return t[a]=wo(n),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=wo(n),r[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.constructor).concat.apply(e,[this].concat(r))}},{key:"toJSON",value:function(e){var t=Object.create(null);return Wa.forEach(this,(function(r,n){null!=r&&!1!==r&&(t[n]=e&&Wa.isArray(r)?r.join(", "):r)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=(0,Z.Z)(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[bo]=this[bo]={accessors:{}}).accessors,r=this.prototype;function n(e){var n=_o(e);t[n]||(!function(e,t){var r=Wa.toCamelCase(" "+t);["get","set","has"].forEach((function(n){Object.defineProperty(e,n+r,{value:function(e,r,i){return this[n].call(this,t,e,r,i)},configurable:!0})}))}(r,e),t[n]=!0)}return Wa.isArray(e)?e.forEach(n):n(e),this}}]),r}();So.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),Wa.freezeMethods(So.prototype),Wa.freezeMethods(So);var Co=So;function Ao(e,t){var r=this||yo,n=t||r,i=Co.from(n.headers),a=n.data;return Wa.forEach(e,(function(e){a=e.call(r,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function To(e){return!(!e||!e.__CANCEL__)}function Eo(e,t,r){Ya.call(this,null==e?"canceled":e,Ya.ERR_CANCELED,t,r),this.name="CanceledError"}Wa.inherits(Eo,Ya,{__CANCEL__:!0});var Mo=Eo;var Io=po.isStandardBrowserEnv?{write:function(e,t,r,n,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),Wa.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Wa.isString(n)&&o.push("path="+n),Wa.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Po(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Ro=po.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=Wa.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0};var zo=function(e,t){e=e||10;var r,n=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(s){var l=Date.now(),c=i[o];r||(r=l),n[a]=s,i[a]=l;for(var u=o,h=0;u!==a;)h+=n[u++],u%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(l-r<t)){var d=c&&l-c;return d?Math.round(1e3*h/d):void 0}}};function Lo(e,t){var r=0,n=zo(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-r,l=n(s);r=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:l||void 0,estimated:l&&o&&a<=o?(o-a)/l:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var Do="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){var n,i=e.data,a=Co.from(e.headers).normalize(),o=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(n),e.signal&&e.signal.removeEventListener("abort",n)}Wa.isFormData(i)&&po.isStandardBrowserEnv&&a.setContentType(!1);var l=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+u))}var h=Po(e.baseURL,e.url);function d(){if(l){var n=Co.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new Ya("Request failed with status code "+r.status,[Ya.ERR_BAD_REQUEST,Ya.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}((function(e){t(e),s()}),(function(e){r(e),s()}),{data:o&&"text"!==o&&"json"!==o?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:n,config:e,request:l}),l=null}}if(l.open(e.method.toUpperCase(),oo(h,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=d:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(d)},l.onabort=function(){l&&(r(new Ya("Request aborted",Ya.ECONNABORTED,e,l)),l=null)},l.onerror=function(){r(new Ya("Network Error",Ya.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||co;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(new Ya(t,n.clarifyTimeoutError?Ya.ETIMEDOUT:Ya.ECONNABORTED,e,l)),l=null},po.isStandardBrowserEnv){var f=(e.withCredentials||Ro(h))&&e.xsrfCookieName&&Io.read(e.xsrfCookieName);f&&a.set(e.xsrfHeaderName,f)}void 0===i&&a.setContentType(null),"setRequestHeader"in l&&Wa.forEach(a.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),Wa.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),o&&"json"!==o&&(l.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&l.addEventListener("progress",Lo(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",Lo(e.onUploadProgress)),(e.cancelToken||e.signal)&&(n=function(t){l&&(r(!t||t.type?new Mo(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(n),e.signal&&(e.signal.aborted?n():e.signal.addEventListener("abort",n)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);p&&-1===po.protocols.indexOf(p)?r(new Ya("Unsupported protocol "+p+":",Ya.ERR_BAD_REQUEST,e)):l.send(i||null)}))},Oo={http:null,xhr:Do};Wa.forEach(Oo,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}}));var Fo=function(e){for(var t,r,n=(e=Wa.isArray(e)?e:[e]).length,i=0;i<n&&(t=e[i],!(r=Wa.isString(t)?Oo[t.toLowerCase()]:t));i++);if(!r){if(!1===r)throw new Ya("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(Wa.hasOwnProp(Oo,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!Wa.isFunction(r))throw new TypeError("adapter is not a function");return r};function jo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Mo}function No(e){return jo(e),e.headers=Co.from(e.headers),e.data=Ao.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Fo(e.adapter||yo.adapter)(e).then((function(t){return jo(e),t.data=Ao.call(e,e.transformResponse,t),t.headers=Co.from(t.headers),t}),(function(t){return To(t)||(jo(e),t&&t.response&&(t.response.data=Ao.call(e,e.transformResponse,t.response),t.response.headers=Co.from(t.response.headers))),Promise.reject(t)}))}var Bo=function(e){return e instanceof Co?e.toJSON():e};function Zo(e,t){t=t||{};var r={};function n(e,t,r){return Wa.isPlainObject(e)&&Wa.isPlainObject(t)?Wa.merge.call({caseless:r},e,t):Wa.isPlainObject(t)?Wa.merge({},t):Wa.isArray(t)?t.slice():t}function i(e,t,r){return Wa.isUndefined(t)?Wa.isUndefined(e)?void 0:n(void 0,e,r):n(e,t,r)}function a(e,t){if(!Wa.isUndefined(t))return n(void 0,t)}function o(e,t){return Wa.isUndefined(t)?Wa.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(r,i,a){return a in t?n(r,i):a in e?n(void 0,r):void 0}var l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:function(e,t){return i(Bo(e),Bo(t),!0)}};return Wa.forEach(Object.keys(e).concat(Object.keys(t)),(function(n){var a=l[n]||i,o=a(e[n],t[n],n);Wa.isUndefined(o)&&a!==s||(r[n]=o)})),r}var Uo="1.2.0",Vo={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Vo[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var Wo={};Vo.transitional=function(e,t,r){function n(e,t){return"[Axios v1.2.0] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,i,a){if(!1===e)throw new Ya(n(i," has been removed"+(t?" in "+t:"")),Ya.ERR_DEPRECATED);return t&&!Wo[i]&&(Wo[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,a)}};var Go={assertOptions:function(e,t,r){if("object"!==typeof e)throw new Ya("options must be an object",Ya.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),i=n.length;i-- >0;){var a=n[i],o=t[a];if(o){var s=e[a],l=void 0===s||o(s,a,e);if(!0!==l)throw new Ya("option "+a+" must be "+l,Ya.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new Ya("Unknown option "+a,Ya.ERR_BAD_OPTION)}},validators:Vo},Ho=Go.validators,Xo=function(){function e(t){_e(this,e),this.defaults=t,this.interceptors={request:new lo,response:new lo}}return ke(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var r,n=t=Zo(this.defaults,t),i=n.transitional,a=n.paramsSerializer,o=n.headers;void 0!==i&&Go.assertOptions(i,{silentJSONParsing:Ho.transitional(Ho.boolean),forcedJSONParsing:Ho.transitional(Ho.boolean),clarifyTimeoutError:Ho.transitional(Ho.boolean)},!1),void 0!==a&&Go.assertOptions(a,{encode:Ho.function,serialize:Ho.function},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(r=o&&Wa.merge(o.common,o[t.method]))&&Wa.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=Co.concat(r,o);var s=[],l=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var c,u=[];this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)}));var h,d=0;if(!l){var f=[No.bind(this),void 0];for(f.unshift.apply(f,s),f.push.apply(f,u),h=f.length,c=Promise.resolve(t);d<h;)c=c.then(f[d++],f[d++]);return c}h=s.length;var p=t;for(d=0;d<h;){var m=s[d++],v=s[d++];try{p=m(p)}catch(g){v.call(this,g);break}}try{c=No.call(this,p)}catch(g){return Promise.reject(g)}for(d=0,h=u.length;d<h;)c=c.then(u[d++],u[d++]);return c}},{key:"getUri",value:function(e){return oo(Po((e=Zo(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();Wa.forEach(["delete","get","head","options"],(function(e){Xo.prototype[e]=function(t,r){return this.request(Zo(r||{},{method:e,url:t,data:(r||{}).data}))}})),Wa.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,i){return this.request(Zo(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Xo.prototype[e]=t(),Xo.prototype[e+"Form"]=t(!0)}));var Yo=Xo,qo=function(){function e(t){if(_e(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var r;this.promise=new Promise((function(e){r=e}));var n=this;this.promise.then((function(e){if(n._listeners){for(var t=n._listeners.length;t-- >0;)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},t((function(e,t,i){n.reason||(n.reason=new Mo(e,t,i),r(n.reason))}))}return ke(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t,r=new e((function(e){t=e}));return{token:r,cancel:t}}}]),e}(),$o=qo;var Ko=function e(t){var r=new Yo(t),n=pa(Yo.prototype.request,r);return Wa.extend(n,Yo.prototype,r,{allOwnKeys:!0}),Wa.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Zo(t,r))},n}(yo);Ko.Axios=Yo,Ko.CanceledError=Mo,Ko.CancelToken=$o,Ko.isCancel=To,Ko.VERSION=Uo,Ko.toFormData=eo,Ko.AxiosError=Ya,Ko.Cancel=Ko.CanceledError,Ko.all=function(e){return Promise.all(e)},Ko.spread=function(e){return function(t){return e.apply(null,t)}},Ko.isAxiosError=function(e){return Wa.isObject(e)&&!0===e.isAxiosError},Ko.AxiosHeaders=Co,Ko.formToJSON=function(e){return mo(Wa.isHTMLForm(e)?new FormData(e):e)},Ko.default=Ko;var Jo=Ko;function Qo(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function es(e){return!!e&&!!e[Vs]}function ts(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Ws}(e)||Array.isArray(e)||!!e[Us]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Us])||ls(e)||cs(e))}function rs(e,t,r){void 0===r&&(r=!1),0===ns(e)?(r?Object.keys:Gs)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function ns(e){var t=e[Vs];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:ls(e)?2:cs(e)?3:0}function is(e,t){return 2===ns(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function as(e,t){return 2===ns(e)?e.get(t):e[t]}function os(e,t,r){var n=ns(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function ss(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function ls(e){return js&&e instanceof Map}function cs(e){return Ns&&e instanceof Set}function us(e){return e.o||e.t}function hs(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Hs(e);delete t[Vs];for(var r=Gs(t),n=0;n<r.length;n++){var i=r[n],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function ds(e,t){return void 0===t&&(t=!1),ps(e)||es(e)||!ts(e)||(ns(e)>1&&(e.set=e.add=e.clear=e.delete=fs),Object.freeze(e),t&&rs(e,(function(e,t){return ds(t,!0)}),!0)),e}function fs(){Qo(2)}function ps(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function ms(e){var t=Xs[e];return t||Qo(18,e),t}function vs(e,t){Xs[e]||(Xs[e]=t)}function gs(){return Os}function ys(e,t){t&&(ms("Patches"),e.u=[],e.s=[],e.v=t)}function xs(e){bs(e),e.p.forEach(ws),e.p=null}function bs(e){e===Os&&(Os=e.l)}function _s(e){return Os={p:[],l:Os,h:e,m:!0,_:0}}function ws(e){var t=e[Vs];0===t.i||1===t.i?t.j():t.O=!0}function ks(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.g||ms("ES5").S(t,e,n),n?(r[Vs].P&&(xs(t),Qo(4)),ts(e)&&(e=Ss(t,e),t.l||As(t,e)),t.u&&ms("Patches").M(r[Vs].t,e,t.u,t.s)):e=Ss(t,r,[]),xs(t),t.u&&t.v(t.u,t.s),e!==Zs?e:void 0}function Ss(e,t,r){if(ps(t))return t;var n=t[Vs];if(!n)return rs(t,(function(i,a){return Cs(e,n,t,i,a,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return As(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=4===n.i||5===n.i?n.o=hs(n.k):n.o;rs(3===n.i?new Set(i):i,(function(t,a){return Cs(e,n,i,t,a,r)})),As(e,i,!1),r&&e.u&&ms("Patches").R(n,r,e.u,e.s)}return n.o}function Cs(e,t,r,n,i,a){if(es(i)){var o=Ss(e,i,a&&t&&3!==t.i&&!is(t.D,n)?a.concat(n):void 0);if(os(r,n,o),!es(o))return;e.m=!1}if(ts(i)&&!ps(i)){if(!e.h.F&&e._<1)return;Ss(e,i),t&&t.A.l||As(e,i)}}function As(e,t,r){void 0===r&&(r=!1),e.h.F&&e.m&&ds(t,r)}function Ts(e,t){var r=e[Vs];return(r?us(r):e)[t]}function Es(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Ms(e){e.P||(e.P=!0,e.l&&Ms(e.l))}function Is(e){e.o||(e.o=hs(e.t))}function Ps(e,t,r){var n=ls(t)?ms("MapSet").N(t,r):cs(t)?ms("MapSet").T(t,r):e.g?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:gs(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=n,a=Ys;r&&(i=[n],a=qs);var o=Proxy.revocable(i,a),s=o.revoke,l=o.proxy;return n.k=l,n.j=s,l}(t,r):ms("ES5").J(t,r);return(r?r.A:gs()).p.push(n),n}function Rs(e){return es(e)||Qo(22,e),function e(t){if(!ts(t))return t;var r,n=t[Vs],i=ns(t);if(n){if(!n.P&&(n.i<4||!ms("ES5").K(n)))return n.t;n.I=!0,r=zs(t,i),n.I=!1}else r=zs(t,i);return rs(r,(function(t,i){n&&as(n.t,t)===i||os(r,t,e(i))})),3===i?new Set(r):r}(e)}function zs(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return hs(e)}function Ls(){function e(e,t){var r=i[e];return r?r.enumerable=t:i[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[Vs];return Ys.get(t,e)},set:function(t){var r=this[Vs];Ys.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Vs];if(!i.P)switch(i.i){case 5:n(i)&&Ms(i);break;case 4:r(i)&&Ms(i)}}}function r(e){for(var t=e.t,r=e.k,n=Gs(r),i=n.length-1;i>=0;i--){var a=n[i];if(a!==Vs){var o=t[a];if(void 0===o&&!is(t,a))return!0;var s=r[a],l=s&&s[Vs];if(l?l.t!==o:!ss(s,o))return!0}}var c=!!t[Vs];return n.length!==Gs(t).length+(c?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var n=0;n<t.length;n++)if(!t.hasOwnProperty(n))return!0;return!1}var i={};vs("ES5",{J:function(t,r){var n=Array.isArray(t),i=function(t,r){if(t){for(var n=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(n,""+i,e(i,!0));return n}var a=Hs(r);delete a[Vs];for(var o=Gs(a),s=0;s<o.length;s++){var l=o[s];a[l]=e(l,t||!!a[l].enumerable)}return Object.create(Object.getPrototypeOf(r),a)}(n,t),a={i:n?5:4,A:r?r.A:gs(),P:!1,I:!1,D:{},l:r,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Vs,{value:a,writable:!0}),i},S:function(e,r,i){i?es(r)&&r[Vs].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[Vs];if(r){var i=r.t,a=r.k,o=r.D,s=r.i;if(4===s)rs(a,(function(t){t!==Vs&&(void 0!==i[t]||is(i,t)?o[t]||e(a[t]):(o[t]=!0,Ms(r)))})),rs(i,(function(e){void 0!==a[e]||is(a,e)||(o[e]=!1,Ms(r))}));else if(5===s){if(n(r)&&(Ms(r),o.length=!0),a.length<i.length)for(var l=a.length;l<i.length;l++)o[l]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var u=Math.min(a.length,i.length),h=0;h<u;h++)a.hasOwnProperty(h)||(o[h]=!0),void 0===o[h]&&e(a[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}var Ds,Os,Fs="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),js="undefined"!=typeof Map,Ns="undefined"!=typeof Set,Bs="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Zs=Fs?Symbol.for("immer-nothing"):((Ds={})["immer-nothing"]=!0,Ds),Us=Fs?Symbol.for("immer-draftable"):"__$immer_draftable",Vs=Fs?Symbol.for("immer-state"):"__$immer_state",Ws=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Gs="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Hs=Object.getOwnPropertyDescriptors||function(e){var t={};return Gs(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},Xs={},Ys={get:function(e,t){if(t===Vs)return e;var r=us(e);if(!is(r,t))return function(e,t,r){var n,i=Es(t,r);return i?"value"in i?i.value:null===(n=i.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!ts(n)?n:n===Ts(e.t,t)?(Is(e),e.o[t]=Ps(e.A.h,n,e)):n},has:function(e,t){return t in us(e)},ownKeys:function(e){return Reflect.ownKeys(us(e))},set:function(e,t,r){var n=Es(us(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=Ts(us(e),t),a=null==i?void 0:i[Vs];if(a&&a.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(ss(r,i)&&(void 0!==r||is(e.t,t)))return!0;Is(e),Ms(e)}return e.o[t]===r&&"number"!=typeof r&&(void 0!==r||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Ts(e.t,t)||t in e.t?(e.D[t]=!1,Is(e),Ms(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=us(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){Qo(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Qo(12)}},qs={};rs(Ys,(function(e,t){qs[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),qs.deleteProperty=function(e,t){return qs.set.call(this,e,t,void 0)},qs.set=function(e,t,r){return Ys.set.call(this,e[0],t,r,e[0])};var $s=function(){function e(e){var t=this;this.g=Bs,this.F=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var i=r;r=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(o))}))}}var o;if("function"!=typeof r&&Qo(6),void 0!==n&&"function"!=typeof n&&Qo(7),ts(e)){var s=_s(t),l=Ps(t,e,void 0),c=!0;try{o=r(l),c=!1}finally{c?xs(s):bs(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return ys(s,n),ks(e,s)}),(function(e){throw xs(s),e})):(ys(s,n),ks(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=r(e))&&(o=e),o===Zs&&(o=void 0),t.F&&ds(o,!0),n){var u=[],h=[];ms("Patches").M(e,o,u,h),n(u,h)}return o}Qo(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(i))}))};var n,i,a=t.produce(e,r,(function(e,t){n=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,n,i]})):[a,n,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){ts(e)||Qo(8),es(e)&&(e=Rs(e));var t=_s(this),r=Ps(this,e,void 0);return r[Vs].C=!0,bs(t),r},t.finishDraft=function(e,t){var r=(e&&e[Vs]).A;return ys(r,t),ks(void 0,r)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!Bs&&Qo(20),this.g=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var i=ms("Patches").$;return es(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Ks=new $s,Js=Ks.produce,Qs=(Ks.produceWithPatches.bind(Ks),Ks.setAutoFreeze.bind(Ks),Ks.setUseProxies.bind(Ks),Ks.applyPatches.bind(Ks),Ks.createDraft.bind(Ks),Ks.finishDraft.bind(Ks),Js);function el(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var tl="function"===typeof Symbol&&Symbol.observable||"@@observable",rl=function(){return Math.random().toString(36).substring(7).split("").join(".")},nl={INIT:"@@redux/INIT"+rl(),REPLACE:"@@redux/REPLACE"+rl(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+rl()}};function il(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function al(e,t,r){var n;if("function"===typeof t&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(el(0));if("function"===typeof t&&"undefined"===typeof r&&(r=t,t=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error(el(1));return r(al)(e,t)}if("function"!==typeof e)throw new Error(el(2));var i=e,a=t,o=[],s=o,l=!1;function c(){s===o&&(s=o.slice())}function u(){if(l)throw new Error(el(3));return a}function h(e){if("function"!==typeof e)throw new Error(el(4));if(l)throw new Error(el(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(el(6));t=!1,c();var r=s.indexOf(e);s.splice(r,1),o=null}}}function d(e){if(!il(e))throw new Error(el(7));if("undefined"===typeof e.type)throw new Error(el(8));if(l)throw new Error(el(9));try{l=!0,a=i(a,e)}finally{l=!1}for(var t=o=s,r=0;r<t.length;r++){(0,t[r])()}return e}function f(e){if("function"!==typeof e)throw new Error(el(10));i=e,d({type:nl.REPLACE})}function p(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(el(11));function r(){e.next&&e.next(u())}return r(),{unsubscribe:t(r)}}})[tl]=function(){return this},e}return d({type:nl.INIT}),(n={dispatch:d,subscribe:h,getState:u,replaceReducer:f})[tl]=p,n}function ol(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];0,"function"===typeof e[i]&&(r[i]=e[i])}var a,o=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if("undefined"===typeof r(void 0,{type:nl.INIT}))throw new Error(el(12));if("undefined"===typeof r(void 0,{type:nl.PROBE_UNKNOWN_ACTION()}))throw new Error(el(13))}))}(r)}catch(s){a=s}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var n=!1,i={},s=0;s<o.length;s++){var l=o[s],c=r[l],u=e[l],h=c(u,t);if("undefined"===typeof h){t&&t.type;throw new Error(el(14))}i[l]=h,n=n||h!==u}return(n=n||o.length!==Object.keys(e).length)?i:e}}function sl(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function ll(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(el(15))},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return n=sl.apply(void 0,a)(r.dispatch),o(o({},r),{},{dispatch:n})}}}function cl(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(i){return"function"===typeof i?i(r,n,e):t(i)}}}}var ul=cl();ul.withExtraArgument=cl;var hl=ul,dl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fl=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},pl=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},ml=Object.defineProperty,vl=Object.defineProperties,gl=Object.getOwnPropertyDescriptors,yl=Object.getOwnPropertySymbols,xl=Object.prototype.hasOwnProperty,bl=Object.prototype.propertyIsEnumerable,_l=function(e,t,r){return t in e?ml(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},wl=function(e,t){for(var r in t||(t={}))xl.call(t,r)&&_l(e,r,t[r]);if(yl)for(var n=0,i=yl(t);n<i.length;n++){r=i[n];bl.call(t,r)&&_l(e,r,t[r])}return e},kl=function(e,t){return vl(e,gl(t))},Sl=function(e,t,r){return new Promise((function(n,i){var a=function(e){try{s(r.next(e))}catch(t){i(t)}},o=function(e){try{s(r.throw(e))}catch(t){i(t)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(a,o)};s((r=r.apply(e,t)).next())}))},Cl="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?sl:sl.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Al(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return t===r}var Tl=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return dl(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,pl([void 0],e[0].concat(this)))):new(t.bind.apply(t,pl([void 0],e.concat(this))))},t}(Array);function El(e){return ts(e)?Qs(e,(function(){})):e}function Ml(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,r=void 0===t||t,n=(e.immutableCheck,e.serializableCheck,new Tl);r&&(!function(e){return"boolean"===typeof e}(r)?n.push(hl.withExtraArgument(r.extraArgument)):n.push(hl));0;return n}(e)}}function Il(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var i=t.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return wl(wl({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function Pl(e){var t,r={},n=[],i={addCase:function(e,t){var n="string"===typeof e?e:e.type;if(n in r)throw new Error("addCase cannot be called with two reducers for the same action type");return r[n]=t,i},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[r,n,t]}function Rl(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r,n="function"==typeof e.initialState?e.initialState:El(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},s={},l={};function c(){var t="function"===typeof e.extraReducers?Pl(e.extraReducers):[e.extraReducers],r=t[0],i=void 0===r?{}:r,a=t[1],o=void 0===a?[]:a,l=t[2],c=void 0===l?void 0:l,u=wl(wl({},i),s);return function(e,t,r,n){void 0===r&&(r=[]);var i,a="function"===typeof t?Pl(t):[t,r,n],o=a[0],s=a[1],l=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return El(e())};else{var c=El(e);i=function(){return c}}function u(e,t){void 0===e&&(e=i());var r=pl([o[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===r.filter((function(e){return!!e})).length&&(r=[l]),r.reduce((function(e,r){if(r){var n;if(es(e))return void 0===(n=r(e,t))?e:n;if(ts(e))return Qs(e,(function(e){return r(e,t)}));if(void 0===(n=r(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e}),e)}return u.getInitialState=i,u}(n,(function(e){for(var t in u)e.addCase(t,u[t]);for(var r=0,n=o;r<n.length;r++){var i=n[r];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return a.forEach((function(e){var r,n,a=i[e],c=t+"/"+e;"reducer"in a?(r=a.reducer,n=a.prepare):r=a,o[e]=r,s[c]=r,l[e]=n?Il(c,n):Il(c)})),{name:t,reducer:function(e,t){return r||(r=c()),r(e,t)},actions:l,caseReducers:o,getInitialState:function(){return r||(r=c()),r.getInitialState()}}}var zl=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},Ll=["name","message","stack","code"],Dl=function(e,t){this.payload=e,this.meta=t},Ol=function(e,t){this.payload=e,this.meta=t},Fl=function(e){if("object"===typeof e&&null!==e){for(var t={},r=0,n=Ll;r<n.length;r++){var i=n[r];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,r){var n=Il(e+"/fulfilled",(function(e,t,r,n){return{payload:e,meta:kl(wl({},n||{}),{arg:r,requestId:t,requestStatus:"fulfilled"})}})),i=Il(e+"/pending",(function(e,t,r){return{payload:void 0,meta:kl(wl({},r||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=Il(e+"/rejected",(function(e,t,n,i,a){return{payload:i,error:(r&&r.serializeError||Fl)(e||"Rejected"),meta:kl(wl({},a||{}),{arg:n,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(s,l,c){var u,h=(null==r?void 0:r.idGenerator)?r.idGenerator(e):zl(),d=new o,f=new Promise((function(e,t){return d.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:u||"Aborted"})}))})),p=!1;function m(e){p&&(u=e,d.abort())}var v=function(){return Sl(this,null,(function(){var o,u,v,g,y;return fl(this,(function(x){switch(x.label){case 0:return x.trys.push([0,4,,5]),g=null==(o=null==r?void 0:r.condition)?void 0:o.call(r,e,{getState:l,extra:c}),null===(b=g)||"object"!==typeof b||"function"!==typeof b.then?[3,2]:[4,g];case 1:g=x.sent(),x.label=2;case 2:if(!1===g)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return p=!0,s(i(h,e,null==(u=null==r?void 0:r.getPendingMeta)?void 0:u.call(r,{requestId:h,arg:e},{getState:l,extra:c}))),[4,Promise.race([f,Promise.resolve(t(e,{dispatch:s,getState:l,extra:c,requestId:h,signal:d.signal,abort:m,rejectWithValue:function(e,t){return new Dl(e,t)},fulfillWithValue:function(e,t){return new Ol(e,t)}})).then((function(t){if(t instanceof Dl)throw t;return t instanceof Ol?n(t.payload,h,e,t.meta):n(t,h,e)}))])];case 3:return v=x.sent(),[3,5];case 4:return y=x.sent(),v=y instanceof Dl?a(null,h,e,y.payload,y.meta):a(y,h,e),[3,5];case 5:return r&&!r.dispatchConditionRejection&&a.match(v)&&v.meta.condition||s(v),[2,v]}var b}))}))}();return Object.assign(v,{abort:m,requestId:h,arg:e,unwrap:function(){return v.then(jl)}})}}),{pending:i,rejected:a,fulfilled:n,typePrefix:e})}e.withTypes=e}();function jl(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var Nl="listenerMiddleware";Il(Nl+"/add"),Il(Nl+"/removeAll"),Il(Nl+"/remove");var Bl;"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:r.g);Ls();var Zl=Rl({name:"accounts",initialState:{accounts:[],isLoading:!0,lastFetch:null,totalAccounts:0,error:"",currentAccount:{}},reducers:{FETCH_DATA:function(e){e.isLoading=!0},FETCH_DATA_SUCCESSFUL:function(e,t){e.isLoading=!1,e.accounts=t.payload,e.lastFetch=Date.now()},FETCH_DATA_FAILED:function(e,t){e.isLoading=!1,e.accounts=[],e.error=t.payload},GET_TOTAL_ACCOUNTS:function(e){e.totalAccounts=e.accounts.length},DELETE_ACCOUNT:function(e,t){var r=e.accounts.filter((function(e){return e.itemId!==t.payload}));e.accounts=r},CREATE_ACCOUNT:function(e,t){e.accounts.push(t.payload)},SELECT_CURRENT_USER:function(e,t){e.currentAccount=e.accounts[t.payload]},REMOVE_CURRENT_USER:function(e){e.currentAccount={}},REMOVE_ACCOUNT_HISTORY:function(e){e.accounts=[],e.isLoading=!0,e.lastFetch=null,e.totalAccounts=0,e.error="",e.currentAccount={}},SET_LOADING_STATUS:function(e,t){e.isLoading=t.payload},ADD_ACCOUNT_TICKET:function(e,t){var r;null===(r=e.currentAccount.tickets)||void 0===r||r.push(o({},t.payload))}}}),Ul=Zl.actions,Vl=Ul.FETCH_DATA,Wl=Ul.FETCH_DATA_SUCCESSFUL,Gl=Ul.FETCH_DATA_FAILED,Hl=Ul.GET_TOTAL_ACCOUNTS,Xl=Ul.DELETE_ACCOUNT,Yl=Ul.CREATE_ACCOUNT,ql=Ul.SELECT_CURRENT_USER,$l=Ul.REMOVE_CURRENT_USER,Kl=(Ul.REMOVE_ACCOUNT_HISTORY,Ul.SET_LOADING_STATUS),Jl=Ul.ADD_ACCOUNT_TICKET,Ql=Zl.reducer,ec=Rl({name:"entities",initialState:{isOpen:!1,httpErrors:{},isHttpCalling:!1,currentAccount:{}},reducers:{TOGGLE_MENU:function(e){e.isOpen=!e.isOpen},ADD_SERVER_ERROR:function(e,t){e.httpErrors=t.payload},CHANGE_HTTP_CALL_STATUS:function(e,t){e.isHttpCalling=t.payload}}}),tc=ec.actions,rc=tc.TOGGLE_MENU,nc=tc.ADD_SERVER_ERROR,ic=tc.CHANGE_HTTP_CALL_STATUS,ac=ec.reducer,oc=Rl({name:"requests",initialState:{requests:[],isLoading:!0,lastFetch:null,totalRequests:0,answeredRequests:0,pendingRequests:0,error:""},reducers:{FETCH_DATA:function(e){e.isLoading=!0},FETCH_DATA_SUCCESSFUL:function(e,t){e.isLoading=!1,e.requests=t.payload,e.lastFetch=Date.now()},FETCH_DATA_FAILED:function(e,t){e.isLoading=!1,e.requests=[],e.error=t.payload},GET_ANSWERED_REQUESTS:function(e){e.answeredRequests=e.requests.filter((function(e){return"solved"===e.itemStatus})).length},PEND_REQUEST:function(e,t){var r=e.requests.findIndex((function(e){return e.itemId===t.payload}));e.requests[r]=o(o({},e.requests[r]),{},{itemStatus:"pending"})},SOLVE_REQUEST:function(e,t){var r=e.requests.findIndex((function(e){return e.itemId===t.payload}));e.requests[r]=o(o({},e.requests[r]),{},{itemStatus:"solved"})},REVIEW_REQUEST:function(e,t){var r=e.requests.findIndex((function(e){return e.itemId===t.payload}));e.requests[r]=o(o({},e.requests[r]),{},{itemStatus:"reviewing"})},CREATE_REQUEST:function(e,t){e.requests.push(t.payload)},REMOVE_REQUESTS_HISTORY:function(e){e.requests=[],e.isLoading=!0,e.lastFetch=null,e.totalRequests=0,e.answeredRequests=0,e.pendingRequests=0,e.error=""}}}),sc=oc.actions,lc=sc.FETCH_DATA,cc=sc.FETCH_DATA_SUCCESSFUL,uc=sc.FETCH_DATA_FAILED,hc=sc.GET_ANSWERED_REQUESTS,dc=sc.PEND_REQUEST,fc=sc.SOLVE_REQUEST,pc=sc.REVIEW_REQUEST,mc=sc.CREATE_REQUEST,vc=(sc.REMOVE_REQUESTS_HISTORY,oc.reducer),gc=Rl({name:"tickets",initialState:{tickets:[],isLoading:!0,totalClosedTickets:0,lastFetch:0,error:""},reducers:{FETCH_DATA:function(e){e.isLoading=!0},FETCH_DATA_SUCCESSFUL:function(e,t){e.tickets=t.payload,e.isLoading=!1},FETCH_DATA_FAILED:function(e,t){e.error=t.payload,e.isLoading=!1},GET_ALL_CLOSED_TICKETS:function(e){e.totalClosedTickets=e.tickets.filter((function(e){return e.isClose})).length},PEND_TICKET:function(e,t){var r=e.tickets.findIndex((function(e){return e.itemId===t.payload}));e.tickets[r]=o(o({},e.tickets[r]),{},{isClose:!0})},DELETE_TICKET:function(e,t){e.tickets=e.tickets.filter((function(e){return e.itemId!==t.payload}))},REMOVE_TICKETS_HISTORY:function(e){e.tickets=[],e.isLoading=!0,e.totalClosedTickets=0,e.lastFetch=0,e.error=""},ADD_TICKET:function(e,t){e.tickets=o(o({},e.tickets),t.payload)}}}),yc=gc.actions,xc=yc.FETCH_DATA,bc=yc.FETCH_DATA_SUCCESSFUL,_c=yc.FETCH_DATA_FAILED,wc=yc.GET_ALL_CLOSED_TICKETS,kc=yc.PEND_TICKET,Sc=yc.DELETE_TICKET,Cc=(yc.REMOVE_TICKETS_HISTORY,yc.ADD_TICKET),Ac=function(e){var t,r=Ml(),n=e||{},i=n.reducer,a=void 0===i?void 0:i,o=n.middleware,s=void 0===o?r():o,l=n.devTools,c=void 0===l||l,u=n.preloadedState,h=void 0===u?void 0:u,d=n.enhancers,f=void 0===d?void 0:d;if("function"===typeof a)t=a;else{if(!Al(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=ol(a)}var p=s;"function"===typeof p&&(p=p(r));var m=ll.apply(void 0,p),v=sl;c&&(v=Cl(wl({trace:!1},"object"===typeof c&&c)));var g=[m];return Array.isArray(f)?g=pl([m],f):"function"===typeof f&&(g=f(g)),al(t,h,v.apply(void 0,g))}({reducer:ol({entities:ac,accounts:Ql,requests:vc,tickets:gc.reducer}),middleware:function(e){return[].concat((0,f.Z)(e()),[hl])}});function Tc(e,t){if(null==e)return{};var r,n,i=fi(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Ec=["theme","type"],Mc=["delay","staleId"],Ic=function(e){return"number"==typeof e&&!isNaN(e)},Pc=function(e){return"string"==typeof e},Rc=function(e){return"function"==typeof e},zc=function(e){return Pc(e)||Rc(e)?e:null},Lc=function(t){return(0,e.isValidElement)(t)||Pc(t)||Rc(t)||Ic(t)};function Dc(t){var r=t.enter,n=t.exit,i=t.appendPosition,a=void 0!==i&&i,o=t.collapse,s=void 0===o||o,l=t.collapseDuration,c=void 0===l?300:l;return function(t){var i=t.children,o=t.position,l=t.preventExitTransition,u=t.done,h=t.nodeRef,d=t.isIn,p=a?"".concat(r,"--").concat(o):r,m=a?"".concat(n,"--").concat(o):n,v=(0,e.useRef)(0);return(0,e.useLayoutEffect)((function(){var e,t=h.current,r=p.split(" "),n=function e(n){var i;n.target===h.current&&(t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",e),t.removeEventListener("animationcancel",e),0===v.current&&"animationcancel"!==n.type&&(i=t.classList).remove.apply(i,(0,f.Z)(r)))};(e=t.classList).add.apply(e,(0,f.Z)(r)),t.addEventListener("animationend",n),t.addEventListener("animationcancel",n)}),[]),(0,e.useEffect)((function(){var e=h.current,t=function t(){e.removeEventListener("animationend",t),s?function(e,t,r){void 0===r&&(r=300);var n=e.scrollHeight,i=e.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=n+"px",i.transition="all ".concat(r,"ms"),requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,r)}))}))}(e,u,c):u()};d||(l?t():(v.current=1,e.className+=" ".concat(m),e.addEventListener("animationend",t)))}),[d]),e.createElement(e.Fragment,null,i)}}function Oc(e,t){return{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}}var Fc={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var r=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,r),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){var t=arguments,r=this;this.list.has(e)&&this.list.get(e).forEach((function(n){var i=setTimeout((function(){n.apply(void 0,(0,f.Z)([].slice.call(t,1)))}),0);r.emitQueue.has(e)||r.emitQueue.set(e,[]),r.emitQueue.get(e).push(i)}))}},jc=function(t){var r=t.theme,n=t.type,i=Tc(t,Ec);return e.createElement("svg",o({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===r?"currentColor":"var(--toastify-icon-color-".concat(n,")")},i))},Nc={info:function(t){return e.createElement(jc,o({},t),e.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return e.createElement(jc,o({},t),e.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return e.createElement(jc,o({},t),e.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return e.createElement(jc,o({},t),e.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return e.createElement("div",{className:"Toastify__spinner"})}};function Bc(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function Zc(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function Uc(t){var r=t.closeToast,n=t.theme,i=t.ariaLabel,a=void 0===i?"close":i;return e.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(n),type:"button",onClick:function(e){e.stopPropagation(),r(e)},"aria-label":a},e.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},e.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Vc(t){var r=t.delay,n=t.isRunning,a=t.closeToast,s=t.type,l=void 0===s?"default":s,c=t.hide,h=t.className,d=t.style,f=t.controlledProgress,p=t.progress,m=t.rtl,v=t.isIn,g=t.theme,y=c||f&&0===p,x=o(o({},d),{},{animationDuration:"".concat(r,"ms"),animationPlayState:n?"running":"paused",opacity:y?0:1});f&&(x.transform="scaleX(".concat(p,")"));var b=(0,u.Z)("Toastify__progress-bar",f?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(g),"Toastify__progress-bar--".concat(l),{"Toastify__progress-bar--rtl":m}),_=Rc(h)?h({rtl:m,type:l,defaultClassName:b}):(0,u.Z)(b,h);return e.createElement("div",(0,i.Z)({role:"progressbar","aria-hidden":y?"true":"false","aria-label":"notification timer",className:_,style:x},f&&p>=1?"onTransitionEnd":"onAnimationEnd",f&&p<1?null:function(){v&&a()}))}var Wc=function(t){var r=function(t){var r=(0,e.useState)(!1),n=(0,Z.Z)(r,2),i=n[0],a=n[1],o=(0,e.useState)(!1),s=(0,Z.Z)(o,2),l=s[0],c=s[1],u=(0,e.useRef)(null),h=(0,e.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,d=(0,e.useRef)(t),f=t.autoClose,p=t.pauseOnHover,m=t.closeToast,v=t.onClick,g=t.closeOnClick;function y(e){if(t.draggable){"touchstart"===e.nativeEvent.type&&e.nativeEvent.preventDefault(),h.didMove=!1,document.addEventListener("mousemove",w),document.addEventListener("mouseup",k),document.addEventListener("touchmove",w),document.addEventListener("touchend",k);var r=u.current;h.canCloseOnClick=!0,h.canDrag=!0,h.boundingRect=r.getBoundingClientRect(),r.style.transition="",h.x=Bc(e.nativeEvent),h.y=Zc(e.nativeEvent),"x"===t.draggableDirection?(h.start=h.x,h.removalDistance=r.offsetWidth*(t.draggablePercent/100)):(h.start=h.y,h.removalDistance=r.offsetHeight*(80===t.draggablePercent?1.5*t.draggablePercent:t.draggablePercent/100))}}function x(e){if(h.boundingRect){var r=h.boundingRect,n=r.top,i=r.bottom,a=r.left,o=r.right;"touchend"!==e.nativeEvent.type&&t.pauseOnHover&&h.x>=a&&h.x<=o&&h.y>=n&&h.y<=i?_():b()}}function b(){a(!0)}function _(){a(!1)}function w(e){var r=u.current;h.canDrag&&r&&(h.didMove=!0,i&&_(),h.x=Bc(e),h.y=Zc(e),h.delta="x"===t.draggableDirection?h.x-h.start:h.y-h.start,h.start!==h.x&&(h.canCloseOnClick=!1),r.style.transform="translate".concat(t.draggableDirection,"(").concat(h.delta,"px)"),r.style.opacity=""+(1-Math.abs(h.delta/h.removalDistance)))}function k(){document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",k),document.removeEventListener("touchmove",w),document.removeEventListener("touchend",k);var e=u.current;if(h.canDrag&&h.didMove&&e){if(h.canDrag=!1,Math.abs(h.delta)>h.removalDistance)return c(!0),void t.closeToast();e.style.transition="transform 0.2s, opacity 0.2s",e.style.transform="translate".concat(t.draggableDirection,"(0)"),e.style.opacity="1"}}(0,e.useEffect)((function(){d.current=t})),(0,e.useEffect)((function(){return u.current&&u.current.addEventListener("d",b,{once:!0}),Rc(t.onOpen)&&t.onOpen((0,e.isValidElement)(t.children)&&t.children.props),function(){var t=d.current;Rc(t.onClose)&&t.onClose((0,e.isValidElement)(t.children)&&t.children.props)}}),[]),(0,e.useEffect)((function(){return t.pauseOnFocusLoss&&(document.hasFocus()||_(),window.addEventListener("focus",b),window.addEventListener("blur",_)),function(){t.pauseOnFocusLoss&&(window.removeEventListener("focus",b),window.removeEventListener("blur",_))}}),[t.pauseOnFocusLoss]);var S={onMouseDown:y,onTouchStart:y,onMouseUp:x,onTouchEnd:x};return f&&p&&(S.onMouseEnter=_,S.onMouseLeave=b),g&&(S.onClick=function(e){v&&v(e),h.canCloseOnClick&&m()}),{playToast:b,pauseToast:_,isRunning:i,preventExitTransition:l,toastRef:u,eventHandlers:S}}(t),n=r.isRunning,i=r.preventExitTransition,a=r.toastRef,s=r.eventHandlers,l=t.closeButton,c=t.children,h=t.autoClose,d=t.onClick,f=t.type,p=t.hideProgressBar,m=t.closeToast,v=t.transition,g=t.position,y=t.className,x=t.style,b=t.bodyClassName,_=t.bodyStyle,w=t.progressClassName,k=t.progressStyle,S=t.updateId,C=t.role,A=t.progress,T=t.rtl,E=t.toastId,M=t.deleteToast,I=t.isIn,P=t.isLoading,R=t.iconOut,z=t.closeOnClick,L=t.theme,D=(0,u.Z)("Toastify__toast","Toastify__toast-theme--".concat(L),"Toastify__toast--".concat(f),{"Toastify__toast--rtl":T},{"Toastify__toast--close-on-click":z}),O=Rc(y)?y({rtl:T,position:g,type:f,defaultClassName:D}):(0,u.Z)(D,y),F=!!A||!h,j={closeToast:m,type:f,theme:L},N=null;return!1===l||(N=Rc(l)?l(j):(0,e.isValidElement)(l)?(0,e.cloneElement)(l,j):Uc(j)),e.createElement(v,{isIn:I,done:M,position:g,preventExitTransition:i,nodeRef:a},e.createElement("div",o(o({id:E,onClick:d,className:O},s),{},{style:x,ref:a}),e.createElement("div",o(o({},I&&{role:C}),{},{className:Rc(b)?b({type:f}):(0,u.Z)("Toastify__toast-body",b),style:_}),null!=R&&e.createElement("div",{className:(0,u.Z)("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!P})},R),e.createElement("div",null,c)),N,e.createElement(Vc,o(o({},S&&!F?{key:"pb-".concat(S)}:{}),{},{rtl:T,theme:L,delay:h,isRunning:n,isIn:I,closeToast:m,hide:p,type:f,style:k,className:w,controlledProgress:F,progress:A||0}))))},Gc=function(e,t){return void 0===t&&(t=!1),{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},Hc=Dc(Gc("bounce",!0)),Xc=(Dc(Gc("slide",!0)),Dc(Gc("zoom")),Dc(Gc("flip")),(0,e.forwardRef)((function(t,r){var n=function(t){var r=(0,e.useReducer)((function(e){return e+1}),0),n=(0,Z.Z)(r,2)[1],i=(0,e.useState)([]),a=(0,Z.Z)(i,2),s=a[0],l=a[1],c=(0,e.useRef)(null),u=(0,e.useRef)(new Map).current,h=function(e){return-1!==s.indexOf(e)},d=(0,e.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:h,getToast:function(e){return u.get(e)}}).current;function p(e){var t=e.containerId;!d.props.limit||t&&d.containerId!==t||(d.count-=d.queue.length,d.queue=[])}function m(e){l((function(t){return null==e?[]:t.filter((function(t){return t!==e}))}))}function v(){var e=d.queue.shift();y(e.toastContent,e.toastProps,e.staleId)}function g(t,r){var i=r.delay,a=r.staleId,s=Tc(r,Mc);if(Lc(t)&&!function(e){return!c.current||d.props.enableMultiContainer&&e.containerId!==d.props.containerId||u.has(e.toastId)&&null==e.updateId}(s)){var l=s.toastId,h=s.updateId,f=s.data,p=d.props,g=function(){return m(l)},x=null==h;x&&d.count++;var b,_,w=o(o(o({},p),{},{style:p.toastStyle,key:d.toastKey++},s),{},{toastId:l,updateId:h,data:f,closeToast:g,isIn:!1,className:zc(s.className||p.toastClassName),bodyClassName:zc(s.bodyClassName||p.bodyClassName),progressClassName:zc(s.progressClassName||p.progressClassName),autoClose:!s.isLoading&&(b=s.autoClose,_=p.autoClose,!1===b||Ic(b)&&b>0?b:_),deleteToast:function(){var e=Oc(u.get(l),"removed");u.delete(l),Fc.emit(4,e);var t=d.queue.length;if(d.count=null==l?d.count-d.displayedToast:d.count-1,d.count<0&&(d.count=0),t>0){var r=null==l?d.props.limit:1;if(1===t||1===r)d.displayedToast++,v();else{var i=r>t?t:r;d.displayedToast=i;for(var a=0;a<i;a++)v()}}else n()}});w.iconOut=function(t){var r=t.theme,n=t.type,i=t.isLoading,a=t.icon,o=null,s={theme:r,type:n};return!1===a||(Rc(a)?o=a(s):(0,e.isValidElement)(a)?o=(0,e.cloneElement)(a,s):Pc(a)||Ic(a)?o=a:i?o=Nc.spinner():function(e){return e in Nc}(n)&&(o=Nc[n](s))),o}(w),Rc(s.onOpen)&&(w.onOpen=s.onOpen),Rc(s.onClose)&&(w.onClose=s.onClose),w.closeButton=p.closeButton,!1===s.closeButton||Lc(s.closeButton)?w.closeButton=s.closeButton:!0===s.closeButton&&(w.closeButton=!Lc(p.closeButton)||p.closeButton);var k=t;(0,e.isValidElement)(t)&&!Pc(t.type)?k=(0,e.cloneElement)(t,{closeToast:g,toastProps:w,data:f}):Rc(t)&&(k=t({closeToast:g,toastProps:w,data:f})),p.limit&&p.limit>0&&d.count>p.limit&&x?d.queue.push({toastContent:k,toastProps:w,staleId:a}):Ic(i)?setTimeout((function(){y(k,w,a)}),i):y(k,w,a)}}function y(e,t,r){var n=t.toastId;r&&u.delete(r);var i={content:e,props:t};u.set(n,i),l((function(e){return[].concat((0,f.Z)(e),[n]).filter((function(e){return e!==r}))})),Fc.emit(4,Oc(i,null==i.props.updateId?"added":"updated"))}return(0,e.useEffect)((function(){return d.containerId=t.containerId,Fc.cancelEmit(3).on(0,g).on(1,(function(e){return c.current&&m(e)})).on(5,p).emit(2,d),function(){u.clear(),Fc.emit(3,d)}}),[]),(0,e.useEffect)((function(){d.props=t,d.isToastActive=h,d.displayedToast=s.length})),{getToastToRender:function(e){var r=new Map,n=Array.from(u.values());return t.newestOnTop&&n.reverse(),n.forEach((function(e){var t=e.props.position;r.has(t)||r.set(t,[]),r.get(t).push(e)})),Array.from(r,(function(t){return e(t[0],t[1])}))},containerRef:c,isToastActive:h}}(t),i=n.getToastToRender,a=n.containerRef,s=n.isToastActive,l=t.className,c=t.style,h=t.rtl,d=t.containerId;function p(e){var t=(0,u.Z)("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":h});return Rc(l)?l({position:e,rtl:h,defaultClassName:t}):(0,u.Z)(t,zc(l))}return(0,e.useEffect)((function(){r&&(r.current=a.current)}),[]),e.createElement("div",{ref:a,className:"Toastify",id:d},i((function(t,r){var n=r.length?o({},c):o(o({},c),{},{pointerEvents:"none"});return e.createElement("div",{className:p(t),style:n,key:"container-".concat(t)},r.map((function(t,n){var i=t.content,a=t.props;return e.createElement(Wc,o(o({},a),{},{isIn:s(a.toastId),style:o(o({},a.style),{},{"--nth":n+1,"--len":r.length}),key:"toast-".concat(a.key)}),i)})))})))})));Xc.displayName="ToastContainer",Xc.defaultProps={position:"top-right",transition:Hc,autoClose:5e3,closeButton:Uc,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var Yc,qc=new Map,$c=[],Kc=1;function Jc(){return""+Kc++}function Qc(e){return e&&(Pc(e.toastId)||Ic(e.toastId))?e.toastId:Jc()}function eu(e,t){return qc.size>0?Fc.emit(0,e,t):$c.push({content:e,options:t}),t.toastId}function tu(e,t){return o(o({},t),{},{type:t&&t.type||e,toastId:Qc(t)})}function ru(e){return function(t,r){return eu(t,tu(e,r))}}function nu(e,t){return eu(e,tu("default",t))}nu.loading=function(e,t){return eu(e,tu("default",o({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},nu.promise=function(e,t,r){var n,i=t.pending,a=t.error,s=t.success;i&&(n=Pc(i)?nu.loading(i,r):nu.loading(i.render,o(o({},r),i)));var l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null,delay:100},c=function(e,t,i){if(null!=t){var a=o(o(o({type:e},l),r),{},{data:i}),s=Pc(t)?{render:t}:t;return n?nu.update(n,o(o({},a),s)):nu(s.render,o(o({},a),s)),i}nu.dismiss(n)},u=Rc(e)?e():e;return u.then((function(e){return c("success",s,e)})).catch((function(e){return c("error",a,e)})),u},nu.success=ru("success"),nu.info=ru("info"),nu.error=ru("error"),nu.warning=ru("warning"),nu.warn=nu.warning,nu.dark=function(e,t){return eu(e,tu("default",o({theme:"dark"},t)))},nu.dismiss=function(e){qc.size>0?Fc.emit(1,e):$c=$c.filter((function(t){return null!=e&&t.options.toastId!==e}))},nu.clearWaitingQueue=function(e){return void 0===e&&(e={}),Fc.emit(5,e)},nu.isActive=function(e){var t=!1;return qc.forEach((function(r){r.isToastActive&&r.isToastActive(e)&&(t=!0)})),t},nu.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var r=function(e,t){var r=t.containerId,n=qc.get(r||Yc);return n&&n.getToast(e)}(e,t);if(r){var n=r.props,i=r.content,a=o(o(o({},n),t),{},{toastId:t.toastId||e,updateId:Jc()});a.toastId!==e&&(a.staleId=e);var s=a.render||i;delete a.render,eu(s,a)}}),0)},nu.done=function(e){nu.update(e,{progress:1})},nu.onChange=function(e){return Fc.on(4,e),function(){Fc.off(4,e)}},nu.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},nu.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Fc.on(2,(function(e){Yc=e.containerId||e,qc.set(Yc,e),$c.forEach((function(e){Fc.emit(0,e.content,e.options)})),$c=[]})).on(3,(function(e){qc.delete(e.containerId||e),0===qc.size&&Fc.off(0).off(1).off(5)}));var iu=Ac,au=Jo.create({baseURL:"https://api-eu-central-1-shared-euc1-02.hygraph.com/v2/clayawfwp14ev01ukh88s2hit/master",headers:{}}),ou=Jo.create({baseURL:"https://vision-dashboard.onrender.com/getUserData"});au.interceptors.request.use((function(e){return iu.dispatch(ic(!0)),e}),(function(e){return setTimeout((function(){iu.dispatch(ic(!1))}),1e3),Promise.reject(e)})),au.interceptors.response.use((function(e){return setTimeout((function(){iu.dispatch(ic(!1))}),1e3),e}),(function(e){setTimeout((function(){iu.dispatch(ic(!1))}),1e3),iu.dispatch(nc({status:e.response.status,message:e.response.message}));var t="/#/server-error";return e.response&&e.response.status>=400&&e.response.status<500?400===e.response.status?nu.error("Bad Request - The request could not be understood by the server"):401===e.response.status?nu.error("Unauthorized - The request requires user authentication"):403===e.response.status?nu.error("Forbidden - The server understood the request, but is refusing to fulfill it."):404===e.response.status?nu.error("Not Found - The requested resource could not be found."):429===e.response.status?nu.error("Too Many Requests"):nu.error(e.message):(nu.error("An unexpected error occurrred."),window.location.pathname!==t&&(window.location.href=t)),Promise.reject(e)}));var su={get:au.get,post:au.post,put:au.put,delete:au.delete,githubGet:ou.get,githubPost:ou.post,githubPut:ou.put,githubDelete:ou.delete},lu=new(ke((function e(){_e(this,e),this.fetchTicketsQuery=function(){return JSON.stringify({query:"{\n              tickets {\n                itemId\n                isPending\n                isClose\n                id\n                hasReply\n                description\n                date\n                subject\n                responses\n                accounts {\n                  ... on Account {\n                    id\n                    email\n                    name\n                    lastName\n                    isAdmin\n                    color {\n                      hex\n                    }\n                    profileImage {\n                      url\n                    }\n                  }\n                }\n              }\n            }"})},this.updateResponseQuery=function(e,t){return JSON.stringify({query:'mutation updateTicket($data: Json) {\n                        updateTicket(data: { responses : $data } , where: {itemId: "'.concat(e,'"}) {\n                            id\n                        }\n                    }'),variables:{data:t}})},this.updateIsCloseQuery=function(e,t){return JSON.stringify({query:"mutation {\n                        updateTicket(data: { isClose : ".concat(t,' } , where: {itemId: "').concat(e,'"}) {\n                            id\n                        }\n                    }\n            ')})},this.deleteTicketQuery=function(e){return JSON.stringify({query:'mutation {\n                deleteTicket(where: {itemId: "'.concat(e,'"}) {\n                    id\n                }\n            }')})},this.publsishTicketQuery=function(e){return JSON.stringify({query:'\n                mutation MyMutation {\n                    publishTicket(where: {itemId: "'.concat(e,'"}) { id }\n                } \n            ')})},this.addTicketQuery=function(e,t){return console.log("addTicketQuery :",t),console.log("accountId :",e),t.accounts&&delete t.accounts,JSON.stringify({query:"\n                mutation createTicket(\n                    $itemId: String!,\n                    $description: String!,\n                    $date: DateTime!,\n                    $hasReply: Boolean!,\n                    $isClose: Boolean!,\n                    $isPending: Boolean!,\n                    $accountId: String,\n                    $responses: Json,\n                    $subject: String,\n                ) {\n                    createTicket(\n                        data: {\n                            itemId: $itemId,\n                            description: $description,\n                            date: $date,\n                            hasReply: $hasReply,\n                            isClose: $isClose,\n                            isPending: $isPending,\n                            accounts: { connect: { Account: { itemId: $accountId } } },\n                            responses: $responses,\n                            subject: $subject,\n                        }   \n                    ) {\n                        itemId\n                        isPending\n                        isClose\n                        id\n                        hasReply\n                        description\n                        date\n                        subject\n                        responses\n                        accounts {\n                          ... on Account {\n                            id\n                            email\n                            name\n                            lastName\n                            isAdmin\n                            color {\n                              hex\n                            }\n                            profileImage {\n                              url\n                            }\n                          }\n                        }\n                    }\n                }",variables:{itemId:t.itemId,description:t.description,date:t.date,hasReply:t.hasReply,isClose:t.isClose,isPending:t.isPending,accountId:e,responses:t.responses,subject:t.subject}})}}))),cu=new(ke((function e(){_e(this,e),this.fetchUsers=function(){return JSON.stringify({query:"{\n                requests {\n                    id\n                    itemId\n                    itemStatus\n                    lastName\n                    location\n                    mobile\n                    name\n                    phone\n                    service\n                    date\n                    gender\n                    address\n                    description\n                    location\n                    account {\n                        itemId\n                        name\n                        lastName\n                        userName\n                        isAdmin\n                        color {\n                            hex\n                        }\n                        profileImage {\n                            url\n                        }\n                    }\n                }\n            }"})},this.createUser=function(e){return JSON.stringify({query:"\n                mutation createUser(\n                    $itemId: String!\n                    $name: String!\n                    $lastName: String!\n                    $email: String!\n                    $userName: String!\n                    $password: String!\n                    $isAdmin: Boolean!\n                    $bio: String\n                    $location: String\n                    $itemRequests: Json\n                    $answeredRequests: Json\n                    $itemTickets: Json\n                    $answeredTickets: Json\n                    $color: ColorInput\n                    $profileImage: AssetCreateOneInlineInput\n                    $tickets: TicketCreateManyInlineInput\n                    $requests: AccountRequestsCreateManyInlineInput\n                    ) {\n                    createRequest(\n                        data:{\n                            itemId: $itemId\n                            name: $name\n                            lastName: $lastName\n                            email: $email\n                            userName: $userName\n                            password: $password\n                            isAdmin: $isAdmin\n                            bio: $bio\n                            location: $location\n                            itemRequests: $itemRequests\n                            answeredRequests: $answeredRequests\n                            itemTickets: $itemTickets\n                            answeredTickets: $answeredTickets\n                            color: $color\n                            profileImage: $profileImage\n                            tickets: $tickets\n                            requests: $requests\n                        }\n                    ) \n                    {\n                        id\n                    }\n                }\n            ",variables:{itemId:e.itemId,name:e.name,lastName:e.lastName,email:e.email,userName:e.userName,password:e.password,isAdmin:e.isAdmin,bio:e.bio,location:e.location,answeredTickets:e.answeredTickets,answeredRequests:e.answeredRequests,itemTickets:e.itemTickets,itemRequests:e.itemRequests,createdAt:e.createdAt,color:e.color,profileImage:e.profileImage}})},this.pendRequestQuery=function(e){return JSON.stringify({query:'\n                mutation {\n                    updateRequest(data: {itemStatus: "pending"}, where: {itemId: "'.concat(e,'"} ) {\n                        id\n                    }\n                }\n            ')})},this.solveRequestQuery=function(e){return JSON.stringify({query:'\n                mutation MyMutation {\n                    updateRequest(data: {itemStatus: "solved"}, where: {itemId: "'.concat(e,'"} ) {\n                        id\n                    }\n                }\n            ')})},this.reviewRequestQuery=function(e){return JSON.stringify({query:'\n            mutation MyMutation {\n                updateRequest(data: {itemStatus: "reviewing"}, where: {itemId: "'.concat(e,'"} ) {\n                    id\n                }\n            }\n        ')})},this.publishRequestQuery=function(e){return JSON.stringify({query:'\n                mutation MyMutation {\n                    publishRequest(where: {itemId: "'.concat(e,'"}) { itemId }\n                }          \n            ')})},this.createRequest=function(e,t){return JSON.stringify({query:'\n            mutation createRequest(\n                $itemId: String!,\n                $name: String!,\n                $lastName: String!,\n                $gender: Boolean!,\n                $mobile: String!,\n                $phone: String,\n                $address: String!,\n                $description: String,\n                $service: String!,\n                $date: DateTime!,\n                $itemStatus: String!,\n                ) {\n                createRequest (\n                    data: {\n                        itemId: $itemId,\n                        name: $name,\n                        lastName: $lastName,\n                        gender: $gender,\n                        mobile: $mobile,\n                        phone: $phone,\n                        address: $address,\n                        description: $description,\n                        service: $service,\n                        date: $date,\n                        itemStatus: $itemStatus,\n                        account: {connect: {itemId: "'.concat(e,'"} \n                    }\n            }) {\n              itemId\n            }}'),variables:{itemId:t.itemId,name:t.name,lastName:t.lastName,gender:t.gender,mobile:t.mobile,phone:t.phone,address:t.address,description:t.description,service:t.service,date:t.date,itemStatus:t.itemStatus}})}}))),uu=new(ke((function e(){_e(this,e),this.fetchAccountsQuery=function(){return JSON.stringify({query:"{\n              accounts {\n                id\n                name\n                lastName\n                userName\n                email\n                itemId\n                isAdmin\n                createdAt\n                bio\n                answeredTickets\n                answeredRequests\n                location {latitude , longitude}\n                color {\n                  hex\n                }\n                profileImage {\n                  url\n                }\n                tickets {\n                  itemId\n                  isPending\n                  isClose\n                  id\n                  hasReply\n                  description\n                  date\n                  subject\n                  responses\n                }\n                requests {\n                  ... on Request {\n                    id\n                    itemId\n                    itemStatus\n                    lastName\n                    location\n                    mobile\n                    name\n                    phone\n                    service\n                    date\n                    gender\n                    address\n                    description\n                    location\n                  }\n                }\n              }\n            }"})},this.publishAccountQuery=function(e){return JSON.stringify({query:'\n              mutation MyMutation {\n                  publishAccount(where: {itemId: "'.concat(e,'"}) {\n                      id\n                  }\n              }\n            ')})},this.updateAccountImageQuery=function(e,t){return JSON.stringify({query:'\n              mutation {\n                  updateAccount(data: {profileImage: {connect: {id: "'.concat(e,'"}}}, where: {itemId: "').concat(t,'"}) {\n                      id\n                  }\n              }\n            ')})},this.updateAccountQuery=function(e,t){var r,n;return JSON.stringify({query:'\n                  mutation updateAccount(\n                      $bio: String,\n                      $color: Hex,\n                      $email: String,\n                      $name: String,\n                      $lastName: String,\n                      $password: String,\n                      $latitude: Float!,\n                      $longitude: Float!,\n                    ) {\n                      updateAccount(\n                        data: {\n                          bio: $bio,\n                          color: {hex: $color},\n                          email: $email,\n                          name: $name,\n                          lastName: $lastName,\n                          password: $password,\n                          location : {latitude: $latitude, longitude: $longitude}\n                        },\n                        where: {itemId: "'.concat(e,'"}\n                        ) { \n                          id\n                      }\n                  }\n            '),variables:{bio:t.bio,color:t.color,email:t.email,name:t.name,lastName:t.lastName,password:t.password,latitude:null===(r=t.location)||void 0===r?void 0:r.latitude,longitude:null===(n=t.location)||void 0===n?void 0:n.longitude}})},this.updateAccountPermission=function(e,t){return JSON.stringify({query:'\n              mutation updateAccount {\n                updateAccount(where: {itemId: "'.concat(e,'"}, data: {isAdmin: ').concat(t,"}) { \n                  itemId\n                }\n              }")})},this.deleteAccountQuery=function(e){return JSON.stringify({query:'\n              mutation MyMutation2 {\n                deleteAccount(where: {itemId: "'.concat(e,'"}) {\n                  itemId\n                }\n              }')})},this.createAccountQuery=function(e){return JSON.stringify({query:"\n              mutation createAccount(\n                $itemId: String!,\n                $name: String!, \n                $lastName: String!,\n                $email: String!,\n                $userName: String!,\n                $password: String!,\n                $isAdmin: Boolean!\n              ) {\n              createAccount(\n                data: {\n                  itemId: $itemId,\n                  name: $name,\n                  lastName: $lastName,\n                  email: $email,\n                  userName: $userName,\n                  password: $password,\n                  isAdmin: $isAdmin\n                }\n              ) {\n                itemId,\n                name,\n                lastName,\n                email,\n                userName,\n                password,\n                isAdmin,\n                bio,\n                location {latitude , longitude},\n                answeredTickets,\n                answeredRequests,\n                tickets {\n                  itemId\n                  isPending\n                  isClose\n                  id\n                  hasReply\n                  description\n                  date\n                  subject\n                  responses\n                }\n                itemTickets,\n                requests {\n                  ... on Request {\n                      id\n                      itemId\n                      itemStatus\n                      lastName\n                      location\n                      mobile\n                      name\n                      phone\n                      service\n                      date\n                      gender\n                      address\n                      description\n                      location\n                  }\n                }\n                itemRequests,\n                color {\n                    hex\n                },\n                profileImage {\n                    url\n                }\n              }\n            }",variables:{itemId:e.itemId,name:e.name,lastName:e.lastName,email:e.email,userName:e.userName,password:e.password,isAdmin:!1}})},this.createGithubAccountQuery=function(e){return JSON.stringify({query:"\n              mutation createAccount (\n                $itemId: String!,\n                $name: String!, \n                $lastName: String!,\n                $userName: String!,\n                $isAdmin: Boolean!\n              ) {\n              createAccount(\n                data: {\n                  itemId: $itemId,\n                  name: $name,\n                  lastName: $lastName,\n                  userName: $userName,\n                  isAdmin: $isAdmin\n                }\n              ) {\n                itemId,\n                name,\n                lastName,\n                email,\n                userName,\n                isAdmin,\n                bio,\n                location { latitude , longitude },\n                answeredTickets,\n                answeredRequests,\n                tickets {\n                  itemId\n                  isPending\n                  isClose\n                  id\n                  hasReply\n                  description\n                  date\n                  subject\n                  responses\n                }\n                itemTickets,\n                requests {\n                  ... on Request {\n                      id\n                      itemId\n                      itemStatus\n                      lastName\n                      location\n                      mobile\n                      name\n                      phone\n                      service\n                      date\n                      gender\n                      address\n                      description\n                      location\n                  }\n                }\n                itemRequests,\n                color {\n                    hex\n                },\n                profileImage {\n                    url\n                }\n              }\n            }",variables:{itemId:e.itemId,name:e.name,lastName:e.lastName,email:e.email,userName:e.userName,password:e.password,isAdmin:!1}})},this.loginAccountQuery=function(e){return JSON.stringify({query:"\n              query ($email: String!, $password: String!) {\n                accountsConnection(where: {email: $email, password: $password}) {\n                  aggregate {\n                    count\n                  }\n                }\n              }",variables:{email:e.email,password:e.password}})}}))),hu=new(ke((function e(){_e(this,e),this.publishAssetQuery=function(e){return JSON.stringify({query:'mutation {\n                        publishAsset(where: {id: "'.concat(e,'" }) {\n                            id\n                        }\n                    }')})}}))),du=function(){return function(e,t){var r=t().tickets.lastFetch;fa()().diff(fa()(r),"minutes")<10||xu.fetchTickets()}},fu=function(e,t){return function(r,n){n().tickets.tickets.find((function(t){return t.itemId===e})).isClose===t?nu.info("Ticket Already Is ".concat(t?"Closed":"Open")):xu.updateIsClose(e,t)}},pu=function(){return function(e,t){var r=t().requests.lastFetch;fa()().diff(fa()(r),"minutes")<10||xu.fetchRequests()}},mu=function(e,t){return function(r){"pending"!==t?xu.pendRequest(e):nu.info("Request Already Is Pending")}},vu=function(e,t){return function(r){"reviewing"!==t?xu.reviewRequest(e):nu.info("Request Already Is Reviewing")}},gu=Ac,yu=ke((function e(){var t=this;_e(this,e),this.publishRequest=function(){var e=ha(ca().mark((function e(t){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su.post("",cu.publishRequestQuery(t)).then((function(){nu.success("Request Published Successfuly"),gu.dispatch(pu())})).catch((function(e){nu.error("Publish Request Failed"),console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.publishTicket=function(){var e=ha(ca().mark((function e(t,r,n){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su.post("",lu.publsishTicketQuery(t)).then((function(){nu.success(r),gu.dispatch(du())})).catch((function(e){nu.error(n),console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),this.fetchTickets=function(){gu.dispatch(xc()),su.post("",lu.fetchTicketsQuery()).then((function(e){var t=e.data.data;gu.dispatch(bc(t.tickets)),gu.dispatch(wc())})).catch((function(e){var t=e.message;gu.dispatch(_c(t))}))},this.fetchRequests=function(){gu.dispatch(lc()),su.post("",cu.fetchUsers()).then((function(e){var t=e.data.data;gu.dispatch(cc(t.requests)),gu.dispatch(hc())})).catch((function(e){var t=e.message;gu.dispatch(uc(t))}))},this.fetchAccounts=ha(ca().mark((function e(){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gu.dispatch(Vl()),e.next=3,su.post("",uu.fetchAccountsQuery()).then((function(e){var t=e.data.data;gu.dispatch(Wl(t.accounts)),gu.dispatch(Hl())})).catch((function(e){var t=e.message;gu.dispatch(Gl(t))}));case 3:case"end":return e.stop()}}),e)}))),this.publishAccount=function(){var e=ha(ca().mark((function e(r){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su.post("",uu.publishAccountQuery(r)).then((function(){nu.success("Account Published"),t.fetchAccounts()})).catch((function(e){nu.error(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createUser=function(e){su.post("/upload",e.profileImage).then((function(e){return e})).catch((function(e){return console.log(e)}))},this.pendRequest=function(e){su.post("",cu.pendRequestQuery(e)).then((function(){gu.dispatch(dc(e)),gu.dispatch(hc()),t.publishRequest(e)})).catch((function(e){return nu.error(e.message)}))},this.solveRequest=function(e){su.post("",cu.solveRequestQuery(e)).then((function(){t.publishRequest(e).then((function(){gu.dispatch(fc(e)),gu.dispatch(hc())}))})).catch((function(e){return nu.error(e.message)}))},this.reviewRequest=function(e){su.post("",cu.reviewRequestQuery(e)).then((function(){t.publishRequest(e).then((function(){gu.dispatch(pc(e)),gu.dispatch(hc())}))})).catch((function(e){return nu.error(e.message)}))},this.updateTicketResponse=function(e,r){su.post("",lu.updateResponseQuery(e,r)).then((function(){nu.success("Answer Submitted"),t.publishTicket(e,"Ticket Published","Ticket Publish Failed")})).catch((function(){nu.error("There Was an error for submitting answer")}))},this.updateIsClose=function(e,r){su.post("",lu.updateIsCloseQuery(e,r)).then((function(){nu.success("Ticket Updated"),t.publishTicket(e,"Ticket Published","Ticket Publish Failed").then((function(){gu.dispatch(kc(e))}))})).catch((function(){return nu.error("Ticket Did Not Close")}))},this.deleteTicket=function(){var e=ha(ca().mark((function e(t){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su.post("",lu.deleteTicketQuery(t)).then((function(){gu.dispatch(Sc(t)),nu.success("Ticket Has Been Deleted"),window.history.go(-1)})).catch((function(){nu.error("Failed Deleting Ticket")}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addTicket=function(){var e=ha(ca().mark((function e(r,n){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su.post("",lu.addTicketQuery(r,n)).then((function(e){return nu.success("Ticket Has Been Created"),t.publishTicket(e.data.data.createTicket.itemId,"Ticket Published","Error Publishing Ticket"),t.publishAccount(r),e})).catch((function(e){return nu.error("There was and error creating ticket"),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.updateProfileImage=function(){var e=ha(ca().mark((function e(r,n,i){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su.post("/upload",n).then((function(e){var n=e.data.id;su.post("",hu.publishAssetQuery(n)).then((function(){su.post("",uu.updateAccountImageQuery(n,r)).then(ha(ca().mark((function e(){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.publishAccount(r);case 2:gu.dispatch(t.fetchAccounts()),i(!1);case 4:case"end":return e.stop()}}),e)})))).catch((function(){i(!1)}))})).catch((function(e){console.log("PublishAsset Failed")}))})).catch((function(e){return console.log("Create Asset error",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),this.updateAccount=function(e,r){r&&su.post("",uu.updateAccountQuery(e,r)).then((function(r){t.publishAccount(e),nu.success("Information Submitted Successful")})).catch((function(e){console.log(e)}))},this.updateAccountPermission=function(){var e=ha(ca().mark((function e(r,n){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su.post("",uu.updateAccountPermission(r,n)).then(function(){var e=ha(ca().mark((function e(n){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.publishAccount(r);case 2:t.fetchAccounts();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.deleteAccount=function(){var e=ha(ca().mark((function e(t){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su.post("",uu.deleteAccountQuery(t)).then((function(e){nu.success("Account Deleted"),window.history.go(-1)})).catch((function(e){console.log(e),nu.error("Delete Account Failed")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createRequest=function(){var e=ha(ca().mark((function e(r,n,i,a){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su.post("",cu.createRequest(r,n)).then((function(e){var r=e.data;nu.success("Submitted Successfully"),gu.dispatch(mc(r)),t.publishRequest(r.data.createRequest.itemId).then((function(){i(a||"/#/")}))})).catch((function(e){console.log("Error"),nu.error("Create Request Failed")}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,i){return e.apply(this,arguments)}}(),this.createAccount=function(){var e=ha(ca().mark((function e(r){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su.post("",uu.createAccountQuery(r)).then((function(e){return nu.success("Create Account Successful"),t.publishAccount(e.data.data.createAccount.itemId),e})).catch((function(e){return e.response.data.errors&&nu.error(e.response.data.errors[0].message),console.log(e.response.data.errors[0].message),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createGithubAccount=function(){var e=ha(ca().mark((function e(r){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su.post("",uu.createGithubAccountQuery(r)).then((function(e){return nu.success("Create Account Successful"),t.publishAccount(e.data.data.createAccount.itemId),e})).catch((function(e){return nu.error(e.messsage),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.loginAccount=function(){var e=ha(ca().mark((function e(t){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su.post("",uu.loginAccountQuery(t)).then((function(e){return e.data.data.accountsConnection.aggregate.count>0})).catch((function(e){return console.log(e),nu.error("Ann Error Occourd"),!1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.handleGoogleLogin=function(){var e=ha(ca().mark((function e(t){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return JSON.stringify({token:t.clientId}),e.next=3,fetch("/api/google-login",{method:"POST",body:JSON.stringify({token:t.clientId}),headers:{"Content-Type":"application/json"}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),xu=new yu,bu=function(e,t){return function(){var r=ha(ca().mark((function r(n,i){var a;return ca().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n(ic(!0)),-1===(a=i().accounts.accounts.findIndex((function(t){return t.email===e.email})))){r.next=9;break}return r.next=5,xu.loginAccount(e);case 5:r.sent?(n(ql(a)),n(ic(!1)),t("/#/")):(n(ic(!1)),nu.error("Falied Login")),r.next=11;break;case 9:nu.error("No email found"),n(ic(!1));case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},_u=function(){return function(e){e($l())}},wu=function(){var e=ue((function(e){return e.accounts.currentAccount})),t=be(),r=Mt(),n=function(){localStorage.removeItem("accessToken"),localStorage.removeItem("loginService"),t(_u()),r("".concat("/#/","login"))};return(0,x.jsx)(S,{mt:10,pb:6,px:1,children:(0,x.jsxs)(S,{sx:{display:"flex",justifyContent:"space-between",px:{xs:3,md:0},flexWrap:"wrap",gap:3},children:[(0,x.jsxs)(B,{variant:"h6",className:"u-text-small",color:"white",sx:{fontWeight:400,letterSpacing:.5},textTransform:"capitalize",children:[(new Date).getFullYear()," - Made by Nima Prmdi featuring with \ud83d\udc08 (Open-Source GPL-V3)"]}),(0,x.jsx)(S,{sx:{display:"flex",gap:2},children:(0,x.jsxs)(S,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:2},children:[e&&Object.keys(e).length>0?(0,x.jsx)(J,{textTransform:"capitalize",className:"u-link-primary",component:"a",underline:"none",color:"white",onClick:function(){return n()},sx:{cursor:"pointer"},children:"Logout"}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(J,{onClick:function(){return n()},textTransform:"capitalize",className:"u-link-primary",component:"div",underline:"none",color:"white",children:"Login"}),(0,x.jsx)(J,{onClick:function(){return n()},textTransform:"capitalize",className:"u-link-primary",component:"div",underline:"none",color:"white",children:"Register"})]}),la.map((function(t,r){return Object.keys(e).length?(0,x.jsx)(Qt,{className:"u-link-primary",to:"".concat(t.path),children:(0,x.jsx)(J,{textTransform:"capitalize",className:"u-link-primary",component:"div",href:"#",underline:"none",color:"white",children:t.title})},"footer-route-".concat(r)):null}))]})})]})})};var ku=e.createContext({});function Su(e){return(0,L.Z)("MuiList",e)}(0,z.Z)("MuiList",["root","padding","dense","subheader"]);var Cu=["children","className","component","dense","disablePadding","subheader"],Au=(0,I.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})((function(e){var t=e.ownerState;return(0,E.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),Tu=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiList"}),i=n.children,a=n.className,o=n.component,s=void 0===o?"ul":o,l=n.dense,c=void 0!==l&&l,h=n.disablePadding,d=void 0!==h&&h,f=n.subheader,p=(0,T.Z)(n,Cu),m=e.useMemo((function(){return{dense:c}}),[c]),v=(0,E.Z)({},n,{component:s,dense:c,disablePadding:d}),g=function(e){var t=e.classes,r={root:["root",!e.disablePadding&&"padding",e.dense&&"dense",e.subheader&&"subheader"]};return(0,M.Z)(r,Su,t)}(v);return(0,x.jsx)(ku.Provider,{value:m,children:(0,x.jsxs)(Au,(0,E.Z)({as:s,className:(0,u.Z)(g.root,a),ref:r,ownerState:v},p,{children:[f,i]}))})}));var Eu=function(e){return"string"===typeof e},Mu=r(9103),Iu=r(162);function Pu(e){return(0,L.Z)("MuiListItem",e)}var Ru=(0,z.Z)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);var zu=(0,z.Z)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Lu(e){return(0,L.Z)("MuiListItemSecondaryAction",e)}(0,z.Z)("MuiListItemSecondaryAction",["root","disableGutters"]);var Du=["className"],Ou=(0,I.ZP)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.disableGutters&&t.disableGutters]}})((function(e){var t=e.ownerState;return(0,E.Z)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})})),Fu=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiListItemSecondaryAction"}),i=n.className,a=(0,T.Z)(n,Du),o=e.useContext(ku),s=(0,E.Z)({},n,{disableGutters:o.disableGutters}),l=function(e){var t=e.disableGutters,r=e.classes,n={root:["root",t&&"disableGutters"]};return(0,M.Z)(n,Lu,r)}(s);return(0,x.jsx)(Ou,(0,E.Z)({className:(0,u.Z)(l.root,i),ownerState:s,ref:r},a))}));Fu.muiName="ListItemSecondaryAction";var ju=Fu,Nu=["className"],Bu=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Zu=(0,I.ZP)("div",{name:"MuiListItem",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.dense&&t.dense,"flex-start"===r.alignItems&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.button&&t.button,r.hasSecondaryAction&&t.secondaryAction]}})((function(e){var t,r=e.theme,n=e.ownerState;return(0,E.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,E.Z)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&(0,i.Z)({},"& > .".concat(zu.root),{paddingRight:48}),(t={},(0,i.Z)(t,"&.".concat(Ru.focusVisible),{backgroundColor:(r.vars||r).palette.action.focus}),(0,i.Z)(t,"&.".concat(Ru.selected),(0,i.Z)({backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / ").concat(r.vars.palette.action.selectedOpacity,")"):(0,X.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)},"&.".concat(Ru.focusVisible),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.focusOpacity,"))"):(0,X.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)})),(0,i.Z)(t,"&.".concat(Ru.disabled),{opacity:(r.vars||r).palette.action.disabledOpacity}),t),"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:"1px solid ".concat((r.vars||r).palette.divider),backgroundClip:"padding-box"},n.button&&(0,i.Z)({transition:r.transitions.create("background-color",{duration:r.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(Ru.selected,":hover"),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.hoverOpacity,"))"):(0,X.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / ").concat(r.vars.palette.action.selectedOpacity,")"):(0,X.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)}}),n.hasSecondaryAction&&{paddingRight:48})})),Uu=(0,I.ZP)("li",{name:"MuiListItem",slot:"Container",overridesResolver:function(e,t){return t.container}})({position:"relative"}),Vu=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiListItem"}),i=n.alignItems,a=void 0===i?"center":i,o=n.autoFocus,s=void 0!==o&&o,l=n.button,c=void 0!==l&&l,h=n.children,d=n.className,f=n.component,p=n.components,m=void 0===p?{}:p,v=n.componentsProps,g=void 0===v?{}:v,y=n.ContainerComponent,b=void 0===y?"li":y,_=n.ContainerProps,w=(_=void 0===_?{}:_).className,k=n.dense,S=void 0!==k&&k,C=n.disabled,A=void 0!==C&&C,I=n.disableGutters,R=void 0!==I&&I,z=n.disablePadding,L=void 0!==z&&z,D=n.divider,O=void 0!==D&&D,F=n.focusVisibleClassName,j=n.secondaryAction,N=n.selected,B=void 0!==N&&N,Z=n.slotProps,U=void 0===Z?{}:Z,W=n.slots,G=void 0===W?{}:W,H=(0,T.Z)(n.ContainerProps,Nu),X=(0,T.Z)(n,Bu),Y=e.useContext(ku),q=e.useMemo((function(){return{dense:S||Y.dense||!1,alignItems:a,disableGutters:R}}),[a,Y.dense,S,R]),$=e.useRef(null);(0,Iu.Z)((function(){s&&$.current&&$.current.focus()}),[s]);var K=e.Children.toArray(h),J=K.length&&(0,Mu.Z)(K[K.length-1],["ListItemSecondaryAction"]),Q=(0,E.Z)({},n,{alignItems:a,autoFocus:s,button:c,dense:q.dense,disabled:A,disableGutters:R,disablePadding:L,divider:O,hasSecondaryAction:J,selected:B}),ee=function(e){var t=e.alignItems,r=e.button,n=e.classes,i=e.dense,a=e.disabled,o={root:["root",i&&"dense",!e.disableGutters&&"gutters",!e.disablePadding&&"padding",e.divider&&"divider",a&&"disabled",r&&"button","flex-start"===t&&"alignItemsFlexStart",e.hasSecondaryAction&&"secondaryAction",e.selected&&"selected"],container:["container"]};return(0,M.Z)(o,Pu,n)}(Q),te=(0,V.Z)($,r),re=G.root||m.Root||Zu,ne=U.root||g.root||{},ie=(0,E.Z)({className:(0,u.Z)(ee.root,ne.className,d),disabled:A},X),ae=f||"li";return c&&(ie.component=f||"div",ie.focusVisibleClassName=(0,u.Z)(Ru.focusVisible,F),ae=Xi),J?(ae=ie.component||f?ae:"div","li"===b&&("li"===ae?ae="div":"li"===ie.component&&(ie.component="div")),(0,x.jsx)(ku.Provider,{value:q,children:(0,x.jsxs)(Uu,(0,E.Z)({as:b,className:(0,u.Z)(ee.container,w),ref:te,ownerState:Q},H,{children:[(0,x.jsx)(re,(0,E.Z)({},ne,!Eu(re)&&{as:ae,ownerState:(0,E.Z)({},Q,ne.ownerState)},ie,{children:K})),K.pop()]}))})):(0,x.jsx)(ku.Provider,{value:q,children:(0,x.jsxs)(re,(0,E.Z)({},ne,{as:ae,ref:te},!Eu(re)&&{ownerState:(0,E.Z)({},Q,ne.ownerState)},ie,{children:[K,j&&(0,x.jsx)(ju,{children:j})]}))})}));function Wu(e){return(0,L.Z)("MuiListItemAvatar",e)}(0,z.Z)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var Gu=["className"],Hu=(0,I.ZP)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})((function(e){var t=e.ownerState;return(0,E.Z)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),Xu=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiListItemAvatar"}),i=n.className,a=(0,T.Z)(n,Gu),o=e.useContext(ku),s=(0,E.Z)({},n,{alignItems:o.alignItems}),l=function(e){var t=e.alignItems,r=e.classes,n={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,M.Z)(n,Wu,r)}(s);return(0,x.jsx)(Hu,(0,E.Z)({className:(0,u.Z)(l.root,i),ownerState:s,ref:r},a))}));function Yu(e){return(0,L.Z)("MuiListItemText",e)}var qu=(0,z.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),$u=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Ku=(0,I.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[(0,i.Z)({},"& .".concat(qu.primary),t.primary),(0,i.Z)({},"& .".concat(qu.secondary),t.secondary),t.root,r.inset&&t.inset,r.primary&&r.secondary&&t.multiline,r.dense&&t.dense]}})((function(e){var t=e.ownerState;return(0,E.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})})),Ju=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiListItemText"}),i=n.children,a=n.className,o=n.disableTypography,s=void 0!==o&&o,l=n.inset,c=void 0!==l&&l,h=n.primary,d=n.primaryTypographyProps,f=n.secondary,p=n.secondaryTypographyProps,m=(0,T.Z)(n,$u),v=e.useContext(ku).dense,g=null!=h?h:i,y=f,b=(0,E.Z)({},n,{disableTypography:s,inset:c,primary:!!g,secondary:!!y,dense:v}),_=function(e){var t=e.classes,r=e.inset,n=e.primary,i=e.secondary,a={root:["root",r&&"inset",e.dense&&"dense",n&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,M.Z)(a,Yu,t)}(b);return null==g||g.type===B||s||(g=(0,x.jsx)(B,(0,E.Z)({variant:v?"body2":"body1",className:_.primary,component:null!=d&&d.variant?void 0:"span",display:"block"},d,{children:g}))),null==y||y.type===B||s||(y=(0,x.jsx)(B,(0,E.Z)({variant:"body2",className:_.secondary,color:"text.secondary",display:"block"},p,{children:y}))),(0,x.jsxs)(Ku,(0,E.Z)({className:(0,u.Z)(_.root,a),ownerState:b,ref:r},m,{children:[g,y]}))})),Qu=function(){var e=ue((function(e){return e.entities})),t=ue((function(e){return e.accounts})),r=ue((function(e){return e.accounts.currentAccount}));return Object.keys(r).length?(0,x.jsx)(S,{className:"c-nav",sx:{maxHeight:{xs:e.isOpen?"auto":0,md:"max-content"},overflow:"hidden"},children:(0,x.jsx)(Tu,{sx:{width:"100%",maxWidth:360},children:la.map((function(e,r){return(0,x.jsx)(er,{className:function(e){return e.isActive?"c-nav__item c-nav__item--active":"c-nav__item"},to:e.path,style:{textDecoration:"none"},children:Object.keys(t.currentAccount).length?(0,x.jsxs)(Vu,{sx:{py:1.5},children:[(0,x.jsx)(Xu,{children:(0,x.jsx)(li,{className:"c-nav__avatar",children:e.icon})}),(0,x.jsx)(Ju,{sx:{textTransform:"capitalize"},primary:e.title})]}):null},"route-".concat(e.title,"-").concat(r))}))})}):null},eh=r(8008),th=r(9823),rh=r.p+"static/media/header-bg.e0116f0804f54f94f4b4.jpg",nh=r(5985),ih=r(5735);function ah(e){return(0,L.Z)("MuiButton",e)}var oh=(0,z.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var sh=e.createContext({}),lh=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],ch=function(e){return(0,E.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},uh=(0,I.ZP)(Xi,{shouldForwardProp:function(e){return(0,I.FO)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t[r.variant],t["".concat(r.variant).concat((0,R.Z)(r.color))],t["size".concat((0,R.Z)(r.size))],t["".concat(r.variant,"Size").concat((0,R.Z)(r.size))],"inherit"===r.color&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth]}})((function(e){var t,r,n,a=e.theme,o=e.ownerState;return(0,E.Z)({},a.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),"&:hover":(0,E.Z)({textDecoration:"none",backgroundColor:a.vars?"rgba(".concat(a.vars.palette.text.primaryChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,X.Fq)(a.palette.text.primary,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===o.variant&&"inherit"!==o.color&&{backgroundColor:a.vars?"rgba(".concat(a.vars.palette[o.color].mainChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,X.Fq)(a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===o.variant&&"inherit"!==o.color&&{border:"1px solid ".concat((a.vars||a).palette[o.color].main),backgroundColor:a.vars?"rgba(".concat(a.vars.palette[o.color].mainChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,X.Fq)(a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===o.variant&&{backgroundColor:(a.vars||a).palette.grey.A100,boxShadow:(a.vars||a).shadows[4],"@media (hover: none)":{boxShadow:(a.vars||a).shadows[2],backgroundColor:(a.vars||a).palette.grey[300]}},"contained"===o.variant&&"inherit"!==o.color&&{backgroundColor:(a.vars||a).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[o.color].main}}),"&:active":(0,E.Z)({},"contained"===o.variant&&{boxShadow:(a.vars||a).shadows[8]})},(0,i.Z)(t,"&.".concat(oh.focusVisible),(0,E.Z)({},"contained"===o.variant&&{boxShadow:(a.vars||a).shadows[6]})),(0,i.Z)(t,"&.".concat(oh.disabled),(0,E.Z)({color:(a.vars||a).palette.action.disabled},"outlined"===o.variant&&{border:"1px solid ".concat((a.vars||a).palette.action.disabledBackground)},"outlined"===o.variant&&"secondary"===o.color&&{border:"1px solid ".concat((a.vars||a).palette.action.disabled)},"contained"===o.variant&&{color:(a.vars||a).palette.action.disabled,boxShadow:(a.vars||a).shadows[0],backgroundColor:(a.vars||a).palette.action.disabledBackground})),t),"text"===o.variant&&{padding:"6px 8px"},"text"===o.variant&&"inherit"!==o.color&&{color:(a.vars||a).palette[o.color].main},"outlined"===o.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===o.variant&&"inherit"!==o.color&&{color:(a.vars||a).palette[o.color].main,border:a.vars?"1px solid rgba(".concat(a.vars.palette[o.color].mainChannel," / 0.5)"):"1px solid ".concat((0,X.Fq)(a.palette[o.color].main,.5))},"contained"===o.variant&&{color:a.vars?a.vars.palette.text.primary:null==(r=(n=a.palette).getContrastText)?void 0:r.call(n,a.palette.grey[300]),backgroundColor:(a.vars||a).palette.grey[300],boxShadow:(a.vars||a).shadows[2]},"contained"===o.variant&&"inherit"!==o.color&&{color:(a.vars||a).palette[o.color].contrastText,backgroundColor:(a.vars||a).palette[o.color].main},"inherit"===o.color&&{color:"inherit",borderColor:"currentColor"},"small"===o.size&&"text"===o.variant&&{padding:"4px 5px",fontSize:a.typography.pxToRem(13)},"large"===o.size&&"text"===o.variant&&{padding:"8px 11px",fontSize:a.typography.pxToRem(15)},"small"===o.size&&"outlined"===o.variant&&{padding:"3px 9px",fontSize:a.typography.pxToRem(13)},"large"===o.size&&"outlined"===o.variant&&{padding:"7px 21px",fontSize:a.typography.pxToRem(15)},"small"===o.size&&"contained"===o.variant&&{padding:"4px 10px",fontSize:a.typography.pxToRem(13)},"large"===o.size&&"contained"===o.variant&&{padding:"8px 22px",fontSize:a.typography.pxToRem(15)},o.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,i.Z)(t,"&.".concat(oh.focusVisible),{boxShadow:"none"}),(0,i.Z)(t,"&:active",{boxShadow:"none"}),(0,i.Z)(t,"&.".concat(oh.disabled),{boxShadow:"none"}),t)})),hh=(0,I.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var r=e.ownerState;return[t.startIcon,t["iconSize".concat((0,R.Z)(r.size))]]}})((function(e){var t=e.ownerState;return(0,E.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},ch(t))})),dh=(0,I.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var r=e.ownerState;return[t.endIcon,t["iconSize".concat((0,R.Z)(r.size))]]}})((function(e){var t=e.ownerState;return(0,E.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},ch(t))})),fh=e.forwardRef((function(t,r){var n=e.useContext(sh),i=(0,ih.Z)(n,t),a=(0,P.Z)({props:i,name:"MuiButton"}),o=a.children,s=a.color,l=void 0===s?"primary":s,c=a.component,h=void 0===c?"button":c,d=a.className,f=a.disabled,p=void 0!==f&&f,m=a.disableElevation,v=void 0!==m&&m,g=a.disableFocusRipple,y=void 0!==g&&g,b=a.endIcon,_=a.focusVisibleClassName,w=a.fullWidth,k=void 0!==w&&w,S=a.size,C=void 0===S?"medium":S,A=a.startIcon,I=a.type,z=a.variant,L=void 0===z?"text":z,D=(0,T.Z)(a,lh),O=(0,E.Z)({},a,{color:l,component:h,disabled:p,disableElevation:v,disableFocusRipple:y,fullWidth:k,size:C,type:I,variant:L}),F=function(e){var t=e.color,r=e.disableElevation,n=e.fullWidth,i=e.size,a=e.variant,o=e.classes,s={root:["root",a,"".concat(a).concat((0,R.Z)(t)),"size".concat((0,R.Z)(i)),"".concat(a,"Size").concat((0,R.Z)(i)),"inherit"===t&&"colorInherit",r&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,R.Z)(i))],endIcon:["endIcon","iconSize".concat((0,R.Z)(i))]},l=(0,M.Z)(s,ah,o);return(0,E.Z)({},o,l)}(O),j=A&&(0,x.jsx)(hh,{className:F.startIcon,ownerState:O,children:A}),N=b&&(0,x.jsx)(dh,{className:F.endIcon,ownerState:O,children:b});return(0,x.jsxs)(uh,(0,E.Z)({ownerState:O,className:(0,u.Z)(n.className,F.root,d),component:h,disabled:p,focusRipple:!y,focusVisibleClassName:(0,u.Z)(F.focusVisible,_),ref:r,type:I},D,{classes:F,children:[j,o,N]}))})),ph=r(5682),mh=["component","direction","spacing","divider","children"];function vh(t,r){var n=e.Children.toArray(t).filter(Boolean);return n.reduce((function(t,i,a){return t.push(i),a<n.length-1&&t.push(e.cloneElement(r,{key:"separator-".concat(a)})),t}),[])}var gh=(0,I.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,t){return[t.root]}})((function(e){var t=e.ownerState,r=e.theme,n=(0,E.Z)({display:"flex",flexDirection:"column"},(0,ir.k9)({theme:r},(0,ir.P$)({values:t.direction,breakpoints:r.breakpoints.values}),(function(e){return{flexDirection:e}})));if(t.spacing){var a=(0,ph.hB)(r),o=Object.keys(r.breakpoints.values).reduce((function(e,r){return("object"===typeof t.spacing&&null!=t.spacing[r]||"object"===typeof t.direction&&null!=t.direction[r])&&(e[r]=!0),e}),{}),s=(0,ir.P$)({values:t.direction,base:o}),l=(0,ir.P$)({values:t.spacing,base:o});"object"===typeof s&&Object.keys(s).forEach((function(e,t,r){if(!s[e]){var n=t>0?s[r[t-1]]:"column";s[e]=n}}));n=(0,p.Z)(n,(0,ir.k9)({theme:r},l,(function(e,r){return{"& > :not(style) + :not(style)":(0,i.Z)({margin:0},"margin".concat((n=r?s[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[n])),(0,ph.NA)(a,e))};var n})))}return n=(0,ir.dt)(r.breakpoints,n)})),yh=e.forwardRef((function(e,t){var r=g((0,P.Z)({props:e,name:"MuiStack"})),n=r.component,i=void 0===n?"div":n,a=r.direction,o=void 0===a?"column":a,s=r.spacing,l=void 0===s?0:s,c=r.divider,u=r.children,h=(0,T.Z)(r,mh),d={direction:o,spacing:l};return(0,x.jsx)(gh,(0,E.Z)({as:i,ownerState:d,ref:t},h,{children:c?vh(u,c):u}))})),xh=yh,bh=function(){var e=be(),t=ue((function(e){return e.entities})),r=ue((function(e){return e.accounts.currentAccount}));return Object.keys(r).length?(0,x.jsxs)(S,{className:"c-header",sx:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"space-between",pb:3},children:[(0,x.jsxs)(S,{children:[(0,x.jsxs)(S,{pt:5,px:6,sx:{display:"flex",justifyContent:{xs:"center",sm:"space-between",md:"center"},alignItems:"center",alignContent:"center",flexWrap:"wrap",gap:2},children:[(0,x.jsx)(B,{letterSpacing:2,variant:"h2",className:"c-header__title u-weight-medium u-h5",children:"VISION DASHBOARD"}),(0,x.jsx)(fh,{onClick:function(){return e({type:rc.type})},sx:{display:{md:"none"}},variant:"contained",children:t.isOpen?(0,x.jsx)(th.Z,{}):(0,x.jsx)(eh.Z,{})})]}),(0,x.jsx)(S,{mt:4,px:4,children:(0,x.jsx)(S,{className:"u-divider"})}),(0,x.jsx)(xh,{spacing:2,px:3,mt:3,children:(0,x.jsx)(Qu,{})})]}),(0,x.jsx)(S,{px:3,children:(0,x.jsxs)(S,{className:"u-box-light",sx:{background:"url(".concat(rh,")"),backgroundSize:"cover",p:3},children:[(0,x.jsx)(li,{sx:{bgcolor:"white",mb:2},children:(0,x.jsx)(nh.Z,{sx:{color:"mainPrimary.main"}})}),(0,x.jsx)(B,{textTransform:"capitalize",variant:"h6",fontWeight:700,color:"white",children:"Need Help?"}),(0,x.jsx)(B,{textTransform:"capitalize",variant:"h6",fontWeight:400,color:"white",className:"u-text-small",mt:1,children:"Please check our docs"}),(0,x.jsx)(S,{className:"u-box-light",textAlign:"center",py:2,mt:3,children:(0,x.jsx)(B,{color:"white",children:(0,x.jsx)(J,{href:"https://github.com/nimaprmdi/vision-dashboard#readme",target:"_blank",color:"white",underline:"none",className:"u-link-primary",children:"Documentation"})})})]})})]}):null},_h=(r(8457),(0,ti.Z)((0,x.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz")),wh=(0,I.ZP)(Xi)((function(e){var t=e.theme;return(0,E.Z)({display:"flex",marginLeft:"calc(".concat(t.spacing(1)," * 0.5)"),marginRight:"calc(".concat(t.spacing(1)," * 0.5)")},"light"===t.palette.mode?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,E.Z)({},"light"===t.palette.mode?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}),"&:active":(0,E.Z)({boxShadow:t.shadows[0]},"light"===t.palette.mode?{backgroundColor:(0,X._4)(t.palette.grey[200],.12)}:{backgroundColor:(0,X._4)(t.palette.grey[600],.12)})})})),kh=(0,I.ZP)(_h)({width:24,height:16});var Sh=function(e){var t=e;return(0,x.jsx)("li",{children:(0,x.jsx)(wh,(0,E.Z)({focusRipple:!0},e,{ownerState:t,children:(0,x.jsx)(kh,{ownerState:t})}))})};function Ch(e){return(0,L.Z)("MuiBreadcrumbs",e)}var Ah=(0,z.Z)("MuiBreadcrumbs",["root","ol","li","separator"]),Th=["children","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],Eh=(0,I.ZP)(B,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:function(e,t){return[(0,i.Z)({},"& .".concat(Ah.li),t.li),t.root]}})({}),Mh=(0,I.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:function(e,t){return t.ol}})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),Ih=(0,I.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:function(e,t){return t.separator}})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function Ph(e,t,r,n){return e.reduce((function(i,a,o){return o<e.length-1?i=i.concat(a,(0,x.jsx)(Ih,{"aria-hidden":!0,className:t,ownerState:n,children:r},"separator-".concat(o))):i.push(a),i}),[])}var Rh=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiBreadcrumbs"}),i=n.children,a=n.className,o=n.component,s=void 0===o?"nav":o,l=n.expandText,c=void 0===l?"Show path":l,h=n.itemsAfterCollapse,d=void 0===h?1:h,p=n.itemsBeforeCollapse,m=void 0===p?1:p,v=n.maxItems,g=void 0===v?8:v,y=n.separator,b=void 0===y?"/":y,_=(0,T.Z)(n,Th),w=e.useState(!1),k=(0,Z.Z)(w,2),S=k[0],C=k[1],A=(0,E.Z)({},n,{component:s,expanded:S,expandText:c,itemsAfterCollapse:d,itemsBeforeCollapse:m,maxItems:g,separator:b}),I=function(e){var t=e.classes;return(0,M.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},Ch,t)}(A),R=e.useRef(null),z=e.Children.toArray(i).filter((function(t){return e.isValidElement(t)})).map((function(e,t){return(0,x.jsx)("li",{className:I.li,children:e},"child-".concat(t))}));return(0,x.jsx)(Eh,(0,E.Z)({ref:r,component:s,color:"text.secondary",className:(0,u.Z)(I.root,a),ownerState:A},_,{children:(0,x.jsx)(Mh,{className:I.ol,ref:R,ownerState:A,children:Ph(S||g&&z.length<=g?z:function(e){return m+d>=e.length?e:[].concat((0,f.Z)(e.slice(0,m)),[(0,x.jsx)(Sh,{"aria-label":c,onClick:function(){C(!0);var e=R.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis")],(0,f.Z)(e.slice(e.length-d,e.length)))}(z),I.separator,b,A)})}))})),zh=function(){var e=Et().pathname.split("/").filter((function(e){return e})),t=ue((function(e){return e.accounts.currentAccount}));return(0,x.jsx)(xh,{mb:2,bgcolor:"error",sx:{px:{xs:3,md:0}},children:Object.keys(t).length>0?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(Rh,{color:"gray.light",separator:"/","aria-label":"breadcrumb",children:[(0,x.jsx)(Qt,{to:"/",style:{textDecoration:"none"},children:(0,x.jsx)(J,{component:"div",variant:"h5",underline:"none",color:"gray.light",textTransform:"capitalize",children:"Home"})}),e.length&&e.map((function(e,t){return(0,x.jsx)(B,{variant:"h5",color:"gray.light",textTransform:"capitalize",children:e},"breadcrumb-item-".concat(t))}))]}),(0,x.jsx)(B,{mt:1,variant:"h6",color:"white",children:"Requests"})]}):null})},Lh=function(){return(0,x.jsxs)(yr,{container:!0,spacing:2,children:[(0,x.jsx)(yr,{item:!0,xs:12,md:2.5,m:2,children:(0,x.jsx)(bh,{})}),(0,x.jsxs)(yr,{item:!0,xs:12,md:9,mt:3,children:[(0,x.jsx)(zh,{}),(0,x.jsx)(Ut,{}),(0,x.jsx)(wu,{})]})]})},Dh=function(){return(0,x.jsxs)(S,{className:"c-header-blur",sx:{flexWrap:"wrap",gap:2},children:[(0,x.jsx)(B,{variant:"h2",className:"u-text-small",color:"white",fontWeight:700,sx:{letterSpacing:2},order:1,children:"VISION UI"}),(0,x.jsx)(S,{sx:{display:"flex",justifyContent:{xs:"flex-start",md:"space-between"},alignItems:"center",gap:3,overflow:"auto",width:{xs:"100%",md:"auto"}},order:{xs:3,md:2}}),(0,x.jsx)(fh,{variant:"contained",color:"primary",sx:{px:4,order:{xs:2,md:3}},children:(0,x.jsx)(J,{href:"https://github.com/nimaprmdi/vision-dashboard",target:"_blank",underline:"none",component:"a",color:"white",children:"Free Download"})})]})},Oh=function(){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Dh,{}),(0,x.jsx)(Ut,{})]})},Fh=function(){var t=ue((function(e){return e.tickets})),r=ue((function(e){return e.accounts.currentAccount})),n=(0,e.useState)(),i=(0,Z.Z)(n,2),a=i[0],o=i[1];return(0,e.useEffect)((function(){if(r.isAdmin)o(t.tickets);else{var e=t.tickets.filter((function(e){var t;return(null===(t=e.accounts)||void 0===t?void 0:t.itemId)!==r.itemId}));e&&o(e)}}),[r]),(0,x.jsx)(x.Fragment,{children:a&&a.length?a.map((function(e){return(0,x.jsxs)(bn,{className:"c-table__row u-opacity-0 u-fadein ",sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,x.jsx)(An,{sx:{color:"white"},component:"th",scope:"row",children:(0,x.jsxs)(S,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,x.jsx)(li,{alt:"image",sx:{bgcolor:e.accounts&&e.accounts.color?e.accounts.color.hex:"gray.light"},children:e.accounts&&e.accounts.profileImage?(0,x.jsx)("img",{src:e.accounts.profileImage.url}):(0,x.jsx)(B,{variant:"h4",textTransform:"capitalize",color:"white",children:e.accounts?e.accounts.name.charAt(0):"\ud83d\udc7b"})}),(0,x.jsxs)(S,{children:[(0,x.jsx)(B,{variant:"h6",textTransform:"capitalize",className:"u-text-small",color:"white",children:e.subject}),(0,x.jsx)(B,{variant:"h6",className:"u-text-small",color:"gray.light",children:e.description.slice(0,20)})]})]})}),(0,x.jsxs)(An,{sx:{color:"white"},align:"left",children:[(0,x.jsx)(B,{variant:"h6",textTransform:"capitalize",className:"u-text-small",color:"white",children:"".concat(e.accounts&&e.accounts.name," ").concat(e.accounts&&e.accounts.lastName)}),(0,x.jsx)(B,{variant:"h6",className:"u-text-small",color:"gray.light",children:e.accounts?e.accounts.email:"No Data Found"})]}),(0,x.jsx)(An,{sx:{color:"white"},align:"left",children:e.isClose?(0,x.jsx)(ea,{label:"Solved",color:"success"}):(0,x.jsx)(ea,{label:"Pending",color:"primary",variant:"outlined"})}),(0,x.jsx)(An,{sx:{color:"white"},align:"left",children:e.date?new Date(e.date).toISOString().split("T")[0]:""}),(0,x.jsx)(An,{children:(0,x.jsx)(Qt,{className:"u-link-primary",to:"/ticket/".concat(e.itemId),children:(0,x.jsx)(J,{className:"u-link-primary",component:"div",underline:"none",color:"gray.light",variant:"h6",children:"Edit"})})})]},e.itemId)})):(0,x.jsx)(bn,{className:"c-table__row u-opacity-0 u-fadein ",sx:{"&:last-child td, &:last-child th":{border:0}},children:(0,x.jsx)(An,{children:(0,x.jsx)(B,{variant:"h4",textTransform:"capitalize",color:"white",sx:{mt:2},children:"No Data Found"})})})})},jh=function(){var t=ue((function(e){return e.accounts})),r=(0,e.useState)(),n=(0,Z.Z)(r,2),i=n[0],a=n[1];return(0,e.useEffect)((function(){if(t.currentAccount.isAdmin)a(t.accounts);else{var e=t.accounts.filter((function(e){return e.itemId===t.currentAccount.itemId}));console.log(e),a(e)}}),[t.currentAccount]),(0,x.jsx)(x.Fragment,{children:i&&i.length?i.map((function(e){return(0,x.jsxs)(bn,{className:"c-table__row u-opacity-0 u-fadein",sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,x.jsx)(An,{sx:{color:"white"},component:"th",scope:"row",children:(0,x.jsxs)(S,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,x.jsx)(li,{alt:"image",sx:{bgcolor:e.color?e.color.hex:"gray.light"},children:e.profileImage?(0,x.jsx)("img",{src:e.profileImage.url,style:{objectFit:"cover",width:"100%",height:"100%"}}):(0,x.jsx)(B,{variant:"h4",textTransform:"capitalize",color:"white",children:e.name.charAt(0)})}),(0,x.jsxs)(S,{children:[(0,x.jsx)(B,{variant:"h6",textTransform:"capitalize",className:"u-text-small",color:"white",children:"".concat(e.name," ").concat(e.lastName)}),(0,x.jsx)(B,{variant:"h6",className:"u-text-small",color:"gray.light",children:e.userName})]})]})}),(0,x.jsx)(An,{sx:{color:"white"},align:"left",children:(0,x.jsx)(B,{textTransform:"capitalize",variant:"h6",className:"u-text-small",color:"white",children:e.email})}),(0,x.jsx)(An,{sx:{color:"white"},align:"left",children:e.isAdmin?(0,x.jsx)(ea,{label:"Admin",color:"success"}):(0,x.jsx)(ea,{label:"User",color:"primary",variant:"outlined"})}),(0,x.jsx)(An,{sx:{color:"white"},align:"left",children:new Date(e.createdAt).toISOString().split("T")[0]}),(0,x.jsx)(An,{children:(0,x.jsx)(Qt,{className:"u-link-primary",to:"/user/".concat(e.itemId),children:(0,x.jsx)(J,{className:"u-link-primary",component:"div",href:"#",underline:"none",color:"gray.light",variant:"h6",children:"Edit"})})})]},"account-item-".concat(e.itemId))})):(0,x.jsx)(bn,{className:"c-table__row u-opacity-0 u-fadein ",sx:{"&:last-child td, &:last-child th":{border:0}},children:(0,x.jsx)(An,{children:(0,x.jsx)(B,{variant:"h4",textTransform:"capitalize",color:"white",sx:{mt:2},children:"No Data Found"})})})})},Nh=function(){var t=Pt().type,r=Mt();ue((function(e){return e.accounts.currentAccount}));return(0,e.useEffect)((function(){"tickets"!==t&&"requests"!==t&&"accounts"!==t&&r("".concat("/#/","404"))}),[]),(0,x.jsxs)(S,{className:"c-archives",sx:{px:{sx:2,md:0}},children:[function(){switch(t){case"requests":return(0,x.jsx)(fh,{variant:"contained",color:"primary",children:"Add Request"});case"tickets":return(0,x.jsx)(fh,{variant:"contained",color:"primary",onClick:function(){return r("".concat("/#/","add-ticket"))},children:"Add Ticket"});default:return(0,x.jsx)(fh,{variant:"contained",color:"primary",children:"Add Account"})}}(),(0,x.jsx)(zn,{data:t||"requests",children:function(){switch(t){case"requests":return(0,x.jsx)(ta,{});case"tickets":return(0,x.jsx)(Fh,{});default:return(0,x.jsx)(jh,{})}}()})]})},Bh=r(5483),Zh=r.n(Bh),Uh=function(t){var r=t.isChanged,n=t.location,i=t.darggable,a=void 0!==i&&i,o=t.handler;Zh().accessToken="pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw";var s=(0,e.useRef)(null),l=(0,e.useRef)(null),c=(0,e.useState)(n.longitude),u=(0,Z.Z)(c,2),h=u[0],d=u[1],f=(0,e.useState)(n.latitude),p=(0,Z.Z)(f,2),m=p[0],v=p[1],g=(0,e.useState)(12),y=(0,Z.Z)(g,2),b=y[0];y[1];return(0,e.useEffect)((function(){d(n.longitude),v(n.latitude)}),[n]),(0,e.useEffect)((function(){if(!l.current){l.current=new(Zh().Map)({container:s.current,style:"mapbox://styles/mapbox/streets-v11",center:[Number(h.toFixed(2)),Number(m.toFixed(2))],zoom:b});var e=new(Zh().Marker)({draggable:a}).setLngLat([h,m]).addTo(l.current);e.on("dragend",(function(t){var r=e.getLngLat();o&&o({latitude:r.lat,longitude:r.lng})}))}}),[h,h,n]),(0,e.useEffect)((function(){l.current&&r&&l.current.resize()}),[r]),(0,x.jsx)(S,{className:"haji",mt:1.5,style:{width:"100%",height:"100%",overflow:"hidden",borderRadius:"10px"},children:(0,x.jsx)("div",{id:"mapid",ref:s,className:"map-container",style:{width:"100%",height:"100%"}})})},Vh=function(e){var t=e.description,r=e.children;return(0,x.jsxs)(S,{className:"u-box-light u-opacity-0 u-fadein",py:2,px:3,children:[t&&(0,x.jsx)(B,{pt:4,variant:"h6",className:"u-text-small",color:"gray.light",children:t}),t&&(0,x.jsx)(S,{mt:5,className:"u-divider"}),(0,x.jsx)(xh,{mt:3.5,children:r})]})},Wh=r(3332),Gh=function(e){var t=e.title,r=e.buttons,n=e.parentProps,i=e.childProps,a=e.parentSx,s=e.childSx,l=be();ue((function(e){return e.accounts.currentAccount}));return(0,x.jsxs)(S,o(o({},n),{},{sx:o({},a),children:[(0,x.jsx)(B,{width:{xs:"100%",md:"max-content"},textAlign:"center",variant:"h1",color:"white",fontWeight:700,children:t||"Actions"}),(0,x.jsx)(S,o(o({},i),{},{sx:o({},s),children:r.map((function(e,t){return(0,x.jsx)(fh,{variant:"contained",color:e.color,startIcon:(0,x.jsx)(Wh.Z,{}),onClick:function(){return l(e.handler)},children:e.title},"ticket-commandbutton-".concat(t))}))}))]}))},Hh=r(8095),Xh=function(e){var t=e.service,r=e.address,n=e.date,i=e.price;return(0,x.jsxs)(S,{className:"u-box-light",sx:{display:"flex",alignContent:"space-between",flexWrap:"wrap"},width:"100%",py:3,px:3,children:[(0,x.jsxs)(S,{className:"u-box-medium",width:"100%",py:2,children:[(0,x.jsxs)(S,{children:[(0,x.jsx)(B,{ml:2,className:"u-text-tiny",variant:"h6",color:"white",fontWeight:700,children:"Request"}),(0,x.jsx)(B,{textTransform:"capitalize",ml:2,mt:.5,variant:"h3",color:"white",fontWeight:700,children:t})]}),(0,x.jsx)(Hh.Z,{sx:{fontSize:"35px",color:"white",mr:2}})]}),(0,x.jsxs)(S,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:2,mt:4},children:[(0,x.jsxs)(S,{sx:{display:"flex",gap:2},children:[(0,x.jsx)(li,{className:"u-avatar-tertiary",sx:{borderRadius:"999px"},variant:"rounded",children:(0,x.jsx)(ia.Z,{color:"success",sx:{fontSize:"18px"}})}),(0,x.jsxs)(S,{children:[(0,x.jsx)(B,{textTransform:"capitalize",title:"Tehran Azadi Laleh Street",className:"u-text-small",sx:{color:"white"},children:r.slice(0,120)+"..."}),(0,x.jsx)(B,{variant:"h6",className:"u-text-small",color:"gray.light",children:n&&new Date(n).toISOString().split("T")[0]})]})]}),(0,x.jsx)(B,{variant:"h6",className:"u-text-small",color:"white",children:i||""})]})]})},Yh=function(e){var t=e.name,r=e.lastName,n=e.isAdmin;return(0,x.jsxs)(S,{className:"u-box-light",width:"100%",pt:3,pl:3,pb:.5,children:[(0,x.jsx)(B,{textTransform:"capitalize",variant:"h1",color:"white",fontWeight:700,children:t}),(0,x.jsx)(B,{textTransform:"capitalize",variant:"h1",color:"white",fontWeight:700,children:r}),(0,x.jsx)(B,{mt:2,variant:"h3",color:"gray.light",fontWeight:700,children:n?"Admin":"User"}),(0,x.jsx)(S,{pr:2,children:(0,x.jsx)(S,{mt:4,mb:3,className:"u-divider"})})]})},qh=function(){var t,r,n=Pt().id,i=(0,e.useState)(),a=(0,Z.Z)(i,2),o=a[0],s=a[1],l=(0,e.useState)(),c=(0,Z.Z)(l,2),u=c[0],h=c[1],d=(0,e.useState)(!1),f=(0,Z.Z)(d,2),p=f[0],m=f[1],v=ue((function(e){return e.requests})),g=ue((function(e){return e.accounts.currentAccount})),y=Mt(),b=[{title:"Mark as solved",color:"primary",handler:(t=n,r=o&&o.itemStatus,function(e){"solved"!==r?xu.solveRequest(t):nu.info("Request Already Is Solved")})},{title:"Mark as pending",color:"error",handler:mu(n,o&&o.itemStatus)},{title:"Mark as reviewing",color:"warning",handler:vu(n,o&&o.itemStatus)}];return(0,e.useEffect)((function(){if(!v.isLoading&&n){var e=v.requests.find((function(e){return e.itemId===n}));e?s(e):y("".concat("/#/","404"))}else n||y("".concat("/#/","404"))}),[v]),(0,e.useEffect)((function(){o&&(h([{title:"Address: ",payload:o.address},{title:"Service: ",payload:o.service},{title:"Status: ",payload:o.itemStatus},{title:"Mobile: ",payload:o.mobile},{title:"Phone: ",payload:o.phone},{title:"Gender: ",payload:o.gender}]),m(!0))}),[o]),(0,x.jsxs)(yr,{container:!0,spacing:2,sx:{px:{xs:2,md:0}},children:[(0,x.jsxs)(yr,{item:!0,container:!0,xs:12,md:7,spacing:1,children:[(0,x.jsx)(yr,{item:!0,xs:12,xl:6,children:!v.isLoading&&o?o.account?(0,x.jsx)(Yh,{name:o.account.name||"",lastName:o.account.lastName||"",isAdmin:o.account.isAdmin||!1}):(0,x.jsx)(S,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},className:"u-box-light",children:(0,x.jsx)(B,{variant:"h6",color:"white",children:"User Not Found (Deleted)"})}):(0,x.jsx)(Kn,{sx:{height:"210px"}})}),(0,x.jsx)(yr,{item:!0,xs:12,xl:6,children:v.isLoading?(0,x.jsx)(Kn,{sx:{height:"210px"}}):(0,x.jsx)(Xh,{service:o&&o.service||"",address:o&&o.address||"",date:o&&o.date||""})}),(0,x.jsx)(yr,{item:!0,xs:12,pl:2,children:v.isLoading?(0,x.jsx)(Kn,{sx:{height:"250px"}}):(0,x.jsx)(Vh,{description:o&&o.description||"",children:u&&(null===u||void 0===u?void 0:u.map((function(e,t){return(0,x.jsxs)(S,{className:"c-details__item",sx:{display:"flex",gap:1,mb:1},children:[(0,x.jsx)(B,{variant:"h6",className:"u-text-small",color:"gray.light",children:e.title}),(0,x.jsx)(B,{textTransform:"capitalize",variant:"h6",className:"u-text-small",color:"white",children:"boolean"!==typeof e.payload?e.payload:e.payload?"Male":"Female"})]},"details-item".concat(e.title,"-").concat(t))})))})})]}),(0,x.jsx)(yr,{item:!0,container:!0,xs:12,md:5,children:v.isLoading&&o&&Object.keys(o.location).length?(0,x.jsx)(Kn,{sx:{height:"470px"}}):(0,x.jsx)(S,{className:"u-box-light",sx:{width:"100%",height:{xs:"500px",md:"100%"}},p:3,children:o&&null!==o&&void 0!==o&&o.location?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(S,{sx:{display:"flex",justifyContent:"space-between"},children:(0,x.jsx)(B,{variant:"h5",color:"white",mb:2,children:"Location"})}),(0,x.jsx)(S,{sx:{height:"90%"},children:(0,x.jsx)(Uh,{isChanged:p,location:o.location})})]}):(0,x.jsx)(S,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,x.jsx)(B,{variant:"h6",color:"white",children:"No Location Found"})})})}),(0,x.jsx)(yr,{item:!0,xs:12,children:g.isAdmin&&(0,x.jsx)(Gh,{title:"Requests Actions",buttons:b,parentProps:{className:"u-box-light"},parentSx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",justifyContent:{xs:"center",md:"space-between"},py:4,px:3},childSx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",justifyContent:{xs:"center",md:"flex-end"}}})})]})},$h=function(e){var t=e.data;return(0,x.jsxs)(S,{className:"u-box-light",p:3,pb:0,sx:{display:"flex",alignContent:"space-between",flexDirection:"column",gap:{xs:6,md:10},maxHeight:"550px",overflow:"auto"},children:[(0,x.jsx)(B,{variant:"h5",color:"white",fontWeight:700,children:"Ticket Area"}),(0,x.jsx)(S,{className:"c-chat",children:Array.isArray(t)&&t.map((function(e,t){return(0,x.jsx)(S,{sx:{display:"flex",justifyContent:e.isAdmin?"flex-start":"flex-end",mb:4},children:(0,x.jsxs)(S,{className:e.isAdmin?"u-box-blue":"u-box-green",width:{xs:"100%",sm:"80%"},maxWidth:{md:"500px"},p:2,children:[(0,x.jsx)(S,{children:(0,x.jsx)(B,{variant:"h6",color:"white",children:e.title||""})}),(0,x.jsx)(B,{variant:"h6",color:"gray.light",mt:1,children:e.description||""})]})},"chat-box-".concat(t))}))})]})};function Kh(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Jh(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Kh(e.value)&&""!==e.value||t&&Kh(e.defaultValue)&&""!==e.defaultValue)}var Qh=e.createContext(void 0);function ed(e){return(0,L.Z)("MuiFormControl",e)}(0,z.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var td=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],rd=(0,I.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return(0,E.Z)({},t.root,t["margin".concat((0,R.Z)(r.margin))],r.fullWidth&&t.fullWidth)}})((function(e){var t=e.ownerState;return(0,E.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),nd=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiFormControl"}),i=n.children,a=n.className,o=n.color,s=void 0===o?"primary":o,l=n.component,c=void 0===l?"div":l,h=n.disabled,d=void 0!==h&&h,f=n.error,p=void 0!==f&&f,m=n.focused,v=n.fullWidth,g=void 0!==v&&v,y=n.hiddenLabel,b=void 0!==y&&y,_=n.margin,w=void 0===_?"none":_,k=n.required,S=void 0!==k&&k,C=n.size,A=void 0===C?"medium":C,I=n.variant,z=void 0===I?"outlined":I,L=(0,T.Z)(n,td),D=(0,E.Z)({},n,{color:s,component:c,disabled:d,error:p,fullWidth:g,hiddenLabel:b,margin:w,required:S,size:A,variant:z}),O=function(e){var t=e.classes,r=e.margin,n=e.fullWidth,i={root:["root","none"!==r&&"margin".concat((0,R.Z)(r)),n&&"fullWidth"]};return(0,M.Z)(i,ed,t)}(D),F=e.useState((function(){var t=!1;return i&&e.Children.forEach(i,(function(e){if((0,Mu.Z)(e,["Input","Select"])){var r=(0,Mu.Z)(e,["Select"])?e.props.input:e;r&&r.props.startAdornment&&(t=!0)}})),t})),j=(0,Z.Z)(F,2),N=j[0],B=j[1],U=e.useState((function(){var t=!1;return i&&e.Children.forEach(i,(function(e){(0,Mu.Z)(e,["Input","Select"])&&Jh(e.props,!0)&&(t=!0)})),t})),V=(0,Z.Z)(U,2),W=V[0],G=V[1],H=e.useState(!1),X=(0,Z.Z)(H,2),Y=X[0],q=X[1];d&&Y&&q(!1);var $,K=void 0===m||d?Y:m,J=e.useMemo((function(){return{adornedStart:N,setAdornedStart:B,color:s,disabled:d,error:p,filled:W,focused:K,fullWidth:g,hiddenLabel:b,size:A,onBlur:function(){q(!1)},onEmpty:function(){G(!1)},onFilled:function(){G(!0)},onFocus:function(){q(!0)},registerEffect:$,required:S,variant:z}}),[N,s,d,p,W,K,g,b,$,S,A,z]);return(0,x.jsx)(Qh.Provider,{value:J,children:(0,x.jsx)(rd,(0,E.Z)({as:c,ownerState:D,className:(0,u.Z)(O.root,a),ref:r},L,{children:i}))})})),id=r(6248),ad=r(6189);function od(){return od=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},od.apply(this,arguments)}function sd(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var ld=r(7563),cd=r(7979),ud=r(3981),hd=r(5721),dd=["onChange","maxRows","minRows","style","value"];function fd(e,t){return parseInt(e[t],10)||0}var pd={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function md(e){return void 0===e||null===e||0===Object.keys(e).length}var vd=e.forwardRef((function(t,r){var n=t.onChange,i=t.maxRows,a=t.minRows,o=void 0===a?1:a,s=t.style,l=t.value,c=sd(t,dd),u=e.useRef(null!=l).current,h=e.useRef(null),d=(0,ld.Z)(r,h),f=e.useRef(null),p=e.useRef(0),m=e.useState({}),v=(0,Z.Z)(m,2),g=v[0],y=v[1],b=e.useCallback((function(){var e=h.current,r=(0,cd.Z)(e).getComputedStyle(e);if("0px"===r.width)return{};var n=f.current;n.style.width=r.width,n.value=e.value||t.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");var a=r["box-sizing"],s=fd(r,"padding-bottom")+fd(r,"padding-top"),l=fd(r,"border-bottom-width")+fd(r,"border-top-width"),c=n.scrollHeight;n.value="x";var u=n.scrollHeight,d=c;return o&&(d=Math.max(Number(o)*u,d)),i&&(d=Math.min(Number(i)*u,d)),{outerHeightStyle:(d=Math.max(d,u))+("border-box"===a?s+l:0),overflow:Math.abs(d-c)<=1}}),[i,o,t.placeholder]),_=function(e,t){var r=t.outerHeightStyle,n=t.overflow;return p.current<20&&(r>0&&Math.abs((e.outerHeightStyle||0)-r)>1||e.overflow!==n)?(p.current+=1,{overflow:n,outerHeightStyle:r}):e},w=e.useCallback((function(){var e=b();md(e)||y((function(t){return _(t,e)}))}),[b]);e.useEffect((function(){var e,t=(0,ud.Z)((function(){p.current=0,h.current&&function(){var e=b();md(e)||(0,te.flushSync)((function(){y((function(t){return _(t,e)}))}))}()})),r=(0,cd.Z)(h.current);return r.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(t)).observe(h.current),function(){t.clear(),r.removeEventListener("resize",t),e&&e.disconnect()}})),(0,hd.Z)((function(){w()})),e.useEffect((function(){p.current=0}),[l]);return(0,x.jsxs)(e.Fragment,{children:[(0,x.jsx)("textarea",od({value:l,onChange:function(e){p.current=0,u||w(),n&&n(e)},ref:d,rows:o,style:od({height:g.outerHeightStyle,overflow:g.overflow?"hidden":null},s)},c)),(0,x.jsx)("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:f,tabIndex:-1,style:od({},pd,s,{padding:0})})]})})),gd=vd;function yd(e){var t=e.props,r=e.states,n=e.muiFormControl;return r.reduce((function(e,r){return e[r]=t[r],n&&"undefined"===typeof t[r]&&(e[r]=n[r]),e}),{})}function xd(){return e.useContext(Qh)}function bd(e){var t=e.styles,r=e.defaultTheme,n=void 0===r?{}:r,i="function"===typeof t?function(e){return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,x.jsx)(Sr,{styles:i})}var _d=function(e){return(0,x.jsx)(bd,(0,E.Z)({},e,{defaultTheme:ar.Z}))};function wd(e){return(0,L.Z)("MuiInputBase",e)}var kd=(0,z.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Sd=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Cd=function(e,t){var r=e.ownerState;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,"small"===r.size&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t["color".concat((0,R.Z)(r.color))],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},Ad=function(e,t){var r=e.ownerState;return[t.input,"small"===r.size&&t.inputSizeSmall,r.multiline&&t.inputMultiline,"search"===r.type&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},Td=(0,I.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Cd})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({},t.typography.body1,(0,i.Z)({color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(kd.disabled),{color:(t.vars||t).palette.text.disabled,cursor:"default"}),r.multiline&&(0,E.Z)({padding:"4px 0 5px"},"small"===r.size&&{paddingTop:1}),r.fullWidth&&{width:"100%"})})),Ed=(0,I.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Ad})((function(e){var t,r=e.theme,n=e.ownerState,a="light"===r.palette.mode,o=(0,E.Z)({color:"currentColor"},r.vars?{opacity:r.vars.opacity.inputPlaceholder}:{opacity:a?.42:.5},{transition:r.transitions.create("opacity",{duration:r.transitions.duration.shorter})}),s={opacity:"0 !important"},l=r.vars?{opacity:r.vars.opacity.inputPlaceholder}:{opacity:a?.42:.5};return(0,E.Z)((t={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,i.Z)(t,"label[data-shrink=false] + .".concat(kd.formControl," &"),{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":l,"&:focus::-moz-placeholder":l,"&:focus:-ms-input-placeholder":l,"&:focus::-ms-input-placeholder":l}),(0,i.Z)(t,"&.".concat(kd.disabled),{opacity:1,WebkitTextFillColor:(r.vars||r).palette.text.disabled}),(0,i.Z)(t,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),t),"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),Md=(0,x.jsx)(_d,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Id=e.forwardRef((function(t,r){var n,i=(0,P.Z)({props:t,name:"MuiInputBase"}),a=i["aria-describedby"],o=i.autoComplete,s=i.autoFocus,l=i.className,c=i.components,h=void 0===c?{}:c,d=i.componentsProps,f=void 0===d?{}:d,p=i.defaultValue,m=i.disabled,v=i.disableInjectingGlobalStyles,g=i.endAdornment,y=i.fullWidth,b=void 0!==y&&y,_=i.id,w=i.inputComponent,k=void 0===w?"input":w,S=i.inputProps,C=void 0===S?{}:S,A=i.inputRef,I=i.maxRows,z=i.minRows,L=i.multiline,D=void 0!==L&&L,O=i.name,F=i.onBlur,j=i.onChange,N=i.onClick,B=i.onFocus,U=i.onKeyDown,W=i.onKeyUp,G=i.placeholder,H=i.readOnly,X=i.renderSuffix,Y=i.rows,q=i.slotProps,$=void 0===q?{}:q,K=i.slots,J=void 0===K?{}:K,Q=i.startAdornment,ee=i.type,te=void 0===ee?"text":ee,re=i.value,ne=(0,T.Z)(i,Sd),ie=null!=C.value?C.value:re,ae=e.useRef(null!=ie).current,oe=e.useRef(),se=e.useCallback((function(e){0}),[]),le=(0,V.Z)(oe,A,C.ref,se),ce=e.useState(!1),ue=(0,Z.Z)(ce,2),he=ue[0],de=ue[1],fe=xd();var pe=yd({props:i,muiFormControl:fe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});pe.focused=fe?fe.focused:he,e.useEffect((function(){!fe&&m&&he&&(de(!1),F&&F())}),[fe,m,he,F]);var me=fe&&fe.onFilled,ve=fe&&fe.onEmpty,ge=e.useCallback((function(e){Jh(e)?me&&me():ve&&ve()}),[me,ve]);(0,Iu.Z)((function(){ae&&ge({value:ie})}),[ie,ge,ae]);e.useEffect((function(){ge(oe.current)}),[]);var ye=k,xe=C;D&&"input"===ye&&(xe=Y?(0,E.Z)({type:void 0,minRows:Y,maxRows:Y},xe):(0,E.Z)({type:void 0,maxRows:I,minRows:z},xe),ye=gd);e.useEffect((function(){fe&&fe.setAdornedStart(Boolean(Q))}),[fe,Q]);var be=(0,E.Z)({},i,{color:pe.color||"primary",disabled:pe.disabled,endAdornment:g,error:pe.error,focused:pe.focused,formControl:fe,fullWidth:b,hiddenLabel:pe.hiddenLabel,multiline:D,size:pe.size,startAdornment:Q,type:te}),_e=function(e){var t=e.classes,r=e.color,n=e.disabled,i=e.error,a=e.endAdornment,o=e.focused,s=e.formControl,l=e.fullWidth,c=e.hiddenLabel,u=e.multiline,h=e.readOnly,d=e.size,f=e.startAdornment,p=e.type,m={root:["root","color".concat((0,R.Z)(r)),n&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",s&&"formControl","small"===d&&"sizeSmall",u&&"multiline",f&&"adornedStart",a&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",n&&"disabled","search"===p&&"inputTypeSearch",u&&"inputMultiline","small"===d&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",a&&"inputAdornedEnd",h&&"readOnly"]};return(0,M.Z)(m,wd,t)}(be),we=J.root||h.Root||Td,ke=$.root||f.root||{},Se=J.input||h.Input||Ed;return xe=(0,E.Z)({},xe,null!=(n=$.input)?n:f.input),(0,x.jsxs)(e.Fragment,{children:[!v&&Md,(0,x.jsxs)(we,(0,E.Z)({},ke,!Eu(we)&&{ownerState:(0,E.Z)({},be,ke.ownerState)},{ref:r,onClick:function(e){oe.current&&e.currentTarget===e.target&&oe.current.focus(),N&&N(e)}},ne,{className:(0,u.Z)(_e.root,ke.className,l),children:[Q,(0,x.jsx)(Qh.Provider,{value:null,children:(0,x.jsx)(Se,(0,E.Z)({ownerState:be,"aria-invalid":pe.error,"aria-describedby":a,autoComplete:o,autoFocus:s,defaultValue:p,disabled:pe.disabled,id:_,onAnimationStart:function(e){ge("mui-auto-fill-cancel"===e.animationName?oe.current:{value:"x"})},name:O,placeholder:G,readOnly:H,required:pe.required,rows:Y,value:ie,onKeyDown:U,onKeyUp:W,type:te},xe,!Eu(Se)&&{as:ye,ownerState:(0,E.Z)({},be,xe.ownerState)},{ref:le,className:(0,u.Z)(_e.input,xe.className),onBlur:function(e){F&&F(e),C.onBlur&&C.onBlur(e),fe&&fe.onBlur?fe.onBlur(e):de(!1)},onChange:function(e){if(!ae){var t=e.target||oe.current;if(null==t)throw new Error((0,ad.Z)(1));ge({value:t.value})}for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];C.onChange&&C.onChange.apply(C,[e].concat(n)),j&&j.apply(void 0,[e].concat(n))},onFocus:function(e){pe.disabled?e.stopPropagation():(B&&B(e),C.onFocus&&C.onFocus(e),fe&&fe.onFocus?fe.onFocus(e):de(!0))}}))}),g,X?X((0,E.Z)({},pe,{startAdornment:Q})):null]}))]})})),Pd=Id;function Rd(e){return(0,L.Z)("MuiInput",e)}var zd=(0,E.Z)({},kd,(0,z.Z)("MuiInput",["root","underline","input"])),Ld=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Dd=(0,I.ZP)(Td,{shouldForwardProp:function(e){return(0,I.FO)(e)||"classes"===e},name:"MuiInput",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[].concat((0,f.Z)(Cd(e,t)),[!r.disableUnderline&&t.underline])}})((function(e){var t,r=e.theme,n=e.ownerState,a="light"===r.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return r.vars&&(a="rgba(".concat(r.vars.palette.common.onBackgroundChannel," / ").concat(r.vars.opacity.inputUnderline,")")),(0,E.Z)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&(t={"&:after":{borderBottom:"2px solid ".concat((r.vars||r).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"}},(0,i.Z)(t,"&.".concat(zd.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,i.Z)(t,"&.".concat(zd.error),{"&:before, &:after":{borderBottomColor:(r.vars||r).palette.error.main},"&:focus-within:after":{transform:"scaleX(1)"}}),(0,i.Z)(t,"&:before",{borderBottom:"1px solid ".concat(a),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"}),(0,i.Z)(t,"&:hover:not(.".concat(zd.disabled,", .").concat(zd.error,"):before"),{borderBottom:"1px solid ".concat((r.vars||r).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(a)}}),(0,i.Z)(t,"&.".concat(zd.disabled,":before"),{borderBottomStyle:"dotted"}),t))})),Od=(0,I.ZP)(Ed,{name:"MuiInput",slot:"Input",overridesResolver:Ad})({}),Fd=e.forwardRef((function(e,t){var r,n,i,a,o=(0,P.Z)({props:e,name:"MuiInput"}),s=o.disableUnderline,l=o.components,c=void 0===l?{}:l,u=o.componentsProps,h=o.fullWidth,d=void 0!==h&&h,f=o.inputComponent,m=void 0===f?"input":f,v=o.multiline,g=void 0!==v&&v,y=o.slotProps,b=o.slots,_=void 0===b?{}:b,w=o.type,k=void 0===w?"text":w,S=(0,T.Z)(o,Ld),C=function(e){var t=e.classes,r={root:["root",!e.disableUnderline&&"underline"],input:["input"]},n=(0,M.Z)(r,Rd,t);return(0,E.Z)({},t,n)}(o),A={root:{ownerState:{disableUnderline:s}}},I=(null!=y?y:u)?(0,p.Z)(null!=y?y:u,A):A,R=null!=(r=null!=(n=_.root)?n:c.Root)?r:Dd,z=null!=(i=null!=(a=_.input)?a:c.Input)?i:Od;return(0,x.jsx)(Pd,(0,E.Z)({slots:{root:R,input:z},slotProps:I,fullWidth:d,inputComponent:m,multiline:g,ref:t,type:k},S,{classes:C}))}));Fd.muiName="Input";var jd=Fd;function Nd(e){return(0,L.Z)("MuiFilledInput",e)}var Bd=(0,E.Z)({},kd,(0,z.Z)("MuiFilledInput",["root","underline","input"])),Zd=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Ud=(0,I.ZP)(Td,{shouldForwardProp:function(e){return(0,I.FO)(e)||"classes"===e},name:"MuiFilledInput",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[].concat((0,f.Z)(Cd(e,t)),[!r.disableUnderline&&t.underline])}})((function(e){var t,r,n,a=e.theme,o=e.ownerState,s="light"===a.palette.mode,l=s?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",c=s?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",u=s?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",h=s?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,E.Z)((t={position:"relative",backgroundColor:a.vars?a.vars.palette.FilledInput.bg:c,borderTopLeftRadius:(a.vars||a).shape.borderRadius,borderTopRightRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create("background-color",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),"&:hover":{backgroundColor:a.vars?a.vars.palette.FilledInput.hoverBg:u,"@media (hover: none)":{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:c}}},(0,i.Z)(t,"&.".concat(Bd.focused),{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:c}),(0,i.Z)(t,"&.".concat(Bd.disabled),{backgroundColor:a.vars?a.vars.palette.FilledInput.disabledBg:h}),t),!o.disableUnderline&&(r={"&:after":{borderBottom:"2px solid ".concat(null==(n=(a.vars||a).palette[o.color||"primary"])?void 0:n.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:a.transitions.create("transform",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),pointerEvents:"none"}},(0,i.Z)(r,"&.".concat(Bd.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,i.Z)(r,"&.".concat(Bd.error),{"&:before, &:after":{borderBottomColor:(a.vars||a).palette.error.main},"&:focus-within:after":{transform:"scaleX(1)"}}),(0,i.Z)(r,"&:before",{borderBottom:"1px solid ".concat(a.vars?"rgba(".concat(a.vars.palette.common.onBackgroundChannel," / ").concat(a.vars.opacity.inputUnderline,")"):l),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:a.transitions.create("border-bottom-color",{duration:a.transitions.duration.shorter}),pointerEvents:"none"}),(0,i.Z)(r,"&:hover:not(.".concat(Bd.disabled,", .").concat(Bd.error,"):before"),{borderBottom:"1px solid ".concat((a.vars||a).palette.text.primary)}),(0,i.Z)(r,"&.".concat(Bd.disabled,":before"),{borderBottomStyle:"dotted"}),r),o.startAdornment&&{paddingLeft:12},o.endAdornment&&{paddingRight:12},o.multiline&&(0,E.Z)({padding:"25px 12px 8px"},"small"===o.size&&{paddingTop:21,paddingBottom:4},o.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),Vd=(0,I.ZP)(Ed,{name:"MuiFilledInput",slot:"Input",overridesResolver:Ad})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&(0,i.Z)({"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===r.size&&{paddingTop:21,paddingBottom:4},r.hiddenLabel&&{paddingTop:16,paddingBottom:17},r.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},r.startAdornment&&{paddingLeft:0},r.endAdornment&&{paddingRight:0},r.hiddenLabel&&"small"===r.size&&{paddingTop:8,paddingBottom:9})})),Wd=e.forwardRef((function(e,t){var r,n,i,a,o=(0,P.Z)({props:e,name:"MuiFilledInput"}),s=o.components,l=void 0===s?{}:s,c=o.componentsProps,u=o.fullWidth,h=void 0!==u&&u,d=o.inputComponent,f=void 0===d?"input":d,m=o.multiline,v=void 0!==m&&m,g=o.slotProps,y=o.slots,b=void 0===y?{}:y,_=o.type,w=void 0===_?"text":_,k=(0,T.Z)(o,Zd),S=(0,E.Z)({},o,{fullWidth:h,inputComponent:f,multiline:v,type:w}),C=function(e){var t=e.classes,r={root:["root",!e.disableUnderline&&"underline"],input:["input"]},n=(0,M.Z)(r,Nd,t);return(0,E.Z)({},t,n)}(o),A={root:{ownerState:S},input:{ownerState:S}},I=(null!=g?g:c)?(0,p.Z)(null!=g?g:c,A):A,R=null!=(r=null!=(n=b.root)?n:l.Root)?r:Ud,z=null!=(i=null!=(a=b.input)?a:l.Input)?i:Vd;return(0,x.jsx)(Pd,(0,E.Z)({slots:{root:R,input:z},componentsProps:I,fullWidth:h,inputComponent:f,multiline:v,ref:t,type:w},k,{classes:C}))}));Wd.muiName="Input";var Gd,Hd=Wd,Xd=["children","classes","className","label","notched"],Yd=(0,I.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),qd=(0,I.ZP)("legend")((function(e){var t=e.ownerState,r=e.theme;return(0,E.Z)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:r.transitions.create("width",{duration:150,easing:r.transitions.easing.easeOut})},t.withLabel&&(0,E.Z)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:r.transitions.create("max-width",{duration:50,easing:r.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:r.transitions.create("max-width",{duration:100,easing:r.transitions.easing.easeOut,delay:50})}))}));function $d(e){return(0,L.Z)("MuiOutlinedInput",e)}var Kd=(0,E.Z)({},kd,(0,z.Z)("MuiOutlinedInput",["root","notchedOutline","input"])),Jd=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Qd=(0,I.ZP)(Td,{shouldForwardProp:function(e){return(0,I.FO)(e)||"classes"===e},name:"MuiOutlinedInput",slot:"Root",overridesResolver:Cd})((function(e){var t,r=e.theme,n=e.ownerState,a="light"===r.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,E.Z)((t={position:"relative",borderRadius:(r.vars||r).shape.borderRadius},(0,i.Z)(t,"&:hover .".concat(Kd.notchedOutline),{borderColor:(r.vars||r).palette.text.primary}),(0,i.Z)(t,"@media (hover: none)",(0,i.Z)({},"&:hover .".concat(Kd.notchedOutline),{borderColor:r.vars?"rgba(".concat(r.vars.palette.common.onBackgroundChannel," / 0.23)"):a})),(0,i.Z)(t,"&.".concat(Kd.focused," .").concat(Kd.notchedOutline),{borderColor:(r.vars||r).palette[n.color].main,borderWidth:2}),(0,i.Z)(t,"&.".concat(Kd.error," .").concat(Kd.notchedOutline),{borderColor:(r.vars||r).palette.error.main}),(0,i.Z)(t,"&.".concat(Kd.disabled," .").concat(Kd.notchedOutline),{borderColor:(r.vars||r).palette.action.disabled}),t),n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,E.Z)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),ef=(0,I.ZP)((function(e){var t=e.className,r=e.label,n=e.notched,i=(0,T.Z)(e,Xd),a=null!=r&&""!==r,o=(0,E.Z)({},e,{notched:n,withLabel:a});return(0,x.jsx)(Yd,(0,E.Z)({"aria-hidden":!0,className:t,ownerState:o},i,{children:(0,x.jsx)(qd,{ownerState:o,children:a?(0,x.jsx)("span",{children:r}):Gd||(Gd=(0,x.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(e,t){return t.notchedOutline}})((function(e){var t=e.theme,r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):r}})),tf=(0,I.ZP)(Ed,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Ad})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&(0,i.Z)({"&:-webkit-autofill":{borderRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===r.size&&{padding:"8.5px 14px"},r.multiline&&{padding:0},r.startAdornment&&{paddingLeft:0},r.endAdornment&&{paddingRight:0})})),rf=e.forwardRef((function(t,r){var n,i,a,o,s,l=(0,P.Z)({props:t,name:"MuiOutlinedInput"}),c=l.components,u=void 0===c?{}:c,h=l.fullWidth,d=void 0!==h&&h,f=l.inputComponent,p=void 0===f?"input":f,m=l.label,v=l.multiline,g=void 0!==v&&v,y=l.notched,b=l.slots,_=void 0===b?{}:b,w=l.type,k=void 0===w?"text":w,S=(0,T.Z)(l,Jd),C=function(e){var t=e.classes,r=(0,M.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},$d,t);return(0,E.Z)({},t,r)}(l),A=xd(),I=yd({props:l,muiFormControl:A,states:["required"]}),R=(0,E.Z)({},l,{color:I.color||"primary",disabled:I.disabled,error:I.error,focused:I.focused,formControl:A,fullWidth:d,hiddenLabel:I.hiddenLabel,multiline:g,size:I.size,type:k}),z=null!=(n=null!=(i=_.root)?i:u.Root)?n:Qd,L=null!=(a=null!=(o=_.input)?o:u.Input)?a:tf;return(0,x.jsx)(Pd,(0,E.Z)({slots:{root:z,input:L},renderSuffix:function(t){return(0,x.jsx)(ef,{ownerState:R,className:C.notchedOutline,label:null!=m&&""!==m&&I.required?s||(s=(0,x.jsxs)(e.Fragment,{children:[m,"\xa0","*"]})):m,notched:"undefined"!==typeof y?y:Boolean(t.startAdornment||t.filled||t.focused)})},fullWidth:d,inputComponent:p,multiline:g,ref:r,type:k},S,{classes:(0,E.Z)({},C,{notchedOutline:null})}))}));rf.muiName="Input";var nf=rf;function af(e){return(0,L.Z)("MuiFormLabel",e)}var of=(0,z.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),sf=["children","className","color","component","disabled","error","filled","focused","required"],lf=(0,I.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return(0,E.Z)({},t.root,"secondary"===r.color&&t.colorSecondary,r.filled&&t.filled)}})((function(e){var t,r=e.theme,n=e.ownerState;return(0,E.Z)({color:(r.vars||r).palette.text.secondary},r.typography.body1,(t={lineHeight:"1.4375em",padding:0,position:"relative"},(0,i.Z)(t,"&.".concat(of.focused),{color:(r.vars||r).palette[n.color].main}),(0,i.Z)(t,"&.".concat(of.disabled),{color:(r.vars||r).palette.text.disabled}),(0,i.Z)(t,"&.".concat(of.error),{color:(r.vars||r).palette.error.main}),t))})),cf=(0,I.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(e,t){return t.asterisk}})((function(e){var t=e.theme;return(0,i.Z)({},"&.".concat(of.error),{color:(t.vars||t).palette.error.main})})),uf=e.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiFormLabel"}),n=r.children,i=r.className,a=r.component,o=void 0===a?"label":a,s=(0,T.Z)(r,sf),l=yd({props:r,muiFormControl:xd(),states:["color","required","focused","disabled","error","filled"]}),c=(0,E.Z)({},r,{color:l.color||"primary",component:o,disabled:l.disabled,error:l.error,filled:l.filled,focused:l.focused,required:l.required}),h=function(e){var t=e.classes,r=e.color,n=e.focused,i=e.disabled,a=e.error,o=e.filled,s=e.required,l={root:["root","color".concat((0,R.Z)(r)),i&&"disabled",a&&"error",o&&"filled",n&&"focused",s&&"required"],asterisk:["asterisk",a&&"error"]};return(0,M.Z)(l,af,t)}(c);return(0,x.jsxs)(lf,(0,E.Z)({as:o,ownerState:c,className:(0,u.Z)(h.root,i),ref:t},s,{children:[n,l.required&&(0,x.jsxs)(cf,{ownerState:c,"aria-hidden":!0,className:h.asterisk,children:["\u2009","*"]})]}))}));function hf(e){return(0,L.Z)("MuiInputLabel",e)}(0,z.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var df=["disableAnimation","margin","shrink","variant","className"],ff=(0,I.ZP)(uf,{shouldForwardProp:function(e){return(0,I.FO)(e)||"classes"===e},name:"MuiInputLabel",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[(0,i.Z)({},"& .".concat(of.asterisk),t.asterisk),t.root,r.formControl&&t.formControl,"small"===r.size&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,t[r.variant]]}})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},r.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===r.size&&{transform:"translate(0, 17px) scale(1)"},r.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!r.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===r.variant&&(0,E.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===r.size&&{transform:"translate(12px, 13px) scale(1)"},r.shrink&&(0,E.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===r.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===r.variant&&(0,E.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===r.size&&{transform:"translate(14px, 9px) scale(1)"},r.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))})),pf=e.forwardRef((function(e,t){var r=(0,P.Z)({name:"MuiInputLabel",props:e}),n=r.disableAnimation,i=void 0!==n&&n,a=r.shrink,o=r.className,s=(0,T.Z)(r,df),l=xd(),c=a;"undefined"===typeof c&&l&&(c=l.filled||l.focused||l.adornedStart);var h=yd({props:r,muiFormControl:l,states:["size","variant","required"]}),d=(0,E.Z)({},r,{disableAnimation:i,formControl:l,shrink:c,size:h.size,variant:h.variant,required:h.required}),f=function(e){var t=e.classes,r=e.formControl,n=e.size,i=e.shrink,a={root:["root",r&&"formControl",!e.disableAnimation&&"animated",i&&"shrink","small"===n&&"sizeSmall",e.variant],asterisk:[e.required&&"asterisk"]},o=(0,M.Z)(a,hf,t);return(0,E.Z)({},t,o)}(d);return(0,x.jsx)(ff,(0,E.Z)({"data-shrink":c,ownerState:d,ref:t,className:(0,u.Z)(f.root,o)},s,{classes:f}))}));function mf(e){return(0,L.Z)("MuiFormHelperText",e)}var vf,gf=(0,z.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),yf=["children","className","component","disabled","error","filled","focused","margin","required","variant"],xf=(0,I.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.size&&t["size".concat((0,R.Z)(r.size))],r.contained&&t.contained,r.filled&&t.filled]}})((function(e){var t,r=e.theme,n=e.ownerState;return(0,E.Z)({color:(r.vars||r).palette.text.secondary},r.typography.caption,(t={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},(0,i.Z)(t,"&.".concat(gf.disabled),{color:(r.vars||r).palette.text.disabled}),(0,i.Z)(t,"&.".concat(gf.error),{color:(r.vars||r).palette.error.main}),t),"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),bf=e.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiFormHelperText"}),n=r.children,i=r.className,a=r.component,o=void 0===a?"p":a,s=(0,T.Z)(r,yf),l=yd({props:r,muiFormControl:xd(),states:["variant","size","disabled","error","filled","focused","required"]}),c=(0,E.Z)({},r,{component:o,contained:"filled"===l.variant||"outlined"===l.variant,variant:l.variant,size:l.size,disabled:l.disabled,error:l.error,filled:l.filled,focused:l.focused,required:l.required}),h=function(e){var t=e.classes,r=e.contained,n=e.size,i=e.disabled,a=e.error,o=e.filled,s=e.focused,l=e.required,c={root:["root",i&&"disabled",a&&"error",n&&"size".concat((0,R.Z)(n)),r&&"contained",s&&"focused",o&&"filled",l&&"required"]};return(0,M.Z)(c,mf,t)}(c);return(0,x.jsx)(xf,(0,E.Z)({as:o,ownerState:c,className:(0,u.Z)(h.root,i),ref:t},s,{children:" "===n?vf||(vf=(0,x.jsx)("span",{className:"notranslate",children:"\u200b"})):n}))})),_f=r(8301);function wf(e){var t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}var kf=wf,Sf=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Cf(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function Af(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function Tf(e,t){if(void 0===t)return!0;var r=e.innerText;return void 0===r&&(r=e.textContent),0!==(r=r.trim().toLowerCase()).length&&(t.repeating?r[0]===t.keys[0]:0===r.indexOf(t.keys.join("")))}function Ef(e,t,r,n,i,a){for(var o=!1,s=i(e,t,!!t&&r);s;){if(s===e.firstChild){if(o)return!1;o=!0}var l=!n&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&Tf(s,a)&&!l)return s.focus(),!0;s=i(e,s,r)}return!1}var Mf=e.forwardRef((function(t,r){var n=t.actions,i=t.autoFocus,a=void 0!==i&&i,o=t.autoFocusItem,s=void 0!==o&&o,l=t.children,c=t.className,u=t.disabledItemsFocusable,h=void 0!==u&&u,d=t.disableListWrap,f=void 0!==d&&d,p=t.onKeyDown,m=t.variant,v=void 0===m?"selectedMenu":m,g=(0,T.Z)(t,Sf),y=e.useRef(null),b=e.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,Iu.Z)((function(){a&&y.current.focus()}),[a]),e.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(e,t){var r=!y.current.style.width;if(e.clientHeight<y.current.clientHeight&&r){var n="".concat(kf((0,_f.Z)(e)),"px");y.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=n,y.current.style.width="calc(100% + ".concat(n,")")}return y.current}}}),[]);var _=(0,V.Z)(y,r),w=-1;e.Children.forEach(l,(function(t,r){e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===v&&t.props.selected||-1===w)&&(w=r))}));var k=e.Children.map(l,(function(t,r){if(r===w){var n={};return s&&(n.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===v&&(n.tabIndex=0),e.cloneElement(t,n)}return t}));return(0,x.jsx)(Tu,(0,E.Z)({role:"menu",ref:_,className:c,onKeyDown:function(e){var t=y.current,r=e.key,n=(0,_f.Z)(t).activeElement;if("ArrowDown"===r)e.preventDefault(),Ef(t,n,f,h,Cf);else if("ArrowUp"===r)e.preventDefault(),Ef(t,n,f,h,Af);else if("Home"===r)e.preventDefault(),Ef(t,null,f,h,Cf);else if("End"===r)e.preventDefault(),Ef(t,null,f,h,Af);else if(1===r.length){var i=b.current,a=r.toLowerCase(),o=performance.now();i.keys.length>0&&(o-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&a!==i.keys[0]&&(i.repeating=!1)),i.lastTime=o,i.keys.push(a);var s=n&&!i.repeating&&Tf(n,i);i.previousKeyMatched&&(s||Ef(t,n,!1,h,Cf,i))?e.preventDefault():i.previousKeyMatched=!1}p&&p(e)},tabIndex:a?0:-1},g,{children:k}))})),If=r(3199),Pf=r(7602),Rf=!1,zf="unmounted",Lf="exited",Df="entering",Of="entered",Ff="exiting",jf=function(t){function r(e,r){var n;n=t.call(this,e,r)||this;var i,a=r&&!r.isMounting?e.enter:e.appear;return n.appearStatus=null,e.in?a?(i=Lf,n.appearStatus=Df):i=Of:i=e.unmountOnExit||e.mountOnEnter?zf:Lf,n.state={status:i},n.nextCallback=null,n}mi(r,t),r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===zf?{status:Lf}:null};var n=r.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==Df&&r!==Of&&(t=Df):r!==Df&&r!==Of||(t=Ff)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!==typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Df){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:te.findDOMNode(this);r&&function(e){e.scrollTop}(r)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Lf&&this.setState({status:zf})},n.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,i=this.props.nodeRef?[n]:[te.findDOMNode(this),n],a=i[0],o=i[1],s=this.getTimeouts(),l=n?s.appear:s.enter;!e&&!r||Rf?this.safeSetState({status:Of},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:Df},(function(){t.props.onEntering(a,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:Of},(function(){t.props.onEntered(a,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:te.findDOMNode(this);t&&!Rf?(this.props.onExit(n),this.safeSetState({status:Ff},(function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:Lf},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:Lf},(function(){e.props.onExited(n)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:te.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(r&&!n){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var t=this.state.status;if(t===zf)return null;var r=this.props,n=r.children,i=(r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef,fi(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(vi.Provider,{value:null},"function"===typeof n?n(t,i):e.cloneElement(e.Children.only(n),i))},r}(e.Component);function Nf(){}jf.contextType=vi,jf.propTypes={},jf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Nf,onEntering:Nf,onEntered:Nf,onExit:Nf,onExiting:Nf,onExited:Nf},jf.UNMOUNTED=zf,jf.EXITED=Lf,jf.ENTERING=Df,jf.ENTERED=Of,jf.EXITING=Ff;var Bf=jf,Zf=function(e){return e.scrollTop};function Uf(e,t){var r,n,i=e.timeout,a=e.easing,o=e.style,s=void 0===o?{}:o;return{duration:null!=(r=s.transitionDuration)?r:"number"===typeof i?i:i[t.mode]||0,easing:null!=(n=s.transitionTimingFunction)?n:"object"===typeof a?a[t.mode]:a,delay:s.transitionDelay}}var Vf=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Wf(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var Gf={entering:{opacity:1,transform:Wf(1)},entered:{opacity:1,transform:"none"}},Hf="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Xf=e.forwardRef((function(t,r){var n=t.addEndListener,i=t.appear,a=void 0===i||i,o=t.children,s=t.easing,l=t.in,c=t.onEnter,u=t.onEntered,h=t.onEntering,d=t.onExit,f=t.onExited,p=t.onExiting,m=t.style,v=t.timeout,g=void 0===v?"auto":v,y=t.TransitionComponent,b=void 0===y?Bf:y,_=(0,T.Z)(t,Vf),w=e.useRef(),k=e.useRef(),S=or(),C=e.useRef(null),A=(0,V.Z)(C,o.ref,r),M=function(e){return function(t){if(e){var r=C.current;void 0===t?e(r):e(r,t)}}},I=M(h),P=M((function(e,t){Zf(e);var r,n=Uf({style:m,timeout:g,easing:s},{mode:"enter"}),i=n.duration,a=n.delay,o=n.easing;"auto"===g?(r=S.transitions.getAutoHeightDuration(e.clientHeight),k.current=r):r=i,e.style.transition=[S.transitions.create("opacity",{duration:r,delay:a}),S.transitions.create("transform",{duration:Hf?r:.666*r,delay:a,easing:o})].join(","),c&&c(e,t)})),R=M(u),z=M(p),L=M((function(e){var t,r=Uf({style:m,timeout:g,easing:s},{mode:"exit"}),n=r.duration,i=r.delay,a=r.easing;"auto"===g?(t=S.transitions.getAutoHeightDuration(e.clientHeight),k.current=t):t=n,e.style.transition=[S.transitions.create("opacity",{duration:t,delay:i}),S.transitions.create("transform",{duration:Hf?t:.666*t,delay:Hf?i:i||.333*t,easing:a})].join(","),e.style.opacity=0,e.style.transform=Wf(.75),d&&d(e)})),D=M(f);return e.useEffect((function(){return function(){clearTimeout(w.current)}}),[]),(0,x.jsx)(b,(0,E.Z)({appear:a,in:l,nodeRef:C,onEnter:P,onEntered:R,onEntering:I,onExit:L,onExited:D,onExiting:z,addEndListener:function(e){"auto"===g&&(w.current=setTimeout(e,k.current||0)),n&&n(C.current,e)},timeout:"auto"===g?null:g},_,{children:function(t,r){return e.cloneElement(o,(0,E.Z)({style:(0,E.Z)({opacity:0,transform:Wf(.75),visibility:"exited"!==t||l?void 0:"hidden"},Gf[t],m,o.props.style),ref:A},r))}}))}));Xf.muiSupportAuto=!0;var Yf=Xf,qf=r(9723),$f=r(8956),Kf=r(8949),Jf=r(2971);var Qf=e.forwardRef((function(t,r){var n=t.children,i=t.container,a=t.disablePortal,o=void 0!==a&&a,s=e.useState(null),l=(0,Z.Z)(s,2),c=l[0],u=l[1],h=(0,ld.Z)(e.isValidElement(n)?n.ref:null,r);return(0,hd.Z)((function(){o||u(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,o]),(0,hd.Z)((function(){if(c&&!o)return(0,Jf.Z)(r,c),function(){(0,Jf.Z)(r,null)}}),[r,c,o]),o?e.isValidElement(n)?e.cloneElement(n,{ref:h}):n:(0,x.jsx)(e.Fragment,{children:c?te.createPortal(n,c):c})}));function ep(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function tp(e){return parseInt((0,cd.Z)(e).getComputedStyle(e).paddingRight,10)||0}function rp(e,t,r,n,i){var a=[t,r].concat((0,f.Z)(n));[].forEach.call(e.children,(function(e){var t=-1===a.indexOf(e),r=!function(e){var t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),r="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||r}(e);t&&r&&ep(e,i)}))}function np(e,t){var r=-1;return e.some((function(e,n){return!!t(e)&&(r=n,!0)})),r}function ip(e,t){var r=[],n=e.container;if(!t.disableScrollLock){if(function(e){var t=(0,qf.Z)(e);return t.body===e?(0,cd.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(n)){var i=wf((0,qf.Z)(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight="".concat(tp(n)+i,"px");var a=(0,qf.Z)(n).querySelectorAll(".mui-fixed");[].forEach.call(a,(function(e){r.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(tp(e)+i,"px")}))}var o;if(n.parentNode instanceof DocumentFragment)o=(0,qf.Z)(n).body;else{var s=n.parentElement,l=(0,cd.Z)(n);o="HTML"===(null==s?void 0:s.nodeName)&&"scroll"===l.getComputedStyle(s).overflowY?s:n}r.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return function(){r.forEach((function(e){var t=e.value,r=e.el,n=e.property;t?r.style.setProperty(n,t):r.style.removeProperty(n)}))}}var ap=function(){function e(){_e(this,e),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return ke(e,[{key:"add",value:function(e,t){var r=this.modals.indexOf(e);if(-1!==r)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&ep(e.modalRef,!1);var n=function(e){var t=[];return[].forEach.call(e.children,(function(e){"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);rp(t,e.mount,e.modalRef,n,!0);var i=np(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:n}),r)}},{key:"mount",value:function(e,t){var r=np(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),n=this.containers[r];n.restore||(n.restore=ip(n,t))}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.modals.indexOf(e);if(-1===r)return r;var n=np(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),i=this.containers[n];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(r,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&ep(e.modalRef,t),rp(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(n,1);else{var a=i.modals[i.modals.length-1];a.modalRef&&ep(a.modalRef,!1)}return r}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}(),op=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function sp(e){var t=[],r=[];return Array.from(e.querySelectorAll(op)).forEach((function(e,n){var i=function(e){var t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;var t=function(t){return e.ownerDocument.querySelector('input[type="radio"]'.concat(t))},r=t('[name="'.concat(e.name,'"]:checked'));return r||(r=t('[name="'.concat(e.name,'"]'))),r!==e}(e))}(e)&&(0===i?t.push(e):r.push({documentOrder:n,tabIndex:i,node:e}))})),r.sort((function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex})).map((function(e){return e.node})).concat(t)}function lp(){return!0}var cp=function(t){var r=t.children,n=t.disableAutoFocus,i=void 0!==n&&n,a=t.disableEnforceFocus,o=void 0!==a&&a,s=t.disableRestoreFocus,l=void 0!==s&&s,c=t.getTabbable,u=void 0===c?sp:c,h=t.isEnabled,d=void 0===h?lp:h,f=t.open,p=e.useRef(!1),m=e.useRef(null),v=e.useRef(null),g=e.useRef(null),y=e.useRef(null),b=e.useRef(!1),_=e.useRef(null),w=(0,ld.Z)(r.ref,_),k=e.useRef(null);e.useEffect((function(){f&&_.current&&(b.current=!i)}),[i,f]),e.useEffect((function(){if(f&&_.current){var e=(0,qf.Z)(_.current);return _.current.contains(e.activeElement)||(_.current.hasAttribute("tabIndex")||_.current.setAttribute("tabIndex","-1"),b.current&&_.current.focus()),function(){l||(g.current&&g.current.focus&&(p.current=!0,g.current.focus()),g.current=null)}}}),[f]),e.useEffect((function(){if(f&&_.current){var e=(0,qf.Z)(_.current),t=function(t){var r=_.current;if(null!==r)if(e.hasFocus()&&!o&&d()&&!p.current){if(!r.contains(e.activeElement)){if(t&&y.current!==t.target||e.activeElement!==y.current)y.current=null;else if(null!==y.current)return;if(!b.current)return;var n=[];if(e.activeElement!==m.current&&e.activeElement!==v.current||(n=u(_.current)),n.length>0){var i,a,s=Boolean((null==(i=k.current)?void 0:i.shiftKey)&&"Tab"===(null==(a=k.current)?void 0:a.key)),l=n[0],c=n[n.length-1];"string"!==typeof l&&"string"!==typeof c&&(s?c.focus():l.focus())}else r.focus()}}else p.current=!1},r=function(t){k.current=t,!o&&d()&&"Tab"===t.key&&e.activeElement===_.current&&t.shiftKey&&(p.current=!0,v.current&&v.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",r,!0);var n=setInterval((function(){e.activeElement&&"BODY"===e.activeElement.tagName&&t(null)}),50);return function(){clearInterval(n),e.removeEventListener("focusin",t),e.removeEventListener("keydown",r,!0)}}}),[i,o,l,d,f,u]);var S=function(e){null===g.current&&(g.current=e.relatedTarget),b.current=!0};return(0,x.jsxs)(e.Fragment,{children:[(0,x.jsx)("div",{tabIndex:f?0:-1,onFocus:S,ref:m,"data-testid":"sentinelStart"}),e.cloneElement(r,{ref:w,onFocus:function(e){null===g.current&&(g.current=e.relatedTarget),b.current=!0,y.current=e.target;var t=r.props.onFocus;t&&t(e)}}),(0,x.jsx)("div",{tabIndex:f?0:-1,onFocus:S,ref:v,"data-testid":"sentinelEnd"})]})};function up(e){return(0,L.Z)("MuiModal",e)}(0,z.Z)("MuiModal",["root","hidden"]);function hp(e){if(void 0===e)return{};var t={};return Object.keys(e).filter((function(t){return!(t.match(/^on[A-Z]/)&&"function"===typeof e[t])})).forEach((function(r){t[r]=e[r]})),t}function dp(e){var t=e.getSlotProps,r=e.additionalProps,n=e.externalSlotProps,i=e.externalForwardedProps,a=e.className;if(!t){var o=(0,u.Z)(null==i?void 0:i.className,null==n?void 0:n.className,a,null==r?void 0:r.className),s=od({},null==r?void 0:r.style,null==i?void 0:i.style,null==n?void 0:n.style),l=od({},r,i,n);return o.length>0&&(l.className=o),Object.keys(s).length>0&&(l.style=s),{props:l,internalRef:void 0}}var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};var r={};return Object.keys(e).filter((function(r){return r.match(/^on[A-Z]/)&&"function"===typeof e[r]&&!t.includes(r)})).forEach((function(t){r[t]=e[t]})),r}(od({},i,n)),h=hp(n),d=hp(i),f=t(c),p=(0,u.Z)(null==f?void 0:f.className,null==r?void 0:r.className,a,null==i?void 0:i.className,null==n?void 0:n.className),m=od({},null==f?void 0:f.style,null==r?void 0:r.style,null==i?void 0:i.style,null==n?void 0:n.style),v=od({},f,r,d,h);return p.length>0&&(v.className=p),Object.keys(m).length>0&&(v.style=m),{props:v,internalRef:f.ref}}function fp(e,t){return"function"===typeof e?e(t):e}var pp=["elementType","externalSlotProps","ownerState"];function mp(e){var t,r=e.elementType,n=e.externalSlotProps,i=e.ownerState,a=sd(e,pp),o=fp(n,i),s=dp(od({},a,{externalSlotProps:o})),l=s.props,c=s.internalRef,u=function(e,t,r){return void 0===e||Eu(e)?t:od({},t,{ownerState:od({},t.ownerState,r)})}(r,od({},l,{ref:(0,ld.Z)(c,null==o?void 0:o.ref,null==(t=e.additionalProps)?void 0:t.ref)}),i);return u}var vp=["children","classes","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"];var gp=new ap,yp=e.forwardRef((function(t,r){var n,i,a=t.children,o=t.classes,s=t.closeAfterTransition,l=void 0!==s&&s,c=t.component,u=t.container,h=t.disableAutoFocus,d=void 0!==h&&h,f=t.disableEnforceFocus,p=void 0!==f&&f,m=t.disableEscapeKeyDown,v=void 0!==m&&m,g=t.disablePortal,y=void 0!==g&&g,b=t.disableRestoreFocus,_=void 0!==b&&b,w=t.disableScrollLock,k=void 0!==w&&w,S=t.hideBackdrop,C=void 0!==S&&S,A=t.keepMounted,T=void 0!==A&&A,E=t.manager,I=void 0===E?gp:E,P=t.onBackdropClick,R=t.onClose,z=t.onKeyDown,L=t.open,D=t.onTransitionEnter,O=t.onTransitionExited,F=t.slotProps,j=void 0===F?{}:F,N=t.slots,B=void 0===N?{}:N,U=sd(t,vp),V=e.useState(!L),W=(0,Z.Z)(V,2),G=W[0],H=W[1],X=e.useRef({}),Y=e.useRef(null),q=e.useRef(null),$=(0,ld.Z)(q,r),K=function(e){return!!e&&e.props.hasOwnProperty("in")}(a),J=null==(n=t["aria-hidden"])||n,Q=function(){return X.current.modalRef=q.current,X.current.mountNode=Y.current,X.current},ee=function(){I.mount(Q(),{disableScrollLock:k}),q.current&&(q.current.scrollTop=0)},te=(0,$f.Z)((function(){var e=function(e){return"function"===typeof e?e():e}(u)||(0,qf.Z)(Y.current).body;I.add(Q(),e),q.current&&ee()})),re=e.useCallback((function(){return I.isTopModal(Q())}),[I]),ne=(0,$f.Z)((function(e){Y.current=e,e&&q.current&&(L&&re()?ee():ep(q.current,J))})),ie=e.useCallback((function(){I.remove(Q(),J)}),[I,J]);e.useEffect((function(){return function(){ie()}}),[ie]),e.useEffect((function(){L?te():K&&l||ie()}),[L,ie,K,l,te]);var ae=od({},t,{classes:o,closeAfterTransition:l,disableAutoFocus:d,disableEnforceFocus:p,disableEscapeKeyDown:v,disablePortal:y,disableRestoreFocus:_,disableScrollLock:k,exited:G,hideBackdrop:C,keepMounted:T}),oe=function(e){var t=e.open,r=e.exited,n=e.classes,i={root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]};return(0,M.Z)(i,up,n)}(ae),se={};void 0===a.props.tabIndex&&(se.tabIndex="-1"),K&&(se.onEnter=(0,Kf.Z)((function(){H(!1),D&&D()}),a.props.onEnter),se.onExited=(0,Kf.Z)((function(){H(!0),O&&O(),l&&ie()}),a.props.onExited));var le=null!=(i=null!=c?c:B.root)?i:"div",ce=mp({elementType:le,externalSlotProps:j.root,externalForwardedProps:U,additionalProps:{ref:$,role:"presentation",onKeyDown:function(e){z&&z(e),"Escape"===e.key&&re()&&(v||(e.stopPropagation(),R&&R(e,"escapeKeyDown")))}},className:oe.root,ownerState:ae}),ue=B.backdrop,he=mp({elementType:ue,externalSlotProps:j.backdrop,additionalProps:{"aria-hidden":!0,onClick:function(e){e.target===e.currentTarget&&(P&&P(e),R&&R(e,"backdropClick"))},open:L},className:oe.backdrop,ownerState:ae});return T||L||K&&!G?(0,x.jsx)(Qf,{ref:ne,container:u,disablePortal:y,children:(0,x.jsxs)(le,od({},ce,{children:[!C&&ue?(0,x.jsx)(ue,od({},he)):null,(0,x.jsx)(cp,{disableEnforceFocus:p,disableAutoFocus:d,disableRestoreFocus:_,isEnabled:re,open:L,children:e.cloneElement(a,se)})]}))}):null})),xp=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],bp={entering:{opacity:1},entered:{opacity:1}},_p=e.forwardRef((function(t,r){var n=or(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},a=t.addEndListener,o=t.appear,s=void 0===o||o,l=t.children,c=t.easing,u=t.in,h=t.onEnter,d=t.onEntered,f=t.onEntering,p=t.onExit,m=t.onExited,v=t.onExiting,g=t.style,y=t.timeout,b=void 0===y?i:y,_=t.TransitionComponent,w=void 0===_?Bf:_,k=(0,T.Z)(t,xp),S=e.useRef(null),C=(0,V.Z)(S,l.ref,r),A=function(e){return function(t){if(e){var r=S.current;void 0===t?e(r):e(r,t)}}},M=A(f),I=A((function(e,t){Zf(e);var r=Uf({style:g,timeout:b,easing:c},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),h&&h(e,t)})),P=A(d),R=A(v),z=A((function(e){var t=Uf({style:g,timeout:b,easing:c},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),p&&p(e)})),L=A(m);return(0,x.jsx)(w,(0,E.Z)({appear:s,in:u,nodeRef:S,onEnter:I,onEntered:P,onEntering:M,onExit:z,onExited:L,onExiting:R,addEndListener:function(e){a&&a(S.current,e)},timeout:b},k,{children:function(t,r){return e.cloneElement(l,(0,E.Z)({style:(0,E.Z)({opacity:0,visibility:"exited"!==t||u?void 0:"hidden"},bp[t],g,l.props.style),ref:C},r))}}))})),wp=_p;function kp(e){return(0,L.Z)("MuiBackdrop",e)}(0,z.Z)("MuiBackdrop",["root","invisible"]);var Sp=["children","component","components","componentsProps","className","invisible","open","slotProps","slots","transitionDuration","TransitionComponent"],Cp=(0,I.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.invisible&&t.invisible]}})((function(e){var t=e.ownerState;return(0,E.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),Ap=e.forwardRef((function(e,t){var r,n,i,a=(0,P.Z)({props:e,name:"MuiBackdrop"}),o=a.children,s=a.component,l=void 0===s?"div":s,c=a.components,h=void 0===c?{}:c,d=a.componentsProps,f=void 0===d?{}:d,p=a.className,m=a.invisible,v=void 0!==m&&m,g=a.open,y=a.slotProps,b=void 0===y?{}:y,_=a.slots,w=void 0===_?{}:_,k=a.transitionDuration,S=a.TransitionComponent,C=void 0===S?wp:S,A=(0,T.Z)(a,Sp),I=(0,E.Z)({},a,{component:l,invisible:v}),R=function(e){var t=e.classes,r={root:["root",e.invisible&&"invisible"]};return(0,M.Z)(r,kp,t)}(I),z=null!=(r=b.root)?r:f.root;return(0,x.jsx)(C,(0,E.Z)({in:g,timeout:k},A,{children:(0,x.jsx)(Cp,(0,E.Z)({"aria-hidden":!0},z,{as:null!=(n=null!=(i=w.root)?i:h.Root)?n:l,className:(0,u.Z)(R.root,p,null==z?void 0:z.className),ownerState:(0,E.Z)({},I,null==z?void 0:z.ownerState),classes:R,ref:t,children:o}))}))})),Tp=["BackdropComponent","BackdropProps","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],Ep=(0,I.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,!r.open&&r.exited&&t.hidden]}})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!r.open&&r.exited&&{visibility:"hidden"})})),Mp=(0,I.ZP)(Ap,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(e,t){return t.backdrop}})({zIndex:-1}),Ip=e.forwardRef((function(t,r){var n,i,a,o,s,l,c=(0,P.Z)({name:"MuiModal",props:t}),u=c.BackdropComponent,h=void 0===u?Mp:u,d=c.BackdropProps,f=c.closeAfterTransition,p=void 0!==f&&f,m=c.children,v=c.component,g=c.components,y=void 0===g?{}:g,b=c.componentsProps,_=void 0===b?{}:b,w=c.disableAutoFocus,k=void 0!==w&&w,S=c.disableEnforceFocus,C=void 0!==S&&S,A=c.disableEscapeKeyDown,M=void 0!==A&&A,I=c.disablePortal,R=void 0!==I&&I,z=c.disableRestoreFocus,L=void 0!==z&&z,D=c.disableScrollLock,O=void 0!==D&&D,F=c.hideBackdrop,j=void 0!==F&&F,N=c.keepMounted,B=void 0!==N&&N,U=c.slotProps,V=c.slots,W=c.theme,G=(0,T.Z)(c,Tp),H=e.useState(!0),X=(0,Z.Z)(H,2),Y=X[0],q=X[1],$={closeAfterTransition:p,disableAutoFocus:k,disableEnforceFocus:C,disableEscapeKeyDown:M,disablePortal:R,disableRestoreFocus:L,disableScrollLock:O,hideBackdrop:j,keepMounted:B},K=(0,E.Z)({},c,$,{exited:Y}),J=function(e){return e.classes}(K),Q=null!=(n=null!=(i=null==V?void 0:V.root)?i:y.Root)?n:Ep,ee=null!=(a=null!=(o=null==V?void 0:V.backdrop)?o:y.Backdrop)?a:h,te=null!=(s=null==U?void 0:U.root)?s:_.root,re=null!=(l=null==U?void 0:U.backdrop)?l:_.backdrop;return(0,x.jsx)(yp,(0,E.Z)({slots:{root:Q,backdrop:ee},slotProps:{root:function(){return(0,E.Z)({},fp(te,K),!Eu(Q)&&{as:v,theme:W})},backdrop:function(){return(0,E.Z)({},d,fp(re,K))}},onTransitionEnter:function(){return q(!1)},onTransitionExited:function(){return q(!0)},ref:r},G,{classes:J},$,{children:m}))}));function Pp(e){return(0,L.Z)("MuiPopover",e)}(0,z.Z)("MuiPopover",["root","paper"]);var Rp=["onEntering"],zp=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function Lp(e,t){var r=0;return"number"===typeof t?r=t:"center"===t?r=e.height/2:"bottom"===t&&(r=e.height),r}function Dp(e,t){var r=0;return"number"===typeof t?r=t:"center"===t?r=e.width/2:"right"===t&&(r=e.width),r}function Op(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function Fp(e){return"function"===typeof e?e():e}var jp=(0,I.ZP)(Ip,{name:"MuiPopover",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),Np=(0,I.ZP)(en,{name:"MuiPopover",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Bp=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiPopover"}),i=n.action,a=n.anchorEl,o=n.anchorOrigin,s=void 0===o?{vertical:"top",horizontal:"left"}:o,l=n.anchorPosition,c=n.anchorReference,h=void 0===c?"anchorEl":c,d=n.children,f=n.className,p=n.container,m=n.elevation,v=void 0===m?8:m,g=n.marginThreshold,y=void 0===g?16:g,b=n.open,_=n.PaperProps,w=void 0===_?{}:_,k=n.transformOrigin,S=void 0===k?{vertical:"top",horizontal:"left"}:k,C=n.TransitionComponent,A=void 0===C?Yf:C,I=n.transitionDuration,R=void 0===I?"auto":I,z=n.TransitionProps,L=(z=void 0===z?{}:z).onEntering,D=(0,T.Z)(n.TransitionProps,Rp),O=(0,T.Z)(n,zp),F=e.useRef(),j=(0,V.Z)(F,w.ref),N=(0,E.Z)({},n,{anchorOrigin:s,anchorReference:h,elevation:v,marginThreshold:y,PaperProps:w,transformOrigin:S,TransitionComponent:A,transitionDuration:R,TransitionProps:D}),B=function(e){var t=e.classes;return(0,M.Z)({root:["root"],paper:["paper"]},Pp,t)}(N),U=e.useCallback((function(){if("anchorPosition"===h)return l;var e=Fp(a),t=(e&&1===e.nodeType?e:(0,_f.Z)(F.current).body).getBoundingClientRect();return{top:t.top+Lp(t,s.vertical),left:t.left+Dp(t,s.horizontal)}}),[a,s.horizontal,s.vertical,l,h]),W=e.useCallback((function(e){return{vertical:Lp(e,S.vertical),horizontal:Dp(e,S.horizontal)}}),[S.horizontal,S.vertical]),G=e.useCallback((function(e){var t={width:e.offsetWidth,height:e.offsetHeight},r=W(t);if("none"===h)return{top:null,left:null,transformOrigin:Op(r)};var n=U(),i=n.top-r.vertical,o=n.left-r.horizontal,s=i+t.height,l=o+t.width,c=(0,Pf.Z)(Fp(a)),u=c.innerHeight-y,d=c.innerWidth-y;if(i<y){var f=i-y;i-=f,r.vertical+=f}else if(s>u){var p=s-u;i-=p,r.vertical+=p}if(o<y){var m=o-y;o-=m,r.horizontal+=m}else if(l>d){var v=l-d;o-=v,r.horizontal+=v}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:Op(r)}}),[a,h,U,W,y]),H=e.useState(b),X=(0,Z.Z)(H,2),Y=X[0],q=X[1],$=e.useCallback((function(){var e=F.current;if(e){var t=G(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,q(!0)}}),[G]);e.useEffect((function(){b&&$()})),e.useImperativeHandle(i,(function(){return b?{updatePosition:function(){$()}}:null}),[b,$]),e.useEffect((function(){if(b){var e=(0,If.Z)((function(){$()})),t=(0,Pf.Z)(a);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[a,b,$]);var K=R;"auto"!==R||A.muiSupportAuto||(K=void 0);var J=p||(a?(0,_f.Z)(Fp(a)).body:void 0);return(0,x.jsx)(jp,(0,E.Z)({BackdropProps:{invisible:!0},className:(0,u.Z)(B.root,f),container:J,open:b,ref:r,ownerState:N},O,{children:(0,x.jsx)(A,(0,E.Z)({appear:!0,in:b,onEntering:function(e,t){L&&L(e,t),$()},onExited:function(){q(!1)},timeout:K},D,{children:(0,x.jsx)(Np,(0,E.Z)({elevation:v},w,{ref:j,className:(0,u.Z)(B.paper,w.className)},Y?void 0:{style:(0,E.Z)({},w.style,{opacity:0})},{ownerState:N,children:d}))}))}))}));function Zp(e){return(0,L.Z)("MuiMenu",e)}(0,z.Z)("MuiMenu",["root","paper","list"]);var Up=["onEntering"],Vp=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],Wp={vertical:"top",horizontal:"right"},Gp={vertical:"top",horizontal:"left"},Hp=(0,I.ZP)(Bp,{shouldForwardProp:function(e){return(0,I.FO)(e)||"classes"===e},name:"MuiMenu",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),Xp=(0,I.ZP)(en,{name:"MuiMenu",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Yp=(0,I.ZP)(Mf,{name:"MuiMenu",slot:"List",overridesResolver:function(e,t){return t.list}})({outline:0}),qp=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiMenu"}),i=n.autoFocus,a=void 0===i||i,o=n.children,s=n.disableAutoFocusItem,l=void 0!==s&&s,c=n.MenuListProps,h=void 0===c?{}:c,d=n.onClose,f=n.open,p=n.PaperProps,m=void 0===p?{}:p,v=n.PopoverClasses,g=n.transitionDuration,y=void 0===g?"auto":g,b=n.TransitionProps,_=(b=void 0===b?{}:b).onEntering,w=n.variant,k=void 0===w?"selectedMenu":w,S=(0,T.Z)(n.TransitionProps,Up),C=(0,T.Z)(n,Vp),A=or(),I="rtl"===A.direction,R=(0,E.Z)({},n,{autoFocus:a,disableAutoFocusItem:l,MenuListProps:h,onEntering:_,PaperProps:m,transitionDuration:y,TransitionProps:S,variant:k}),z=function(e){var t=e.classes;return(0,M.Z)({root:["root"],paper:["paper"],list:["list"]},Zp,t)}(R),L=a&&!l&&f,D=e.useRef(null),O=-1;return e.Children.map(o,(function(t,r){e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===k&&t.props.selected||-1===O)&&(O=r))})),(0,x.jsx)(Hp,(0,E.Z)({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:I?"right":"left"},transformOrigin:I?Wp:Gp,PaperProps:(0,E.Z)({component:Xp},m,{classes:(0,E.Z)({},m.classes,{root:z.paper})}),className:z.root,open:f,ref:r,transitionDuration:y,TransitionProps:(0,E.Z)({onEntering:function(e,t){D.current&&D.current.adjustStyleForScrollbar(e,A),_&&_(e,t)}},S),ownerState:R},C,{classes:v,children:(0,x.jsx)(Yp,(0,E.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),d&&d(e,"tabKeyDown"))},actions:D,autoFocus:a&&(-1===O||l),autoFocusItem:L,variant:k},h,{className:(0,u.Z)(z.list,h.className),children:o}))}))}));function $p(e){return(0,L.Z)("MuiNativeSelect",e)}var Kp=(0,z.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),Jp=["className","disabled","IconComponent","inputRef","variant"],Qp=function(e){var t,r=e.ownerState,n=e.theme;return(0,E.Z)((t={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,E.Z)({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"}},(0,i.Z)(t,"&.".concat(Kp.disabled),{cursor:"default"}),(0,i.Z)(t,"&[multiple]",{height:"auto"}),(0,i.Z)(t,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:(n.vars||n).palette.background.paper}),(0,i.Z)(t,"&&&",{paddingRight:24,minWidth:16}),t),"filled"===r.variant&&{"&&&":{paddingRight:32}},"outlined"===r.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},em=(0,I.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:I.FO,overridesResolver:function(e,t){var r=e.ownerState;return[t.select,t[r.variant],(0,i.Z)({},"&.".concat(Kp.multiple),t.multiple)]}})(Qp),tm=function(e){var t=e.ownerState,r=e.theme;return(0,E.Z)((0,i.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(r.vars||r).palette.action.active},"&.".concat(Kp.disabled),{color:(r.vars||r).palette.action.disabled}),t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},rm=(0,I.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(e,t){var r=e.ownerState;return[t.icon,r.variant&&t["icon".concat((0,R.Z)(r.variant))],r.open&&t.iconOpen]}})(tm),nm=e.forwardRef((function(t,r){var n=t.className,i=t.disabled,a=t.IconComponent,o=t.inputRef,s=t.variant,l=void 0===s?"standard":s,c=(0,T.Z)(t,Jp),h=(0,E.Z)({},t,{disabled:i,variant:l}),d=function(e){var t=e.classes,r=e.variant,n=e.disabled,i=e.multiple,a=e.open,o={select:["select",r,n&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,R.Z)(r)),a&&"iconOpen",n&&"disabled"]};return(0,M.Z)(o,$p,t)}(h);return(0,x.jsxs)(e.Fragment,{children:[(0,x.jsx)(em,(0,E.Z)({ownerState:h,className:(0,u.Z)(d.select,n),disabled:i,ref:o||r},c)),t.multiple?null:(0,x.jsx)(rm,{as:a,ownerState:h,className:d.icon})]})})),im=r(8278);function am(e){return(0,L.Z)("MuiSelect",e)}var om,sm=(0,z.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),lm=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],cm=(0,I.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(e,t){var r=e.ownerState;return[(0,i.Z)({},"&.".concat(sm.select),t.select),(0,i.Z)({},"&.".concat(sm.select),t[r.variant]),(0,i.Z)({},"&.".concat(sm.multiple),t.multiple)]}})(Qp,(0,i.Z)({},"&.".concat(sm.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),um=(0,I.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(e,t){var r=e.ownerState;return[t.icon,r.variant&&t["icon".concat((0,R.Z)(r.variant))],r.open&&t.iconOpen]}})(tm),hm=(0,I.ZP)("input",{shouldForwardProp:function(e){return(0,I.Dz)(e)&&"classes"!==e},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(e,t){return t.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function dm(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function fm(e){return null==e||"string"===typeof e&&!e.trim()}var pm,mm,vm=e.forwardRef((function(t,r){var n=t["aria-describedby"],i=t["aria-label"],a=t.autoFocus,o=t.autoWidth,s=t.children,l=t.className,c=t.defaultOpen,h=t.defaultValue,d=t.disabled,f=t.displayEmpty,p=t.IconComponent,m=t.inputRef,v=t.labelId,g=t.MenuProps,y=void 0===g?{}:g,b=t.multiple,_=t.name,w=t.onBlur,k=t.onChange,S=t.onClose,C=t.onFocus,A=t.onOpen,I=t.open,P=t.readOnly,z=t.renderValue,L=t.SelectDisplayProps,D=void 0===L?{}:L,O=t.tabIndex,F=t.value,j=t.variant,N=void 0===j?"standard":j,B=(0,T.Z)(t,lm),U=(0,im.Z)({controlled:F,default:h,name:"Select"}),W=(0,Z.Z)(U,2),G=W[0],H=W[1],X=(0,im.Z)({controlled:I,default:c,name:"Select"}),Y=(0,Z.Z)(X,2),q=Y[0],$=Y[1],K=e.useRef(null),J=e.useRef(null),Q=e.useState(null),ee=(0,Z.Z)(Q,2),te=ee[0],re=ee[1],ne=e.useRef(null!=I).current,ie=e.useState(),ae=(0,Z.Z)(ie,2),oe=ae[0],se=ae[1],le=(0,V.Z)(r,m),ce=e.useCallback((function(e){J.current=e,e&&re(e)}),[]),ue=null==te?void 0:te.parentNode;e.useImperativeHandle(le,(function(){return{focus:function(){J.current.focus()},node:K.current,value:G}}),[G]),e.useEffect((function(){c&&q&&te&&!ne&&(se(o?null:ue.clientWidth),J.current.focus())}),[te,o]),e.useEffect((function(){a&&J.current.focus()}),[a]),e.useEffect((function(){if(v){var e=(0,_f.Z)(J.current).getElementById(v);if(e){var t=function(){getSelection().isCollapsed&&J.current.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[v]);var he,de,fe=function(e,t){e?A&&A(t):S&&S(t),ne||(se(o?null:ue.clientWidth),$(e))},pe=e.Children.toArray(s),me=function(e){return function(t){var r;if(t.currentTarget.hasAttribute("tabindex")){if(b){r=Array.isArray(G)?G.slice():[];var n=G.indexOf(e.props.value);-1===n?r.push(e.props.value):r.splice(n,1)}else r=e.props.value;if(e.props.onClick&&e.props.onClick(t),G!==r&&(H(r),k)){var i=t.nativeEvent||t,a=new i.constructor(i.type,i);Object.defineProperty(a,"target",{writable:!0,value:{value:r,name:_}}),k(a,e)}b||fe(!1,t)}}},ve=null!==te&&q;delete B["aria-invalid"];var ge=[],ye=!1;(Jh({value:G})||f)&&(z?he=z(G):ye=!0);var xe=pe.map((function(t,r,n){var i,a,o,s,l;if(!e.isValidElement(t))return null;if(b){if(!Array.isArray(G))throw new Error((0,ad.Z)(2));l=G.some((function(e){return dm(e,t.props.value)})),l&&ye&&ge.push(t.props.children)}else(l=dm(G,t.props.value))&&ye&&(de=t.props.children);if(l&&!0,void 0===t.props.value)return e.cloneElement(t,{"aria-readonly":!0,role:"option"});return e.cloneElement(t,{"aria-selected":l?"true":"false",onClick:me(t),onKeyUp:function(e){" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:void 0===(null==(i=n[0])||null==(a=i.props)?void 0:a.value)||!0===(null==(o=n[0])||null==(s=o.props)?void 0:s.disabled)?function(){if(G)return l;var e=n.find((function(e){var t;return void 0!==(null==e||null==(t=e.props)?void 0:t.value)&&!0!==e.props.disabled}));return t===e||l}():l,value:void 0,"data-value":t.props.value})}));ye&&(he=b?0===ge.length?null:ge.reduce((function(e,t,r){return e.push(t),r<ge.length-1&&e.push(", "),e}),[]):de);var be,_e=oe;!o&&ne&&te&&(_e=ue.clientWidth),be="undefined"!==typeof O?O:d?null:0;var we=D.id||(_?"mui-component-select-".concat(_):void 0),ke=(0,E.Z)({},t,{variant:N,value:G,open:ve}),Se=function(e){var t=e.classes,r=e.variant,n=e.disabled,i=e.multiple,a=e.open,o={select:["select",r,n&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,R.Z)(r)),a&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return(0,M.Z)(o,am,t)}(ke);return(0,x.jsxs)(e.Fragment,{children:[(0,x.jsx)(cm,(0,E.Z)({ref:ce,tabIndex:be,role:"button","aria-disabled":d?"true":void 0,"aria-expanded":ve?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[v,we].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:function(e){if(!P){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),fe(!0,e))}},onMouseDown:d||P?null:function(e){0===e.button&&(e.preventDefault(),J.current.focus(),fe(!0,e))},onBlur:function(e){!ve&&w&&(Object.defineProperty(e,"target",{writable:!0,value:{value:G,name:_}}),w(e))},onFocus:C},D,{ownerState:ke,className:(0,u.Z)(D.className,Se.select,l),id:we,children:fm(he)?om||(om=(0,x.jsx)("span",{className:"notranslate",children:"\u200b"})):he})),(0,x.jsx)(hm,(0,E.Z)({value:Array.isArray(G)?G.join(","):G,name:_,ref:K,"aria-hidden":!0,onChange:function(e){var t=pe.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var r=pe[t];H(r.props.value),k&&k(e,r)}},tabIndex:-1,disabled:d,className:Se.nativeInput,autoFocus:a,ownerState:ke},B)),(0,x.jsx)(um,{as:p,className:Se.icon,ownerState:ke}),(0,x.jsx)(qp,(0,E.Z)({id:"menu-".concat(_||""),anchorEl:ue,open:ve,onClose:function(e){fe(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:(0,E.Z)({"aria-labelledby":v,role:"listbox",disableListWrap:!0},y.MenuListProps),PaperProps:(0,E.Z)({},y.PaperProps,{style:(0,E.Z)({minWidth:_e},null!=y.PaperProps?y.PaperProps.style:null)}),children:xe}))]})})),gm=vm,ym=(0,ti.Z)((0,x.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),xm=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],bm={name:"MuiSelect",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(e){return(0,I.FO)(e)&&"variant"!==e},slot:"Root"},_m=(0,I.ZP)(jd,bm)(""),wm=(0,I.ZP)(nf,bm)(""),km=(0,I.ZP)(Hd,bm)(""),Sm=e.forwardRef((function(t,r){var n=(0,P.Z)({name:"MuiSelect",props:t}),i=n.autoWidth,a=void 0!==i&&i,o=n.children,s=n.classes,l=void 0===s?{}:s,c=n.className,h=n.defaultOpen,d=void 0!==h&&h,f=n.displayEmpty,m=void 0!==f&&f,v=n.IconComponent,g=void 0===v?ym:v,y=n.id,b=n.input,_=n.inputProps,w=n.label,k=n.labelId,S=n.MenuProps,C=n.multiple,A=void 0!==C&&C,M=n.native,I=void 0!==M&&M,R=n.onClose,z=n.onOpen,L=n.open,D=n.renderValue,O=n.SelectDisplayProps,F=n.variant,j=void 0===F?"outlined":F,N=(0,T.Z)(n,xm),B=I?nm:gm,Z=yd({props:n,muiFormControl:xd(),states:["variant"]}).variant||j,U=b||{standard:pm||(pm=(0,x.jsx)(_m,{})),outlined:(0,x.jsx)(wm,{label:w}),filled:mm||(mm=(0,x.jsx)(km,{}))}[Z],W=function(e){return e.classes}((0,E.Z)({},n,{variant:Z,classes:l})),G=(0,V.Z)(r,U.ref);return(0,x.jsx)(e.Fragment,{children:e.cloneElement(U,(0,E.Z)({inputComponent:B,inputProps:(0,E.Z)({children:o,IconComponent:g,variant:Z,type:void 0,multiple:A},I?{id:y}:{autoWidth:a,defaultOpen:d,displayEmpty:m,labelId:k,MenuProps:S,onClose:R,onOpen:z,open:L,renderValue:D,SelectDisplayProps:(0,E.Z)({id:y},O)},_,{classes:_?(0,p.Z)(W,_.classes):W},b?b.props.inputProps:{})},A&&I&&"outlined"===Z?{notched:!0}:{},{ref:G,className:(0,u.Z)(U.props.className,c)},!b&&{variant:Z},N))})}));Sm.muiName="Select";var Cm=Sm;function Am(e){return(0,L.Z)("MuiTextField",e)}(0,z.Z)("MuiTextField",["root"]);var Tm=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Em={standard:jd,filled:Hd,outlined:nf},Mm=(0,I.ZP)(nd,{name:"MuiTextField",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),Im=e.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiTextField"}),n=r.autoComplete,i=r.autoFocus,a=void 0!==i&&i,o=r.children,s=r.className,l=r.color,c=void 0===l?"primary":l,h=r.defaultValue,d=r.disabled,f=void 0!==d&&d,p=r.error,m=void 0!==p&&p,v=r.FormHelperTextProps,g=r.fullWidth,y=void 0!==g&&g,b=r.helperText,_=r.id,w=r.InputLabelProps,k=r.inputProps,S=r.InputProps,C=r.inputRef,A=r.label,I=r.maxRows,R=r.minRows,z=r.multiline,L=void 0!==z&&z,D=r.name,O=r.onBlur,F=r.onChange,j=r.onFocus,N=r.placeholder,B=r.required,Z=void 0!==B&&B,U=r.rows,V=r.select,W=void 0!==V&&V,G=r.SelectProps,H=r.type,X=r.value,Y=r.variant,q=void 0===Y?"outlined":Y,$=(0,T.Z)(r,Tm),K=(0,E.Z)({},r,{autoFocus:a,color:c,disabled:f,error:m,fullWidth:y,multiline:L,required:Z,select:W,variant:q}),J=function(e){var t=e.classes;return(0,M.Z)({root:["root"]},Am,t)}(K);var Q={};"outlined"===q&&(w&&"undefined"!==typeof w.shrink&&(Q.notched=w.shrink),Q.label=A),W&&(G&&G.native||(Q.id=void 0),Q["aria-describedby"]=void 0);var ee=(0,id.Z)(_),te=b&&ee?"".concat(ee,"-helper-text"):void 0,re=A&&ee?"".concat(ee,"-label"):void 0,ne=Em[q],ie=(0,x.jsx)(ne,(0,E.Z)({"aria-describedby":te,autoComplete:n,autoFocus:a,defaultValue:h,fullWidth:y,multiline:L,name:D,rows:U,maxRows:I,minRows:R,type:H,value:X,id:ee,inputRef:C,onBlur:O,onChange:F,onFocus:j,placeholder:N,inputProps:k},Q,S));return(0,x.jsxs)(Mm,(0,E.Z)({className:(0,u.Z)(J.root,s),disabled:f,error:m,fullWidth:y,ref:t,required:Z,color:c,variant:q,ownerState:K},$,{children:[null!=A&&""!==A&&(0,x.jsx)(pf,(0,E.Z)({htmlFor:ee,id:re},w,{children:A})),W?(0,x.jsx)(Cm,(0,E.Z)({"aria-describedby":te,id:ee,labelId:re,value:X,input:ie},G,{children:o})):ie,b&&(0,x.jsx)(bf,(0,E.Z)({id:te},v,{children:b}))]}))})),Pm=function(t){var r=t.itemId,n=t.responses,a=t.isAdmin,s=t.sx,l=(t.navigate,t.isNewTicket,Mt(),be(),(0,e.useState)({title:"",description:"",isAdmin:!1})),c=(0,Z.Z)(l,2),u=c[0],h=c[1],d=ue((function(e){return e.accounts.currentAccount})),p=function(e){var t;h(o(o({},u),{},(t={},(0,i.Z)(t,e.currentTarget.name,e.currentTarget.value),(0,i.Z)(t,"isAdmin",a),t)))};return(0,x.jsxs)(S,{className:"u-box-light",height:"auto",mt:3,p:3,sx:o({},s),children:[(0,x.jsxs)(S,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,x.jsx)(B,{variant:"h5",color:"white",children:"Submit A Ticket"}),(0,x.jsx)(fh,{onClick:function(){return function(){var e=n?(0,f.Z)(n):[];r&&xu.updateTicketResponse(r,[].concat((0,f.Z)(e),[u])),h({title:"",description:"",isAdmin:d.isAdmin})}()},variant:"contained",color:"primary",children:"Post Ticket"})]}),(0,x.jsx)(S,{mt:2,children:(0,x.jsxs)(nd,{sx:{width:"100%"},children:[(0,x.jsx)(Im,{id:"comment-title",name:"title",value:u.title,sx:{width:"100%"},required:!0,label:"Enter Title",type:"text",onChange:function(e){return p(e)}}),(0,x.jsx)(Im,{id:"comment-description",name:"description",value:u.description,sx:{width:"100%",mt:2},required:!0,label:"Enter Description",size:"small",multiline:!0,rows:6,onChange:function(e){return p(e)}})]})})]})},Rm=function(){var t=Pt().id,r=Mt(),n=ue((function(e){return e.tickets})),i=ue((function(e){return e.accounts.currentAccount})),a=(0,e.useState)(),o=(0,Z.Z)(a,2),s=o[0],l=o[1],c=[{title:"Close",color:"success",handler:fu(t,!0)},{title:"Open",color:"primary",handler:fu(t,!1)},{title:"Delete",color:"error",handler:function(){return e=t,function(){xu.deleteTicket(e)};var e}}];return(0,e.useEffect)((function(){var e;!n.isLoading&&t?(e=n.tickets.find((function(e){return e.itemId===t})),console.log(e),e?l(e):r("".concat("/#/","404"))):!n.isLoading&&t&&void 0===e?console.log("here"):t||console.log("there")}),[n]),(0,x.jsxs)(yr,{container:!0,spacing:2,children:[(0,x.jsxs)(yr,{item:!0,xs:12,lg:7,mx:{xs:2,md:0},children:[(0,x.jsx)($h,{data:s?s.responses:[{title:"",description:"",isAdmin:!1}]}),n.isLoading&&s?(0,x.jsx)(Kn,{sx:{height:"150px"}}):s?(0,x.jsx)(Pm,{itemId:s?s.itemId:"",isAdmin:!(!s||void 0===s.accounts)&&s.accounts.isAdmin,responses:s?s.responses:[{title:"",description:"",isAdmin:!1}]}):(0,x.jsx)(Kn,{})]}),(0,x.jsx)(yr,{item:!0,xs:12,md:5,mx:{xs:2,md:0},children:(0,x.jsxs)(S,{className:"u-box-light",p:3,children:[(0,x.jsx)(B,{variant:"h5",color:"white",fontWeight:700,children:"Ticket Info"}),(0,x.jsx)(B,{variant:"h6",className:"u-text-small",color:"gray.light",fontWeight:700,mt:2,children:"here you can submit your reply and it will be send to the server so Admin or User can see your respons"}),(0,x.jsx)(S,{className:"u-divider",mt:6}),i.isAdmin&&(0,x.jsx)(Gh,{title:" ",buttons:c,parentSx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",justifyContent:{xs:"center",md:"center"},py:4,px:3},childSx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",justifyContent:{xs:"center",md:"center"}}})]})})]})},zm=r(1286),Lm=r(4289),Dm=function(t){var r=e.useRef({});return e.useEffect((function(){r.current=t})),r.current};function Om(e){return(0,L.Z)("MuiBadge",e)}(0,z.Z)("MuiBadge",["root","badge","invisible"]);var Fm=["badgeContent","component","children","invisible","max","slotProps","slots","showZero"],jm=e.forwardRef((function(e,t){var r=e.component,n=e.children,i=e.max,a=void 0===i?99:i,o=e.slotProps,s=void 0===o?{}:o,l=e.slots,c=void 0===l?{}:l,u=e.showZero,h=void 0!==u&&u,d=sd(e,Fm),f=function(e){var t=e.badgeContent,r=e.invisible,n=void 0!==r&&r,i=e.max,a=void 0===i?99:i,o=e.showZero,s=void 0!==o&&o,l=Dm({badgeContent:t,max:a}),c=n;!1!==n||0!==t||s||(c=!0);var u=c?l:e,h=u.badgeContent,d=u.max,f=void 0===d?a:d;return{badgeContent:h,invisible:c,max:f,displayValue:h&&Number(h)>f?"".concat(f,"+"):h}}(od({},e,{max:a})),p=f.badgeContent,m=f.max,v=f.displayValue,g=od({},e,{badgeContent:p,invisible:f.invisible,max:m,showZero:h}),y=function(e){var t={root:["root"],badge:["badge",e.invisible&&"invisible"]};return(0,M.Z)(t,Om,void 0)}(g),b=r||c.root||"span",_=mp({elementType:b,externalSlotProps:s.root,externalForwardedProps:d,additionalProps:{ref:t},ownerState:g,className:y.root}),w=c.badge||"span",k=mp({elementType:w,externalSlotProps:s.badge,ownerState:g,className:y.badge});return(0,x.jsxs)(b,od({},_,{children:[n,(0,x.jsx)(w,od({},k,{children:v}))]}))})),Nm=jm,Bm=function(e){return!e||!Eu(e)};function Zm(e){return(0,L.Z)("MuiBadge",e)}var Um=(0,z.Z)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Vm=["anchorOrigin","className","component","components","componentsProps","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Wm=(0,I.ZP)("span",{name:"MuiBadge",slot:"Root",overridesResolver:function(e,t){return t.root}})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Gm=(0,I.ZP)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:function(e,t){var r=e.ownerState;return[t.badge,t[r.variant],t["anchorOrigin".concat((0,R.Z)(r.anchorOrigin.vertical)).concat((0,R.Z)(r.anchorOrigin.horizontal)).concat((0,R.Z)(r.overlap))],"default"!==r.color&&t["color".concat((0,R.Z)(r.color))],r.invisible&&t.invisible]}})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},"default"!==r.color&&{backgroundColor:(t.vars||t).palette[r.color].main,color:(t.vars||t).palette[r.color].contrastText},"dot"===r.variant&&{borderRadius:4,height:8,minWidth:8,padding:0},"top"===r.anchorOrigin.vertical&&"right"===r.anchorOrigin.horizontal&&"rectangular"===r.overlap&&(0,i.Z)({top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%"},"&.".concat(Um.invisible),{transform:"scale(0) translate(50%, -50%)"}),"bottom"===r.anchorOrigin.vertical&&"right"===r.anchorOrigin.horizontal&&"rectangular"===r.overlap&&(0,i.Z)({bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%"},"&.".concat(Um.invisible),{transform:"scale(0) translate(50%, 50%)"}),"top"===r.anchorOrigin.vertical&&"left"===r.anchorOrigin.horizontal&&"rectangular"===r.overlap&&(0,i.Z)({top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%"},"&.".concat(Um.invisible),{transform:"scale(0) translate(-50%, -50%)"}),"bottom"===r.anchorOrigin.vertical&&"left"===r.anchorOrigin.horizontal&&"rectangular"===r.overlap&&(0,i.Z)({bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%"},"&.".concat(Um.invisible),{transform:"scale(0) translate(-50%, 50%)"}),"top"===r.anchorOrigin.vertical&&"right"===r.anchorOrigin.horizontal&&"circular"===r.overlap&&(0,i.Z)({top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%"},"&.".concat(Um.invisible),{transform:"scale(0) translate(50%, -50%)"}),"bottom"===r.anchorOrigin.vertical&&"right"===r.anchorOrigin.horizontal&&"circular"===r.overlap&&(0,i.Z)({bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%"},"&.".concat(Um.invisible),{transform:"scale(0) translate(50%, 50%)"}),"top"===r.anchorOrigin.vertical&&"left"===r.anchorOrigin.horizontal&&"circular"===r.overlap&&(0,i.Z)({top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%"},"&.".concat(Um.invisible),{transform:"scale(0) translate(-50%, -50%)"}),"bottom"===r.anchorOrigin.vertical&&"left"===r.anchorOrigin.horizontal&&"circular"===r.overlap&&(0,i.Z)({bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%"},"&.".concat(Um.invisible),{transform:"scale(0) translate(-50%, 50%)"}),r.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})})),Hm=e.forwardRef((function(e,t){var r,n,i,a,o,s,l=(0,P.Z)({props:e,name:"MuiBadge"}),c=l.anchorOrigin,h=void 0===c?{vertical:"top",horizontal:"right"}:c,d=l.className,f=l.component,p=void 0===f?"span":f,m=l.components,v=void 0===m?{}:m,g=l.componentsProps,y=void 0===g?{}:g,b=l.overlap,_=void 0===b?"rectangular":b,w=l.color,k=void 0===w?"default":w,S=l.invisible,C=void 0!==S&&S,A=l.max,I=l.badgeContent,z=l.slots,L=l.slotProps,D=l.showZero,O=void 0!==D&&D,F=l.variant,j=void 0===F?"standard":F,N=(0,T.Z)(l,Vm),B=Dm({anchorOrigin:h,color:k,overlap:_,variant:j}),Z=C;!1===C&&(0===I&&!O||null==I&&"dot"!==j)&&(Z=!0);var U,V=Z?B:l,W=V.color,G=void 0===W?k:W,H=V.overlap,X=void 0===H?_:H,Y=V.anchorOrigin,q=void 0===Y?h:Y,$=V.variant,K=void 0===$?j:$,J=function(e){var t=e.color,r=e.anchorOrigin,n=e.invisible,i=e.overlap,a=e.variant,o=e.classes,s=void 0===o?{}:o,l={root:["root"],badge:["badge",a,n&&"invisible","anchorOrigin".concat((0,R.Z)(r.vertical)).concat((0,R.Z)(r.horizontal)),"anchorOrigin".concat((0,R.Z)(r.vertical)).concat((0,R.Z)(r.horizontal)).concat((0,R.Z)(i)),"overlap".concat((0,R.Z)(i)),"default"!==t&&"color".concat((0,R.Z)(t))]};return(0,M.Z)(l,Zm,s)}((0,E.Z)({},l,{anchorOrigin:q,invisible:Z,color:G,overlap:X,variant:K}));"dot"!==K&&(U=I&&Number(I)>A?"".concat(A,"+"):I);var Q=null!=(r=null!=(n=null==z?void 0:z.root)?n:v.Root)?r:Wm,ee=null!=(i=null!=(a=null==z?void 0:z.badge)?a:v.Badge)?i:Gm,te=null!=(o=null==L?void 0:L.root)?o:y.root,re=null!=(s=null==L?void 0:L.badge)?s:y.badge;return(0,x.jsx)(Nm,(0,E.Z)({invisible:C,badgeContent:U,showZero:O,max:A},N,{slots:{root:Q,badge:ee},className:(0,u.Z)(null==te?void 0:te.className,J.root,d),slotProps:{root:(0,E.Z)({},te,Bm(Q)&&{as:p,ownerState:(0,E.Z)({},null==te?void 0:te.ownerState,{anchorOrigin:q,color:G,overlap:X,variant:K})}),badge:(0,E.Z)({},re,{className:(0,u.Z)(J.badge,null==re?void 0:re.className)},Bm(ee)&&{ownerState:(0,E.Z)({},null==re?void 0:re.ownerState,{anchorOrigin:q,color:G,overlap:X,variant:K})})},ref:t}))})),Xm=function(e){var t=e.data,r=e.handleChangeImage,n=e.imageUploading,i=e.setIsEditAccountPopupOpen;return(0,x.jsxs)(S,{className:"u-box-light",sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2,p:2},children:[(0,x.jsxs)(S,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:2,alignItems:"center"},children:[(0,x.jsx)(Hm,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(uf,{htmlFor:"file-upload",sx:{color:"white",background:"linear-gradient(138.78deg, rgba(6, 11, 40, 0.94) 17.44%, rgb(80 83 101 / 98%) 93.55%, rgba(10, 14, 35, 0.69) 93.55%)",borderRadius:"8px",display:"flex",alignItems:"center",cursor:"pointer",p:.8,mt:2,ml:2},children:(0,x.jsx)(zm.Z,{sx:{fontSize:"18px"}})}),(0,x.jsx)("input",{style:{visibility:"hidden"},id:"file-upload",accept:"image/jpeg",type:"file",onChange:function(e){return r(e)}})]}),children:(0,x.jsx)(li,{variant:"rounded",sx:{width:"80px",height:"80px",borderRadius:"10px",bgcolor:t.color?t.color.hex:"gray.light"},children:n?(0,x.jsx)(Lm.Z,{className:"u-rotate",sx:{fontSize:"48px"}}):t.profileImage?(0,x.jsx)("img",{style:{objectFit:"cover",width:"100%",height:"100%"},src:t.profileImage.url,alt:"".concat(t.name,"-").concat(t.lastName)}):(0,x.jsx)(oa.Z,{sx:{fontSize:"48px"}})})}),(0,x.jsxs)(S,{children:[(0,x.jsxs)(B,{textTransform:"capitalize",variant:"h5",color:"white",children:[t.name||" "," ",t.lastName||" "]}),(0,x.jsx)(B,{textTransform:"capitalize",variant:"h5",color:"gray.light",children:t.isAdmin?"Admin":"User"})]})]}),(0,x.jsx)(fh,{variant:"contained",color:"primary",startIcon:(0,x.jsx)(Wh.Z,{}),sx:{px:6},onClick:function(){return i(!0)},children:"Edit"})]})},Ym=r(1333),qm=function(e){var t=e.user,r=t.requests.filter((function(e){return"solved"===e.itemStatus})),n=t.tickets.filter((function(e){return!0===e.isClose}));return(0,x.jsxs)(yr,{container:!0,spacing:2,sx:{width:"100%"},children:[(0,x.jsx)(yr,{item:!0,xs:12,sm:6,children:(0,x.jsxs)(S,{className:"u-box-light",sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",p:1.5,borderRadius:"10px"},children:[(0,x.jsxs)(S,{children:[(0,x.jsx)(B,{color:"white",variant:"h6",className:"u-text-tiny",children:"Requests"}),(0,x.jsx)(B,{color:"white",variant:"h6",className:"u-text-h4",children:t.requests.length})]}),(0,x.jsx)(li,{sx:{bgcolor:"primary.main"},variant:"rounded",children:(0,x.jsx)(Ym.Z,{})})]})}),(0,x.jsx)(yr,{item:!0,xs:12,sm:6,children:(0,x.jsxs)(S,{className:"u-box-light",sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",p:1.5,borderRadius:"10px"},children:[(0,x.jsxs)(S,{children:[(0,x.jsx)(B,{color:"white",variant:"h6",className:"u-text-tiny",children:"Solved Requests"}),(0,x.jsx)(B,{color:"white",variant:"h6",className:"u-text-h4",children:r.length})]}),(0,x.jsx)(li,{sx:{bgcolor:"primary.main"},variant:"rounded",children:(0,x.jsx)(Ym.Z,{})})]})}),(0,x.jsx)(yr,{item:!0,xs:12,sm:6,children:(0,x.jsxs)(S,{className:"u-box-light",sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",p:1.5,borderRadius:"10px"},children:[(0,x.jsxs)(S,{children:[(0,x.jsx)(B,{color:"white",variant:"h6",className:"u-text-tiny",children:"Tickets"}),(0,x.jsx)(B,{color:"white",variant:"h6",className:"u-text-h4",children:t.tickets.length})]}),(0,x.jsx)(li,{sx:{bgcolor:"primary.main"},variant:"rounded",children:(0,x.jsx)(Ym.Z,{})})]})}),(0,x.jsx)(yr,{item:!0,xs:12,sm:6,children:(0,x.jsxs)(S,{className:"u-box-light",sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",p:1.5,borderRadius:"10px"},children:[(0,x.jsxs)(S,{children:[(0,x.jsx)(B,{color:"white",variant:"h6",className:"u-text-tiny",children:"Solved Tickets"}),(0,x.jsx)(B,{color:"white",variant:"h6",className:"u-text-h4",children:n.length})]}),(0,x.jsx)(li,{sx:{bgcolor:"primary.main"},variant:"rounded",children:(0,x.jsx)(Ym.Z,{})})]})})]})},$m=function(t){var r=t.user,n=(0,e.useState)(95),i=(0,Z.Z)(n,2),a=i[0],o=(i[1],r.requests.filter((function(e){return"solved"===e.itemStatus}))),s=r.tickets.filter((function(e){return!0===e.isClose}));return(0,x.jsx)(S,{className:"u-box-light",sx:{width:"100%",height:"100%",px:1,pt:{xs:2,md:0}},children:(0,x.jsxs)(yr,{sx:{alignContent:"center",height:"100%"},container:!0,spacing:2,p:2,alignItems:"center",children:[(0,x.jsxs)(yr,{item:!0,xs:12,sx:{mt:{md:2,xl:0}},children:[(0,x.jsx)(B,{variant:"h5",color:"white",fontWeight:700,children:"User Information"}),(0,x.jsx)(B,{variant:"h6",className:"u-text-small",color:"white",fontWeight:400,children:"Here is your data based on your actions"})]}),(0,x.jsx)(yr,{item:!0,xs:12,xl:4,order:{xs:2,xl:1},mt:2,children:(0,x.jsxs)(S,{className:"c-smartcard__progress-container",sx:{display:"flex",justifyContent:"center"},children:[(0,x.jsx)(Wr,{size:"80%",color:"success",thickness:4,variant:"determinate",value:a,sx:{borderRadius:"10px",display:"flex",justifyContent:"center"}}),(0,x.jsxs)(S,{className:"c-smartcard__progress-context",children:[(0,x.jsx)(B,{variant:"h6",className:"u-text-tiny",color:"gray.light",children:"Score"}),(0,x.jsx)(B,{variant:"h4",className:"u-text-massive",color:"white",children:r.tickets.length+r.requests.length+o.length+s.length})]})]})}),(0,x.jsx)(yr,{className:"c-chat",item:!0,container:!0,xs:12,xl:8,order:{xs:1,xl:2},sx:{p:0,mt:{xs:2}},children:(0,x.jsx)(qm,{user:r})})]})})},Km=r.p+"static/media/frankfurt.8a6cc677a6c236d663e9.jpg",Jm=function(e){var t=e.name;return(0,x.jsxs)(S,{className:"u-box-light",sx:{width:"100%",minHeight:{xs:"100%",md:"320px"},p:2,background:"url(".concat(Km,")"),backgroundSize:"cover"},children:[(0,x.jsx)(B,{variant:"h3",className:"u-text-big",color:"white",fontWeight:700,children:"Welcome back!"}),(0,x.jsxs)(B,{variant:"h6",className:"u-text-small",textTransform:"capitalize",color:"white",fontWeight:400,mt:.5,children:["Nice to see you, ",t," !"]})]})},Qm=function(e){var t=e.title,r=e.description,n=e.children,i=e.handleClose;return(0,x.jsx)(S,{className:"c-popup",sx:{px:{xs:2,md:0}},children:(0,x.jsxs)(S,{className:"c-popup__container",sx:{maxHeight:"90vh",overflow:"auto"},children:[(0,x.jsx)(B,{variant:"h3",className:"u-text-h5",color:"white",align:"center",children:t}),(0,x.jsx)(S,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,x.jsx)(B,{sx:{maxWidth:"440px"},mt:2,variant:"h3",className:"u-text-small",color:"gray.light",align:"center",children:r})}),n,(0,x.jsx)(S,{my:3,className:"u-divider"}),(0,x.jsx)(fh,{variant:"contained",color:"primary",onClick:function(){return i(!1)},children:"CLOSE"})]})})};function ev(e){return(0,L.Z)("MuiFormGroup",e)}(0,z.Z)("MuiFormGroup",["root","row","error"]);var tv=["className","row"],rv=(0,I.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.row&&t.row]}})((function(e){var t=e.ownerState;return(0,E.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})})),nv=e.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiFormGroup"}),n=r.className,i=r.row,a=void 0!==i&&i,o=(0,T.Z)(r,tv),s=yd({props:r,muiFormControl:xd(),states:["error"]}),l=(0,E.Z)({},r,{row:a,error:s.error}),c=function(e){var t=e.classes,r={root:["root",e.row&&"row",e.error&&"error"]};return(0,M.Z)(r,ev,t)}(l);return(0,x.jsx)(rv,(0,E.Z)({className:(0,u.Z)(c.root,n),ownerState:l,ref:t},o))}));var iv=e.createContext(void 0),av=r(7384),ov=["actions","children","defaultValue","name","onChange","value"],sv=e.forwardRef((function(t,r){var n=t.actions,i=t.children,a=t.defaultValue,o=t.name,s=t.onChange,l=t.value,c=(0,T.Z)(t,ov),u=e.useRef(null),h=(0,im.Z)({controlled:l,default:a,name:"RadioGroup"}),d=(0,Z.Z)(h,2),f=d[0],p=d[1];e.useImperativeHandle(n,(function(){return{focus:function(){var e=u.current.querySelector("input:not(:disabled):checked");e||(e=u.current.querySelector("input:not(:disabled)")),e&&e.focus()}}}),[]);var m=(0,V.Z)(r,u),v=(0,av.Z)(o),g=e.useMemo((function(){return{name:v,onChange:function(e){p(e.target.value),s&&s(e,e.target.value)},value:f}}),[v,s,p,f]);return(0,x.jsx)(iv.Provider,{value:g,children:(0,x.jsx)(nv,(0,E.Z)({role:"radiogroup",ref:m},c,{children:i}))})}));function lv(e){return(0,L.Z)("MuiFormControlLabel",e)}var cv=(0,z.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),uv=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","slotProps","value"],hv=(0,I.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[(0,i.Z)({},"& .".concat(cv.label),t.label),t.root,t["labelPlacement".concat((0,R.Z)(r.labelPlacement))]]}})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)((0,i.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16},"&.".concat(cv.disabled),{cursor:"default"}),"start"===r.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===r.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===r.labelPlacement&&{flexDirection:"column",marginLeft:16},(0,i.Z)({},"& .".concat(cv.label),(0,i.Z)({},"&.".concat(cv.disabled),{color:(t.vars||t).palette.text.disabled})))})),dv=e.forwardRef((function(t,r){var n,i=(0,P.Z)({props:t,name:"MuiFormControlLabel"}),a=i.className,o=i.componentsProps,s=void 0===o?{}:o,l=i.control,c=i.disabled,h=i.disableTypography,d=i.label,f=i.labelPlacement,p=void 0===f?"end":f,m=i.slotProps,v=void 0===m?{}:m,g=(0,T.Z)(i,uv),y=xd(),b=c;"undefined"===typeof b&&"undefined"!==typeof l.props.disabled&&(b=l.props.disabled),"undefined"===typeof b&&y&&(b=y.disabled);var _={disabled:b};["checked","name","onChange","value","inputRef"].forEach((function(e){"undefined"===typeof l.props[e]&&"undefined"!==typeof i[e]&&(_[e]=i[e])}));var w=yd({props:i,muiFormControl:y,states:["error"]}),k=(0,E.Z)({},i,{disabled:b,labelPlacement:p,error:w.error}),S=function(e){var t=e.classes,r=e.disabled,n=e.labelPlacement,i=e.error,a={root:["root",r&&"disabled","labelPlacement".concat((0,R.Z)(n)),i&&"error"],label:["label",r&&"disabled"]};return(0,M.Z)(a,lv,t)}(k),C=null!=(n=v.typography)?n:s.typography,A=d;return null==A||A.type===B||h||(A=(0,x.jsx)(B,(0,E.Z)({component:"span"},C,{className:(0,u.Z)(S.label,null==C?void 0:C.className),children:A}))),(0,x.jsxs)(hv,(0,E.Z)({className:(0,u.Z)(S.root,a),ownerState:k,ref:r},g,{children:[e.cloneElement(l,_),A]}))}));function fv(e){return(0,L.Z)("PrivateSwitchBase",e)}(0,z.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var pv=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],mv=(0,I.ZP)(Xi)((function(e){var t=e.ownerState;return(0,E.Z)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),vv=(0,I.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),gv=e.forwardRef((function(e,t){var r=e.autoFocus,n=e.checked,i=e.checkedIcon,a=e.className,o=e.defaultChecked,s=e.disabled,l=e.disableFocusRipple,c=void 0!==l&&l,h=e.edge,d=void 0!==h&&h,f=e.icon,p=e.id,m=e.inputProps,v=e.inputRef,g=e.name,y=e.onBlur,b=e.onChange,_=e.onFocus,w=e.readOnly,k=e.required,S=e.tabIndex,C=e.type,A=e.value,I=(0,T.Z)(e,pv),P=(0,im.Z)({controlled:n,default:Boolean(o),name:"SwitchBase",state:"checked"}),z=(0,Z.Z)(P,2),L=z[0],D=z[1],O=xd(),F=s;O&&"undefined"===typeof F&&(F=O.disabled);var j="checkbox"===C||"radio"===C,N=(0,E.Z)({},e,{checked:L,disabled:F,disableFocusRipple:c,edge:d}),B=function(e){var t=e.classes,r=e.checked,n=e.disabled,i=e.edge,a={root:["root",r&&"checked",n&&"disabled",i&&"edge".concat((0,R.Z)(i))],input:["input"]};return(0,M.Z)(a,fv,t)}(N);return(0,x.jsxs)(mv,(0,E.Z)({component:"span",className:(0,u.Z)(B.root,a),centerRipple:!0,focusRipple:!c,disabled:F,tabIndex:null,role:void 0,onFocus:function(e){_&&_(e),O&&O.onFocus&&O.onFocus(e)},onBlur:function(e){y&&y(e),O&&O.onBlur&&O.onBlur(e)},ownerState:N,ref:t},I,{children:[(0,x.jsx)(vv,(0,E.Z)({autoFocus:r,checked:n,defaultChecked:o,className:B.input,disabled:F,id:j&&p,name:g,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var t=e.target.checked;D(t),b&&b(e,t)}},readOnly:w,ref:v,required:k,ownerState:N,tabIndex:S,type:C},"checkbox"===C&&void 0===A?{}:{value:A},m)),L?i:f]}))})),yv=(0,ti.Z)((0,x.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),xv=(0,ti.Z)((0,x.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),bv=(0,I.ZP)("span")({position:"relative",display:"flex"}),_v=(0,I.ZP)(yv)({transform:"scale(1)"}),wv=(0,I.ZP)(xv)((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},r.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})})}));var kv=function(e){var t=e.checked,r=void 0!==t&&t,n=e.classes,i=void 0===n?{}:n,a=e.fontSize,o=(0,E.Z)({},e,{checked:r});return(0,x.jsxs)(bv,{className:i.root,ownerState:o,children:[(0,x.jsx)(_v,{fontSize:a,className:i.background,ownerState:o}),(0,x.jsx)(wv,{fontSize:a,className:i.dot,ownerState:o})]})},Sv=r(1260);function Cv(e){return(0,L.Z)("MuiRadio",e)}var Av=(0,z.Z)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]),Tv=["checked","checkedIcon","color","icon","name","onChange","size","className"],Ev=(0,I.ZP)(gv,{shouldForwardProp:function(e){return(0,I.FO)(e)||"classes"===e},name:"MuiRadio",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t["color".concat((0,R.Z)(r.color))]]}})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({color:(t.vars||t).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===r.color?t.vars.palette.action.activeChannel:t.vars.palette[r.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,X.Fq)("default"===r.color?t.palette.action.active:t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(0,i.Z)({},"&.".concat(Av.checked),{color:(t.vars||t).palette[r.color].main}),(0,i.Z)({},"&.".concat(Av.disabled),{color:(t.vars||t).palette.action.disabled}))}));var Mv=(0,x.jsx)(kv,{checked:!0}),Iv=(0,x.jsx)(kv,{}),Pv=e.forwardRef((function(t,r){var n,i,a=(0,P.Z)({props:t,name:"MuiRadio"}),o=a.checked,s=a.checkedIcon,l=void 0===s?Mv:s,c=a.color,h=void 0===c?"primary":c,d=a.icon,f=void 0===d?Iv:d,p=a.name,m=a.onChange,v=a.size,g=void 0===v?"medium":v,y=a.className,b=(0,T.Z)(a,Tv),_=(0,E.Z)({},a,{color:h,size:g}),w=function(e){var t=e.classes,r=e.color,n={root:["root","color".concat((0,R.Z)(r))]};return(0,E.Z)({},t,(0,M.Z)(n,Cv,t))}(_),k=e.useContext(iv),S=o,C=(0,Sv.Z)(m,k&&k.onChange),A=p;return k&&("undefined"===typeof S&&(S=function(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}(k.value,a.value)),"undefined"===typeof A&&(A=k.name)),(0,x.jsx)(Ev,(0,E.Z)({type:"radio",icon:e.cloneElement(f,{fontSize:null!=(n=Iv.props.fontSize)?n:g}),checkedIcon:e.cloneElement(l,{fontSize:null!=(i=Mv.props.fontSize)?i:g}),ownerState:_,classes:w,name:A,checked:S,onChange:C,ref:r,className:(0,u.Z)(w.root,y)},b))})),Rv=Pv,zv=function(t){var r=t.itemId,n=t.isAdmin,i=ue((function(e){return e.entities.isHttpCalling})),a=e.useState(n?"admin":"user"),o=(0,Z.Z)(a,2),s=o[0],l=o[1],c=function(e){return s===e};return(0,x.jsxs)(nd,{sx:{m:1,minWidth:120},children:[(0,x.jsxs)(sv,{"aria-labelledby":"demo-radio-buttons-group-label",onChange:function(e){l(e.currentTarget.value)},defaultValue:n.valueOf.toString(),name:"radio-buttons-group",sx:{color:"white",display:"flex",flexDirection:"row"},children:[(0,x.jsx)(dv,{checked:c("user"),value:"user",control:(0,x.jsx)(Rv,{sx:{color:"white"}}),label:"User"}),(0,x.jsx)(dv,{checked:c("admin"),value:"admin",control:(0,x.jsx)(Rv,{sx:{color:"white"}}),label:"Admin"})]}),(0,x.jsx)(fh,{disabled:i,variant:"contained",color:"primary",sx:{mt:2},onClick:function(){var e="user"!==s;e!==n?xu.updateAccountPermission(r,e):nu.error("Account already is ".concat(s))},children:"Submit"})]})},Lv=r(4819),Dv=r.n(Lv);function Ov(e){return(0,L.Z)("MuiInputAdornment",e)}var Fv,jv=(0,z.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),Nv=["children","className","component","disablePointerEvents","disableTypography","position","variant"],Bv=(0,I.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t["position".concat((0,R.Z)(r.position))],!0===r.disablePointerEvents&&t.disablePointerEvents,t[r.variant]]}})((function(e){var t=e.theme,r=e.ownerState;return(0,E.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===r.variant&&(0,i.Z)({},"&.".concat(jv.positionStart,"&:not(.").concat(jv.hiddenLabel,")"),{marginTop:16}),"start"===r.position&&{marginRight:8},"end"===r.position&&{marginLeft:8},!0===r.disablePointerEvents&&{pointerEvents:"none"})})),Zv=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiInputAdornment"}),i=n.children,a=n.className,o=n.component,s=void 0===o?"div":o,l=n.disablePointerEvents,c=void 0!==l&&l,h=n.disableTypography,d=void 0!==h&&h,f=n.position,p=n.variant,m=(0,T.Z)(n,Nv),v=xd()||{},g=p;p&&v.variant,v&&!g&&(g=v.variant);var y=(0,E.Z)({},n,{hiddenLabel:v.hiddenLabel,size:v.size,disablePointerEvents:c,position:f,variant:g}),b=function(e){var t=e.classes,r=e.disablePointerEvents,n=e.hiddenLabel,i=e.position,a=e.size,o=e.variant,s={root:["root",r&&"disablePointerEvents",i&&"position".concat((0,R.Z)(i)),o,n&&"hiddenLabel",a&&"size".concat((0,R.Z)(a))]};return(0,M.Z)(s,Ov,t)}(y);return(0,x.jsx)(Qh.Provider,{value:null,children:(0,x.jsx)(Bv,(0,E.Z)({as:s,ownerState:y,className:(0,u.Z)(b.root,a),ref:r},m,{children:"string"!==typeof i||d?(0,x.jsxs)(e.Fragment,{children:["start"===f?Fv||(Fv=(0,x.jsx)("span",{className:"notranslate",children:"\u200b"})):null,i]}):(0,x.jsx)(B,{color:"text.secondary",children:i})}))})}));function Uv(e){return(0,L.Z)("MuiSlider",e)}var Vv=(0,z.Z)("MuiSlider",["root","active","focusVisible","disabled","dragging","marked","vertical","trackInverted","trackFalse","rail","track","mark","markActive","markLabel","markLabelActive","thumb","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel"]);function Wv(t){var r=t.children,n=t.className,i=t.value,a=function(e){var t=e.open;return{offset:(0,u.Z)(t&&Vv.valueLabelOpen),circle:Vv.valueLabelCircle,label:Vv.valueLabelLabel}}(t);return e.cloneElement(r,{className:(0,u.Z)(r.props.className)},(0,x.jsxs)(e.Fragment,{children:[r.props.children,(0,x.jsx)("span",{className:(0,u.Z)(a.offset,n),"aria-hidden":!0,children:(0,x.jsx)("span",{className:a.circle,children:(0,x.jsx)("span",{className:a.label,children:i})})})]}))}var Gv=r(8959),Hv=r(5372),Xv={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Yv(e,t){return e-t}function qv(e,t,r){return null==e?t:Math.min(Math.max(t,e),r)}function $v(e,t){var r;return(null!=(r=e.reduce((function(e,r,n){var i=Math.abs(t-r);return null===e||i<e.distance||i===e.distance?{distance:i,index:n}:e}),null))?r:{}).index}function Kv(e,t){if(void 0!==t.current&&e.changedTouches){for(var r=e,n=0;n<r.changedTouches.length;n+=1){var i=r.changedTouches[n];if(i.identifier===t.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Jv(e,t,r){return 100*(e-t)/(r-t)}function Qv(e,t,r){var n=Math.round((e-r)/t)*t+r;return Number(n.toFixed(function(e){if(Math.abs(e)<1){var t=e.toExponential().split("e-"),r=t[0].split(".")[1];return(r?r.length:0)+parseInt(t[1],10)}var n=e.toString().split(".")[1];return n?n.length:0}(t)))}function eg(e){var t=e.values,r=e.newValue,n=e.index,i=t.slice();return i[n]=r,i.sort(Yv)}function tg(e){var t,r,n,i=e.sliderRef,a=e.activeIndex,o=e.setActive,s=(0,qf.Z)(i.current);null!=(t=i.current)&&t.contains(s.activeElement)&&Number(null==s||null==(r=s.activeElement)?void 0:r.getAttribute("data-index"))===a||(null==(n=i.current)||n.querySelector('[type="range"][data-index="'.concat(a,'"]')).focus());o&&o(a)}var rg,ng={horizontal:{offset:function(e){return{left:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},"horizontal-reverse":{offset:function(e){return{right:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},vertical:{offset:function(e){return{bottom:"".concat(e,"%")}},leap:function(e){return{height:"".concat(e,"%")}}}},ig=function(e){return e};function ag(){return void 0===rg&&(rg="undefined"===typeof CSS||"function"!==typeof CSS.supports||CSS.supports("touch-action","none")),rg}function og(t){var r=t["aria-labelledby"],n=t.defaultValue,i=t.disabled,a=void 0!==i&&i,o=t.disableSwap,s=void 0!==o&&o,l=t.isRtl,c=void 0!==l&&l,u=t.marks,h=void 0!==u&&u,d=t.max,p=void 0===d?100:d,m=t.min,v=void 0===m?0:m,g=t.name,y=t.onChange,x=t.onChangeCommitted,b=t.orientation,_=void 0===b?"horizontal":b,w=t.ref,k=t.scale,S=void 0===k?ig:k,C=t.step,A=void 0===C?1:C,T=t.tabIndex,E=t.value,M=e.useRef(),I=e.useState(-1),P=(0,Z.Z)(I,2),R=P[0],z=P[1],L=e.useState(-1),D=(0,Z.Z)(L,2),O=D[0],F=D[1],j=e.useState(!1),N=(0,Z.Z)(j,2),B=N[0],U=N[1],V=e.useRef(0),W=(0,Gv.Z)({controlled:E,default:null!=n?n:v,name:"Slider"}),G=(0,Z.Z)(W,2),H=G[0],X=G[1],Y=y&&function(e,t,r){var n=e.nativeEvent||e,i=new n.constructor(n.type,n);Object.defineProperty(i,"target",{writable:!0,value:{value:t,name:g}}),y(i,t,r)},q=Array.isArray(H),$=q?H.slice().sort(Yv):[H];$=$.map((function(e){return qv(e,v,p)}));var K=!0===h&&null!==A?(0,f.Z)(Array(Math.floor((p-v)/A)+1)).map((function(e,t){return{value:v+A*t}})):h||[],J=K.map((function(e){return e.value})),Q=(0,Hv.Z)(),ee=Q.isFocusVisibleRef,te=Q.onBlur,re=Q.onFocus,ne=Q.ref,ie=e.useState(-1),ae=(0,Z.Z)(ie,2),oe=ae[0],se=ae[1],le=e.useRef(),ce=(0,ld.Z)(ne,le),ue=(0,ld.Z)(w,ce),he=function(e){return function(t){var r,n=Number(t.currentTarget.getAttribute("data-index"));re(t),!0===ee.current&&se(n),F(n),null==e||null==(r=e.onFocus)||r.call(e,t)}},de=function(e){return function(t){var r;te(t),!1===ee.current&&se(-1),F(-1),null==e||null==(r=e.onBlur)||r.call(e,t)}};(0,hd.Z)((function(){var e;a&&le.current.contains(document.activeElement)&&(null==(e=document.activeElement)||e.blur())}),[a]),a&&-1!==R&&z(-1),a&&-1!==oe&&se(-1);var fe=function(e){return function(t){var r;null==(r=e.onChange)||r.call(e,t);var n=Number(t.currentTarget.getAttribute("data-index")),i=$[n],a=J.indexOf(i),o=t.target.valueAsNumber;if(K&&null==A&&(o=o<i?J[a-1]:J[a+1]),o=qv(o,v,p),K&&null==A){var l=J.indexOf($[n]);o=o<$[n]?J[l-1]:J[l+1]}if(q){s&&(o=qv(o,$[n-1]||-1/0,$[n+1]||1/0));var c=o;o=eg({values:$,newValue:o,index:n});var u=n;s||(u=o.indexOf(c)),tg({sliderRef:le,activeIndex:u})}X(o),se(n),Y&&Y(t,o,n),x&&x(t,o)}},pe=e.useRef(),me=_;c&&"horizontal"===_&&(me+="-reverse");var ve=function(e){var t,r,n=e.finger,i=e.move,a=void 0!==i&&i,o=le.current.getBoundingClientRect(),l=o.width,c=o.height,u=o.bottom,h=o.left;if(t=0===me.indexOf("vertical")?(u-n.y)/c:(n.x-h)/l,-1!==me.indexOf("-reverse")&&(t=1-t),r=function(e,t,r){return(r-t)*e+t}(t,v,p),A)r=Qv(r,A,v);else{var d=$v(J,r);r=J[d]}r=qv(r,v,p);var f=0;if(q){f=a?pe.current:$v($,r),s&&(r=qv(r,$[f-1]||-1/0,$[f+1]||1/0));var m=r;r=eg({values:$,newValue:r,index:f}),s&&a||(f=r.indexOf(m),pe.current=f)}return{newValue:r,activeIndex:f}},ge=(0,$f.Z)((function(e){var t=Kv(e,M);if(t)if(V.current+=1,"mousemove"!==e.type||0!==e.buttons){var r=ve({finger:t,move:!0}),n=r.newValue,i=r.activeIndex;tg({sliderRef:le,activeIndex:i,setActive:z}),X(n),!B&&V.current>2&&U(!0),Y&&n!==H&&Y(e,n,i)}else ye(e)})),ye=(0,$f.Z)((function(e){var t=Kv(e,M);if(U(!1),t){var r=ve({finger:t,move:!0}).newValue;z(-1),"touchend"===e.type&&F(-1),x&&x(e,r),M.current=void 0,be()}})),xe=(0,$f.Z)((function(e){if(!a){ag()||e.preventDefault();var t=e.changedTouches[0];null!=t&&(M.current=t.identifier);var r=Kv(e,M);if(!1!==r){var n=ve({finger:r}),i=n.newValue,o=n.activeIndex;tg({sliderRef:le,activeIndex:o,setActive:z}),X(i),Y&&Y(e,i,o)}V.current=0;var s=(0,qf.Z)(le.current);s.addEventListener("touchmove",ge),s.addEventListener("touchend",ye)}})),be=e.useCallback((function(){var e=(0,qf.Z)(le.current);e.removeEventListener("mousemove",ge),e.removeEventListener("mouseup",ye),e.removeEventListener("touchmove",ge),e.removeEventListener("touchend",ye)}),[ye,ge]);e.useEffect((function(){var e=le.current;return e.addEventListener("touchstart",xe,{passive:ag()}),function(){e.removeEventListener("touchstart",xe,{passive:ag()}),be()}}),[be,xe]),e.useEffect((function(){a&&be()}),[a,be]);var _e=function(e){return function(t){var r;if(null==(r=e.onMouseDown)||r.call(e,t),!a&&!t.defaultPrevented&&0===t.button){t.preventDefault();var n=Kv(t,M);if(!1!==n){var i=ve({finger:n}),o=i.newValue,s=i.activeIndex;tg({sliderRef:le,activeIndex:s,setActive:z}),X(o),Y&&Y(t,o,s)}V.current=0;var l=(0,qf.Z)(le.current);l.addEventListener("mousemove",ge),l.addEventListener("mouseup",ye)}}},we=Jv(q?$[0]:v,v,p),ke=Jv($[$.length-1],v,p)-we,Se=function(e){return function(t){var r;null==(r=e.onMouseOver)||r.call(e,t);var n=Number(t.currentTarget.getAttribute("data-index"));F(n)}},Ce=function(e){return function(t){var r;null==(r=e.onMouseLeave)||r.call(e,t),F(-1)}};return{active:R,axis:me,axisProps:ng,dragging:B,focusedThumbIndex:oe,getHiddenInputProps:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={onChange:fe(n||{}),onFocus:he(n||{}),onBlur:de(n||{})},o=od({},n,i);return od({tabIndex:T,"aria-labelledby":r,"aria-orientation":_,"aria-valuemax":S(p),"aria-valuemin":S(v),name:g,type:"range",min:t.min,max:t.max,step:null!=(e=t.step)?e:void 0,disabled:a},o,{style:od({},Xv,{direction:c?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={onMouseDown:_e(e||{})},r=od({},e,t);return od({ref:ue},r)},getThumbProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={onMouseOver:Se(e||{}),onMouseLeave:Ce(e||{})};return od({},e,t)},marks:K,open:O,range:q,trackLeap:ke,trackOffset:we,values:$}}var sg=["aria-label","aria-valuetext","aria-labelledby","className","component","classes","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","scale","step","tabIndex","track","value","valueLabelDisplay","valueLabelFormat","isRtl","slotProps","slots"],lg=function(e){return e},cg=function(e){return e.children},ug=e.forwardRef((function(t,r){var n,i,a,o,s,l,c,h=t["aria-label"],d=t["aria-valuetext"],f=t["aria-labelledby"],p=t.className,m=t.component,v=t.classes,g=t.disableSwap,y=void 0!==g&&g,b=t.disabled,_=void 0!==b&&b,w=t.getAriaLabel,k=t.getAriaValueText,S=t.marks,C=void 0!==S&&S,A=t.max,T=void 0===A?100:A,E=t.min,I=void 0===E?0:E,P=t.orientation,R=void 0===P?"horizontal":P,z=t.scale,L=void 0===z?lg:z,D=t.step,O=void 0===D?1:D,F=t.track,j=void 0===F?"normal":F,N=t.valueLabelDisplay,B=void 0===N?"off":N,Z=t.valueLabelFormat,U=void 0===Z?lg:Z,V=t.isRtl,W=void 0!==V&&V,G=t.slotProps,H=void 0===G?{}:G,X=t.slots,Y=void 0===X?{}:X,q=sd(t,sg),$=od({},t,{marks:C,classes:v,disabled:_,isRtl:W,max:T,min:I,orientation:R,scale:L,step:O,track:j,valueLabelDisplay:B,valueLabelFormat:U}),K=og(od({},$,{ref:r})),J=K.axisProps,Q=K.getRootProps,ee=K.getHiddenInputProps,te=K.getThumbProps,re=K.open,ne=K.active,ie=K.axis,ae=K.range,oe=K.focusedThumbIndex,se=K.dragging,le=K.marks,ce=K.values,ue=K.trackOffset,he=K.trackLeap;$.marked=le.length>0&&le.some((function(e){return e.label})),$.dragging=se,$.focusedThumbIndex=oe;var de=function(e){var t=e.disabled,r=e.dragging,n=e.marked,i=e.orientation,a=e.track,o=e.classes,s={root:["root",t&&"disabled",r&&"dragging",n&&"marked","vertical"===i&&"vertical","inverted"===a&&"trackInverted",!1===a&&"trackFalse"],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled"],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return(0,M.Z)(s,Uv,o)}($),fe=null!=(n=null!=m?m:Y.root)?n:"span",pe=mp({elementType:fe,getSlotProps:Q,externalSlotProps:H.root,externalForwardedProps:q,ownerState:$,className:[de.root,p]}),me=null!=(i=Y.rail)?i:"span",ve=mp({elementType:me,externalSlotProps:H.rail,ownerState:$,className:de.rail}),ge=null!=(a=Y.track)?a:"span",ye=mp({elementType:ge,externalSlotProps:H.track,additionalProps:{style:od({},J[ie].offset(ue),J[ie].leap(he))},ownerState:$,className:de.track}),xe=null!=(o=Y.thumb)?o:"span",be=mp({elementType:xe,getSlotProps:te,externalSlotProps:H.thumb,ownerState:$}),_e=null!=(s=Y.valueLabel)?s:Wv,we=mp({elementType:_e,externalSlotProps:H.valueLabel,ownerState:$}),ke=null!=(l=Y.mark)?l:"span",Se=mp({elementType:ke,externalSlotProps:H.mark,ownerState:$,className:de.mark}),Ce=null!=(c=Y.markLabel)?c:"span",Ae=mp({elementType:Ce,externalSlotProps:H.markLabel,ownerState:$}),Te=Y.input||"input",Ee=mp({elementType:Te,getSlotProps:ee,externalSlotProps:H.input,ownerState:$});return(0,x.jsxs)(fe,od({},pe,{children:[(0,x.jsx)(me,od({},ve)),(0,x.jsx)(ge,od({},ye)),le.filter((function(e){return e.value>=I&&e.value<=T})).map((function(t,r){var n,i=Jv(t.value,I,T),a=J[ie].offset(i);return n=!1===j?-1!==ce.indexOf(t.value):"normal"===j&&(ae?t.value>=ce[0]&&t.value<=ce[ce.length-1]:t.value<=ce[0])||"inverted"===j&&(ae?t.value<=ce[0]||t.value>=ce[ce.length-1]:t.value>=ce[0]),(0,x.jsxs)(e.Fragment,{children:[(0,x.jsx)(ke,od({"data-index":r},Se,!Eu(ke)&&{markActive:n},{style:od({},a,Se.style),className:(0,u.Z)(Se.className,n&&de.markActive)})),null!=t.label?(0,x.jsx)(Ce,od({"aria-hidden":!0,"data-index":r},Ae,!Eu(Ce)&&{markLabelActive:n},{style:od({},a,Ae.style),className:(0,u.Z)(de.markLabel,Ae.className,n&&de.markLabelActive),children:t.label})):null]},r)})),ce.map((function(t,r){var n=Jv(t,I,T),i=J[ie].offset(n),a="off"===B?cg:_e;return(0,x.jsx)(e.Fragment,{children:(0,x.jsx)(a,od({},!Eu(a)&&{valueLabelFormat:U,valueLabelDisplay:B,value:"function"===typeof U?U(L(t),r):U,index:r,open:re===r||ne===r||"on"===B,disabled:_},we,{className:(0,u.Z)(de.valueLabel,we.className),children:(0,x.jsx)(xe,od({"data-index":r,"data-focusvisible":oe===r},be,{className:(0,u.Z)(de.thumb,be.className,ne===r&&de.active,oe===r&&de.focusVisible),style:od({},i,{pointerEvents:y&&ne!==r?"none":void 0},be.style),children:(0,x.jsx)(Te,od({"data-index":r,"aria-label":w?w(r):h,"aria-valuenow":L(t),"aria-labelledby":f,"aria-valuetext":k?k(L(t),r):d,value:ce[r]},Ee))}))}))},r)}))]}))})),hg=ug,dg=["component","components","componentsProps","color","size","slotProps","slots"],fg=(0,E.Z)({},Vv,(0,z.Z)("MuiSlider",["colorPrimary","colorSecondary","thumbColorPrimary","thumbColorSecondary","sizeSmall","thumbSizeSmall"])),pg=(0,I.ZP)("span",{name:"MuiSlider",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t["color".concat((0,R.Z)(r.color))],"medium"!==r.size&&t["size".concat((0,R.Z)(r.size))],r.marked&&t.marked,"vertical"===r.orientation&&t.vertical,"inverted"===r.track&&t.trackInverted,!1===r.track&&t.trackFalse]}})((function(e){var t,r=e.theme,n=e.ownerState;return(0,E.Z)({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(r.vars||r).palette[n.color].main,WebkitTapHighlightColor:"transparent"},"horizontal"===n.orientation&&(0,E.Z)({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},"small"===n.size&&{height:2},n.marked&&{marginBottom:20}),"vertical"===n.orientation&&(0,E.Z)({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},"small"===n.size&&{width:2},n.marked&&{marginRight:44}),(t={"@media print":{colorAdjust:"exact"}},(0,i.Z)(t,"&.".concat(fg.disabled),{pointerEvents:"none",cursor:"default",color:(r.vars||r).palette.grey[400]}),(0,i.Z)(t,"&.".concat(fg.dragging),(0,i.Z)({},"& .".concat(fg.thumb,", & .").concat(fg.track),{transition:"none"})),t))})),mg=(0,I.ZP)("span",{name:"MuiSlider",slot:"Rail",overridesResolver:function(e,t){return t.rail}})((function(e){var t=e.ownerState;return(0,E.Z)({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},"horizontal"===t.orientation&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},"vertical"===t.orientation&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},"inverted"===t.track&&{opacity:1})})),vg=(0,I.ZP)("span",{name:"MuiSlider",slot:"Track",overridesResolver:function(e,t){return t.track}})((function(e){var t=e.theme,r=e.ownerState,n="light"===t.palette.mode?(0,X.$n)(t.palette[r.color].main,.62):(0,X._j)(t.palette[r.color].main,.5);return(0,E.Z)({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest})},"small"===r.size&&{border:"none"},"horizontal"===r.orientation&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},"vertical"===r.orientation&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},!1===r.track&&{display:"none"},"inverted"===r.track&&{backgroundColor:t.vars?t.vars.palette.Slider["".concat(r.color,"Track")]:n,borderColor:t.vars?t.vars.palette.Slider["".concat(r.color,"Track")]:n})})),gg=(0,I.ZP)("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:function(e,t){var r=e.ownerState;return[t.thumb,t["thumbColor".concat((0,R.Z)(r.color))],"medium"!==r.size&&t["thumbSize".concat((0,R.Z)(r.size))]]}})((function(e){var t,r=e.theme,n=e.ownerState;return(0,E.Z)({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:r.transitions.create(["box-shadow","left","bottom"],{duration:r.transitions.duration.shortest})},"small"===n.size&&{width:12,height:12},"horizontal"===n.orientation&&{top:"50%",transform:"translate(-50%, -50%)"},"vertical"===n.orientation&&{left:"50%",transform:"translate(-50%, 50%)"},(t={"&:before":(0,E.Z)({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(r.vars||r).shadows[2]},"small"===n.size&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},(0,i.Z)(t,"&:hover, &.".concat(fg.focusVisible),{boxShadow:"0px 0px 0px 8px ".concat(r.vars?"rgba(".concat(r.vars.palette[n.color].mainChannel," / 0.16)"):(0,X.Fq)(r.palette[n.color].main,.16)),"@media (hover: none)":{boxShadow:"none"}}),(0,i.Z)(t,"&.".concat(fg.active),{boxShadow:"0px 0px 0px 14px ".concat(r.vars?"rgba(".concat(r.vars.palette[n.color].mainChannel," / 0.16)"):(0,X.Fq)(r.palette[n.color].main,.16))}),(0,i.Z)(t,"&.".concat(fg.disabled),{"&:hover":{boxShadow:"none"}}),t))})),yg=(0,I.ZP)(Wv,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:function(e,t){return t.valueLabel}})((function(e){var t,r=e.theme,n=e.ownerState;return(0,E.Z)((t={},(0,i.Z)(t,"&.".concat(fg.valueLabelOpen),{transform:"translateY(-100%) scale(1)"}),(0,i.Z)(t,"zIndex",1),(0,i.Z)(t,"whiteSpace","nowrap"),t),r.typography.body2,{fontWeight:500,transition:r.transitions.create(["transform"],{duration:r.transitions.duration.shortest}),transform:"translateY(-100%) scale(0)",position:"absolute",backgroundColor:(r.vars||r).palette.grey[600],borderRadius:2,color:(r.vars||r).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},"horizontal"===n.orientation&&{top:"-10px",transformOrigin:"bottom center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},"vertical"===n.orientation&&{right:"30px",top:"24px",transformOrigin:"right center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",right:"-20%",top:"25%"}},"small"===n.size&&{fontSize:r.typography.pxToRem(12),padding:"0.25rem 0.5rem"})})),xg=(0,I.ZP)("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:function(e){return(0,I.Dz)(e)&&"markActive"!==e},overridesResolver:function(e,t){var r=e.markActive;return[t.mark,r&&t.markActive]}})((function(e){var t=e.theme,r=e.ownerState,n=e.markActive;return(0,E.Z)({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},"horizontal"===r.orientation&&{top:"50%",transform:"translate(-1px, -50%)"},"vertical"===r.orientation&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8})})),bg=(0,I.ZP)("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:function(e){return(0,I.Dz)(e)&&"markLabelActive"!==e},overridesResolver:function(e,t){return t.markLabel}})((function(e){var t=e.theme,r=e.ownerState,n=e.markLabelActive;return(0,E.Z)({},t.typography.body2,{color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},"horizontal"===r.orientation&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},"vertical"===r.orientation&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:(t.vars||t).palette.text.primary})})),_g=e.forwardRef((function(e,t){var r,n,i,a,o,s,l,c,h,d,f,p,m,v,g,y,b,_,w,k,S,C,A,M=(0,P.Z)({props:e,name:"MuiSlider"}),I="rtl"===or().direction,z=M.component,L=void 0===z?"span":z,D=M.components,O=void 0===D?{}:D,F=M.componentsProps,j=void 0===F?{}:F,N=M.color,B=void 0===N?"primary":N,Z=M.size,U=void 0===Z?"medium":Z,V=M.slotProps,W=M.slots,G=(0,T.Z)(M,dg),H=function(e){var t=e.color,r=e.size,n=e.classes,i=void 0===n?{}:n;return(0,E.Z)({},i,{root:(0,u.Z)(i.root,Uv("color".concat((0,R.Z)(t))),i["color".concat((0,R.Z)(t))],r&&[Uv("size".concat((0,R.Z)(r))),i["size".concat((0,R.Z)(r))]]),thumb:(0,u.Z)(i.thumb,Uv("thumbColor".concat((0,R.Z)(t))),i["thumbColor".concat((0,R.Z)(t))],r&&[Uv("thumbSize".concat((0,R.Z)(r))),i["thumbSize".concat((0,R.Z)(r))]])})}((0,E.Z)({},M,{color:B,size:U})),X=null!=(r=null!=(n=null==W?void 0:W.root)?n:O.Root)?r:pg,Y=null!=(i=null!=(a=null==W?void 0:W.rail)?a:O.Rail)?i:mg,q=null!=(o=null!=(s=null==W?void 0:W.track)?s:O.Track)?o:vg,$=null!=(l=null!=(c=null==W?void 0:W.thumb)?c:O.Thumb)?l:gg,K=null!=(h=null!=(d=null==W?void 0:W.valueLabel)?d:O.ValueLabel)?h:yg,J=null!=(f=null!=(p=null==W?void 0:W.mark)?p:O.Mark)?f:xg,Q=null!=(m=null!=(v=null==W?void 0:W.markLabel)?v:O.MarkLabel)?m:bg,ee=null!=(g=null==W?void 0:W.input)?g:O.Input,te=null!=(y=null==V?void 0:V.root)?y:j.root,re=null!=(b=null==V?void 0:V.rail)?b:j.rail,ne=null!=(_=null==V?void 0:V.track)?_:j.track,ie=null!=(w=null==V?void 0:V.thumb)?w:j.thumb,ae=null!=(k=null==V?void 0:V.valueLabel)?k:j.valueLabel,oe=null!=(S=null==V?void 0:V.mark)?S:j.mark,se=null!=(C=null==V?void 0:V.markLabel)?C:j.markLabel,le=null!=(A=null==V?void 0:V.input)?A:j.input;return(0,x.jsx)(hg,(0,E.Z)({},G,{isRtl:I,slots:{root:X,rail:Y,track:q,thumb:$,valueLabel:K,mark:J,markLabel:Q,input:ee},slotProps:(0,E.Z)({},j,{root:(0,E.Z)({},te,Bm(X)&&{as:L,ownerState:(0,E.Z)({},null==te?void 0:te.ownerState,{color:B,size:U})}),rail:re,thumb:(0,E.Z)({},ie,Bm($)&&{ownerState:(0,E.Z)({},null==ie?void 0:ie.ownerState,{color:B,size:U})}),track:(0,E.Z)({},ne,Bm(q)&&{ownerState:(0,E.Z)({},null==ne?void 0:ne.ownerState,{color:B,size:U})}),valueLabel:(0,E.Z)({},ae,Bm(K)&&{ownerState:(0,E.Z)({},null==ae?void 0:ae.ownerState,{color:B,size:U})}),mark:oe,markLabel:se,input:le}),classes:H,ref:t}))})),wg=["bgColor","className","disablePopover","isBgColorValid"],kg=["children","className"],Sg=["rgbColor","style","className"],Cg=["className"],Ag=["className"],Tg=["value","format","onChange","PopoverProps","fallbackValue","isAlphaHidden","disablePopover"],Eg=["onBlur","InputProps"],Mg=["onClose"],Ig={Button:(0,I.ZP)(fh)((function(){return{backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 0, 4px -4px, 0px 4px",transition:"none",boxShadow:"0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08)",border:0,borderRadius:4,width:"24px",aspectRatio:"1 / 1",height:"24px",minWidth:0}}))},Pg=function(e){var t=e.bgColor,r=e.className,n=e.disablePopover,i=e.isBgColorValid,a=Tc(e,wg);return(0,x.jsx)(Ig.Button,o({disableTouchRipple:!0,style:{backgroundColor:i?t:void 0,backgroundImage:i?void 0:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(135deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(135deg, transparent 75%, #ccc 75%) /*! @noflip */",cursor:n?"default":void 0},className:"MuiColorInput-Button ".concat(r||"")},a))},Rg={Container:(0,I.ZP)("div")((function(){return{width:300,padding:8}}))},zg=function(e){var t=e.children,r=e.className,n=Tc(e,kg);return(0,x.jsx)(Bp,o(o({className:"MuiColorInput-Popover ".concat(r||""),anchorOrigin:{vertical:"bottom",horizontal:"left"}},n),{},{children:(0,x.jsx)(Rg.Container,{children:t})}))},Lg={Slider:(0,I.ZP)(_g,{shouldForwardProp:function(e){return"$rgbaFrom"!==e&&"$rgbaTo"!==e}})((function(){return{height:8,"& .MuiSlider-rail":{opacity:1,background:"linear-gradient(to right, rgba(var(--rgb-r), var(--rgb-g), var(--rgb-b), 0) 0%, rgba(var(--rgb-r), var(--rgb-g), var(--rgb-b), 1) 100%)"},"& .MuiSlider-track":{color:"transparent",border:0},"& .MuiSlider-thumb":{backgroundColor:"#ffffff",border:"3px solid currentColor"}}}))},Dg=function(e){var t=e.rgbColor,r=e.style,n=e.className,i=Tc(e,Sg),a=o({"--rgb-r":t.r,"--rgb-g":t.g,"--rgb-b":t.b},r);return(0,x.jsx)(Lg.Slider,o({className:"MuiColorInput-AlphaSlider ".concat(n||""),style:a},i))},Og="ArrowUp",Fg="ArrowDown",jg="ArrowLeft",Ng="ArrowRight",Bg={ArrowUp:{type:"hsvV",value:1},ArrowDown:{type:"hsvV",value:-1},ArrowLeft:{type:"hsvS",value:-1},ArrowRight:{type:"hsvS",value:1}};function Zg(e,t,r){return Math.max(t,Math.min(e,r))}function Ug(e){return"number"==typeof e}function Vg(e,t,r){var n=e.toLocaleString("en",{useGrouping:!1,minimumFractionDigits:t,maximumFractionDigits:r});return Number(n)}var Wg={Space:(0,I.ZP)("div")((function(){return{width:"100%",height:"180px",boxSizing:"border-box",outline:0,position:"relative",backgroundImage:"linear-gradient(to top, #000000, transparent), linear-gradient(to right, #ffffff, transparent) /*! @noflip */"}})),Thumb:(0,I.ZP)("div")((function(){return{position:"absolute",border:"3px solid #ffffff",borderRadius:"50%",width:"20px",height:"20px",marginLeft:"-10px /*! @noflip */",marginBottom:"-10px /*! @noflip */",outline:0,boxSizing:"border-box",willChange:"left, bottom",transition:"box-shadow 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&:hover":{boxShadow:"0px 0px 0px 4px rgba(255 255 255 / 0.16)"},"&.MuiColorInput-Thumb-active":{boxShadow:"0px 0px 0px 8px rgba(255 255 255 / 0.16)"},"@media (hover: none)":{boxShadow:"none"}}}))},Gg=function(t){var r=t.hsv,n=t.onChange,i=t.currentHue,a=e.useRef(!1),o=e.useRef(null),s=e.useState(!1),l=(0,Z.Z)(s,2),c=l[0],u=l[1],h=function(t){var r=e.useRef();return r.current=t,e.useCallback((function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return null===(e=r.current)||void 0===e?void 0:e.call.apply(e,[r].concat(n))}),[])}((function(e,t){if(o.current){var r=function(e,t,r){var n=e.getBoundingClientRect(),i=t-n.left,a=r-n.top;return{x:Zg(i/n.width,0,1),y:Zg(1-a/n.height,0,1)}}(o.current,e,t),i=r.x,a=r.y;n({s:i,v:a}),o.current&&document.activeElement!==o.current&&o.current.focus()}})),d=e.useCallback((function(){a.current&&(a.current=!1,u(!1))}),[]),f=e.useCallback((function(e){a.current&&h(e.clientX,e.clientY)}),[]);e.useEffect((function(){return document.addEventListener("mousemove",f,!1),document.addEventListener("mouseup",d,!1),function(){document.removeEventListener("mousemove",f,!1),document.removeEventListener("mouseup",d,!1)}}),[d,f]);var p=100*r.s,m=100*r.v;return(0,x.jsx)(Wg.Space,{onMouseDown:function(e){e.preventDefault(),a.current=!0,h(e.clientX,e.clientY),u(!0)},ref:o,className:"MuiColorInput-ColorSpace",style:{backgroundColor:"hsl(".concat(i," 100% 50%)")},role:"slider","aria-valuetext":"Saturation ".concat(Vg(p,0,0),"%, Brightness ").concat(Vg(m,0,0),"%"),onKeyDown:function(e){if(function(e){return e===Og||e===Fg||e===jg||e===Ng}(e.key)){e.preventDefault();var t=Bg[e.key],i=t.type,a=t.value,o=e.shiftKey?10:1,s=Zg(("hsvS"===i?r.s:r.v)+a*o*.01,0,1);u(!0),n({s:"hsvS"===i?s:r.s,v:"hsvV"===i?s:r.v})}},tabIndex:0,children:(0,x.jsx)(Wg.Thumb,{"aria-label":"Color space thumb",className:c?"MuiColorInput-Thumb-active":"",style:{left:"".concat(p,"%"),bottom:"".concat(m,"%")}})})},Hg={Slider:(0,I.ZP)(_g)((function(){return{height:8,"& .MuiSlider-rail":{opacity:1,background:"linear-gradient(to right, rgb(255, 0, 0) 0%, rgb(255, 255, 0) 17%, rgb(0, 255, 0) 33%, rgb(0, 255, 255) 50%, rgb(0, 0, 255) 67%, rgb(255, 0, 255) 83%, rgb(255, 0, 0) 100%) /*! @noflip */"},"& .MuiSlider-track":{color:"transparent",border:0},"& .MuiSlider-thumb":{backgroundColor:"#ffffff",border:"3px solid currentColor"}}}))},Xg=function(e){var t=e.className,r=Tc(e,Cg);return(0,x.jsx)(Hg.Slider,o({className:"MuiColorInput-HueSlider ".concat(t||"")},r))};function Yg(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function qg(e){return Math.min(1,Math.max(0,e))}function $g(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Kg(e){return e<=1?"".concat(100*Number(e),"%"):e}function Jg(e){return 1===e.length?"0"+e:String(e)}function Qg(e,t,r){e=Yg(e,255),t=Yg(t,255),r=Yg(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),a=0,o=0,s=(n+i)/2;if(n===i)o=0,a=0;else{var l=n-i;switch(o=s>.5?l/(2-n-i):l/(n+i),n){case e:a=(t-r)/l+(t<r?6:0);break;case t:a=(r-e)/l+2;break;case r:a=(e-t)/l+4}a/=6}return{h:a,s:o,l:s}}function ey(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*r*(t-e):r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function ty(e,t,r){e=Yg(e,255),t=Yg(t,255),r=Yg(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),a=0,o=n,s=n-i,l=0===n?0:s/n;if(n===i)a=0;else{switch(n){case e:a=(t-r)/s+(t<r?6:0);break;case t:a=(r-e)/s+2;break;case r:a=(e-t)/s+4}a/=6}return{h:a,s:l,v:o}}function ry(e,t,r,n){var i=[Jg(Math.round(e).toString(16)),Jg(Math.round(t).toString(16)),Jg(Math.round(r).toString(16))];return n&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function ny(e){return Math.round(255*parseFloat(e)).toString(16)}function iy(e){return ay(e)/255}function ay(e){return parseInt(e,16)}var oy={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function sy(e){var t={r:0,g:0,b:0},r=1,n=null,i=null,a=null,o=!1,s=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(oy[e])e=oy[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var r=hy.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=hy.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=hy.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=hy.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=hy.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=hy.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=hy.hex8.exec(e))?{r:ay(r[1]),g:ay(r[2]),b:ay(r[3]),a:iy(r[4]),format:t?"name":"hex8"}:(r=hy.hex6.exec(e))?{r:ay(r[1]),g:ay(r[2]),b:ay(r[3]),format:t?"name":"hex"}:(r=hy.hex4.exec(e))?{r:ay(r[1]+r[1]),g:ay(r[2]+r[2]),b:ay(r[3]+r[3]),a:iy(r[4]+r[4]),format:t?"name":"hex8"}:!!(r=hy.hex3.exec(e))&&{r:ay(r[1]+r[1]),g:ay(r[2]+r[2]),b:ay(r[3]+r[3]),format:t?"name":"hex"}}(e)),"object"==typeof e&&(dy(e.r)&&dy(e.g)&&dy(e.b)?(t=function(e,t,r){return{r:255*Yg(e,255),g:255*Yg(t,255),b:255*Yg(r,255)}}(e.r,e.g,e.b),o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):dy(e.h)&&dy(e.s)&&dy(e.v)?(n=Kg(e.s),i=Kg(e.v),t=function(e,t,r){e=6*Yg(e,360),t=Yg(t,100),r=Yg(r,100);var n=Math.floor(e),i=e-n,a=r*(1-t),o=r*(1-i*t),s=r*(1-(1-i)*t),l=n%6;return{r:255*[r,o,a,a,s,r][l],g:255*[s,r,r,o,a,a][l],b:255*[a,a,s,r,r,o][l]}}(e.h,n,i),o=!0,s="hsv"):dy(e.h)&&dy(e.s)&&dy(e.l)&&(n=Kg(e.s),a=Kg(e.l),t=function(e,t,r){var n,i,a;if(e=Yg(e,360),t=Yg(t,100),r=Yg(r,100),0===t)i=r,a=r,n=r;else{var o=r<.5?r*(1+t):r+t-r*t,s=2*r-o;n=ey(s,o,e+1/3),i=ey(s,o,e),a=ey(s,o,e-1/3)}return{r:255*n,g:255*i,b:255*a}}(e.h,n,a),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=$g(r),{ok:o,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}var ly="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),cy="[\\s|\\(]+(".concat(ly,")[,|\\s]+(").concat(ly,")[,|\\s]+(").concat(ly,")\\s*\\)?"),uy="[\\s|\\(]+(".concat(ly,")[,|\\s]+(").concat(ly,")[,|\\s]+(").concat(ly,")[,|\\s]+(").concat(ly,")\\s*\\)?"),hy={CSS_UNIT:new RegExp(ly),rgb:new RegExp("rgb"+cy),rgba:new RegExp("rgba"+uy),hsl:new RegExp("hsl"+cy),hsla:new RegExp("hsla"+uy),hsv:new RegExp("hsv"+cy),hsva:new RegExp("hsva"+uy),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function dy(e){return Boolean(hy.CSS_UNIT.exec(String(e)))}var fy=function(){function e(t,r){var n;if(void 0===t&&(t=""),void 0===r&&(r={}),t instanceof e)return t;"number"==typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var i=sy(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(n=r.format)&&void 0!==n?n:i.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,r=e.g/255,n=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=$g(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var e=ty(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=ty(this.r,this.g,this.b),t=Math.round(360*e.h),r=Math.round(100*e.s),n=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(r,"%, ").concat(n,"%)"):"hsva(".concat(t,", ").concat(r,"%, ").concat(n,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=Qg(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=Qg(this.r,this.g,this.b),t=Math.round(360*e.h),r=Math.round(100*e.s),n=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(r,"%, ").concat(n,"%)"):"hsla(".concat(t,", ").concat(r,"%, ").concat(n,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),ry(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,r,n,i){var a=[Jg(Math.round(e).toString(16)),Jg(Math.round(t).toString(16)),Jg(Math.round(r).toString(16)),Jg(ny(n))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),r=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(r,")"):"rgba(".concat(e,", ").concat(t,", ").concat(r,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*Yg(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*Yg(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+ry(this.r,this.g,this.b,!1),t=0,r=Object.entries(oy);t<r.length;t++){var n=r[t],i=n[0];if(e===n[1])return i}return!1},e.prototype.toString=function(e){var t,r=Boolean(e);e=null!==(t=e)&&void 0!==t?t:this.format;var n=!1,i=this.a<1&&this.a>=0;return!r&&i&&(e.startsWith("hex")||"name"===e)?"name"===e&&0===this.a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var r=this.toHsl();return r.l+=t/100,r.l=qg(r.l),new e(r)},e.prototype.brighten=function(t){void 0===t&&(t=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(-t/100*255))),r.g=Math.max(0,Math.min(255,r.g-Math.round(-t/100*255))),r.b=Math.max(0,Math.min(255,r.b-Math.round(-t/100*255))),new e(r)},e.prototype.darken=function(t){void 0===t&&(t=10);var r=this.toHsl();return r.l-=t/100,r.l=qg(r.l),new e(r)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var r=this.toHsl();return r.s-=t/100,r.s=qg(r.s),new e(r)},e.prototype.saturate=function(t){void 0===t&&(t=10);var r=this.toHsl();return r.s+=t/100,r.s=qg(r.s),new e(r)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var r=this.toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,new e(r)},e.prototype.mix=function(t,r){void 0===r&&(r=50);var n=this.toRgb(),i=new e(t).toRgb(),a=r/100;return new e({r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a})},e.prototype.analogous=function(t,r){void 0===t&&(t=6),void 0===r&&(r=30);var n=this.toHsl(),i=360/r,a=[this];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,a.push(new e(n));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var r=this.toHsv(),n=r.h,i=r.s,a=r.v,o=[],s=1/t;t--;)o.push(new e({h:n,s:i,v:a})),a=(a+s)%1;return o},e.prototype.splitcomplement=function(){var t=this.toHsl(),r=t.h;return[this,new e({h:(r+72)%360,s:t.s,l:t.l}),new e({h:(r+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var r=this.toRgb(),n=new e(t).toRgb();return new e({r:n.r+(r.r-n.r)*r.a,g:n.g+(r.g-n.g)*r.a,b:n.b+(r.b-n.b)*r.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var r=this.toHsl(),n=r.h,i=[this],a=360/t,o=1;o<t;o++)i.push(new e({h:(n+o*a)%360,s:r.s,l:r.l}));return i},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function py(e,t){return e.toString(t)}function my(e,t,r){return new fy("transparent"===e?t:e,r)}function vy(e){return function(e){return"string"==typeof e}(e)?e:new fy(e).toString()}var gy=function(t){var r=t.currentColor,n=t.format,i=t.onChange,a=t.isAlphaHidden,s=e.useState(r.toHsv()),l=(0,Z.Z)(s,2),c=l[0],u=l[1];return(0,x.jsxs)(S,{className:"MuiColorInput-PopoverBody",children:[(0,x.jsx)(Gg,{currentHue:c.h,hsv:c,onChange:function(e){var t=e.s,a=e.v,s=new fy({h:c.h,a:r.toHsv().a,s:t,v:a});u((function(e){return o(o({},e),{},{s:t,v:a})})),null===i||void 0===i||i(py(s,n))}}),(0,x.jsx)(S,{mt:"10px",px:"3px",children:(0,x.jsx)(Xg,{min:0,max:100,step:1,onChange:function(e,t){if(Ug(t)){var a=Zg(360*t/100,0,359);u((function(e){return o(o({},e),{},{h:a})}));var s=new fy(o(o({},c),{},{a:r.toHsv().a,h:a}));null===i||void 0===i||i(py(s,n))}},"aria-label":"hue",value:100*c.h/360})}),a?null:(0,x.jsx)(S,{mt:"10px",px:"3px",children:(0,x.jsx)(Dg,{min:0,max:1,step:.01,"aria-label":"alpha",rgbColor:r.toRgb(),onChange:function(e,t){if(Ug(t)){var a=r.clone().setAlpha(t);null===i||void 0===i||i(py(a,n))}},value:r.getAlpha()})})]})},yy=e.forwardRef((function(e,t){var r=e.className,n=Tc(e,Ag);return(0,x.jsx)(Im,o({className:"MuiColorInput-TextField ".concat(r||""),ref:t},n))}));function xy(e,t){"function"==typeof t?t(e):t&&function(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}(t)&&"current"in t&&(t.current=e)}var by=e.forwardRef((function(t,r){var n=t.value,i=t.format,a=t.onChange,s=t.PopoverProps,l=t.fallbackValue,c=t.isAlphaHidden,u=t.disablePopover,h=Tc(t,Tg),d=h.onBlur,f=h.InputProps,p=Tc(h,Eg),m=s||{},v=m.onClose,g=Tc(m,Mg),y=l||"black",b=p.disabled||(null===f||void 0===f?void 0:f.disabled)||!1,_=e.useRef(null),w=e.useRef(null),k=e.useState(null),S=(0,Z.Z)(k,2),C=S[0],A=S[1],T=i||"rgb",E=my(n,y,{format:T}),M=e.useState(n),I=(0,Z.Z)(M,2),P=I[0],R=I[1],z=e.useState(n),L=(0,Z.Z)(z,2),D=L[0],O=L[1],F=function(e){var t=new fy(e);null===a||void 0===a||a(e,{hex:t.toHexString(),hsv:t.toHsvString(),hsl:t.toHslString(),rgb:t.toRgbString(),hex8:t.toHex8String()})};e.useEffect((function(){if(n!==D){var e=my(n,y).originalInput;O(e),R(e)}}),[n,D,y]);var j=Boolean(C),N=j?"color-popover":void 0;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(yy,o({ref:function(e){_.current=e,r&&xy(e,r)},spellCheck:"false",type:"text",autoComplete:"off",onChange:function(e){var t=e.target.value;R(t);var r=py(new fy(t),T);O(r),F(r)},value:vy(P),onBlur:function(e){null===d||void 0===d||d(e);var t=new fy(P);if(t.isValid)t.format!==T&&R(py(t,T));else{var r=py(new fy(y),T);R(r),O(r),F(r)}},inputRef:function(e){w.current=e,w&&xy(e,w)},disabled:b,InputProps:o({startAdornment:(0,x.jsx)(Zv,{position:"start",children:(0,x.jsx)(Pg,{disabled:b,"aria-describedby":N,disablePopover:u||!1,component:u?"span":void 0,bgColor:E.toString(),isBgColorValid:E.isValid,onClick:u?void 0:function(e){e.preventDefault(),e.stopPropagation(),!b&&!u&&A(_.current)}})})},f)},p)),u?null:(0,x.jsx)(zg,o(o({id:N,open:j,anchorEl:C,onClose:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];null!==v&&void 0!==v&&v.apply(void 0,t),A(null),queueMicrotask((function(){var e;null===(e=w.current)||void 0===e||e.focus()}))}},g),{},{children:(0,x.jsx)(gy,{onChange:function(e){R(e),O(e),F(e)},currentColor:E,format:T,isAlphaHidden:c})}))]})})),_y=function(e,t){var r=(0,i.Z)({},e.name,e.value),n=Dv().object((0,i.Z)({},e.name,t.extract(e.name))).validate(r).error;return n?n.details[0].message:null},wy=function(t){var r=t.data,n=t.handleImageChange,a=(0,e.useState)("#ffffff"),s=(0,Z.Z)(a,2),l=s[0],c=s[1],u=(0,e.useState)({name:"",lastName:"",email:"",password:"",confirmPassword:"",isAdmin:!1,bio:"",color:"",location:{latitude:r.location?r.location.latitude:50.11003957248653,longitude:r.location?r.location.longitude:8.687357922951406}}),h=(0,Z.Z)(u,2),d=h[0],f=h[1],p=(0,e.useState)(),m=(0,Z.Z)(p,2),v=m[0],g=m[1],y=ue((function(e){return e.entities.isHttpCalling})),b=(0,e.useRef)(),_=Dv().object({name:Dv().string().min(3).label("Name"),lastName:Dv().string().min(4).label("Last name"),email:Dv().string().email({tlds:{allow:!1}}).label("Email"),password:Dv().string().regex(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,"Password").message("Password Does Not Match pattern").label("Password"),confirmPassword:Dv().string().regex(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,"Password").message("Password Does Not Match pattern").label("Password"),bio:Dv().string().label("Bio"),color:Dv().string().regex(/^#[A-Fa-f0-9]{6}/).label("Color"),location:Dv().object({a:Dv().number().min(1).max(10).integer(),b:Dv().number().min(1).max(10).integer()}).label("Location")}),w=function(e){f((function(t){return o(o({},t),{},(0,i.Z)({},e.target.name,e.target.value))}));var t=_y(e.target,_);g(t?o(o({},v),{},(0,i.Z)({},e.target.name,t)):function(){var t=o({},v);return delete t[e.target.name],o({},t)}),"confirmPassword"===e.target.name?(null===d||void 0===d?void 0:d.password)!==e.target.value&&g((function(e){return o(o({},e),{},{confirmPassword:"Password Does Not Match"})})):"password"===e.target.name?f(o(o({},d),{},{password:e.target.value,confirmPassword:null})):g((function(e){var t=o({},e);return delete t.confirmPassword,o({},t)}))},k=function(){var e=ha(ca().mark((function e(t){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&f(o(o({},d),{},{profileImage:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=ha(ca().mark((function e(){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.password!==d.confirmPassword?g({confirmPassword:"Password is not matched"}):xu.updateAccount(r.itemId,d);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,e.useEffect)((function(){f({name:r.name,lastName:r.lastName,email:r.email,isAdmin:r.isAdmin,bio:r.bio,color:r.color&&r.color.hex,password:r.password,confirmPassword:r.password,location:{longitude:r.location?r.location.longitude:70,latitude:r.location?r.location.latitude:40}}),r.color&&c(r.color.hex)}),[r]);d.location;return(0,x.jsxs)(nd,{sx:{width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"row",flexWrap:"wrap"},children:[(0,x.jsx)(Im,{id:"comment-name",name:"name",value:(null===d||void 0===d?void 0:d.name)||"",sx:{width:{xs:"100%",md:"49%"},mt:2},label:"Enter name",type:"text",onChange:function(e){return w(e)},error:!(null===v||void 0===v||!v.name),helperText:(null===v||void 0===v?void 0:v.name)||""}),(0,x.jsx)(Im,{id:"comment-lastname",name:"lastName",value:(null===d||void 0===d?void 0:d.lastName)||"",sx:{width:{xs:"100%",md:"49%"},mt:2},label:"Enter Last Name",type:"text",onChange:function(e){return w(e)},error:!(null===v||void 0===v||!v.lastName),helperText:(null===v||void 0===v?void 0:v.lastName)||""}),(0,x.jsx)(Im,{id:"comment-email",name:"email",value:(null===d||void 0===d?void 0:d.email)||"",sx:{width:"100%",mt:2},label:"Enter Email",type:"text",onChange:function(e){return w(e)},error:!(null===v||void 0===v||!v.email),helperText:(null===v||void 0===v?void 0:v.email)||""}),(0,x.jsx)(Im,{id:"comment-password",name:"password",value:(null===d||void 0===d?void 0:d.password)||"",sx:{width:{xs:"100%",md:"49%"},mt:2},label:"Change Password",type:"password",onChange:function(e){return w(e)},error:!(null===v||void 0===v||!v.password),helperText:(null===v||void 0===v?void 0:v.password)||""}),(0,x.jsx)(Im,{id:"comment-confirm-password",name:"confirmPassword",value:(null===d||void 0===d?void 0:d.confirmPassword)||"",sx:{width:{xs:"100%",md:"49%"},mt:2},label:"Confirm Password",type:"password",onChange:function(e){return w(e)},error:!(null===v||void 0===v||!v.confirmPassword),helperText:(null===v||void 0===v?void 0:v.confirmPassword)||""}),(0,x.jsx)(Im,{id:"comment-bio",name:"bio",value:(null===d||void 0===d?void 0:d.bio)||"",sx:{width:"100%",mt:2},label:"Bio",type:"text",multiline:!0,rows:6,onChange:function(e){return w(e)},error:!(null===v||void 0===v||!v.bio),helperText:(null===v||void 0===v?void 0:v.bio)||""}),(0,x.jsx)(by,{name:"color",sx:{mt:2,width:{xs:"100%",md:"30%"}},value:l,onChange:function(e){c(e),f(o(o({},d),{},{color:e}))},format:"hex",error:!(null===v||void 0===v||!v.color),helperText:(null===v||void 0===v?void 0:v.color)||""}),(0,x.jsxs)(S,{className:"u-box-light-tertiary",sx:{height:"56px",width:{xs:"100%",md:"68%"},mt:2,display:"flex",justifyContent:"space-between",px:2},children:[(0,x.jsx)(B,{variant:"h6",color:"white",children:d.profileImage?(0,x.jsx)("span",{children:"".concat(d.profileImage.target.files&&d.profileImage.target.files[0].name.slice(0,25),"...")}):"Upload File"}),(0,x.jsxs)(S,{display:"flex",gap:2,children:[(0,x.jsxs)(fh,{component:"label",variant:"contained",color:"primary",children:["Select File",(0,x.jsx)("input",{name:"profileImage",hidden:!0,ref:b,id:"file-upload-2",accept:"image/jpeg",type:"file",onChange:function(e){return k(e)}})]}),(0,x.jsx)(fh,{component:"label",variant:"contained",color:"primary",onClick:function(){return function(){var e;d.profileImage&&n(d.profileImage),d.profileImage&&d.profileImage.target.files&&null!==(e=d.profileImage)&&void 0!==e&&e.target.files[0]||nu.info("No Image Selected")}()},children:"Upload"})]})]}),(0,x.jsxs)(S,{className:"u-box-light-tertiary",sx:{height:"400px",width:"100%",mt:2,p:2,display:"flex",flexWrap:"wrap",justifyContent:"flex-start"},children:[(0,x.jsx)(B,{variant:"h6",color:"white",textAlign:"left",children:"Update Location"}),(0,x.jsx)(S,{sx:{height:"300px",width:"100%"},children:(0,x.jsx)(Uh,{location:d.location||{latitude:50.11003957248653,longitude:8.687357922951406},handler:function(e){return function(e){f((function(t){return o(o({},t),{},{location:e})}))}(e)},darggable:!0})})]}),(0,x.jsx)(fh,{disabled:y||!(!v||!Object.keys(v).length),variant:"contained",color:"primary",sx:{width:"100%",mt:2},onClick:C,children:"Update Profile"})]})},ky=function(){var t=Pt().id,r=be(),n=(0,e.useState)(),i=(0,Z.Z)(n,2),a=i[0],o=i[1],s=(0,e.useState)(!1),l=(0,Z.Z)(s,2),c=l[0],u=l[1],h=(0,e.useState)(!1),d=(0,Z.Z)(h,2),f=d[0],p=d[1],m=(0,e.useState)(!1),v=(0,Z.Z)(m,2),g=v[0],y=v[1],b=(0,e.useState)(!1),_=(0,Z.Z)(b,2),w=_[0],k=_[1],C=Mt(),A=ue((function(e){return e.accounts})),T=[{title:"Edit",color:"primary",handler:function(){return y(!0)}},{title:"Delete Account",color:"error",handler:function(){return k(!0)}}];A.currentAccount.isAdmin&&T.push({title:"Permission",color:"primary",handler:function(){return p(!0)}});var E=function(){var e=ha(ca().mark((function e(t){var r;return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target||!t.target.files){e.next=6;break}return r=new FormData,u(!0),r.append("fileUpload",t.target.files[0]),e.next=6,xu.updateProfileImage(a.itemId,r,u);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,e.useEffect)((function(){var e;!A.isLoading&&t?(e=A.accounts.find((function(e){return e.itemId===t})))?o(e):C("".concat("/#/","404")):!A.isLoading&&t&&void 0===e?C("".concat("/#/","404")):t||C("".concat("/#/","404"))}),[A]),(0,x.jsxs)(S,{px:{xs:2,md:0},children:[a&&f&&(0,x.jsx)(Qm,{handleClose:function(){return p(!1)},children:(0,x.jsx)(zv,{isAdmin:a.isAdmin,itemId:a.itemId})}),a&&g&&(0,x.jsx)(Qm,{handleClose:function(){return y(!1)},title:"Edit Profile",children:(0,x.jsx)(wy,{data:a,handleImageChange:E})}),a&&w&&(0,x.jsxs)(Qm,{handleClose:function(){return k(!1)},children:[(0,x.jsx)(B,{variant:"h4",color:"white",children:"Are You Sure?"}),(0,x.jsx)(B,{mt:2,variant:"h6",color:"white",children:"This action is permanent"}),(0,x.jsx)(fh,{sx:{mt:2},color:"error",variant:"contained",onClick:function(){return r((e=a.itemId,function(){var t=ha(ca().mark((function t(r){return ca().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xu.deleteAccount(e);case 2:r(Xl(e)),r(pu()),r(du());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));var e},children:"Delete User Account"})]}),!A.isLoading&&a?(0,x.jsx)(Xm,{data:a,imageUploading:c,handleChangeImage:E,setIsEditAccountPopupOpen:y}):(0,x.jsx)(Kn,{sx:{height:"112px"}}),(0,x.jsxs)(yr,{container:!0,spacing:2,mt:1,children:[(0,x.jsx)(yr,{order:1,item:!0,xs:12,sm:6,md:3,children:!A.isLoading&&a?(0,x.jsx)(Jm,{name:"".concat(a.name," ").concat(a.lastName)}):(0,x.jsx)(Kn,{sx:{height:"336px"}})}),(0,x.jsx)(yr,{item:!0,container:!0,order:{xs:3,md:2},xs:12,md:6,children:!A.isLoading&&a?(0,x.jsx)($m,{user:a}):(0,x.jsx)(Kn,{sx:{height:"336px"}})}),(0,x.jsx)(yr,{order:{xs:2,md:3},item:!0,xs:12,sm:6,md:3,children:!A.isLoading&&a?a.bio&&(0,x.jsx)(Vh,{description:a.bio}):(0,x.jsx)(Kn,{sx:{height:"336px"}})}),(0,x.jsx)(yr,{item:!0,xs:12,order:4,mt:1,children:!A.isLoading&&a?(0,x.jsx)(Gh,{buttons:T,title:"User Actions",parentProps:{className:"u-box-light"},parentSx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",justifyContent:{xs:"center",md:"space-between"},py:4,px:3},childSx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",justifyContent:{xs:"center",md:"center"}}}):(0,x.jsx)(Kn,{sx:{height:"116px"}})})]})]})},Sy=r.p+"static/media/login-bg.847bb35ca77c597a8f50.jpg";function Cy(e){return(0,L.Z)("MuiSwitch",e)}var Ay,Ty=(0,z.Z)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Ey=["className","color","edge","size","sx"],My=(0,I.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.edge&&t["edge".concat((0,R.Z)(r.edge))],t["size".concat((0,R.Z)(r.size))]]}})((function(e){var t,r=e.ownerState;return(0,E.Z)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===r.edge&&{marginLeft:-8},"end"===r.edge&&{marginRight:-8},"small"===r.size&&(t={width:40,height:24,padding:7},(0,i.Z)(t,"& .".concat(Ty.thumb),{width:16,height:16}),(0,i.Z)(t,"& .".concat(Ty.switchBase),(0,i.Z)({padding:4},"&.".concat(Ty.checked),{transform:"translateX(16px)"})),t))})),Iy=(0,I.ZP)(gv,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:function(e,t){var r=e.ownerState;return[t.switchBase,(0,i.Z)({},"& .".concat(Ty.input),t.input),"default"!==r.color&&t["color".concat((0,R.Z)(r.color))]]}})((function(e){var t,r=e.theme;return t={position:"absolute",top:0,left:0,zIndex:1,color:r.vars?r.vars.palette.Switch.defaultColor:"".concat("light"===r.palette.mode?r.palette.common.white:r.palette.grey[300]),transition:r.transitions.create(["left","transform"],{duration:r.transitions.duration.shortest})},(0,i.Z)(t,"&.".concat(Ty.checked),{transform:"translateX(20px)"}),(0,i.Z)(t,"&.".concat(Ty.disabled),{color:r.vars?r.vars.palette.Switch.defaultDisabledColor:"".concat("light"===r.palette.mode?r.palette.grey[100]:r.palette.grey[600])}),(0,i.Z)(t,"&.".concat(Ty.checked," + .").concat(Ty.track),{opacity:.5}),(0,i.Z)(t,"&.".concat(Ty.disabled," + .").concat(Ty.track),{opacity:r.vars?r.vars.opacity.switchTrackDisabled:"".concat("light"===r.palette.mode?.12:.2)}),(0,i.Z)(t,"& .".concat(Ty.input),{left:"-100%",width:"300%"}),t}),(function(e){var t,r=e.theme,n=e.ownerState;return(0,E.Z)({"&:hover":{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.action.activeChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):(0,X.Fq)(r.palette.action.active,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&(t={},(0,i.Z)(t,"&.".concat(Ty.checked),(0,i.Z)({color:(r.vars||r).palette[n.color].main,"&:hover":{backgroundColor:r.vars?"rgba(".concat(r.vars.palette[n.color].mainChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):(0,X.Fq)(r.palette[n.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(Ty.disabled),{color:r.vars?r.vars.palette.Switch["".concat(n.color,"DisabledColor")]:"".concat("light"===r.palette.mode?(0,X.$n)(r.palette[n.color].main,.62):(0,X._j)(r.palette[n.color].main,.55))})),(0,i.Z)(t,"&.".concat(Ty.checked," + .").concat(Ty.track),{backgroundColor:(r.vars||r).palette[n.color].main}),t))})),Py=(0,I.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:function(e,t){return t.track}})((function(e){var t=e.theme;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}})),Ry=(0,I.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:function(e,t){return t.thumb}})((function(e){var t=e.theme;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),zy=e.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiSwitch"}),n=r.className,i=r.color,a=void 0===i?"primary":i,o=r.edge,s=void 0!==o&&o,l=r.size,c=void 0===l?"medium":l,h=r.sx,d=(0,T.Z)(r,Ey),f=(0,E.Z)({},r,{color:a,edge:s,size:c}),p=function(e){var t=e.classes,r=e.edge,n=e.size,i=e.color,a=e.checked,o=e.disabled,s={root:["root",r&&"edge".concat((0,R.Z)(r)),"size".concat((0,R.Z)(n))],switchBase:["switchBase","color".concat((0,R.Z)(i)),a&&"checked",o&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,M.Z)(s,Cy,t);return(0,E.Z)({},t,l)}(f),m=(0,x.jsx)(Ry,{className:p.thumb,ownerState:f});return(0,x.jsxs)(My,{className:(0,u.Z)(p.root,n),sx:h,ownerState:f,children:[(0,x.jsx)(Iy,(0,E.Z)({type:"checkbox",icon:m,checkedIcon:m,ref:t,ownerState:f},d,{classes:(0,E.Z)({},p,{root:p.switchBase})})),(0,x.jsx)(Py,{className:p.track,ownerState:f})]})})),Ly=r(5758),Dy=function(){window.location.assign("https://github.com/login/oauth/authorize?client_id=f7e95b44ab6db727ce72")},Oy=function(){var e=ha(ca().mark((function e(){var t;return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={itemId:"",name:"",lastName:"",userName:"",email:"",login:"",hasRemember:!1,isAdmin:!1},e.next=3,fetch("https://vision-dashboard.onrender.com/getUserData",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}).then((function(e){return e.json()})).then((function(e){return t=e,e})).catch((function(e){return console.log(e),e}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fy=((0,I.ZP)(zy)((function(e){var t=e.theme;return{width:28,height:16,padding:0,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:15},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(9px)"}},"& .MuiSwitch-switchBase":{padding:2,"&.Mui-checked":{transform:"translateX(12px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"dark"===t.palette.mode?"#177ddc":"#1890ff"}}},"& .MuiSwitch-thumb":{boxShadow:"0 2px 4px 0 rgb(0 35 11 / 20%)",width:12,height:12,borderRadius:6,transition:t.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:8,opacity:1,backgroundColor:"dark"===t.palette.mode?"rgba(255,255,255,.35)":"rgba(0,0,0,.25)",boxSizing:"border-box"}}})),function(){var t=Mt(),r=be(),n=(0,e.useState)(),a=(0,Z.Z)(n,2),s=a[0],l=a[1],c=(0,e.useState)({email:"",password:"",hasRemember:!1,userName:""}),u=(0,Z.Z)(c,2),h=u[0],d=u[1],f=ue((function(e){return e.entities.isHttpCalling})),p=Dv().object({email:Dv().string().email({tlds:{allow:!1}}).label("Email"),password:Dv().string().regex(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,"Password").message("Password Does Not Match pattern").label("Password"),hasRemember:Dv().boolean().required().label("Remember")}),m=function(e,t){var r="hasRemember"!==e.target.name&&_y(e.target,p);l(o(o({},s),{},(0,i.Z)({},e.target.name,r))),"hasRemember"===e.target.name?d((function(r){return o(o({},r),{},(0,i.Z)({},e.target.name,t))})):d((function(t){return o(o({},t),{},(0,i.Z)({},e.target.name,e.target.value))})),l(r?o(o({},s),{},(0,i.Z)({},e.target.name,r)):function(){var t=o({},s);return delete t[e.target.name],o({},t)})},v=function(){var e=ha(ca().mark((function e(){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("accessToken"),localStorage.removeItem("loginService"),r(_u()),r(bu(h,t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)(S,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"flex-start",flexWrap:"wrap",alignContent:{xs:"center",md:"flex-start"},flexDirection:"column",background:"linear-gradient(159.02deg, #0F123B 14.25%, #090D2E 56.45%, #020515 86.14%)",px:{xs:2,md:0},pl:{md:12},pt:{xs:26,sm:"23%",md:"25%",xl:"15%"},pb:5},children:[(0,x.jsx)(B,{variant:"h2",className:"u-text-big",color:"white",children:"Welcome"}),(0,x.jsx)(B,{sx:{maxWidth:"300px"},variant:"h6",className:"u-text-small",color:"gray.light",children:"Use these awesome forms to login or create new account in your for free."}),(0,x.jsxs)(S,{className:"u-opacity-0 u-fadein",sx:{width:"100%",maxWidth:{xs:"100%",md:"500px"},background:"linear-gradient(123.64deg, rgba(255, 255, 255, 0) -22.71%, rgba(255, 255, 255, 0.039) 70.04%)",backdropFilter:"blur(60px)",border:"1px solid transparent",borderImage:"linear-gradient(154deg, #ffffff0f 0%,  white 40%, #ffffff0f 100%) 1"},mt:4,p:4,children:[(0,x.jsx)(B,{variant:"h5",color:"white",align:"center",fontWeight:700,children:"Register with"}),(0,x.jsx)(S,{sx:{display:"flex",justifyContent:"center",gap:2},my:3,children:(0,x.jsx)(J,{onClick:function(){return r(_u()),void Dy()},className:"u-box-light-secondary",sx:{width:"75px",height:"75px"},children:(0,x.jsx)(Ly.Z,{sx:{color:"white",fontSize:"40px"}})})}),(0,x.jsx)(B,{variant:"h5",className:"u-text-small",color:"white",align:"center",my:2,children:"or"}),(0,x.jsxs)(nv,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between"},children:[(0,x.jsxs)(S,{sx:{width:"100%"},children:[(0,x.jsx)(uf,{className:"u-text-small",sx:{color:"white"},children:"Email"}),(0,x.jsx)(Im,{error:!(null===s||void 0===s||!s.email),helperText:(null===s||void 0===s?void 0:s.email)||"",onChange:function(e){return m(e)},name:"email",sx:{width:"100%",mt:1},required:!0,id:"form-email",label:"Email"})]}),(0,x.jsxs)(S,{sx:{width:"100%"},mt:3,children:[(0,x.jsx)(uf,{className:"u-text-small",sx:{color:"white"},children:"Password"}),(0,x.jsx)(Im,{error:!(null===s||void 0===s||!s.password),helperText:(null===s||void 0===s?void 0:s.password)||"",onChange:function(e){return m(e)},name:"password",sx:{width:"100%",mt:1},required:!0,id:"form-password",label:"Your Password",type:"password"})]}),(0,x.jsx)(fh,{onClick:v,disabled:f||!(!s||!Object.keys(s).length),variant:"contained",color:"primary",sx:{width:"100%",mt:3},children:"Sign Up"})]})]}),(0,x.jsxs)(B,{variant:"h6",className:"u-text-small",color:"white",mt:2,display:"flex",children:["Dont have an account?",(0,x.jsx)(Qt,{className:"u-link-primary",to:"/register",children:(0,x.jsx)(J,{className:"u-link-primary",component:"div",underline:"none",color:"white",ml:1,children:"Register"})})]})]})}),jy=function(){return(0,e.useEffect)((function(){localStorage.removeItem("accessToken"),localStorage.removeItem("loginService")}),[]),(0,x.jsxs)(yr,{container:!0,sx:{height:"100vh"},children:[(0,x.jsx)(yr,{item:!0,xs:12,md:6,sx:{display:{xs:"none",md:"block"}},children:(0,x.jsxs)(S,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:1,background:"url(".concat(Sy,")"),backgroundSize:"cover"},children:[(0,x.jsx)(B,{variant:"h4",color:"white",children:"INSPIRED BY THE FUTURE:"}),(0,x.jsx)(B,{variant:"h1",color:"white",fontWeight:700,children:"THE VISION UI DASHBOARD"})]})}),(0,x.jsx)(yr,{item:!0,xs:12,md:6,children:(0,x.jsx)(Fy,{})})]})},Ny={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},By=new Uint8Array(16);function Zy(){if(!Ay&&!(Ay="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ay(By)}for(var Uy=[],Vy=0;Vy<256;++Vy)Uy.push((Vy+256).toString(16).slice(1));function Wy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(Uy[e[t+0]]+Uy[e[t+1]]+Uy[e[t+2]]+Uy[e[t+3]]+"-"+Uy[e[t+4]]+Uy[e[t+5]]+"-"+Uy[e[t+6]]+Uy[e[t+7]]+"-"+Uy[e[t+8]]+Uy[e[t+9]]+"-"+Uy[e[t+10]]+Uy[e[t+11]]+Uy[e[t+12]]+Uy[e[t+13]]+Uy[e[t+14]]+Uy[e[t+15]]).toLowerCase()}var Gy=function(e,t,r){if(Ny.randomUUID&&!t&&!e)return Ny.randomUUID();var n=(e=e||{}).random||(e.rng||Zy)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return Wy(n)},Hy=((0,I.ZP)(zy)((function(e){var t=e.theme;return{width:28,height:16,padding:0,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:15},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(9px)"}},"& .MuiSwitch-switchBase":{padding:2,"&.Mui-checked":{transform:"translateX(12px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"dark"===t.palette.mode?"#177ddc":"#1890ff"}}},"& .MuiSwitch-thumb":{boxShadow:"0 2px 4px 0 rgb(0 35 11 / 20%)",width:12,height:12,borderRadius:6,transition:t.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:8,opacity:1,backgroundColor:"dark"===t.palette.mode?"rgba(255,255,255,.35)":"rgba(0,0,0,.25)",boxSizing:"border-box"}}})),function(){var t=Mt(),r=be(),n=ue((function(e){return e.entities.isHttpCalling})),a=(0,e.useState)(),s=(0,Z.Z)(a,2),l=s[0],c=s[1],u=(0,e.useState)({itemId:"",name:"",lastName:"",userName:"",email:"",password:"",confirmPassword:"",hasRemember:!1,isAdmin:!1}),h=(0,Z.Z)(u,2),d=h[0],f=h[1],p=Dv().object({name:Dv().string().min(3).label("Name").messages({"string.base":'"Name" should text',"string.empty":'"Name" cannot be empty',"string.min":'"Name" minimum should be {#limit} chars',"any.required":'"Name" is a required field'}),lastName:Dv().string().min(4).label("Last name").messages({"string.base":'"Last name" should text',"string.empty":'"Last name" cannot be empty',"string.min":'"Last name" minimum should be {#limit}',"any.required":'"Last name" is a required field'}),userName:Dv().string().regex(/^(?=[a-zA-Z0-9._]{8,20}$)(?!.*[_.]{2})[^_.].*[^_.]$/).label("User name"),email:Dv().string().email({tlds:{allow:!1}}).label("Email"),password:Dv().string().regex(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,"Password").message("Password Does Not Match pattern").label("Password"),confirmPassword:Dv().string().regex(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,"Password").message("Password Does Not Match pattern").label("Password"),hasRemember:Dv().boolean().required().label("Remember"),isAdmin:Dv().boolean().label("Admin")}),m=function(e,t){var r=_y(e.target,p);c(o(o({},l),{},(0,i.Z)({},e.target.name,r))),"hasRemember"===e.target.name?f((function(r){return o(o({},r),{},(0,i.Z)({},e.target.name,t))})):f((function(t){return o(o({},t),{},(0,i.Z)({},e.target.name,e.target.value))})),c(r?o(o({},l),{},(0,i.Z)({},e.target.name,r)):function(){var t=o({},l);return delete t[e.target.name],o({},t)}),"confirmPassword"===e.target.name?(null===d||void 0===d?void 0:d.password)!==e.target.value&&c((function(e){return o(o({},e),{},{confirmPassword:"Password Does Not Match"})})):"password"===e.target.name?f(o(o({},d),{},{password:e.target.value,confirmPassword:null})):"email"===e.target.name?f(o(o({},d),{},{email:e.target.value,userName:"".concat(e.target.value,"-").concat(Gy())})):c((function(e){var t=o({},e);return delete t.confirmPassword,o({},t)}))};return(0,e.useEffect)((function(){f(o(o({},d),{},{itemId:Gy()}))}),[]),(0,x.jsxs)(S,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"flex-start",flexWrap:"wrap",alignContent:{xs:"center",md:"flex-start"},flexDirection:"column",background:"linear-gradient(159.02deg, #0F123B 14.25%, #090D2E 56.45%, #020515 86.14%)",px:{xs:2,md:0},pl:{md:12},pt:{xs:26,sm:"23%",md:"25%",xl:"15%"},pb:5},children:[(0,x.jsx)(B,{variant:"h2",className:"u-text-big",color:"white",children:"Welcome"}),(0,x.jsx)(B,{sx:{maxWidth:"300px"},variant:"h6",className:"u-text-small",color:"gray.light",children:"Use these awesome forms to login or create new account in your for free."}),(0,x.jsxs)(S,{className:"u-opacity-0 u-fadein",sx:{width:"100%",maxWidth:{xs:"100%",md:"500px"},background:"linear-gradient(123.64deg, rgba(255, 255, 255, 0) -22.71%, rgba(255, 255, 255, 0.039) 70.04%)",backdropFilter:"blur(60px)",border:"1px solid transparent",borderImage:"linear-gradient(154deg, #ffffff0f 0%,  white 40%, #ffffff0f 100%) 1"},mt:4,p:4,children:[(0,x.jsx)(B,{variant:"h5",color:"white",align:"center",fontWeight:700,children:"Register with"}),(0,x.jsx)(S,{sx:{display:"flex",justifyContent:"center",gap:2},my:3,children:(0,x.jsx)(J,{onClick:function(){Dy()},className:"u-box-light-secondary",sx:{width:"75px",height:"75px"},children:(0,x.jsx)(Ly.Z,{sx:{color:"white",fontSize:"40px"}})})}),(0,x.jsx)(B,{variant:"h5",className:"u-text-small",color:"white",align:"center",my:2,children:"or"}),(0,x.jsxs)(nv,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between"},children:[(0,x.jsxs)(S,{sx:{width:{md:"48%"}},children:[(0,x.jsx)(uf,{className:"u-text-small",sx:{color:"white"},children:"Name"}),(0,x.jsx)(Im,{error:!(null===l||void 0===l||!l.name),helperText:(null===l||void 0===l?void 0:l.name)||"",onChange:function(e){return m(e)},name:"name",sx:{width:"100%",mt:1},required:!0,id:"form-name",label:"Your Name"})]}),(0,x.jsxs)(S,{sx:{width:{md:"48%"}},children:[(0,x.jsx)(uf,{className:"u-text-small",sx:{color:"white"},children:"Last name"}),(0,x.jsx)(Im,{error:!(null===l||void 0===l||!l.lastName),helperText:(null===l||void 0===l?void 0:l.lastName)||"",onChange:function(e){return m(e)},name:"lastName",sx:{width:"100%",mt:1},required:!0,id:"form-last-name",label:"Your Last Name"})]}),(0,x.jsxs)(S,{sx:{width:"100%"},mt:3,children:[(0,x.jsx)(uf,{className:"u-text-small",sx:{color:"white"},children:"Email"}),(0,x.jsx)(Im,{error:!(null===l||void 0===l||!l.email),helperText:(null===l||void 0===l?void 0:l.email)||"",onChange:function(e){return m(e)},name:"email",sx:{width:"100%",mt:1},required:!0,id:"form-email",label:"Your Email Address"})]}),(0,x.jsxs)(S,{sx:{width:{md:"48%"}},mt:3,children:[(0,x.jsx)(uf,{className:"u-text-small",sx:{color:"white"},children:"Password"}),(0,x.jsx)(Im,{error:!(null===l||void 0===l||!l.password),helperText:(null===l||void 0===l?void 0:l.password)||"",onChange:function(e){return m(e)},name:"password",sx:{width:"100%",mt:1},required:!0,id:"form-password",label:"Your Password",type:"password"})]}),(0,x.jsxs)(S,{sx:{width:{md:"48%"}},mt:3,children:[(0,x.jsx)(uf,{className:"u-text-small",sx:{color:"white"},children:"Confirm Password"}),(0,x.jsx)(Im,{error:!(null===l||void 0===l||!l.confirmPassword),helperText:(null===l||void 0===l?void 0:l.confirmPassword)||"",onChange:function(e){return m(e)},name:"confirmPassword",sx:{width:"100%",mt:1},required:!0,id:"form-confirm-password",label:"Your Password",type:"password"})]}),(0,x.jsx)(fh,{onClick:function(){console.log(d),r(function(e,t){return function(){var r=ha(ca().mark((function r(n,i){var a,o;return ca().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n(ic(!0)),-1!==i().accounts.accounts.findIndex((function(t){return t.email===e.email}))){r.next=13;break}return r.next=5,xu.createAccount(e);case 5:a=r.sent,n(Yl(a.data.data.createAccount)),o=i().accounts.accounts.findIndex((function(e){return e.email===a.data.data.createAccount.email})),n(ql(o)),n(ic(!1)),t("/#/"),r.next=15;break;case 13:nu.error("This email exist"),n(ic(!1));case 15:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}(d,t))},disabled:n||!(!l||!Object.keys(l).length),variant:"contained",color:"primary",sx:{width:"100%",mt:3},children:"Sign Up"})]})]}),(0,x.jsxs)(B,{variant:"h6",className:"u-text-small",color:"white",mt:2,display:"flex",children:["Already have an account?",(0,x.jsx)(Qt,{className:"u-link-primary",to:"/login",children:(0,x.jsx)(J,{className:"u-link-primary",component:"div",underline:"none",color:"white",ml:1,children:"Login"})})]})]})}),Xy=function(){return(0,e.useEffect)((function(){localStorage.removeItem("accessToken"),localStorage.removeItem("loginService")}),[]),(0,x.jsxs)(yr,{container:!0,sx:{height:"100vh"},children:[(0,x.jsx)(yr,{item:!0,xs:12,md:6,sx:{display:{xs:"none",md:"block"}},children:(0,x.jsxs)(S,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:1,background:"url(".concat(Sy,")"),backgroundSize:"cover"},children:[(0,x.jsx)(B,{variant:"h4",color:"white",children:"INSPIRED BY THE FUTURE:"}),(0,x.jsx)(B,{variant:"h1",color:"white",fontWeight:700,children:"THE VISION UI DASHBOARD"})]})}),(0,x.jsx)(yr,{item:!0,xs:12,md:6,children:(0,x.jsx)(Hy,{})})]})};var Yy=(0,z.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var qy=(0,z.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);function $y(e){return(0,L.Z)("MuiMenuItem",e)}var Ky=(0,z.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Jy=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],Qy=(0,I.ZP)(Xi,{shouldForwardProp:function(e){return(0,I.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]}})((function(e){var t,r=e.theme,n=e.ownerState;return(0,E.Z)({},r.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:"1px solid ".concat((r.vars||r).palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,i.Z)(t,"&.".concat(Ky.selected),(0,i.Z)({backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / ").concat(r.vars.palette.action.selectedOpacity,")"):(0,X.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)},"&.".concat(Ky.focusVisible),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.focusOpacity,"))"):(0,X.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)})),(0,i.Z)(t,"&.".concat(Ky.selected,":hover"),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.hoverOpacity,"))"):(0,X.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / ").concat(r.vars.palette.action.selectedOpacity,")"):(0,X.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)}}),(0,i.Z)(t,"&.".concat(Ky.focusVisible),{backgroundColor:(r.vars||r).palette.action.focus}),(0,i.Z)(t,"&.".concat(Ky.disabled),{opacity:(r.vars||r).palette.action.disabledOpacity}),(0,i.Z)(t,"& + .".concat(Yy.root),{marginTop:r.spacing(1),marginBottom:r.spacing(1)}),(0,i.Z)(t,"& + .".concat(Yy.inset),{marginLeft:52}),(0,i.Z)(t,"& .".concat(qu.root),{marginTop:0,marginBottom:0}),(0,i.Z)(t,"& .".concat(qu.inset),{paddingLeft:36}),(0,i.Z)(t,"& .".concat(qy.root),{minWidth:36}),t),!n.dense&&(0,i.Z)({},r.breakpoints.up("sm"),{minHeight:"auto"}),n.dense&&(0,E.Z)({minHeight:32,paddingTop:4,paddingBottom:4},r.typography.body2,(0,i.Z)({},"& .".concat(qy.root," svg"),{fontSize:"1.25rem"})))})),ex=e.forwardRef((function(t,r){var n=(0,P.Z)({props:t,name:"MuiMenuItem"}),i=n.autoFocus,a=void 0!==i&&i,o=n.component,s=void 0===o?"li":o,l=n.dense,c=void 0!==l&&l,h=n.divider,d=void 0!==h&&h,f=n.disableGutters,p=void 0!==f&&f,m=n.focusVisibleClassName,v=n.role,g=void 0===v?"menuitem":v,y=n.tabIndex,b=n.className,_=(0,T.Z)(n,Jy),w=e.useContext(ku),k=e.useMemo((function(){return{dense:c||w.dense||!1,disableGutters:p}}),[w.dense,c,p]),S=e.useRef(null);(0,Iu.Z)((function(){a&&S.current&&S.current.focus()}),[a]);var C,A=(0,E.Z)({},n,{dense:k.dense,divider:d,disableGutters:p}),I=function(e){var t=e.disabled,r=e.dense,n=e.divider,i=e.disableGutters,a=e.selected,o=e.classes,s={root:["root",r&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",a&&"selected"]},l=(0,M.Z)(s,$y,o);return(0,E.Z)({},o,l)}(n),R=(0,V.Z)(S,r);return n.disabled||(C=void 0!==y?y:-1),(0,x.jsx)(ku.Provider,{value:k,children:(0,x.jsx)(Qy,(0,E.Z)({ref:R,role:g,tabIndex:C,component:s,focusVisibleClassName:(0,u.Z)(I.focusVisible,m),className:(0,u.Z)(I.root,b)},_,{ownerState:A,classes:I}))})})),tx=function(){var t=(0,e.useState)(),r=(0,Z.Z)(t,2),n=r[0],a=r[1],s=be(),l=Mt(),c=(0,e.useState)({itemId:"",name:"",lastName:"",gender:!0,mobile:"",phone:"",address:"",service:"nurse",description:"",date:"",itemStatus:"pending",location:{latitude:50.11003957248653,longitude:8.687357922951406}}),u=(0,Z.Z)(c,2),h=u[0],d=u[1],f=ue((function(e){return e.entities.isHttpCalling})),p=ue((function(e){return e.accounts.currentAccount})),m=Dv().object({itemId:Dv().string().label("itemId"),name:Dv().string().min(3).label("Name"),lastName:Dv().string().min(4).label("Last name"),email:Dv().string().email({tlds:{allow:!1}}).label("Email"),gender:Dv().boolean().required().label("gender"),mobile:Dv().string().regex(/^\+[1-9]{1}[0-9]{3,14}$/).message("input is incorrect eg. +981234567890").required(),phone:Dv().string().regex(/^\+[1-9]{1}[0-9]{3,14}$/).message("input is incorrect eg. +981234567890").required(),address:Dv().string().required().label("Address"),service:Dv().string().required().label("Service"),description:Dv().string().label("Description"),date:Dv().date().iso().label("Date"),location:Dv().object({a:Dv().number().min(1).max(80).integer(),b:Dv().number().min(1).max(80).integer()}).label("Location")}),v=function(e){var t=_y(e.target,m);a(t?o(o({},n),{},(0,i.Z)({},e.target.name,t)):function(){var t=o({},n);return delete t[e.target.name],o({},t)}),d(o(o({},h),{},(0,i.Z)({},e.target.name,e.target.value)))},g=(0,e.useState)({gender:"male",service:"nurse"}),y=(0,Z.Z)(g,2),b=y[0],_=y[1],w=function(e){if(_(o(o({},b),{},(0,i.Z)({},e.target.name,e.target.value))),"gender"===e.target.name){var t="male"===e.target.value;d(o(o({},h),{},(0,i.Z)({},e.target.name,t)))}else d(o(o({},h),{},(0,i.Z)({},e.target.name,e.target.value)))};return(0,e.useEffect)((function(){var e=new Date;d(o(o({},h),{},{itemId:"request-"+Gy(),date:e.toISOString()}))}),[]),(0,x.jsx)("form",{children:(0,x.jsxs)(S,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:2,px:2,py:3},children:[(0,x.jsx)(Im,{name:"name",error:!(null===n||void 0===n||!n.name),helperText:(null===n||void 0===n?void 0:n.name)||"",onChange:function(e){return v(e)},sx:{width:{xs:"100%",md:"calc(50% - 8px)"},mt:1},required:!0,id:"form-name",label:"Your Name"}),(0,x.jsx)(Im,{name:"lastName",error:!(null===n||void 0===n||!n.lastName),helperText:(null===n||void 0===n?void 0:n.lastName)||"",onChange:function(e){return v(e)},sx:{width:{xs:"100%",md:"calc(50% - 8px)"},mt:1},required:!0,id:"form-last-name",label:"Your Last Name"}),(0,x.jsx)(Im,{name:"mobile",error:!(null===n||void 0===n||!n.mobile),helperText:(null===n||void 0===n?void 0:n.mobile)||"",onChange:function(e){return v(e)},sx:{width:{xs:"100%",md:"calc(50% - 8px)"},mt:1},required:!0,id:"form-mobile",label:"Mobile"}),(0,x.jsx)(Im,{name:"phone",error:!(null===n||void 0===n||!n.phone),helperText:(null===n||void 0===n?void 0:n.phone)||"",onChange:function(e){return v(e)},sx:{width:{xs:"100%",md:"calc(50% - 8px)"},mt:1},required:!0,id:"form-phone",label:"Phone number"}),(0,x.jsxs)(nd,{sx:{width:{xs:"100%",md:"calc(50% - 8px)"},mt:1},children:[(0,x.jsx)(pf,{id:"services-input",children:"Services"}),(0,x.jsxs)(Cm,{required:!0,name:"service",labelId:"services-input",id:"demo-simple-select",value:b.service,label:"Service",onChange:w,children:[(0,x.jsx)(ex,{value:"nurse",children:"Nurse"}),(0,x.jsx)(ex,{value:"doctor",children:"Doctor"})]})]}),(0,x.jsxs)(nd,{sx:{width:{xs:"100%",md:"calc(50% - 8px)"},mt:1},children:[(0,x.jsx)(pf,{id:"gender-input",children:"Gender"}),(0,x.jsxs)(Cm,{required:!0,name:"gender",labelId:"gender-input",id:"demo-simple-select",value:b.gender,label:"Gender",onChange:w,children:[(0,x.jsx)(ex,{value:"male",children:"Male"}),(0,x.jsx)(ex,{value:"female",children:"Female"}),(0,x.jsx)(ex,{value:"other",children:"other"})]})]}),(0,x.jsx)(Im,{name:"address",error:!(null===n||void 0===n||!n.address),helperText:(null===n||void 0===n?void 0:n.address)||"",onChange:function(e){return v(e)},sx:{width:{xs:"100%",md:"100%"},mt:1},required:!0,id:"form-address",label:"Address",multiline:!0,rows:4}),(0,x.jsx)(Im,{name:"description",error:!(null===n||void 0===n||!n.description),helperText:(null===n||void 0===n?void 0:n.description)||"",onChange:function(e){return v(e)},sx:{width:"100%",mt:1},required:!0,id:"form-description",label:"Description",multiline:!0,rows:6}),(0,x.jsxs)(S,{className:"u-box-light-secondary",sx:{width:"100%",height:"max-content",px:2,pt:2,pb:4,flexWrap:"wrap",my:2,justifyContent:"flex-start"},children:[(0,x.jsx)(B,{variant:"h5",color:"white",align:"left",children:"Choose Your Location"}),(0,x.jsx)(S,{sx:{width:"100%",height:"300px"},children:(0,x.jsx)(Uh,{location:h.location,darggable:!0,handler:function(e){return function(e){e&&d((function(t){return o(o({},t),{},{location:e})}))}(e)}})})]}),(0,x.jsx)(fh,{disabled:f||!(!n||!Object.keys(n).length),variant:"contained",color:"primary",sx:{width:"100%",mt:1},onClick:function(){s(function(e,t,r){return function(){var n=ha(ca().mark((function n(i){return ca().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xu.createRequest(e,t,r,"/archives/requests/").then((function(){i(mc(t))}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(p.itemId,h,l)),d({itemId:"",name:"",lastName:"",gender:!0,mobile:"",phone:"",address:"",service:"nurse",description:"",date:"",itemStatus:"pending",location:{latitude:50.11003957248653,longitude:8.687357922951406}})},children:"Create a request"})]})})},rx=function(){return(0,x.jsxs)(yr,{container:!0,sx:{width:"100%"},px:{xs:2,md:0},spacing:{md:2},children:[(0,x.jsx)(yr,{item:!0,xs:12,md:7.5,mb:2,children:(0,x.jsxs)(S,{className:"u-box-light u-opacity-0 u-fadein",sx:{width:"100%"},children:[(0,x.jsx)(S,{sx:{display:"flex",justifyContent:{xs:"center",md:"space-between"},alignItems:"center",flexWrap:"wrap",columnGap:4,rowGap:2},p:2,children:(0,x.jsx)(B,{mt:{xs:4,md:2},variant:"h5",color:"white",fontWeight:700,children:"Add Request"})}),(0,x.jsx)(tx,{})]})}),(0,x.jsx)(yr,{item:!0,xs:12,md:4.5,children:(0,x.jsx)(Vh,{description:"Here you can create a new request and try our oprators will respond you as soon as possible. You have to Submit all required inputs that have marked with star icon"})})]})},nx=function(){var e=Mt(),t=ue((function(e){return e.accounts.currentAccount}));return(0,x.jsx)(S,{sx:{width:"100%",minHeight:"70vh",display:"flex",justifyContent:"center",alignItems:"center",px:2},children:(0,x.jsxs)(S,{className:"u-box-light",sx:{width:"700px",height:"350px",display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",flexDirection:"column",gap:2},children:[(0,x.jsx)(B,{variant:"h2",color:"white",align:"center",fontWeight:700,textTransform:"capitalize",px:3,children:"Wow! You've got an Error here."}),(0,x.jsx)(B,{variant:"h5",color:"white",align:"center",textTransform:"capitalize",px:2,children:"Please go back home and try again"}),(0,x.jsx)(fh,{onClick:function(){Object.keys(t).length?e("/#/"):e("".concat("/#/","login"))},variant:"contained",color:"primary",children:"Try Again"})]})})},ix=function(){return(0,x.jsx)(S,{sx:{width:"100%",minHeight:"70vh",display:"flex",justifyContent:"center",alignItems:"center",px:2},children:(0,x.jsxs)(S,{className:"u-box-light",sx:{width:"700px",height:"350px",display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",flexDirection:"column",gap:2},children:[(0,x.jsx)(B,{variant:"h2",color:"white",align:"center",fontWeight:700,textTransform:"capitalize",px:2,children:"We have got a server error!"}),(0,x.jsx)(B,{variant:"h5",color:"white",align:"center",textTransform:"capitalize",px:2,children:"This app logged the error to the logger service and we will fix the problem. Thank you!"}),(0,x.jsx)(fh,{onClick:function(){return window.location.href="/"},variant:"contained",color:"primary",children:"Go Home"})]})})},ax=function(){var t=(0,e.useState)(!1),r=(0,Z.Z)(t,2),n=r[0],i=r[1],a=be();return(0,e.useEffect)((function(){var e=window.location.search,t=new URLSearchParams(e).get("code");if(t&&null===localStorage.getItem("accessToken")){var r=function(){var e=ha(ca().mark((function e(){return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://vision-dashboard.onrender.com/getAccessToken?code="+t,{method:"GET"}).then((function(e){return e.json()})).then((function(e){e.access_token&&(localStorage.setItem("accessToken",e.access_token),localStorage.setItem("loginService","github"),i(!n))})).catch((function(e){return e}));case 2:a(ic(!1));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a(ic(!0)),r()}}),[]),n};var ox=r.p+"static/media/loader.ddd27b591d4733e8ba456f4c18de3e73.svg",sx=function(e){var t=e.title;return(0,x.jsxs)(S,{sx:{width:"100%",height:"600px",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,x.jsx)(li,{sx:{width:"200px",height:"200px"},src:ox,alt:"Loading..."}),(0,x.jsx)(B,{variant:"h3",color:"white",children:t||" "})]})},lx=function(){var t=be(),r=Mt(),n=ue((function(e){return e.accounts})),i=ue((function(e){return e.entities.isHttpCalling})),a=(0,e.useState)(),o=(0,Z.Z)(a,2),s=o[0],l=o[1],c=(0,e.useState)(),u=(0,Z.Z)(c,2),h=u[0],d=u[1];return ax(),(0,e.useEffect)((function(){i||n.isLoading||null===localStorage.getItem("accessToken")||(console.log("meo"),ha(ca().mark((function e(){var i,a,o;return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ic(!0)),e.next=3,Oy().then((function(e){return t(ic(!1)),e})).catch((function(e){return t(ic(!1)),nu.error("Login with github failed"),r("".concat("/#/","login")),e}));case 3:i=e.sent,a="github-".concat(i.login,"-").concat(Gy()),o=n.accounts.findIndex((function(e){return e.userName===i.login})),l({itemId:a,name:i.name||i.login,lastName:"",userName:i.login,email:i.email,hasRemember:!1,isAdmin:!1}),d(o);case 8:case"end":return e.stop()}}),e)})))())}),[n.isLoading,localStorage.getItem("accessToken"),i]),(0,e.useEffect)((function(){var e;s&&-1!==h&&t(function(e,t){return function(){var r=ha(ca().mark((function r(n,i){return ca().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n(ql(e)),t("/#/");case 2:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}(h,r)),s&&-1===h&&null!==localStorage.getItem("accessToken")&&(t(function(e,t){return function(){var r=ha(ca().mark((function r(n,i){return ca().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,xu.createGithubAccount(e).then((function(t){return console.log(e),console.log(t),n(Yl(t.data.data.createAccount)),t.data.data.createAccount})).then((function(e){var r=i().accounts.accounts.findIndex((function(t){return t.userName===e.userName}));n(ql(r)),t("/#/")})).catch((function(e){console.log(e),nu.error("Something went wrong with github actions"),t("".concat("/#/","login"))}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}(s,r)),t((e=!1,function(t){t(Kl(e))})))}),[s,h]),(0,e.useEffect)((function(){i||n.isLoading||null!==localStorage.getItem("accessToken")||r("".concat("/#/","login"))}),[i,localStorage.getItem("accessToken")]),(0,x.jsx)(S,{sx:{width:"100%",minHeight:"70vh",display:"flex",justifyContent:"center",alignItems:"center",px:2},children:(0,x.jsx)(S,{sx:{width:"700px",height:"350px",display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",flexDirection:"column",gap:2},children:(0,x.jsx)(sx,{title:"Please Wait"})})})},cx=function(t){var r=t.itemId,n=t.isAdmin,a=t.sx,s=be(),l=Mt(),c=ue((function(e){return e.accounts.currentAccount})),u=ue((function(e){return e.accounts.accounts})),h=ue((function(e){return e.entities.isHttpCalling})),d=(0,e.useState)(),f=(0,Z.Z)(d,2),p=f[0],m=f[1],v=(0,e.useState)(),g=(0,Z.Z)(v,2),y=g[0],b=g[1],_=(0,e.useState)({title:"",description:"",isAdmin:n}),w=(0,Z.Z)(_,2),k=w[0],C=w[1],A=(0,e.useState)({itemId:"ticket-".concat(Gy()),date:(new Date).toISOString(),description:"",hasReply:!1,isClose:!1,isPending:!0,subject:"",responses:[{title:"",description:"",isAdmin:!1}]}),T=(0,Z.Z)(A,2),E=T[0],M=T[1],I=Dv().object({title:Dv().string().required().label("title"),description:Dv().string().required().label("response description")}),P=Dv().object({subject:Dv().string().required().label("ticket subject"),description:Dv().string().required().label("ticket description")}),R=function(e){var t=_y(e.target,I);m(t?o(o({},p),{},(0,i.Z)({},e.target.name,t)):function(){var t=o({},p);return delete t[e.target.name],o({},t)}),console.log("setResponseErrors",p),C(o(o({},k),{},(0,i.Z)({},e.target.name,e.target.value))),M(o(o({},E),{},{responses:[k]}))},z=function(e){var t=_y(e.target,P);b(t?o(o({},y),{},(0,i.Z)({},e.target.name,t)):function(){var t=o({},y);return delete t[e.target.name],o({},t)}),console.log("errors",y),M(o(o({},E),{},(0,i.Z)({},e.currentTarget.name,e.currentTarget.value)))},L=function(){var e,t,n;r&&c.itemId&&(s((e=c.itemId,t=E,n=l,function(){var r=ha(ca().mark((function r(i){return ca().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,xu.addTicket(e,t).then((function(e){console.log(e),i(Cc(t)),i(Jl(e.data.data.createTicket))}));case 2:n("".concat("/#/","archives/tickets"));case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())),M({itemId:"",date:"",description:"",hasReply:!1,isClose:!1,isPending:!0,subject:"",responses:[{title:"",description:"",isAdmin:!1}]}))};return(0,e.useEffect)((function(){var e=u.find((function(e){return e.itemId===c.itemId}));e&&M(o(o({},E),{},{accounts:e}))}),[c]),(0,x.jsxs)(S,{className:"u-box-light",height:"auto",mt:3,p:3,sx:o({},a),children:[(0,x.jsxs)(S,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,x.jsx)(B,{variant:"h5",color:"white",children:"Submit A Ticket"}),(0,x.jsx)(fh,{onClick:function(){return L()},variant:"contained",color:"primary",disabled:!!(h||y&&Object.keys(y).length||p&&Object.keys(p).length),children:"Post Ticket"})]}),(0,x.jsx)(S,{mt:2,children:(0,x.jsxs)(nd,{sx:{width:"100%"},children:[(0,x.jsxs)(S,{sx:{display:"flex",gap:2,mb:2},children:[(0,x.jsx)(Im,{id:"comment-ticket-title",name:"subject",value:E.subject,sx:{width:"100%"},label:"Enter Ticket Subject",type:"text",onChange:function(e){return z(e)},required:!0,error:!(null===y||void 0===y||!y.subject),helperText:(null===y||void 0===y?void 0:y.subject)||""}),(0,x.jsx)(Im,{id:"comment-ticket-description",name:"description",value:E.description,sx:{width:"100%"},label:"Enter Ticket Description",type:"text",onChange:function(e){return z(e)},required:!0,error:!(null===y||void 0===y||!y.description),helperText:(null===y||void 0===y?void 0:y.description)||""})]}),(0,x.jsx)(Im,{id:"comment-title",name:"title",value:k.title,sx:{width:"100%"},label:"Enter Title",type:"text",onChange:function(e){return R(e)},required:!0,error:!(null===p||void 0===p||!p.title),helperText:(null===p||void 0===p?void 0:p.title)||""}),(0,x.jsx)(Im,{id:"comment-description",name:"description",value:k.description,sx:{width:"100%",mt:2},label:"Enter Description",size:"small",multiline:!0,rows:6,onChange:function(e){return R(e)},required:!0,error:!(null===p||void 0===p||!p.description),helperText:(null===p||void 0===p?void 0:p.description)||""})]})})]})},ux=function(){var e=ue((function(e){return e.accounts.currentAccount}));be();return(0,x.jsx)(S,{className:"c-add-ticket",sx:{px:{sx:2,md:0}},children:(0,x.jsx)(S,{sx:{height:"70vh",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,x.jsx)(cx,{sx:{width:"650px",mx:2},itemId:Gy(),isAdmin:void 0!==e.isAdmin&&e.isAdmin})})})},hx=function(){var t=be(),r=ue((function(e){return e.accounts}));return(0,e.useEffect)((function(){t(pu()),t((function(e,t){var r=t().accounts.lastFetch;fa()().diff(fa()(r),"minutes")<10||xu.fetchAccounts()})),t(du())}),[]),(0,x.jsx)("section",{className:"o-page",children:(0,x.jsxs)(Gt,{children:[(0,x.jsx)(Vt,{element:(0,x.jsx)(Lh,{}),children:Object.keys(r.currentAccount).length?(0,x.jsxs)(Vt,{children:[(0,x.jsx)(Vt,{path:"/",element:r.currentAccount.isAdmin?(0,x.jsx)(ra,{}):(0,x.jsx)(Zt,{to:"/archives/requests"})}),(0,x.jsx)(Vt,{path:"/request/:id",element:(0,x.jsx)(qh,{})}),(0,x.jsx)(Vt,{path:"/ticket/:id",element:(0,x.jsx)(Rm,{})}),(0,x.jsx)(Vt,{path:"/user/:id",element:(0,x.jsx)(ky,{})}),(0,x.jsx)(Vt,{path:"/archives/:type",element:(0,x.jsx)(Nh,{})}),(0,x.jsx)(Vt,{path:"/add-request",element:(0,x.jsx)(rx,{})}),(0,x.jsx)(Vt,{path:"/add-ticket",element:(0,x.jsx)(ux,{})})]}):(0,x.jsx)(Vt,{path:"/",element:(0,x.jsx)(Zt,{to:"/verify"})})}),(0,x.jsxs)(Vt,{element:(0,x.jsx)(Oh,{}),children:[(0,x.jsx)(Vt,{path:"/login",element:(0,x.jsx)(jy,{})}),(0,x.jsx)(Vt,{path:"/register",element:(0,x.jsx)(Xy,{})})]}),(0,x.jsx)(Vt,{path:"/server-error",element:(0,x.jsx)(ix,{})}),(0,x.jsx)(Vt,{path:"*",element:(0,x.jsx)(nx,{})}),(0,x.jsx)(Vt,{path:"/verify",element:(0,x.jsx)(lx,{})})]})})},dx=function(e){e&&e instanceof Function&&r.e(787).then(r.bind(r,787)).then((function(t){var r=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;r(e),n(e),i(e),a(e),o(e)}))};function fx(){return fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fx.apply(this,arguments)}var px=r(8023),mx=r(9598),vx="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var gx=function(t){var r=t.children,n=t.theme,i=(0,mx.Z)(),a=e.useMemo((function(){var e=null===i?n:function(e,t){return"function"===typeof t?t(e):fx({},e,t)}(i,n);return null!=e&&(e[vx]=null!==i),e}),[n,i]);return(0,x.jsx)(px.Z.Provider,{value:a,children:r})},yx={};function xx(e){var t=(0,y.Z)();return(0,x.jsx)(br.T.Provider,{value:"object"===typeof t?t:yx,children:e.children})}var bx=function(e){var t=e.children,r=e.theme;return(0,x.jsx)(gx,{theme:r,children:(0,x.jsx)(xx,{children:t})})},_x=(0,w.Z)({palette:{mainPrimary:{main:"#0075FF",light:"#1A1F37",medium:"#0C1E81",dark:"#060B28",heavy:"#060B26"},accent:{main:"#05CD99",light:"#2CD9FF"},gray:{light:"#A0AEC0",dark:"#1A1F37"},purple:"#2C0C72",white:"#fff",black:" #000",success:{main:"#01B574",light:"#158354"},error:{main:"#C22C2C"},warning:{main:"#AF8415"}},typography:{h1:{fontSize:"2.25rem"},h2:{fontSize:"1.75rem"},h3:{fontSize:"1.5rem"},h4:{fontSize:"1.25rem"},h5:{fontSize:"1.125rem"},h6:{fontSize:"1rem"}},components:{MuiButtonBase:{styleOverrides:{root:{":disabled":{backgroundColor:"#a0aec0 !important"}}}},MuiButton:{styleOverrides:{root:{borderRadius:"12px"},colorInherit:{backgroundColor:"#0075FF"}}},MuiFormHelperText:{styleOverrides:{root:{backgroundColor:"#c22c2c !important",color:"#fff !important",borderRadius:"8px !important",padding:"4px 8px !important",margin:"4px 0 0 0  !important",width:"max-content !important"}}},MuiOutlinedInput:{styleOverrides:{root:{},input:{color:"#fff"},notchedOutline:{border:"1px solid transparent",borderImage:"linear-gradient(154deg, #ffffff0f 0%,  white 40%, #ffffff0f 100%) 1",color:"#fff"}}},MuiInputLabel:{styleOverrides:{root:{color:"#fff !important"}}}}});n.createRoot(document.getElementById("root")).render((0,x.jsx)(bx,{theme:_x,children:(0,x.jsx)(pe,{store:Ac,children:(0,x.jsx)(Jt,{children:(0,x.jsxs)(e.StrictMode,{children:[(0,x.jsx)(hx,{}),(0,x.jsx)(Xc,{})]})})})})),dx()}()}();
//# sourceMappingURL=main.5c500427.js.map